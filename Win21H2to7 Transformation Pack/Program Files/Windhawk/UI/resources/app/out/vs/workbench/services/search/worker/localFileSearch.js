/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/network","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ie=function(J){for(var e=[],C=0,O=J.length;C<O;C++)e[C]=ne[J[C]];return e};define(ne[10],ie([0,1]),function(J,e){"use strict";var C,O,R;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function I(s,n,r){let h=s.get(n);return h===void 0&&(h=r,s.set(n,h)),h}e.getOrSet=I;function _(s){const n=[];return s.forEach((r,h)=>{n.push(`${h} => ${r}`)}),`Map(${s.size}) {${n.join(", ")}}`}e.mapToString=_;function U(s){const n=[];return s.forEach(r=>{n.push(r)}),`Set(${s.size}) {${n.join(", ")}}`}e.setToString=U;class m{constructor(n,r){this.uri=n,this.value=r}}class d{constructor(n,r){this[C]="ResourceMap",n instanceof d?(this.map=new Map(n.map),this.toKey=r??d.defaultToKey):(this.map=new Map,this.toKey=n??d.defaultToKey)}set(n,r){return this.map.set(this.toKey(n),new m(n,r)),this}get(n){return this.map.get(this.toKey(n))?.value}has(n){return this.map.has(this.toKey(n))}get size(){return this.map.size}clear(){this.map.clear()}delete(n){return this.map.delete(this.toKey(n))}forEach(n,r){typeof r<"u"&&(n=n.bind(r));for(const[h,P]of this.map)n(P.value,P.uri,this)}*values(){for(const n of this.map.values())yield n.value}*keys(){for(const n of this.map.values())yield n.uri}*entries(){for(const n of this.map.values())yield[n.uri,n.value]}*[(C=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.map)yield[n.uri,n.value]}}e.ResourceMap=d,d.defaultToKey=s=>s.toString();class S{constructor(n,r){this[O]="ResourceSet",!n||typeof n=="function"?this._map=new d(n):(this._map=new d(r),n.forEach(this.add,this))}get size(){return this._map.size}add(n){return this._map.set(n,n),this}clear(){this._map.clear()}delete(n){return this._map.delete(n)}forEach(n,r){this._map.forEach((h,P)=>n.call(r,P,P,this))}has(n){return this._map.has(n)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=S;var M;(function(s){s[s.None=0]="None",s[s.AsOld=1]="AsOld",s[s.AsNew=2]="AsNew"})(M=e.Touch||(e.Touch={}));class j{constructor(){this[R]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(n){return this._map.has(n)}get(n,r=0){const h=this._map.get(n);if(!!h)return r!==0&&this.touch(h,r),h.value}set(n,r,h=0){let P=this._map.get(n);if(P)P.value=r,h!==0&&this.touch(P,h);else{switch(P={key:n,value:r,next:void 0,previous:void 0},h){case 0:this.addItemLast(P);break;case 1:this.addItemFirst(P);break;case 2:this.addItemLast(P);break;default:this.addItemLast(P);break}this._map.set(n,P),this._size++}return this}delete(n){return!!this.remove(n)}remove(n){const r=this._map.get(n);if(!!r)return this._map.delete(n),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const n=this._head;return this._map.delete(n.key),this.removeItem(n),this._size--,n.value}forEach(n,r){const h=this._state;let P=this._head;for(;P;){if(r?n.bind(r)(P.value,P.key,this):n(P.value,P.key,this),this._state!==h)throw new Error("LinkedMap got modified during iteration.");P=P.next}}keys(){const n=this,r=this._state;let h=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:h.key,done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return P}values(){const n=this,r=this._state;let h=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:h.value,done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return P}entries(){const n=this,r=this._state;let h=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:[h.key,h.value],done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return P}[(R=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(n){if(n>=this.size)return;if(n===0){this.clear();return}let r=this._head,h=this.size;for(;r&&h>n;)this._map.delete(r.key),r=r.next,h--;this._head=r,this._size=h,r&&(r.previous=void 0),this._state++}addItemFirst(n){if(!this._head&&!this._tail)this._tail=n;else if(this._head)n.next=this._head,this._head.previous=n;else throw new Error("Invalid list");this._head=n,this._state++}addItemLast(n){if(!this._head&&!this._tail)this._head=n;else if(this._tail)n.previous=this._tail,this._tail.next=n;else throw new Error("Invalid list");this._tail=n,this._state++}removeItem(n){if(n===this._head&&n===this._tail)this._head=void 0,this._tail=void 0;else if(n===this._head){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this._head=n.next}else if(n===this._tail){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this._tail=n.previous}else{const r=n.next,h=n.previous;if(!r||!h)throw new Error("Invalid list");r.previous=h,h.next=r}n.next=void 0,n.previous=void 0,this._state++}touch(n,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(n===this._head)return;const h=n.next,P=n.previous;n===this._tail?(P.next=void 0,this._tail=P):(h.previous=P,P.next=h),n.previous=void 0,n.next=this._head,this._head.previous=n,this._head=n,this._state++}else if(r===2){if(n===this._tail)return;const h=n.next,P=n.previous;n===this._head?(h.previous=void 0,this._head=h):(h.previous=P,P.next=h),n.next=void 0,n.previous=this._tail,this._tail.next=n,this._tail=n,this._state++}}}toJSON(){const n=[];return this.forEach((r,h)=>{n.push([h,r])}),n}fromJSON(n){this.clear();for(const[r,h]of n)this.set(r,h)}}e.LinkedMap=j;class p extends j{constructor(n,r=1){super(),this._limit=n,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(n){this._limit=n,this.checkTrim()}get ratio(){return this._ratio}set ratio(n){this._ratio=Math.min(Math.max(0,n),1),this.checkTrim()}get(n,r=2){return super.get(n,r)}peek(n){return super.get(n,0)}set(n,r){return super.set(n,r,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=p}),define(ne[5],ie([0,1,3,2,4,15]),function(J,e,C,O,R,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function _(o){return o===47||o===92}e.isPathSeparator=_;function U(o){return o.replace(/[\\/]/g,C.posix.sep)}e.toSlashes=U;function m(o){return o.indexOf("/")===-1&&(o=U(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}e.toPosixPath=m;function d(o,g=C.posix.sep){if(!o)return"";const b=o.length,D=o.charCodeAt(0);if(_(D)){if(_(o.charCodeAt(1))&&!_(o.charCodeAt(2))){let F=3;const G=F;for(;F<b&&!_(o.charCodeAt(F));F++);if(G!==F&&!_(o.charCodeAt(F+1))){for(F+=1;F<b;F++)if(_(o.charCodeAt(F)))return o.slice(0,F+1).replace(/[\\/]/g,g)}}return g}else if(h(D)&&o.charCodeAt(1)===58)return _(o.charCodeAt(2))?o.slice(0,2)+g:o.slice(0,2);let W=o.indexOf("://");if(W!==-1){for(W+=3;W<b;W++)if(_(o.charCodeAt(W)))return o.slice(0,W+1)}return""}e.getRoot=d;function S(o){if(!O.isWindows||!o||o.length<5)return!1;let g=o.charCodeAt(0);if(g!==92||(g=o.charCodeAt(1),g!==92))return!1;let b=2;const D=b;for(;b<o.length&&(g=o.charCodeAt(b),g!==92);b++);return!(D===b||(g=o.charCodeAt(b+1),isNaN(g)||g===92))}e.isUNC=S;const M=/[\\/:\*\?"<>\|]/g,j=/[\\/]/g,p=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(o,g=O.isWindows){const b=g?M:j;return!(!o||o.length===0||/^\s+$/.test(o)||(b.lastIndex=0,b.test(o))||g&&p.test(o)||o==="."||o===".."||g&&o[o.length-1]==="."||g&&o.length!==o.trim().length||o.length>255)}e.isValidBasename=s;function n(o,g,b){const D=o===g;return!b||D?D:!o||!g?!1:(0,R.equalsIgnoreCase)(o,g)}e.isEqual=n;function r(o,g,b,D=C.sep){if(o===g)return!0;if(!o||!g||g.length>o.length)return!1;if(b){if(!(0,R.startsWithIgnoreCase)(o,g))return!1;if(g.length===o.length)return!0;let F=g.length;return g.charAt(g.length-1)===D&&F--,o.charAt(F)===D}return g.charAt(g.length-1)!==D&&(g+=D),o.indexOf(g)===0}e.isEqualOrParent=r;function h(o){return o>=65&&o<=90||o>=97&&o<=122}e.isWindowsDriveLetter=h;function P(o,g){return O.isWindows&&o.endsWith(":")&&(o+=C.sep),(0,C.isAbsolute)(o)||(o=(0,C.join)(g,o)),o=(0,C.normalize)(o),O.isWindows?(o=(0,R.rtrim)(o,C.sep),o.endsWith(":")&&(o+=C.sep)):(o=(0,R.rtrim)(o,C.sep),o||(o=C.sep)),o}e.sanitizeFilePath=P;function T(o){const g=(0,C.normalize)(o);return O.isWindows?o.length>3?!1:N(g)&&(o.length===2||g.charCodeAt(2)===92):g===C.posix.sep}e.isRootOrDriveLetter=T;function N(o,g=O.isWindows){return g?h(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}e.hasDriveLetter=N;function Y(o){return N(o)?o[0]:void 0}e.getDriveLetter=Y;function E(o,g,b){return g.length>o.length?-1:o===g?0:(b&&(o=o.toLowerCase(),g=g.toLowerCase()),o.indexOf(g))}e.indexOfPath=E;function q(o){const g=o.split(":");let b,D,W;for(const F of g){const G=Number(F);(0,I.isNumber)(G)?D===void 0?D=G:W===void 0&&(W=G):b=b?[b,F].join(":"):F}if(!b)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:b,line:D!==void 0?D:void 0,column:W!==void 0?W:D!==void 0?1:void 0}}e.parseLineAndColumnAware=q;const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Q(o,g,b=8){let D="";for(let F=0;F<b;F++)D+=L.charAt(Math.floor(Math.random()*L.length));let W;return g?W=`${g}-${D}`:W=D,o?(0,C.join)(o,W):W}e.randomPath=Q}),define(ne[11],ie([0,1,2,6]),function(J,e,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var R;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebook="vscode-notebook",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(R=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class I{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${R.vscodeRemoteResource}`}setPreferredWebSchema(d){this._preferredWebSchema=d}setDelegate(d){this._delegate=d}setServerRootPath(d){this._remoteResourcesPath=`${d}/${R.vscodeRemoteResource}`}set(d,S,M){this._hosts[d]=S,this._ports[d]=M}setConnectionToken(d,S){this._connectionTokens[d]=S}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(d){if(this._delegate)return this._delegate(d);const S=d.authority;let M=this._hosts[S];M&&M.indexOf(":")!==-1&&M.indexOf("[")===-1&&(M=`[${M}]`);const j=this._ports[S],p=this._connectionTokens[S];let s=`path=${encodeURIComponent(d.path)}`;return typeof p=="string"&&(s+=`&${e.connectionTokenQueryName}=${encodeURIComponent(p)}`),O.URI.from({scheme:C.isWeb?this._preferredWebSchema:R.vscodeRemoteResource,authority:`${M}:${j}`,path:this._remoteResourcesPath,query:s})}}e.RemoteAuthorities=new I,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class _{asBrowserUri(d){const S=this.toUri(d,J);return this.uriToBrowserUri(S)}uriToBrowserUri(d){return d.scheme===R.vscodeRemote?e.RemoteAuthorities.rewrite(d):d.scheme===R.file&&(C.isNative||C.isWebWorker&&C.globals.origin===`${R.vscodeFileResource}://${_.FALLBACK_AUTHORITY}`)?d.with({scheme:R.vscodeFileResource,authority:d.authority||_.FALLBACK_AUTHORITY,query:null,fragment:null}):d}asFileUri(d){const S=this.toUri(d,J);return this.uriToFileUri(S)}uriToFileUri(d){return d.scheme===R.vscodeFileResource?d.with({scheme:R.file,authority:d.authority!==_.FALLBACK_AUTHORITY?d.authority:null,query:null,fragment:null}):d}toUri(d,S){return O.URI.isUri(d)?d:O.URI.parse(S.toUrl(d))}}_.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new _;var U;(function(m){const d=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(d.get("3"));const S="vscode-coi";function M(p){let s;typeof p=="string"?s=new URL(p).searchParams:p instanceof URL?s=p.searchParams:O.URI.isUri(p)&&(s=new URL(p.toString(!0)).searchParams);const n=s?.get(S);if(!!n)return d.get(n)}m.getHeadersFromQuery=M;function j(p,s,n){if(!globalThis.crossOriginIsolated)return;const r=s&&n?"3":n?"2":"1";p instanceof URLSearchParams?p.set(S,r):p[S]=r}m.addSearchParam=j})(U=e.COI||(e.COI={}))}),define(ne[7],ie([0,1,5,11,3,2,4,6]),function(J,e,C,O,R,I,_,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function m(p){return(0,U.uriToFsPath)(p,!0)}e.originalFSPath=m;class d{constructor(s){this._ignorePathCasing=s}compare(s,n,r=!1){return s===n?0:(0,_.compare)(this.getComparisonKey(s,r),this.getComparisonKey(n,r))}isEqual(s,n,r=!1){return s===n?!0:!s||!n?!1:this.getComparisonKey(s,r)===this.getComparisonKey(n,r)}getComparisonKey(s,n=!1){return s.with({path:this._ignorePathCasing(s)?s.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()}ignorePathCasing(s){return this._ignorePathCasing(s)}isEqualOrParent(s,n,r=!1){if(s.scheme===n.scheme){if(s.scheme===O.Schemas.file)return C.isEqualOrParent(m(s),m(n),this._ignorePathCasing(s))&&s.query===n.query&&(r||s.fragment===n.fragment);if((0,e.isEqualAuthority)(s.authority,n.authority))return C.isEqualOrParent(s.path,n.path,this._ignorePathCasing(s),"/")&&s.query===n.query&&(r||s.fragment===n.fragment)}return!1}joinPath(s,...n){return U.URI.joinPath(s,...n)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return R.posix.basename(s.path)}extname(s){return R.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let n;return s.scheme===O.Schemas.file?n=U.URI.file(R.dirname(m(s))).path:(n=R.posix.dirname(s.path),s.authority&&n.length&&n.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),n="/")),s.with({path:n})}normalizePath(s){if(!s.path.length)return s;let n;return s.scheme===O.Schemas.file?n=U.URI.file(R.normalize(m(s))).path:n=R.posix.normalize(s.path),s.with({path:n})}relativePath(s,n){if(s.scheme!==n.scheme||!(0,e.isEqualAuthority)(s.authority,n.authority))return;if(s.scheme===O.Schemas.file){const P=R.relative(m(s),m(n));return I.isWindows?C.toSlashes(P):P}let r=s.path||"/";const h=n.path||"/";if(this._ignorePathCasing(s)){let P=0;for(const T=Math.min(r.length,h.length);P<T&&!(r.charCodeAt(P)!==h.charCodeAt(P)&&r.charAt(P).toLowerCase()!==h.charAt(P).toLowerCase());P++);r=h.substr(0,P)+r.substr(P)}return R.posix.relative(r,h)}resolvePath(s,n){if(s.scheme===O.Schemas.file){const r=U.URI.file(R.resolve(m(s),n));return s.with({authority:r.authority,path:r.path})}return n=C.toPosixPath(n),s.with({path:R.posix.resolve(s.path,n)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,n){return s===n||s!==void 0&&n!==void 0&&(0,_.equalsIgnoreCase)(s,n)}hasTrailingPathSeparator(s,n=R.sep){if(s.scheme===O.Schemas.file){const r=m(s);return r.length>C.getRoot(r).length&&r[r.length-1]===n}else{const r=s.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,n=R.sep){return(0,e.hasTrailingPathSeparator)(s,n)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,n=R.sep){let r=!1;if(s.scheme===O.Schemas.file){const h=m(s);r=h!==void 0&&h.length===C.getRoot(h).length&&h[h.length-1]===n}else{n="/";const h=s.path;r=h.length===1&&h.charCodeAt(h.length-1)===47}return!r&&!(0,e.hasTrailingPathSeparator)(s,n)?s.with({path:s.path+"/"}):s}}e.ExtUri=d,e.extUri=new d(()=>!1),e.extUriBiasedIgnorePathCase=new d(p=>p.scheme===O.Schemas.file?!I.isLinux:!0),e.extUriIgnorePathCase=new d(p=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function S(p,s){const n=[];for(let r=0;r<p.length;r++){const h=s(p[r]);p.some((P,T)=>T===r?!1:(0,e.isEqualOrParent)(h,s(P)))||n.push(p[r])}return n}e.distinctParents=S;var M;(function(p){p.META_DATA_LABEL="label",p.META_DATA_DESCRIPTION="description",p.META_DATA_SIZE="size",p.META_DATA_MIME="mime";function s(n){const r=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach(T=>{const[N,Y]=T.split(":");N&&Y&&r.set(N,Y)});const P=n.path.substring(0,n.path.indexOf(";"));return P&&r.set(p.META_DATA_MIME,P),r}p.parseMetaData=s})(M=e.DataUri||(e.DataUri={}));function j(p,s,n){if(s){let r=p.path;return r&&r[0]!==R.posix.sep&&(r=R.posix.sep+r),p.with({scheme:n,authority:s,path:r})}return p.with({scheme:n})}e.toLocalResource=j}),define(ne[8],ie([0,1,12,16,17,18,7,2]),function(J,e,C,O,R,I,_,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function m(l){return!!l&&typeof l.then=="function"}e.isThenable=m;function d(l){const t=new C.CancellationTokenSource,i=l(t.token),a=new Promise((u,y)=>{const B=t.token.onCancellationRequested(()=>{B.dispose(),t.dispose(),y(new O.CancellationError)});Promise.resolve(i).then(z=>{B.dispose(),t.dispose(),u(z)},z=>{B.dispose(),t.dispose(),y(z)})});return new class{cancel(){t.cancel()}then(u,y){return a.then(u,y)}catch(u){return this.then(void 0,u)}finally(u){return a.finally(u)}}}e.createCancelablePromise=d;function S(l,t,i){return new Promise((a,u)=>{const y=t.onCancellationRequested(()=>{y.dispose(),a(i)});l.then(a,u).finally(()=>y.dispose())})}e.raceCancellation=S;function M(l,t){return new Promise((i,a)=>{const u=t.onCancellationRequested(()=>{u.dispose(),a(new O.CancellationError)});l.then(i,a).finally(()=>u.dispose())})}e.raceCancellationError=M;async function j(l){let t=-1;const i=l.map((u,y)=>u.then(B=>(t=y,B))),a=await Promise.race(i);return l.forEach((u,y)=>{y!==t&&u.cancel()}),a}e.raceCancellablePromises=j;function p(l,t,i){let a;const u=setTimeout(()=>{a?.(void 0),i?.()},t);return Promise.race([l.finally(()=>clearTimeout(u)),new Promise(y=>a=y)])}e.raceTimeout=p;function s(l){return new Promise((t,i)=>{const a=l();m(a)?a.then(t,i):t(a)})}e.asPromise=s;class n{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(t){if(this.activePromise){if(this.queuedPromiseFactory=t,!this.queuedPromise){const i=()=>{this.queuedPromise=null;const a=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,a};this.queuedPromise=new Promise(a=>{this.activePromise.then(i,i).then(a)})}return new Promise((i,a)=>{this.queuedPromise.then(i,a)})}return this.activePromise=t(),new Promise((i,a)=>{this.activePromise.then(u=>{this.activePromise=null,i(u)},u=>{this.activePromise=null,a(u)})})}}e.Throttler=n;class r{constructor(){this.current=Promise.resolve(null)}queue(t){return this.current=this.current.then(()=>t(),()=>t())}}e.Sequencer=r;class h{constructor(){this.promiseMap=new Map}queue(t,i){const u=(this.promiseMap.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.promiseMap.get(t)===u&&this.promiseMap.delete(t)});return this.promiseMap.set(t,u),u}}e.SequencerByKey=h;const P=(l,t)=>{let i=!0;const a=setTimeout(()=>{i=!1,t()},l);return{isTriggered:()=>i,dispose:()=>{clearTimeout(a),i=!1}}},T=l=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,l())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class N{constructor(t){this.defaultDelay=t,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(t,i=this.defaultDelay){this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((u,y)=>{this.doResolve=u,this.doReject=y}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const u=this.task;return this.task=null,u()}}));const a=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=i===e.MicrotaskDelay?T(a):P(i,a),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new O.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=N;class Y{constructor(t){this.delayer=new N(t),this.throttler=new n}trigger(t,i){return this.delayer.trigger(()=>this.throttler.queue(t),i)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=Y;class E{constructor(){this._isOpen=!1,this._promise=new Promise((t,i)=>{this._completePromise=t})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=E;class q extends E{constructor(t){super(),this._timeout=setTimeout(()=>this.open(),t)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=q;function L(l,t){return t?new Promise((i,a)=>{const u=setTimeout(()=>{y.dispose(),i()},l),y=t.onCancellationRequested(()=>{clearTimeout(u),y.dispose(),a(new O.CancellationError)})}):d(i=>L(l,i))}e.timeout=L;function Q(l,t=0){const i=setTimeout(l,t);return(0,I.toDisposable)(()=>clearTimeout(i))}e.disposableTimeout=Q;function o(l){const t=[];let i=0;const a=l.length;function u(){return i<a?l[i++]():null}function y(B){B!=null&&t.push(B);const z=u();return z?z.then(y):Promise.resolve(t)}return Promise.resolve(null).then(y)}e.sequence=o;function g(l,t=a=>!!a,i=null){let a=0;const u=l.length,y=()=>{if(a>=u)return Promise.resolve(i);const B=l[a++];return Promise.resolve(B()).then(V=>t(V)?Promise.resolve(V):y())};return y()}e.first=g;function b(l,t=a=>!!a,i=null){if(l.length===0)return Promise.resolve(i);let a=l.length;const u=()=>{a=-1;for(const y of l)y.cancel?.()};return new Promise((y,B)=>{for(const z of l)z.then(V=>{--a>=0&&t(V)?(u(),y(V)):a===0&&y(i)}).catch(V=>{--a>=0&&(u(),B(V))})})}e.firstParallel=b;class D{constructor(t){this._size=0,this.maxDegreeOfParalellism=t,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new R.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(t){return this._size++,new Promise((i,a)=>{this.outstandingPromises.push({factory:t,c:i,e:a}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const t=this.outstandingPromises.shift();this.runningPromises++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=D;class W extends D{constructor(){super(1)}}e.Queue=W;class F{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const t=new f;return this.drainers.add(t),t.p}isDrained(){for(const[,t]of this.queues)if(t.size>0)return!1;return!0}queueFor(t,i=_.extUri){const a=i.getComparisonKey(t);let u=this.queues.get(a);return u||(u=new W,R.Event.once(u.onDrained)(()=>{u?.dispose(),this.queues.delete(a),this.onDidQueueDrain()}),this.queues.set(a,u)),u}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const t of this.drainers)t.complete();this.drainers.clear()}dispose(){for(const[,t]of this.queues)t.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=F;class G{constructor(t,i){this._token=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,i){this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},i)}setIfNotSet(t,i){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},i))}}e.TimeoutTimer=G;class te{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(t,i){this.cancel(),this._token=setInterval(()=>{t()},i)}}e.IntervalTimer=te;class X{constructor(t,i){this.timeoutToken=-1,this.runner=t,this.timeout=i,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(t=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)}get delay(){return this.timeout}set delay(t){this.timeout=t}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=X;class x{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.runner=t,this.timeout=i,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(t=this.timeout){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(t/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=x;class Z extends X{constructor(t,i){super(t,i),this.units=[]}work(t){this.units.push(t),this.isScheduled()||this.schedule()}doRun(){const t=this.units;this.units=[],this.runner?.(t)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=Z;class se extends I.Disposable{constructor(t,i){super(),this.options=t,this.handler=i,this.pendingWork=[],this.throttler=this._register(new I.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(t){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+t.length>this.options.maxBufferedWork)return!1}else if(this.pending+t.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...t),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new X(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=se,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=l=>{(0,U.setTimeout0)(()=>{if(t)return;const i=Date.now()+15;l(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(l,t)=>{const i=requestIdleCallback(l,typeof t=="number"?{timeout:t}:void 0);let a=!1;return{dispose(){a||(a=!0,cancelIdleCallback(i))}}}}();class ${constructor(t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=$;async function K(l,t,i){let a;for(let u=0;u<i;u++)try{return await l()}catch(y){a=y,await L(t)}throw a}e.retry=K;class H{hasPending(t){return this._pending?typeof t=="number"?this._pending.taskId===t:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(t,i,a){return this._pending={taskId:t,cancel:()=>a?.(),promise:i},i.then(()=>this.donePending(t),()=>this.donePending(t)),i}donePending(t){this._pending&&t===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const t=this._next;this._next=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this._next)this._next.run=t;else{let i,a;const u=new Promise((y,B)=>{i=y,a=B});this._next={run:t,promise:u,promiseResolve:i,promiseReject:a}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=H;class ee{constructor(t,i=()=>Date.now()){this.interval=t,this.nowFn=i,this.lastIncrementTime=0,this.value=0}increment(){const t=this.nowFn();return t-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=t,this.value=0),this.value++,this.value}}e.IntervalCounter=ee;class f{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((t,i)=>{this.completeCallback=t,this.errorCallback=i})}complete(t){return new Promise(i=>{this.completeCallback(t),this.resolved=!0,i()})}error(t){return new Promise(i=>{this.errorCallback(t),this.rejected=!0,i()})}cancel(){new Promise(t=>{this.errorCallback(new O.CancellationError),this.rejected=!0,t()})}}e.DeferredPromise=f;var v;(function(l){async function t(a){let u;const y=await Promise.all(a.map(B=>B.then(z=>z,z=>{u||(u=z)})));if(typeof u<"u")throw u;return y}l.settled=t;function i(a){return new Promise(async(u,y)=>{try{await a(u,y)}catch(B){y(B)}})}l.withAsyncBody=i})(v=e.Promises||(e.Promises={}));var c;(function(l){l[l.Initial=0]="Initial",l[l.DoneOK=1]="DoneOK",l[l.DoneError=2]="DoneError"})(c||(c={}));class w{static fromArray(t){return new w(i=>{i.emitMany(t)})}static fromPromise(t){return new w(async i=>{i.emitMany(await t)})}static fromPromises(t){return new w(async i=>{await Promise.all(t.map(async a=>i.emitOne(await a)))})}static merge(t){return new w(async i=>{await Promise.all(t.map(async a=>{for await(const u of a)i.emitOne(u)}))})}constructor(t){this._state=0,this._results=[],this._error=null,this._onStateChanged=new R.Emitter,queueMicrotask(async()=>{const i={emitOne:a=>this.emitOne(a),emitMany:a=>this.emitMany(a),reject:a=>this.reject(a)};try{await Promise.resolve(t(i)),this.resolve()}catch(a){this.reject(a)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await R.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(t,i){return new w(async a=>{for await(const u of t)a.emitOne(i(u))})}map(t){return w.map(this,t)}static filter(t,i){return new w(async a=>{for await(const u of t)i(u)&&a.emitOne(u)})}filter(t){return w.filter(this,t)}static coalesce(t){return w.filter(t,i=>!!i)}coalesce(){return w.coalesce(this)}static async toPromise(t){const i=[];for await(const a of t)i.push(a);return i}toPromise(){return w.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}}e.AsyncIterableObject=w,w.EMPTY=w.fromArray([]);class k extends w{constructor(t,i){super(i),this._source=t}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=k;function A(l){const t=new C.CancellationTokenSource,i=l(t.token);return new k(t,async a=>{const u=t.token.onCancellationRequested(()=>{u.dispose(),t.dispose(),a.reject(new O.CancellationError)});try{for await(const y of i){if(t.token.isCancellationRequested)return;a.emitOne(y)}u.dispose(),t.dispose()}catch(y){u.dispose(),t.dispose(),a.reject(y)}})}e.createCancelableAsyncIterable=A}),define(ne[9],ie([0,1,19,8,5,10,3,2,4]),function(J,e,C,O,R,I,_,U,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function d(){return Object.create(null)}e.getEmptyExpression=d,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const S="[/\\\\]",M="[^/\\\\]",j=/\//g;function p(f,v){switch(f){case 0:return"";case 1:return`${M}*?`;default:return`(?:${S}|${M}+${S}${v?`|${S}${M}+`:""})*?`}}function s(f,v){if(!f)return[];const c=[];let w=!1,k=!1,A="";for(const l of f){switch(l){case v:if(!w&&!k){c.push(A),A="";continue}break;case"{":w=!0;break;case"}":w=!1;break;case"[":k=!0;break;case"]":k=!1;break}A+=l}return A&&c.push(A),c}e.splitGlobAware=s;function n(f){if(!f)return"";let v="";const c=s(f,e.GLOB_SPLIT);if(c.every(w=>w===e.GLOBSTAR))v=".*";else{let w=!1;c.forEach((k,A)=>{if(k===e.GLOBSTAR){if(w)return;v+=p(2,A===c.length-1)}else{let l=!1,t="",i=!1,a="";for(const u of k){if(u!=="}"&&l){t+=u;continue}if(i&&(u!=="]"||!a)){let y;u==="-"?y=u:(u==="^"||u==="!")&&!a?y="^":u===e.GLOB_SPLIT?y="":y=(0,m.escapeRegExpCharacters)(u),a+=y;continue}switch(u){case"{":l=!0;continue;case"[":i=!0;continue;case"}":{v+=`(?:${s(t,",").map(z=>n(z)).join("|")})`,l=!1,t="";break}case"]":{v+="["+a+"]",i=!1,a="";break}case"?":v+=M;continue;case"*":v+=p(1);continue;default:v+=(0,m.escapeRegExpCharacters)(u)}}A<c.length-1&&(c[A+1]!==e.GLOBSTAR||A+2<c.length)&&(v+=S)}w=k===e.GLOBSTAR})}return v}const r=/^\*\*\/\*\.[\w\.-]+$/,h=/^\*\*\/([\w\.-]+)\/?$/,P=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,T=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,N=/^\*\*((\/[\w\.-]+)+)\/?$/,Y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,E=new I.LRUCache(1e4),q=function(){return!1},L=function(){return null};function Q(f,v){if(!f)return L;let c;typeof f!="string"?c=f.pattern:c=f,c=c.trim();const w=`${c}_${!!v.trimForExclusions}`;let k=E.get(w);if(k)return o(k,f);let A;return r.test(c)?k=b(c.substr(4),c):(A=h.exec(g(c,v)))?k=D(A[1],c):(v.trimForExclusions?T:P).test(c)?k=W(c,v):(A=N.exec(g(c,v)))?k=F(A[1].substr(1),c,!0):(A=Y.exec(g(c,v)))?k=F(A[1],c,!1):k=G(c),E.set(w,k),o(k,f)}function o(f,v){if(typeof v=="string")return f;const c=function(w,k){return(0,R.isEqualOrParent)(w,v.base,!U.isLinux)?f((0,m.ltrim)(w.substr(v.base.length),_.sep),k):null};return c.allBasenames=f.allBasenames,c.allPaths=f.allPaths,c.basenames=f.basenames,c.patterns=f.patterns,c}function g(f,v){return v.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function b(f,v){return function(c,w){return typeof c=="string"&&c.endsWith(f)?v:null}}function D(f,v){const c=`/${f}`,w=`\\${f}`,k=function(l,t){return typeof l!="string"?null:t?t===f?v:null:l===f||l.endsWith(c)||l.endsWith(w)?v:null},A=[f];return k.basenames=A,k.patterns=[v],k.allBasenames=A,k}function W(f,v){const c=H(f.slice(1,-1).split(",").map(t=>Q(t,v)).filter(t=>t!==L),f),w=c.length;if(!w)return L;if(w===1)return c[0];const k=function(t,i){for(let a=0,u=c.length;a<u;a++)if(c[a](t,i))return f;return null},A=c.find(t=>!!t.allBasenames);A&&(k.allBasenames=A.allBasenames);const l=c.reduce((t,i)=>i.allPaths?t.concat(i.allPaths):t,[]);return l.length&&(k.allPaths=l),k}function F(f,v,c){const w=_.sep===_.posix.sep,k=w?f:f.replace(j,_.sep),A=_.sep+k,l=_.posix.sep+f;let t;return c?t=function(i,a){return typeof i=="string"&&(i===k||i.endsWith(A)||!w&&(i===f||i.endsWith(l)))?v:null}:t=function(i,a){return typeof i=="string"&&(i===k||!w&&i===f)?v:null},t.allPaths=[(c?"*/":"./")+f],t}function G(f){try{const v=new RegExp(`^${n(f)}$`);return function(c){return v.lastIndex=0,typeof c=="string"&&v.test(c)?f:null}}catch{return L}}function te(f,v,c){return!f||typeof v!="string"?!1:X(f)(v,void 0,c)}e.match=te;function X(f,v={}){if(!f)return q;if(typeof f=="string"||x(f)){const c=Q(f,v);if(c===L)return q;const w=function(k,A){return!!c(k,A)};return c.allBasenames&&(w.allBasenames=c.allBasenames),c.allPaths&&(w.allPaths=c.allPaths),w}return $(f,v)}e.parse=X;function x(f){const v=f;return v?typeof v.base=="string"&&typeof v.pattern=="string":!1}e.isRelativePattern=x;function Z(f){return f.allBasenames||[]}e.getBasenameTerms=Z;function se(f){return f.allPaths||[]}e.getPathTerms=se;function $(f,v){const c=H(Object.getOwnPropertyNames(f).map(t=>K(t,f[t],v)).filter(t=>t!==L)),w=c.length;if(!w)return L;if(!c.some(t=>!!t.requiresSiblings)){if(w===1)return c[0];const t=function(u,y){let B;for(let z=0,V=c.length;z<V;z++){const re=c[z](u,y);if(typeof re=="string")return re;(0,O.isThenable)(re)&&(B||(B=[]),B.push(re))}return B?(async()=>{for(const z of B){const V=await z;if(typeof V=="string")return V}return null})():null},i=c.find(u=>!!u.allBasenames);i&&(t.allBasenames=i.allBasenames);const a=c.reduce((u,y)=>y.allPaths?u.concat(y.allPaths):u,[]);return a.length&&(t.allPaths=a),t}const k=function(t,i,a){let u,y;for(let B=0,z=c.length;B<z;B++){const V=c[B];V.requiresSiblings&&a&&(i||(i=(0,_.basename)(t)),u||(u=i.substr(0,i.length-(0,_.extname)(t).length)));const re=V(t,i,u,a);if(typeof re=="string")return re;(0,O.isThenable)(re)&&(y||(y=[]),y.push(re))}return y?(async()=>{for(const B of y){const z=await B;if(typeof z=="string")return z}return null})():null},A=c.find(t=>!!t.allBasenames);A&&(k.allBasenames=A.allBasenames);const l=c.reduce((t,i)=>i.allPaths?t.concat(i.allPaths):t,[]);return l.length&&(k.allPaths=l),k}function K(f,v,c){if(v===!1)return L;const w=Q(f,c);if(w===L)return L;if(typeof v=="boolean")return w;if(v){const k=v.when;if(typeof k=="string"){const A=(l,t,i,a)=>{if(!a||!w(l,t))return null;const u=k.replace("$(basename)",i),y=a(u);return(0,O.isThenable)(y)?y.then(B=>B?f:null):y?f:null};return A.requiresSiblings=!0,A}}return w}function H(f,v){const c=f.filter(t=>!!t.basenames);if(c.length<2)return f;const w=c.reduce((t,i)=>{const a=i.basenames;return a?t.concat(a):t},[]);let k;if(v){k=[];for(let t=0,i=w.length;t<i;t++)k.push(v)}else k=c.reduce((t,i)=>{const a=i.patterns;return a?t.concat(a):t},[]);const A=function(t,i){if(typeof t!="string")return null;if(!i){let u;for(u=t.length;u>0;u--){const y=t.charCodeAt(u-1);if(y===47||y===92)break}i=t.substr(u)}const a=w.indexOf(i);return a!==-1?k[a]:null};A.basenames=w,A.patterns=k,A.allBasenames=w;const l=f.filter(t=>!t.basenames);return l.push(A),l}function ee(f,v){return(0,C.equals)(f,v,(c,w)=>typeof c=="string"&&typeof w=="string"?c===w:typeof c!="string"&&typeof w!="string"?c.base===w.base&&c.pattern===w.pattern:!1)}e.patternsEquals=ee}),define(ne[13],ie([0,1,20]),function(J,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const O=(R,I,_)=>{let U;if(R[0]===255&&R[1]===254)U=new TextDecoder("utf-16le").decode(R);else if(R[0]===254&&R[1]===255)U=new TextDecoder("utf-16be").decode(R);else if(U=new TextDecoder("utf8").decode(R),U.slice(0,1e3).includes("\uFFFD")&&R.includes(0))return[];const m=[],d=[];let S=null,M=_.remainingResultQuota;for(;M>=0&&(S=I.exec(U));)d.push({matchStartIndex:S.index,matchedText:S[0]}),M--;if(d.length){const j=new Set,p=new Set,s=[],n=N=>U.slice(s[N].start,s[N].end);let r=0,h=null;const P=/\r?\n/g;for(;h=P.exec(U);)s.push({start:r,end:h.index}),r=h.index+h[0].length;r<U.length&&s.push({start:r,end:U.length});let T=0;for(const{matchStartIndex:N,matchedText:Y}of d){if(M<0)break;for(;Boolean(s[T+1])&&N>s[T].end;)T++;let E=T;for(;Boolean(s[E+1])&&N+Y.length>s[E].end;)E++;if(_.beforeContext)for(let b=Math.max(0,T-_.beforeContext);b<T;b++)j.add(b);let q="",L=0;for(let b=T;b<=E;b++){let D=n(b);_.previewOptions?.charsPerLine&&D.length>_.previewOptions.charsPerLine&&(L=Math.max(N-s[T].start-20,0),D=D.substr(L,_.previewOptions.charsPerLine)),q+=`${D}
`,p.add(b)}const Q=new C.Range(T,N-s[T].start,E,N+Y.length-s[E].start),o=new C.Range(0,N-s[T].start-L,E-T,N+Y.length-s[E].start-(E===T?L:0)),g={ranges:Q,preview:{text:q,matches:o}};if(m.push(g),_.afterContext)for(let b=E+1;b<=Math.min(E+_.afterContext,s.length-1);b++)j.add(b)}for(const N of j)p.has(N)||m.push({text:n(N),lineNumber:N+1})}return m};e.getFileResults=O}),define(ne[14],ie([0,1,9]),function(J,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class O{constructor(I,_,U){if(this.location=_,this.parent=U,_[_.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");_[_.length-1]!=="/"&&(_+="/"),this.isPathIgnored=this.parseIgnoreFile(I,this.location,this.parent)}updateContents(I){this.isPathIgnored=this.parseIgnoreFile(I,this.location,this.parent)}isPathIncludedInTraversal(I,_){if(I[0]!=="/"||I[I.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+I);return!this.isPathIgnored(I,_)}isArbitraryPathIgnored(I,_){if(I[0]!=="/"||I[I.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+I);const U=I.split("/").filter(S=>S);let m=!1,d="";for(let S=0;S<U.length;S++){const M=S===U.length-1,j=U[S];if(d=d+"/"+j,!this.isPathIncludedInTraversal(d,M?_:!0)){m=!0;break}}return m}gitignoreLinesToExpression(I,_,U){const m=I.map(S=>this.gitignoreLineToGlob(S,_)),d=Object.create(null);for(const S of m)d[S]=!0;return C.parse(d,{trimForExclusions:U})}parseIgnoreFile(I,_,U){const m=I.split(`
`).map(T=>T.trim()).filter(T=>T&&T[0]!=="#"),d=m.filter(T=>!T.endsWith("/")),S=d.filter(T=>!T.includes("!")),M=this.gitignoreLinesToExpression(S,_,!0),j=d.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),p=this.gitignoreLinesToExpression(j,_,!1),s=m.filter(T=>!T.includes("!")),n=this.gitignoreLinesToExpression(s,_,!0),r=m.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),h=this.gitignoreLinesToExpression(r,_,!1);return(T,N)=>T.startsWith(_)?N&&n(T)&&!h(T)||M(T)&&!p(T)?!0:U?U.isPathIgnored(T,N):!1:!1}gitignoreLineToGlob(I,_){const U=I.indexOf("/");return U===-1||U===I.length-1?I="**/"+I:(U===0?_.slice(-1)==="/"&&(I=I.slice(1)):_.slice(-1)!=="/"&&(I="/"+I),I=_+I),I}}e.IgnoreFile=O}),define(ne[21],ie([0,1,9,6,3,12,13,14,4,8,7]),function(J,e,C,O,R,I,_,U,m,d,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const M=!1,j=+new Date,p={},s=async(E,q)=>{if(!M)return q();const L=Date.now(),Q=(p[E]??0)+1;console.info(E,Q,"starting",Math.round((L-j)*10)/1e4),p[E]=Q;const o=await q(),g=Date.now();return console.info(E,Q,"took",g-L),o};function n(E){return new r(E)}e.create=n;class r{constructor(q){this.host=q,this.cancellationTokens=new Map}cancelQuery(q){this.cancellationTokens.get(q)?.cancel()}registerCancellationToken(q){const L=new I.CancellationTokenSource;return this.cancellationTokens.set(q,L),L}async listDirectory(q,L,Q,o,g){const b=P(Q),D=new S.ExtUri(()=>o),W=this.registerCancellationToken(g),F=[];let G=!1,te=0;const X=L.maxResults||512,x=L.filePattern?Z=>L.filePattern.split("").every(se=>Z.includes(se)):Z=>!0;return await s("listDirectory",()=>this.walkFolderQuery(q,T(L),b,D,Z=>{if(!!x(Z.name))return te++,X&&te>X&&(G=!0,W.cancel()),F.push(Z.path)},W.token)),{results:F,limitHit:G}}async searchDirectory(q,L,Q,o,g){const b=P(Q),D=new S.ExtUri(()=>o);return s("searchInFiles",async()=>{const W=this.registerCancellationToken(g),F=[],G=h(L.contentPattern),te=[];let X=0,x=0;const Z=!1,se=async $=>{if(W.token.isCancellationRequested)return;X++;const K=await $.resolve();if(W.token.isCancellationRequested)return;const H=new Uint8Array(K),ee=(0,_.getFileResults)(H,G,{afterContext:L.afterContext??0,beforeContext:L.beforeContext??0,previewOptions:L.previewOptions,remainingResultQuota:L.maxResults?L.maxResults-x:1e4});if(ee.length){x+=ee.length,L.maxResults&&x>L.maxResults&&W.cancel();const f={resource:O.URI.joinPath(b.folder,$.path),results:ee};this.host.sendTextSearchMatch(f,g),F.push(f)}};return await s("walkFolderToResolve",()=>this.walkFolderQuery(q,T(L),b,D,async $=>te.push(se($)),W.token)),await s("resolveOngoingProcesses",()=>Promise.all(te)),M&&console.log("Searched in",X,"files"),{results:F,limitHit:Z}})}async walkFolderQuery(q,L,Q,o,g,b){const D=C.parse(Q.excludePattern??{},{trimForExclusions:!0}),W=($,K,H)=>($=$.slice(1),!!(D($,K,H)||N(L,$))),F=($,K,H)=>($=$.slice(1),!(D($,K,H)||!Y(L,$,o))),G=($,K)=>({type:"file",name:$.name,path:K,resolve:()=>$.getFile().then(ee=>ee.arrayBuffer())}),te=$=>$.kind==="directory",X=$=>$.kind==="file",x=async($,K,H)=>{if(!Q.disregardIgnoreFiles){const f=await Promise.all([$.getFileHandle(".gitignore").catch(v=>{}),$.getFileHandle(".ignore").catch(v=>{})]);await Promise.all(f.map(async v=>{if(!v)return;const c=new TextDecoder("utf8").decode(new Uint8Array(await(await v.getFile()).arrayBuffer()));H=new U.IgnoreFile(c,K,H)}))}const ee=d.Promises.withAsyncBody(async f=>{const v=[],c=[],w=[],k=new Set;for await(const A of $.entries())w.push(A),k.add(A[0]);for(const[A,l]of w){if(b.isCancellationRequested)break;const t=K+A;if(H&&!H.isPathIncludedInTraversal(t,l.kind==="directory"))continue;const i=a=>k.has(a);te(l)&&!W(t,A,i)?c.push(x(l,t+"/",H)):X(l)&&F(t,A,i)&&v.push(G(l,t))}f([...await Promise.all(c),...v])});return{type:"dir",name:$.name,entries:ee}},Z=async($,K)=>{b.isCancellationRequested||await Promise.all((await $.entries).sort((H,ee)=>-(H.type==="dir"?0:1)+(ee.type==="dir"?0:1)).map(async H=>H.type==="dir"?Z(H,K):K(H)))},se=await s("process",()=>x(q,"/"));await s("resolve",()=>Z(se,g))}}e.LocalFileSearchSimpleWorker=r;function h(E){return(0,m.createRegExp)(E.pattern,!!E.isRegExp,{wholeWord:E.isWordMatch,global:!0,matchCase:E.isCaseSensitive,multiline:!0,unicode:!0})}function P(E){return{...E,folder:O.URI.revive(E.folder)}}function T(E){return{...E,extraFileResources:E.extraFileResources?.map(q=>O.URI.revive(q)),folderQueries:E.folderQueries.map(q=>P(q))}}function N(E,q){return!!(E.excludePattern&&C.match(E.excludePattern,q))}function Y(E,q,L){return E.excludePattern&&C.match(E.excludePattern,q)?!1:E.includePattern||E.usingSearchPaths?E.includePattern&&C.match(E.includePattern,q)?!0:E.usingSearchPaths?!!E.folderQueries&&E.folderQueries.some(Q=>{const o=Q.folder,g=O.URI.file(q);if(L.isEqualOrParent(g,o)){const b=R.relative(o.path,g.path);return!Q.includePattern||!!C.match(Q.includePattern,b)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/d2c422ca15f1fbc976eed3e02e3392bbb39c5824/core/vs\workbench\services\search\worker\localFileSearch.js.map
