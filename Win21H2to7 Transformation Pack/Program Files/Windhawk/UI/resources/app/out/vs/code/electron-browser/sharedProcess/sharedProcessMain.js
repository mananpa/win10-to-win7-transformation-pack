/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var se=["require","exports","vs/base/common/lifecycle","vs/base/common/event","vs/platform/instantiation/common/instantiation","vs/base/common/platform","vs/base/common/async","vs/base/common/uri","vs/platform/log/common/log","vs/base/common/errors","vs/nls","vs/nls!vs/code/electron-browser/sharedProcess/sharedProcessMain","vs/base/common/path","vs/platform/files/common/files","vs/base/common/types","vs/platform/environment/common/environment","vs/platform/configuration/common/configuration","vs/base/common/buffer","vs/platform/userDataProfile/common/userDataProfile","vs/platform/storage/common/storage","vs/base/common/arrays","vs/base/common/network","vs/base/common/resources","vs/platform/telemetry/common/telemetry","vs/base/common/cancellation","vs/platform/product/common/productService","vs/platform/userDataSync/common/userDataSync","vs/base/common/strings","vs/base/node/pfs","vs/platform/extensionManagement/common/extensionManagement","vs/platform/uriIdentity/common/uriIdentity","vs/base/common/uuid","vs/base/common/objects","vs/platform/extensionManagement/common/extensionManagementUtil","os","vs/base/common/json","vs/base/common/process","vs/base/common/map","vs/base/common/errorMessage","vs/base/parts/ipc/common/ipc","vs/platform/registry/common/platform","vs/platform/userDataSync/common/abstractSynchronizer","vs/platform/extensions/common/extensions","vs/base/common/jsonFormatter","vs/base/common/stream","vs/platform/externalServices/common/serviceMachineId","vs/platform/configuration/common/configurationRegistry","vs/base/common/extpath","vs/base/common/ternarySearchTree","child_process","vs/platform/telemetry/common/telemetryUtils","vs/base/common/codicons","fs","vs/base/common/semver/semver","vs/platform/instantiation/common/descriptors","vs/platform/files/common/watcher","vs/platform/ipc/electron-sandbox/services","vs/platform/native/electron-sandbox/native","vs/platform/policy/common/policy","vs/platform/request/common/request","vs/platform/userDataSync/common/content","vs/platform/extensionManagement/common/extensionsProfileScannerService","vs/platform/userDataProfile/common/userDataProfileStorageService","vs/base/common/decorators","vs/base/common/iterator","vs/base/common/date","vs/base/common/hash","vs/base/common/marshalling","vs/base/parts/ipc/node/ipc.cp","vs/base/parts/storage/common/storage","vs/platform/extensions/common/extensionValidator","vs/platform/instantiation/common/extensions","vs/platform/instantiation/common/serviceCollection","vs/platform/languagePacks/common/languagePacks","vs/platform/configuration/common/configurationModels","vs/platform/remote/common/remoteHosts","vs/platform/storage/common/storageIpc","vs/platform/tunnel/common/tunnel","vs/platform/userDataSync/common/userDataSyncAccount","vs/platform/extensionManagement/common/extensionsScannerService","vs/platform/extensionManagement/common/extensionStorage","vs/platform/userDataSync/common/userDataSyncMachines","vs/base/common/functional","vs/base/common/jsonEdit","vs/base/common/linkedList","vs/base/common/normalization","net","vs/base/common/processes","vs/base/common/severity","vs/base/common/glob","vs/base/node/powershell","vs/base/node/processes","vs/base/parts/ipc/common/ipc.net","electron","vs/platform/environment/common/environmentService","vs/platform/environment/node/userDataPath","vs/platform/diagnostics/common/diagnostics","vs/platform/download/common/download","vs/platform/extensionManagement/node/extensionSignatureVerificationService","vs/platform/extensionRecommendations/common/extensionRecommendations","crypto","vs/platform/files/common/io","vs/platform/lifecycle/electron-browser/sharedProcessLifecycleService","vs/platform/log/common/logIpc","vs/platform/product/common/product","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/remoteTunnel/common/remoteTunnel","vs/platform/sharedProcess/common/sharedProcessWorkerService","vs/platform/sign/common/sign","vs/platform/telemetry/common/commonProperties","vs/platform/telemetry/common/telemetryIpc","vs/platform/telemetry/common/telemetryLogAppender","vs/platform/telemetry/common/telemetryService","vs/platform/terminal/common/terminal","vs/platform/theme/common/themeService","vs/platform/userDataSync/common/ignoredExtensions","vs/platform/workspace/common/workspace","vs/platform/extensionManagement/common/extensionEnablementService","vs/platform/userDataSync/common/extensionsSync","vs/platform/userDataSync/common/globalStateSync","vs/platform/userDataSync/common/keybindingsSync","vs/platform/userDataSync/common/settingsSync","vs/platform/userDataSync/common/snippetsSync","vs/platform/userDataSync/common/tasksSync","vs/platform/userDataSync/common/userDataProfilesManifestSync","vs/base/node/zip","vs/platform/extensionManagement/node/extensionManagementService","vs/base/common/assert","vs/base/common/lazy","vs/base/common/skipList","vs/base/node/macAddress","vs/base/node/ports","vs/base/parts/request/common/request","vs/base/parts/request/browser/request","vs/nls!vs/base/common/date","vs/nls!vs/base/common/errorMessage","vs/nls!vs/base/common/jsonErrorMessages","vs/base/common/jsonErrorMessages","vs/nls!vs/base/common/platform","vs/base/common/mime","vs/base/common/stopwatch","vs/base/common/cache","vs/base/common/console","vs/base/common/uriIpc","vs/base/node/id","vs/base/node/extpath","vs/base/node/ps","vs/base/node/shell","vs/base/parts/ipc/common/ipc.mp","vs/base/parts/ipc/electron-browser/ipc.mp","vs/base/parts/ipc/node/ipc.net","vs/nls!vs/base/node/zip","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/environment/node/argv","vs/nls!vs/platform/environment/node/argvHelper","vs/nls!vs/platform/extensionManagement/common/abstractExtensionManagementService","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensionManagement/common/extensionNls","vs/nls!vs/platform/extensionManagement/common/extensionsScannerService","vs/nls!vs/platform/extensionManagement/electron-sandbox/extensionTipsService","vs/nls!vs/platform/extensionManagement/node/extensionManagementService","vs/nls!vs/platform/extensionManagement/node/extensionManagementUtil","vs/nls!vs/platform/extensions/common/extensionValidator","vs/nls!vs/platform/files/common/fileService","vs/nls!vs/platform/files/common/files","vs/nls!vs/platform/files/common/io","vs/nls!vs/platform/files/node/diskFileSystemProvider","vs/nls!vs/platform/languagePacks/common/languagePacks","vs/nls!vs/platform/remoteTunnel/electron-browser/remoteTunnelService","vs/nls!vs/platform/request/common/request","vs/nls!vs/platform/shell/node/shellEnv","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/terminal/common/terminalPlatformConfiguration","vs/nls!vs/platform/terminal/common/terminalProfiles","vs/nls!vs/platform/userDataProfile/common/userDataProfile","vs/nls!vs/platform/userDataSync/common/abstractSynchronizer","vs/nls!vs/platform/userDataSync/common/keybindingsSync","vs/nls!vs/platform/userDataSync/common/settingsSync","vs/nls!vs/platform/userDataSync/common/userDataAutoSyncService","vs/nls!vs/platform/userDataSync/common/userDataSync","vs/nls!vs/platform/userDataSync/common/userDataSyncMachines","vs/nls!vs/platform/userDataSync/common/userDataSyncResourceProvider","vs/nls!vs/platform/workspace/common/workspace","vs/platform/environment/node/argv","vs/platform/environment/node/argvHelper","vs/platform/environment/node/environmentService","vs/platform/extensionManagement/common/configRemotes","vs/platform/extensionManagement/common/extensionNls","vs/platform/extensionManagement/common/implicitActivationEvents","vs/platform/extensionRecommendations/electron-sandbox/extensionRecommendationsIpc","vs/platform/instantiation/common/graph","vs/platform/checksum/common/checksumService","vs/platform/contextkey/common/contextkey","vs/platform/extensionManagement/common/extensionManagementIpc","vs/platform/checksum/node/checksumService","vs/platform/files/common/diskFileSystemProviderClient","vs/platform/files/node/watcher/nodejs/nodejsWatcherLib","vs/platform/files/node/watcher/nodejs/nodejsWatcher","vs/platform/files/node/watcher/nodejs/nodejsClient","vs/platform/files/node/watcher/watcherClient","vs/platform/instantiation/common/instantiationService","vs/platform/ipc/electron-browser/mainProcessService","vs/code/electron-browser/sharedProcess/contrib/localizationsUpdater","vs/code/electron-browser/sharedProcess/contrib/logsDataCleaner","vs/platform/files/common/diskFileSystemProvider","vs/platform/files/common/fileService","vs/base/common/performance","vs/platform/files/node/diskFileSystemProvider","vs/platform/policy/common/policyIpc","vs/code/electron-browser/sharedProcess/contrib/codeCacheCleaner","vs/code/electron-browser/sharedProcess/contrib/languagePackCachedDataCleaner","vs/platform/extensionManagement/common/extensionTipsService","vs/platform/profiling/common/profiling","vs/platform/profiling/node/profilingService","vs/platform/configuration/common/configurations","vs/platform/configuration/common/configurationService","vs/platform/remote/common/remoteAuthorityResolver","vs/platform/extensionManagement/common/unsupportedExtensionsMigration","vs/platform/extensionManagement/node/extensionDownloader","vs/platform/extensionManagement/node/extensionsManifestCache","vs/platform/extensionManagement/node/extensionsWatcher","vs/platform/languagePacks/node/languagePacks","vs/platform/remote/common/remoteAgentConnection","vs/platform/remote/common/sharedProcessTunnelService","vs/platform/remote/node/nodeSocketFactory","vs/platform/request/browser/requestService","vs/platform/download/common/downloadService","vs/platform/request/common/requestIpc","vs/platform/request/electron-browser/sharedProcessRequestService","vs/platform/sharedProcess/electron-browser/sharedProcessWorker","vs/platform/sharedProcess/electron-browser/sharedProcessWorkerService","vs/platform/sharedProcess/node/sharedProcessEnvironmentService","vs/platform/shell/node/shellEnv","vs/platform/sign/node/signService","vs/platform/diagnostics/node/diagnosticsService","vs/platform/remoteTunnel/electron-browser/remoteTunnelService","vs/platform/externalServices/common/marketplace","vs/platform/telemetry/common/1dsAppender","vs/platform/telemetry/node/1dsAppender","vs/platform/telemetry/node/customEndpointTelemetryService","vs/platform/terminal/common/requestStore","vs/platform/terminal/electron-sandbox/terminal","vs/platform/terminal/node/terminalEnvironment","vs/platform/theme/common/theme","vs/platform/terminal/common/terminalProfiles","vs/platform/terminal/common/terminalPlatformConfiguration","vs/platform/terminal/node/terminalProfiles","vs/platform/terminal/node/ptyHostService","vs/platform/tunnel/node/sharedProcessTunnelService","vs/platform/tunnel/node/tunnelService","vs/platform/uriIdentity/common/uriIdentityService","vs/platform/userData/common/fileUserDataProvider","vs/platform/userDataSync/common/extensionsMerge","vs/platform/userDataSync/common/keybindingsMerge","vs/platform/userDataSync/common/snippetsMerge","vs/platform/userDataSync/common/userDataProfilesManifestMerge","vs/platform/userDataSync/common/globalStateMerge","vs/platform/userDataSync/common/settingsMerge","vs/platform/userDataSync/common/userDataSyncIpc","vs/platform/userDataSync/common/userDataSyncLog","vs/platform/windows/node/windowTracker","vs/code/electron-browser/sharedProcess/contrib/userDataProfilesCleaner","vs/platform/extensionManagement/common/abstractExtensionManagementService","vs/platform/extensionManagement/node/extensionLifecycle","vs/platform/extensionManagement/node/extensionsScannerService","vs/platform/extensionManagement/common/extensionGalleryService","vs/platform/extensionManagement/electron-sandbox/extensionTipsService","vs/platform/storage/electron-sandbox/storageService","vs/platform/userDataProfile/electron-sandbox/userDataProfile","vs/platform/userDataProfile/electron-sandbox/userDataProfileStorageService","vs/platform/userDataSync/common/userDataSyncBackupStoreService","vs/platform/userDataSync/common/userDataSyncEnablementService","vs/platform/userDataSync/common/userDataAutoSyncService","vs/platform/userDataSync/common/userDataSyncResourceProvider","vs/platform/userDataSync/common/userDataSyncService","vs/platform/userDataSync/common/userDataSyncServiceIpc","vs/platform/userDataSync/common/userDataSyncStoreService","vs/platform/userDataSync/electron-sandbox/userDataAutoSyncService","vs/platform/workspaces/node/workspaces","vs/code/electron-browser/sharedProcess/contrib/storageDataCleaner","vs/platform/extensionManagement/node/extensionManagementUtil","vs/code/electron-browser/sharedProcess/contrib/extensions","util","minimist","assert","path","graceful-fs","https","yauzl","yazl","vs/code/electron-browser/sharedProcess/sharedProcessMain"],oe=function(Z){for(var e=[],D=0,i=Z.length;D<i;D++)e[D]=se[Z[D]];return e};define(se[51],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSSIcon=e.Codicon=e.getCodiconAriaLabel=void 0;function D(L){return L?L.replace(/\$\((.*?)\)/g,(T,I)=>` ${I} `).trim():""}e.getCodiconAriaLabel=D;class i{constructor(T,I,P){this.id=T,this.definition=I,this.description=P,i._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return i._allCodicons}}e.Codicon=i,i._allCodicons=[],i.add=new i("add",{fontCharacter:"\\ea60"}),i.plus=new i("plus",i.add.definition),i.gistNew=new i("gist-new",i.add.definition),i.repoCreate=new i("repo-create",i.add.definition),i.lightbulb=new i("lightbulb",{fontCharacter:"\\ea61"}),i.lightBulb=new i("light-bulb",{fontCharacter:"\\ea61"}),i.repo=new i("repo",{fontCharacter:"\\ea62"}),i.repoDelete=new i("repo-delete",{fontCharacter:"\\ea62"}),i.gistFork=new i("gist-fork",{fontCharacter:"\\ea63"}),i.repoForked=new i("repo-forked",{fontCharacter:"\\ea63"}),i.gitPullRequest=new i("git-pull-request",{fontCharacter:"\\ea64"}),i.gitPullRequestAbandoned=new i("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),i.recordKeys=new i("record-keys",{fontCharacter:"\\ea65"}),i.keyboard=new i("keyboard",{fontCharacter:"\\ea65"}),i.tag=new i("tag",{fontCharacter:"\\ea66"}),i.tagAdd=new i("tag-add",{fontCharacter:"\\ea66"}),i.tagRemove=new i("tag-remove",{fontCharacter:"\\ea66"}),i.person=new i("person",{fontCharacter:"\\ea67"}),i.personFollow=new i("person-follow",{fontCharacter:"\\ea67"}),i.personOutline=new i("person-outline",{fontCharacter:"\\ea67"}),i.personFilled=new i("person-filled",{fontCharacter:"\\ea67"}),i.gitBranch=new i("git-branch",{fontCharacter:"\\ea68"}),i.gitBranchCreate=new i("git-branch-create",{fontCharacter:"\\ea68"}),i.gitBranchDelete=new i("git-branch-delete",{fontCharacter:"\\ea68"}),i.sourceControl=new i("source-control",{fontCharacter:"\\ea68"}),i.mirror=new i("mirror",{fontCharacter:"\\ea69"}),i.mirrorPublic=new i("mirror-public",{fontCharacter:"\\ea69"}),i.star=new i("star",{fontCharacter:"\\ea6a"}),i.starAdd=new i("star-add",{fontCharacter:"\\ea6a"}),i.starDelete=new i("star-delete",{fontCharacter:"\\ea6a"}),i.starEmpty=new i("star-empty",{fontCharacter:"\\ea6a"}),i.comment=new i("comment",{fontCharacter:"\\ea6b"}),i.commentAdd=new i("comment-add",{fontCharacter:"\\ea6b"}),i.alert=new i("alert",{fontCharacter:"\\ea6c"}),i.warning=new i("warning",{fontCharacter:"\\ea6c"}),i.search=new i("search",{fontCharacter:"\\ea6d"}),i.searchSave=new i("search-save",{fontCharacter:"\\ea6d"}),i.logOut=new i("log-out",{fontCharacter:"\\ea6e"}),i.signOut=new i("sign-out",{fontCharacter:"\\ea6e"}),i.logIn=new i("log-in",{fontCharacter:"\\ea6f"}),i.signIn=new i("sign-in",{fontCharacter:"\\ea6f"}),i.eye=new i("eye",{fontCharacter:"\\ea70"}),i.eyeUnwatch=new i("eye-unwatch",{fontCharacter:"\\ea70"}),i.eyeWatch=new i("eye-watch",{fontCharacter:"\\ea70"}),i.circleFilled=new i("circle-filled",{fontCharacter:"\\ea71"}),i.primitiveDot=new i("primitive-dot",i.circleFilled.definition),i.closeDirty=new i("close-dirty",i.circleFilled.definition),i.debugBreakpoint=new i("debug-breakpoint",i.circleFilled.definition),i.debugBreakpointDisabled=new i("debug-breakpoint-disabled",i.circleFilled.definition),i.debugHint=new i("debug-hint",i.circleFilled.definition),i.primitiveSquare=new i("primitive-square",{fontCharacter:"\\ea72"}),i.edit=new i("edit",{fontCharacter:"\\ea73"}),i.pencil=new i("pencil",{fontCharacter:"\\ea73"}),i.info=new i("info",{fontCharacter:"\\ea74"}),i.issueOpened=new i("issue-opened",{fontCharacter:"\\ea74"}),i.gistPrivate=new i("gist-private",{fontCharacter:"\\ea75"}),i.gitForkPrivate=new i("git-fork-private",{fontCharacter:"\\ea75"}),i.lock=new i("lock",{fontCharacter:"\\ea75"}),i.mirrorPrivate=new i("mirror-private",{fontCharacter:"\\ea75"}),i.close=new i("close",{fontCharacter:"\\ea76"}),i.removeClose=new i("remove-close",{fontCharacter:"\\ea76"}),i.x=new i("x",{fontCharacter:"\\ea76"}),i.repoSync=new i("repo-sync",{fontCharacter:"\\ea77"}),i.sync=new i("sync",{fontCharacter:"\\ea77"}),i.clone=new i("clone",{fontCharacter:"\\ea78"}),i.desktopDownload=new i("desktop-download",{fontCharacter:"\\ea78"}),i.beaker=new i("beaker",{fontCharacter:"\\ea79"}),i.microscope=new i("microscope",{fontCharacter:"\\ea79"}),i.vm=new i("vm",{fontCharacter:"\\ea7a"}),i.deviceDesktop=new i("device-desktop",{fontCharacter:"\\ea7a"}),i.file=new i("file",{fontCharacter:"\\ea7b"}),i.fileText=new i("file-text",{fontCharacter:"\\ea7b"}),i.more=new i("more",{fontCharacter:"\\ea7c"}),i.ellipsis=new i("ellipsis",{fontCharacter:"\\ea7c"}),i.kebabHorizontal=new i("kebab-horizontal",{fontCharacter:"\\ea7c"}),i.mailReply=new i("mail-reply",{fontCharacter:"\\ea7d"}),i.reply=new i("reply",{fontCharacter:"\\ea7d"}),i.organization=new i("organization",{fontCharacter:"\\ea7e"}),i.organizationFilled=new i("organization-filled",{fontCharacter:"\\ea7e"}),i.organizationOutline=new i("organization-outline",{fontCharacter:"\\ea7e"}),i.newFile=new i("new-file",{fontCharacter:"\\ea7f"}),i.fileAdd=new i("file-add",{fontCharacter:"\\ea7f"}),i.newFolder=new i("new-folder",{fontCharacter:"\\ea80"}),i.fileDirectoryCreate=new i("file-directory-create",{fontCharacter:"\\ea80"}),i.trash=new i("trash",{fontCharacter:"\\ea81"}),i.trashcan=new i("trashcan",{fontCharacter:"\\ea81"}),i.history=new i("history",{fontCharacter:"\\ea82"}),i.clock=new i("clock",{fontCharacter:"\\ea82"}),i.folder=new i("folder",{fontCharacter:"\\ea83"}),i.fileDirectory=new i("file-directory",{fontCharacter:"\\ea83"}),i.symbolFolder=new i("symbol-folder",{fontCharacter:"\\ea83"}),i.logoGithub=new i("logo-github",{fontCharacter:"\\ea84"}),i.markGithub=new i("mark-github",{fontCharacter:"\\ea84"}),i.github=new i("github",{fontCharacter:"\\ea84"}),i.terminal=new i("terminal",{fontCharacter:"\\ea85"}),i.console=new i("console",{fontCharacter:"\\ea85"}),i.repl=new i("repl",{fontCharacter:"\\ea85"}),i.zap=new i("zap",{fontCharacter:"\\ea86"}),i.symbolEvent=new i("symbol-event",{fontCharacter:"\\ea86"}),i.error=new i("error",{fontCharacter:"\\ea87"}),i.stop=new i("stop",{fontCharacter:"\\ea87"}),i.variable=new i("variable",{fontCharacter:"\\ea88"}),i.symbolVariable=new i("symbol-variable",{fontCharacter:"\\ea88"}),i.array=new i("array",{fontCharacter:"\\ea8a"}),i.symbolArray=new i("symbol-array",{fontCharacter:"\\ea8a"}),i.symbolModule=new i("symbol-module",{fontCharacter:"\\ea8b"}),i.symbolPackage=new i("symbol-package",{fontCharacter:"\\ea8b"}),i.symbolNamespace=new i("symbol-namespace",{fontCharacter:"\\ea8b"}),i.symbolObject=new i("symbol-object",{fontCharacter:"\\ea8b"}),i.symbolMethod=new i("symbol-method",{fontCharacter:"\\ea8c"}),i.symbolFunction=new i("symbol-function",{fontCharacter:"\\ea8c"}),i.symbolConstructor=new i("symbol-constructor",{fontCharacter:"\\ea8c"}),i.symbolBoolean=new i("symbol-boolean",{fontCharacter:"\\ea8f"}),i.symbolNull=new i("symbol-null",{fontCharacter:"\\ea8f"}),i.symbolNumeric=new i("symbol-numeric",{fontCharacter:"\\ea90"}),i.symbolNumber=new i("symbol-number",{fontCharacter:"\\ea90"}),i.symbolStructure=new i("symbol-structure",{fontCharacter:"\\ea91"}),i.symbolStruct=new i("symbol-struct",{fontCharacter:"\\ea91"}),i.symbolParameter=new i("symbol-parameter",{fontCharacter:"\\ea92"}),i.symbolTypeParameter=new i("symbol-type-parameter",{fontCharacter:"\\ea92"}),i.symbolKey=new i("symbol-key",{fontCharacter:"\\ea93"}),i.symbolText=new i("symbol-text",{fontCharacter:"\\ea93"}),i.symbolReference=new i("symbol-reference",{fontCharacter:"\\ea94"}),i.goToFile=new i("go-to-file",{fontCharacter:"\\ea94"}),i.symbolEnum=new i("symbol-enum",{fontCharacter:"\\ea95"}),i.symbolValue=new i("symbol-value",{fontCharacter:"\\ea95"}),i.symbolRuler=new i("symbol-ruler",{fontCharacter:"\\ea96"}),i.symbolUnit=new i("symbol-unit",{fontCharacter:"\\ea96"}),i.activateBreakpoints=new i("activate-breakpoints",{fontCharacter:"\\ea97"}),i.archive=new i("archive",{fontCharacter:"\\ea98"}),i.arrowBoth=new i("arrow-both",{fontCharacter:"\\ea99"}),i.arrowDown=new i("arrow-down",{fontCharacter:"\\ea9a"}),i.arrowLeft=new i("arrow-left",{fontCharacter:"\\ea9b"}),i.arrowRight=new i("arrow-right",{fontCharacter:"\\ea9c"}),i.arrowSmallDown=new i("arrow-small-down",{fontCharacter:"\\ea9d"}),i.arrowSmallLeft=new i("arrow-small-left",{fontCharacter:"\\ea9e"}),i.arrowSmallRight=new i("arrow-small-right",{fontCharacter:"\\ea9f"}),i.arrowSmallUp=new i("arrow-small-up",{fontCharacter:"\\eaa0"}),i.arrowUp=new i("arrow-up",{fontCharacter:"\\eaa1"}),i.bell=new i("bell",{fontCharacter:"\\eaa2"}),i.bold=new i("bold",{fontCharacter:"\\eaa3"}),i.book=new i("book",{fontCharacter:"\\eaa4"}),i.bookmark=new i("bookmark",{fontCharacter:"\\eaa5"}),i.debugBreakpointConditionalUnverified=new i("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),i.debugBreakpointConditional=new i("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),i.debugBreakpointConditionalDisabled=new i("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),i.debugBreakpointDataUnverified=new i("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),i.debugBreakpointData=new i("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),i.debugBreakpointDataDisabled=new i("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),i.debugBreakpointLogUnverified=new i("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),i.debugBreakpointLog=new i("debug-breakpoint-log",{fontCharacter:"\\eaab"}),i.debugBreakpointLogDisabled=new i("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),i.briefcase=new i("briefcase",{fontCharacter:"\\eaac"}),i.broadcast=new i("broadcast",{fontCharacter:"\\eaad"}),i.browser=new i("browser",{fontCharacter:"\\eaae"}),i.bug=new i("bug",{fontCharacter:"\\eaaf"}),i.calendar=new i("calendar",{fontCharacter:"\\eab0"}),i.caseSensitive=new i("case-sensitive",{fontCharacter:"\\eab1"}),i.check=new i("check",{fontCharacter:"\\eab2"}),i.checklist=new i("checklist",{fontCharacter:"\\eab3"}),i.chevronDown=new i("chevron-down",{fontCharacter:"\\eab4"}),i.dropDownButton=new i("drop-down-button",i.chevronDown.definition),i.chevronLeft=new i("chevron-left",{fontCharacter:"\\eab5"}),i.chevronRight=new i("chevron-right",{fontCharacter:"\\eab6"}),i.chevronUp=new i("chevron-up",{fontCharacter:"\\eab7"}),i.chromeClose=new i("chrome-close",{fontCharacter:"\\eab8"}),i.chromeMaximize=new i("chrome-maximize",{fontCharacter:"\\eab9"}),i.chromeMinimize=new i("chrome-minimize",{fontCharacter:"\\eaba"}),i.chromeRestore=new i("chrome-restore",{fontCharacter:"\\eabb"}),i.circle=new i("circle",{fontCharacter:"\\eabc"}),i.circleOutline=new i("circle-outline",i.circle.definition),i.debugBreakpointUnverified=new i("debug-breakpoint-unverified",i.circle.definition),i.circleSlash=new i("circle-slash",{fontCharacter:"\\eabd"}),i.circuitBoard=new i("circuit-board",{fontCharacter:"\\eabe"}),i.clearAll=new i("clear-all",{fontCharacter:"\\eabf"}),i.clippy=new i("clippy",{fontCharacter:"\\eac0"}),i.closeAll=new i("close-all",{fontCharacter:"\\eac1"}),i.cloudDownload=new i("cloud-download",{fontCharacter:"\\eac2"}),i.cloudUpload=new i("cloud-upload",{fontCharacter:"\\eac3"}),i.code=new i("code",{fontCharacter:"\\eac4"}),i.collapseAll=new i("collapse-all",{fontCharacter:"\\eac5"}),i.colorMode=new i("color-mode",{fontCharacter:"\\eac6"}),i.commentDiscussion=new i("comment-discussion",{fontCharacter:"\\eac7"}),i.compareChanges=new i("compare-changes",{fontCharacter:"\\eafd"}),i.creditCard=new i("credit-card",{fontCharacter:"\\eac9"}),i.dash=new i("dash",{fontCharacter:"\\eacc"}),i.dashboard=new i("dashboard",{fontCharacter:"\\eacd"}),i.database=new i("database",{fontCharacter:"\\eace"}),i.debugContinue=new i("debug-continue",{fontCharacter:"\\eacf"}),i.debugDisconnect=new i("debug-disconnect",{fontCharacter:"\\ead0"}),i.debugPause=new i("debug-pause",{fontCharacter:"\\ead1"}),i.debugRestart=new i("debug-restart",{fontCharacter:"\\ead2"}),i.debugStart=new i("debug-start",{fontCharacter:"\\ead3"}),i.debugStepInto=new i("debug-step-into",{fontCharacter:"\\ead4"}),i.debugStepOut=new i("debug-step-out",{fontCharacter:"\\ead5"}),i.debugStepOver=new i("debug-step-over",{fontCharacter:"\\ead6"}),i.debugStop=new i("debug-stop",{fontCharacter:"\\ead7"}),i.debug=new i("debug",{fontCharacter:"\\ead8"}),i.deviceCameraVideo=new i("device-camera-video",{fontCharacter:"\\ead9"}),i.deviceCamera=new i("device-camera",{fontCharacter:"\\eada"}),i.deviceMobile=new i("device-mobile",{fontCharacter:"\\eadb"}),i.diffAdded=new i("diff-added",{fontCharacter:"\\eadc"}),i.diffIgnored=new i("diff-ignored",{fontCharacter:"\\eadd"}),i.diffModified=new i("diff-modified",{fontCharacter:"\\eade"}),i.diffRemoved=new i("diff-removed",{fontCharacter:"\\eadf"}),i.diffRenamed=new i("diff-renamed",{fontCharacter:"\\eae0"}),i.diff=new i("diff",{fontCharacter:"\\eae1"}),i.discard=new i("discard",{fontCharacter:"\\eae2"}),i.editorLayout=new i("editor-layout",{fontCharacter:"\\eae3"}),i.emptyWindow=new i("empty-window",{fontCharacter:"\\eae4"}),i.exclude=new i("exclude",{fontCharacter:"\\eae5"}),i.extensions=new i("extensions",{fontCharacter:"\\eae6"}),i.eyeClosed=new i("eye-closed",{fontCharacter:"\\eae7"}),i.fileBinary=new i("file-binary",{fontCharacter:"\\eae8"}),i.fileCode=new i("file-code",{fontCharacter:"\\eae9"}),i.fileMedia=new i("file-media",{fontCharacter:"\\eaea"}),i.filePdf=new i("file-pdf",{fontCharacter:"\\eaeb"}),i.fileSubmodule=new i("file-submodule",{fontCharacter:"\\eaec"}),i.fileSymlinkDirectory=new i("file-symlink-directory",{fontCharacter:"\\eaed"}),i.fileSymlinkFile=new i("file-symlink-file",{fontCharacter:"\\eaee"}),i.fileZip=new i("file-zip",{fontCharacter:"\\eaef"}),i.files=new i("files",{fontCharacter:"\\eaf0"}),i.filter=new i("filter",{fontCharacter:"\\eaf1"}),i.flame=new i("flame",{fontCharacter:"\\eaf2"}),i.foldDown=new i("fold-down",{fontCharacter:"\\eaf3"}),i.foldUp=new i("fold-up",{fontCharacter:"\\eaf4"}),i.fold=new i("fold",{fontCharacter:"\\eaf5"}),i.folderActive=new i("folder-active",{fontCharacter:"\\eaf6"}),i.folderOpened=new i("folder-opened",{fontCharacter:"\\eaf7"}),i.gear=new i("gear",{fontCharacter:"\\eaf8"}),i.gift=new i("gift",{fontCharacter:"\\eaf9"}),i.gistSecret=new i("gist-secret",{fontCharacter:"\\eafa"}),i.gist=new i("gist",{fontCharacter:"\\eafb"}),i.gitCommit=new i("git-commit",{fontCharacter:"\\eafc"}),i.gitCompare=new i("git-compare",{fontCharacter:"\\eafd"}),i.gitMerge=new i("git-merge",{fontCharacter:"\\eafe"}),i.githubAction=new i("github-action",{fontCharacter:"\\eaff"}),i.githubAlt=new i("github-alt",{fontCharacter:"\\eb00"}),i.globe=new i("globe",{fontCharacter:"\\eb01"}),i.grabber=new i("grabber",{fontCharacter:"\\eb02"}),i.graph=new i("graph",{fontCharacter:"\\eb03"}),i.gripper=new i("gripper",{fontCharacter:"\\eb04"}),i.heart=new i("heart",{fontCharacter:"\\eb05"}),i.home=new i("home",{fontCharacter:"\\eb06"}),i.horizontalRule=new i("horizontal-rule",{fontCharacter:"\\eb07"}),i.hubot=new i("hubot",{fontCharacter:"\\eb08"}),i.inbox=new i("inbox",{fontCharacter:"\\eb09"}),i.issueClosed=new i("issue-closed",{fontCharacter:"\\eba4"}),i.issueReopened=new i("issue-reopened",{fontCharacter:"\\eb0b"}),i.issues=new i("issues",{fontCharacter:"\\eb0c"}),i.italic=new i("italic",{fontCharacter:"\\eb0d"}),i.jersey=new i("jersey",{fontCharacter:"\\eb0e"}),i.json=new i("json",{fontCharacter:"\\eb0f"}),i.kebabVertical=new i("kebab-vertical",{fontCharacter:"\\eb10"}),i.key=new i("key",{fontCharacter:"\\eb11"}),i.law=new i("law",{fontCharacter:"\\eb12"}),i.lightbulbAutofix=new i("lightbulb-autofix",{fontCharacter:"\\eb13"}),i.linkExternal=new i("link-external",{fontCharacter:"\\eb14"}),i.link=new i("link",{fontCharacter:"\\eb15"}),i.listOrdered=new i("list-ordered",{fontCharacter:"\\eb16"}),i.listUnordered=new i("list-unordered",{fontCharacter:"\\eb17"}),i.liveShare=new i("live-share",{fontCharacter:"\\eb18"}),i.loading=new i("loading",{fontCharacter:"\\eb19"}),i.location=new i("location",{fontCharacter:"\\eb1a"}),i.mailRead=new i("mail-read",{fontCharacter:"\\eb1b"}),i.mail=new i("mail",{fontCharacter:"\\eb1c"}),i.markdown=new i("markdown",{fontCharacter:"\\eb1d"}),i.megaphone=new i("megaphone",{fontCharacter:"\\eb1e"}),i.mention=new i("mention",{fontCharacter:"\\eb1f"}),i.milestone=new i("milestone",{fontCharacter:"\\eb20"}),i.mortarBoard=new i("mortar-board",{fontCharacter:"\\eb21"}),i.move=new i("move",{fontCharacter:"\\eb22"}),i.multipleWindows=new i("multiple-windows",{fontCharacter:"\\eb23"}),i.mute=new i("mute",{fontCharacter:"\\eb24"}),i.noNewline=new i("no-newline",{fontCharacter:"\\eb25"}),i.note=new i("note",{fontCharacter:"\\eb26"}),i.octoface=new i("octoface",{fontCharacter:"\\eb27"}),i.openPreview=new i("open-preview",{fontCharacter:"\\eb28"}),i.package_=new i("package",{fontCharacter:"\\eb29"}),i.paintcan=new i("paintcan",{fontCharacter:"\\eb2a"}),i.pin=new i("pin",{fontCharacter:"\\eb2b"}),i.play=new i("play",{fontCharacter:"\\eb2c"}),i.run=new i("run",{fontCharacter:"\\eb2c"}),i.plug=new i("plug",{fontCharacter:"\\eb2d"}),i.preserveCase=new i("preserve-case",{fontCharacter:"\\eb2e"}),i.preview=new i("preview",{fontCharacter:"\\eb2f"}),i.project=new i("project",{fontCharacter:"\\eb30"}),i.pulse=new i("pulse",{fontCharacter:"\\eb31"}),i.question=new i("question",{fontCharacter:"\\eb32"}),i.quote=new i("quote",{fontCharacter:"\\eb33"}),i.radioTower=new i("radio-tower",{fontCharacter:"\\eb34"}),i.reactions=new i("reactions",{fontCharacter:"\\eb35"}),i.references=new i("references",{fontCharacter:"\\eb36"}),i.refresh=new i("refresh",{fontCharacter:"\\eb37"}),i.regex=new i("regex",{fontCharacter:"\\eb38"}),i.remoteExplorer=new i("remote-explorer",{fontCharacter:"\\eb39"}),i.remote=new i("remote",{fontCharacter:"\\eb3a"}),i.remove=new i("remove",{fontCharacter:"\\eb3b"}),i.replaceAll=new i("replace-all",{fontCharacter:"\\eb3c"}),i.replace=new i("replace",{fontCharacter:"\\eb3d"}),i.repoClone=new i("repo-clone",{fontCharacter:"\\eb3e"}),i.repoForcePush=new i("repo-force-push",{fontCharacter:"\\eb3f"}),i.repoPull=new i("repo-pull",{fontCharacter:"\\eb40"}),i.repoPush=new i("repo-push",{fontCharacter:"\\eb41"}),i.report=new i("report",{fontCharacter:"\\eb42"}),i.requestChanges=new i("request-changes",{fontCharacter:"\\eb43"}),i.rocket=new i("rocket",{fontCharacter:"\\eb44"}),i.rootFolderOpened=new i("root-folder-opened",{fontCharacter:"\\eb45"}),i.rootFolder=new i("root-folder",{fontCharacter:"\\eb46"}),i.rss=new i("rss",{fontCharacter:"\\eb47"}),i.ruby=new i("ruby",{fontCharacter:"\\eb48"}),i.saveAll=new i("save-all",{fontCharacter:"\\eb49"}),i.saveAs=new i("save-as",{fontCharacter:"\\eb4a"}),i.save=new i("save",{fontCharacter:"\\eb4b"}),i.screenFull=new i("screen-full",{fontCharacter:"\\eb4c"}),i.screenNormal=new i("screen-normal",{fontCharacter:"\\eb4d"}),i.searchStop=new i("search-stop",{fontCharacter:"\\eb4e"}),i.server=new i("server",{fontCharacter:"\\eb50"}),i.settingsGear=new i("settings-gear",{fontCharacter:"\\eb51"}),i.settings=new i("settings",{fontCharacter:"\\eb52"}),i.shield=new i("shield",{fontCharacter:"\\eb53"}),i.smiley=new i("smiley",{fontCharacter:"\\eb54"}),i.sortPrecedence=new i("sort-precedence",{fontCharacter:"\\eb55"}),i.splitHorizontal=new i("split-horizontal",{fontCharacter:"\\eb56"}),i.splitVertical=new i("split-vertical",{fontCharacter:"\\eb57"}),i.squirrel=new i("squirrel",{fontCharacter:"\\eb58"}),i.starFull=new i("star-full",{fontCharacter:"\\eb59"}),i.starHalf=new i("star-half",{fontCharacter:"\\eb5a"}),i.symbolClass=new i("symbol-class",{fontCharacter:"\\eb5b"}),i.symbolColor=new i("symbol-color",{fontCharacter:"\\eb5c"}),i.symbolCustomColor=new i("symbol-customcolor",{fontCharacter:"\\eb5c"}),i.symbolConstant=new i("symbol-constant",{fontCharacter:"\\eb5d"}),i.symbolEnumMember=new i("symbol-enum-member",{fontCharacter:"\\eb5e"}),i.symbolField=new i("symbol-field",{fontCharacter:"\\eb5f"}),i.symbolFile=new i("symbol-file",{fontCharacter:"\\eb60"}),i.symbolInterface=new i("symbol-interface",{fontCharacter:"\\eb61"}),i.symbolKeyword=new i("symbol-keyword",{fontCharacter:"\\eb62"}),i.symbolMisc=new i("symbol-misc",{fontCharacter:"\\eb63"}),i.symbolOperator=new i("symbol-operator",{fontCharacter:"\\eb64"}),i.symbolProperty=new i("symbol-property",{fontCharacter:"\\eb65"}),i.wrench=new i("wrench",{fontCharacter:"\\eb65"}),i.wrenchSubaction=new i("wrench-subaction",{fontCharacter:"\\eb65"}),i.symbolSnippet=new i("symbol-snippet",{fontCharacter:"\\eb66"}),i.tasklist=new i("tasklist",{fontCharacter:"\\eb67"}),i.telescope=new i("telescope",{fontCharacter:"\\eb68"}),i.textSize=new i("text-size",{fontCharacter:"\\eb69"}),i.threeBars=new i("three-bars",{fontCharacter:"\\eb6a"}),i.thumbsdown=new i("thumbsdown",{fontCharacter:"\\eb6b"}),i.thumbsup=new i("thumbsup",{fontCharacter:"\\eb6c"}),i.tools=new i("tools",{fontCharacter:"\\eb6d"}),i.triangleDown=new i("triangle-down",{fontCharacter:"\\eb6e"}),i.triangleLeft=new i("triangle-left",{fontCharacter:"\\eb6f"}),i.triangleRight=new i("triangle-right",{fontCharacter:"\\eb70"}),i.triangleUp=new i("triangle-up",{fontCharacter:"\\eb71"}),i.twitter=new i("twitter",{fontCharacter:"\\eb72"}),i.unfold=new i("unfold",{fontCharacter:"\\eb73"}),i.unlock=new i("unlock",{fontCharacter:"\\eb74"}),i.unmute=new i("unmute",{fontCharacter:"\\eb75"}),i.unverified=new i("unverified",{fontCharacter:"\\eb76"}),i.verified=new i("verified",{fontCharacter:"\\eb77"}),i.versions=new i("versions",{fontCharacter:"\\eb78"}),i.vmActive=new i("vm-active",{fontCharacter:"\\eb79"}),i.vmOutline=new i("vm-outline",{fontCharacter:"\\eb7a"}),i.vmRunning=new i("vm-running",{fontCharacter:"\\eb7b"}),i.watch=new i("watch",{fontCharacter:"\\eb7c"}),i.whitespace=new i("whitespace",{fontCharacter:"\\eb7d"}),i.wholeWord=new i("whole-word",{fontCharacter:"\\eb7e"}),i.window=new i("window",{fontCharacter:"\\eb7f"}),i.wordWrap=new i("word-wrap",{fontCharacter:"\\eb80"}),i.zoomIn=new i("zoom-in",{fontCharacter:"\\eb81"}),i.zoomOut=new i("zoom-out",{fontCharacter:"\\eb82"}),i.listFilter=new i("list-filter",{fontCharacter:"\\eb83"}),i.listFlat=new i("list-flat",{fontCharacter:"\\eb84"}),i.listSelection=new i("list-selection",{fontCharacter:"\\eb85"}),i.selection=new i("selection",{fontCharacter:"\\eb85"}),i.listTree=new i("list-tree",{fontCharacter:"\\eb86"}),i.debugBreakpointFunctionUnverified=new i("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),i.debugBreakpointFunction=new i("debug-breakpoint-function",{fontCharacter:"\\eb88"}),i.debugBreakpointFunctionDisabled=new i("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),i.debugStackframeActive=new i("debug-stackframe-active",{fontCharacter:"\\eb89"}),i.circleSmallFilled=new i("circle-small-filled",{fontCharacter:"\\eb8a"}),i.debugStackframeDot=new i("debug-stackframe-dot",i.circleSmallFilled.definition),i.debugStackframe=new i("debug-stackframe",{fontCharacter:"\\eb8b"}),i.debugStackframeFocused=new i("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),i.debugBreakpointUnsupported=new i("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),i.symbolString=new i("symbol-string",{fontCharacter:"\\eb8d"}),i.debugReverseContinue=new i("debug-reverse-continue",{fontCharacter:"\\eb8e"}),i.debugStepBack=new i("debug-step-back",{fontCharacter:"\\eb8f"}),i.debugRestartFrame=new i("debug-restart-frame",{fontCharacter:"\\eb90"}),i.callIncoming=new i("call-incoming",{fontCharacter:"\\eb92"}),i.callOutgoing=new i("call-outgoing",{fontCharacter:"\\eb93"}),i.menu=new i("menu",{fontCharacter:"\\eb94"}),i.expandAll=new i("expand-all",{fontCharacter:"\\eb95"}),i.feedback=new i("feedback",{fontCharacter:"\\eb96"}),i.groupByRefType=new i("group-by-ref-type",{fontCharacter:"\\eb97"}),i.ungroupByRefType=new i("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),i.account=new i("account",{fontCharacter:"\\eb99"}),i.bellDot=new i("bell-dot",{fontCharacter:"\\eb9a"}),i.debugConsole=new i("debug-console",{fontCharacter:"\\eb9b"}),i.library=new i("library",{fontCharacter:"\\eb9c"}),i.output=new i("output",{fontCharacter:"\\eb9d"}),i.runAll=new i("run-all",{fontCharacter:"\\eb9e"}),i.syncIgnored=new i("sync-ignored",{fontCharacter:"\\eb9f"}),i.pinned=new i("pinned",{fontCharacter:"\\eba0"}),i.githubInverted=new i("github-inverted",{fontCharacter:"\\eba1"}),i.debugAlt=new i("debug-alt",{fontCharacter:"\\eb91"}),i.serverProcess=new i("server-process",{fontCharacter:"\\eba2"}),i.serverEnvironment=new i("server-environment",{fontCharacter:"\\eba3"}),i.pass=new i("pass",{fontCharacter:"\\eba4"}),i.stopCircle=new i("stop-circle",{fontCharacter:"\\eba5"}),i.playCircle=new i("play-circle",{fontCharacter:"\\eba6"}),i.record=new i("record",{fontCharacter:"\\eba7"}),i.debugAltSmall=new i("debug-alt-small",{fontCharacter:"\\eba8"}),i.vmConnect=new i("vm-connect",{fontCharacter:"\\eba9"}),i.cloud=new i("cloud",{fontCharacter:"\\ebaa"}),i.merge=new i("merge",{fontCharacter:"\\ebab"}),i.exportIcon=new i("export",{fontCharacter:"\\ebac"}),i.graphLeft=new i("graph-left",{fontCharacter:"\\ebad"}),i.magnet=new i("magnet",{fontCharacter:"\\ebae"}),i.notebook=new i("notebook",{fontCharacter:"\\ebaf"}),i.redo=new i("redo",{fontCharacter:"\\ebb0"}),i.checkAll=new i("check-all",{fontCharacter:"\\ebb1"}),i.pinnedDirty=new i("pinned-dirty",{fontCharacter:"\\ebb2"}),i.passFilled=new i("pass-filled",{fontCharacter:"\\ebb3"}),i.circleLargeFilled=new i("circle-large-filled",{fontCharacter:"\\ebb4"}),i.circleLarge=new i("circle-large",{fontCharacter:"\\ebb5"}),i.circleLargeOutline=new i("circle-large-outline",i.circleLarge.definition),i.combine=new i("combine",{fontCharacter:"\\ebb6"}),i.gather=new i("gather",{fontCharacter:"\\ebb6"}),i.table=new i("table",{fontCharacter:"\\ebb7"}),i.variableGroup=new i("variable-group",{fontCharacter:"\\ebb8"}),i.typeHierarchy=new i("type-hierarchy",{fontCharacter:"\\ebb9"}),i.typeHierarchySub=new i("type-hierarchy-sub",{fontCharacter:"\\ebba"}),i.typeHierarchySuper=new i("type-hierarchy-super",{fontCharacter:"\\ebbb"}),i.gitPullRequestCreate=new i("git-pull-request-create",{fontCharacter:"\\ebbc"}),i.runAbove=new i("run-above",{fontCharacter:"\\ebbd"}),i.runBelow=new i("run-below",{fontCharacter:"\\ebbe"}),i.notebookTemplate=new i("notebook-template",{fontCharacter:"\\ebbf"}),i.debugRerun=new i("debug-rerun",{fontCharacter:"\\ebc0"}),i.workspaceTrusted=new i("workspace-trusted",{fontCharacter:"\\ebc1"}),i.workspaceUntrusted=new i("workspace-untrusted",{fontCharacter:"\\ebc2"}),i.workspaceUnspecified=new i("workspace-unspecified",{fontCharacter:"\\ebc3"}),i.terminalCmd=new i("terminal-cmd",{fontCharacter:"\\ebc4"}),i.terminalDebian=new i("terminal-debian",{fontCharacter:"\\ebc5"}),i.terminalLinux=new i("terminal-linux",{fontCharacter:"\\ebc6"}),i.terminalPowershell=new i("terminal-powershell",{fontCharacter:"\\ebc7"}),i.terminalTmux=new i("terminal-tmux",{fontCharacter:"\\ebc8"}),i.terminalUbuntu=new i("terminal-ubuntu",{fontCharacter:"\\ebc9"}),i.terminalBash=new i("terminal-bash",{fontCharacter:"\\ebca"}),i.arrowSwap=new i("arrow-swap",{fontCharacter:"\\ebcb"}),i.copy=new i("copy",{fontCharacter:"\\ebcc"}),i.personAdd=new i("person-add",{fontCharacter:"\\ebcd"}),i.filterFilled=new i("filter-filled",{fontCharacter:"\\ebce"}),i.wand=new i("wand",{fontCharacter:"\\ebcf"}),i.debugLineByLine=new i("debug-line-by-line",{fontCharacter:"\\ebd0"}),i.inspect=new i("inspect",{fontCharacter:"\\ebd1"}),i.layers=new i("layers",{fontCharacter:"\\ebd2"}),i.layersDot=new i("layers-dot",{fontCharacter:"\\ebd3"}),i.layersActive=new i("layers-active",{fontCharacter:"\\ebd4"}),i.compass=new i("compass",{fontCharacter:"\\ebd5"}),i.compassDot=new i("compass-dot",{fontCharacter:"\\ebd6"}),i.compassActive=new i("compass-active",{fontCharacter:"\\ebd7"}),i.azure=new i("azure",{fontCharacter:"\\ebd8"}),i.issueDraft=new i("issue-draft",{fontCharacter:"\\ebd9"}),i.gitPullRequestClosed=new i("git-pull-request-closed",{fontCharacter:"\\ebda"}),i.gitPullRequestDraft=new i("git-pull-request-draft",{fontCharacter:"\\ebdb"}),i.debugAll=new i("debug-all",{fontCharacter:"\\ebdc"}),i.debugCoverage=new i("debug-coverage",{fontCharacter:"\\ebdd"}),i.runErrors=new i("run-errors",{fontCharacter:"\\ebde"}),i.folderLibrary=new i("folder-library",{fontCharacter:"\\ebdf"}),i.debugContinueSmall=new i("debug-continue-small",{fontCharacter:"\\ebe0"}),i.beakerStop=new i("beaker-stop",{fontCharacter:"\\ebe1"}),i.graphLine=new i("graph-line",{fontCharacter:"\\ebe2"}),i.graphScatter=new i("graph-scatter",{fontCharacter:"\\ebe3"}),i.pieChart=new i("pie-chart",{fontCharacter:"\\ebe4"}),i.bracket=new i("bracket",i.json.definition),i.bracketDot=new i("bracket-dot",{fontCharacter:"\\ebe5"}),i.bracketError=new i("bracket-error",{fontCharacter:"\\ebe6"}),i.lockSmall=new i("lock-small",{fontCharacter:"\\ebe7"}),i.azureDevops=new i("azure-devops",{fontCharacter:"\\ebe8"}),i.verifiedFilled=new i("verified-filled",{fontCharacter:"\\ebe9"}),i.newLine=new i("newline",{fontCharacter:"\\ebea"}),i.layout=new i("layout",{fontCharacter:"\\ebeb"}),i.layoutActivitybarLeft=new i("layout-activitybar-left",{fontCharacter:"\\ebec"}),i.layoutActivitybarRight=new i("layout-activitybar-right",{fontCharacter:"\\ebed"}),i.layoutPanelLeft=new i("layout-panel-left",{fontCharacter:"\\ebee"}),i.layoutPanelCenter=new i("layout-panel-center",{fontCharacter:"\\ebef"}),i.layoutPanelJustify=new i("layout-panel-justify",{fontCharacter:"\\ebf0"}),i.layoutPanelRight=new i("layout-panel-right",{fontCharacter:"\\ebf1"}),i.layoutPanel=new i("layout-panel",{fontCharacter:"\\ebf2"}),i.layoutSidebarLeft=new i("layout-sidebar-left",{fontCharacter:"\\ebf3"}),i.layoutSidebarRight=new i("layout-sidebar-right",{fontCharacter:"\\ebf4"}),i.layoutStatusbar=new i("layout-statusbar",{fontCharacter:"\\ebf5"}),i.layoutMenubar=new i("layout-menubar",{fontCharacter:"\\ebf6"}),i.layoutCentered=new i("layout-centered",{fontCharacter:"\\ebf7"}),i.layoutSidebarRightOff=new i("layout-sidebar-right-off",{fontCharacter:"\\ec00"}),i.layoutPanelOff=new i("layout-panel-off",{fontCharacter:"\\ec01"}),i.layoutSidebarLeftOff=new i("layout-sidebar-left-off",{fontCharacter:"\\ec02"}),i.target=new i("target",{fontCharacter:"\\ebf8"}),i.indent=new i("indent",{fontCharacter:"\\ebf9"}),i.recordSmall=new i("record-small",{fontCharacter:"\\ebfa"}),i.errorSmall=new i("error-small",{fontCharacter:"\\ebfb"}),i.arrowCircleDown=new i("arrow-circle-down",{fontCharacter:"\\ebfc"}),i.arrowCircleLeft=new i("arrow-circle-left",{fontCharacter:"\\ebfd"}),i.arrowCircleRight=new i("arrow-circle-right",{fontCharacter:"\\ebfe"}),i.arrowCircleUp=new i("arrow-circle-up",{fontCharacter:"\\ebff"}),i.heartFilled=new i("heart-filled",{fontCharacter:"\\ec04"}),i.map=new i("map",{fontCharacter:"\\ec05"}),i.mapFilled=new i("map-filled",{fontCharacter:"\\ec06"}),i.circleSmall=new i("circle-small",{fontCharacter:"\\ec07"}),i.bellSlash=new i("bell-slash",{fontCharacter:"\\ec08"}),i.bellSlashDot=new i("bell-slash-dot",{fontCharacter:"\\ec09"}),i.commentUnresolved=new i("comment-unresolved",{fontCharacter:"\\ec0a"}),i.gitPullRequestGoToChanges=new i("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"}),i.gitPullRequestNewChanges=new i("git-pull-request-new-changes",{fontCharacter:"\\ec0c"}),i.searchFuzzy=new i("search-fuzzy",{fontCharacter:"\\ec0d"}),i.commentDraft=new i("comment-draft",{fontCharacter:"\\ec0e"}),i.dialogError=new i("dialog-error",i.error.definition),i.dialogWarning=new i("dialog-warning",i.warning.definition),i.dialogInfo=new i("dialog-info",i.info.definition),i.dialogClose=new i("dialog-close",i.close.definition),i.treeItemExpanded=new i("tree-item-expanded",i.chevronDown.definition),i.treeFilterOnTypeOn=new i("tree-filter-on-type-on",i.listFilter.definition),i.treeFilterOnTypeOff=new i("tree-filter-on-type-off",i.listSelection.definition),i.treeFilterClear=new i("tree-filter-clear",i.close.definition),i.treeItemLoading=new i("tree-item-loading",i.loading.definition),i.menuSelection=new i("menu-selection",i.check.definition),i.menuSubmenu=new i("menu-submenu",i.chevronRight.definition),i.menuBarMore=new i("menubar-more",i.more.definition),i.scrollbarButtonLeft=new i("scrollbar-button-left",i.triangleLeft.definition),i.scrollbarButtonRight=new i("scrollbar-button-right",i.triangleRight.definition),i.scrollbarButtonUp=new i("scrollbar-button-up",i.triangleUp.definition),i.scrollbarButtonDown=new i("scrollbar-button-down",i.triangleDown.definition),i.toolBarMore=new i("toolbar-more",i.more.definition),i.quickInputBack=new i("quick-input-back",i.arrowLeft.definition);var k;(function(L){L.iconNameSegment="[A-Za-z0-9]+",L.iconNameExpression="[A-Za-z0-9-]+",L.iconModifierExpression="~[A-Za-z]+",L.iconNameCharacter="[A-Za-z0-9~-]";const T=new RegExp(`^(${L.iconNameExpression})(${L.iconModifierExpression})?$`);function I(C){if(C instanceof i)return["codicon","codicon-"+C.id];const b=T.exec(C.id);if(!b)return I(i.error);const[,p,S]=b,f=["codicon","codicon-"+p];return S&&f.push("codicon-modifier-"+S.substring(1)),f}L.asClassNameArray=I;function P(C){return I(C).join(" ")}L.asClassName=P;function w(C){return"."+I(C).join(".")}L.asCSSSelector=w})(k=e.CSSIcon||(e.CSSIcon={}))}),define(se[63],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=e.debounce=e.memoize=void 0;function D(T){return(I,P,w)=>{let C=null,b=null;if(typeof w.value=="function"?(C="value",b=w.value):typeof w.get=="function"&&(C="get",b=w.get),!b)throw new Error("not supported");w[C]=T(b,P)}}function i(T,I,P){let w=null,C=null;if(typeof P.value=="function"?(w="value",C=P.value,C.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof P.get=="function"&&(w="get",C=P.get),!C)throw new Error("not supported");const b=`$memoize$${I}`;P[w]=function(...p){return this.hasOwnProperty(b)||Object.defineProperty(this,b,{configurable:!1,enumerable:!1,writable:!1,value:C.apply(this,p)}),this[b]}}e.memoize=i;function k(T,I,P){return D((w,C)=>{const b=`$debounce$${C}`,p=`$debounce$result$${C}`;return function(...S){this[p]||(this[p]=P?P():void 0),clearTimeout(this[b]),I&&(this[p]=I(this[p],...S),S=[this[p]]),this[b]=setTimeout(()=>{w.apply(this,S),this[p]=P?P():void 0},T)}})}e.debounce=k;function L(T,I,P){return D((w,C)=>{const b=`$throttle$timer$${C}`,p=`$throttle$result$${C}`,S=`$throttle$lastRun$${C}`,f=`$throttle$pending$${C}`;return function(...g){if(this[p]||(this[p]=P?P():void 0),(this[S]===null||this[S]===void 0)&&(this[S]=-Number.MAX_VALUE),I&&(this[p]=I(this[p],...g)),this[f])return;const y=this[S]+T;y<=Date.now()?(this[S]=Date.now(),w.apply(this,[this[p]]),this[p]=P?P():void 0):(this[f]=!0,this[b]=setTimeout(()=>{this[f]=!1,this[S]=Date.now(),w.apply(this,[this[p]]),this[p]=P?P():void 0},y-Date.now()))}})}e.throttle=L}),define(se[9],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BugIndicatingError=e.ErrorNoTelemetry=e.ExpectedError=e.NotSupportedError=e.NotImplementedError=e.getErrorMessage=e.disposed=e.readonly=e.illegalState=e.illegalArgument=e.canceled=e.CancellationError=e.isCancellationError=e.transformErrorForSerialization=e.onUnexpectedExternalError=e.onUnexpectedError=e.setUnexpectedErrorHandler=e.errorHandler=e.ErrorHandler=void 0;class D{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(n){setTimeout(()=>{throw n.stack?u.isErrorNoTelemetry(n)?new u(n.message+`

`+n.stack):new Error(n.message+`

`+n.stack):n},0)}}addListener(n){return this.listeners.push(n),()=>{this._removeListener(n)}}emit(n){this.listeners.forEach(o=>{o(n)})}_removeListener(n){this.listeners.splice(this.listeners.indexOf(n),1)}setUnexpectedErrorHandler(n){this.unexpectedErrorHandler=n}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(n){this.unexpectedErrorHandler(n),this.emit(n)}onUnexpectedExternalError(n){this.unexpectedErrorHandler(n)}}e.ErrorHandler=D,e.errorHandler=new D;function i(d){e.errorHandler.setUnexpectedErrorHandler(d)}e.setUnexpectedErrorHandler=i;function k(d){P(d)||e.errorHandler.onUnexpectedError(d)}e.onUnexpectedError=k;function L(d){P(d)||e.errorHandler.onUnexpectedExternalError(d)}e.onUnexpectedExternalError=L;function T(d){if(d instanceof Error){const{name:n,message:o}=d,t=d.stacktrace||d.stack;return{$isError:!0,name:n,message:o,stack:t,noTelemetry:u.isErrorNoTelemetry(d)}}return d}e.transformErrorForSerialization=T;const I="Canceled";function P(d){return d instanceof w?!0:d instanceof Error&&d.name===I&&d.message===I}e.isCancellationError=P;class w extends Error{constructor(){super(I),this.name=this.message}}e.CancellationError=w;function C(){const d=new Error(I);return d.name=d.message,d}e.canceled=C;function b(d){return d?new Error(`Illegal argument: ${d}`):new Error("Illegal argument")}e.illegalArgument=b;function p(d){return d?new Error(`Illegal state: ${d}`):new Error("Illegal state")}e.illegalState=p;function S(d){return d?new Error(`readonly property '${d} cannot be changed'`):new Error("readonly property cannot be changed")}e.readonly=S;function f(d){const n=new Error(`${d} has been disposed`);return n.name="DISPOSED",n}e.disposed=f;function g(d){return d?d.message?d.message:d.stack?d.stack.split(`
`)[0]:String(d):"Error"}e.getErrorMessage=g;class y extends Error{constructor(n){super("NotImplemented"),n&&(this.message=n)}}e.NotImplementedError=y;class l extends Error{constructor(n){super("NotSupported"),n&&(this.message=n)}}e.NotSupportedError=l;class m extends Error{constructor(){super(...arguments),this.isExpected=!0}}e.ExpectedError=m;class u extends Error{constructor(n){super(n),this.name="CodeExpectedError"}static fromError(n){if(n instanceof u)return n;const o=new u;return o.message=n.message,o.stack=n.stack,o}static isErrorNoTelemetry(n){return n.name==="CodeExpectedError"}}e.ErrorNoTelemetry=u;class h extends Error{constructor(n){super(n||"An unexpected bug occurred."),Object.setPrototypeOf(this,h.prototype);debugger}}e.BugIndicatingError=h}),define(se[20],oe([0,1,9]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CallbackIterable=e.ArrayQueue=e.findMinBy=e.findLastMaxBy=e.findMaxBy=e.numberComparator=e.tieBreakComparators=e.compareBy=e.CompareResult=e.splice=e.insertInto=e.mapFind=e.getRandomElement=e.asArray=e.mapArrayOrNot=e.pushMany=e.pushToEnd=e.pushToStart=e.shuffle=e.arrayInsert=e.remove=e.insert=e.index=e.range=e.flatten=e.commonPrefixLength=e.lastOrDefault=e.firstOrDefault=e.lastIndex=e.findLast=e.uniqueFilter=e.distinct=e.isNonEmptyArray=e.isFalsyOrEmpty=e.move=e.coalesceInPlace=e.coalesce=e.topAsync=e.top=e.delta=e.sortedDiff=e.groupBy=e.quickSelect=e.findFirstInSorted=e.binarySearch2=e.binarySearch=e.removeFastWithoutKeepingOrder=e.equals=e.tail2=e.tail=void 0;function i(Y,ie=0){return Y[Y.length-(1+ie)]}e.tail=i;function k(Y){if(Y.length===0)throw new Error("Invalid tail call");return[Y.slice(0,Y.length-1),Y[Y.length-1]]}e.tail2=k;function L(Y,ie,ne=(le,ue)=>le===ue){if(Y===ie)return!0;if(!Y||!ie||Y.length!==ie.length)return!1;for(let le=0,ue=Y.length;le<ue;le++)if(!ne(Y[le],ie[le]))return!1;return!0}e.equals=L;function T(Y,ie){const ne=Y.length-1;ie<ne&&(Y[ie]=Y[ne]),Y.pop()}e.removeFastWithoutKeepingOrder=T;function I(Y,ie,ne){return P(Y.length,le=>ne(Y[le],ie))}e.binarySearch=I;function P(Y,ie){let ne=0,le=Y-1;for(;ne<=le;){const ue=(ne+le)/2|0,Se=ie(ue);if(Se<0)ne=ue+1;else if(Se>0)le=ue-1;else return ue}return-(ne+1)}e.binarySearch2=P;function w(Y,ie){let ne=0,le=Y.length;if(le===0)return 0;for(;ne<le;){const ue=Math.floor((ne+le)/2);ie(Y[ue])?le=ue:ne=ue+1}return ne}e.findFirstInSorted=w;function C(Y,ie,ne){if(Y=Y|0,Y>=ie.length)throw new TypeError("invalid index");const le=ie[Math.floor(ie.length*Math.random())],ue=[],Se=[],we=[];for(const Ee of ie){const be=ne(Ee,le);be<0?ue.push(Ee):be>0?Se.push(Ee):we.push(Ee)}return Y<ue.length?C(Y,ue,ne):Y<ue.length+we.length?we[0]:C(Y-(ue.length+we.length),Se,ne)}e.quickSelect=C;function b(Y,ie){const ne=[];let le;for(const ue of Y.slice(0).sort(ie))!le||ie(le[0],ue)!==0?(le=[ue],ne.push(le)):le.push(ue);return ne}e.groupBy=b;function p(Y,ie,ne){const le=[];function ue(Ee,be,Oe){if(be===0&&Oe.length===0)return;const Ne=le[le.length-1];Ne&&Ne.start+Ne.deleteCount===Ee?(Ne.deleteCount+=be,Ne.toInsert.push(...Oe)):le.push({start:Ee,deleteCount:be,toInsert:Oe})}let Se=0,we=0;for(;;){if(Se===Y.length){ue(Se,0,ie.slice(we));break}if(we===ie.length){ue(Se,Y.length-Se,[]);break}const Ee=Y[Se],be=ie[we],Oe=ne(Ee,be);Oe===0?(Se+=1,we+=1):Oe<0?(ue(Se,1,[]),Se+=1):Oe>0&&(ue(Se,0,[be]),we+=1)}return le}e.sortedDiff=p;function S(Y,ie,ne){const le=p(Y,ie,ne),ue=[],Se=[];for(const we of le)ue.push(...Y.slice(we.start,we.start+we.deleteCount)),Se.push(...we.toInsert);return{removed:ue,added:Se}}e.delta=S;function f(Y,ie,ne){if(ne===0)return[];const le=Y.slice(0,ne).sort(ie);return y(Y,ie,le,ne,Y.length),le}e.top=f;function g(Y,ie,ne,le,ue){return ne===0?Promise.resolve([]):new Promise((Se,we)=>{(async()=>{const Ee=Y.length,be=Y.slice(0,ne).sort(ie);for(let Oe=ne,Ne=Math.min(ne+le,Ee);Oe<Ee;Oe=Ne,Ne=Math.min(Ne+le,Ee)){if(Oe>ne&&await new Promise(Ge=>setTimeout(Ge)),ue&&ue.isCancellationRequested)throw new D.CancellationError;y(Y,ie,be,Oe,Ne)}return be})().then(Se,we)})}e.topAsync=g;function y(Y,ie,ne,le,ue){for(const Se=ne.length;le<ue;le++){const we=Y[le];if(ie(we,ne[Se-1])<0){ne.pop();const Ee=w(ne,be=>ie(we,be)<0);ne.splice(Ee,0,we)}}}function l(Y){return Y.filter(ie=>!!ie)}e.coalesce=l;function m(Y){let ie=0;for(let ne=0;ne<Y.length;ne++)Y[ne]&&(Y[ie]=Y[ne],ie+=1);Y.length=ie}e.coalesceInPlace=m;function u(Y,ie,ne){Y.splice(ne,0,Y.splice(ie,1)[0])}e.move=u;function h(Y){return!Array.isArray(Y)||Y.length===0}e.isFalsyOrEmpty=h;function d(Y){return Array.isArray(Y)&&Y.length>0}e.isNonEmptyArray=d;function n(Y,ie=ne=>ne){const ne=new Set;return Y.filter(le=>{const ue=ie(le);return ne.has(ue)?!1:(ne.add(ue),!0)})}e.distinct=n;function o(Y){const ie=new Set;return ne=>{const le=Y(ne);return ie.has(le)?!1:(ie.add(le),!0)}}e.uniqueFilter=o;function t(Y,ie){const ne=s(Y,ie);if(ne!==-1)return Y[ne]}e.findLast=t;function s(Y,ie){for(let ne=Y.length-1;ne>=0;ne--){const le=Y[ne];if(ie(le))return ne}return-1}e.lastIndex=s;function r(Y,ie){return Y.length>0?Y[0]:ie}e.firstOrDefault=r;function c(Y,ie){return Y.length>0?Y[Y.length-1]:ie}e.lastOrDefault=c;function a(Y,ie,ne=(le,ue)=>le===ue){let le=0;for(let ue=0,Se=Math.min(Y.length,ie.length);ue<Se&&ne(Y[ue],ie[ue]);ue++)le++;return le}e.commonPrefixLength=a;function v(Y){return[].concat(...Y)}e.flatten=v;function E(Y,ie){let ne=typeof ie=="number"?Y:0;typeof ie=="number"?ne=Y:(ne=0,ie=Y);const le=[];if(ne<=ie)for(let ue=ne;ue<ie;ue++)le.push(ue);else for(let ue=ne;ue>ie;ue--)le.push(ue);return le}e.range=E;function R(Y,ie,ne){return Y.reduce((le,ue)=>(le[ie(ue)]=ne?ne(ue):ue,le),Object.create(null))}e.index=R;function N(Y,ie){return Y.push(ie),()=>O(Y,ie)}e.insert=N;function O(Y,ie){const ne=Y.indexOf(ie);if(ne>-1)return Y.splice(ne,1),ie}e.remove=O;function z(Y,ie,ne){const le=Y.slice(0,ie),ue=Y.slice(ie);return le.concat(ne,ue)}e.arrayInsert=z;function F(Y,ie){let ne;if(typeof ie=="number"){let le=ie;ne=()=>{const ue=Math.sin(le++)*179426549;return ue-Math.floor(ue)}}else ne=Math.random;for(let le=Y.length-1;le>0;le-=1){const ue=Math.floor(ne()*(le+1)),Se=Y[le];Y[le]=Y[ue],Y[ue]=Se}}e.shuffle=F;function A(Y,ie){const ne=Y.indexOf(ie);ne>-1&&(Y.splice(ne,1),Y.unshift(ie))}e.pushToStart=A;function M(Y,ie){const ne=Y.indexOf(ie);ne>-1&&(Y.splice(ne,1),Y.push(ie))}e.pushToEnd=M;function $(Y,ie){for(const ne of ie)Y.push(ne)}e.pushMany=$;function V(Y,ie){return Array.isArray(Y)?Y.map(ie):ie(Y)}e.mapArrayOrNot=V;function B(Y){return Array.isArray(Y)?Y:[Y]}e.asArray=B;function Q(Y){return Y[Math.floor(Math.random()*Y.length)]}e.getRandomElement=Q;function W(Y,ie){for(const ne of Y){const le=ie(ne);if(le!==void 0)return le}}e.mapFind=W;function q(Y,ie,ne){const le=ee(Y,ie),ue=Y.length,Se=ne.length;Y.length=ue+Se;for(let we=ue-1;we>=le;we--)Y[we+Se]=Y[we];for(let we=0;we<Se;we++)Y[we+le]=ne[we]}e.insertInto=q;function G(Y,ie,ne,le){const ue=ee(Y,ie),Se=Y.splice(ue,ne);return q(Y,ue,le),Se}e.splice=G;function ee(Y,ie){return ie<0?Math.max(ie+Y.length,0):Math.min(ie,Y.length)}var ae;(function(Y){function ie(ue){return ue<0}Y.isLessThan=ie;function ne(ue){return ue>0}Y.isGreaterThan=ne;function le(ue){return ue===0}Y.isNeitherLessOrGreaterThan=le,Y.greaterThan=1,Y.lessThan=-1,Y.neitherLessOrGreaterThan=0})(ae=e.CompareResult||(e.CompareResult={}));function K(Y,ie){return(ne,le)=>ie(Y(ne),Y(le))}e.compareBy=K;function X(...Y){return(ie,ne)=>{for(const le of Y){const ue=le(ie,ne);if(!ae.isNeitherLessOrGreaterThan(ue))return ue}return ae.neitherLessOrGreaterThan}}e.tieBreakComparators=X;const _=(Y,ie)=>Y-ie;e.numberComparator=_;function U(Y,ie){if(Y.length===0)return;let ne=Y[0];for(let le=1;le<Y.length;le++){const ue=Y[le];ie(ue,ne)>0&&(ne=ue)}return ne}e.findMaxBy=U;function x(Y,ie){if(Y.length===0)return;let ne=Y[0];for(let le=1;le<Y.length;le++){const ue=Y[le];ie(ue,ne)>=0&&(ne=ue)}return ne}e.findLastMaxBy=x;function j(Y,ie){return U(Y,(ne,le)=>-ie(ne,le))}e.findMinBy=j;class J{constructor(ie){this.items=ie,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(ie){let ne=this.firstIdx;for(;ne<this.items.length&&ie(this.items[ne]);)ne++;const le=ne===this.firstIdx?null:this.items.slice(this.firstIdx,ne);return this.firstIdx=ne,le}takeFromEndWhile(ie){let ne=this.lastIdx;for(;ne>=0&&ie(this.items[ne]);)ne--;const le=ne===this.lastIdx?null:this.items.slice(ne+1,this.lastIdx+1);return this.lastIdx=ne,le}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){const ie=this.items[this.firstIdx];return this.firstIdx++,ie}removeLast(){const ie=this.items[this.lastIdx];return this.lastIdx--,ie}takeCount(ie){const ne=this.items.slice(this.firstIdx,this.firstIdx+ie);return this.firstIdx+=ie,ne}}e.ArrayQueue=J;class re{constructor(ie){this.iterate=ie}forEach(ie){this.iterate(ne=>(ie(ne),!0))}toArray(){const ie=[];return this.iterate(ne=>(ie.push(ne),!0)),ie}filter(ie){return new re(ne=>this.iterate(le=>ie(le)?ne(le):!0))}map(ie){return new re(ne=>this.iterate(le=>ne(ie(le))))}some(ie){let ne=!1;return this.iterate(le=>(ne=ie(le),!ne)),ne}findFirst(ie){let ne;return this.iterate(le=>ie(le)?(ne=le,!1):!0),ne}findLast(ie){let ne;return this.iterate(le=>(ie(le)&&(ne=le),!0)),ne}findLastMaxBy(ie){let ne,le=!0;return this.iterate(ue=>((le||ae.isGreaterThan(ie(ue,ne)))&&(le=!1,ne=ue),!0)),ne}}e.CallbackIterable=re,re.empty=new re(Y=>{})}),define(se[127],oe([0,1,9]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkAdjacentItems=e.assertFn=e.assert=e.assertNever=e.ok=void 0;function i(P,w){if(!P)throw new Error(w?`Assertion failed (${w})`:"Assertion Failed")}e.ok=i;function k(P,w="Unreachable"){throw new Error(w)}e.assertNever=k;function L(P){if(!P)throw new D.BugIndicatingError("Assertion Failed")}e.assert=L;function T(P){if(!P()){debugger;P(),(0,D.onUnexpectedError)(new D.BugIndicatingError("Assertion Failed"))}}e.assertFn=T;function I(P,w){let C=0;for(;C<P.length-1;){const b=P[C],p=P[C+1];if(!w(b,p))return!1;C++}return!0}e.checkAdjacentItems=I}),define(se[82],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.once=void 0;function D(i){const k=this;let L=!1,T;return function(){return L||(L=!0,T=i.apply(k,arguments)),T}}e.once=D}),define(se[64],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Iterable=void 0;var D;(function(i){function k(h){return h&&typeof h=="object"&&typeof h[Symbol.iterator]=="function"}i.is=k;const L=Object.freeze([]);function T(){return L}i.empty=T;function*I(h){yield h}i.single=I;function P(h){return k(h)?h:I(h)}i.wrap=P;function w(h){return h||L}i.from=w;function C(h){return!h||h[Symbol.iterator]().next().done===!0}i.isEmpty=C;function b(h){return h[Symbol.iterator]().next().value}i.first=b;function p(h,d){for(const n of h)if(d(n))return!0;return!1}i.some=p;function S(h,d){for(const n of h)if(d(n))return n}i.find=S;function*f(h,d){for(const n of h)d(n)&&(yield n)}i.filter=f;function*g(h,d){let n=0;for(const o of h)yield d(o,n++)}i.map=g;function*y(...h){for(const d of h)for(const n of d)yield n}i.concat=y;function l(h,d,n){let o=n;for(const t of h)o=d(o,t);return o}i.reduce=l;function*m(h,d,n=h.length){for(d<0&&(d+=h.length),n<0?n+=h.length:n>h.length&&(n=h.length);d<n;d++)yield h[d]}i.slice=m;function u(h,d=Number.POSITIVE_INFINITY){const n=[];if(d===0)return[n,h];const o=h[Symbol.iterator]();for(let t=0;t<d;t++){const s=o.next();if(s.done)return[n,i.empty()];n.push(s.value)}return[n,{[Symbol.iterator](){return o}}]}i.consume=u})(D=e.Iterable||(e.Iterable={}))}),define(se[35],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNodeType=e.stripComments=e.visit=e.findNodeAtOffset=e.contains=e.getNodeValue=e.getNodePath=e.findNodeAtLocation=e.parseTree=e.parse=e.getLocation=e.createScanner=e.ParseOptions=e.ParseErrorCode=e.SyntaxKind=e.ScanError=void 0;var D;(function(n){n[n.None=0]="None",n[n.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=2]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",n[n.InvalidUnicode=4]="InvalidUnicode",n[n.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",n[n.InvalidCharacter=6]="InvalidCharacter"})(D=e.ScanError||(e.ScanError={}));var i;(function(n){n[n.OpenBraceToken=1]="OpenBraceToken",n[n.CloseBraceToken=2]="CloseBraceToken",n[n.OpenBracketToken=3]="OpenBracketToken",n[n.CloseBracketToken=4]="CloseBracketToken",n[n.CommaToken=5]="CommaToken",n[n.ColonToken=6]="ColonToken",n[n.NullKeyword=7]="NullKeyword",n[n.TrueKeyword=8]="TrueKeyword",n[n.FalseKeyword=9]="FalseKeyword",n[n.StringLiteral=10]="StringLiteral",n[n.NumericLiteral=11]="NumericLiteral",n[n.LineCommentTrivia=12]="LineCommentTrivia",n[n.BlockCommentTrivia=13]="BlockCommentTrivia",n[n.LineBreakTrivia=14]="LineBreakTrivia",n[n.Trivia=15]="Trivia",n[n.Unknown=16]="Unknown",n[n.EOF=17]="EOF"})(i=e.SyntaxKind||(e.SyntaxKind={}));var k;(function(n){n[n.InvalidSymbol=1]="InvalidSymbol",n[n.InvalidNumberFormat=2]="InvalidNumberFormat",n[n.PropertyNameExpected=3]="PropertyNameExpected",n[n.ValueExpected=4]="ValueExpected",n[n.ColonExpected=5]="ColonExpected",n[n.CommaExpected=6]="CommaExpected",n[n.CloseBraceExpected=7]="CloseBraceExpected",n[n.CloseBracketExpected=8]="CloseBracketExpected",n[n.EndOfFileExpected=9]="EndOfFileExpected",n[n.InvalidCommentToken=10]="InvalidCommentToken",n[n.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=12]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",n[n.InvalidUnicode=14]="InvalidUnicode",n[n.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",n[n.InvalidCharacter=16]="InvalidCharacter"})(k=e.ParseErrorCode||(e.ParseErrorCode={}));var L;(function(n){n.DEFAULT={allowTrailingComma:!0}})(L=e.ParseOptions||(e.ParseOptions={}));function T(n,o=!1){let t=0;const s=n.length;let r="",c=0,a=16,v=0;function E(M){let $=0,V=0;for(;$<M;){const B=n.charCodeAt(t);if(B>=48&&B<=57)V=V*16+B-48;else if(B>=65&&B<=70)V=V*16+B-65+10;else if(B>=97&&B<=102)V=V*16+B-97+10;else break;t++,$++}return $<M&&(V=-1),V}function R(M){t=M,r="",c=0,a=16,v=0}function N(){const M=t;if(n.charCodeAt(t)===48)t++;else for(t++;t<n.length&&w(n.charCodeAt(t));)t++;if(t<n.length&&n.charCodeAt(t)===46)if(t++,t<n.length&&w(n.charCodeAt(t)))for(t++;t<n.length&&w(n.charCodeAt(t));)t++;else return v=3,n.substring(M,t);let $=t;if(t<n.length&&(n.charCodeAt(t)===69||n.charCodeAt(t)===101))if(t++,(t<n.length&&n.charCodeAt(t)===43||n.charCodeAt(t)===45)&&t++,t<n.length&&w(n.charCodeAt(t))){for(t++;t<n.length&&w(n.charCodeAt(t));)t++;$=t}else v=3;return n.substring(M,$)}function O(){let M="",$=t;for(;;){if(t>=s){M+=n.substring($,t),v=2;break}const V=n.charCodeAt(t);if(V===34){M+=n.substring($,t),t++;break}if(V===92){if(M+=n.substring($,t),t++,t>=s){v=2;break}switch(n.charCodeAt(t++)){case 34:M+='"';break;case 92:M+="\\";break;case 47:M+="/";break;case 98:M+="\b";break;case 102:M+="\f";break;case 110:M+=`
`;break;case 114:M+="\r";break;case 116:M+="	";break;case 117:{const Q=E(4);Q>=0?M+=String.fromCharCode(Q):v=4;break}default:v=5}$=t;continue}if(V>=0&&V<=31)if(P(V)){M+=n.substring($,t),v=2;break}else v=6;t++}return M}function z(){if(r="",v=0,c=t,t>=s)return c=s,a=17;let M=n.charCodeAt(t);if(I(M)){do t++,r+=String.fromCharCode(M),M=n.charCodeAt(t);while(I(M));return a=15}if(P(M))return t++,r+=String.fromCharCode(M),M===13&&n.charCodeAt(t)===10&&(t++,r+=`
`),a=14;switch(M){case 123:return t++,a=1;case 125:return t++,a=2;case 91:return t++,a=3;case 93:return t++,a=4;case 58:return t++,a=6;case 44:return t++,a=5;case 34:return t++,r=O(),a=10;case 47:{const $=t-1;if(n.charCodeAt(t+1)===47){for(t+=2;t<s&&!P(n.charCodeAt(t));)t++;return r=n.substring($,t),a=12}if(n.charCodeAt(t+1)===42){t+=2;const V=s-1;let B=!1;for(;t<V;){if(n.charCodeAt(t)===42&&n.charCodeAt(t+1)===47){t+=2,B=!0;break}t++}return B||(t++,v=1),r=n.substring($,t),a=13}return r+=String.fromCharCode(M),t++,a=16}case 45:if(r+=String.fromCharCode(M),t++,t===s||!w(n.charCodeAt(t)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r+=N(),a=11;default:for(;t<s&&F(M);)t++,M=n.charCodeAt(t);if(c!==t){switch(r=n.substring(c,t),r){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return r+=String.fromCharCode(M),t++,a=16}}function F(M){if(I(M)||P(M))return!1;switch(M){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function A(){let M;do M=z();while(M>=12&&M<=15);return M}return{setPosition:R,getPosition:()=>t,scan:o?A:z,getToken:()=>a,getTokenValue:()=>r,getTokenOffset:()=>c,getTokenLength:()=>t-c,getTokenError:()=>v}}e.createScanner=T;function I(n){return n===32||n===9||n===11||n===12||n===160||n===5760||n>=8192&&n<=8203||n===8239||n===8287||n===12288||n===65279}function P(n){return n===10||n===13||n===8232||n===8233}function w(n){return n>=48&&n<=57}var C;(function(n){n[n.nullCharacter=0]="nullCharacter",n[n.maxAsciiCharacter=127]="maxAsciiCharacter",n[n.lineFeed=10]="lineFeed",n[n.carriageReturn=13]="carriageReturn",n[n.lineSeparator=8232]="lineSeparator",n[n.paragraphSeparator=8233]="paragraphSeparator",n[n.nextLine=133]="nextLine",n[n.space=32]="space",n[n.nonBreakingSpace=160]="nonBreakingSpace",n[n.enQuad=8192]="enQuad",n[n.emQuad=8193]="emQuad",n[n.enSpace=8194]="enSpace",n[n.emSpace=8195]="emSpace",n[n.threePerEmSpace=8196]="threePerEmSpace",n[n.fourPerEmSpace=8197]="fourPerEmSpace",n[n.sixPerEmSpace=8198]="sixPerEmSpace",n[n.figureSpace=8199]="figureSpace",n[n.punctuationSpace=8200]="punctuationSpace",n[n.thinSpace=8201]="thinSpace",n[n.hairSpace=8202]="hairSpace",n[n.zeroWidthSpace=8203]="zeroWidthSpace",n[n.narrowNoBreakSpace=8239]="narrowNoBreakSpace",n[n.ideographicSpace=12288]="ideographicSpace",n[n.mathematicalSpace=8287]="mathematicalSpace",n[n.ogham=5760]="ogham",n[n._=95]="_",n[n.$=36]="$",n[n._0=48]="_0",n[n._1=49]="_1",n[n._2=50]="_2",n[n._3=51]="_3",n[n._4=52]="_4",n[n._5=53]="_5",n[n._6=54]="_6",n[n._7=55]="_7",n[n._8=56]="_8",n[n._9=57]="_9",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.ampersand=38]="ampersand",n[n.asterisk=42]="asterisk",n[n.at=64]="at",n[n.backslash=92]="backslash",n[n.bar=124]="bar",n[n.caret=94]="caret",n[n.closeBrace=125]="closeBrace",n[n.closeBracket=93]="closeBracket",n[n.closeParen=41]="closeParen",n[n.colon=58]="colon",n[n.comma=44]="comma",n[n.dot=46]="dot",n[n.doubleQuote=34]="doubleQuote",n[n.equals=61]="equals",n[n.exclamation=33]="exclamation",n[n.greaterThan=62]="greaterThan",n[n.lessThan=60]="lessThan",n[n.minus=45]="minus",n[n.openBrace=123]="openBrace",n[n.openBracket=91]="openBracket",n[n.openParen=40]="openParen",n[n.percent=37]="percent",n[n.plus=43]="plus",n[n.question=63]="question",n[n.semicolon=59]="semicolon",n[n.singleQuote=39]="singleQuote",n[n.slash=47]="slash",n[n.tilde=126]="tilde",n[n.backspace=8]="backspace",n[n.formFeed=12]="formFeed",n[n.byteOrderMark=65279]="byteOrderMark",n[n.tab=9]="tab",n[n.verticalTab=11]="verticalTab"})(C||(C={}));function b(n,o){const t=[],s=new Object;let r;const c={value:{},offset:0,length:0,type:"object",parent:void 0};let a=!1;function v(E,R,N,O){c.value=E,c.offset=R,c.length=N,c.type=O,c.colonOffset=void 0,r=c}try{u(n,{onObjectBegin:(E,R)=>{if(o<=E)throw s;r=void 0,a=o>E,t.push("")},onObjectProperty:(E,R,N)=>{if(o<R||(v(E,R,N,"property"),t[t.length-1]=E,o<=R+N))throw s},onObjectEnd:(E,R)=>{if(o<=E)throw s;r=void 0,t.pop()},onArrayBegin:(E,R)=>{if(o<=E)throw s;r=void 0,t.push(0)},onArrayEnd:(E,R)=>{if(o<=E)throw s;r=void 0,t.pop()},onLiteralValue:(E,R,N)=>{if(o<R||(v(E,R,N,d(E)),o<=R+N))throw s},onSeparator:(E,R,N)=>{if(o<=R)throw s;if(E===":"&&r&&r.type==="property")r.colonOffset=R,a=!1,r=void 0;else if(E===","){const O=t[t.length-1];typeof O=="number"?t[t.length-1]=O+1:(a=!0,t[t.length-1]=""),r=void 0}}})}catch(E){if(E!==s)throw E}return{path:t,previousNode:r,isAtPropertyKey:a,matches:E=>{let R=0;for(let N=0;R<E.length&&N<t.length;N++)if(E[R]===t[N]||E[R]==="*")R++;else if(E[R]!=="**")return!1;return R===E.length}}}e.getLocation=b;function p(n,o=[],t=L.DEFAULT){let s=null,r=[];const c=[];function a(E){Array.isArray(r)?r.push(E):s!==null&&(r[s]=E)}return u(n,{onObjectBegin:()=>{const E={};a(E),c.push(r),r=E,s=null},onObjectProperty:E=>{s=E},onObjectEnd:()=>{r=c.pop()},onArrayBegin:()=>{const E=[];a(E),c.push(r),r=E,s=null},onArrayEnd:()=>{r=c.pop()},onLiteralValue:a,onError:(E,R,N)=>{o.push({error:E,offset:R,length:N})}},t),r[0]}e.parse=p;function S(n,o=[],t=L.DEFAULT){let s={type:"array",offset:-1,length:-1,children:[],parent:void 0};function r(E){s.type==="property"&&(s.length=E-s.offset,s=s.parent)}function c(E){return s.children.push(E),E}u(n,{onObjectBegin:E=>{s=c({type:"object",offset:E,length:-1,parent:s,children:[]})},onObjectProperty:(E,R,N)=>{s=c({type:"property",offset:R,length:-1,parent:s,children:[]}),s.children.push({type:"string",value:E,offset:R,length:N,parent:s})},onObjectEnd:(E,R)=>{s.length=E+R-s.offset,s=s.parent,r(E+R)},onArrayBegin:(E,R)=>{s=c({type:"array",offset:E,length:-1,parent:s,children:[]})},onArrayEnd:(E,R)=>{s.length=E+R-s.offset,s=s.parent,r(E+R)},onLiteralValue:(E,R,N)=>{c({type:d(E),offset:R,length:N,parent:s,value:E}),r(R+N)},onSeparator:(E,R,N)=>{s.type==="property"&&(E===":"?s.colonOffset=R:E===","&&r(R))},onError:(E,R,N)=>{o.push({error:E,offset:R,length:N})}},t);const v=s.children[0];return v&&delete v.parent,v}e.parseTree=S;function f(n,o){if(!n)return;let t=n;for(const s of o)if(typeof s=="string"){if(t.type!=="object"||!Array.isArray(t.children))return;let r=!1;for(const c of t.children)if(Array.isArray(c.children)&&c.children[0].value===s){t=c.children[1],r=!0;break}if(!r)return}else{const r=s;if(t.type!=="array"||r<0||!Array.isArray(t.children)||r>=t.children.length)return;t=t.children[r]}return t}e.findNodeAtLocation=f;function g(n){if(!n.parent||!n.parent.children)return[];const o=g(n.parent);if(n.parent.type==="property"){const t=n.parent.children[0].value;o.push(t)}else if(n.parent.type==="array"){const t=n.parent.children.indexOf(n);t!==-1&&o.push(t)}return o}e.getNodePath=g;function y(n){switch(n.type){case"array":return n.children.map(y);case"object":{const o=Object.create(null);for(const t of n.children){const s=t.children[1];s&&(o[t.children[0].value]=y(s))}return o}case"null":case"string":case"number":case"boolean":return n.value;default:return}}e.getNodeValue=y;function l(n,o,t=!1){return o>=n.offset&&o<n.offset+n.length||t&&o===n.offset+n.length}e.contains=l;function m(n,o,t=!1){if(l(n,o,t)){const s=n.children;if(Array.isArray(s))for(let r=0;r<s.length&&s[r].offset<=o;r++){const c=m(s[r],o,t);if(c)return c}return n}}e.findNodeAtOffset=m;function u(n,o,t=L.DEFAULT){const s=T(n,!1);function r(K){return K?()=>K(s.getTokenOffset(),s.getTokenLength()):()=>!0}function c(K){return K?X=>K(X,s.getTokenOffset(),s.getTokenLength()):()=>!0}const a=r(o.onObjectBegin),v=c(o.onObjectProperty),E=r(o.onObjectEnd),R=r(o.onArrayBegin),N=r(o.onArrayEnd),O=c(o.onLiteralValue),z=c(o.onSeparator),F=r(o.onComment),A=c(o.onError),M=t&&t.disallowComments,$=t&&t.allowTrailingComma;function V(){for(;;){const K=s.scan();switch(s.getTokenError()){case 4:B(14);break;case 5:B(15);break;case 3:B(13);break;case 1:M||B(11);break;case 2:B(12);break;case 6:B(16);break}switch(K){case 12:case 13:M?B(10):F();break;case 16:B(1);break;case 15:case 14:break;default:return K}}}function B(K,X=[],_=[]){if(A(K),X.length+_.length>0){let U=s.getToken();for(;U!==17;){if(X.indexOf(U)!==-1){V();break}else if(_.indexOf(U)!==-1)break;U=V()}}}function Q(K){const X=s.getTokenValue();return K?O(X):v(X),V(),!0}function W(){switch(s.getToken()){case 11:{let K=0;try{K=JSON.parse(s.getTokenValue()),typeof K!="number"&&(B(2),K=0)}catch{B(2)}O(K);break}case 7:O(null);break;case 8:O(!0);break;case 9:O(!1);break;default:return!1}return V(),!0}function q(){return s.getToken()!==10?(B(3,[],[2,5]),!1):(Q(!1),s.getToken()===6?(z(":"),V(),ae()||B(4,[],[2,5])):B(5,[],[2,5]),!0)}function G(){a(),V();let K=!1;for(;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){if(K||B(4,[],[]),z(","),V(),s.getToken()===2&&$)break}else K&&B(6,[],[]);q()||B(4,[],[2,5]),K=!0}return E(),s.getToken()!==2?B(7,[2],[]):V(),!0}function ee(){R(),V();let K=!1;for(;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){if(K||B(4,[],[]),z(","),V(),s.getToken()===4&&$)break}else K&&B(6,[],[]);ae()||B(4,[],[4,5]),K=!0}return N(),s.getToken()!==4?B(8,[4],[]):V(),!0}function ae(){switch(s.getToken()){case 3:return ee();case 1:return G();case 10:return Q(!0);default:return W()}}return V(),s.getToken()===17?t.allowEmptyContent?!0:(B(4,[],[]),!1):ae()?(s.getToken()!==17&&B(9,[],[]),!0):(B(4,[],[]),!1)}e.visit=u;function h(n,o){const t=T(n),s=[];let r,c=0,a;do switch(a=t.getPosition(),r=t.scan(),r){case 12:case 13:case 17:c!==a&&s.push(n.substring(c,a)),o!==void 0&&s.push(t.getTokenValue().replace(/[^\r\n]/g,o)),c=t.getPosition();break}while(r!==17);return s.join("")}e.stripComments=h;function d(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(n){if(Array.isArray(n))return"array"}else return"null";return"object"}default:return"null"}}e.getNodeType=d}),define(se[43],oe([0,1,35]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEOL=e.getEOL=e.toFormattedString=e.format=void 0;function i(w,C,b){let p,S,f,g,y;if(C){for(g=C.offset,y=g+C.length,f=g;f>0&&!P(w,f-1);)f--;let a=y;for(;a<w.length&&!P(w,a);)a++;S=w.substring(f,a),p=T(S,b)}else S=w,p=0,f=0,g=0,y=w.length;const l=I(b,w);let m=!1,u=0,h;b.insertSpaces?h=L(" ",b.tabSize||4):h="	";const d=(0,D.createScanner)(S,!1);let n=!1;function o(){return l+L(h,p+u)}function t(){let a=d.scan();for(m=!1;a===15||a===14;)m=m||a===14,a=d.scan();return n=a===16||d.getTokenError()!==0,a}const s=[];function r(a,v,E){!n&&v<y&&E>g&&w.substring(v,E)!==a&&s.push({offset:v,length:E-v,content:a})}let c=t();if(c!==17){const a=d.getTokenOffset()+f,v=L(h,p);r(v,f,a)}for(;c!==17;){let a=d.getTokenOffset()+d.getTokenLength()+f,v=t(),E="";for(;!m&&(v===12||v===13);){const N=d.getTokenOffset()+f;r(" ",a,N),a=d.getTokenOffset()+d.getTokenLength()+f,E=v===12?o():"",v=t()}if(v===2)c!==1&&(u--,E=o());else if(v===4)c!==3&&(u--,E=o());else{switch(c){case 3:case 1:u++,E=o();break;case 5:case 12:E=o();break;case 13:m?E=o():E=" ";break;case 6:E=" ";break;case 10:if(v===6){E="";break}case 7:case 8:case 9:case 11:case 2:case 4:v===12||v===13?E=" ":v!==5&&v!==17&&(n=!0);break;case 16:n=!0;break}m&&(v===12||v===13)&&(E=o())}const R=d.getTokenOffset()+f;r(E,a,R),c=v}return s}e.format=i;function k(w,C){const b=JSON.stringify(w,void 0,C.insertSpaces?C.tabSize||4:"	");return C.eol!==void 0?b.replace(/\r\n|\r|\n/g,C.eol):b}e.toFormattedString=k;function L(w,C){let b="";for(let p=0;p<C;p++)b+=w;return b}function T(w,C){let b=0,p=0;const S=C.tabSize||4;for(;b<w.length;){const f=w.charAt(b);if(f===" ")p++;else if(f==="	")p+=S;else break;b++}return Math.floor(p/S)}function I(w,C){for(let b=0;b<C.length;b++){const p=C.charAt(b);if(p==="\r")return b+1<C.length&&C.charAt(b+1)===`
`?`\r
`:"\r";if(p===`
`)return`
`}return w&&w.eol||`
`}e.getEOL=I;function P(w,C){return`\r
`.indexOf(w.charAt(C))!==-1}e.isEOL=P}),define(se[83],oe([0,1,35,43]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyEdits=e.applyEdit=e.withFormatting=e.setProperty=e.removeProperty=void 0;function k(w,C,b){return L(w,C,void 0,b)}e.removeProperty=k;function L(w,C,b,p,S){const f=C.slice(),g=[],y=(0,D.parseTree)(w,g);let l,m;for(;f.length>0&&(m=f.pop(),l=(0,D.findNodeAtLocation)(y,f),l===void 0&&b!==void 0);)typeof m=="string"?b={[m]:b}:b=[b];if(l)if(l.type==="object"&&typeof m=="string"&&Array.isArray(l.children)){const u=(0,D.findNodeAtLocation)(l,[m]);if(u!==void 0)if(b===void 0){if(!u.parent)throw new Error("Malformed AST");const h=l.children.indexOf(u.parent);let d,n=u.parent.offset+u.parent.length;if(h>0){const o=l.children[h-1];d=o.offset+o.length}else d=l.offset+1,l.children.length>1&&(n=l.children[1].offset);return T(w,{offset:d,length:n-d,content:""},p)}else return T(w,{offset:u.offset,length:u.length,content:JSON.stringify(b)},p);else{if(b===void 0)return[];const h=`${JSON.stringify(m)}: ${JSON.stringify(b)}`,d=S?S(l.children.map(o=>o.children[0].value)):l.children.length;let n;if(d>0){const o=l.children[d-1];n={offset:o.offset+o.length,length:0,content:","+h}}else l.children.length===0?n={offset:l.offset+1,length:0,content:h}:n={offset:l.offset+1,length:0,content:h+","};return T(w,n,p)}}else if(l.type==="array"&&typeof m=="number"&&Array.isArray(l.children))if(b!==void 0){const u=`${JSON.stringify(b)}`;let h;if(l.children.length===0||m===0)h={offset:l.offset+1,length:0,content:l.children.length===0?u:u+","};else{const d=m===-1||m>l.children.length?l.children.length:m,n=l.children[d-1];h={offset:n.offset+n.length,length:0,content:","+u}}return T(w,h,p)}else{const u=m,h=l.children[u];let d;if(l.children.length===1)d={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===u){const n=l.children[u-1],o=n.offset+n.length,t=l.offset+l.length;d={offset:o,length:t-2-o,content:""}}else d={offset:h.offset,length:l.children[u+1].offset-h.offset,content:""};return T(w,d,p)}else throw new Error(`Can not add ${typeof m!="number"?"index":"property"} to parent of type ${l.type}`);else{if(b===void 0)throw new Error("Can not delete in empty document");return T(w,{offset:y?y.offset:0,length:y?y.length:0,content:JSON.stringify(b)},p)}}e.setProperty=L;function T(w,C,b){let p=I(w,C),S=C.offset,f=C.offset+C.content.length;if(C.length===0||C.content.length===0){for(;S>0&&!(0,i.isEOL)(p,S-1);)S--;for(;f<p.length&&!(0,i.isEOL)(p,f);)f++}const g=(0,i.format)(p,{offset:S,length:f-S},b);for(let l=g.length-1;l>=0;l--){const m=g[l];p=I(p,m),S=Math.min(S,m.offset),f=Math.max(f,m.offset+m.length),f+=m.content.length-m.length}const y=w.length-(p.length-f)-S;return[{offset:S,length:y,content:p.substring(S,f)}]}e.withFormatting=T;function I(w,C){return w.substring(0,C.offset)+C.content+w.substring(C.offset+C.length)}e.applyEdit=I;function P(w,C){const b=C.slice(0).sort((S,f)=>{const g=S.offset-f.offset;return g===0?S.length-f.length:g});let p=w.length;for(let S=b.length-1;S>=0;S--){const f=b[S];if(f.offset+f.length<=p)w=I(w,f);else throw new Error("Overlapping edit");p=f.offset}return w}e.applyEdits=P}),define(se[128],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lazy=void 0;class D{constructor(k){this.executor=k,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(k){this._error=k}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(k){return new D(()=>k(this.getValue()))}}e.Lazy=D}),define(se[2],oe([0,1,82,64]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableMap=e.disposeOnReturn=e.ImmortalReference=e.AsyncReferenceCollection=e.ReferenceCollection=e.SafeDisposable=e.RefCountedDisposable=e.MutableDisposable=e.Disposable=e.DisposableStore=e.toDisposable=e.combinedDisposable=e.disposeIfDisposable=e.dispose=e.isDisposable=e.markAsSingleton=e.setDisposableTracker=void 0;const k=!1;let L=null;function T(c){L=c}if(e.setDisposableTracker=T,k){const c="__is_disposable_tracked__";T(new class{trackDisposable(a){const v=new Error("Potentially leaked disposable").stack;setTimeout(()=>{a[c]||console.log(v)},3e3)}setParent(a,v){if(a&&a!==m.None)try{a[c]=!0}catch{}}markAsDisposed(a){if(a&&a!==m.None)try{a[c]=!0}catch{}}markAsSingleton(a){}})}function I(c){return L?.trackDisposable(c),c}function P(c){L?.markAsDisposed(c)}function w(c,a){L?.setParent(c,a)}function C(c,a){if(!!L)for(const v of c)L.setParent(v,a)}function b(c){return L?.markAsSingleton(c),c}e.markAsSingleton=b;function p(c){return typeof c.dispose=="function"&&c.dispose.length===0}e.isDisposable=p;function S(c){if(i.Iterable.is(c)){const a=[];for(const v of c)if(v)try{v.dispose()}catch(E){a.push(E)}if(a.length===1)throw a[0];if(a.length>1)throw new AggregateError(a,"Encountered errors while disposing of store");return Array.isArray(c)?[]:c}else if(c)return c.dispose(),c}e.dispose=S;function f(c){for(const a of c)p(a)&&a.dispose();return[]}e.disposeIfDisposable=f;function g(...c){const a=y(()=>S(c));return C(c,a),a}e.combinedDisposable=g;function y(c){const a=I({dispose:(0,D.once)(()=>{P(a),c()})});return a}e.toDisposable=y;class l{constructor(){this._toDispose=new Set,this._isDisposed=!1,I(this)}dispose(){this._isDisposed||(P(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{S(this._toDispose)}finally{this._toDispose.clear()}}add(a){if(!a)return a;if(a===this)throw new Error("Cannot register a disposable on itself!");return w(a,this),this._isDisposed?l.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(a),a}}e.DisposableStore=l,l.DISABLE_DISPOSED_WARNING=!1;class m{constructor(){this._store=new l,I(this),w(this._store,this)}dispose(){P(this),this._store.dispose()}_register(a){if(a===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(a)}}e.Disposable=m,m.None=Object.freeze({dispose(){}});class u{constructor(){this._isDisposed=!1,I(this)}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),a&&w(a,this),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,P(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){const a=this._value;return this._value=void 0,a&&w(a,null),a}}e.MutableDisposable=u;class h{constructor(a){this._disposable=a,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}e.RefCountedDisposable=h;class d{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,I(this)}set(a){let v=a;return this.unset=()=>v=void 0,this.isset=()=>v!==void 0,this.dispose=()=>{v&&(v(),v=void 0,P(this))},this}}e.SafeDisposable=d;class n{constructor(){this.references=new Map}acquire(a,...v){let E=this.references.get(a);E||(E={counter:0,object:this.createReferencedObject(a,...v)},this.references.set(a,E));const{object:R}=E,N=(0,D.once)(()=>{--E.counter===0&&(this.destroyReferencedObject(a,E.object),this.references.delete(a))});return E.counter++,{object:R,dispose:N}}}e.ReferenceCollection=n;class o{constructor(a){this.referenceCollection=a}async acquire(a,...v){const E=this.referenceCollection.acquire(a,...v);try{return{object:await E.object,dispose:()=>E.dispose()}}catch(R){throw E.dispose(),R}}}e.AsyncReferenceCollection=o;class t{constructor(a){this.object=a}dispose(){}}e.ImmortalReference=t;function s(c){const a=new l;try{c(a)}finally{a.dispose()}}e.disposeOnReturn=s;class r{constructor(){this._store=new Map,this._isDisposed=!1,I(this)}dispose(){P(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(!!this._store.size)try{S(this._store.values())}finally{this._store.clear()}}has(a){return this._store.has(a)}get(a){return this._store.get(a)}set(a,v,E=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),E||this._store.get(a)?.dispose(),this._store.set(a,v)}deleteAndDispose(a){this._store.get(a)?.dispose(),this._store.delete(a)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}e.DisposableMap=r}),define(se[84],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedList=void 0;class D{constructor(L){this.element=L,this.next=D.Undefined,this.prev=D.Undefined}}D.Undefined=new D(void 0);class i{constructor(){this._first=D.Undefined,this._last=D.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===D.Undefined}clear(){let L=this._first;for(;L!==D.Undefined;){const T=L.next;L.prev=D.Undefined,L.next=D.Undefined,L=T}this._first=D.Undefined,this._last=D.Undefined,this._size=0}unshift(L){return this._insert(L,!1)}push(L){return this._insert(L,!0)}_insert(L,T){const I=new D(L);if(this._first===D.Undefined)this._first=I,this._last=I;else if(T){const w=this._last;this._last=I,I.prev=w,w.next=I}else{const w=this._first;this._first=I,I.next=w,w.prev=I}this._size+=1;let P=!1;return()=>{P||(P=!0,this._remove(I))}}shift(){if(this._first!==D.Undefined){const L=this._first.element;return this._remove(this._first),L}}pop(){if(this._last!==D.Undefined){const L=this._last.element;return this._remove(this._last),L}}_remove(L){if(L.prev!==D.Undefined&&L.next!==D.Undefined){const T=L.prev;T.next=L.next,L.next.prev=T}else L.prev===D.Undefined&&L.next===D.Undefined?(this._first=D.Undefined,this._last=D.Undefined):L.next===D.Undefined?(this._last=this._last.prev,this._last.next=D.Undefined):L.prev===D.Undefined&&(this._first=this._first.next,this._first.prev=D.Undefined);this._size-=1}*[Symbol.iterator](){let L=this._first;for(;L!==D.Undefined;)yield L.element,L=L.next}}e.LinkedList=i}),define(se[37],oe([0,1]),function(Z,e){"use strict";var D,i,k;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function L(f,g,y){let l=f.get(g);return l===void 0&&(l=y,f.set(g,l)),l}e.getOrSet=L;function T(f){const g=[];return f.forEach((y,l)=>{g.push(`${l} => ${y}`)}),`Map(${f.size}) {${g.join(", ")}}`}e.mapToString=T;function I(f){const g=[];return f.forEach(y=>{g.push(y)}),`Set(${f.size}) {${g.join(", ")}}`}e.setToString=I;class P{constructor(g,y){this.uri=g,this.value=y}}class w{constructor(g,y){this[D]="ResourceMap",g instanceof w?(this.map=new Map(g.map),this.toKey=y??w.defaultToKey):(this.map=new Map,this.toKey=g??w.defaultToKey)}set(g,y){return this.map.set(this.toKey(g),new P(g,y)),this}get(g){return this.map.get(this.toKey(g))?.value}has(g){return this.map.has(this.toKey(g))}get size(){return this.map.size}clear(){this.map.clear()}delete(g){return this.map.delete(this.toKey(g))}forEach(g,y){typeof y<"u"&&(g=g.bind(y));for(const[l,m]of this.map)g(m.value,m.uri,this)}*values(){for(const g of this.map.values())yield g.value}*keys(){for(const g of this.map.values())yield g.uri}*entries(){for(const g of this.map.values())yield[g.uri,g.value]}*[(D=Symbol.toStringTag,Symbol.iterator)](){for(const[,g]of this.map)yield[g.uri,g.value]}}e.ResourceMap=w,w.defaultToKey=f=>f.toString();class C{constructor(g,y){this[i]="ResourceSet",!g||typeof g=="function"?this._map=new w(g):(this._map=new w(y),g.forEach(this.add,this))}get size(){return this._map.size}add(g){return this._map.set(g,g),this}clear(){this._map.clear()}delete(g){return this._map.delete(g)}forEach(g,y){this._map.forEach((l,m)=>g.call(y,m,m,this))}has(g){return this._map.has(g)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(i=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=C;var b;(function(f){f[f.None=0]="None",f[f.AsOld=1]="AsOld",f[f.AsNew=2]="AsNew"})(b=e.Touch||(e.Touch={}));class p{constructor(){this[k]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(g){return this._map.has(g)}get(g,y=0){const l=this._map.get(g);if(!!l)return y!==0&&this.touch(l,y),l.value}set(g,y,l=0){let m=this._map.get(g);if(m)m.value=y,l!==0&&this.touch(m,l);else{switch(m={key:g,value:y,next:void 0,previous:void 0},l){case 0:this.addItemLast(m);break;case 1:this.addItemFirst(m);break;case 2:this.addItemLast(m);break;default:this.addItemLast(m);break}this._map.set(g,m),this._size++}return this}delete(g){return!!this.remove(g)}remove(g){const y=this._map.get(g);if(!!y)return this._map.delete(g),this.removeItem(y),this._size--,y.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const g=this._head;return this._map.delete(g.key),this.removeItem(g),this._size--,g.value}forEach(g,y){const l=this._state;let m=this._head;for(;m;){if(y?g.bind(y)(m.value,m.key,this):g(m.value,m.key,this),this._state!==l)throw new Error("LinkedMap got modified during iteration.");m=m.next}}keys(){const g=this,y=this._state;let l=this._head;const m={[Symbol.iterator](){return m},next(){if(g._state!==y)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:l.key,done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return m}values(){const g=this,y=this._state;let l=this._head;const m={[Symbol.iterator](){return m},next(){if(g._state!==y)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:l.value,done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return m}entries(){const g=this,y=this._state;let l=this._head;const m={[Symbol.iterator](){return m},next(){if(g._state!==y)throw new Error("LinkedMap got modified during iteration.");if(l){const u={value:[l.key,l.value],done:!1};return l=l.next,u}else return{value:void 0,done:!0}}};return m}[(k=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(g){if(g>=this.size)return;if(g===0){this.clear();return}let y=this._head,l=this.size;for(;y&&l>g;)this._map.delete(y.key),y=y.next,l--;this._head=y,this._size=l,y&&(y.previous=void 0),this._state++}addItemFirst(g){if(!this._head&&!this._tail)this._tail=g;else if(this._head)g.next=this._head,this._head.previous=g;else throw new Error("Invalid list");this._head=g,this._state++}addItemLast(g){if(!this._head&&!this._tail)this._head=g;else if(this._tail)g.previous=this._tail,this._tail.next=g;else throw new Error("Invalid list");this._tail=g,this._state++}removeItem(g){if(g===this._head&&g===this._tail)this._head=void 0,this._tail=void 0;else if(g===this._head){if(!g.next)throw new Error("Invalid list");g.next.previous=void 0,this._head=g.next}else if(g===this._tail){if(!g.previous)throw new Error("Invalid list");g.previous.next=void 0,this._tail=g.previous}else{const y=g.next,l=g.previous;if(!y||!l)throw new Error("Invalid list");y.previous=l,l.next=y}g.next=void 0,g.previous=void 0,this._state++}touch(g,y){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(y!==1&&y!==2)){if(y===1){if(g===this._head)return;const l=g.next,m=g.previous;g===this._tail?(m.next=void 0,this._tail=m):(l.previous=m,m.next=l),g.previous=void 0,g.next=this._head,this._head.previous=g,this._head=g,this._state++}else if(y===2){if(g===this._tail)return;const l=g.next,m=g.previous;g===this._head?(l.previous=void 0,this._head=l):(l.previous=m,m.next=l),g.next=void 0,g.previous=this._tail,this._tail.next=g,this._tail=g,this._state++}}}toJSON(){const g=[];return this.forEach((y,l)=>{g.push([l,y])}),g}fromJSON(g){this.clear();for(const[y,l]of g)this.set(y,l)}}e.LinkedMap=p;class S extends p{constructor(g,y=1){super(),this._limit=g,this._ratio=Math.min(Math.max(0,y),1)}get limit(){return this._limit}set limit(g){this._limit=g,this.checkTrim()}get ratio(){return this._ratio}set ratio(g){this._ratio=Math.min(Math.max(0,g),1),this.checkTrim()}get(g,y=2){return super.get(g,y)}peek(g){return super.get(g,0)}set(g,y){return super.set(g,y,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=S}),define(se[85],oe([0,1,37]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeAccents=e.normalizeNFD=e.normalizeNFC=void 0;const i=new D.LRUCache(1e4);function k(w){return P(w,"NFC",i)}e.normalizeNFC=k;const L=new D.LRUCache(1e4);function T(w){return P(w,"NFD",L)}e.normalizeNFD=T;const I=/[^\u0000-\u0080]/;function P(w,C,b){if(!w)return w;const p=b.get(w);if(p)return p;let S;return I.test(w)?S=w.normalize(C):S=w,b.set(w,S),S}e.removeAccents=function(){const w=/[\u0300-\u036f]/g;return function(C){return T(C).replace(w,"")}}()}),function(){function Z(k){const L=[];typeof k=="number"&&L.push("code/timeOrigin",k);function T(P){L.push(P,Date.now())}function I(){const P=[];for(let w=0;w<L.length;w+=2)P.push({name:L[w],startTime:L[w+1]});return P}return{mark:T,getMarks:I}}function e(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?Z():{mark(k){performance.mark(k)},getMarks(){let k=performance.timeOrigin;typeof k!="number"&&(k=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const L=[{name:"code/timeOrigin",startTime:Math.round(k)}];for(const T of performance.getEntriesByType("mark"))L.push({name:T.name,startTime:Math.round(k+T.startTime)});return L}};if(typeof process=="object"){const k=Math.round((require.__$__nodeRequire||require)("perf_hooks").performance.timeOrigin);return Z(k)}else return console.trace("perf-util loaded in UNKNOWN environment"),Z()}function D(k){return k.MonacoPerformanceMarks||(k.MonacoPerformanceMarks=e()),k.MonacoPerformanceMarks}var i;typeof global=="object"?i=global:typeof self=="object"?i=self:i={},typeof define=="function"?define("vs/base/common/performance",[],function(){return D(i)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=D(i):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),i.perf=D(i))}(),function(Z,e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("vs/base/common/semver/semver",[],e);else{var D=e();for(var i in D)(typeof exports=="object"?exports:Z)[i]=D[i]}}(typeof self<"u"?self:this,function(){return function(Z){var e={};function D(i){if(e[i])return e[i].exports;var k=e[i]={i,l:!1,exports:{}};return Z[i].call(k.exports,k,k.exports,D),k.l=!0,k.exports}return D.m=Z,D.c=e,D.d=function(i,k,L){D.o(i,k)||Object.defineProperty(i,k,{enumerable:!0,get:L})},D.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},D.t=function(i,k){if(1&k&&(i=D(i)),8&k||4&k&&typeof i=="object"&&i&&i.__esModule)return i;var L=Object.create(null);if(D.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:i}),2&k&&typeof i!="string")for(var T in i)D.d(L,T,function(I){return i[I]}.bind(null,T));return L},D.n=function(i){var k=i&&i.__esModule?function(){return i.default}:function(){return i};return D.d(k,"a",k),k},D.o=function(i,k){return Object.prototype.hasOwnProperty.call(i,k)},D.p="",D(D.s=0)}([function(Z,e,D){(function(i){var k;e=Z.exports=_,k=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var ce=Array.prototype.slice.call(arguments,0);ce.unshift("SEMVER"),console.log.apply(console,ce)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var L=256,T=Number.MAX_SAFE_INTEGER||9007199254740991,I=e.re=[],P=e.src=[],w=0,C=w++;P[C]="0|[1-9]\\d*";var b=w++;P[b]="[0-9]+";var p=w++;P[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var S=w++;P[S]="("+P[C]+")\\.("+P[C]+")\\.("+P[C]+")";var f=w++;P[f]="("+P[b]+")\\.("+P[b]+")\\.("+P[b]+")";var g=w++;P[g]="(?:"+P[C]+"|"+P[p]+")";var y=w++;P[y]="(?:"+P[b]+"|"+P[p]+")";var l=w++;P[l]="(?:-("+P[g]+"(?:\\."+P[g]+")*))";var m=w++;P[m]="(?:-?("+P[y]+"(?:\\."+P[y]+")*))";var u=w++;P[u]="[0-9A-Za-z-]+";var h=w++;P[h]="(?:\\+("+P[u]+"(?:\\."+P[u]+")*))";var d=w++,n="v?"+P[S]+P[l]+"?"+P[h]+"?";P[d]="^"+n+"$";var o="[v=\\s]*"+P[f]+P[m]+"?"+P[h]+"?",t=w++;P[t]="^"+o+"$";var s=w++;P[s]="((?:<|>)?=?)";var r=w++;P[r]=P[b]+"|x|X|\\*";var c=w++;P[c]=P[C]+"|x|X|\\*";var a=w++;P[a]="[v=\\s]*("+P[c]+")(?:\\.("+P[c]+")(?:\\.("+P[c]+")(?:"+P[l]+")?"+P[h]+"?)?)?";var v=w++;P[v]="[v=\\s]*("+P[r]+")(?:\\.("+P[r]+")(?:\\.("+P[r]+")(?:"+P[m]+")?"+P[h]+"?)?)?";var E=w++;P[E]="^"+P[s]+"\\s*"+P[a]+"$";var R=w++;P[R]="^"+P[s]+"\\s*"+P[v]+"$";var N=w++;P[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var O=w++;P[O]="(?:~>?)";var z=w++;P[z]="(\\s*)"+P[O]+"\\s+",I[z]=new RegExp(P[z],"g");var F=w++;P[F]="^"+P[O]+P[a]+"$";var A=w++;P[A]="^"+P[O]+P[v]+"$";var M=w++;P[M]="(?:\\^)";var $=w++;P[$]="(\\s*)"+P[M]+"\\s+",I[$]=new RegExp(P[$],"g");var V=w++;P[V]="^"+P[M]+P[a]+"$";var B=w++;P[B]="^"+P[M]+P[v]+"$";var Q=w++;P[Q]="^"+P[s]+"\\s*("+o+")$|^$";var W=w++;P[W]="^"+P[s]+"\\s*("+n+")$|^$";var q=w++;P[q]="(\\s*)"+P[s]+"\\s*("+o+"|"+P[a]+")",I[q]=new RegExp(P[q],"g");var G=w++;P[G]="^\\s*("+P[a]+")\\s+-\\s+("+P[a]+")\\s*$";var ee=w++;P[ee]="^\\s*("+P[v]+")\\s+-\\s+("+P[v]+")\\s*$";var ae=w++;P[ae]="(<|>)?=?\\s*\\*";for(var K=0;K<35;K++)k(K,P[K]),I[K]||(I[K]=new RegExp(P[K]));function X(ce,fe){if(ce instanceof _)return ce;if(typeof ce!="string"||ce.length>L||!(fe?I[t]:I[d]).test(ce))return null;try{return new _(ce,fe)}catch{return null}}function _(ce,fe){if(ce instanceof _){if(ce.loose===fe)return ce;ce=ce.version}else if(typeof ce!="string")throw new TypeError("Invalid Version: "+ce);if(ce.length>L)throw new TypeError("version is longer than "+L+" characters");if(!(this instanceof _))return new _(ce,fe);k("SemVer",ce,fe),this.loose=fe;var ge=ce.trim().match(fe?I[t]:I[d]);if(!ge)throw new TypeError("Invalid Version: "+ce);if(this.raw=ce,this.major=+ge[1],this.minor=+ge[2],this.patch=+ge[3],this.major>T||this.major<0)throw new TypeError("Invalid major version");if(this.minor>T||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>T||this.patch<0)throw new TypeError("Invalid patch version");ge[4]?this.prerelease=ge[4].split(".").map(function(Ce){if(/^[0-9]+$/.test(Ce)){var Ie=+Ce;if(Ie>=0&&Ie<T)return Ie}return Ce}):this.prerelease=[],this.build=ge[5]?ge[5].split("."):[],this.format()}e.parse=X,e.valid=function(ce,fe){var ge=X(ce,fe);return ge?ge.version:null},e.clean=function(ce,fe){var ge=X(ce.trim().replace(/^[=v]+/,""),fe);return ge?ge.version:null},e.SemVer=_,_.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},_.prototype.toString=function(){return this.version},_.prototype.compare=function(ce){return k("SemVer.compare",this.version,this.loose,ce),ce instanceof _||(ce=new _(ce,this.loose)),this.compareMain(ce)||this.comparePre(ce)},_.prototype.compareMain=function(ce){return ce instanceof _||(ce=new _(ce,this.loose)),x(this.major,ce.major)||x(this.minor,ce.minor)||x(this.patch,ce.patch)},_.prototype.comparePre=function(ce){if(ce instanceof _||(ce=new _(ce,this.loose)),this.prerelease.length&&!ce.prerelease.length)return-1;if(!this.prerelease.length&&ce.prerelease.length)return 1;if(!this.prerelease.length&&!ce.prerelease.length)return 0;var fe=0;do{var ge=this.prerelease[fe],Ce=ce.prerelease[fe];if(k("prerelease compare",fe,ge,Ce),ge===void 0&&Ce===void 0)return 0;if(Ce===void 0)return 1;if(ge===void 0)return-1;if(ge!==Ce)return x(ge,Ce)}while(++fe)},_.prototype.inc=function(ce,fe){switch(ce){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",fe);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",fe);break;case"prepatch":this.prerelease.length=0,this.inc("patch",fe),this.inc("pre",fe);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",fe),this.inc("pre",fe);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ge=this.prerelease.length;--ge>=0;)typeof this.prerelease[ge]=="number"&&(this.prerelease[ge]++,ge=-2);ge===-1&&this.prerelease.push(0)}fe&&(this.prerelease[0]===fe?isNaN(this.prerelease[1])&&(this.prerelease=[fe,0]):this.prerelease=[fe,0]);break;default:throw new Error("invalid increment argument: "+ce)}return this.format(),this.raw=this.version,this},e.inc=function(ce,fe,ge,Ce){typeof ge=="string"&&(Ce=ge,ge=void 0);try{return new _(ce,ge).inc(fe,Ce).version}catch{return null}},e.diff=function(ce,fe){if(Y(ce,fe))return null;var ge=X(ce),Ce=X(fe);if(ge.prerelease.length||Ce.prerelease.length){for(var Ie in ge)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&ge[Ie]!==Ce[Ie])return"pre"+Ie;return"prerelease"}for(var Ie in ge)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&ge[Ie]!==Ce[Ie])return Ie},e.compareIdentifiers=x;var U=/^[0-9]+$/;function x(ce,fe){var ge=U.test(ce),Ce=U.test(fe);return ge&&Ce&&(ce=+ce,fe=+fe),ge&&!Ce?-1:Ce&&!ge?1:ce<fe?-1:ce>fe?1:0}function j(ce,fe,ge){return new _(ce,ge).compare(new _(fe,ge))}function J(ce,fe,ge){return j(ce,fe,ge)>0}function re(ce,fe,ge){return j(ce,fe,ge)<0}function Y(ce,fe,ge){return j(ce,fe,ge)===0}function ie(ce,fe,ge){return j(ce,fe,ge)!==0}function ne(ce,fe,ge){return j(ce,fe,ge)>=0}function le(ce,fe,ge){return j(ce,fe,ge)<=0}function ue(ce,fe,ge,Ce){var Ie;switch(fe){case"===":typeof ce=="object"&&(ce=ce.version),typeof ge=="object"&&(ge=ge.version),Ie=ce===ge;break;case"!==":typeof ce=="object"&&(ce=ce.version),typeof ge=="object"&&(ge=ge.version),Ie=ce!==ge;break;case"":case"=":case"==":Ie=Y(ce,ge,Ce);break;case"!=":Ie=ie(ce,ge,Ce);break;case">":Ie=J(ce,ge,Ce);break;case">=":Ie=ne(ce,ge,Ce);break;case"<":Ie=re(ce,ge,Ce);break;case"<=":Ie=le(ce,ge,Ce);break;default:throw new TypeError("Invalid operator: "+fe)}return Ie}function Se(ce,fe){if(ce instanceof Se){if(ce.loose===fe)return ce;ce=ce.value}if(!(this instanceof Se))return new Se(ce,fe);k("comparator",ce,fe),this.loose=fe,this.parse(ce),this.semver===we?this.value="":this.value=this.operator+this.semver.version,k("comp",this)}e.rcompareIdentifiers=function(ce,fe){return x(fe,ce)},e.major=function(ce,fe){return new _(ce,fe).major},e.minor=function(ce,fe){return new _(ce,fe).minor},e.patch=function(ce,fe){return new _(ce,fe).patch},e.compare=j,e.compareLoose=function(ce,fe){return j(ce,fe,!0)},e.rcompare=function(ce,fe,ge){return j(fe,ce,ge)},e.sort=function(ce,fe){return ce.sort(function(ge,Ce){return e.compare(ge,Ce,fe)})},e.rsort=function(ce,fe){return ce.sort(function(ge,Ce){return e.rcompare(ge,Ce,fe)})},e.gt=J,e.lt=re,e.eq=Y,e.neq=ie,e.gte=ne,e.lte=le,e.cmp=ue,e.Comparator=Se;var we={};function Ee(ce,fe){if(ce instanceof Ee)return ce.loose===fe?ce:new Ee(ce.raw,fe);if(ce instanceof Se)return new Ee(ce.value,fe);if(!(this instanceof Ee))return new Ee(ce,fe);if(this.loose=fe,this.raw=ce,this.set=ce.split(/\s*\|\|\s*/).map(function(ge){return this.parseRange(ge.trim())},this).filter(function(ge){return ge.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+ce);this.format()}function be(ce){return!ce||ce.toLowerCase()==="x"||ce==="*"}function Oe(ce,fe,ge,Ce,Ie,Le,Re,Fe,Ae,Me,ze,ke,_e){return((fe=be(ge)?"":be(Ce)?">="+ge+".0.0":be(Ie)?">="+ge+"."+Ce+".0":">="+fe)+" "+(Fe=be(Ae)?"":be(Me)?"<"+(+Ae+1)+".0.0":be(ze)?"<"+Ae+"."+(+Me+1)+".0":ke?"<="+Ae+"."+Me+"."+ze+"-"+ke:"<="+Fe)).trim()}function Ne(ce,fe){for(var ge=0;ge<ce.length;ge++)if(!ce[ge].test(fe))return!1;if(fe.prerelease.length){for(ge=0;ge<ce.length;ge++)if(k(ce[ge].semver),ce[ge].semver!==we&&ce[ge].semver.prerelease.length>0){var Ce=ce[ge].semver;if(Ce.major===fe.major&&Ce.minor===fe.minor&&Ce.patch===fe.patch)return!0}return!1}return!0}function Ge(ce,fe,ge){try{fe=new Ee(fe,ge)}catch{return!1}return fe.test(ce)}function We(ce,fe,ge,Ce){var Ie,Le,Re,Fe,Ae;switch(ce=new _(ce,Ce),fe=new Ee(fe,Ce),ge){case">":Ie=J,Le=le,Re=re,Fe=">",Ae=">=";break;case"<":Ie=re,Le=ne,Re=J,Fe="<",Ae="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ge(ce,fe,Ce))return!1;for(var Me=0;Me<fe.set.length;++Me){var ze=fe.set[Me],ke=null,_e=null;if(ze.forEach(function(te){te.semver===we&&(te=new Se(">=0.0.0")),ke=ke||te,_e=_e||te,Ie(te.semver,ke.semver,Ce)?ke=te:Re(te.semver,_e.semver,Ce)&&(_e=te)}),ke.operator===Fe||ke.operator===Ae||(!_e.operator||_e.operator===Fe)&&Le(ce,_e.semver)||_e.operator===Ae&&Re(ce,_e.semver))return!1}return!0}Se.prototype.parse=function(ce){var fe=this.loose?I[Q]:I[W],ge=ce.match(fe);if(!ge)throw new TypeError("Invalid comparator: "+ce);this.operator=ge[1],this.operator==="="&&(this.operator=""),ge[2]?this.semver=new _(ge[2],this.loose):this.semver=we},Se.prototype.toString=function(){return this.value},Se.prototype.test=function(ce){return k("Comparator.test",ce,this.loose),this.semver===we||(typeof ce=="string"&&(ce=new _(ce,this.loose)),ue(ce,this.operator,this.semver,this.loose))},Se.prototype.intersects=function(ce,fe){if(!(ce instanceof Se))throw new TypeError("a Comparator is required");var ge;if(this.operator==="")return ge=new Ee(ce.value,fe),Ge(this.value,ge,fe);if(ce.operator==="")return ge=new Ee(this.value,fe),Ge(ce.semver,ge,fe);var Ce=!(this.operator!==">="&&this.operator!==">"||ce.operator!==">="&&ce.operator!==">"),Ie=!(this.operator!=="<="&&this.operator!=="<"||ce.operator!=="<="&&ce.operator!=="<"),Le=this.semver.version===ce.semver.version,Re=!(this.operator!==">="&&this.operator!=="<="||ce.operator!==">="&&ce.operator!=="<="),Fe=ue(this.semver,"<",ce.semver,fe)&&(this.operator===">="||this.operator===">")&&(ce.operator==="<="||ce.operator==="<"),Ae=ue(this.semver,">",ce.semver,fe)&&(this.operator==="<="||this.operator==="<")&&(ce.operator===">="||ce.operator===">");return Ce||Ie||Le&&Re||Fe||Ae},e.Range=Ee,Ee.prototype.format=function(){return this.range=this.set.map(function(ce){return ce.join(" ").trim()}).join("||").trim(),this.range},Ee.prototype.toString=function(){return this.range},Ee.prototype.parseRange=function(ce){var fe=this.loose;ce=ce.trim(),k("range",ce,fe);var ge=fe?I[ee]:I[G];ce=ce.replace(ge,Oe),k("hyphen replace",ce),ce=ce.replace(I[q],"$1$2$3"),k("comparator trim",ce,I[q]),ce=(ce=(ce=ce.replace(I[z],"$1~")).replace(I[$],"$1^")).split(/\s+/).join(" ");var Ce=fe?I[Q]:I[W],Ie=ce.split(" ").map(function(Le){return function(Re,Fe){return k("comp",Re),Re=function(Ae,Me){return Ae.trim().split(/\s+/).map(function(ze){return function(ke,_e){k("caret",ke,_e);var te=_e?I[B]:I[V];return ke.replace(te,function(he,de,me,pe,Pe){var De;return k("caret",ke,he,de,me,pe,Pe),be(de)?De="":be(me)?De=">="+de+".0.0 <"+(+de+1)+".0.0":be(pe)?De=de==="0"?">="+de+"."+me+".0 <"+de+"."+(+me+1)+".0":">="+de+"."+me+".0 <"+(+de+1)+".0.0":Pe?(k("replaceCaret pr",Pe),Pe.charAt(0)!=="-"&&(Pe="-"+Pe),De=de==="0"?me==="0"?">="+de+"."+me+"."+pe+Pe+" <"+de+"."+me+"."+(+pe+1):">="+de+"."+me+"."+pe+Pe+" <"+de+"."+(+me+1)+".0":">="+de+"."+me+"."+pe+Pe+" <"+(+de+1)+".0.0"):(k("no pr"),De=de==="0"?me==="0"?">="+de+"."+me+"."+pe+" <"+de+"."+me+"."+(+pe+1):">="+de+"."+me+"."+pe+" <"+de+"."+(+me+1)+".0":">="+de+"."+me+"."+pe+" <"+(+de+1)+".0.0"),k("caret return",De),De})}(ze,Me)}).join(" ")}(Re,Fe),k("caret",Re),Re=function(Ae,Me){return Ae.trim().split(/\s+/).map(function(ze){return function(ke,_e){var te=_e?I[A]:I[F];return ke.replace(te,function(he,de,me,pe,Pe){var De;return k("tilde",ke,he,de,me,pe,Pe),be(de)?De="":be(me)?De=">="+de+".0.0 <"+(+de+1)+".0.0":be(pe)?De=">="+de+"."+me+".0 <"+de+"."+(+me+1)+".0":Pe?(k("replaceTilde pr",Pe),Pe.charAt(0)!=="-"&&(Pe="-"+Pe),De=">="+de+"."+me+"."+pe+Pe+" <"+de+"."+(+me+1)+".0"):De=">="+de+"."+me+"."+pe+" <"+de+"."+(+me+1)+".0",k("tilde return",De),De})}(ze,Me)}).join(" ")}(Re,Fe),k("tildes",Re),Re=function(Ae,Me){return k("replaceXRanges",Ae,Me),Ae.split(/\s+/).map(function(ze){return function(ke,_e){ke=ke.trim();var te=_e?I[R]:I[E];return ke.replace(te,function(he,de,me,pe,Pe,De){k("xRange",ke,he,de,me,pe,Pe,De);var Be=be(me),$e=Be||be(pe),Te=$e||be(Pe);return de==="="&&Te&&(de=""),Be?he=de===">"||de==="<"?"<0.0.0":"*":de&&Te?($e&&(pe=0),Te&&(Pe=0),de===">"?(de=">=",$e?(me=+me+1,pe=0,Pe=0):Te&&(pe=+pe+1,Pe=0)):de==="<="&&(de="<",$e?me=+me+1:pe=+pe+1),he=de+me+"."+pe+"."+Pe):$e?he=">="+me+".0.0 <"+(+me+1)+".0.0":Te&&(he=">="+me+"."+pe+".0 <"+me+"."+(+pe+1)+".0"),k("xRange return",he),he})}(ze,Me)}).join(" ")}(Re,Fe),k("xrange",Re),Re=function(Ae,Me){return k("replaceStars",Ae,Me),Ae.trim().replace(I[ae],"")}(Re,Fe),k("stars",Re),Re}(Le,fe)}).join(" ").split(/\s+/);return this.loose&&(Ie=Ie.filter(function(Le){return!!Le.match(Ce)})),Ie=Ie.map(function(Le){return new Se(Le,fe)})},Ee.prototype.intersects=function(ce,fe){if(!(ce instanceof Ee))throw new TypeError("a Range is required");return this.set.some(function(ge){return ge.every(function(Ce){return ce.set.some(function(Ie){return Ie.every(function(Le){return Ce.intersects(Le,fe)})})})})},e.toComparators=function(ce,fe){return new Ee(ce,fe).set.map(function(ge){return ge.map(function(Ce){return Ce.value}).join(" ").trim().split(" ")})},Ee.prototype.test=function(ce){if(!ce)return!1;typeof ce=="string"&&(ce=new _(ce,this.loose));for(var fe=0;fe<this.set.length;fe++)if(Ne(this.set[fe],ce))return!0;return!1},e.satisfies=Ge,e.maxSatisfying=function(ce,fe,ge){var Ce=null,Ie=null;try{var Le=new Ee(fe,ge)}catch{return null}return ce.forEach(function(Re){Le.test(Re)&&(Ce&&Ie.compare(Re)!==-1||(Ie=new _(Ce=Re,ge)))}),Ce},e.minSatisfying=function(ce,fe,ge){var Ce=null,Ie=null;try{var Le=new Ee(fe,ge)}catch{return null}return ce.forEach(function(Re){Le.test(Re)&&(Ce&&Ie.compare(Re)!==1||(Ie=new _(Ce=Re,ge)))}),Ce},e.validRange=function(ce,fe){try{return new Ee(ce,fe).range||"*"}catch{return null}},e.ltr=function(ce,fe,ge){return We(ce,fe,"<",ge)},e.gtr=function(ce,fe,ge){return We(ce,fe,">",ge)},e.outside=We,e.prerelease=function(ce,fe){var ge=X(ce,fe);return ge&&ge.prerelease.length?ge.prerelease:null},e.intersects=function(ce,fe,ge){return ce=new Ee(ce,ge),fe=new Ee(fe,ge),ce.intersects(fe)},e.coerce=function(ce){if(ce instanceof _)return ce;if(typeof ce!="string")return null;var fe=ce.match(I[N]);return fe==null?null:X((fe[1]||"0")+"."+(fe[2]||"0")+"."+(fe[3]||"0"))}}).call(this,D(1))},function(Z,e){var D,i,k=Z.exports={};function L(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function I(y){if(D===setTimeout)return setTimeout(y,0);if((D===L||!D)&&setTimeout)return D=setTimeout,setTimeout(y,0);try{return D(y,0)}catch{try{return D.call(null,y,0)}catch{return D.call(this,y,0)}}}(function(){try{D=typeof setTimeout=="function"?setTimeout:L}catch{D=L}try{i=typeof clearTimeout=="function"?clearTimeout:T}catch{i=T}})();var P,w=[],C=!1,b=-1;function p(){C&&P&&(C=!1,P.length?w=P.concat(w):b=-1,w.length&&S())}function S(){if(!C){var y=I(p);C=!0;for(var l=w.length;l;){for(P=w,w=[];++b<l;)P&&P[b].run();b=-1,l=w.length}P=null,C=!1,function(m){if(i===clearTimeout)return clearTimeout(m);if((i===T||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(m);try{i(m)}catch{try{return i.call(null,m)}catch{return i.call(this,m)}}}(y)}}function f(y,l){this.fun=y,this.array=l}function g(){}k.nextTick=function(y){var l=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)l[m-1]=arguments[m];w.push(new f(y,l)),w.length!==1||C||I(S)},f.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=g,k.addListener=g,k.once=g,k.off=g,k.removeListener=g,k.removeAllListeners=g,k.emit=g,k.prependListener=g,k.prependOnceListener=g,k.listeners=function(y){return[]},k.binding=function(y){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(y){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}}])}),define(se[129],oe([0,1]),function(Z,e){"use strict";var D;Object.defineProperty(e,"__esModule",{value:!0}),e.SkipList=void 0;class i{constructor(I,P,w){this.level=I,this.key=P,this.value=w,this.forward=[]}}const k=void 0;class L{constructor(I,P=2**16){this.comparator=I,this[D]="SkipList",this._level=0,this._size=0,this._maxLevel=Math.max(1,Math.log2(P)|0),this._header=new i(this._maxLevel,k,k)}get size(){return this._size}clear(){this._header=new i(this._maxLevel,k,k)}has(I){return Boolean(L._search(this,I,this.comparator))}get(I){return L._search(this,I,this.comparator)?.value}set(I,P){return L._insert(this,I,P,this.comparator)&&(this._size+=1),this}delete(I){const P=L._delete(this,I,this.comparator);return P&&(this._size-=1),P}forEach(I,P){let w=this._header.forward[0];for(;w;)I.call(P,w.value,w.key,this),w=w.forward[0]}[(D=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*entries(){let I=this._header.forward[0];for(;I;)yield[I.key,I.value],I=I.forward[0]}*keys(){let I=this._header.forward[0];for(;I;)yield I.key,I=I.forward[0]}*values(){let I=this._header.forward[0];for(;I;)yield I.value,I=I.forward[0]}toString(){let I="[SkipList]:",P=this._header.forward[0];for(;P;)I+=`node(${P.key}, ${P.value}, lvl:${P.level})`,P=P.forward[0];return I}static _search(I,P,w){let C=I._header;for(let b=I._level-1;b>=0;b--)for(;C.forward[b]&&w(C.forward[b].key,P)<0;)C=C.forward[b];if(C=C.forward[0],C&&w(C.key,P)===0)return C}static _insert(I,P,w,C){const b=[];let p=I._header;for(let S=I._level-1;S>=0;S--){for(;p.forward[S]&&C(p.forward[S].key,P)<0;)p=p.forward[S];b[S]=p}if(p=p.forward[0],p&&C(p.key,P)===0)return p.value=w,!1;{const S=L._randomLevel(I);if(S>I._level){for(let f=I._level;f<S;f++)b[f]=I._header;I._level=S}p=new i(S,P,w);for(let f=0;f<S;f++)p.forward[f]=b[f].forward[f],b[f].forward[f]=p;return!0}}static _randomLevel(I,P=.5){let w=1;for(;Math.random()<P&&w<I._maxLevel;)w+=1;return w}static _delete(I,P,w){const C=[];let b=I._header;for(let p=I._level-1;p>=0;p--){for(;b.forward[p]&&w(b.forward[p].key,P)<0;)b=b.forward[p];C[p]=b}if(b=b.forward[0],!b||w(b.key,P)!==0)return!1;for(let p=0;p<I._level&&C[p].forward[p]===b;p++)C[p].forward[p]=b.forward[p];for(;I._level>0&&I._header.forward[I._level-1]===k;)I._level-=1;return!0}}e.SkipList=L}),define(se[44],oe([0,1,9,2]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function k(h){const d=h;return d?typeof d.read=="function":!1}e.isReadable=k;function L(h){const d=h;return d?[d.on,d.pause,d.resume,d.destroy].every(n=>typeof n=="function"):!1}e.isReadableStream=L;function T(h){const d=h;return d?L(d.stream)&&Array.isArray(d.buffer)&&typeof d.ended=="boolean":!1}e.isReadableBufferedStream=T;function I(h,d){return new P(h,d)}e.newWriteableStream=I;class P{constructor(d,n){this.reducer=d,this.options=n,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(d){if(!this.state.destroyed){if(this.state.flowing)this.emitData(d);else if(this.buffer.data.push(d),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(n=>this.pendingWritePromises.push(n))}}error(d){this.state.destroyed||(this.state.flowing?this.emitError(d):this.buffer.error.push(d))}end(d){this.state.destroyed||(typeof d<"u"&&this.write(d),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(d){this.listeners.data.slice(0).forEach(n=>n(d))}emitError(d){this.listeners.error.length===0?(0,D.onUnexpectedError)(d):this.listeners.error.slice(0).forEach(n=>n(d))}emitEnd(){this.listeners.end.slice(0).forEach(d=>d())}on(d,n){if(!this.state.destroyed)switch(d){case"data":this.listeners.data.push(n),this.resume();break;case"end":this.listeners.end.push(n),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(n),this.state.flowing&&this.flowErrors();break}}removeListener(d,n){if(this.state.destroyed)return;let o;switch(d){case"data":o=this.listeners.data;break;case"end":o=this.listeners.end;break;case"error":o=this.listeners.error;break}if(o){const t=o.indexOf(n);t>=0&&o.splice(t,1)}}flowData(){if(this.buffer.data.length>0){const d=this.reducer(this.buffer.data);this.emitData(d),this.buffer.data.length=0;const n=[...this.pendingWritePromises];this.pendingWritePromises.length=0,n.forEach(o=>o())}}flowErrors(){if(this.listeners.error.length>0){for(const d of this.buffer.error)this.emitError(d);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function w(h,d){const n=[];let o;for(;(o=h.read())!==null;)n.push(o);return d(n)}e.consumeReadable=w;function C(h,d,n){const o=[];let t;for(;(t=h.read())!==null&&o.length<n;)o.push(t);return t===null&&o.length>0?d(o):{read:()=>{if(o.length>0)return o.shift();if(typeof t<"u"){const s=t;return t=void 0,s}return h.read()}}}e.peekReadable=C;function b(h,d){return new Promise((n,o)=>{const t=[];p(h,{onData:s=>{d&&t.push(s)},onError:s=>{d?o(s):n(void 0)},onEnd:()=>{n(d?d(t):void 0)}})})}e.consumeStream=b;function p(h,d){let n=!1;return h.on("error",o=>{n||d.onError(o)}),h.on("end",()=>{n||d.onEnd()}),h.on("data",o=>{n||d.onData(o)}),(0,i.toDisposable)(()=>n=!0)}e.listenStream=p;function S(h,d){return new Promise((n,o)=>{const t=new i.DisposableStore,s=[],r=v=>{if(s.push(v),s.length>d)return t.dispose(),h.pause(),n({stream:h,buffer:s,ended:!1})},c=v=>o(v),a=()=>n({stream:h,buffer:s,ended:!0});t.add((0,i.toDisposable)(()=>h.removeListener("error",c))),h.on("error",c),t.add((0,i.toDisposable)(()=>h.removeListener("end",a))),h.on("end",a),t.add((0,i.toDisposable)(()=>h.removeListener("data",r))),h.on("data",r)})}e.peekStream=S;function f(h,d){const n=I(d);return n.end(h),n}e.toStream=f;function g(){const h=I(()=>{throw new Error("not supported")});return h.end(),h}e.emptyStream=g;function y(h){let d=!1;return{read:()=>d?null:(d=!0,h)}}e.toReadable=y;function l(h,d,n){const o=I(n);return p(h,{onData:t=>o.write(d.data(t)),onError:t=>o.error(d.error?d.error(t):t),onEnd:()=>o.end()}),o}e.transform=l;function m(h,d,n){let o=!1;return{read:()=>{const t=d.read();return o?t:(o=!0,t!==null?n([h,t]):h)}}}e.prefixedReadable=m;function u(h,d,n){let o=!1;const t=I(n);return p(d,{onData:s=>o?t.write(s):(o=!0,t.write(n([h,s]))),onError:s=>t.error(s),onEnd:()=>{o||(o=!0,t.write(h)),t.end()}}),t}e.prefixedStream=u}),define(se[17],oe([0,1,44]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const i=typeof Buffer<"u";let k,L;class T{static alloc(v){return i?new T(Buffer.allocUnsafe(v)):new T(new Uint8Array(v))}static wrap(v){return i&&!Buffer.isBuffer(v)&&(v=Buffer.from(v.buffer,v.byteOffset,v.byteLength)),new T(v)}static fromString(v,E){return!(E?.dontUseNodeBuffer||!1)&&i?new T(Buffer.from(v)):(k||(k=new TextEncoder),new T(k.encode(v)))}static fromByteArray(v){const E=T.alloc(v.length);for(let R=0,N=v.length;R<N;R++)E.buffer[R]=v[R];return E}static concat(v,E){if(typeof E>"u"){E=0;for(let O=0,z=v.length;O<z;O++)E+=v[O].byteLength}const R=T.alloc(E);let N=0;for(let O=0,z=v.length;O<z;O++){const F=v[O];R.set(F,N),N+=F.byteLength}return R}constructor(v){this.buffer=v,this.byteLength=this.buffer.byteLength}clone(){const v=T.alloc(this.byteLength);return v.set(this),v}toString(){return i?this.buffer.toString():(L||(L=new TextDecoder),L.decode(this.buffer))}slice(v,E){return new T(this.buffer.subarray(v,E))}set(v,E){if(v instanceof T)this.buffer.set(v.buffer,E);else if(v instanceof Uint8Array)this.buffer.set(v,E);else if(v instanceof ArrayBuffer)this.buffer.set(new Uint8Array(v),E);else if(ArrayBuffer.isView(v))this.buffer.set(new Uint8Array(v.buffer,v.byteOffset,v.byteLength),E);else throw new Error("Unknown argument 'array'")}readUInt32BE(v){return w(this.buffer,v)}writeUInt32BE(v,E){C(this.buffer,v,E)}readUInt32LE(v){return b(this.buffer,v)}writeUInt32LE(v,E){p(this.buffer,v,E)}readUInt8(v){return S(this.buffer,v)}writeUInt8(v,E){f(this.buffer,v,E)}}e.VSBuffer=T;function I(a,v){return a[v+0]<<0>>>0|a[v+1]<<8>>>0}e.readUInt16LE=I;function P(a,v,E){a[E+0]=v&255,v=v>>>8,a[E+1]=v&255}e.writeUInt16LE=P;function w(a,v){return a[v]*2**24+a[v+1]*2**16+a[v+2]*2**8+a[v+3]}e.readUInt32BE=w;function C(a,v,E){a[E+3]=v,v=v>>>8,a[E+2]=v,v=v>>>8,a[E+1]=v,v=v>>>8,a[E]=v}e.writeUInt32BE=C;function b(a,v){return a[v+0]<<0>>>0|a[v+1]<<8>>>0|a[v+2]<<16>>>0|a[v+3]<<24>>>0}e.readUInt32LE=b;function p(a,v,E){a[E+0]=v&255,v=v>>>8,a[E+1]=v&255,v=v>>>8,a[E+2]=v&255,v=v>>>8,a[E+3]=v&255}e.writeUInt32LE=p;function S(a,v){return a[v]}e.readUInt8=S;function f(a,v,E){a[E]=v}e.writeUInt8=f;function g(a){return D.consumeReadable(a,v=>T.concat(v))}e.readableToBuffer=g;function y(a){return D.toReadable(a)}e.bufferToReadable=y;function l(a){return D.consumeStream(a,v=>T.concat(v))}e.streamToBuffer=l;async function m(a){return a.ended?T.concat(a.buffer):T.concat([...a.buffer,await l(a.stream)])}e.bufferedStreamToBuffer=m;function u(a){return D.toStream(a,v=>T.concat(v))}e.bufferToStream=u;function h(a){return D.transform(a,{data:v=>typeof v=="string"?T.fromString(v):T.wrap(v)},v=>T.concat(v))}e.streamToBufferReadableStream=h;function d(a){return D.newWriteableStream(v=>T.concat(v),a)}e.newWriteableBufferStream=d;function n(a,v){return D.prefixedReadable(a,v,E=>T.concat(E))}e.prefixedBufferReadable=n;function o(a,v){return D.prefixedStream(a,v,E=>T.concat(E))}e.prefixedBufferStream=o;function t(a){let v=0,E=0,R=0;const N=new Uint8Array(Math.floor(a.length/4*3)),O=F=>{switch(E){case 3:N[R++]=v|F,E=0;break;case 2:N[R++]=v|F>>>2,v=F<<6,E=3;break;case 1:N[R++]=v|F>>>4,v=F<<4,E=2;break;default:v=F<<2,E=1}};for(let F=0;F<a.length;F++){const A=a.charCodeAt(F);if(A>=65&&A<=90)O(A-65);else if(A>=97&&A<=122)O(A-97+26);else if(A>=48&&A<=57)O(A-48+52);else if(A===43||A===45)O(62);else if(A===47||A===95)O(63);else{if(A===61)break;throw new SyntaxError(`Unexpected base64 character ${a[F]}`)}}const z=R;for(;E>0;)O(0);return T.wrap(N).slice(0,z)}e.decodeBase64=t;const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function c({buffer:a},v=!0,E=!1){const R=E?r:s;let N="";const O=a.byteLength%3;let z=0;for(;z<a.byteLength-O;z+=3){const F=a[z+0],A=a[z+1],M=a[z+2];N+=R[F>>>2],N+=R[(F<<4|A>>>4)&63],N+=R[(A<<2|M>>>6)&63],N+=R[M&63]}if(O===1){const F=a[z+0];N+=R[F>>>2],N+=R[F<<4&63],v&&(N+="==")}else if(O===2){const F=a[z+0],A=a[z+1];N+=R[F>>>2],N+=R[(F<<4|A>>>4)&63],N+=R[A<<2&63],v&&(N+="=")}return N}e.encodeBase64=c}),define(se[14],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withUndefinedAsNull=e.withNullAsUndefined=e.validateConstraint=e.validateConstraints=e.areFunctions=e.isFunction=e.isEmptyObject=e.assertAllDefined=e.assertIsDefined=e.assertType=e.isUndefinedOrNull=e.isDefined=e.isUndefined=e.isBoolean=e.isIterable=e.isNumber=e.isTypedArray=e.isObject=e.isStringArray=e.isString=void 0;function D(o){return typeof o=="string"}e.isString=D;function i(o){return Array.isArray(o)&&o.every(t=>D(t))}e.isStringArray=i;function k(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}e.isObject=k;function L(o){const t=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof t}e.isTypedArray=L;function T(o){return typeof o=="number"&&!isNaN(o)}e.isNumber=T;function I(o){return!!o&&typeof o[Symbol.iterator]=="function"}e.isIterable=I;function P(o){return o===!0||o===!1}e.isBoolean=P;function w(o){return typeof o>"u"}e.isUndefined=w;function C(o){return!b(o)}e.isDefined=C;function b(o){return w(o)||o===null}e.isUndefinedOrNull=b;function p(o,t){if(!o)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}e.assertType=p;function S(o){if(b(o))throw new Error("Assertion Failed: argument is undefined or null");return o}e.assertIsDefined=S;function f(...o){const t=[];for(let s=0;s<o.length;s++){const r=o[s];if(b(r))throw new Error(`Assertion Failed: argument at index ${s} is undefined or null`);t.push(r)}return t}e.assertAllDefined=f;const g=Object.prototype.hasOwnProperty;function y(o){if(!k(o))return!1;for(const t in o)if(g.call(o,t))return!1;return!0}e.isEmptyObject=y;function l(o){return typeof o=="function"}e.isFunction=l;function m(...o){return o.length>0&&o.every(l)}e.areFunctions=m;function u(o,t){const s=Math.min(o.length,t.length);for(let r=0;r<s;r++)h(o[r],t[r])}e.validateConstraints=u;function h(o,t){if(D(t)){if(typeof o!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(l(t)){try{if(o instanceof t)return}catch{}if(!b(o)&&o.constructor===t||t.length===1&&t.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}e.validateConstraint=h;function d(o){return o===null?void 0:o}e.withNullAsUndefined=d;function n(o){return typeof o>"u"?null:o}e.withUndefinedAsNull=n}),define(se[32],oe([0,1,14]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createProxyObject=e.getAllMethodNames=e.getAllPropertyNames=e.filter=e.getCaseInsensitive=e.distinct=e.safeStringify=e.equals=e.mixin=e.cloneAndChange=e.deepFreeze=e.deepClone=void 0;function i(l){if(!l||typeof l!="object"||l instanceof RegExp)return l;const m=Array.isArray(l)?[]:{};return Object.entries(l).forEach(([u,h])=>{m[u]=h&&typeof h=="object"?i(h):h}),m}e.deepClone=i;function k(l){if(!l||typeof l!="object")return l;const m=[l];for(;m.length>0;){const u=m.shift();Object.freeze(u);for(const h in u)if(L.call(u,h)){const d=u[h];typeof d=="object"&&!Object.isFrozen(d)&&!(0,D.isTypedArray)(d)&&m.push(d)}}return l}e.deepFreeze=k;const L=Object.prototype.hasOwnProperty;function T(l,m){return I(l,m,new Set)}e.cloneAndChange=T;function I(l,m,u){if((0,D.isUndefinedOrNull)(l))return l;const h=m(l);if(typeof h<"u")return h;if(Array.isArray(l)){const d=[];for(const n of l)d.push(I(n,m,u));return d}if((0,D.isObject)(l)){if(u.has(l))throw new Error("Cannot clone recursive data-structure");u.add(l);const d={};for(const n in l)L.call(l,n)&&(d[n]=I(l[n],m,u));return u.delete(l),d}return l}function P(l,m,u=!0){return(0,D.isObject)(l)?((0,D.isObject)(m)&&Object.keys(m).forEach(h=>{h in l?u&&((0,D.isObject)(l[h])&&(0,D.isObject)(m[h])?P(l[h],m[h],u):l[h]=m[h]):l[h]=m[h]}),l):m}e.mixin=P;function w(l,m){if(l===m)return!0;if(l==null||m===null||m===void 0||typeof l!=typeof m||typeof l!="object"||Array.isArray(l)!==Array.isArray(m))return!1;let u,h;if(Array.isArray(l)){if(l.length!==m.length)return!1;for(u=0;u<l.length;u++)if(!w(l[u],m[u]))return!1}else{const d=[];for(h in l)d.push(h);d.sort();const n=[];for(h in m)n.push(h);if(n.sort(),!w(d,n))return!1;for(u=0;u<d.length;u++)if(!w(l[d[u]],m[d[u]]))return!1}return!0}e.equals=w;function C(l){const m=new Set;return JSON.stringify(l,(u,h)=>{if((0,D.isObject)(h)||Array.isArray(h)){if(m.has(h))return"[Circular]";m.add(h)}return h})}e.safeStringify=C;function b(l,m){const u=Object.create(null);return!l||!m||Object.keys(m).forEach(d=>{const n=l[d],o=m[d];w(n,o)||(u[d]=o)}),u}e.distinct=b;function p(l,m){const u=m.toLowerCase(),h=Object.keys(l).find(d=>d.toLowerCase()===u);return h?l[h]:l[m]}e.getCaseInsensitive=p;function S(l,m){const u=Object.create(null);for(const[h,d]of Object.entries(l))m(h,d)&&(u[h]=d);return u}e.filter=S;function f(l){let m=[],u=Object.getPrototypeOf(l);for(;Object.prototype!==u;)m=m.concat(Object.getOwnPropertyNames(u)),u=Object.getPrototypeOf(u);return m}e.getAllPropertyNames=f;function g(l){const m=[];for(const u of f(l))typeof l[u]=="function"&&m.push(u);return m}e.getAllMethodNames=g;function y(l,m){const u=d=>function(){const n=Array.prototype.slice.call(arguments,0);return m(d,n)},h={};for(const d of l)h[d]=u(d);return h}e.createProxyObject=y}),define(se[31],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=e.isUUID=void 0;const D=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function i(k){return D.test(k)}e.isUUID=i,e.generateUuid=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let k;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?k=crypto.getRandomValues.bind(crypto):k=function(I){for(let P=0;P<I.length;P++)I[P]=Math.floor(Math.random()*256);return I};const L=new Uint8Array(16),T=[];for(let I=0;I<256;I++)T.push(I.toString(16).padStart(2,"0"));return function(){k(L),L[6]=L[6]&15|64,L[8]=L[8]&63|128;let P=0,w="";return w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w+="-",w+=T[L[P++]],w+=T[L[P++]],w+="-",w+=T[L[P++]],w+=T[L[P++]],w+="-",w+=T[L[P++]],w+=T[L[P++]],w+="-",w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w+=T[L[P++]],w}}()}),define(se[130],oe([0,1,34]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMac=void 0;const i=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function k(T){const I=T.replace(/\-/g,":").toLowerCase();return!i.has(I)}function L(){const T=(0,D.networkInterfaces)();for(const I in T){const P=T[I];if(P){for(const{mac:w}of P)if(k(w))return w}}throw new Error("Unable to retrieve mac address (unexpected format)")}e.getMac=L}),define(se[131],oe([0,1,86]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findFreePortFaster=e.BROWSER_RESTRICTED_PORTS=e.findFreePort=void 0;function i(I,P,w,C=1){let b=!1;return new Promise(p=>{const S=setTimeout(()=>{if(!b)return b=!0,p(0)},w);k(I,P,C,f=>{if(!b)return b=!0,clearTimeout(S),p(f)})})}e.findFreePort=i;function k(I,P,w,C){if(P===0)return C(0);const b=new D.Socket;b.once("connect",()=>(T(b),k(I+w,P-1,w,C))),b.once("data",()=>{}),b.once("error",p=>(T(b),p.code!=="ECONNREFUSED"?k(I+w,P-1,w,C):C(I))),b.connect(I,"127.0.0.1")}e.BROWSER_RESTRICTED_PORTS={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function L(I,P,w,C="127.0.0.1"){let b=!1,p,S=1;const f=D.createServer({pauseOnConnect:!0});function g(y,l){b||(b=!0,f.removeAllListeners(),f.close(),p&&clearTimeout(p),l(y))}return new Promise(y=>{p=setTimeout(()=>{g(0,y)},w),f.on("listening",()=>{g(I,y)}),f.on("error",l=>{l&&(l.code==="EADDRINUSE"||l.code==="EACCES")&&S<P?(I++,S++,f.listen(I,C)):g(0,y)}),f.on("close",()=>{g(0,y)}),f.listen(I,C)})}e.findFreePortFaster=L;function T(I){try{I.removeAllListeners("connect"),I.removeAllListeners("error"),I.end(),I.destroy(),I.unref()}catch(P){console.error(P)}}}),define(se[132],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OfflineError=e.isOfflineError=void 0;const D="Offline";function i(L){return L instanceof k?!0:L instanceof Error&&L.name===D&&L.message===D}e.isOfflineError=i;class k extends Error{constructor(){super(D),this.name=this.message}}e.OfflineError=k}),define(se[133],oe([0,1,17,9,132]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0;function L(P,w){if(!navigator.onLine)throw new k.OfflineError;P.proxyAuthorization&&(P.headers={...P.headers||{},"Proxy-Authorization":P.proxyAuthorization});const C=new XMLHttpRequest;return new Promise((b,p)=>{C.open(P.type||"GET",P.url||"",!0,P.user,P.password),T(C,P),C.responseType="arraybuffer",C.onerror=S=>p(new Error(C.statusText&&"XHR failed: "+C.statusText||"XHR failed")),C.onload=S=>{b({res:{statusCode:C.status,headers:I(C)},stream:(0,D.bufferToStream)(D.VSBuffer.wrap(new Uint8Array(C.response)))})},C.ontimeout=S=>p(new Error(`XHR timeout: ${P.timeout}ms`)),P.timeout&&(C.timeout=P.timeout),C.send(P.data),w.onCancellationRequested(()=>{C.abort(),p((0,i.canceled)())})})}e.request=L;function T(P,w){if(w.headers){e:for(const C in w.headers){switch(C){case"User-Agent":case"Accept-Encoding":case"Content-Length":continue e}P.setRequestHeader(C,w.headers[C])}}}function I(P){const w=Object.create(null);for(const C of P.getAllResponseHeaders().split(/\r\n|\n|\r/g))if(C){const b=C.indexOf(":");w[C.substr(0,b).trim().toLowerCase()]=C.substr(b+1).trim()}return w}}),define(se[134],oe([10,11]),function(Z,e){return Z.create("vs/base/common/date",e)}),define(se[65],oe([0,1,134]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalISOString=e.fromNow=void 0;const i=60,k=i*60,L=k*24,T=L*7,I=L*30,P=L*365;function w(b,p,S){typeof b!="number"&&(b=b.getTime());const f=Math.round((new Date().getTime()-b)/1e3);if(f<-30)return(0,D.localize)(0,null,w(new Date().getTime()+f*1e3,!1));if(f<30)return(0,D.localize)(1,null);let g;return f<i?(g=f,p?g===1?S?(0,D.localize)(2,null,g):(0,D.localize)(3,null,g):S?(0,D.localize)(4,null,g):(0,D.localize)(5,null,g):g===1?S?(0,D.localize)(6,null,g):(0,D.localize)(7,null,g):S?(0,D.localize)(8,null,g):(0,D.localize)(9,null,g)):f<k?(g=Math.floor(f/i),p?g===1?S?(0,D.localize)(10,null,g):(0,D.localize)(11,null,g):S?(0,D.localize)(12,null,g):(0,D.localize)(13,null,g):g===1?S?(0,D.localize)(14,null,g):(0,D.localize)(15,null,g):S?(0,D.localize)(16,null,g):(0,D.localize)(17,null,g)):f<L?(g=Math.floor(f/k),p?g===1?S?(0,D.localize)(18,null,g):(0,D.localize)(19,null,g):S?(0,D.localize)(20,null,g):(0,D.localize)(21,null,g):g===1?S?(0,D.localize)(22,null,g):(0,D.localize)(23,null,g):S?(0,D.localize)(24,null,g):(0,D.localize)(25,null,g)):f<T?(g=Math.floor(f/L),p?g===1?(0,D.localize)(26,null,g):(0,D.localize)(27,null,g):g===1?(0,D.localize)(28,null,g):(0,D.localize)(29,null,g)):f<I?(g=Math.floor(f/T),p?g===1?S?(0,D.localize)(30,null,g):(0,D.localize)(31,null,g):S?(0,D.localize)(32,null,g):(0,D.localize)(33,null,g):g===1?S?(0,D.localize)(34,null,g):(0,D.localize)(35,null,g):S?(0,D.localize)(36,null,g):(0,D.localize)(37,null,g)):f<P?(g=Math.floor(f/I),p?g===1?S?(0,D.localize)(38,null,g):(0,D.localize)(39,null,g):S?(0,D.localize)(40,null,g):(0,D.localize)(41,null,g):g===1?S?(0,D.localize)(42,null,g):(0,D.localize)(43,null,g):S?(0,D.localize)(44,null,g):(0,D.localize)(45,null,g)):(g=Math.floor(f/P),p?g===1?S?(0,D.localize)(46,null,g):(0,D.localize)(47,null,g):S?(0,D.localize)(48,null,g):(0,D.localize)(49,null,g):g===1?S?(0,D.localize)(50,null,g):(0,D.localize)(51,null,g):S?(0,D.localize)(52,null,g):(0,D.localize)(53,null,g))}e.fromNow=w;function C(b){return b.getFullYear()+"-"+String(b.getMonth()+1).padStart(2,"0")+"-"+String(b.getDate()).padStart(2,"0")+"T"+String(b.getHours()).padStart(2,"0")+":"+String(b.getMinutes()).padStart(2,"0")+":"+String(b.getSeconds()).padStart(2,"0")+"."+(b.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}e.toLocalISOString=C}),define(se[135],oe([10,11]),function(Z,e){return Z.create("vs/base/common/errorMessage",e)}),define(se[38],oe([0,1,20,14,135]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorWithActions=e.isErrorWithActions=e.toErrorMessage=void 0;function L(b,p){return p&&(b.stack||b.stacktrace)?k.localize(0,null,I(b),T(b.stack)||T(b.stacktrace)):I(b)}function T(b){return Array.isArray(b)?b.join(`
`):b}function I(b){return typeof b.code=="string"&&typeof b.errno=="number"&&typeof b.syscall=="string"?k.localize(1,null,b.message):b.message||k.localize(2,null)}function P(b=null,p=!1){if(!b)return k.localize(3,null);if(Array.isArray(b)){const S=D.coalesce(b),f=P(S[0],p);return S.length>1?k.localize(4,null,f,S.length):f}if(i.isString(b))return b;if(b.detail){const S=b.detail;if(S.error)return L(S.error,p);if(S.exception)return L(S.exception,p)}return b.stack?L(b,p):b.message?b.message:k.localize(5,null)}e.toErrorMessage=P;function w(b){const p=b;return p instanceof Error&&Array.isArray(p.actions)}e.isErrorWithActions=w;function C(b,p){let S;return typeof b=="string"?S=new Error(b):S=b,S.actions=p,S}e.createErrorWithActions=C}),define(se[136],oe([10,11]),function(Z,e){return Z.create("vs/base/common/jsonErrorMessages",e)}),define(se[137],oe([0,1,136]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getParseErrorMessage=void 0;function i(k){switch(k){case 1:return(0,D.localize)(0,null);case 2:return(0,D.localize)(1,null);case 3:return(0,D.localize)(2,null);case 4:return(0,D.localize)(3,null);case 5:return(0,D.localize)(4,null);case 6:return(0,D.localize)(5,null);case 7:return(0,D.localize)(6,null);case 8:return(0,D.localize)(7,null);case 9:return(0,D.localize)(8,null);default:return""}}e.getParseErrorMessage=i}),define(se[138],oe([10,11]),function(Z,e){return Z.create("vs/base/common/platform",e)}),define(se[5],oe([0,1,138]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAndroid=e.isEdge=e.isSafari=e.isFirefox=e.isChrome=e.isLittleEndian=e.OS=e.OperatingSystem=e.setTimeout0=e.setTimeout0IsFaster=e.translationsConfigFile=e.locale=e.Language=e.language=e.userAgent=e.platform=e.isCI=e.isMobile=e.isIOS=e.isWebWorker=e.isWeb=e.isElectron=e.isNative=e.isLinuxSnap=e.isLinux=e.isMacintosh=e.isWindows=e.PlatformToString=e.Platform=e.globals=e.LANGUAGE_DEFAULT=void 0,e.LANGUAGE_DEFAULT="en";let i=!1,k=!1,L=!1,T=!1,I=!1,P=!1,w=!1,C=!1,b=!1,p=!1,S,f=e.LANGUAGE_DEFAULT,g,y;e.globals=typeof self=="object"?self:typeof global=="object"?global:{};let l;typeof e.globals.vscode<"u"&&typeof e.globals.vscode.process<"u"?l=e.globals.vscode.process:typeof process<"u"&&(l=process);const m=typeof l?.versions?.electron=="string",u=m&&l?.type==="renderer";if(typeof navigator=="object"&&!u)y=navigator.userAgent,i=y.indexOf("Windows")>=0,k=y.indexOf("Macintosh")>=0,C=(y.indexOf("Macintosh")>=0||y.indexOf("iPad")>=0||y.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,L=y.indexOf("Linux")>=0,p=y?.indexOf("Mobi")>=0,P=!0,S=D.getConfiguredDefaultLocale(D.localize(0,null))||e.LANGUAGE_DEFAULT,f=S;else if(typeof l=="object"){i=l.platform==="win32",k=l.platform==="darwin",L=l.platform==="linux",T=L&&!!l.env.SNAP&&!!l.env.SNAP_REVISION,w=m,b=!!l.env.CI||!!l.env.BUILD_ARTIFACTSTAGINGDIRECTORY,S=e.LANGUAGE_DEFAULT,f=e.LANGUAGE_DEFAULT;const a=l.env.VSCODE_NLS_CONFIG;if(a)try{const v=JSON.parse(a),E=v.availableLanguages["*"];S=v.locale,f=E||e.LANGUAGE_DEFAULT,g=v._translationsConfigFile}catch{}I=!0}else console.error("Unable to resolve platform.");var h;(function(a){a[a.Web=0]="Web",a[a.Mac=1]="Mac",a[a.Linux=2]="Linux",a[a.Windows=3]="Windows"})(h=e.Platform||(e.Platform={}));function d(a){switch(a){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}e.PlatformToString=d;let n=0;k?n=1:i?n=3:L&&(n=2),e.isWindows=i,e.isMacintosh=k,e.isLinux=L,e.isLinuxSnap=T,e.isNative=I,e.isElectron=w,e.isWeb=P,e.isWebWorker=P&&typeof e.globals.importScripts=="function",e.isIOS=C,e.isMobile=p,e.isCI=b,e.platform=n,e.userAgent=y,e.language=f;var o;(function(a){function v(){return e.language}a.value=v;function E(){return e.language.length===2?e.language==="en":e.language.length>=3?e.language[0]==="e"&&e.language[1]==="n"&&e.language[2]==="-":!1}a.isDefaultVariant=E;function R(){return e.language==="en"}a.isDefault=R})(o=e.Language||(e.Language={})),e.locale=S,e.translationsConfigFile=g,e.setTimeout0IsFaster=typeof e.globals.postMessage=="function"&&!e.globals.importScripts,e.setTimeout0=(()=>{if(e.setTimeout0IsFaster){const a=[];e.globals.addEventListener("message",E=>{if(E.data&&E.data.vscodeScheduleAsyncWork)for(let R=0,N=a.length;R<N;R++){const O=a[R];if(O.id===E.data.vscodeScheduleAsyncWork){a.splice(R,1),O.callback();return}}});let v=0;return E=>{const R=++v;a.push({id:R,callback:E}),e.globals.postMessage({vscodeScheduleAsyncWork:R},"*")}}return a=>setTimeout(a)})();var t;(function(a){a[a.Windows=1]="Windows",a[a.Macintosh=2]="Macintosh",a[a.Linux=3]="Linux"})(t=e.OperatingSystem||(e.OperatingSystem={})),e.OS=k||C?2:i?1:3;let s=!0,r=!1;function c(){if(!r){r=!0;const a=new Uint8Array(2);a[0]=1,a[1]=2,s=new Uint16Array(a.buffer)[0]===(2<<8)+1}return s}e.isLittleEndian=c,e.isChrome=!!(e.userAgent&&e.userAgent.indexOf("Chrome")>=0),e.isFirefox=!!(e.userAgent&&e.userAgent.indexOf("Firefox")>=0),e.isSafari=!!(!e.isChrome&&e.userAgent&&e.userAgent.indexOf("Safari")>=0),e.isEdge=!!(e.userAgent&&e.userAgent.indexOf("Edg/")>=0),e.isAndroid=!!(e.userAgent&&e.userAgent.indexOf("Android")>=0)}),define(se[36],oe([0,1,5]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arch=e.platform=e.env=e.cwd=void 0;let i;if(typeof D.globals.vscode<"u"&&typeof D.globals.vscode.process<"u"){const k=D.globals.vscode.process;i={get platform(){return k.platform},get arch(){return k.arch},get env(){return k.env},cwd(){return k.cwd()}}}else typeof process<"u"?i={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:i={get platform(){return D.isWindows?"win32":D.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};e.cwd=i.cwd,e.env=i.env,e.platform=i.platform,e.arch=i.arch}),define(se[12],oe([0,1,36]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delimiter=e.sep=e.toNamespacedPath=e.parse=e.format=e.extname=e.basename=e.dirname=e.relative=e.resolve=e.join=e.isAbsolute=e.normalize=e.posix=e.win32=void 0;const i=65,k=97,L=90,T=122,I=46,P=47,w=92,C=58,b=63;class p extends Error{constructor(h,d,n){let o;typeof d=="string"&&d.indexOf("not ")===0?(o="must not be",d=d.replace(/^not /,"")):o="must be";const t=h.indexOf(".")!==-1?"property":"argument";let s=`The "${h}" ${t} ${o} of type ${d}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function S(u,h){if(typeof u!="string")throw new p(h,"string",u)}function f(u){return u===P||u===w}function g(u){return u===P}function y(u){return u>=i&&u<=L||u>=k&&u<=T}function l(u,h,d,n){let o="",t=0,s=-1,r=0,c=0;for(let a=0;a<=u.length;++a){if(a<u.length)c=u.charCodeAt(a);else{if(n(c))break;c=P}if(n(c)){if(!(s===a-1||r===1))if(r===2){if(o.length<2||t!==2||o.charCodeAt(o.length-1)!==I||o.charCodeAt(o.length-2)!==I){if(o.length>2){const v=o.lastIndexOf(d);v===-1?(o="",t=0):(o=o.slice(0,v),t=o.length-1-o.lastIndexOf(d)),s=a,r=0;continue}else if(o.length!==0){o="",t=0,s=a,r=0;continue}}h&&(o+=o.length>0?`${d}..`:"..",t=2)}else o.length>0?o+=`${d}${u.slice(s+1,a)}`:o=u.slice(s+1,a),t=a-s-1;s=a,r=0}else c===I&&r!==-1?++r:r=-1}return o}function m(u,h){if(h===null||typeof h!="object")throw new p("pathObject","Object",h);const d=h.dir||h.root,n=h.base||`${h.name||""}${h.ext||""}`;return d?d===h.root?`${d}${n}`:`${d}${u}${n}`:n}e.win32={resolve(...u){let h="",d="",n=!1;for(let o=u.length-1;o>=-1;o--){let t;if(o>=0){if(t=u[o],S(t,"path"),t.length===0)continue}else h.length===0?t=D.cwd():(t=D.env[`=${h}`]||D.cwd(),(t===void 0||t.slice(0,2).toLowerCase()!==h.toLowerCase()&&t.charCodeAt(2)===w)&&(t=`${h}\\`));const s=t.length;let r=0,c="",a=!1;const v=t.charCodeAt(0);if(s===1)f(v)&&(r=1,a=!0);else if(f(v))if(a=!0,f(t.charCodeAt(1))){let E=2,R=E;for(;E<s&&!f(t.charCodeAt(E));)E++;if(E<s&&E!==R){const N=t.slice(R,E);for(R=E;E<s&&f(t.charCodeAt(E));)E++;if(E<s&&E!==R){for(R=E;E<s&&!f(t.charCodeAt(E));)E++;(E===s||E!==R)&&(c=`\\\\${N}\\${t.slice(R,E)}`,r=E)}}}else r=1;else y(v)&&t.charCodeAt(1)===C&&(c=t.slice(0,2),r=2,s>2&&f(t.charCodeAt(2))&&(a=!0,r=3));if(c.length>0)if(h.length>0){if(c.toLowerCase()!==h.toLowerCase())continue}else h=c;if(n){if(h.length>0)break}else if(d=`${t.slice(r)}\\${d}`,n=a,a&&h.length>0)break}return d=l(d,!n,"\\",f),n?`${h}\\${d}`:`${h}${d}`||"."},normalize(u){S(u,"path");const h=u.length;if(h===0)return".";let d=0,n,o=!1;const t=u.charCodeAt(0);if(h===1)return g(t)?"\\":u;if(f(t))if(o=!0,f(u.charCodeAt(1))){let r=2,c=r;for(;r<h&&!f(u.charCodeAt(r));)r++;if(r<h&&r!==c){const a=u.slice(c,r);for(c=r;r<h&&f(u.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&!f(u.charCodeAt(r));)r++;if(r===h)return`\\\\${a}\\${u.slice(c)}\\`;r!==c&&(n=`\\\\${a}\\${u.slice(c,r)}`,d=r)}}}else d=1;else y(t)&&u.charCodeAt(1)===C&&(n=u.slice(0,2),d=2,h>2&&f(u.charCodeAt(2))&&(o=!0,d=3));let s=d<h?l(u.slice(d),!o,"\\",f):"";return s.length===0&&!o&&(s="."),s.length>0&&f(u.charCodeAt(h-1))&&(s+="\\"),n===void 0?o?`\\${s}`:s:o?`${n}\\${s}`:`${n}${s}`},isAbsolute(u){S(u,"path");const h=u.length;if(h===0)return!1;const d=u.charCodeAt(0);return f(d)||h>2&&y(d)&&u.charCodeAt(1)===C&&f(u.charCodeAt(2))},join(...u){if(u.length===0)return".";let h,d;for(let t=0;t<u.length;++t){const s=u[t];S(s,"path"),s.length>0&&(h===void 0?h=d=s:h+=`\\${s}`)}if(h===void 0)return".";let n=!0,o=0;if(typeof d=="string"&&f(d.charCodeAt(0))){++o;const t=d.length;t>1&&f(d.charCodeAt(1))&&(++o,t>2&&(f(d.charCodeAt(2))?++o:n=!1))}if(n){for(;o<h.length&&f(h.charCodeAt(o));)o++;o>=2&&(h=`\\${h.slice(o)}`)}return e.win32.normalize(h)},relative(u,h){if(S(u,"from"),S(h,"to"),u===h)return"";const d=e.win32.resolve(u),n=e.win32.resolve(h);if(d===n||(u=d.toLowerCase(),h=n.toLowerCase(),u===h))return"";let o=0;for(;o<u.length&&u.charCodeAt(o)===w;)o++;let t=u.length;for(;t-1>o&&u.charCodeAt(t-1)===w;)t--;const s=t-o;let r=0;for(;r<h.length&&h.charCodeAt(r)===w;)r++;let c=h.length;for(;c-1>r&&h.charCodeAt(c-1)===w;)c--;const a=c-r,v=s<a?s:a;let E=-1,R=0;for(;R<v;R++){const O=u.charCodeAt(o+R);if(O!==h.charCodeAt(r+R))break;O===w&&(E=R)}if(R!==v){if(E===-1)return n}else{if(a>v){if(h.charCodeAt(r+R)===w)return n.slice(r+R+1);if(R===2)return n.slice(r+R)}s>v&&(u.charCodeAt(o+R)===w?E=R:R===2&&(E=3)),E===-1&&(E=0)}let N="";for(R=o+E+1;R<=t;++R)(R===t||u.charCodeAt(R)===w)&&(N+=N.length===0?"..":"\\..");return r+=E,N.length>0?`${N}${n.slice(r,c)}`:(n.charCodeAt(r)===w&&++r,n.slice(r,c))},toNamespacedPath(u){if(typeof u!="string")return u;if(u.length===0)return"";const h=e.win32.resolve(u);if(h.length<=2)return u;if(h.charCodeAt(0)===w){if(h.charCodeAt(1)===w){const d=h.charCodeAt(2);if(d!==b&&d!==I)return`\\\\?\\UNC\\${h.slice(2)}`}}else if(y(h.charCodeAt(0))&&h.charCodeAt(1)===C&&h.charCodeAt(2)===w)return`\\\\?\\${h}`;return u},dirname(u){S(u,"path");const h=u.length;if(h===0)return".";let d=-1,n=0;const o=u.charCodeAt(0);if(h===1)return f(o)?u:".";if(f(o)){if(d=n=1,f(u.charCodeAt(1))){let r=2,c=r;for(;r<h&&!f(u.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&f(u.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&!f(u.charCodeAt(r));)r++;if(r===h)return u;r!==c&&(d=n=r+1)}}}}else y(o)&&u.charCodeAt(1)===C&&(d=h>2&&f(u.charCodeAt(2))?3:2,n=d);let t=-1,s=!0;for(let r=h-1;r>=n;--r)if(f(u.charCodeAt(r))){if(!s){t=r;break}}else s=!1;if(t===-1){if(d===-1)return".";t=d}return u.slice(0,t)},basename(u,h){h!==void 0&&S(h,"ext"),S(u,"path");let d=0,n=-1,o=!0,t;if(u.length>=2&&y(u.charCodeAt(0))&&u.charCodeAt(1)===C&&(d=2),h!==void 0&&h.length>0&&h.length<=u.length){if(h===u)return"";let s=h.length-1,r=-1;for(t=u.length-1;t>=d;--t){const c=u.charCodeAt(t);if(f(c)){if(!o){d=t+1;break}}else r===-1&&(o=!1,r=t+1),s>=0&&(c===h.charCodeAt(s)?--s===-1&&(n=t):(s=-1,n=r))}return d===n?n=r:n===-1&&(n=u.length),u.slice(d,n)}for(t=u.length-1;t>=d;--t)if(f(u.charCodeAt(t))){if(!o){d=t+1;break}}else n===-1&&(o=!1,n=t+1);return n===-1?"":u.slice(d,n)},extname(u){S(u,"path");let h=0,d=-1,n=0,o=-1,t=!0,s=0;u.length>=2&&u.charCodeAt(1)===C&&y(u.charCodeAt(0))&&(h=n=2);for(let r=u.length-1;r>=h;--r){const c=u.charCodeAt(r);if(f(c)){if(!t){n=r+1;break}continue}o===-1&&(t=!1,o=r+1),c===I?d===-1?d=r:s!==1&&(s=1):d!==-1&&(s=-1)}return d===-1||o===-1||s===0||s===1&&d===o-1&&d===n+1?"":u.slice(d,o)},format:m.bind(null,"\\"),parse(u){S(u,"path");const h={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return h;const d=u.length;let n=0,o=u.charCodeAt(0);if(d===1)return f(o)?(h.root=h.dir=u,h):(h.base=h.name=u,h);if(f(o)){if(n=1,f(u.charCodeAt(1))){let E=2,R=E;for(;E<d&&!f(u.charCodeAt(E));)E++;if(E<d&&E!==R){for(R=E;E<d&&f(u.charCodeAt(E));)E++;if(E<d&&E!==R){for(R=E;E<d&&!f(u.charCodeAt(E));)E++;E===d?n=E:E!==R&&(n=E+1)}}}}else if(y(o)&&u.charCodeAt(1)===C){if(d<=2)return h.root=h.dir=u,h;if(n=2,f(u.charCodeAt(2))){if(d===3)return h.root=h.dir=u,h;n=3}}n>0&&(h.root=u.slice(0,n));let t=-1,s=n,r=-1,c=!0,a=u.length-1,v=0;for(;a>=n;--a){if(o=u.charCodeAt(a),f(o)){if(!c){s=a+1;break}continue}r===-1&&(c=!1,r=a+1),o===I?t===-1?t=a:v!==1&&(v=1):t!==-1&&(v=-1)}return r!==-1&&(t===-1||v===0||v===1&&t===r-1&&t===s+1?h.base=h.name=u.slice(s,r):(h.name=u.slice(s,t),h.base=u.slice(s,r),h.ext=u.slice(t,r))),s>0&&s!==n?h.dir=u.slice(0,s-1):h.dir=h.root,h},sep:"\\",delimiter:";",win32:null,posix:null},e.posix={resolve(...u){let h="",d=!1;for(let n=u.length-1;n>=-1&&!d;n--){const o=n>=0?u[n]:D.cwd();S(o,"path"),o.length!==0&&(h=`${o}/${h}`,d=o.charCodeAt(0)===P)}return h=l(h,!d,"/",g),d?`/${h}`:h.length>0?h:"."},normalize(u){if(S(u,"path"),u.length===0)return".";const h=u.charCodeAt(0)===P,d=u.charCodeAt(u.length-1)===P;return u=l(u,!h,"/",g),u.length===0?h?"/":d?"./":".":(d&&(u+="/"),h?`/${u}`:u)},isAbsolute(u){return S(u,"path"),u.length>0&&u.charCodeAt(0)===P},join(...u){if(u.length===0)return".";let h;for(let d=0;d<u.length;++d){const n=u[d];S(n,"path"),n.length>0&&(h===void 0?h=n:h+=`/${n}`)}return h===void 0?".":e.posix.normalize(h)},relative(u,h){if(S(u,"from"),S(h,"to"),u===h||(u=e.posix.resolve(u),h=e.posix.resolve(h),u===h))return"";const d=1,n=u.length,o=n-d,t=1,s=h.length-t,r=o<s?o:s;let c=-1,a=0;for(;a<r;a++){const E=u.charCodeAt(d+a);if(E!==h.charCodeAt(t+a))break;E===P&&(c=a)}if(a===r)if(s>r){if(h.charCodeAt(t+a)===P)return h.slice(t+a+1);if(a===0)return h.slice(t+a)}else o>r&&(u.charCodeAt(d+a)===P?c=a:a===0&&(c=0));let v="";for(a=d+c+1;a<=n;++a)(a===n||u.charCodeAt(a)===P)&&(v+=v.length===0?"..":"/..");return`${v}${h.slice(t+c)}`},toNamespacedPath(u){return u},dirname(u){if(S(u,"path"),u.length===0)return".";const h=u.charCodeAt(0)===P;let d=-1,n=!0;for(let o=u.length-1;o>=1;--o)if(u.charCodeAt(o)===P){if(!n){d=o;break}}else n=!1;return d===-1?h?"/":".":h&&d===1?"//":u.slice(0,d)},basename(u,h){h!==void 0&&S(h,"ext"),S(u,"path");let d=0,n=-1,o=!0,t;if(h!==void 0&&h.length>0&&h.length<=u.length){if(h===u)return"";let s=h.length-1,r=-1;for(t=u.length-1;t>=0;--t){const c=u.charCodeAt(t);if(c===P){if(!o){d=t+1;break}}else r===-1&&(o=!1,r=t+1),s>=0&&(c===h.charCodeAt(s)?--s===-1&&(n=t):(s=-1,n=r))}return d===n?n=r:n===-1&&(n=u.length),u.slice(d,n)}for(t=u.length-1;t>=0;--t)if(u.charCodeAt(t)===P){if(!o){d=t+1;break}}else n===-1&&(o=!1,n=t+1);return n===-1?"":u.slice(d,n)},extname(u){S(u,"path");let h=-1,d=0,n=-1,o=!0,t=0;for(let s=u.length-1;s>=0;--s){const r=u.charCodeAt(s);if(r===P){if(!o){d=s+1;break}continue}n===-1&&(o=!1,n=s+1),r===I?h===-1?h=s:t!==1&&(t=1):h!==-1&&(t=-1)}return h===-1||n===-1||t===0||t===1&&h===n-1&&h===d+1?"":u.slice(h,n)},format:m.bind(null,"/"),parse(u){S(u,"path");const h={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return h;const d=u.charCodeAt(0)===P;let n;d?(h.root="/",n=1):n=0;let o=-1,t=0,s=-1,r=!0,c=u.length-1,a=0;for(;c>=n;--c){const v=u.charCodeAt(c);if(v===P){if(!r){t=c+1;break}continue}s===-1&&(r=!1,s=c+1),v===I?o===-1?o=c:a!==1&&(a=1):o!==-1&&(a=-1)}if(s!==-1){const v=t===0&&d?1:t;o===-1||a===0||a===1&&o===s-1&&o===t+1?h.base=h.name=u.slice(v,s):(h.name=u.slice(v,o),h.base=u.slice(v,s),h.ext=u.slice(o,s))}return t>0?h.dir=u.slice(0,t-1):d&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null},e.posix.win32=e.win32.win32=e.win32,e.posix.posix=e.win32.posix=e.posix,e.normalize=D.platform==="win32"?e.win32.normalize:e.posix.normalize,e.isAbsolute=D.platform==="win32"?e.win32.isAbsolute:e.posix.isAbsolute,e.join=D.platform==="win32"?e.win32.join:e.posix.join,e.resolve=D.platform==="win32"?e.win32.resolve:e.posix.resolve,e.relative=D.platform==="win32"?e.win32.relative:e.posix.relative,e.dirname=D.platform==="win32"?e.win32.dirname:e.posix.dirname,e.basename=D.platform==="win32"?e.win32.basename:e.posix.basename,e.extname=D.platform==="win32"?e.win32.extname:e.posix.extname,e.format=D.platform==="win32"?e.win32.format:e.posix.format,e.parse=D.platform==="win32"?e.win32.parse:e.posix.parse,e.toNamespacedPath=D.platform==="win32"?e.win32.toNamespacedPath:e.posix.toNamespacedPath,e.sep=D.platform==="win32"?e.win32.sep:e.posix.sep,e.delimiter=D.platform==="win32"?e.win32.delimiter:e.posix.delimiter}),define(se[139],oe([0,1,12]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const i={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},k={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function L(C){const b=(0,D.extname)(C),p=i[b.toLowerCase()];return p!==void 0?p:T(C)}e.getMediaOrTextMime=L;function T(C){const b=(0,D.extname)(C);return k[b.toLowerCase()]}e.getMediaMime=T;function I(C){for(const b in k)if(k[b]===C)return b}e.getExtensionForMimeType=I;const P=/^(.+)\/(.+?)(;.+)?$/;function w(C,b){const p=P.exec(C);return p?`${p[1].toLowerCase()}/${p[2].toLowerCase()}${p[3]??""}`:b?void 0:C}e.normalizeMimeType=w}),define(se[87],oe([0,1,5]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeDangerousEnvVariables=e.sanitizeProcessEnvironment=e.TerminateResponseCode=e.Source=void 0;var i;(function(I){I[I.stdout=0]="stdout",I[I.stderr=1]="stderr"})(i=e.Source||(e.Source={}));var k;(function(I){I[I.Success=0]="Success",I[I.Unknown=1]="Unknown",I[I.AccessDenied=2]="AccessDenied",I[I.ProcessNotFound=3]="ProcessNotFound"})(k=e.TerminateResponseCode||(e.TerminateResponseCode={}));function L(I,...P){const w=P.reduce((p,S)=>(p[S]=!0,p),{}),C=[/^ELECTRON_.+$/,/^VSCODE_(?!SHELL_LOGIN).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(I).filter(p=>!w[p]).forEach(p=>{for(let S=0;S<C.length;S++)if(p.search(C[S])!==-1){delete I[p];break}})}e.sanitizeProcessEnvironment=L;function T(I){!I||(delete I.DEBUG,D.isMacintosh&&delete I.DYLD_LIBRARY_PATH,D.isLinux&&delete I.LD_PRELOAD)}e.removeDangerousEnvVariables=T}),define(se[140],oe([0,1,5]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StopWatch=void 0;const i=D.globals.performance&&typeof D.globals.performance.now=="function";class k{static create(T=!0){return new k(T)}constructor(T){this._highResolution=i&&T,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?D.globals.performance.now():Date.now()}}e.StopWatch=k}),define(se[3],oe([0,1,9,82,2,84,140]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Relay=e.EventBufferer=e.EventMultiplexer=e.MicrotaskEmitter=e.DebounceEmitter=e.PauseableEmitter=e.AsyncEmitter=e.EventDeliveryQueue=e.Emitter=e.setGlobalLeakWarningThreshold=e.EventProfiling=e.Event=void 0;const I=!1,P=!1;var w;(function(c){c.None=()=>k.Disposable.None;function a(j){if(P){const{onDidAddListener:J}=j,re=f.create();let Y=0;j.onDidAddListener=()=>{++Y===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),re.print()),J?.()}}}function v(j,J){return $(j,()=>{},0,void 0,void 0,J)}c.defer=v;function E(j){return(J,re=null,Y)=>{let ie=!1,ne;return ne=j(le=>{if(!ie)return ne?ne.dispose():ie=!0,J.call(re,le)},null,Y),ie&&ne.dispose(),ne}}c.once=E;function R(j,J,re){return M((Y,ie=null,ne)=>j(le=>Y.call(ie,J(le)),null,ne),re)}c.map=R;function N(j,J,re){return M((Y,ie=null,ne)=>j(le=>{J(le),Y.call(ie,le)},null,ne),re)}c.forEach=N;function O(j,J,re){return M((Y,ie=null,ne)=>j(le=>J(le)&&Y.call(ie,le),null,ne),re)}c.filter=O;function z(j){return j}c.signal=z;function F(...j){return(J,re=null,Y)=>(0,k.combinedDisposable)(...j.map(ie=>ie(ne=>J.call(re,ne),null,Y)))}c.any=F;function A(j,J,re,Y){let ie=re;return R(j,ne=>(ie=J(ie,ne),ie),Y)}c.reduce=A;function M(j,J){let re;const Y={onWillAddFirstListener(){re=j(ie.fire,ie)},onDidRemoveLastListener(){re?.dispose()}};J||a(Y);const ie=new y(Y);return J?.add(ie),ie.event}function $(j,J,re=100,Y=!1,ie,ne){let le,ue,Se,we=0;const Ee={leakWarningThreshold:ie,onWillAddFirstListener(){le=j(Oe=>{we++,ue=J(ue,Oe),Y&&!Se&&(be.fire(ue),ue=void 0),clearTimeout(Se),Se=setTimeout(()=>{const Ne=ue;ue=void 0,Se=void 0,(!Y||we>1)&&be.fire(Ne),we=0},re)})},onDidRemoveLastListener(){le.dispose()}};ne||a(Ee);const be=new y(Ee);return ne?.add(be),be.event}c.debounce=$;function V(j,J=0,re){return c.debounce(j,(Y,ie)=>Y?(Y.push(ie),Y):[ie],J,void 0,void 0,re)}c.accumulate=V;function B(j,J=(Y,ie)=>Y===ie,re){let Y=!0,ie;return O(j,ne=>{const le=Y||!J(ne,ie);return Y=!1,ie=ne,le},re)}c.latch=B;function Q(j,J,re){return[c.filter(j,J,re),c.filter(j,Y=>!J(Y),re)]}c.split=Q;function W(j,J=!1,re=[]){let Y=re.slice(),ie=j(ue=>{Y?Y.push(ue):le.fire(ue)});const ne=()=>{Y?.forEach(ue=>le.fire(ue)),Y=null},le=new y({onWillAddFirstListener(){ie||(ie=j(ue=>le.fire(ue)))},onDidAddFirstListener(){Y&&(J?setTimeout(ne):ne())},onDidRemoveLastListener(){ie&&ie.dispose(),ie=null}});return le.event}c.buffer=W;class q{constructor(J){this.event=J,this.disposables=new k.DisposableStore}map(J){return new q(R(this.event,J,this.disposables))}forEach(J){return new q(N(this.event,J,this.disposables))}filter(J){return new q(O(this.event,J,this.disposables))}reduce(J,re){return new q(A(this.event,J,re,this.disposables))}latch(){return new q(B(this.event,void 0,this.disposables))}debounce(J,re=100,Y=!1,ie){return new q($(this.event,J,re,Y,ie,this.disposables))}on(J,re,Y){return this.event(J,re,Y)}once(J,re,Y){return E(this.event)(J,re,Y)}dispose(){this.disposables.dispose()}}function G(j){return new q(j)}c.chain=G;function ee(j,J,re=Y=>Y){const Y=(...ue)=>le.fire(re(...ue)),ie=()=>j.on(J,Y),ne=()=>j.removeListener(J,Y),le=new y({onWillAddFirstListener:ie,onDidRemoveLastListener:ne});return le.event}c.fromNodeEventEmitter=ee;function ae(j,J,re=Y=>Y){const Y=(...ue)=>le.fire(re(...ue)),ie=()=>j.addEventListener(J,Y),ne=()=>j.removeEventListener(J,Y),le=new y({onWillAddFirstListener:ie,onDidRemoveLastListener:ne});return le.event}c.fromDOMEventEmitter=ae;function K(j){return new Promise(J=>E(j)(J))}c.toPromise=K;function X(j,J){return J(void 0),j(re=>J(re))}c.runAndSubscribe=X;function _(j,J){let re=null;function Y(ne){re?.dispose(),re=new k.DisposableStore,J(ne,re)}Y(void 0);const ie=j(ne=>Y(ne));return(0,k.toDisposable)(()=>{ie.dispose(),re?.dispose()})}c.runAndSubscribeWithStore=_;class U{constructor(J,re){this.obs=J,this._counter=0,this._hasChanged=!1;const Y={onWillAddFirstListener:()=>{J.addObserver(this)},onDidRemoveLastListener:()=>{J.removeObserver(this)}};re||a(Y),this.emitter=new y(Y),re&&re.add(this.emitter)}beginUpdate(J){this._counter++}handleChange(J,re){this._hasChanged=!0}endUpdate(J){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function x(j,J){return new U(j,J).emitter.event}c.fromObservable=x})(w=e.Event||(e.Event={}));class C{constructor(a){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${a}_${C._idPool++}`,C.all.add(this)}start(a){this._stopWatch=new T.StopWatch(!0),this.listenerCount=a}stop(){if(this._stopWatch){const a=this._stopWatch.elapsed();this.durations.push(a),this.elapsedOverall+=a,this.invocationCount+=1,this._stopWatch=void 0}}}e.EventProfiling=C,C.all=new Set,C._idPool=0;let b=-1;function p(c){const a=b;return b=c,{dispose(){b=a}}}e.setGlobalLeakWarningThreshold=p;class S{constructor(a,v=Math.random().toString(18).slice(2,5)){this.threshold=a,this.name=v,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(a,v){const E=this.threshold;if(E<=0||v<E)return;this._stacks||(this._stacks=new Map);const R=this._stacks.get(a.value)||0;if(this._stacks.set(a.value,R+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=E*.5;let N,O=0;for(const[z,F]of this._stacks)(!N||O<F)&&(N=z,O=F);console.warn(`[${this.name}] potential listener LEAK detected, having ${v} listeners already. MOST frequent listener (${O}):`),console.warn(N)}return()=>{const N=this._stacks.get(a.value)||0;this._stacks.set(a.value,N-1)}}}class f{static create(){return new f(new Error().stack??"")}constructor(a){this.value=a}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class g{constructor(a,v,E){this.callback=a,this.callbackThis=v,this.stack=E,this.subscription=new k.SafeDisposable}invoke(a){this.callback.call(this.callbackThis,a)}}class y{constructor(a){this._disposed=!1,this._options=a,this._leakageMon=b>0||this._options?.leakWarningThreshold?new S(this._options?.leakWarningThreshold??b):void 0,this._perfMon=this._options?._profName?new C(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._listeners){if(I){const a=Array.from(this._listeners);queueMicrotask(()=>{for(const v of a)v.subscription.isset()&&(v.subscription.unset(),v.stack?.print())})}this._listeners.clear()}this._deliveryQueue?.clear(this),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event||(this._event=(a,v,E)=>{if(this._listeners||(this._listeners=new L.LinkedList),this._leakageMon&&this._listeners.size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),k.Disposable.None;const R=this._listeners.isEmpty();R&&this._options?.onWillAddFirstListener&&this._options.onWillAddFirstListener(this);let N,O;this._leakageMon&&this._listeners.size>=Math.ceil(this._leakageMon.threshold*.2)&&(O=f.create(),N=this._leakageMon.check(O,this._listeners.size+1)),I&&(O=O??f.create());const z=new g(a,v,O),F=this._listeners.push(z);R&&this._options?.onDidAddFirstListener&&this._options.onDidAddFirstListener(this),this._options?.onDidAddListener&&this._options.onDidAddListener(this,a,v);const A=z.subscription.set(()=>{N?.(),this._disposed||(F(),this._options&&this._options.onDidRemoveLastListener&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this)))});return E instanceof k.DisposableStore?E.add(A):Array.isArray(E)&&E.push(A),A}),this._event}fire(a){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new m);for(const v of this._listeners)this._deliveryQueue.push(this,v,a);this._perfMon?.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),this._perfMon?.stop()}}hasListeners(){return this._listeners?!this._listeners.isEmpty():!1}}e.Emitter=y;class l{constructor(){this._queue=new L.LinkedList}get size(){return this._queue.size}push(a,v,E){this._queue.push(new u(a,v,E))}clear(a){const v=new L.LinkedList;for(const E of this._queue)E.emitter!==a&&v.push(E);this._queue=v}deliver(){for(;this._queue.size>0;){const a=this._queue.shift();try{a.listener.invoke(a.event)}catch(v){(0,D.onUnexpectedError)(v)}}}}e.EventDeliveryQueue=l;class m extends l{clear(a){this._queue.clear()}}class u{constructor(a,v,E){this.emitter=a,this.listener=v,this.event=E}}class h extends y{async fireAsync(a,v,E){if(!!this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new L.LinkedList);for(const R of this._listeners)this._asyncDeliveryQueue.push([R,a]);for(;this._asyncDeliveryQueue.size>0&&!v.isCancellationRequested;){const[R,N]=this._asyncDeliveryQueue.shift(),O=[],z={...N,token:v,waitUntil:F=>{if(Object.isFrozen(O))throw new Error("waitUntil can NOT be called asynchronous");E&&(F=E(F,R.callback)),O.push(F)}};try{R.invoke(z)}catch(F){(0,D.onUnexpectedError)(F);continue}Object.freeze(O),await Promise.allSettled(O).then(F=>{for(const A of F)A.status==="rejected"&&(0,D.onUnexpectedError)(A.reason)})}}}}e.AsyncEmitter=h;class d extends y{constructor(a){super(a),this._isPaused=0,this._eventQueue=new L.LinkedList,this._mergeFn=a?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const a=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(a))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(a){this._listeners&&(this._isPaused!==0?this._eventQueue.push(a):super.fire(a))}}e.PauseableEmitter=d;class n extends d{constructor(a){super(a),this._delay=a.delay??100}fire(a){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(a)}}e.DebounceEmitter=n;class o extends y{constructor(a){super(a),this._queuedEvents=[],this._mergeFn=a?.merge}fire(a){!this.hasListeners()||(this._queuedEvents.push(a),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(v=>super.fire(v)),this._queuedEvents=[]}))}}e.MicrotaskEmitter=o;class t{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new y({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(a){const v={event:a,listener:null};this.events.push(v),this.hasListeners&&this.hook(v);const E=()=>{this.hasListeners&&this.unhook(v);const R=this.events.indexOf(v);this.events.splice(R,1)};return(0,k.toDisposable)((0,i.once)(E))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(a=>this.hook(a))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(a=>this.unhook(a))}hook(a){a.listener=a.event(v=>this.emitter.fire(v))}unhook(a){a.listener&&a.listener.dispose(),a.listener=null}dispose(){this.emitter.dispose()}}e.EventMultiplexer=t;class s{constructor(){this.buffers=[]}wrapEvent(a){return(v,E,R)=>a(N=>{const O=this.buffers[this.buffers.length-1];O?O.push(()=>v.call(E,N)):v.call(E,N)},void 0,R)}bufferEvents(a){const v=[];this.buffers.push(v);const E=a();return this.buffers.pop(),v.forEach(R=>R()),E}}e.EventBufferer=s;class r{constructor(){this.listening=!1,this.inputEvent=w.None,this.inputEventListener=k.Disposable.None,this.emitter=new y({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(a){this.inputEvent=a,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=a(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}e.Relay=r}),define(se[24],oe([0,1,3]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const i=Object.freeze(function(I,P){const w=setTimeout(I.bind(P),0);return{dispose(){clearTimeout(w)}}});var k;(function(I){function P(w){return w===I.None||w===I.Cancelled||w instanceof L?!0:!w||typeof w!="object"?!1:typeof w.isCancellationRequested=="boolean"&&typeof w.onCancellationRequested=="function"}I.isCancellationToken=P,I.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:D.Event.None}),I.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i})})(k=e.CancellationToken||(e.CancellationToken={}));class L{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new D.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class T{constructor(P){this._token=void 0,this._parentListener=void 0,this._parentListener=P&&P.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new L),this._token}cancel(){this._token?this._token instanceof L&&this._token.cancel():this._token=k.Cancelled}dispose(P=!1){P&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof L&&this._token.dispose():this._token=k.None}}e.CancellationTokenSource=T}),define(se[141],oe([0,1,24]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CachedFunction=e.LRUCachedFunction=e.Cache=void 0;class i{constructor(I){this.task=I,this.result=null}get(){if(this.result)return this.result;const I=new D.CancellationTokenSource,P=this.task(I.token);return this.result={promise:P,dispose:()=>{this.result=null,I.cancel(),I.dispose()}},this.result}}e.Cache=i;class k{constructor(I){this.fn=I,this.lastCache=void 0,this.lastArgKey=void 0}get(I){const P=JSON.stringify(I);return this.lastArgKey!==P&&(this.lastArgKey=P,this.lastCache=this.fn(I)),this.lastCache}}e.LRUCachedFunction=k;class L{get cachedValues(){return this._map}constructor(I){this.fn=I,this._map=new Map}get(I){if(this._map.has(I))return this._map.get(I);const P=this.fn(I);return this._map.set(I,P),P}}e.CachedFunction=L}),define(se[27],oe([0,1,141,128]),function(Z,e,D,i){"use strict";var k;Object.defineProperty(e,"__esModule",{value:!0}),e.InvisibleCharacters=e.AmbiguousCharacters=e.noBreakWhitespace=e.getLeftDeleteOffset=e.GraphemeBreakType=e.getGraphemeBreakType=e.singleLetterHash=e.getNLines=e.uppercaseFirstLetter=e.containsUppercaseCharacter=e.fuzzyContains=e.stripUTF8BOM=e.startsWithUTF8BOM=e.UTF8_BOM_CHARACTER=e.removeAnsiEscapeCodes=e.lcut=e.isEmojiImprecise=e.isFullWidthCharacter=e.containsUnusualLineTerminators=e.UNUSUAL_LINE_TERMINATORS=e.isBasicASCII=e.containsRTL=e.charCount=e.getCharContainingOffset=e.prevCharLength=e.nextCharLength=e.GraphemeIterator=e.CodePointIterator=e.getNextCodePoint=e.computeCodePoint=e.isLowSurrogate=e.isHighSurrogate=e.commonSuffixLength=e.commonPrefixLength=e.startsWithIgnoreCase=e.equalsIgnoreCase=e.isUpperAsciiLetter=e.isLowerAsciiLetter=e.isAsciiDigit=e.compareSubstringIgnoreCase=e.compareIgnoreCase=e.compareSubstring=e.compare=e.replaceAsync=e.lastNonWhitespaceIndex=e.getLeadingWhitespace=e.firstNonWhitespaceIndex=e.splitLines=e.regExpFlags=e.regExpContainsBackreference=e.regExpLeadsToEndlessLoop=e.createRegExp=e.stripWildcards=e.convertSimple2RegExpPattern=e.rtrim=e.ltrim=e.trim=e.truncate=e.count=e.escapeRegExpCharacters=e.escape=e.format2=e.format=e.isFalsyOrWhitespace=void 0;function L(te){return!te||typeof te!="string"?!0:te.trim().length===0}e.isFalsyOrWhitespace=L;const T=/{(\d+)}/g;function I(te,...he){return he.length===0?te:te.replace(T,function(de,me){const pe=parseInt(me,10);return isNaN(pe)||pe<0||pe>=he.length?de:he[pe]})}e.format=I;const P=/{([^}]+)}/g;function w(te,he){return te.replace(P,(de,me)=>he[me]??de)}e.format2=w;function C(te){return te.replace(/[<>&]/g,function(he){switch(he){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return he}})}e.escape=C;function b(te){return te.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}e.escapeRegExpCharacters=b;function p(te,he){let de=0;const me=he.charCodeAt(0);for(let pe=te.length-1;pe>=0;pe--)te.charCodeAt(pe)===me&&de++;return de}e.count=p;function S(te,he,de="\u2026"){return te.length<=he?te:`${te.substr(0,he)}${de}`}e.truncate=S;function f(te,he=" "){const de=g(te,he);return y(de,he)}e.trim=f;function g(te,he){if(!te||!he)return te;const de=he.length;if(de===0||te.length===0)return te;let me=0;for(;te.indexOf(he,me)===me;)me=me+de;return te.substring(me)}e.ltrim=g;function y(te,he){if(!te||!he)return te;const de=he.length,me=te.length;if(de===0||me===0)return te;let pe=me,Pe=-1;for(;Pe=te.lastIndexOf(he,pe-1),!(Pe===-1||Pe+de!==pe);){if(Pe===0)return"";pe=Pe}return te.substring(0,pe)}e.rtrim=y;function l(te){return te.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}e.convertSimple2RegExpPattern=l;function m(te){return te.replace(/\*/g,"")}e.stripWildcards=m;function u(te,he,de={}){if(!te)throw new Error("Cannot create regex from empty string");he||(te=b(te)),de.wholeWord&&(/\B/.test(te.charAt(0))||(te="\\b"+te),/\B/.test(te.charAt(te.length-1))||(te=te+"\\b"));let me="";return de.global&&(me+="g"),de.matchCase||(me+="i"),de.multiline&&(me+="m"),de.unicode&&(me+="u"),new RegExp(te,me)}e.createRegExp=u;function h(te){return te.source==="^"||te.source==="^$"||te.source==="$"||te.source==="^\\s*$"?!1:!!(te.exec("")&&te.lastIndex===0)}e.regExpLeadsToEndlessLoop=h;function d(te){return!!te.match(/([^\\]|^)(\\\\)*\\\d+/)}e.regExpContainsBackreference=d;function n(te){return(te.global?"g":"")+(te.ignoreCase?"i":"")+(te.multiline?"m":"")+(te.unicode?"u":"")}e.regExpFlags=n;function o(te){return te.split(/\r\n|\r|\n/)}e.splitLines=o;function t(te){for(let he=0,de=te.length;he<de;he++){const me=te.charCodeAt(he);if(me!==32&&me!==9)return he}return-1}e.firstNonWhitespaceIndex=t;function s(te,he=0,de=te.length){for(let me=he;me<de;me++){const pe=te.charCodeAt(me);if(pe!==32&&pe!==9)return te.substring(he,me)}return te.substring(he,de)}e.getLeadingWhitespace=s;function r(te,he=te.length-1){for(let de=he;de>=0;de--){const me=te.charCodeAt(de);if(me!==32&&me!==9)return de}return-1}e.lastNonWhitespaceIndex=r;function c(te,he,de){const me=[];let pe=0;for(const Pe of te.matchAll(he)){if(me.push(te.slice(pe,Pe.index)),Pe.index===void 0)throw new Error("match.index should be defined");pe=Pe.index+Pe[0].length,me.push(de(Pe[0],...Pe.slice(1),Pe.index,te,Pe.groups))}return me.push(te.slice(pe)),Promise.all(me).then(Pe=>Pe.join(""))}e.replaceAsync=c;function a(te,he){return te<he?-1:te>he?1:0}e.compare=a;function v(te,he,de=0,me=te.length,pe=0,Pe=he.length){for(;de<me&&pe<Pe;de++,pe++){const $e=te.charCodeAt(de),Te=he.charCodeAt(pe);if($e<Te)return-1;if($e>Te)return 1}const De=me-de,Be=Pe-pe;return De<Be?-1:De>Be?1:0}e.compareSubstring=v;function E(te,he){return R(te,he,0,te.length,0,he.length)}e.compareIgnoreCase=E;function R(te,he,de=0,me=te.length,pe=0,Pe=he.length){for(;de<me&&pe<Pe;de++,pe++){let $e=te.charCodeAt(de),Te=he.charCodeAt(pe);if($e===Te)continue;if($e>=128||Te>=128)return v(te.toLowerCase(),he.toLowerCase(),de,me,pe,Pe);O($e)&&($e-=32),O(Te)&&(Te-=32);const qe=$e-Te;if(qe!==0)return qe}const De=me-de,Be=Pe-pe;return De<Be?-1:De>Be?1:0}e.compareSubstringIgnoreCase=R;function N(te){return te>=48&&te<=57}e.isAsciiDigit=N;function O(te){return te>=97&&te<=122}e.isLowerAsciiLetter=O;function z(te){return te>=65&&te<=90}e.isUpperAsciiLetter=z;function F(te,he){return te.length===he.length&&R(te,he)===0}e.equalsIgnoreCase=F;function A(te,he){const de=he.length;return he.length>te.length?!1:R(te,he,0,de)===0}e.startsWithIgnoreCase=A;function M(te,he){const de=Math.min(te.length,he.length);let me;for(me=0;me<de;me++)if(te.charCodeAt(me)!==he.charCodeAt(me))return me;return de}e.commonPrefixLength=M;function $(te,he){const de=Math.min(te.length,he.length);let me;const pe=te.length-1,Pe=he.length-1;for(me=0;me<de;me++)if(te.charCodeAt(pe-me)!==he.charCodeAt(Pe-me))return me;return de}e.commonSuffixLength=$;function V(te){return 55296<=te&&te<=56319}e.isHighSurrogate=V;function B(te){return 56320<=te&&te<=57343}e.isLowSurrogate=B;function Q(te,he){return(te-55296<<10)+(he-56320)+65536}e.computeCodePoint=Q;function W(te,he,de){const me=te.charCodeAt(de);if(V(me)&&de+1<he){const pe=te.charCodeAt(de+1);if(B(pe))return Q(me,pe)}return me}e.getNextCodePoint=W;function q(te,he){const de=te.charCodeAt(he-1);if(B(de)&&he>1){const me=te.charCodeAt(he-2);if(V(me))return Q(me,de)}return de}class G{get offset(){return this._offset}constructor(he,de=0){this._str=he,this._len=he.length,this._offset=de}setOffset(he){this._offset=he}prevCodePoint(){const he=q(this._str,this._offset);return this._offset-=he>=65536?2:1,he}nextCodePoint(){const he=W(this._str,this._len,this._offset);return this._offset+=he>=65536?2:1,he}eol(){return this._offset>=this._len}}e.CodePointIterator=G;class ee{get offset(){return this._iterator.offset}constructor(he,de=0){this._iterator=new G(he,de)}nextGraphemeLength(){const he=Le.getInstance(),de=this._iterator,me=de.offset;let pe=he.getGraphemeBreakType(de.nextCodePoint());for(;!de.eol();){const Pe=de.offset,De=he.getGraphemeBreakType(de.nextCodePoint());if(Ce(pe,De)){de.setOffset(Pe);break}pe=De}return de.offset-me}prevGraphemeLength(){const he=Le.getInstance(),de=this._iterator,me=de.offset;let pe=he.getGraphemeBreakType(de.prevCodePoint());for(;de.offset>0;){const Pe=de.offset,De=he.getGraphemeBreakType(de.prevCodePoint());if(Ce(De,pe)){de.setOffset(Pe);break}pe=De}return me-de.offset}eol(){return this._iterator.eol()}}e.GraphemeIterator=ee;function ae(te,he){return new ee(te,he).nextGraphemeLength()}e.nextCharLength=ae;function K(te,he){return new ee(te,he).prevGraphemeLength()}e.prevCharLength=K;function X(te,he){he>0&&B(te.charCodeAt(he))&&he--;const de=he+ae(te,he);return[de-K(te,de),de]}e.getCharContainingOffset=X;function _(te){const he=new ee(te);let de=0;for(;!he.eol();)de++,he.nextGraphemeLength();return de}e.charCount=_;let U;function x(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function j(te){return U||(U=x()),U.test(te)}e.containsRTL=j;const J=/^[\t\n\r\x20-\x7E]*$/;function re(te){return J.test(te)}e.isBasicASCII=re,e.UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function Y(te){return e.UNUSUAL_LINE_TERMINATORS.test(te)}e.containsUnusualLineTerminators=Y;function ie(te){return te>=11904&&te<=55215||te>=63744&&te<=64255||te>=65281&&te<=65374}e.isFullWidthCharacter=ie;function ne(te){return te>=127462&&te<=127487||te===8986||te===8987||te===9200||te===9203||te>=9728&&te<=10175||te===11088||te===11093||te>=127744&&te<=128591||te>=128640&&te<=128764||te>=128992&&te<=129008||te>=129280&&te<=129535||te>=129648&&te<=129782}e.isEmojiImprecise=ne;function le(te,he){if(te.length<he)return te;const de=/\b/g;let me=0;for(;de.test(te)&&!(te.length-de.lastIndex<he);)me=de.lastIndex,de.lastIndex+=1;return te.substring(me).replace(/^\s/,"")}e.lcut=le;const ue=/\x1B\x5B[12]?K/g,Se=/\x1b\[\d+m/g,we=/\x1b\[0?m/g;function Ee(te){return te&&(te=te.replace(ue,""),te=te.replace(Se,""),te=te.replace(we,"")),te}e.removeAnsiEscapeCodes=Ee,e.UTF8_BOM_CHARACTER=String.fromCharCode(65279);function be(te){return!!(te&&te.length>0&&te.charCodeAt(0)===65279)}e.startsWithUTF8BOM=be;function Oe(te){return be(te)?te.substr(1):te}e.stripUTF8BOM=Oe;function Ne(te,he){if(!te||!he||te.length<he.length)return!1;const de=he.length,me=te.toLowerCase();let pe=0,Pe=-1;for(;pe<de;){const De=me.indexOf(he[pe],Pe+1);if(De<0)return!1;Pe=De,pe++}return!0}e.fuzzyContains=Ne;function Ge(te,he=!1){return te?(he&&(te=te.replace(/\\./g,"")),te.toLowerCase()!==te):!1}e.containsUppercaseCharacter=Ge;function We(te){return te.charAt(0).toUpperCase()+te.slice(1)}e.uppercaseFirstLetter=We;function ce(te,he=1){if(he===0)return"";let de=-1;do de=te.indexOf(`
`,de+1),he--;while(he>0&&de>=0);return de===-1?te:(te[de-1]==="\r"&&de--,te.substr(0,de))}e.getNLines=ce;function fe(te){return te=te%(2*26),te<26?String.fromCharCode(97+te):String.fromCharCode(65+te-26)}e.singleLetterHash=fe;function ge(te){return Le.getInstance().getGraphemeBreakType(te)}e.getGraphemeBreakType=ge;function Ce(te,he){return te===0?he!==5&&he!==7:te===2&&he===3?!1:te===4||te===2||te===3||he===4||he===2||he===3?!0:!(te===8&&(he===8||he===9||he===11||he===12)||(te===11||te===9)&&(he===9||he===10)||(te===12||te===10)&&he===10||he===5||he===13||he===7||te===1||te===13&&he===14||te===6&&he===6)}var Ie;(function(te){te[te.Other=0]="Other",te[te.Prepend=1]="Prepend",te[te.CR=2]="CR",te[te.LF=3]="LF",te[te.Control=4]="Control",te[te.Extend=5]="Extend",te[te.Regional_Indicator=6]="Regional_Indicator",te[te.SpacingMark=7]="SpacingMark",te[te.L=8]="L",te[te.V=9]="V",te[te.T=10]="T",te[te.LV=11]="LV",te[te.LVT=12]="LVT",te[te.ZWJ=13]="ZWJ",te[te.Extended_Pictographic=14]="Extended_Pictographic"})(Ie=e.GraphemeBreakType||(e.GraphemeBreakType={}));class Le{static getInstance(){return Le._INSTANCE||(Le._INSTANCE=new Le),Le._INSTANCE}constructor(){this._data=Re()}getGraphemeBreakType(he){if(he<32)return he===10?3:he===13?2:4;if(he<127)return 0;const de=this._data,me=de.length/3;let pe=1;for(;pe<=me;)if(he<de[3*pe])pe=2*pe;else if(he>de[3*pe+1])pe=2*pe+1;else return de[3*pe+2];return 0}}Le._INSTANCE=null;function Re(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function Fe(te,he){if(te===0)return 0;const de=Ae(te,he);if(de!==void 0)return de;const me=new G(he,te);return me.prevCodePoint(),me.offset}e.getLeftDeleteOffset=Fe;function Ae(te,he){const de=new G(he,te);let me=de.prevCodePoint();for(;Me(me)||me===65039||me===8419;){if(de.offset===0)return;me=de.prevCodePoint()}if(!ne(me))return;let pe=de.offset;return pe>0&&de.prevCodePoint()===8205&&(pe=de.offset),pe}function Me(te){return 127995<=te&&te<=127999}var ze;(function(te){te[te.zwj=8205]="zwj",te[te.emojiVariantSelector=65039]="emojiVariantSelector",te[te.enclosingKeyCap=8419]="enclosingKeyCap"})(ze||(ze={})),e.noBreakWhitespace="\xA0";class ke{static getInstance(he){return ke.cache.get(Array.from(he))}static getLocales(){return ke._locales.getValue()}constructor(he){this.confusableDictionary=he}isAmbiguous(he){return this.confusableDictionary.has(he)}getPrimaryConfusable(he){return this.confusableDictionary.get(he)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}e.AmbiguousCharacters=ke,k=ke,ke.ambiguousCharacterData=new i.Lazy(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),ke.cache=new D.LRUCachedFunction(te=>{function he(Te){const qe=new Map;for(let Ve=0;Ve<Te.length;Ve+=2)qe.set(Te[Ve],Te[Ve+1]);return qe}function de(Te,qe){const Ve=new Map(Te);for(const[et,ot]of qe)Ve.set(et,ot);return Ve}function me(Te,qe){if(!Te)return qe;const Ve=new Map;for(const[et,ot]of Te)qe.has(et)&&Ve.set(et,ot);return Ve}const pe=k.ambiguousCharacterData.getValue();let Pe=te.filter(Te=>!Te.startsWith("_")&&Te in pe);Pe.length===0&&(Pe=["_default"]);let De;for(const Te of Pe){const qe=he(pe[Te]);De=me(De,qe)}const Be=he(pe._common),$e=de(Be,De);return new ke($e)}),ke._locales=new i.Lazy(()=>Object.keys(ke.ambiguousCharacterData.getValue()).filter(te=>!te.startsWith("_")));class _e{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(_e.getRawData())),this._data}static isInvisibleCharacter(he){return _e.getData().has(he)}static get codePoints(){return _e.getData()}}e.InvisibleCharacters=_e,_e._data=void 0}),define(se[47],oe([0,1,12,5,27,14]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function T(r){return r===47||r===92}e.isPathSeparator=T;function I(r){return r.replace(/[\\/]/g,D.posix.sep)}e.toSlashes=I;function P(r){return r.indexOf("/")===-1&&(r=I(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}e.toPosixPath=P;function w(r,c=D.posix.sep){if(!r)return"";const a=r.length,v=r.charCodeAt(0);if(T(v)){if(T(r.charCodeAt(1))&&!T(r.charCodeAt(2))){let R=3;const N=R;for(;R<a&&!T(r.charCodeAt(R));R++);if(N!==R&&!T(r.charCodeAt(R+1))){for(R+=1;R<a;R++)if(T(r.charCodeAt(R)))return r.slice(0,R+1).replace(/[\\/]/g,c)}}return c}else if(l(v)&&r.charCodeAt(1)===58)return T(r.charCodeAt(2))?r.slice(0,2)+c:r.slice(0,2);let E=r.indexOf("://");if(E!==-1){for(E+=3;E<a;E++)if(T(r.charCodeAt(E)))return r.slice(0,E+1)}return""}e.getRoot=w;function C(r){if(!i.isWindows||!r||r.length<5)return!1;let c=r.charCodeAt(0);if(c!==92||(c=r.charCodeAt(1),c!==92))return!1;let a=2;const v=a;for(;a<r.length&&(c=r.charCodeAt(a),c!==92);a++);return!(v===a||(c=r.charCodeAt(a+1),isNaN(c)||c===92))}e.isUNC=C;const b=/[\\/:\*\?"<>\|]/g,p=/[\\/]/g,S=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function f(r,c=i.isWindows){const a=c?b:p;return!(!r||r.length===0||/^\s+$/.test(r)||(a.lastIndex=0,a.test(r))||c&&S.test(r)||r==="."||r===".."||c&&r[r.length-1]==="."||c&&r.length!==r.trim().length||r.length>255)}e.isValidBasename=f;function g(r,c,a){const v=r===c;return!a||v?v:!r||!c?!1:(0,k.equalsIgnoreCase)(r,c)}e.isEqual=g;function y(r,c,a,v=D.sep){if(r===c)return!0;if(!r||!c||c.length>r.length)return!1;if(a){if(!(0,k.startsWithIgnoreCase)(r,c))return!1;if(c.length===r.length)return!0;let R=c.length;return c.charAt(c.length-1)===v&&R--,r.charAt(R)===v}return c.charAt(c.length-1)!==v&&(c+=v),r.indexOf(c)===0}e.isEqualOrParent=y;function l(r){return r>=65&&r<=90||r>=97&&r<=122}e.isWindowsDriveLetter=l;function m(r,c){return i.isWindows&&r.endsWith(":")&&(r+=D.sep),(0,D.isAbsolute)(r)||(r=(0,D.join)(c,r)),r=(0,D.normalize)(r),i.isWindows?(r=(0,k.rtrim)(r,D.sep),r.endsWith(":")&&(r+=D.sep)):(r=(0,k.rtrim)(r,D.sep),r||(r=D.sep)),r}e.sanitizeFilePath=m;function u(r){const c=(0,D.normalize)(r);return i.isWindows?r.length>3?!1:h(c)&&(r.length===2||c.charCodeAt(2)===92):c===D.posix.sep}e.isRootOrDriveLetter=u;function h(r,c=i.isWindows){return c?l(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}e.hasDriveLetter=h;function d(r){return h(r)?r[0]:void 0}e.getDriveLetter=d;function n(r,c,a){return c.length>r.length?-1:r===c?0:(a&&(r=r.toLowerCase(),c=c.toLowerCase()),r.indexOf(c))}e.indexOfPath=n;function o(r){const c=r.split(":");let a,v,E;for(const R of c){const N=Number(R);(0,L.isNumber)(N)?v===void 0?v=N:E===void 0&&(E=N):a=a?[a,R].join(":"):R}if(!a)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:a,line:v!==void 0?v:void 0,column:E!==void 0?E:v!==void 0?1:void 0}}e.parseLineAndColumnAware=o;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function s(r,c,a=8){let v="";for(let R=0;R<a;R++)v+=t.charAt(Math.floor(Math.random()*t.length));let E;return c?E=`${c}-${v}`:E=v,r?(0,D.join)(r,E):E}e.randomPath=s}),define(se[66],oe([0,1,27]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringSHA1=e.toHexString=e.Hasher=e.stringHash=e.numberHash=e.doHash=e.hash=void 0;function i(l){return k(l,0)}e.hash=i;function k(l,m){switch(typeof l){case"object":return l===null?L(349,m):Array.isArray(l)?P(l,m):w(l,m);case"string":return I(l,m);case"boolean":return T(l,m);case"number":return L(l,m);case"undefined":return L(937,m);default:return L(617,m)}}e.doHash=k;function L(l,m){return(m<<5)-m+l|0}e.numberHash=L;function T(l,m){return L(l?433:863,m)}function I(l,m){m=L(149417,m);for(let u=0,h=l.length;u<h;u++)m=L(l.charCodeAt(u),m);return m}e.stringHash=I;function P(l,m){return m=L(104579,m),l.reduce((u,h)=>k(h,u),m)}function w(l,m){return m=L(181387,m),Object.keys(l).sort().reduce((u,h)=>(u=I(h,u),k(l[h],u)),m)}class C{constructor(){this._value=0}get value(){return this._value}hash(m){return this._value=k(m,this._value),this._value}}e.Hasher=C;var b;(function(l){l[l.BLOCK_SIZE=64]="BLOCK_SIZE",l[l.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(b||(b={}));function p(l,m,u=32){const h=u-m,d=~((1<<h)-1);return(l<<m|(d&l)>>>h)>>>0}function S(l,m=0,u=l.byteLength,h=0){for(let d=0;d<u;d++)l[m+d]=h}function f(l,m,u="0"){for(;l.length<m;)l=u+l;return l}function g(l,m=32){return l instanceof ArrayBuffer?Array.from(new Uint8Array(l)).map(u=>u.toString(16).padStart(2,"0")).join(""):f((l>>>0).toString(16),m/4)}e.toHexString=g;class y{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(m){const u=m.length;if(u===0)return;const h=this._buff;let d=this._buffLen,n=this._leftoverHighSurrogate,o,t;for(n!==0?(o=n,t=-1,n=0):(o=m.charCodeAt(0),t=0);;){let s=o;if(D.isHighSurrogate(o))if(t+1<u){const r=m.charCodeAt(t+1);D.isLowSurrogate(r)?(t++,s=D.computeCodePoint(o,r)):s=65533}else{n=o;break}else D.isLowSurrogate(o)&&(s=65533);if(d=this._push(h,d,s),t++,t<u)o=m.charCodeAt(t);else break}this._buffLen=d,this._leftoverHighSurrogate=n}_push(m,u,h){return h<128?m[u++]=h:h<2048?(m[u++]=192|(h&1984)>>>6,m[u++]=128|(h&63)>>>0):h<65536?(m[u++]=224|(h&61440)>>>12,m[u++]=128|(h&4032)>>>6,m[u++]=128|(h&63)>>>0):(m[u++]=240|(h&1835008)>>>18,m[u++]=128|(h&258048)>>>12,m[u++]=128|(h&4032)>>>6,m[u++]=128|(h&63)>>>0),u>=64&&(this._step(),u-=64,this._totalLen+=64,m[0]=m[64+0],m[1]=m[64+1],m[2]=m[64+2]),u}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),g(this._h0)+g(this._h1)+g(this._h2)+g(this._h3)+g(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,S(this._buff,this._buffLen),this._buffLen>56&&(this._step(),S(this._buff));const m=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(m/4294967296),!1),this._buffDV.setUint32(60,m%4294967296,!1),this._step()}_step(){const m=y._bigBlock32,u=this._buffDV;for(let a=0;a<64;a+=4)m.setUint32(a,u.getUint32(a,!1),!1);for(let a=64;a<320;a+=4)m.setUint32(a,p(m.getUint32(a-12,!1)^m.getUint32(a-32,!1)^m.getUint32(a-56,!1)^m.getUint32(a-64,!1),1),!1);let h=this._h0,d=this._h1,n=this._h2,o=this._h3,t=this._h4,s,r,c;for(let a=0;a<80;a++)a<20?(s=d&n|~d&o,r=1518500249):a<40?(s=d^n^o,r=1859775393):a<60?(s=d&n|d&o|n&o,r=2400959708):(s=d^n^o,r=3395469782),c=p(h,5)+s+t+r+m.getUint32(a*4,!1)&4294967295,t=o,o=n,n=p(d,30),d=h,h=c;this._h0=this._h0+h&4294967295,this._h1=this._h1+d&4294967295,this._h2=this._h2+n&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+t&4294967295}}e.StringSHA1=y,y._bigBlock32=new DataView(new ArrayBuffer(320))}),define(se[88],oe([0,1,27]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;(function(k){k[k.Ignore=0]="Ignore",k[k.Info=1]="Info",k[k.Warning=2]="Warning",k[k.Error=3]="Error"})(i||(i={})),function(k){const L="error",T="warning",I="warn",P="info",w="ignore";function C(p){return p?D.equalsIgnoreCase(L,p)?k.Error:D.equalsIgnoreCase(T,p)||D.equalsIgnoreCase(I,p)?k.Warning:D.equalsIgnoreCase(P,p)?k.Info:k.Ignore:k.Ignore}k.fromValue=C;function b(p){switch(p){case k.Error:return L;case k.Warning:return T;case k.Info:return P;default:return w}}k.toString=b}(i||(i={})),e.default=i}),define(se[48],oe([0,1,20,27]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=void 0;class k{constructor(){this._value="",this._pos=0}reset(S){return this._value=S,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(S){const f=S.charCodeAt(0),g=this._value.charCodeAt(this._pos);return f-g}value(){return this._value[this._pos]}}e.StringIterator=k;class L{constructor(S=!0){this._caseSensitive=S}reset(S){return this._value=S,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let S=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(S)this._from++;else break;else S=!1;return this}cmp(S){return this._caseSensitive?(0,i.compareSubstring)(S,this._value,0,S.length,this._from,this._to):(0,i.compareSubstringIgnoreCase)(S,this._value,0,S.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=L;class T{constructor(S=!0,f=!0){this._splitOnBackslash=S,this._caseSensitive=f}reset(S){this._from=0,this._to=0,this._value=S,this._valueLen=S.length;for(let f=S.length-1;f>=0;f--,this._valueLen--){const g=this._value.charCodeAt(f);if(!(g===47||this._splitOnBackslash&&g===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let S=!0;for(;this._to<this._valueLen;this._to++){const f=this._value.charCodeAt(this._to);if(f===47||this._splitOnBackslash&&f===92)if(S)this._from++;else break;else S=!1}return this}cmp(S){return this._caseSensitive?(0,i.compareSubstring)(S,this._value,0,S.length,this._from,this._to):(0,i.compareSubstringIgnoreCase)(S,this._value,0,S.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=T;var I;(function(p){p[p.Scheme=1]="Scheme",p[p.Authority=2]="Authority",p[p.Path=3]="Path",p[p.Query=4]="Query",p[p.Fragment=5]="Fragment"})(I||(I={}));class P{constructor(S,f){this._ignorePathCasing=S,this._ignoreQueryAndFragment=f,this._states=[],this._stateIdx=0}reset(S){return this._value=S,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new T(!1,!this._ignorePathCasing(S)),this._pathIterator.reset(S.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(S)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(S){if(this._states[this._stateIdx]===1)return(0,i.compareIgnoreCase)(S,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,i.compareIgnoreCase)(S,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(S);if(this._states[this._stateIdx]===4)return(0,i.compare)(S,this._value.query);if(this._states[this._stateIdx]===5)return(0,i.compare)(S,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=P;class w{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const S=this.right;return this.right=S.left,S.left=this,this.updateHeight(),S.updateHeight(),S}rotateRight(){const S=this.left;return this.left=S.right,S.right=this,this.updateHeight(),S.updateHeight(),S}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var C;(function(p){p[p.Left=-1]="Left",p[p.Mid=0]="Mid",p[p.Right=1]="Right"})(C||(C={}));class b{static forUris(S=()=>!1,f=()=>!1){return new b(new P(S,f))}static forPaths(S=!1){return new b(new T(void 0,!S))}static forStrings(){return new b(new k)}static forConfigKeys(){return new b(new L)}constructor(S){this._iter=S}clear(){this._root=void 0}fill(S,f){if(f){const g=f.slice(0);(0,D.shuffle)(g);for(const y of g)this.set(y,S)}else{const g=S.slice(0);(0,D.shuffle)(g);for(const y of g)this.set(y[0],y[1])}}set(S,f){const g=this._iter.reset(S);let y;this._root||(this._root=new w,this._root.segment=g.value());const l=[];for(y=this._root;;){const u=g.cmp(y.segment);if(u>0)y.left||(y.left=new w,y.left.segment=g.value()),l.push([-1,y]),y=y.left;else if(u<0)y.right||(y.right=new w,y.right.segment=g.value()),l.push([1,y]),y=y.right;else if(g.hasNext())g.next(),y.mid||(y.mid=new w,y.mid.segment=g.value()),l.push([0,y]),y=y.mid;else break}const m=y.value;y.value=f,y.key=S;for(let u=l.length-1;u>=0;u--){const h=l[u][1];h.updateHeight();const d=h.balanceFactor();if(d<-1||d>1){const n=l[u][0],o=l[u+1][0];if(n===1&&o===1)l[u][1]=h.rotateLeft();else if(n===-1&&o===-1)l[u][1]=h.rotateRight();else if(n===1&&o===-1)h.right=l[u+1][1]=l[u+1][1].rotateRight(),l[u][1]=h.rotateLeft();else if(n===-1&&o===1)h.left=l[u+1][1]=l[u+1][1].rotateLeft(),l[u][1]=h.rotateRight();else throw new Error;if(u>0)switch(l[u-1][0]){case-1:l[u-1][1].left=l[u][1];break;case 1:l[u-1][1].right=l[u][1];break;case 0:l[u-1][1].mid=l[u][1];break}else this._root=l[0][1]}}return m}get(S){return this._getNode(S)?.value}_getNode(S){const f=this._iter.reset(S);let g=this._root;for(;g;){const y=f.cmp(g.segment);if(y>0)g=g.left;else if(y<0)g=g.right;else if(f.hasNext())f.next(),g=g.mid;else break}return g}has(S){const f=this._getNode(S);return!(f?.value===void 0&&f?.mid===void 0)}delete(S){return this._delete(S,!1)}deleteSuperstr(S){return this._delete(S,!0)}_delete(S,f){const g=this._iter.reset(S),y=[];let l=this._root;for(;l;){const m=g.cmp(l.segment);if(m>0)y.push([-1,l]),l=l.left;else if(m<0)y.push([1,l]),l=l.right;else if(g.hasNext())g.next(),y.push([0,l]),l=l.mid;else break}if(!!l){if(f?(l.left=void 0,l.mid=void 0,l.right=void 0,l.height=1):(l.key=void 0,l.value=void 0),!l.mid&&!l.value)if(l.left&&l.right){const m=this._min(l.right);if(m.key){const{key:u,value:h,segment:d}=m;this._delete(m.key,!1),l.key=u,l.value=h,l.segment=d}}else{const m=l.left??l.right;if(y.length>0){const[u,h]=y[y.length-1];switch(u){case-1:h.left=m;break;case 0:h.mid=m;break;case 1:h.right=m;break}}else this._root=m}for(let m=y.length-1;m>=0;m--){const u=y[m][1];u.updateHeight();const h=u.balanceFactor();if(h>1?(u.right.balanceFactor()>=0||(u.right=u.right.rotateRight()),y[m][1]=u.rotateLeft()):h<-1&&(u.left.balanceFactor()<=0||(u.left=u.left.rotateLeft()),y[m][1]=u.rotateRight()),m>0)switch(y[m-1][0]){case-1:y[m-1][1].left=y[m][1];break;case 1:y[m-1][1].right=y[m][1];break;case 0:y[m-1][1].mid=y[m][1];break}else this._root=y[0][1]}}}_min(S){for(;S.left;)S=S.left;return S}findSubstr(S){const f=this._iter.reset(S);let g=this._root,y;for(;g;){const l=f.cmp(g.segment);if(l>0)g=g.left;else if(l<0)g=g.right;else if(f.hasNext())f.next(),y=g.value||y,g=g.mid;else break}return g&&g.value||y}findSuperstr(S){const f=this._iter.reset(S);let g=this._root;for(;g;){const y=f.cmp(g.segment);if(y>0)g=g.left;else if(y<0)g=g.right;else if(f.hasNext())f.next(),g=g.mid;else return g.mid?this._entries(g.mid):void 0}}forEach(S){for(const[f,g]of this)S(g,f)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(S){const f=[];return this._dfsEntries(S,f),f[Symbol.iterator]()}_dfsEntries(S,f){!S||(S.left&&this._dfsEntries(S.left,f),S.value&&f.push([S.key,S.value]),S.mid&&this._dfsEntries(S.mid,f),S.right&&this._dfsEntries(S.right,f))}_isBalanced(){const S=f=>{if(!f)return!0;const g=f.balanceFactor();return g<-1||g>1?!1:S(f.left)&&S(f.right)};return S(this._root)}}e.TernarySearchTree=b}),define(se[7],oe([0,1,12,5]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uriToFsPath=e.URI=void 0;const k=/^\w[\w\d+.-]*$/,L=/^\//,T=/^\/\//;function I(t,s){if(!t.scheme&&s)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!k.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!L.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(T.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function P(t,s){return!t&&!s?"file":t}function w(t,s){switch(t){case"https":case"http":case"file":s?s[0]!==b&&(s=b+s):s=b;break}return s}const C="",b="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class S{static isUri(s){return s instanceof S?!0:s?typeof s.authority=="string"&&typeof s.fragment=="string"&&typeof s.path=="string"&&typeof s.query=="string"&&typeof s.scheme=="string"&&typeof s.fsPath=="string"&&typeof s.with=="function"&&typeof s.toString=="function":!1}constructor(s,r,c,a,v,E=!1){typeof s=="object"?(this.scheme=s.scheme||C,this.authority=s.authority||C,this.path=s.path||C,this.query=s.query||C,this.fragment=s.fragment||C):(this.scheme=P(s,E),this.authority=r||C,this.path=w(this.scheme,c||C),this.query=a||C,this.fragment=v||C,I(this,E))}get fsPath(){return u(this,!1)}with(s){if(!s)return this;let{scheme:r,authority:c,path:a,query:v,fragment:E}=s;return r===void 0?r=this.scheme:r===null&&(r=C),c===void 0?c=this.authority:c===null&&(c=C),a===void 0?a=this.path:a===null&&(a=C),v===void 0?v=this.query:v===null&&(v=C),E===void 0?E=this.fragment:E===null&&(E=C),r===this.scheme&&c===this.authority&&a===this.path&&v===this.query&&E===this.fragment?this:new g(r,c,a,v,E)}static parse(s,r=!1){const c=p.exec(s);return c?new g(c[2]||C,o(c[4]||C),o(c[5]||C),o(c[7]||C),o(c[9]||C),r):new g(C,C,C,C,C)}static file(s){let r=C;if(i.isWindows&&(s=s.replace(/\\/g,b)),s[0]===b&&s[1]===b){const c=s.indexOf(b,2);c===-1?(r=s.substring(2),s=b):(r=s.substring(2,c),s=s.substring(c)||b)}return new g("file",r,s,C,C)}static from(s){const r=new g(s.scheme,s.authority,s.path,s.query,s.fragment);return I(r,!0),r}static joinPath(s,...r){if(!s.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let c;return i.isWindows&&s.scheme==="file"?c=S.file(D.win32.join(u(s,!0),...r)).path:c=D.posix.join(s.path,...r),s.with({path:c})}toString(s=!1){return h(this,s)}toJSON(){return this}static revive(s){if(s){if(s instanceof S)return s;{const r=new g(s);return r._formatted=s.external,r._fsPath=s._sep===f?s.fsPath:null,r}}else return s}}e.URI=S;const f=i.isWindows?1:void 0;class g extends S{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=u(this,!1)),this._fsPath}toString(s=!1){return s?h(this,!0):(this._formatted||(this._formatted=h(this,!1)),this._formatted)}toJSON(){const s={$mid:1};return this._fsPath&&(s.fsPath=this._fsPath,s._sep=f),this._formatted&&(s.external=this._formatted),this.path&&(s.path=this.path),this.scheme&&(s.scheme=this.scheme),this.authority&&(s.authority=this.authority),this.query&&(s.query=this.query),this.fragment&&(s.fragment=this.fragment),s}}const y={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function l(t,s){let r,c=-1;for(let a=0;a<t.length;a++){const v=t.charCodeAt(a);if(v>=97&&v<=122||v>=65&&v<=90||v>=48&&v<=57||v===45||v===46||v===95||v===126||s&&v===47)c!==-1&&(r+=encodeURIComponent(t.substring(c,a)),c=-1),r!==void 0&&(r+=t.charAt(a));else{r===void 0&&(r=t.substr(0,a));const E=y[v];E!==void 0?(c!==-1&&(r+=encodeURIComponent(t.substring(c,a)),c=-1),r+=E):c===-1&&(c=a)}}return c!==-1&&(r+=encodeURIComponent(t.substring(c))),r!==void 0?r:t}function m(t){let s;for(let r=0;r<t.length;r++){const c=t.charCodeAt(r);c===35||c===63?(s===void 0&&(s=t.substr(0,r)),s+=y[c]):s!==void 0&&(s+=t[r])}return s!==void 0?s:t}function u(t,s){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?s?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,i.isWindows&&(r=r.replace(/\//g,"\\")),r}e.uriToFsPath=u;function h(t,s){const r=s?m:l;let c="",{scheme:a,authority:v,path:E,query:R,fragment:N}=t;if(a&&(c+=a,c+=":"),(v||a==="file")&&(c+=b,c+=b),v){let O=v.indexOf("@");if(O!==-1){const z=v.substr(0,O);v=v.substr(O+1),O=z.indexOf(":"),O===-1?c+=r(z,!1):(c+=r(z.substr(0,O),!1),c+=":",c+=r(z.substr(O+1),!1)),c+="@"}v=v.toLowerCase(),O=v.indexOf(":"),O===-1?c+=r(v,!1):(c+=r(v.substr(0,O),!1),c+=v.substr(O))}if(E){if(E.length>=3&&E.charCodeAt(0)===47&&E.charCodeAt(2)===58){const O=E.charCodeAt(1);O>=65&&O<=90&&(E=`/${String.fromCharCode(O+32)}:${E.substr(3)}`)}else if(E.length>=2&&E.charCodeAt(1)===58){const O=E.charCodeAt(0);O>=65&&O<=90&&(E=`${String.fromCharCode(O+32)}:${E.substr(2)}`)}c+=r(E,!0)}return R&&(c+="?",c+=r(R,!1)),N&&(c+="#",c+=s?N:l(N,!1)),c}function d(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+d(t.substr(3)):t}}const n=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function o(t){return t.match(n)?t.replace(n,s=>d(s)):t}}),define(se[142],oe([0,1,7]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.getFirstFrame=e.parse=e.isRemoteConsoleLog=void 0;function i(w){const C=w;return C&&typeof C.type=="string"&&typeof C.severity=="string"}e.isRemoteConsoleLog=i;function k(w){const C=[];let b;try{const p=JSON.parse(w.arguments),S=p[p.length-1];S&&S.__$stack&&(p.pop(),b=S.__$stack),C.push(...p)}catch{C.push("Unable to log remote console arguments",w.arguments)}return{args:C,stack:b}}e.parse=k;function L(w){if(typeof w!="string")return L(k(w).stack);const C=w;if(C){const b=T(C),p=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(b||"");if(p&&p.length===4)return{uri:D.URI.file(p[1]),line:Number(p[2]),column:Number(p[3])}}}e.getFirstFrame=L;function T(w){if(!w)return w;const C=w.indexOf(`
`);return C===-1?w:w.substring(0,C)}function I(w,C){const{args:b,stack:p}=k(w),S=typeof b[0]=="string"&&b.length===1;let f=T(p);f&&(f=`(${f.trim()})`);let g=[];if(typeof b[0]=="string"?f&&S?g=[`%c[${C}] %c${b[0]} %c${f}`,P("blue"),P(""),P("grey")]:g=[`%c[${C}] %c${b[0]}`,P("blue"),P(""),...b.slice(1)]:g=[`%c[${C}]%`,P("blue"),...b],f&&!S&&g.push(f),typeof console[w.severity]!="function")throw new Error("Unknown console method");console[w.severity].apply(console,g)}e.log=I;function P(w){return`color: ${w}`}}),define(se[67],oe([0,1,17,27,7]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.revive=e.parse=e.stringify=void 0;function L(w){return JSON.stringify(w,I)}e.stringify=L;function T(w){let C=JSON.parse(w);return C=P(C),C}e.parse=T;function I(w,C){return C instanceof RegExp?{$mid:2,source:C.source,flags:(0,i.regExpFlags)(C)}:C}function P(w,C=0){if(!w||C>200)return w;if(typeof w=="object"){switch(w.$mid){case 1:return k.URI.revive(w);case 2:return new RegExp(w.source,w.flags);case 16:return new Date(w.source)}if(w instanceof D.VSBuffer||w instanceof Uint8Array)return w;if(Array.isArray(w))for(let b=0;b<w.length;++b)w[b]=P(w[b],C+1);else for(const b in w)Object.hasOwnProperty.call(w,b)&&(w[b]=P(w[b],C+1))}return w}e.revive=P}),define(se[21],oe([0,1,5,7]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var k;(function(P){P.inMemory="inmemory",P.vscode="vscode",P.internal="private",P.walkThrough="walkThrough",P.walkThroughSnippet="walkThroughSnippet",P.http="http",P.https="https",P.file="file",P.mailto="mailto",P.untitled="untitled",P.data="data",P.command="command",P.vscodeRemote="vscode-remote",P.vscodeRemoteResource="vscode-remote-resource",P.vscodeUserData="vscode-userdata",P.vscodeCustomEditor="vscode-custom-editor",P.vscodeNotebook="vscode-notebook",P.vscodeNotebookCell="vscode-notebook-cell",P.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",P.vscodeNotebookCellOutput="vscode-notebook-cell-output",P.vscodeInteractive="vscode-interactive",P.vscodeInteractiveInput="vscode-interactive-input",P.vscodeSettings="vscode-settings",P.vscodeWorkspaceTrust="vscode-workspace-trust",P.vscodeTerminal="vscode-terminal",P.webviewPanel="webview-panel",P.vscodeWebview="vscode-webview",P.extension="extension",P.vscodeFileResource="vscode-file",P.tmp="tmp",P.vsls="vsls",P.vscodeSourceControl="vscode-scm"})(k=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class L{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${k.vscodeRemoteResource}`}setPreferredWebSchema(w){this._preferredWebSchema=w}setDelegate(w){this._delegate=w}setServerRootPath(w){this._remoteResourcesPath=`${w}/${k.vscodeRemoteResource}`}set(w,C,b){this._hosts[w]=C,this._ports[w]=b}setConnectionToken(w,C){this._connectionTokens[w]=C}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(w){if(this._delegate)return this._delegate(w);const C=w.authority;let b=this._hosts[C];b&&b.indexOf(":")!==-1&&b.indexOf("[")===-1&&(b=`[${b}]`);const p=this._ports[C],S=this._connectionTokens[C];let f=`path=${encodeURIComponent(w.path)}`;return typeof S=="string"&&(f+=`&${e.connectionTokenQueryName}=${encodeURIComponent(S)}`),i.URI.from({scheme:D.isWeb?this._preferredWebSchema:k.vscodeRemoteResource,authority:`${b}:${p}`,path:this._remoteResourcesPath,query:f})}}e.RemoteAuthorities=new L,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class T{asBrowserUri(w){const C=this.toUri(w,Z);return this.uriToBrowserUri(C)}uriToBrowserUri(w){return w.scheme===k.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===k.file&&(D.isNative||D.isWebWorker&&D.globals.origin===`${k.vscodeFileResource}://${T.FALLBACK_AUTHORITY}`)?w.with({scheme:k.vscodeFileResource,authority:w.authority||T.FALLBACK_AUTHORITY,query:null,fragment:null}):w}asFileUri(w){const C=this.toUri(w,Z);return this.uriToFileUri(C)}uriToFileUri(w){return w.scheme===k.vscodeFileResource?w.with({scheme:k.file,authority:w.authority!==T.FALLBACK_AUTHORITY?w.authority:null,query:null,fragment:null}):w}toUri(w,C){return i.URI.isUri(w)?w:i.URI.parse(C.toUrl(w))}}T.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new T;var I;(function(P){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);P.CoopAndCoep=Object.freeze(w.get("3"));const C="vscode-coi";function b(S){let f;typeof S=="string"?f=new URL(S).searchParams:S instanceof URL?f=S.searchParams:i.URI.isUri(S)&&(f=new URL(S.toString(!0)).searchParams);const g=f?.get(C);if(!!g)return w.get(g)}P.getHeadersFromQuery=b;function p(S,f,g){if(!globalThis.crossOriginIsolated)return;const y=f&&g?"3":g?"2":"1";S instanceof URLSearchParams?S.set(C,y):S[C]=y}P.addSearchParam=p})(I=e.COI||(e.COI={}))}),define(se[22],oe([0,1,47,21,12,5,27,7]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function P(S){return(0,I.uriToFsPath)(S,!0)}e.originalFSPath=P;class w{constructor(f){this._ignorePathCasing=f}compare(f,g,y=!1){return f===g?0:(0,T.compare)(this.getComparisonKey(f,y),this.getComparisonKey(g,y))}isEqual(f,g,y=!1){return f===g?!0:!f||!g?!1:this.getComparisonKey(f,y)===this.getComparisonKey(g,y)}getComparisonKey(f,g=!1){return f.with({path:this._ignorePathCasing(f)?f.path.toLowerCase():void 0,fragment:g?null:void 0}).toString()}ignorePathCasing(f){return this._ignorePathCasing(f)}isEqualOrParent(f,g,y=!1){if(f.scheme===g.scheme){if(f.scheme===i.Schemas.file)return D.isEqualOrParent(P(f),P(g),this._ignorePathCasing(f))&&f.query===g.query&&(y||f.fragment===g.fragment);if((0,e.isEqualAuthority)(f.authority,g.authority))return D.isEqualOrParent(f.path,g.path,this._ignorePathCasing(f),"/")&&f.query===g.query&&(y||f.fragment===g.fragment)}return!1}joinPath(f,...g){return I.URI.joinPath(f,...g)}basenameOrAuthority(f){return(0,e.basename)(f)||f.authority}basename(f){return k.posix.basename(f.path)}extname(f){return k.posix.extname(f.path)}dirname(f){if(f.path.length===0)return f;let g;return f.scheme===i.Schemas.file?g=I.URI.file(k.dirname(P(f))).path:(g=k.posix.dirname(f.path),f.authority&&g.length&&g.charCodeAt(0)!==47&&(console.error(`dirname("${f.toString})) resulted in a relative path`),g="/")),f.with({path:g})}normalizePath(f){if(!f.path.length)return f;let g;return f.scheme===i.Schemas.file?g=I.URI.file(k.normalize(P(f))).path:g=k.posix.normalize(f.path),f.with({path:g})}relativePath(f,g){if(f.scheme!==g.scheme||!(0,e.isEqualAuthority)(f.authority,g.authority))return;if(f.scheme===i.Schemas.file){const m=k.relative(P(f),P(g));return L.isWindows?D.toSlashes(m):m}let y=f.path||"/";const l=g.path||"/";if(this._ignorePathCasing(f)){let m=0;for(const u=Math.min(y.length,l.length);m<u&&!(y.charCodeAt(m)!==l.charCodeAt(m)&&y.charAt(m).toLowerCase()!==l.charAt(m).toLowerCase());m++);y=l.substr(0,m)+y.substr(m)}return k.posix.relative(y,l)}resolvePath(f,g){if(f.scheme===i.Schemas.file){const y=I.URI.file(k.resolve(P(f),g));return f.with({authority:y.authority,path:y.path})}return g=D.toPosixPath(g),f.with({path:k.posix.resolve(f.path,g)})}isAbsolutePath(f){return!!f.path&&f.path[0]==="/"}isEqualAuthority(f,g){return f===g||f!==void 0&&g!==void 0&&(0,T.equalsIgnoreCase)(f,g)}hasTrailingPathSeparator(f,g=k.sep){if(f.scheme===i.Schemas.file){const y=P(f);return y.length>D.getRoot(y).length&&y[y.length-1]===g}else{const y=f.path;return y.length>1&&y.charCodeAt(y.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(f.fsPath)}}removeTrailingPathSeparator(f,g=k.sep){return(0,e.hasTrailingPathSeparator)(f,g)?f.with({path:f.path.substr(0,f.path.length-1)}):f}addTrailingPathSeparator(f,g=k.sep){let y=!1;if(f.scheme===i.Schemas.file){const l=P(f);y=l!==void 0&&l.length===D.getRoot(l).length&&l[l.length-1]===g}else{g="/";const l=f.path;y=l.length===1&&l.charCodeAt(l.length-1)===47}return!y&&!(0,e.hasTrailingPathSeparator)(f,g)?f.with({path:f.path+"/"}):f}}e.ExtUri=w,e.extUri=new w(()=>!1),e.extUriBiasedIgnorePathCase=new w(S=>S.scheme===i.Schemas.file?!L.isLinux:!0),e.extUriIgnorePathCase=new w(S=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function C(S,f){const g=[];for(let y=0;y<S.length;y++){const l=f(S[y]);S.some((m,u)=>u===y?!1:(0,e.isEqualOrParent)(l,f(m)))||g.push(S[y])}return g}e.distinctParents=C;var b;(function(S){S.META_DATA_LABEL="label",S.META_DATA_DESCRIPTION="description",S.META_DATA_SIZE="size",S.META_DATA_MIME="mime";function f(g){const y=new Map;g.path.substring(g.path.indexOf(";")+1,g.path.lastIndexOf(";")).split(";").forEach(u=>{const[h,d]=u.split(":");h&&d&&y.set(h,d)});const m=g.path.substring(0,g.path.indexOf(";"));return m&&y.set(S.META_DATA_MIME,m),y}S.parseMetaData=f})(b=e.DataUri||(e.DataUri={}));function p(S,f,g){if(f){let y=S.path;return y&&y[0]!==k.posix.sep&&(y=k.posix.sep+y),S.with({scheme:g,authority:f,path:y})}return S.with({scheme:g})}e.toLocalResource=p}),define(se[6],oe([0,1,24,9,3,2,22,5]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function P(X){return!!X&&typeof X.then=="function"}e.isThenable=P;function w(X){const _=new D.CancellationTokenSource,U=X(_.token),x=new Promise((j,J)=>{const re=_.token.onCancellationRequested(()=>{re.dispose(),_.dispose(),J(new i.CancellationError)});Promise.resolve(U).then(Y=>{re.dispose(),_.dispose(),j(Y)},Y=>{re.dispose(),_.dispose(),J(Y)})});return new class{cancel(){_.cancel()}then(j,J){return x.then(j,J)}catch(j){return this.then(void 0,j)}finally(j){return x.finally(j)}}}e.createCancelablePromise=w;function C(X,_,U){return new Promise((x,j)=>{const J=_.onCancellationRequested(()=>{J.dispose(),x(U)});X.then(x,j).finally(()=>J.dispose())})}e.raceCancellation=C;function b(X,_){return new Promise((U,x)=>{const j=_.onCancellationRequested(()=>{j.dispose(),x(new i.CancellationError)});X.then(U,x).finally(()=>j.dispose())})}e.raceCancellationError=b;async function p(X){let _=-1;const U=X.map((j,J)=>j.then(re=>(_=J,re))),x=await Promise.race(U);return X.forEach((j,J)=>{J!==_&&j.cancel()}),x}e.raceCancellablePromises=p;function S(X,_,U){let x;const j=setTimeout(()=>{x?.(void 0),U?.()},_);return Promise.race([X.finally(()=>clearTimeout(j)),new Promise(J=>x=J)])}e.raceTimeout=S;function f(X){return new Promise((_,U)=>{const x=X();P(x)?x.then(_,U):_(x)})}e.asPromise=f;class g{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(_){if(this.activePromise){if(this.queuedPromiseFactory=_,!this.queuedPromise){const U=()=>{this.queuedPromise=null;const x=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,x};this.queuedPromise=new Promise(x=>{this.activePromise.then(U,U).then(x)})}return new Promise((U,x)=>{this.queuedPromise.then(U,x)})}return this.activePromise=_(),new Promise((U,x)=>{this.activePromise.then(j=>{this.activePromise=null,U(j)},j=>{this.activePromise=null,x(j)})})}}e.Throttler=g;class y{constructor(){this.current=Promise.resolve(null)}queue(_){return this.current=this.current.then(()=>_(),()=>_())}}e.Sequencer=y;class l{constructor(){this.promiseMap=new Map}queue(_,U){const j=(this.promiseMap.get(_)??Promise.resolve()).catch(()=>{}).then(U).finally(()=>{this.promiseMap.get(_)===j&&this.promiseMap.delete(_)});return this.promiseMap.set(_,j),j}}e.SequencerByKey=l;const m=(X,_)=>{let U=!0;const x=setTimeout(()=>{U=!1,_()},X);return{isTriggered:()=>U,dispose:()=>{clearTimeout(x),U=!1}}},u=X=>{let _=!0;return queueMicrotask(()=>{_&&(_=!1,X())}),{isTriggered:()=>_,dispose:()=>{_=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class h{constructor(_){this.defaultDelay=_,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(_,U=this.defaultDelay){this.task=_,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((j,J)=>{this.doResolve=j,this.doReject=J}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const j=this.task;return this.task=null,j()}}));const x=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=U===e.MicrotaskDelay?u(x):m(U,x),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new i.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=h;class d{constructor(_){this.delayer=new h(_),this.throttler=new g}trigger(_,U){return this.delayer.trigger(()=>this.throttler.queue(_),U)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=d;class n{constructor(){this._isOpen=!1,this._promise=new Promise((_,U)=>{this._completePromise=_})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=n;class o extends n{constructor(_){super(),this._timeout=setTimeout(()=>this.open(),_)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=o;function t(X,_){return _?new Promise((U,x)=>{const j=setTimeout(()=>{J.dispose(),U()},X),J=_.onCancellationRequested(()=>{clearTimeout(j),J.dispose(),x(new i.CancellationError)})}):w(U=>t(X,U))}e.timeout=t;function s(X,_=0){const U=setTimeout(X,_);return(0,L.toDisposable)(()=>clearTimeout(U))}e.disposableTimeout=s;function r(X){const _=[];let U=0;const x=X.length;function j(){return U<x?X[U++]():null}function J(re){re!=null&&_.push(re);const Y=j();return Y?Y.then(J):Promise.resolve(_)}return Promise.resolve(null).then(J)}e.sequence=r;function c(X,_=x=>!!x,U=null){let x=0;const j=X.length,J=()=>{if(x>=j)return Promise.resolve(U);const re=X[x++];return Promise.resolve(re()).then(ie=>_(ie)?Promise.resolve(ie):J())};return J()}e.first=c;function a(X,_=x=>!!x,U=null){if(X.length===0)return Promise.resolve(U);let x=X.length;const j=()=>{x=-1;for(const J of X)J.cancel?.()};return new Promise((J,re)=>{for(const Y of X)Y.then(ie=>{--x>=0&&_(ie)?(j(),J(ie)):x===0&&J(U)}).catch(ie=>{--x>=0&&(j(),re(ie))})})}e.firstParallel=a;class v{constructor(_){this._size=0,this.maxDegreeOfParalellism=_,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new k.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(_){return this._size++,new Promise((U,x)=>{this.outstandingPromises.push({factory:_,c:U,e:x}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const _=this.outstandingPromises.shift();this.runningPromises++;const U=_.factory();U.then(_.c,_.e),U.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=v;class E extends v{constructor(){super(1)}}e.Queue=E;class R{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const _=new W;return this.drainers.add(_),_.p}isDrained(){for(const[,_]of this.queues)if(_.size>0)return!1;return!0}queueFor(_,U=T.extUri){const x=U.getComparisonKey(_);let j=this.queues.get(x);return j||(j=new E,k.Event.once(j.onDrained)(()=>{j?.dispose(),this.queues.delete(x),this.onDidQueueDrain()}),this.queues.set(x,j)),j}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const _ of this.drainers)_.complete();this.drainers.clear()}dispose(){for(const[,_]of this.queues)_.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=R;class N{constructor(_,U){this._token=-1,typeof _=="function"&&typeof U=="number"&&this.setIfNotSet(_,U)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(_,U){this.cancel(),this._token=setTimeout(()=>{this._token=-1,_()},U)}setIfNotSet(_,U){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,_()},U))}}e.TimeoutTimer=N;class O{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(_,U){this.cancel(),this._token=setInterval(()=>{_()},U)}}e.IntervalTimer=O;class z{constructor(_,U){this.timeoutToken=-1,this.runner=_,this.timeout=U,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(_=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,_)}get delay(){return this.timeout}set delay(_){this.timeout=_}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=z;class F{constructor(_,U){U%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${U}ms is not a multiple of 1000ms.`),this.runner=_,this.timeout=U,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(_=this.timeout){_%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${_}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(_/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=F;class A extends z{constructor(_,U){super(_,U),this.units=[]}work(_){this.units.push(_),this.isScheduled()||this.schedule()}doRun(){const _=this.units;this.units=[],this.runner?.(_)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=A;class M extends L.Disposable{constructor(_,U){super(),this.options=_,this.handler=U,this.pendingWork=[],this.throttler=this._register(new L.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(_){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+_.length>this.options.maxBufferedWork)return!1}else if(this.pending+_.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(..._),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new z(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=M,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=X=>{(0,I.setTimeout0)(()=>{if(_)return;const U=Date.now()+15;X(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,U-Date.now())}}))});let _=!1;return{dispose(){_||(_=!0)}}}:e.runWhenIdle=(X,_)=>{const U=requestIdleCallback(X,typeof _=="number"?{timeout:_}:void 0);let x=!1;return{dispose(){x||(x=!0,cancelIdleCallback(U))}}}}();class ${constructor(_){this._didRun=!1,this._executor=()=>{try{this._value=_()}catch(U){this._error=U}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=$;async function V(X,_,U){let x;for(let j=0;j<U;j++)try{return await X()}catch(J){x=J,await t(_)}throw x}e.retry=V;class B{hasPending(_){return this._pending?typeof _=="number"?this._pending.taskId===_:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(_,U,x){return this._pending={taskId:_,cancel:()=>x?.(),promise:U},U.then(()=>this.donePending(_),()=>this.donePending(_)),U}donePending(_){this._pending&&_===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const _=this._next;this._next=void 0,_.run().then(_.promiseResolve,_.promiseReject)}}setNext(_){if(this._next)this._next.run=_;else{let U,x;const j=new Promise((J,re)=>{U=J,x=re});this._next={run:_,promise:j,promiseResolve:U,promiseReject:x}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=B;class Q{constructor(_,U=()=>Date.now()){this.interval=_,this.nowFn=U,this.lastIncrementTime=0,this.value=0}increment(){const _=this.nowFn();return _-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=_,this.value=0),this.value++,this.value}}e.IntervalCounter=Q;class W{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((_,U)=>{this.completeCallback=_,this.errorCallback=U})}complete(_){return new Promise(U=>{this.completeCallback(_),this.resolved=!0,U()})}error(_){return new Promise(U=>{this.errorCallback(_),this.rejected=!0,U()})}cancel(){new Promise(_=>{this.errorCallback(new i.CancellationError),this.rejected=!0,_()})}}e.DeferredPromise=W;var q;(function(X){async function _(x){let j;const J=await Promise.all(x.map(re=>re.then(Y=>Y,Y=>{j||(j=Y)})));if(typeof j<"u")throw j;return J}X.settled=_;function U(x){return new Promise(async(j,J)=>{try{await x(j,J)}catch(re){J(re)}})}X.withAsyncBody=U})(q=e.Promises||(e.Promises={}));var G;(function(X){X[X.Initial=0]="Initial",X[X.DoneOK=1]="DoneOK",X[X.DoneError=2]="DoneError"})(G||(G={}));class ee{static fromArray(_){return new ee(U=>{U.emitMany(_)})}static fromPromise(_){return new ee(async U=>{U.emitMany(await _)})}static fromPromises(_){return new ee(async U=>{await Promise.all(_.map(async x=>U.emitOne(await x)))})}static merge(_){return new ee(async U=>{await Promise.all(_.map(async x=>{for await(const j of x)U.emitOne(j)}))})}constructor(_){this._state=0,this._results=[],this._error=null,this._onStateChanged=new k.Emitter,queueMicrotask(async()=>{const U={emitOne:x=>this.emitOne(x),emitMany:x=>this.emitMany(x),reject:x=>this.reject(x)};try{await Promise.resolve(_(U)),this.resolve()}catch(x){this.reject(x)}finally{U.emitOne=void 0,U.emitMany=void 0,U.reject=void 0}})}[Symbol.asyncIterator](){let _=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(_<this._results.length)return{done:!1,value:this._results[_++]};if(this._state===1)return{done:!0,value:void 0};await k.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(_,U){return new ee(async x=>{for await(const j of _)x.emitOne(U(j))})}map(_){return ee.map(this,_)}static filter(_,U){return new ee(async x=>{for await(const j of _)U(j)&&x.emitOne(j)})}filter(_){return ee.filter(this,_)}static coalesce(_){return ee.filter(_,U=>!!U)}coalesce(){return ee.coalesce(this)}static async toPromise(_){const U=[];for await(const x of _)U.push(x);return U}toPromise(){return ee.toPromise(this)}emitOne(_){this._state===0&&(this._results.push(_),this._onStateChanged.fire())}emitMany(_){this._state===0&&(this._results=this._results.concat(_),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(_){this._state===0&&(this._state=2,this._error=_,this._onStateChanged.fire())}}e.AsyncIterableObject=ee,ee.EMPTY=ee.fromArray([]);class ae extends ee{constructor(_,U){super(U),this._source=_}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=ae;function K(X){const _=new D.CancellationTokenSource,U=X(_.token);return new ae(_,async x=>{const j=_.token.onCancellationRequested(()=>{j.dispose(),_.dispose(),x.reject(new i.CancellationError)});try{for await(const J of U){if(_.token.isCancellationRequested)return;x.emitOne(J)}j.dispose(),_.dispose()}catch(J){j.dispose(),_.dispose(),x.reject(J)}})}e.createCancelableAsyncIterable=K}),define(se[89],oe([0,1,20,6,47,37,12,5,27]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function w(){return Object.create(null)}e.getEmptyExpression=w,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const C="[/\\\\]",b="[^/\\\\]",p=/\//g;function S(W,q){switch(W){case 0:return"";case 1:return`${b}*?`;default:return`(?:${C}|${b}+${C}${q?`|${C}${b}+`:""})*?`}}function f(W,q){if(!W)return[];const G=[];let ee=!1,ae=!1,K="";for(const X of W){switch(X){case q:if(!ee&&!ae){G.push(K),K="";continue}break;case"{":ee=!0;break;case"}":ee=!1;break;case"[":ae=!0;break;case"]":ae=!1;break}K+=X}return K&&G.push(K),G}e.splitGlobAware=f;function g(W){if(!W)return"";let q="";const G=f(W,e.GLOB_SPLIT);if(G.every(ee=>ee===e.GLOBSTAR))q=".*";else{let ee=!1;G.forEach((ae,K)=>{if(ae===e.GLOBSTAR){if(ee)return;q+=S(2,K===G.length-1)}else{let X=!1,_="",U=!1,x="";for(const j of ae){if(j!=="}"&&X){_+=j;continue}if(U&&(j!=="]"||!x)){let J;j==="-"?J=j:(j==="^"||j==="!")&&!x?J="^":j===e.GLOB_SPLIT?J="":J=(0,P.escapeRegExpCharacters)(j),x+=J;continue}switch(j){case"{":X=!0;continue;case"[":U=!0;continue;case"}":{q+=`(?:${f(_,",").map(Y=>g(Y)).join("|")})`,X=!1,_="";break}case"]":{q+="["+x+"]",U=!1,x="";break}case"?":q+=b;continue;case"*":q+=S(1);continue;default:q+=(0,P.escapeRegExpCharacters)(j)}}K<G.length-1&&(G[K+1]!==e.GLOBSTAR||K+2<G.length)&&(q+=C)}ee=ae===e.GLOBSTAR})}return q}const y=/^\*\*\/\*\.[\w\.-]+$/,l=/^\*\*\/([\w\.-]+)\/?$/,m=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,u=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,h=/^\*\*((\/[\w\.-]+)+)\/?$/,d=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,n=new L.LRUCache(1e4),o=function(){return!1},t=function(){return null};function s(W,q){if(!W)return t;let G;typeof W!="string"?G=W.pattern:G=W,G=G.trim();const ee=`${G}_${!!q.trimForExclusions}`;let ae=n.get(ee);if(ae)return r(ae,W);let K;return y.test(G)?ae=a(G.substr(4),G):(K=l.exec(c(G,q)))?ae=v(K[1],G):(q.trimForExclusions?u:m).test(G)?ae=E(G,q):(K=h.exec(c(G,q)))?ae=R(K[1].substr(1),G,!0):(K=d.exec(c(G,q)))?ae=R(K[1],G,!1):ae=N(G),n.set(ee,ae),r(ae,W)}function r(W,q){if(typeof q=="string")return W;const G=function(ee,ae){return(0,k.isEqualOrParent)(ee,q.base,!I.isLinux)?W((0,P.ltrim)(ee.substr(q.base.length),T.sep),ae):null};return G.allBasenames=W.allBasenames,G.allPaths=W.allPaths,G.basenames=W.basenames,G.patterns=W.patterns,G}function c(W,q){return q.trimForExclusions&&W.endsWith("/**")?W.substr(0,W.length-2):W}function a(W,q){return function(G,ee){return typeof G=="string"&&G.endsWith(W)?q:null}}function v(W,q){const G=`/${W}`,ee=`\\${W}`,ae=function(X,_){return typeof X!="string"?null:_?_===W?q:null:X===W||X.endsWith(G)||X.endsWith(ee)?q:null},K=[W];return ae.basenames=K,ae.patterns=[q],ae.allBasenames=K,ae}function E(W,q){const G=B(W.slice(1,-1).split(",").map(_=>s(_,q)).filter(_=>_!==t),W),ee=G.length;if(!ee)return t;if(ee===1)return G[0];const ae=function(_,U){for(let x=0,j=G.length;x<j;x++)if(G[x](_,U))return W;return null},K=G.find(_=>!!_.allBasenames);K&&(ae.allBasenames=K.allBasenames);const X=G.reduce((_,U)=>U.allPaths?_.concat(U.allPaths):_,[]);return X.length&&(ae.allPaths=X),ae}function R(W,q,G){const ee=T.sep===T.posix.sep,ae=ee?W:W.replace(p,T.sep),K=T.sep+ae,X=T.posix.sep+W;let _;return G?_=function(U,x){return typeof U=="string"&&(U===ae||U.endsWith(K)||!ee&&(U===W||U.endsWith(X)))?q:null}:_=function(U,x){return typeof U=="string"&&(U===ae||!ee&&U===W)?q:null},_.allPaths=[(G?"*/":"./")+W],_}function N(W){try{const q=new RegExp(`^${g(W)}$`);return function(G){return q.lastIndex=0,typeof G=="string"&&q.test(G)?W:null}}catch{return t}}function O(W,q,G){return!W||typeof q!="string"?!1:z(W)(q,void 0,G)}e.match=O;function z(W,q={}){if(!W)return o;if(typeof W=="string"||F(W)){const G=s(W,q);if(G===t)return o;const ee=function(ae,K){return!!G(ae,K)};return G.allBasenames&&(ee.allBasenames=G.allBasenames),G.allPaths&&(ee.allPaths=G.allPaths),ee}return $(W,q)}e.parse=z;function F(W){const q=W;return q?typeof q.base=="string"&&typeof q.pattern=="string":!1}e.isRelativePattern=F;function A(W){return W.allBasenames||[]}e.getBasenameTerms=A;function M(W){return W.allPaths||[]}e.getPathTerms=M;function $(W,q){const G=B(Object.getOwnPropertyNames(W).map(_=>V(_,W[_],q)).filter(_=>_!==t)),ee=G.length;if(!ee)return t;if(!G.some(_=>!!_.requiresSiblings)){if(ee===1)return G[0];const _=function(j,J){let re;for(let Y=0,ie=G.length;Y<ie;Y++){const ne=G[Y](j,J);if(typeof ne=="string")return ne;(0,i.isThenable)(ne)&&(re||(re=[]),re.push(ne))}return re?(async()=>{for(const Y of re){const ie=await Y;if(typeof ie=="string")return ie}return null})():null},U=G.find(j=>!!j.allBasenames);U&&(_.allBasenames=U.allBasenames);const x=G.reduce((j,J)=>J.allPaths?j.concat(J.allPaths):j,[]);return x.length&&(_.allPaths=x),_}const ae=function(_,U,x){let j,J;for(let re=0,Y=G.length;re<Y;re++){const ie=G[re];ie.requiresSiblings&&x&&(U||(U=(0,T.basename)(_)),j||(j=U.substr(0,U.length-(0,T.extname)(_).length)));const ne=ie(_,U,j,x);if(typeof ne=="string")return ne;(0,i.isThenable)(ne)&&(J||(J=[]),J.push(ne))}return J?(async()=>{for(const re of J){const Y=await re;if(typeof Y=="string")return Y}return null})():null},K=G.find(_=>!!_.allBasenames);K&&(ae.allBasenames=K.allBasenames);const X=G.reduce((_,U)=>U.allPaths?_.concat(U.allPaths):_,[]);return X.length&&(ae.allPaths=X),ae}function V(W,q,G){if(q===!1)return t;const ee=s(W,G);if(ee===t)return t;if(typeof q=="boolean")return ee;if(q){const ae=q.when;if(typeof ae=="string"){const K=(X,_,U,x)=>{if(!x||!ee(X,_))return null;const j=ae.replace("$(basename)",U),J=x(j);return(0,i.isThenable)(J)?J.then(re=>re?W:null):J?W:null};return K.requiresSiblings=!0,K}}return ee}function B(W,q){const G=W.filter(_=>!!_.basenames);if(G.length<2)return W;const ee=G.reduce((_,U)=>{const x=U.basenames;return x?_.concat(x):_},[]);let ae;if(q){ae=[];for(let _=0,U=ee.length;_<U;_++)ae.push(q)}else ae=G.reduce((_,U)=>{const x=U.patterns;return x?_.concat(x):_},[]);const K=function(_,U){if(typeof _!="string")return null;if(!U){let j;for(j=_.length;j>0;j--){const J=_.charCodeAt(j-1);if(J===47||J===92)break}U=_.substr(j)}const x=ee.indexOf(U);return x!==-1?ae[x]:null};K.basenames=ee,K.patterns=ae,K.allBasenames=ee;const X=W.filter(_=>!_.basenames);return X.push(K),X}function Q(W,q){return(0,D.equals)(W,q,(G,ee)=>typeof G=="string"&&typeof ee=="string"?G===ee:typeof G!="string"&&typeof ee!="string"?G.base===ee.base&&G.pattern===ee.pattern:!1)}e.patternsEquals=Q}),define(se[143],oe([0,1,7]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformAndReviveIncomingURIs=e.transformIncomingURIs=e.transformOutgoingURIs=e.DefaultURITransformer=e.URITransformer=void 0;function i(C){return C.toJSON()}class k{constructor(b){this._uriTransformer=b}transformIncoming(b){const p=this._uriTransformer.transformIncoming(b);return p===b?b:i(D.URI.from(p))}transformOutgoing(b){const p=this._uriTransformer.transformOutgoing(b);return p===b?b:i(D.URI.from(p))}transformOutgoingURI(b){const p=this._uriTransformer.transformOutgoing(b);return p===b?b:D.URI.from(p)}transformOutgoingScheme(b){return this._uriTransformer.transformOutgoingScheme(b)}}e.URITransformer=k,e.DefaultURITransformer=new class{transformIncoming(C){return C}transformOutgoing(C){return C}transformOutgoingURI(C){return C}transformOutgoingScheme(C){return C}};function L(C,b,p){if(!C||p>200)return null;if(typeof C=="object"){if(C instanceof D.URI)return b.transformOutgoing(C);for(const S in C)if(Object.hasOwnProperty.call(C,S)){const f=L(C[S],b,p+1);f!==null&&(C[S]=f)}}return null}function T(C,b){const p=L(C,b,0);return p===null?C:p}e.transformOutgoingURIs=T;function I(C,b,p,S){if(!C||S>200)return null;if(typeof C=="object"){if(C.$mid===1)return p?D.URI.revive(b.transformIncoming(C)):b.transformIncoming(C);for(const f in C)if(Object.hasOwnProperty.call(C,f)){const g=I(C[f],b,p,S+1);g!==null&&(C[f]=g)}}return null}function P(C,b){const p=I(C,b,!1,0);return p===null?C:p}e.transformIncomingURIs=P;function w(C,b){const p=I(C,b,!0,0);return p===null?C:p}e.transformAndReviveIncomingURIs=w}),define(se[144],oe([0,1,34,9,48,31,130]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMachineId=e.virtualMachineHint=void 0,e.virtualMachineHint=new class{_isVirtualMachineMacAddress(C){return this._virtualMachineOUIs||(this._virtualMachineOUIs=k.TernarySearchTree.forStrings(),this._virtualMachineOUIs.set("00-50-56",!0),this._virtualMachineOUIs.set("00-0C-29",!0),this._virtualMachineOUIs.set("00-05-69",!0),this._virtualMachineOUIs.set("00-03-FF",!0),this._virtualMachineOUIs.set("00-1C-42",!0),this._virtualMachineOUIs.set("00-16-3E",!0),this._virtualMachineOUIs.set("08-00-27",!0),this._virtualMachineOUIs.set("00:50:56",!0),this._virtualMachineOUIs.set("00:0C:29",!0),this._virtualMachineOUIs.set("00:05:69",!0),this._virtualMachineOUIs.set("00:03:FF",!0),this._virtualMachineOUIs.set("00:1C:42",!0),this._virtualMachineOUIs.set("00:16:3E",!0),this._virtualMachineOUIs.set("08:00:27",!0)),!!this._virtualMachineOUIs.findSubstr(C)}value(){if(this._value===void 0){let C=0,b=0;const p=(0,D.networkInterfaces)();for(const S in p){const f=p[S];if(f)for(const{mac:g,internal:y}of f)y||(b+=1,this._isVirtualMachineMacAddress(g.toUpperCase())&&(C+=1))}this._value=b>0?C/b:0}return this._value}};let I;async function P(){return I||(I=(async()=>await w()||L.generateUuid())()),I}e.getMachineId=P;async function w(){try{const C=await new Promise((p,S)=>{Z(["crypto"],p,S)}),b=(0,T.getMac)();return C.createHash("sha256").update(b,"utf8").digest("hex")}catch(C){i.onUnexpectedError(C);return}}}),define(se[28],oe([0,1,52,34,282,6,47,85,12,5,22,7]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Promises=e.writeFileSync=e.configureFlushOnWrite=e.SymlinkSupport=e.whenDeleted=e.readdirSync=e.rimrafSync=e.RimRafMode=void 0;var p;(function($){$[$.UNLINK=0]="UNLINK",$[$.MOVE=1]="MOVE"})(p=e.RimRafMode||(e.RimRafMode={}));async function S($,V=p.UNLINK){if((0,T.isRootOrDriveLetter)($))throw new Error("rimraf - will refuse to recursively delete root");return V===p.UNLINK?g($):f($)}async function f($){try{const V=(0,T.randomPath)((0,i.tmpdir)());try{await D.promises.rename($,V)}catch(B){return B.code==="ENOENT"?void 0:g($)}g(V).catch(B=>{})}catch(V){if(V.code!=="ENOENT")throw V}}async function g($){return(0,k.promisify)(D.rm)($,{recursive:!0,force:!0,maxRetries:3})}function y($){if((0,T.isRootOrDriveLetter)($))throw new Error("rimraf - will refuse to recursively delete root");D.rmSync($,{recursive:!0,force:!0,maxRetries:3})}e.rimrafSync=y;async function l($,V){return h(await(V?m($):(0,k.promisify)(D.readdir)($)))}async function m($){try{return await(0,k.promisify)(D.readdir)($,{withFileTypes:!0})}catch(Q){console.warn("[node.js fs] readdir with filetypes failed with error: ",Q)}const V=[],B=await l($);for(const Q of B){let W=!1,q=!1,G=!1;try{const ee=await e.Promises.lstat((0,P.join)($,Q));W=ee.isFile(),q=ee.isDirectory(),G=ee.isSymbolicLink()}catch(ee){console.warn("[node.js fs] unexpected error from lstat after readdir: ",ee)}V.push({name:Q,isFile:()=>W,isDirectory:()=>q,isSymbolicLink:()=>G})}return V}function u($){return h(D.readdirSync($))}e.readdirSync=u;function h($){return $.map(V=>typeof V=="string"?w.isMacintosh?(0,I.normalizeNFC)(V):V:(V.name=w.isMacintosh?(0,I.normalizeNFC)(V.name):V.name,V))}async function d($){const V=await l($),B=[];for(const Q of V)await o.existsDirectory((0,P.join)($,Q))&&B.push(Q);return B}function n($,V=1e3){return new Promise(B=>{let Q=!1;const W=setInterval(()=>{Q||(Q=!0,D.access($,q=>{Q=!1,q&&(clearInterval(W),B(void 0))}))},V)})}e.whenDeleted=n;var o;(function($){async function V(W){let q;try{if(q=await e.Promises.lstat(W),!q.isSymbolicLink())return{stat:q}}catch{}try{return{stat:await e.Promises.stat(W),symbolicLink:q?.isSymbolicLink()?{dangling:!1}:void 0}}catch(G){if(G.code==="ENOENT"&&q)return{stat:q,symbolicLink:{dangling:!0}};if(w.isWindows&&G.code==="EACCES")try{return{stat:await e.Promises.stat(await e.Promises.readlink(W)),symbolicLink:{dangling:!1}}}catch(ee){if(ee.code==="ENOENT"&&q)return{stat:q,symbolicLink:{dangling:!0}};throw ee}throw G}}$.stat=V;async function B(W){try{const{stat:q,symbolicLink:G}=await $.stat(W);return q.isFile()&&G?.dangling!==!0}catch{}return!1}$.existsFile=B;async function Q(W){try{const{stat:q,symbolicLink:G}=await $.stat(W);return q.isDirectory()&&G?.dangling!==!0}catch{}return!1}$.existsDirectory=Q})(o=e.SymlinkSupport||(e.SymlinkSupport={}));const t=new L.ResourceQueue;function s($,V,B){return t.queueFor(b.URI.file($),C.extUriBiasedIgnorePathCase).queue(()=>{const Q=E(B);return new Promise((W,q)=>a($,V,Q,G=>G?q(G):W()))})}let r=!0;function c($){r=$}e.configureFlushOnWrite=c;function a($,V,B,Q){if(!r)return D.writeFile($,V,{mode:B.mode,flag:B.flag},Q);D.open($,B.flag,B.mode,(W,q)=>{if(W)return Q(W);D.writeFile(q,V,G=>{if(G)return D.close(q,()=>Q(G));D.fdatasync(q,ee=>(ee&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",ee),c(!1)),D.close(q,ae=>Q(ae))))})})}function v($,V,B){const Q=E(B);if(!r)return D.writeFileSync($,V,{mode:Q.mode,flag:Q.flag});const W=D.openSync($,Q.flag,Q.mode);try{D.writeFileSync(W,V);try{D.fdatasyncSync(W)}catch(q){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",q),c(!1)}}finally{D.closeSync(W)}}e.writeFileSync=v;function E($){return $?{mode:typeof $.mode=="number"?$.mode:438,flag:typeof $.flag=="string"?$.flag:"w"}:{mode:438,flag:"w"}}async function R($,V){if($!==V)try{await e.Promises.rename($,V)}catch(B){if($.toLowerCase()!==V.toLowerCase()&&B.code==="EXDEV"||$.endsWith("."))await N($,V,{preserveSymlinks:!1}),await S($,p.MOVE);else throw B}}async function N($,V,B){return z($,V,{root:{source:$,target:V},options:B,handledSourcePaths:new Set})}const O=511;async function z($,V,B){if(B.handledSourcePaths.has($))return;B.handledSourcePaths.add($);const{stat:Q,symbolicLink:W}=await o.stat($);if(W){if(B.options.preserveSymlinks)try{return await M($,V,B)}catch(q){console.warn("[node.js fs] copy of symlink failed: ",q)}if(W.dangling)return}return Q.isDirectory()?F($,V,Q.mode&O,B):A($,V,Q.mode&O)}async function F($,V,B,Q){await e.Promises.mkdir(V,{recursive:!0,mode:B});const W=await l($);for(const q of W)await z((0,P.join)($,q),(0,P.join)(V,q),Q)}async function A($,V,B){await e.Promises.copyFile($,V),await e.Promises.chmod(V,B)}async function M($,V,B){let Q=await e.Promises.readlink($);(0,T.isEqualOrParent)(Q,B.root.source,!w.isLinux)&&(Q=(0,P.join)(B.root.target,Q.substr(B.root.source.length+1))),await e.Promises.symlink(Q,V)}e.Promises=new class{get access(){return(0,k.promisify)(D.access)}get stat(){return(0,k.promisify)(D.stat)}get lstat(){return(0,k.promisify)(D.lstat)}get utimes(){return(0,k.promisify)(D.utimes)}get read(){return($,V,B,Q,W)=>new Promise((q,G)=>{D.read($,V,B,Q,W,(ee,ae,K)=>ee?G(ee):q({bytesRead:ae,buffer:K}))})}get readFile(){return(0,k.promisify)(D.readFile)}get write(){return($,V,B,Q,W)=>new Promise((q,G)=>{D.write($,V,B,Q,W,(ee,ae,K)=>ee?G(ee):q({bytesWritten:ae,buffer:K}))})}get appendFile(){return(0,k.promisify)(D.appendFile)}get fdatasync(){return(0,k.promisify)(D.fdatasync)}get truncate(){return(0,k.promisify)(D.truncate)}get rename(){return(0,k.promisify)(D.rename)}get copyFile(){return(0,k.promisify)(D.copyFile)}get open(){return(0,k.promisify)(D.open)}get close(){return(0,k.promisify)(D.close)}get symlink(){return(0,k.promisify)(D.symlink)}get readlink(){return(0,k.promisify)(D.readlink)}get chmod(){return(0,k.promisify)(D.chmod)}get mkdir(){return(0,k.promisify)(D.mkdir)}get unlink(){return(0,k.promisify)(D.unlink)}get rmdir(){return(0,k.promisify)(D.rmdir)}get realpath(){return(0,k.promisify)(D.realpath)}async exists($){try{return await e.Promises.access($),!0}catch{return!1}}get readdir(){return l}get readDirsInDir(){return d}get writeFile(){return s}get rm(){return S}get move(){return R}get copy(){return N}}}),define(se[145],oe([0,1,52,12,5,27,28]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.realpathSync=e.realpath=e.realcase=e.realcaseSync=void 0;function I(p){if(k.isLinux)return p;const S=(0,i.dirname)(p);if(p===S)return p;const f=((0,i.basename)(p)||p).toLowerCase();try{const y=(0,T.readdirSync)(S).filter(l=>l.toLowerCase()===f);if(y.length===1){const l=I(S);if(l)return(0,i.join)(l,y[0])}else if(y.length>1){const l=y.indexOf(f);if(l>=0){const m=I(S);if(m)return(0,i.join)(m,y[l])}}}catch{}return null}e.realcaseSync=I;async function P(p){if(k.isLinux)return p;const S=(0,i.dirname)(p);if(p===S)return p;const f=((0,i.basename)(p)||p).toLowerCase();try{const y=(await T.Promises.readdir(S)).filter(l=>l.toLowerCase()===f);if(y.length===1){const l=await P(S);if(l)return(0,i.join)(l,y[0])}else if(y.length>1){const l=y.indexOf(f);if(l>=0){const m=await P(S);if(m)return(0,i.join)(m,y[l])}}}catch{}return null}e.realcase=P;async function w(p){try{return await T.Promises.realpath(p)}catch{const f=b(p);return await T.Promises.access(f,D.constants.R_OK),f}}e.realpath=w;function C(p){try{return D.realpathSync(p)}catch{const f=b(p);return D.accessSync(f,D.constants.R_OK),f}}e.realpathSync=C;function b(p){return(0,L.rtrim)((0,i.normalize)(p),i.sep)}}),define(se[90],oe([0,1,34,12,28]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFirstAvailablePowerShellInstallation=e.enumeratePowerShellInstallations=void 0;const L=/^\d+$/,T=/^Microsoft.PowerShell_.*/,I=/^Microsoft.PowerShellPreview_.*/;var P;(function(h){h[h.x64=0]="x64",h[h.x86=1]="x86",h[h.ARM=2]="ARM"})(P||(P={}));let w;switch(process.arch){case"ia32":case"x32":w=1;break;case"arm":case"arm64":w=2;break;default:w=0;break}let C;process.env.PROCESSOR_ARCHITEW6432?C=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?C=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?C=1:C=0;class b{constructor(d,n,o){this.exePath=d,this.displayName=n,this.knownToExist=o}async exists(){return this.knownToExist===void 0&&(this.knownToExist=await k.SymlinkSupport.existsFile(this.exePath)),this.knownToExist}}function p({useAlternateBitness:h=!1}={}){return h?w===0?process.env["ProgramFiles(x86)"]||null:C===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function S({useAlternateBitness:h=!1,findPreview:d=!1}={}){const n=p({useAlternateBitness:h});if(!n)return null;const o=i.join(n,"PowerShell");if(!await k.SymlinkSupport.existsDirectory(o))return null;let t=-1,s=null;for(const a of await k.Promises.readdir(o)){let v=-1;if(d){const R=a.indexOf("-");if(R<0)continue;const N=a.substring(0,R);if(!L.test(N)||a.substring(R+1)!=="preview")continue;v=parseInt(N,10)}else{if(!L.test(a))continue;v=parseInt(a,10)}if(v<=t)continue;const E=i.join(o,a,"pwsh.exe");!await k.SymlinkSupport.existsFile(E)||(s=E,t=v)}if(!s)return null;const r=n.includes("x86")?" (x86)":"",c=d?" Preview":"";return new b(s,`PowerShell${c}${r}`,!0)}async function f({findPreview:h}={}){if(!process.env.LOCALAPPDATA)return null;const d=i.join(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await k.SymlinkSupport.existsDirectory(d))return null;const{pwshMsixDirRegex:n,pwshMsixName:o}=h?{pwshMsixDirRegex:I,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:T,pwshMsixName:"PowerShell (Store)"};for(const t of await k.Promises.readdir(d))if(n.test(t)){const s=i.join(d,t,"pwsh.exe");return new b(s,o)}return null}function g(){const h=i.join(D.homedir(),".dotnet","tools","pwsh.exe");return new b(h,".NET Core PowerShell Global Tool")}function y(){const h=i.join(process.env.windir,w===1&&C!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new b(h,"Windows PowerShell",!0)}async function*l(){let h=await S();h&&(yield h),h=await S({useAlternateBitness:!0}),h&&(yield h),h=await f(),h&&(yield h),h=g(),h&&(yield h),h=await S({findPreview:!0}),h&&(yield h),h=await f({findPreview:!0}),h&&(yield h),h=await S({useAlternateBitness:!0,findPreview:!0}),h&&(yield h),h=y(),h&&(yield h)}async function*m(){for await(const h of l())await h.exists()&&(yield h)}e.enumeratePowerShellInstallations=m;async function u(){for await(const h of m())return h;return null}e.getFirstAvailablePowerShellInstallation=u}),define(se[91],oe([0,1,12,5,36,87,14,28]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.win32=e.createQueuedSender=e.getWindowsShell=e.TerminateResponseCode=e.Source=void 0,Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return L.Source}}),Object.defineProperty(e,"TerminateResponseCode",{enumerable:!0,get:function(){return L.TerminateResponseCode}});function P(b=k.env){return b.comspec||"cmd.exe"}e.getWindowsShell=P;function w(b){let p=[],S=!1;const f=function(g){if(S){p.push(g);return}(!b.send(g,l=>{if(l&&console.error(l),S=!1,p.length>0){const m=p.slice(0);p=[],m.forEach(u=>f(u))}})||i.isWindows)&&(S=!0)};return{send:f}}e.createQueuedSender=w;var C;(function(b){async function p(S,f,g){if(D.isAbsolute(S))return S;if(f===void 0&&(f=k.cwd()),D.dirname(S)!=="."||(g===void 0&&T.isString(k.env.PATH)&&(g=k.env.PATH.split(D.delimiter)),g===void 0||g.length===0))return D.join(f,S);async function l(m){if(await I.Promises.exists(m)){let u;try{u=await I.Promises.stat(m)}catch(h){h.message.startsWith("EACCES")&&(u=await I.Promises.lstat(m))}return u?!u.isDirectory():!1}return!1}for(const m of g){let u;if(D.isAbsolute(m)?u=D.join(m,S):u=D.join(f,m,S),await l(u))return u;let h=u+".com";if(await l(h)||(h=u+".exe",await l(h)))return h}return D.join(f,S)}b.findExecutable=p})(C=e.win32||(e.win32={}))}),define(se[146],oe([0,1,49,21]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listProcesses=void 0;function k(T){return new Promise((I,P)=>{let w;const C=new Map;function b(S,f,g,y,l){const m=C.get(f);if(S===T||m){const u={name:p(g),cmd:g,pid:S,ppid:f,load:y,mem:l};C.set(S,u),S===T&&(w=u),m&&(m.children||(m.children=[]),m.children.push(u),m.children.length>1&&(m.children=m.children.sort((h,d)=>h.pid-d.pid)))}}function p(S){const f=/--vscode-window-kind=shared-process/,g=/--vscode-window-kind=issue-reporter/,y=/--vscode-window-kind=process-explorer/,l=/--utility-sub-type=network/,m=/--utility-sub-type=node.mojom.NodeService/,u=/--crashes-directory/,h=/\\pipe\\winpty-control/,d=/conhost\.exe/,n=/--type=([a-zA-Z-]+)/;if(u.exec(S))return"electron-crash-reporter";if(h.exec(S))return"winpty-process";if(d.exec(S))return"console-window-host (Windows internal process)";let o=n.exec(S);if(o&&o.length===2){if(o[1]==="renderer")return f.exec(S)?"shared-process":g.exec(S)?"issue-reporter":y.exec(S)?"process-explorer":"window";if(o[1]==="utility"){if(l.exec(S))return"utility-network-service";if(m.exec(S))return"extension-host"}return o[1]}const t=/[a-zA-Z-]+\.js/g;let s="";do o=t.exec(S),o&&(s+=o+" ");while(o);return s&&S.indexOf("node ")<0&&S.indexOf("node.exe")<0?`electron_node ${s}`:S}if(process.platform==="win32"){const S=f=>f.indexOf("\\\\?\\")===0||f.indexOf("\\??\\")===0?f.substr(4):f.indexOf('"\\\\?\\')===0||f.indexOf('"\\??\\')===0?'"'+f.substr(5):f;new Promise((f,g)=>{Z(["windows-process-tree"],f,g)}).then(f=>{f.getProcessList(T,g=>{if(!g){P(new Error(`Root process ${T} not found`));return}f.getProcessCpuUsage(g,y=>{const l=new Map;y.forEach(m=>{const u=S(m.commandLine||"");l.set(m.pid,{name:p(u),cmd:u,pid:m.pid,ppid:m.ppid,load:m.cpu||0,mem:m.memory||0})}),w=l.get(T),w?(l.forEach(m=>{const u=l.get(m.ppid);u&&(u.children||(u.children=[]),u.children.push(m))}),l.forEach(m=>{m.children&&(m.children=m.children.sort((u,h)=>u.pid-h.pid))}),I(w)):P(new Error(`Root process ${T} not found`))})},f.ProcessDataFlag.CommandLine|f.ProcessDataFlag.Memory)})}else{let S=function(){let f=[w];const g=[];for(;f.length;){const l=f.shift();l&&(g.push(l.pid),l.children&&(f=f.concat(l.children)))}let y=JSON.stringify(i.FileAccess.asFileUri("vs/base/node/cpuUsage.sh").fsPath);y+=" "+g.join(" "),(0,D.exec)(y,{},(l,m,u)=>{if(l||u)P(l||new Error(u.toString()));else{const h=m.toString().split(`
`);for(let d=0;d<g.length;d++){const n=C.get(g[d]);n.load=parseFloat(h[d])}if(!w){P(new Error(`Root process ${T} not found`));return}I(w)}})};(0,D.exec)("which ps",{},(f,g,y)=>{if(f||y)if(process.platform!=="linux")P(f||new Error(y.toString()));else{const l=JSON.stringify(i.FileAccess.asFileUri("vs/base/node/ps.sh").fsPath);(0,D.exec)(l,{},(m,u,h)=>{m||h?P(m||new Error(h.toString())):(L(u,b),S())})}else{const l=g.toString().trim(),m="-ax -o pid=,ppid=,pcpu=,pmem=,command=";(0,D.exec)(`${l} ${m}`,{maxBuffer:1e3*1024,env:{LC_NUMERIC:"en_US.UTF-8"}},(u,h,d)=>{u||d&&!d.includes("screen size is bogus")?P(u||new Error(d.toString())):(L(h,b),process.platform==="linux"?S():w?I(w):P(new Error(`Root process ${T} not found`)))})}})}})}e.listProcesses=k;function L(T,I){const P=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/,w=T.toString().split(`
`);for(const C of w){const b=P.exec(C.trim());b&&b.length===6&&I(parseInt(b[1]),parseInt(b[2]),b[5],parseFloat(b[3]),parseFloat(b[4]))}}}),define(se[147],oe([0,1,34,5,90,91]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSystemShellSync=e.getSystemShell=void 0;async function T(S,f){return S===1?i.isWindows?b():L.getWindowsShell(f):w(S,f)}e.getSystemShell=T;function I(S,f){return S===1?i.isWindows?p(f):L.getWindowsShell(f):w(S,f)}e.getSystemShellSync=I;let P=null;function w(S,f){if(i.isLinux&&S===2||i.isMacintosh&&S===3)return"/bin/bash";if(!P){let g;if(i.isWindows)g="/bin/bash";else{if(g=f.SHELL,!g)try{g=(0,D.userInfo)().shell}catch{}g||(g="sh"),g==="/bin/false"&&(g="/bin/bash")}P=g}return P}let C=null;async function b(){return C||(C=(await(0,k.getFirstAvailablePowerShellInstallation)()).exePath),C}function p(S){if(C)return C;const f=i.isWindows&&parseFloat((0,D.release)())>=10,g=S.hasOwnProperty("PROCESSOR_ARCHITEW6432"),y=`${S.windir}\\${g?"Sysnative":"System32"}\\WindowsPowerShell\\v1.0\\powershell.exe`;return f?y:L.getWindowsShell(S)}});var ve=this&&this.__decorate||function(Z,e,D,i){var k=arguments.length,L=k<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,D):i,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(Z,e,D,i);else for(var I=Z.length-1;I>=0;I--)(T=Z[I])&&(L=(k<3?T(L):k>3?T(e,D,L):T(e,D))||L);return k>3&&L&&Object.defineProperty(e,D,L),L};define(se[39],oe([0,1,20,6,17,24,63,9,3,2,67,27,14]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IPCLogger=e.ProxyChannel=e.StaticRouter=e.getNextTickChannel=e.getDelayedChannel=e.IPCClient=e.IPCServer=e.ChannelClient=e.RequestInitiator=e.ChannelServer=void 0;var S;(function(W){W[W.Promise=100]="Promise",W[W.PromiseCancel=101]="PromiseCancel",W[W.EventListen=102]="EventListen",W[W.EventDispose=103]="EventDispose"})(S||(S={}));function f(W){switch(W){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var g;(function(W){W[W.Initialize=200]="Initialize",W[W.PromiseSuccess=201]="PromiseSuccess",W[W.PromiseError=202]="PromiseError",W[W.PromiseErrorObj=203]="PromiseErrorObj",W[W.EventFire=204]="EventFire"})(g||(g={}));function y(W){switch(W){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var l;(function(W){W[W.Uninitialized=0]="Uninitialized",W[W.Idle=1]="Idle"})(l||(l={}));class m{constructor(q){this.buffer=q,this.pos=0}read(q){const G=this.buffer.slice(this.pos,this.pos+q);return this.pos+=G.byteLength,G}}class u{constructor(){this.buffers=[]}get buffer(){return k.VSBuffer.concat(this.buffers)}write(q){this.buffers.push(q)}}var h;(function(W){W[W.Undefined=0]="Undefined",W[W.String=1]="String",W[W.Buffer=2]="Buffer",W[W.VSBuffer=3]="VSBuffer",W[W.Array=4]="Array",W[W.Object=5]="Object"})(h||(h={}));function d(W){const q=k.VSBuffer.alloc(4);return q.writeUInt32BE(W,0),q}function n(W){return W.read(4).readUInt32BE(0)}function o(W){const q=k.VSBuffer.alloc(1);return q.writeUInt8(W,0),q}const t={Undefined:o(h.Undefined),String:o(h.String),Buffer:o(h.Buffer),VSBuffer:o(h.VSBuffer),Array:o(h.Array),Object:o(h.Object)},s=typeof Buffer<"u";function r(W,q){if(typeof q>"u")W.write(t.Undefined);else if(typeof q=="string"){const G=k.VSBuffer.fromString(q);W.write(t.String),W.write(d(G.byteLength)),W.write(G)}else if(s&&Buffer.isBuffer(q)){const G=k.VSBuffer.wrap(q);W.write(t.Buffer),W.write(d(G.byteLength)),W.write(G)}else if(q instanceof k.VSBuffer)W.write(t.VSBuffer),W.write(d(q.byteLength)),W.write(q);else if(Array.isArray(q)){W.write(t.Array),W.write(d(q.length));for(const G of q)r(W,G)}else{const G=k.VSBuffer.fromString(JSON.stringify(q));W.write(t.Object),W.write(d(G.byteLength)),W.write(G)}}function c(W){switch(W.read(1).readUInt8(0)){case h.Undefined:return;case h.String:return W.read(n(W)).toString();case h.Buffer:return W.read(n(W)).buffer;case h.VSBuffer:return W.read(n(W));case h.Array:{const G=n(W),ee=[];for(let ae=0;ae<G;ae++)ee.push(c(W));return ee}case h.Object:return JSON.parse(W.read(n(W)).toString())}}class a{constructor(q,G,ee=null,ae=1e3){this.protocol=q,this.ctx=G,this.logger=ee,this.timeoutDelay=ae,this.channels=new Map,this.activeRequests=new Map,this.pendingRequests=new Map,this.protocolListener=this.protocol.onMessage(K=>this.onRawMessage(K)),this.sendResponse({type:200})}registerChannel(q,G){this.channels.set(q,G),setTimeout(()=>this.flushPendingRequests(q),0)}sendResponse(q){switch(q.type){case 200:{const G=this.send([q.type]);this.logger?.logOutgoing(G,0,1,y(q.type));return}case 201:case 202:case 204:case 203:{const G=this.send([q.type,q.id],q.data);this.logger?.logOutgoing(G,q.id,1,y(q.type),q.data);return}}}send(q,G=void 0){const ee=new u;return r(ee,q),r(ee,G),this.sendBuffer(ee.buffer)}sendBuffer(q){try{return this.protocol.send(q),q.byteLength}catch{return 0}}onRawMessage(q){const G=new m(q),ee=c(G),ae=c(G),K=ee[0];switch(K){case 100:return this.logger?.logIncoming(q.byteLength,ee[1],1,`${f(K)}: ${ee[2]}.${ee[3]}`,ae),this.onPromise({type:K,id:ee[1],channelName:ee[2],name:ee[3],arg:ae});case 102:return this.logger?.logIncoming(q.byteLength,ee[1],1,`${f(K)}: ${ee[2]}.${ee[3]}`,ae),this.onEventListen({type:K,id:ee[1],channelName:ee[2],name:ee[3],arg:ae});case 101:return this.logger?.logIncoming(q.byteLength,ee[1],1,`${f(K)}`),this.disposeActiveRequest({type:K,id:ee[1]});case 103:return this.logger?.logIncoming(q.byteLength,ee[1],1,`${f(K)}`),this.disposeActiveRequest({type:K,id:ee[1]})}}onPromise(q){const G=this.channels.get(q.channelName);if(!G){this.collectPendingRequest(q);return}const ee=new L.CancellationTokenSource;let ae;try{ae=G.call(this.ctx,q.name,q.arg,ee.token)}catch(_){ae=Promise.reject(_)}const K=q.id;ae.then(_=>{this.sendResponse({id:K,data:_,type:201}),this.activeRequests.delete(q.id)},_=>{_ instanceof Error?this.sendResponse({id:K,data:{message:_.message,name:_.name,stack:_.stack?_.stack.split?_.stack.split(`
`):_.stack:void 0},type:202}):this.sendResponse({id:K,data:_,type:203}),this.activeRequests.delete(q.id)});const X=(0,w.toDisposable)(()=>ee.cancel());this.activeRequests.set(q.id,X)}onEventListen(q){const G=this.channels.get(q.channelName);if(!G){this.collectPendingRequest(q);return}const ee=q.id,K=G.listen(this.ctx,q.name,q.arg)(X=>this.sendResponse({id:ee,data:X,type:204}));this.activeRequests.set(q.id,K)}disposeActiveRequest(q){const G=this.activeRequests.get(q.id);G&&(G.dispose(),this.activeRequests.delete(q.id))}collectPendingRequest(q){let G=this.pendingRequests.get(q.channelName);G||(G=[],this.pendingRequests.set(q.channelName,G));const ee=setTimeout(()=>{console.error(`Unknown channel: ${q.channelName}`),q.type===100&&this.sendResponse({id:q.id,data:{name:"Unknown channel",message:`Channel name '${q.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);G.push({request:q,timeoutTimer:ee})}flushPendingRequests(q){const G=this.pendingRequests.get(q);if(G){for(const ee of G)switch(clearTimeout(ee.timeoutTimer),ee.request.type){case 100:this.onPromise(ee.request);break;case 102:this.onEventListen(ee.request);break}this.pendingRequests.delete(q)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),(0,w.dispose)(this.activeRequests.values()),this.activeRequests.clear()}}e.ChannelServer=a;var v;(function(W){W[W.LocalSide=0]="LocalSide",W[W.OtherSide=1]="OtherSide"})(v=e.RequestInitiator||(e.RequestInitiator={}));class E{constructor(q,G=null){this.protocol=q,this.isDisposed=!1,this.state=l.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new P.Emitter,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(ee=>this.onBuffer(ee)),this.logger=G}getChannel(q){const G=this;return{call(ee,ae,K){return G.isDisposed?Promise.reject(new I.CancellationError):G.requestPromise(q,ee,ae,K)},listen(ee,ae){return G.isDisposed?P.Event.None:G.requestEvent(q,ee,ae)}}}requestPromise(q,G,ee,ae=L.CancellationToken.None){const K=this.lastRequestId++,_={id:K,type:100,channelName:q,name:G,arg:ee};if(ae.isCancellationRequested)return Promise.reject(new I.CancellationError);let U;return new Promise((j,J)=>{if(ae.isCancellationRequested)return J(new I.CancellationError);const re=()=>{const le=ue=>{switch(ue.type){case 201:this.handlers.delete(K),j(ue.data);break;case 202:{this.handlers.delete(K);const Se=new Error(ue.data.message);Se.stack=Array.isArray(ue.data.stack)?ue.data.stack.join(`
`):ue.data.stack,Se.name=ue.data.name,J(Se);break}case 203:this.handlers.delete(K),J(ue.data);break}};this.handlers.set(K,le),this.sendRequest(_)};let Y=null;this.state===l.Idle?re():(Y=(0,i.createCancelablePromise)(le=>this.whenInitialized()),Y.then(()=>{Y=null,re()}));const ie=()=>{Y?(Y.cancel(),Y=null):this.sendRequest({id:K,type:101}),J(new I.CancellationError)},ne=ae.onCancellationRequested(ie);U=(0,w.combinedDisposable)((0,w.toDisposable)(ie),ne),this.activeRequests.add(U)}).finally(()=>{this.activeRequests.delete(U)})}requestEvent(q,G,ee){const ae=this.lastRequestId++,X={id:ae,type:102,channelName:q,name:G,arg:ee};let _=null;const U=new P.Emitter({onWillAddFirstListener:()=>{_=(0,i.createCancelablePromise)(j=>this.whenInitialized()),_.then(()=>{_=null,this.activeRequests.add(U),this.sendRequest(X)})},onDidRemoveLastListener:()=>{_?(_.cancel(),_=null):(this.activeRequests.delete(U),this.sendRequest({id:ae,type:103}))}}),x=j=>U.fire(j.data);return this.handlers.set(ae,x),U.event}sendRequest(q){switch(q.type){case 100:case 102:{const G=this.send([q.type,q.id,q.channelName,q.name],q.arg);this.logger?.logOutgoing(G,q.id,0,`${f(q.type)}: ${q.channelName}.${q.name}`,q.arg);return}case 101:case 103:{const G=this.send([q.type,q.id]);this.logger?.logOutgoing(G,q.id,0,f(q.type));return}}}send(q,G=void 0){const ee=new u;return r(ee,q),r(ee,G),this.sendBuffer(ee.buffer)}sendBuffer(q){try{return this.protocol.send(q),q.byteLength}catch{return 0}}onBuffer(q){const G=new m(q),ee=c(G),ae=c(G),K=ee[0];switch(K){case 200:return this.logger?.logIncoming(q.byteLength,0,0,y(K)),this.onResponse({type:ee[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(q.byteLength,ee[1],0,y(K),ae),this.onResponse({type:ee[0],id:ee[1],data:ae})}}onResponse(q){if(q.type===200){this.state=l.Idle,this._onDidInitialize.fire();return}this.handlers.get(q.id)?.(q)}get onDidInitializePromise(){return P.Event.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===l.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),(0,w.dispose)(this.activeRequests.values()),this.activeRequests.clear()}}ve([T.memoize],E.prototype,"onDidInitializePromise",null),e.ChannelClient=E;class R{get connections(){const q=[];return this._connections.forEach(G=>q.push(G)),q}constructor(q){this.channels=new Map,this._connections=new Set,this._onDidAddConnection=new P.Emitter,this.onDidAddConnection=this._onDidAddConnection.event,this._onDidRemoveConnection=new P.Emitter,this.onDidRemoveConnection=this._onDidRemoveConnection.event,q(({protocol:G,onDidClientDisconnect:ee})=>{P.Event.once(G.onMessage)(K=>{const X=new m(K),_=c(X),U=new a(G,_),x=new E(G);this.channels.forEach((J,re)=>U.registerChannel(re,J));const j={channelServer:U,channelClient:x,ctx:_};this._connections.add(j),this._onDidAddConnection.fire(j),ee(()=>{U.dispose(),x.dispose(),this._connections.delete(j),this._onDidRemoveConnection.fire(j)})})})}getChannel(q,G){const ee=this;return{call(ae,K,X){let _;if((0,p.isFunction)(G)){const x=(0,D.getRandomElement)(ee.connections.filter(G));_=x?Promise.resolve(x):P.Event.toPromise(P.Event.filter(ee.onDidAddConnection,G))}else _=G.routeCall(ee,ae,K);const U=_.then(x=>x.channelClient.getChannel(q));return O(U).call(ae,K,X)},listen(ae,K){if((0,p.isFunction)(G))return ee.getMulticastEvent(q,G,ae,K);const X=G.routeEvent(ee,ae,K).then(_=>_.channelClient.getChannel(q));return O(X).listen(ae,K)}}}getMulticastEvent(q,G,ee,ae){const K=this;let X=new w.DisposableStore;const _=new P.Emitter({onWillAddFirstListener:()=>{X=new w.DisposableStore;const U=new P.EventMultiplexer,x=new Map,j=re=>{const ie=re.channelClient.getChannel(q).listen(ee,ae),ne=U.add(ie);x.set(re,ne)},J=re=>{const Y=x.get(re);!Y||(Y.dispose(),x.delete(re))};K.connections.filter(G).forEach(j),P.Event.filter(K.onDidAddConnection,G)(j,void 0,X),K.onDidRemoveConnection(J,void 0,X),U.event(_.fire,_,X),X.add(U)},onDidRemoveLastListener:()=>{X.dispose()}});return _.event}registerChannel(q,G){this.channels.set(q,G),this._connections.forEach(ee=>{ee.channelServer.registerChannel(q,G)})}dispose(){this.channels.clear(),this._connections.clear(),this._onDidAddConnection.dispose(),this._onDidRemoveConnection.dispose()}}e.IPCServer=R;class N{constructor(q,G,ee=null){const ae=new u;r(ae,G),q.send(ae.buffer),this.channelClient=new E(q,ee),this.channelServer=new a(q,G,ee)}getChannel(q){return this.channelClient.getChannel(q)}registerChannel(q,G){this.channelServer.registerChannel(q,G)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}e.IPCClient=N;function O(W){return{call(q,G,ee){return W.then(ae=>ae.call(q,G,ee))},listen(q,G){const ee=new P.Relay;return W.then(ae=>ee.input=ae.listen(q,G)),ee.event}}}e.getDelayedChannel=O;function z(W){let q=!1;return{call(G,ee,ae){return q?W.call(G,ee,ae):(0,i.timeout)(0).then(()=>q=!0).then(()=>W.call(G,ee,ae))},listen(G,ee){if(q)return W.listen(G,ee);const ae=new P.Relay;return(0,i.timeout)(0).then(()=>q=!0).then(()=>ae.input=W.listen(G,ee)),ae.event}}}e.getNextTickChannel=z;class F{constructor(q){this.fn=q}routeCall(q){return this.route(q)}routeEvent(q){return this.route(q)}async route(q){for(const G of q.connections)if(await Promise.resolve(this.fn(G.ctx)))return Promise.resolve(G);return await P.Event.toPromise(q.onDidAddConnection),await this.route(q)}}e.StaticRouter=F;var A;(function(W){function q(K,X){const _=K,U=X&&X.disableMarshalling,x=new Map;for(const j in _)ee(j)&&x.set(j,P.Event.buffer(_[j],!0));return new class{listen(j,J,re){const Y=x.get(J);if(Y)return Y;if(ae(J)){const ie=_[J];if(typeof ie=="function")return ie.call(_,re)}throw new Error(`Event not found: ${J}`)}call(j,J,re){const Y=_[J];if(typeof Y=="function"){if(!U&&Array.isArray(re))for(let ie=0;ie<re.length;ie++)re[ie]=(0,C.revive)(re[ie]);return Y.apply(_,re)}throw new Error(`Method not found: ${J}`)}}}W.fromService=q;function G(K,X){const _=X&&X.disableMarshalling;return new Proxy({},{get(U,x){if(typeof x=="string")return X?.properties?.has(x)?X.properties.get(x):ae(x)?function(j){return K.listen(x,j)}:ee(x)?K.listen(x):async function(...j){let J;X&&!(0,p.isUndefinedOrNull)(X.context)?J=[X.context,...j]:J=j;const re=await K.call(x,J);return _?re:(0,C.revive)(re)};throw new Error(`Property not found: ${String(x)}`)}})}W.toService=G;function ee(K){return K[0]==="o"&&K[1]==="n"&&b.isUpperAsciiLetter(K.charCodeAt(2))}function ae(K){return/^onDynamic/.test(K)&&b.isUpperAsciiLetter(K.charCodeAt(9))}})(A=e.ProxyChannel||(e.ProxyChannel={}));const M=[["#2977B1","#FC802D","#34A13A","#D3282F","#9366BA"],["#8B564C","#E177C0","#7F7F7F","#BBBE3D","#2EBECD"]];function $(W){if(Array.isArray(W))return W;if(W&&typeof W=="object"&&typeof W.toString=="function"){const q=W.toString();if(q!=="[object Object]")return q}return W}function V(W){return Array.isArray(W)?W.map($):$(W)}function B(W,q,G,ee,ae,K,X){X=V(X);const _=M[ae],U=_[ee%_.length];let x=[`%c[${W}]%c[${String(q).padStart(7," ")}]%c[len: ${String(G).padStart(5," ")}]%c${String(ee).padStart(5," ")} - ${K}`,"color: darkgreen","color: grey","color: grey",`color: ${U}`];/\($/.test(K)?(x=x.concat(X),x.push(")")):x.push(X),console.log.apply(console,x)}class Q{constructor(q,G){this._outgoingPrefix=q,this._incomingPrefix=G,this._totalIncoming=0,this._totalOutgoing=0}logOutgoing(q,G,ee,ae,K){this._totalOutgoing+=q,B(this._outgoingPrefix,this._totalOutgoing,q,G,ee,ae,K)}logIncoming(q,G,ee,ae,K){this._totalIncoming+=q,B(this._incomingPrefix,this._totalIncoming,q,G,ee,ae,K)}}e.IPCLogger=Q}),define(se[148],oe([0,1,17,3,39]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Client=e.Protocol=void 0;class L{constructor(P){this.port=P,this.onMessage=i.Event.fromDOMEventEmitter(this.port,"message",w=>D.VSBuffer.wrap(w.data)),P.start()}send(P){this.port.postMessage(P.buffer)}disconnect(){this.port.close()}}e.Protocol=L;class T extends k.IPCClient{constructor(P,w){const C=new L(P);super(C,w),this.protocol=C}dispose(){this.protocol.disconnect()}}e.Client=T}),define(se[92],oe([0,1,17,3,2,39]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PersistentProtocol=e.BufferedEmitter=e.Client=e.Protocol=e.ProtocolConstants=e.ChunkStream=e.SocketCloseEventType=e.SocketDiagnostics=e.SocketDiagnosticsEventType=void 0;var T;(function(s){s.Created="created",s.Read="read",s.Write="write",s.Open="open",s.Error="error",s.Close="close",s.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",s.NodeEndReceived="nodeEndReceived",s.NodeEndSent="nodeEndSent",s.NodeDrainBegin="nodeDrainBegin",s.NodeDrainEnd="nodeDrainEnd",s.zlibInflateError="zlibInflateError",s.zlibInflateData="zlibInflateData",s.zlibInflateInitialWrite="zlibInflateInitialWrite",s.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",s.zlibInflateWrite="zlibInflateWrite",s.zlibInflateFlushFired="zlibInflateFlushFired",s.zlibDeflateError="zlibDeflateError",s.zlibDeflateData="zlibDeflateData",s.zlibDeflateWrite="zlibDeflateWrite",s.zlibDeflateFlushFired="zlibDeflateFlushFired",s.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",s.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",s.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",s.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",s.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",s.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",s.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",s.ProtocolHeaderRead="protocolHeaderRead",s.ProtocolMessageRead="protocolMessageRead",s.ProtocolHeaderWrite="protocolHeaderWrite",s.ProtocolMessageWrite="protocolMessageWrite",s.ProtocolWrite="protocolWrite"})(T=e.SocketDiagnosticsEventType||(e.SocketDiagnosticsEventType={}));var I;(function(s){s.enableDiagnostics=!1,s.records=[];const r=new WeakMap;let c=0;function a(E,R){if(!r.has(E)){const N=String(++c);r.set(E,N)}return r.get(E)}function v(E,R,N,O){if(!s.enableDiagnostics)return;const z=a(E,R);if(O instanceof D.VSBuffer||O instanceof Uint8Array||O instanceof ArrayBuffer||ArrayBuffer.isView(O)){const F=D.VSBuffer.alloc(O.byteLength);F.set(O),s.records.push({timestamp:Date.now(),id:z,label:R,type:N,buff:F})}else s.records.push({timestamp:Date.now(),id:z,label:R,type:N,data:O})}s.traceSocketEvent=v})(I=e.SocketDiagnostics||(e.SocketDiagnostics={}));var P;(function(s){s[s.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",s[s.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(P=e.SocketCloseEventType||(e.SocketCloseEventType={}));let w=null;function C(){return w||(w=D.VSBuffer.alloc(0)),w}class b{get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(r){this._chunks.push(r),this._totalLength+=r.byteLength}read(r){return this._read(r,!0)}peek(r){return this._read(r,!1)}_read(r,c){if(r===0)return C();if(r>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===r){const R=this._chunks[0];return c&&(this._chunks.shift(),this._totalLength-=r),R}if(this._chunks[0].byteLength>r){const R=this._chunks[0].slice(0,r);return c&&(this._chunks[0]=this._chunks[0].slice(r),this._totalLength-=r),R}const a=D.VSBuffer.alloc(r);let v=0,E=0;for(;r>0;){const R=this._chunks[E];if(R.byteLength>r){const N=R.slice(0,r);a.set(N,v),v+=r,c&&(this._chunks[E]=R.slice(r),this._totalLength-=r),r-=r}else a.set(R,v),v+=R.byteLength,c?(this._chunks.shift(),this._totalLength-=R.byteLength):E++,r-=R.byteLength}return a}}e.ChunkStream=b;var p;(function(s){s[s.None=0]="None",s[s.Regular=1]="Regular",s[s.Control=2]="Control",s[s.Ack=3]="Ack",s[s.Disconnect=5]="Disconnect",s[s.ReplayRequest=6]="ReplayRequest",s[s.Pause=7]="Pause",s[s.Resume=8]="Resume",s[s.KeepAlive=9]="KeepAlive"})(p||(p={}));function S(s){switch(s){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var f;(function(s){s[s.HeaderLength=13]="HeaderLength",s[s.AcknowledgeTime=2e3]="AcknowledgeTime",s[s.TimeoutTime=2e4]="TimeoutTime",s[s.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",s[s.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime"})(f=e.ProtocolConstants||(e.ProtocolConstants={}));class g{constructor(r,c,a,v){this.type=r,this.id=c,this.ack=a,this.data=v,this.writtenTime=0}get size(){return this.data.byteLength}}class y extends k.Disposable{constructor(r){super(),this._onMessage=this._register(new i.Emitter),this.onMessage=this._onMessage.event,this._state={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this._socket=r,this._isDisposed=!1,this._incomingData=new b,this._register(this._socket.onData(c=>this.acceptChunk(c))),this.lastReadTime=Date.now()}acceptChunk(r){if(!(!r||r.byteLength===0))for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(r);this._incomingData.byteLength>=this._state.readLen;){const c=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=c.readUInt32BE(9),this._state.messageType=c.readUInt8(0),this._state.id=c.readUInt32BE(1),this._state.ack=c.readUInt32BE(5),this._socket.traceSocketEvent("protocolHeaderRead",{messageType:S(this._state.messageType),id:this._state.id,ack:this._state.ack,messageSize:this._state.readLen});else{const a=this._state.messageType,v=this._state.id,E=this._state.ack;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._socket.traceSocketEvent("protocolMessageRead",c),this._onMessage.fire(new g(a,v,E,c)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class l{constructor(r){this._writeNowTimeout=null,this._isDisposed=!1,this._isPaused=!1,this._socket=r,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this._isDisposed=!0}drain(){return this.flush(),this._socket.drain()}flush(){this._writeNow()}pause(){this._isPaused=!0}resume(){this._isPaused=!1,this._scheduleWriting()}write(r){if(this._isDisposed)return;r.writtenTime=Date.now(),this.lastWriteTime=Date.now();const c=D.VSBuffer.alloc(13);c.writeUInt8(r.type,0),c.writeUInt32BE(r.id,1),c.writeUInt32BE(r.ack,5),c.writeUInt32BE(r.data.byteLength,9),this._socket.traceSocketEvent("protocolHeaderWrite",{messageType:S(r.type),id:r.id,ack:r.ack,messageSize:r.data.byteLength}),this._socket.traceSocketEvent("protocolMessageWrite",r.data),this._writeSoon(c,r.data)}_bufferAdd(r,c){const a=this._totalLength===0;return this._data.push(r,c),this._totalLength+=r.byteLength+c.byteLength,a}_bufferTake(){const r=D.VSBuffer.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,r}_writeSoon(r,c){this._bufferAdd(r,c)&&this._scheduleWriting()}_scheduleWriting(){this._writeNowTimeout||(this._writeNowTimeout=setTimeout(()=>{this._writeNowTimeout=null,this._writeNow()}))}_writeNow(){if(this._totalLength===0||this._isPaused)return;const r=this._bufferTake();this._socket.traceSocketEvent("protocolWrite",{byteLength:r.byteLength}),this._socket.write(r)}}class m extends k.Disposable{constructor(r){super(),this._onMessage=new i.Emitter,this.onMessage=this._onMessage.event,this._onDidDispose=new i.Emitter,this.onDidDispose=this._onDidDispose.event,this._socket=r,this._socketWriter=this._register(new l(this._socket)),this._socketReader=this._register(new y(this._socket)),this._register(this._socketReader.onMessage(c=>{c.type===1&&this._onMessage.fire(c.data)})),this._register(this._socket.onClose(()=>this._onDidDispose.fire()))}drain(){return this._socketWriter.drain()}getSocket(){return this._socket}sendDisconnect(){}send(r){this._socketWriter.write(new g(1,0,0,r))}}e.Protocol=m;class u extends L.IPCClient{static fromSocket(r,c){return new u(new m(r),c)}get onDidDispose(){return this.protocol.onDidDispose}constructor(r,c,a=null){super(r,c,a),this.protocol=r}dispose(){super.dispose();const r=this.protocol.getSocket();this.protocol.sendDisconnect(),this.protocol.dispose(),r.end()}}e.Client=u;class h{constructor(){this._hasListeners=!1,this._isDeliveringMessages=!1,this._bufferedMessages=[],this._emitter=new i.Emitter({onWillAddFirstListener:()=>{this._hasListeners=!0,queueMicrotask(()=>this._deliverMessages())},onDidRemoveLastListener:()=>{this._hasListeners=!1}}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(r){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(r):this._emitter.fire(r):this._bufferedMessages.push(r)}flushBuffer(){this._bufferedMessages=[]}}e.BufferedEmitter=h;class d{constructor(r){this.data=r,this.next=null}}class n{constructor(){this._first=null,this._last=null}length(){let r=0,c=this._first;for(;c;)c=c.next,r++;return r}peek(){return this._first?this._first.data:null}toArray(){const r=[];let c=0,a=this._first;for(;a;)r[c++]=a.data,a=a.next;return r}pop(){if(!!this._first){if(this._first===this._last){this._first=null,this._last=null;return}this._first=this._first.next}}push(r){const c=new d(r);if(!this._first){this._first=c,this._last=c;return}this._last.next=c,this._last=c}}class o{static getInstance(){return o._INSTANCE||(o._INSTANCE=new o),o._INSTANCE}constructor(){this.lastRuns=[];const r=Date.now();for(let c=0;c<o._HISTORY_LENGTH;c++)this.lastRuns[c]=r-1e3*c;setInterval(()=>{for(let c=o._HISTORY_LENGTH;c>=1;c--)this.lastRuns[c]=this.lastRuns[c-1];this.lastRuns[0]=Date.now()},1e3)}load(){const r=Date.now(),c=(1+o._HISTORY_LENGTH)*1e3;let a=0;for(let v=0;v<o._HISTORY_LENGTH;v++)r-this.lastRuns[v]<=c&&a++;return 1-a/o._HISTORY_LENGTH}hasHighLoad(){return this.load()>=.5}}o._HISTORY_LENGTH=10,o._INSTANCE=null;class t{get unacknowledgedCount(){return this._outgoingMsgId-this._outgoingAckId}constructor(r,c=null,a=o.getInstance()){this._onControlMessage=new h,this.onControlMessage=this._onControlMessage.event,this._onMessage=new h,this.onMessage=this._onMessage.event,this._onDidDispose=new h,this.onDidDispose=this._onDidDispose.event,this._onSocketClose=new h,this.onSocketClose=this._onSocketClose.event,this._onSocketTimeout=new h,this.onSocketTimeout=this._onSocketTimeout.event,this._loadEstimator=a,this._isReconnecting=!1,this._outgoingUnackMsg=new n,this._outgoingMsgId=0,this._outgoingAckId=0,this._outgoingAckTimeout=null,this._incomingMsgId=0,this._incomingAckId=0,this._incomingMsgLastTime=0,this._incomingAckTimeout=null,this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socketDisposables=[],this._socket=r,this._socketWriter=new l(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new y(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(v=>this._receiveMessage(v))),this._socketDisposables.push(this._socket.onClose(v=>this._onSocketClose.fire(v))),c&&this._socketReader.acceptChunk(c),this._keepAliveInterval=setInterval(()=>{this._sendKeepAlive()},5e3)}dispose(){this._outgoingAckTimeout&&(clearTimeout(this._outgoingAckTimeout),this._outgoingAckTimeout=null),this._incomingAckTimeout&&(clearTimeout(this._incomingAckTimeout),this._incomingAckTimeout=null),this._keepAliveInterval&&(clearInterval(this._keepAliveInterval),this._keepAliveInterval=null),this._socketDisposables=(0,k.dispose)(this._socketDisposables)}drain(){return this._socketWriter.drain()}sendDisconnect(){const r=new g(5,0,0,C());this._socketWriter.write(r),this._socketWriter.flush()}sendPause(){const r=new g(7,0,0,C());this._socketWriter.write(r)}sendResume(){const r=new g(8,0,0,C());this._socketWriter.write(r)}pauseSocketWriting(){this._socketWriter.pause()}getSocket(){return this._socket}getMillisSinceLastIncomingData(){return Date.now()-this._socketReader.lastReadTime}beginAcceptReconnection(r,c){this._isReconnecting=!0,this._socketDisposables=(0,k.dispose)(this._socketDisposables),this._onControlMessage.flushBuffer(),this._onSocketClose.flushBuffer(),this._onSocketTimeout.flushBuffer(),this._socket.dispose(),this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socket=r,this._socketWriter=new l(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new y(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(a=>this._receiveMessage(a))),this._socketDisposables.push(this._socket.onClose(a=>this._onSocketClose.fire(a))),this._socketReader.acceptChunk(c)}endAcceptReconnection(){this._isReconnecting=!1,this._incomingAckId=this._incomingMsgId;const r=new g(3,0,this._incomingAckId,C());this._socketWriter.write(r);const c=this._outgoingUnackMsg.toArray();for(let a=0,v=c.length;a<v;a++)this._socketWriter.write(c[a]);this._recvAckCheck()}acceptDisconnect(){this._onDidDispose.fire()}_receiveMessage(r){if(r.ack>this._outgoingAckId){this._outgoingAckId=r.ack;do{const c=this._outgoingUnackMsg.peek();if(c&&c.id<=r.ack)this._outgoingUnackMsg.pop();else break}while(!0)}switch(r.type){case 0:break;case 1:{if(r.id>this._incomingMsgId)if(r.id!==this._incomingMsgId+1){const c=Date.now();c-this._lastReplayRequestTime>1e4&&(this._lastReplayRequestTime=c,this._socketWriter.write(new g(6,0,0,C())))}else this._incomingMsgId=r.id,this._incomingMsgLastTime=Date.now(),this._sendAckCheck(),this._onMessage.fire(r.data);break}case 2:{this._onControlMessage.fire(r.data);break}case 3:break;case 5:{this._onDidDispose.fire();break}case 6:{const c=this._outgoingUnackMsg.toArray();for(let a=0,v=c.length;a<v;a++)this._socketWriter.write(c[a]);this._recvAckCheck();break}case 7:{this._socketWriter.pause();break}case 8:{this._socketWriter.resume();break}case 9:break}}readEntireBuffer(){return this._socketReader.readEntireBuffer()}flush(){this._socketWriter.flush()}send(r){const c=++this._outgoingMsgId;this._incomingAckId=this._incomingMsgId;const a=new g(1,c,this._incomingAckId,r);this._outgoingUnackMsg.push(a),this._isReconnecting||(this._socketWriter.write(a),this._recvAckCheck())}sendControl(r){const c=new g(2,0,0,r);this._socketWriter.write(c)}_sendAckCheck(){if(this._incomingMsgId<=this._incomingAckId||this._incomingAckTimeout)return;const r=Date.now()-this._incomingMsgLastTime;if(r>=2e3){this._sendAck();return}this._incomingAckTimeout=setTimeout(()=>{this._incomingAckTimeout=null,this._sendAckCheck()},2e3-r+5)}_recvAckCheck(){if(this._outgoingMsgId<=this._outgoingAckId||this._outgoingAckTimeout||this._isReconnecting)return;const r=this._outgoingUnackMsg.peek(),c=Date.now()-r.writtenTime,a=Date.now()-this._socketReader.lastReadTime,v=Date.now()-this._lastSocketTimeoutTime;if(c>=2e4&&a>=2e4&&v>=2e4&&!this._loadEstimator.hasHighLoad()){this._lastSocketTimeoutTime=Date.now(),this._onSocketTimeout.fire({unacknowledgedMsgCount:this._outgoingUnackMsg.length(),timeSinceOldestUnacknowledgedMsg:c,timeSinceLastReceivedSomeData:a});return}const E=Math.max(2e4-c,2e4-a,2e4-v,500);this._outgoingAckTimeout=setTimeout(()=>{this._outgoingAckTimeout=null,this._recvAckCheck()},E)}_sendAck(){if(this._incomingMsgId<=this._incomingAckId)return;this._incomingAckId=this._incomingMsgId;const r=new g(3,0,this._incomingAckId,C());this._socketWriter.write(r)}_sendKeepAlive(){const r=new g(9,0,0,C());this._socketWriter.write(r)}}e.PersistentProtocol=t}),define(se[149],oe([0,1,93,3,39,148]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Server=void 0;class T extends k.IPCServer{static getOnDidClientConnect(){const P=i.Event.fromNodeEventEmitter(D.ipcRenderer,"vscode:createMessageChannel",(w,C)=>C);return i.Event.map(P,w=>{const{port1:C,port2:b}=new MessageChannel,S={protocol:new L.Protocol(C),onDidClientDisconnect:i.Event.fromDOMEventEmitter(C,"close")};return D.ipcRenderer.postMessage("vscode:createMessageChannelResult",w,[b]),S})}constructor(){super(T.getOnDidClientConnect())}}e.Server=T}),define(se[68],oe([0,1,49,6,17,24,142,9,3,2,32,91,87,39]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Client=e.Server=void 0;class f extends S.ChannelServer{constructor(l){super({send:m=>{try{process.send?.(m.buffer.toString("base64"))}catch{}},onMessage:P.Event.fromNodeEventEmitter(process,"message",m=>k.VSBuffer.wrap(Buffer.from(m,"base64")))},l),process.once("disconnect",()=>this.dispose())}}e.Server=f;class g{constructor(l,m){this.modulePath=l,this.options=m,this.activeRequests=new Set,this.channels=new Map,this._onDidProcessExit=new P.Emitter,this.onDidProcessExit=this._onDidProcessExit.event;const u=m&&m.timeout?m.timeout:6e4;this.disposeDelayer=new i.Delayer(u),this.child=null,this._client=null}getChannel(l){const m=this;return{call(u,h,d){return m.requestPromise(l,u,h,d)},listen(u,h){return m.requestEvent(l,u,h)}}}requestPromise(l,m,u,h=L.CancellationToken.None){if(!this.disposeDelayer)return Promise.reject(new Error("disposed"));if(h.isCancellationRequested)return Promise.reject(I.canceled());this.disposeDelayer.cancel();const d=this.getCachedChannel(l),n=(0,i.createCancelablePromise)(s=>d.call(m,u,s)),o=h.onCancellationRequested(()=>n.cancel()),t=(0,w.toDisposable)(()=>n.cancel());return this.activeRequests.add(t),n.finally(()=>{o.dispose(),this.activeRequests.delete(t),this.activeRequests.size===0&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}),n}requestEvent(l,m,u){if(!this.disposeDelayer)return P.Event.None;this.disposeDelayer.cancel();let h;const d=new P.Emitter({onWillAddFirstListener:()=>{h=this.getCachedChannel(l).listen(m,u)(d.fire,d),this.activeRequests.add(h)},onDidRemoveLastListener:()=>{this.activeRequests.delete(h),h.dispose(),this.activeRequests.size===0&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}});return d.event}get client(){if(!this._client){const l=this.options&&this.options.args?this.options.args:[],m=Object.create(null);m.env={...(0,C.deepClone)(process.env),VSCODE_PARENT_PID:String(process.pid)},this.options&&this.options.env&&(m.env={...m.env,...this.options.env}),this.options&&this.options.freshExecArgv&&(m.execArgv=[]),this.options&&typeof this.options.debug=="number"&&(m.execArgv=["--nolazy","--inspect="+this.options.debug]),this.options&&typeof this.options.debugBrk=="number"&&(m.execArgv=["--nolazy","--inspect-brk="+this.options.debugBrk]),m.execArgv===void 0&&(m.execArgv=process.execArgv.filter(r=>!/^--inspect(-brk)?=/.test(r))),(0,p.removeDangerousEnvVariables)(m.env),this.child=(0,D.fork)(this.modulePath,l,m);const u=new P.Emitter;P.Event.fromNodeEventEmitter(this.child,"message",r=>r)(r=>{if((0,T.isRemoteConsoleLog)(r)){(0,T.log)(r,`IPC Library: ${this.options.serverName}`);return}u.fire(k.VSBuffer.wrap(Buffer.from(r,"base64")))});const d=this.options.useQueue?(0,b.createQueuedSender)(this.child):this.child,n=r=>this.child&&this.child.connected&&d.send(r.buffer.toString("base64")),o=u.event,t={send:n,onMessage:o};this._client=new S.ChannelClient(t);const s=()=>this.disposeClient();process.once("exit",s),this.child.on("error",r=>console.warn('IPC "'+this.options.serverName+'" errored with '+r)),this.child.on("exit",(r,c)=>{process.removeListener("exit",s),this.activeRequests.forEach(a=>(0,w.dispose)(a)),this.activeRequests.clear(),r!==0&&c!=="SIGTERM"&&console.warn('IPC "'+this.options.serverName+'" crashed with exit code '+r+" and signal "+c),this.disposeDelayer?.cancel(),this.disposeClient(),this._onDidProcessExit.fire({code:r,signal:c})})}return this._client}getCachedChannel(l){let m=this.channels.get(l);return m||(m=this.client.getChannel(l),this.channels.set(l,m)),m}disposeClient(){this._client&&(this.child&&(this.child.kill(),this.child=null),this._client=null,this.channels.clear())}dispose(){this._onDidProcessExit.dispose(),this.disposeDelayer?.cancel(),this.disposeDelayer=void 0,this.disposeClient(),this.activeRequests.clear()}}e.Client=g}),define(se[150],oe([0,1,17,9,3,2,12,5,31,39,92]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.serve=e.Server=e.createStaticIPCHandle=e.createRandomIPCHandle=e.XDG_RUNTIME_DIR=e.WebSocketNodeSocket=e.NodeSocket=void 0;function b(){return{crypto:globalThis._VSCODE_NODE_MODULES.crypto,zlib:globalThis._VSCODE_NODE_MODULES.zlib,net:globalThis._VSCODE_NODE_MODULES.net,os:globalThis._VSCODE_NODE_MODULES.os}}class p{traceSocketEvent(a,v){C.SocketDiagnostics.traceSocketEvent(this.socket,this.debugLabel,a,v)}constructor(a,v=""){this._canWrite=!0,this.debugLabel=v,this.socket=a,this.traceSocketEvent("created",{type:"NodeSocket"}),this._errorListener=E=>{if(this.traceSocketEvent("error",{code:E?.code,message:E?.message}),E){if(E.code==="EPIPE")return;(0,i.onUnexpectedError)(E)}},this.socket.on("error",this._errorListener),this._closeListener=E=>{this.traceSocketEvent("close",{hadError:E}),this._canWrite=!1},this.socket.on("close",this._closeListener),this._endListener=()=>{this.traceSocketEvent("nodeEndReceived"),this._canWrite=!1},this.socket.on("end",this._endListener)}dispose(){this.socket.off("error",this._errorListener),this.socket.off("close",this._closeListener),this.socket.off("end",this._endListener),this.socket.destroy()}onData(a){const v=E=>{this.traceSocketEvent("read",E),a(D.VSBuffer.wrap(E))};return this.socket.on("data",v),{dispose:()=>this.socket.off("data",v)}}onClose(a){const v=E=>{a({type:0,hadError:E,error:void 0})};return this.socket.on("close",v),{dispose:()=>this.socket.off("close",v)}}onEnd(a){const v=()=>{a()};return this.socket.on("end",v),{dispose:()=>this.socket.off("end",v)}}write(a){if(!(this.socket.destroyed||!this._canWrite))try{this.traceSocketEvent("write",a),this.socket.write(a.buffer,v=>{if(v){if(v.code==="EPIPE")return;(0,i.onUnexpectedError)(v)}})}catch(v){if(v.code==="EPIPE")return;(0,i.onUnexpectedError)(v)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((a,v)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),a();return}const E=()=>{this.socket.off("close",E),this.socket.off("end",E),this.socket.off("error",E),this.socket.off("timeout",E),this.socket.off("drain",E),this.traceSocketEvent("nodeDrainEnd"),a()};this.socket.on("close",E),this.socket.on("end",E),this.socket.on("error",E),this.socket.on("timeout",E),this.socket.on("drain",E)})}}e.NodeSocket=p;var S;(function(c){c[c.MinHeaderByteSize=2]="MinHeaderByteSize"})(S||(S={}));var f;(function(c){c[c.PeekHeader=1]="PeekHeader",c[c.ReadHeader=2]="ReadHeader",c[c.ReadBody=3]="ReadBody",c[c.Fin=4]="Fin"})(f||(f={}));class g extends L.Disposable{get permessageDeflate(){return this._flowManager.permessageDeflate}get recordedInflateBytes(){return this._flowManager.recordedInflateBytes}traceSocketEvent(a,v){this.socket.traceSocketEvent(a,v)}constructor(a,v,E,R){super(),this._onData=this._register(new k.Emitter),this._onClose=this._register(new k.Emitter),this._isEnded=!1,this._state={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0},this.socket=a,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:v,inflateBytesLength:E?.byteLength||0,recordInflateBytes:R}),this._flowManager=this._register(new y(this,v,E,R,this._onData,(N,O)=>this._write(N,O))),this._register(this._flowManager.onError(N=>{console.error(N),(0,i.onUnexpectedError)(N),this._onClose.fire({type:0,hadError:!0,error:N})})),this._incomingData=new C.ChunkStream,this._register(this.socket.onData(N=>this._acceptChunk(N))),this._register(this.socket.onClose(N=>this._onClose.fire(N)))}dispose(){this._flowManager.isProcessingWriteQueue()?this._register(this._flowManager.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(a){return this._onData.event(a)}onClose(a){return this._onClose.event(a)}onEnd(a){return this.socket.onEnd(a)}write(a){this._flowManager.writeMessage(a)}_write(a,v){if(this._isEnded)return;this.traceSocketEvent("webSocketNodeSocketWrite",a);let E=2;a.byteLength<126?E+=0:a.byteLength<2**16?E+=2:E+=8;const R=D.VSBuffer.alloc(E);if(v?R.writeUInt8(194,0):R.writeUInt8(130,0),a.byteLength<126)R.writeUInt8(a.byteLength,1);else if(a.byteLength<2**16){R.writeUInt8(126,1);let N=1;R.writeUInt8(a.byteLength>>>8&255,++N),R.writeUInt8(a.byteLength>>>0&255,++N)}else{R.writeUInt8(127,1);let N=1;R.writeUInt8(0,++N),R.writeUInt8(0,++N),R.writeUInt8(0,++N),R.writeUInt8(0,++N),R.writeUInt8(a.byteLength>>>24&255,++N),R.writeUInt8(a.byteLength>>>16&255,++N),R.writeUInt8(a.byteLength>>>8&255,++N),R.writeUInt8(a.byteLength>>>0&255,++N)}this.socket.write(D.VSBuffer.concat([R,a]))}end(){this._isEnded=!0,this.socket.end()}_acceptChunk(a){if(a.byteLength!==0){for(this._incomingData.acceptChunk(a);this._incomingData.byteLength>=this._state.readLen;)if(this._state.state===1){const v=this._incomingData.peek(this._state.readLen),E=v.readUInt8(0),R=(E&128)>>>7,N=(E&64)>>>6,O=v.readUInt8(1),z=(O&128)>>>7,F=O&127;this._state.state=2,this._state.readLen=2+(z?4:0)+(F===126?2:0)+(F===127?8:0),this._state.fin=R,this._state.firstFrameOfMessage&&(this._state.compressed=Boolean(N)),this._state.firstFrameOfMessage=Boolean(R),this._state.mask=0,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this._state.readLen,compressed:this._state.compressed,fin:this._state.fin})}else if(this._state.state===2){const v=this._incomingData.read(this._state.readLen),E=v.readUInt8(1),R=(E&128)>>>7;let N=E&127,O=1;N===126?N=v.readUInt8(++O)*2**8+v.readUInt8(++O):N===127&&(N=v.readUInt8(++O)*0+v.readUInt8(++O)*0+v.readUInt8(++O)*0+v.readUInt8(++O)*0+v.readUInt8(++O)*2**24+v.readUInt8(++O)*2**16+v.readUInt8(++O)*2**8+v.readUInt8(++O));let z=0;R&&(z=v.readUInt8(++O)*2**24+v.readUInt8(++O)*2**16+v.readUInt8(++O)*2**8+v.readUInt8(++O)),this._state.state=3,this._state.readLen=N,this._state.mask=z,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this._state.readLen,compressed:this._state.compressed,fin:this._state.fin,mask:this._state.mask})}else if(this._state.state===3){const v=this._incomingData.read(this._state.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",v),u(v,this._state.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",v),this._state.state=1,this._state.readLen=2,this._state.mask=0,this._flowManager.acceptFrame(v,this._state.compressed,!!this._state.fin)}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this._flowManager.isProcessingWriteQueue()&&await k.Event.toPromise(this._flowManager.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}}e.WebSocketNodeSocket=g;class y extends L.Disposable{get permessageDeflate(){return Boolean(this._zlibInflateStream&&this._zlibDeflateStream)}get recordedInflateBytes(){return this._zlibInflateStream?this._zlibInflateStream.recordedInflateBytes:D.VSBuffer.alloc(0)}constructor(a,v,E,R,N,O){super(),this._tracer=a,this._onData=N,this._writeFn=O,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._writeQueue=[],this._readQueue=[],this._onDidFinishProcessingWriteQueue=this._register(new k.Emitter),this.onDidFinishProcessingWriteQueue=this._onDidFinishProcessingWriteQueue.event,this._isProcessingWriteQueue=!1,this._isProcessingReadQueue=!1,v?(this._zlibInflateStream=this._register(new l(this._tracer,R,E,{windowBits:15})),this._zlibDeflateStream=this._register(new m(this._tracer,{windowBits:15})),this._register(this._zlibInflateStream.onError(z=>this._onError.fire(z))),this._register(this._zlibDeflateStream.onError(z=>this._onError.fire(z)))):(this._zlibInflateStream=null,this._zlibDeflateStream=null)}writeMessage(a){this._writeQueue.push(a),this._processWriteQueue()}async _processWriteQueue(){if(!this._isProcessingWriteQueue){for(this._isProcessingWriteQueue=!0;this._writeQueue.length>0;){const a=this._writeQueue.shift();if(this._zlibDeflateStream){const v=await this._deflateMessage(this._zlibDeflateStream,a);this._writeFn(v,!0)}else this._writeFn(a,!1)}this._isProcessingWriteQueue=!1,this._onDidFinishProcessingWriteQueue.fire()}}isProcessingWriteQueue(){return this._isProcessingWriteQueue}_deflateMessage(a,v){return new Promise((E,R)=>{a.write(v),a.flush(N=>E(N))})}acceptFrame(a,v,E){this._readQueue.push({data:a,isCompressed:v,isLastFrameOfMessage:E}),this._processReadQueue()}async _processReadQueue(){if(!this._isProcessingReadQueue){for(this._isProcessingReadQueue=!0;this._readQueue.length>0;){const a=this._readQueue.shift();if(this._zlibInflateStream&&a.isCompressed){const v=await this._inflateFrame(this._zlibInflateStream,a.data,a.isLastFrameOfMessage);this._onData.fire(v)}else this._onData.fire(a.data)}this._isProcessingReadQueue=!1}}_inflateFrame(a,v,E){return new Promise((R,N)=>{a.write(v),E&&a.write(D.VSBuffer.fromByteArray([0,0,255,255])),a.flush(O=>R(O))})}}class l extends L.Disposable{get recordedInflateBytes(){return this._recordInflateBytes?D.VSBuffer.concat(this._recordedInflateBytes):D.VSBuffer.alloc(0)}constructor(a,v,E,R){super(),this._tracer=a,this._recordInflateBytes=v,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._recordedInflateBytes=[],this._pendingInflateData=[],this._zlibInflate=b().zlib.createInflateRaw(R),this._zlibInflate.on("error",N=>{this._tracer.traceSocketEvent("zlibInflateError",{message:N?.message,code:N?.code}),this._onError.fire(N)}),this._zlibInflate.on("data",N=>{this._tracer.traceSocketEvent("zlibInflateData",N),this._pendingInflateData.push(D.VSBuffer.wrap(N))}),E&&(this._tracer.traceSocketEvent("zlibInflateInitialWrite",E.buffer),this._zlibInflate.write(E.buffer),this._zlibInflate.flush(()=>{this._tracer.traceSocketEvent("zlibInflateInitialFlushFired"),this._pendingInflateData.length=0}))}write(a){this._recordInflateBytes&&this._recordedInflateBytes.push(a.clone()),this._tracer.traceSocketEvent("zlibInflateWrite",a),this._zlibInflate.write(a.buffer)}flush(a){this._zlibInflate.flush(()=>{this._tracer.traceSocketEvent("zlibInflateFlushFired");const v=D.VSBuffer.concat(this._pendingInflateData);this._pendingInflateData.length=0,a(v)})}}class m extends L.Disposable{constructor(a,v){super(),this._tracer=a,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._pendingDeflateData=[],this._zlibDeflate=b().zlib.createDeflateRaw({windowBits:15}),this._zlibDeflate.on("error",E=>{this._tracer.traceSocketEvent("zlibDeflateError",{message:E?.message,code:E?.code}),this._onError.fire(E)}),this._zlibDeflate.on("data",E=>{this._tracer.traceSocketEvent("zlibDeflateData",E),this._pendingDeflateData.push(D.VSBuffer.wrap(E))})}write(a){this._tracer.traceSocketEvent("zlibDeflateWrite",a.buffer),this._zlibDeflate.write(a.buffer)}flush(a){this._zlibDeflate.flush(2,()=>{this._tracer.traceSocketEvent("zlibDeflateFlushFired");let v=D.VSBuffer.concat(this._pendingDeflateData);this._pendingDeflateData.length=0,v=v.slice(0,v.byteLength-4),a(v)})}}function u(c,a){if(a===0)return;const v=c.byteLength>>>2;for(let F=0;F<v;F++){const A=c.readUInt32BE(F*4);c.writeUInt32BE(A^a,F*4)}const E=v*4,R=c.byteLength-E,N=a>>>24&255,O=a>>>16&255,z=a>>>8&255;R>=1&&c.writeUInt8(c.readUInt8(E)^N,E),R>=2&&c.writeUInt8(c.readUInt8(E+1)^O,E+1),R>=3&&c.writeUInt8(c.readUInt8(E+2)^z,E+2)}e.XDG_RUNTIME_DIR=typeof process<"u"?process.env.XDG_RUNTIME_DIR:void 0;const h={[2]:107,[1]:103};function d(){const c=(0,P.generateUuid)();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${c}-sock`;let a;return e.XDG_RUNTIME_DIR?a=(0,T.join)(e.XDG_RUNTIME_DIR,`vscode-ipc-${c}.sock`):a=(0,T.join)(b().os.tmpdir(),`vscode-ipc-${c}.sock`),o(a),a}e.createRandomIPCHandle=d;function n(c,a,v){const E=b().crypto.createHash("md5").update(c).digest("hex");if(process.platform==="win32")return`\\\\.\\pipe\\${E}-${v}-${a}-sock`;let R;return e.XDG_RUNTIME_DIR&&!process.env.VSCODE_PORTABLE?R=(0,T.join)(e.XDG_RUNTIME_DIR,`vscode-${E.substr(0,8)}-${v}-${a}.sock`):R=(0,T.join)(c,`${v}-${a}.sock`),o(R),R}e.createStaticIPCHandle=n;function o(c){const a=h[I.platform];typeof a=="number"&&c.length>=a&&console.warn(`WARNING: IPC handle "${c}" is longer than ${a} chars, try a shorter --user-data-dir`)}class t extends w.IPCServer{static toClientConnectionEvent(a){const v=k.Event.fromNodeEventEmitter(a,"connection");return k.Event.map(v,E=>({protocol:new C.Protocol(new p(E,"ipc-server-connection")),onDidClientDisconnect:k.Event.once(k.Event.fromNodeEventEmitter(E,"close"))}))}constructor(a){super(t.toClientConnectionEvent(a)),this.server=a}dispose(){super.dispose(),this.server&&(this.server.close(),this.server=null)}}e.Server=t;function s(c){return new Promise((a,v)=>{const E=b().net.createServer();E.on("error",v),E.listen(c,()=>{E.removeListener("error",v),a(new t(E))})})}e.serve=s;function r(c,a){return new Promise((v,E)=>{const R=b().net.createConnection(c,()=>{R.removeListener("error",E),v(C.Client.fromSocket(new p(R,`ipc-client${a}`),a))});R.once("error",E)})}e.connect=r}),define(se[69],oe([0,1,6,3,2,14]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorageDatabase=e.Storage=e.StorageState=e.isStorageItemsChangeEvent=e.StorageHint=void 0;var T;(function(b){b[b.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",b[b.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(T=e.StorageHint||(e.StorageHint={}));function I(b){const p=b;return p?.changed instanceof Map||p?.deleted instanceof Set}e.isStorageItemsChangeEvent=I;var P;(function(b){b[b.None=0]="None",b[b.Initialized=1]="Initialized",b[b.Closed=2]="Closed"})(P=e.StorageState||(e.StorageState={}));class w extends k.Disposable{constructor(p,S=Object.create(null)){super(),this.database=p,this.options=S,this._onDidChangeStorage=this._register(new i.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=P.None,this.cache=new Map,this.flushDelayer=new D.ThrottledDelayer(w.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(p=>this.onDidChangeItemsExternal(p)))}onDidChangeItemsExternal(p){p.changed?.forEach((S,f)=>this.accept(f,S)),p.deleted?.forEach(S=>this.accept(S,void 0))}accept(p,S){if(this.state===P.Closed)return;let f=!1;(0,L.isUndefinedOrNull)(S)?f=this.cache.delete(p):this.cache.get(p)!==S&&(this.cache.set(p,S),f=!0),f&&this._onDidChangeStorage.fire(p)}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===P.None&&(this.state=P.Initialized,this.options.hint!==T.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(p,S){const f=this.cache.get(p);return(0,L.isUndefinedOrNull)(f)?S:f}getBoolean(p,S){const f=this.get(p);return(0,L.isUndefinedOrNull)(f)?S:f==="true"}getNumber(p,S){const f=this.get(p);return(0,L.isUndefinedOrNull)(f)?S:parseInt(f,10)}async set(p,S){if(this.state===P.Closed)return;if((0,L.isUndefinedOrNull)(S))return this.delete(p);const f=String(S);if(this.cache.get(p)!==f)return this.cache.set(p,f),this.pendingInserts.set(p,f),this.pendingDeletes.delete(p),this._onDidChangeStorage.fire(p),this.doFlush()}async delete(p){if(!(this.state===P.Closed||!this.cache.delete(p)))return this.pendingDeletes.has(p)||this.pendingDeletes.add(p),this.pendingInserts.delete(p),this._onDidChangeStorage.fire(p),this.doFlush()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=P.Closed;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const p={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(p).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(p){if(!!this.hasPending)return this.doFlush(p)}async doFlush(p){return this.flushDelayer.trigger(()=>this.flushPending(),p)}async whenFlushed(){if(!!this.hasPending)return new Promise(p=>this.whenFlushedCallbacks.push(p))}isInMemory(){return this.options.hint===T.STORAGE_IN_MEMORY}dispose(){this.flushDelayer.dispose(),super.dispose()}}e.Storage=w,w.DEFAULT_FLUSH_DELAY=100;class C{constructor(){this.onDidChangeItemsExternal=i.Event.None,this.items=new Map}async getItems(){return this.items}async updateItems(p){p.insert?.forEach((S,f)=>this.items.set(f,S)),p.delete?.forEach(S=>this.items.delete(S))}async close(){}}e.InMemoryStorageDatabase=C}),define(se[151],oe([10,11]),function(Z,e){return Z.create("vs/base/node/zip",e)}),define(se[152],oe([10,11]),function(Z,e){return Z.create("vs/platform/configuration/common/configurationRegistry",e)}),define(se[153],oe([10,11]),function(Z,e){return Z.create("vs/platform/environment/node/argv",e)}),define(se[154],oe([10,11]),function(Z,e){return Z.create("vs/platform/environment/node/argvHelper",e)}),define(se[155],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/common/abstractExtensionManagementService",e)}),define(se[156],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/common/extensionManagement",e)}),define(se[157],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/common/extensionNls",e)}),define(se[158],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/common/extensionsScannerService",e)}),define(se[159],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/electron-sandbox/extensionTipsService",e)}),define(se[160],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/node/extensionManagementService",e)}),define(se[161],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensionManagement/node/extensionManagementUtil",e)}),define(se[162],oe([10,11]),function(Z,e){return Z.create("vs/platform/extensions/common/extensionValidator",e)}),define(se[163],oe([10,11]),function(Z,e){return Z.create("vs/platform/files/common/fileService",e)}),define(se[164],oe([10,11]),function(Z,e){return Z.create("vs/platform/files/common/files",e)}),define(se[165],oe([10,11]),function(Z,e){return Z.create("vs/platform/files/common/io",e)}),define(se[166],oe([10,11]),function(Z,e){return Z.create("vs/platform/files/node/diskFileSystemProvider",e)}),define(se[167],oe([10,11]),function(Z,e){return Z.create("vs/platform/languagePacks/common/languagePacks",e)}),define(se[168],oe([10,11]),function(Z,e){return Z.create("vs/platform/remoteTunnel/electron-browser/remoteTunnelService",e)}),define(se[169],oe([10,11]),function(Z,e){return Z.create("vs/platform/request/common/request",e)}),define(se[170],oe([10,11]),function(Z,e){return Z.create("vs/platform/shell/node/shellEnv",e)}),define(se[171],oe([10,11]),function(Z,e){return Z.create("vs/platform/telemetry/common/telemetryService",e)}),define(se[172],oe([10,11]),function(Z,e){return Z.create("vs/platform/terminal/common/terminalPlatformConfiguration",e)}),define(se[173],oe([10,11]),function(Z,e){return Z.create("vs/platform/terminal/common/terminalProfiles",e)}),define(se[174],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataProfile/common/userDataProfile",e)}),define(se[175],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/abstractSynchronizer",e)}),define(se[176],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/keybindingsSync",e)}),define(se[177],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/settingsSync",e)}),define(se[178],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/userDataAutoSyncService",e)}),define(se[179],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/userDataSync",e)}),define(se[180],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/userDataSyncMachines",e)}),define(se[181],oe([10,11]),function(Z,e){return Z.create("vs/platform/userDataSync/common/userDataSyncResourceProvider",e)}),define(se[182],oe([10,11]),function(Z,e){return Z.create("vs/platform/workspace/common/workspace",e)}),define(se[94],oe([0,1,65,63,21,12,36,22,7]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePtyHostPort=e.parseSearchPort=e.parseExtensionHostPort=e.AbstractNativeEnvironmentService=e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX=void 0,e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX=/^([^.]+\..+):(.+)$/;class w{get appRoot(){return(0,L.dirname)(k.FileAccess.asFileUri("").fsPath)}get userHome(){return P.URI.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return P.URI.file((0,L.join)(this.userDataPath,"User"))}get tmpDir(){return P.URI.file(this.paths.tmpDir)}get cacheHome(){return P.URI.file(this.userDataPath)}get stateResource(){return(0,I.joinPath)(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome}get userDataSyncHome(){return(0,I.joinPath)(this.userRoamingDataHome,"sync")}get logsPath(){if(!this.args.logsPath){const g=(0,D.toLocalISOString)(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=(0,L.join)(this.userDataPath,"logs",g)}return this.args.logsPath}get userDataSyncLogResource(){return P.URI.file((0,L.join)(this.logsPath,"userDataSync.log"))}get editSessionsLogResource(){return P.URI.file((0,L.join)(this.logsPath,"editSessions.log"))}get sync(){return this.args.sync}get machineSettingsResource(){return(0,I.joinPath)(P.URI.file((0,L.join)(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return(0,I.joinPath)(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return(0,I.joinPath)(this.appSettingsHome,"History")}get keyboardLayoutResource(){return(0,I.joinPath)(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const g=T.env.VSCODE_PORTABLE;return g?P.URI.file((0,L.join)(g,"argv.json")):(0,I.joinPath)(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return P.URI.file((0,L.join)(this.userDataPath,"Workspaces"))}get installSourcePath(){return(0,L.join)(this.userDataPath,"installSource")}get builtinExtensionsPath(){const g=this.args["builtin-extensions-dir"];return g?(0,L.resolve)(g):(0,L.normalize)((0,L.join)(k.FileAccess.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){const g=this.args["extensions-download-dir"];return g?P.URI.file((0,L.resolve)(g)):P.URI.file((0,L.join)(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){const g=this.args["extensions-dir"];if(g)return(0,L.resolve)(g);const y=T.env.VSCODE_EXTENSIONS;if(y)return y;const l=T.env.VSCODE_PORTABLE;return l?(0,L.join)(l,"extensions"):(0,I.joinPath)(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const g=this.args.extensionDevelopmentPath;if(Array.isArray(g))return g.map(y=>/^[^:/?#]+?:\/\//.test(y)?P.URI.parse(y):P.URI.file((0,L.normalize)(y)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(g=>g==="ui"||g==="workspace"||g==="web"?g:"workspace")}get extensionTestsLocationURI(){const g=this.args.extensionTestsPath;if(g)return/^[^:/?#]+?:\/\//.test(g)?P.URI.parse(g):P.URI.file((0,L.normalize)(g))}get disableExtensions(){if(this.args["disable-extensions"])return!0;const g=this.args["disable-extension"];if(g){if(typeof g=="string")return[g];if(Array.isArray(g)&&g.length>0)return g}return!1}get debugExtensionHost(){return C(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!T.env.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(g=>!e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX.test(g))}get extensionLogLevel(){const g=[];for(const y of this.args.log||[]){const l=e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX.exec(y);l&&l[1]&&l[2]&&g.push([l[1],l[2]])}return g.length?g:void 0}get serviceMachineIdResource(){return(0,I.joinPath)(P.URI.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get telemetryLogResource(){return P.URI.file((0,L.join)(this.logsPath,"telemetry.log"))}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get policyFile(){if(this.args["__enable-file-policy"]){const g=T.env.VSCODE_PORTABLE;return g?P.URI.file((0,L.join)(g,"policy.json")):(0,I.joinPath)(this.userHome,this.productService.dataFolderName,"policy.json")}}get continueOn(){return this.args.continueOn}set continueOn(g){this.args.continueOn=g}get args(){return this._args}constructor(g,y,l){this._args=g,this.paths=y,this.productService=l,this.editSessionId=this.args.editSessionId}}ve([i.memoize],w.prototype,"appRoot",null),ve([i.memoize],w.prototype,"userHome",null),ve([i.memoize],w.prototype,"userDataPath",null),ve([i.memoize],w.prototype,"appSettingsHome",null),ve([i.memoize],w.prototype,"tmpDir",null),ve([i.memoize],w.prototype,"cacheHome",null),ve([i.memoize],w.prototype,"stateResource",null),ve([i.memoize],w.prototype,"userRoamingDataHome",null),ve([i.memoize],w.prototype,"userDataSyncHome",null),ve([i.memoize],w.prototype,"userDataSyncLogResource",null),ve([i.memoize],w.prototype,"editSessionsLogResource",null),ve([i.memoize],w.prototype,"sync",null),ve([i.memoize],w.prototype,"machineSettingsResource",null),ve([i.memoize],w.prototype,"workspaceStorageHome",null),ve([i.memoize],w.prototype,"localHistoryHome",null),ve([i.memoize],w.prototype,"keyboardLayoutResource",null),ve([i.memoize],w.prototype,"argvResource",null),ve([i.memoize],w.prototype,"isExtensionDevelopment",null),ve([i.memoize],w.prototype,"untitledWorkspacesHome",null),ve([i.memoize],w.prototype,"installSourcePath",null),ve([i.memoize],w.prototype,"builtinExtensionsPath",null),ve([i.memoize],w.prototype,"extensionsPath",null),ve([i.memoize],w.prototype,"extensionDevelopmentLocationURI",null),ve([i.memoize],w.prototype,"extensionDevelopmentKind",null),ve([i.memoize],w.prototype,"extensionTestsLocationURI",null),ve([i.memoize],w.prototype,"debugExtensionHost",null),ve([i.memoize],w.prototype,"logLevel",null),ve([i.memoize],w.prototype,"extensionLogLevel",null),ve([i.memoize],w.prototype,"serviceMachineIdResource",null),ve([i.memoize],w.prototype,"telemetryLogResource",null),ve([i.memoize],w.prototype,"disableWorkspaceTrust",null),ve([i.memoize],w.prototype,"policyFile",null),e.AbstractNativeEnvironmentService=w;function C(f,g){return S(f["inspect-extensions"],f["inspect-brk-extensions"],5870,g,f.debugId,f.extensionEnvironment)}e.parseExtensionHostPort=C;function b(f,g){return S(f["inspect-search"],f["inspect-brk-search"],5876,g,f.extensionEnvironment)}e.parseSearchPort=b;function p(f,g){return S(f["inspect-ptyhost"],f["inspect-brk-ptyhost"],5877,g,f.extensionEnvironment)}e.parsePtyHostPort=p;function S(f,g,y,l,m,u){const d=Number(g||f)||(l?null:y),n=d?Boolean(!!g):!1;let o;if(u)try{o=JSON.parse(u)}catch{}return{port:d,break:n,debugId:m,env:o}}}),define(se[183],oe([0,1,283,5,153]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildVersionMessage=e.buildHelpMessage=e.formatOptions=e.parseArgs=e.OPTIONS=void 0;const L={o:(0,k.localize)(0,null),e:(0,k.localize)(1,null),t:(0,k.localize)(2,null)};e.OPTIONS={tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel",options:{"cli-data-dir":{type:"string",args:"dir",description:(0,k.localize)(3,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:(0,k.localize)(4,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:(0,k.localize)(5,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:(0,k.localize)(6,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:(0,k.localize)(7,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:(0,k.localize)(8,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:(0,k.localize)(9,null)},wait:{type:"boolean",cat:"o",alias:"w",description:(0,k.localize)(10,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:(0,k.localize)(11,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:(0,k.localize)(12,null)},profile:{type:"string",cat:"o",args:"profileName",description:(0,k.localize)(13,null)},help:{type:"boolean",cat:"o",alias:"h",description:(0,k.localize)(14,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:(0,k.localize)(15,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:(0,k.localize)(16,null)},"show-versions":{type:"boolean",cat:"e",description:(0,k.localize)(17,null)},category:{type:"string",cat:"e",description:(0,k.localize)(18,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:(0,k.localize)(19,null)},"pre-release":{type:"boolean",cat:"e",description:(0,k.localize)(20,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:(0,k.localize)(21,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:(0,k.localize)(22,null)},version:{type:"boolean",cat:"t",alias:"v",description:(0,k.localize)(23,null)},verbose:{type:"boolean",cat:"t",global:!0,description:(0,k.localize)(24,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:(0,k.localize)(25,null)},status:{type:"boolean",alias:"s",cat:"t",description:(0,k.localize)(26,null)},"prof-startup":{type:"boolean",cat:"t",description:(0,k.localize)(27,null)},"prof-append-timers":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:(0,k.localize)(28,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:(0,k.localize)(29,null)},sync:{type:"string",cat:"t",description:(0,k.localize)(30,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:(0,k.localize)(31,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:(0,k.localize)(32,null)},"disable-gpu":{type:"boolean",cat:"t",description:(0,k.localize)(33,null)},"ms-enable-electron-run-as-node":{type:"boolean",global:!0},"max-memory":{type:"string",cat:"t",description:(0,k.localize)(34,null),args:"memory"},telemetry:{type:"boolean",cat:"t",description:(0,k.localize)(35,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"disable-keytar":{type:"boolean"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"unity-launch":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},trace:{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"locate-shell-integration-path":{type:"string",args:["bash","pwsh","zsh","fish"]},"enable-coi":{type:"boolean"},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},_:{type:"string[]"}};const T={onUnknownOption:()=>{},onMultipleValues:()=>{},onEmptyValue:()=>{},onDeprecatedOption:()=>{}};function I(g,y,l=T){const m=g.find(c=>c.length>0&&c[0]!=="-"),u={},h=["_"],d=[],n={};let o;for(const c in y){const a=y[c];a.type==="subcommand"?c===m&&(o=a):(a.alias&&(u[c]=a.alias),a.type==="string"||a.type==="string[]"?(h.push(c),a.deprecates&&h.push(...a.deprecates)):a.type==="boolean"&&(d.push(c),a.deprecates&&d.push(...a.deprecates)),a.global&&(n[c]=a))}if(o&&m){const c=n;for(const R in o.options)c[R]=o.options[R];const a=g.filter(R=>R!==m),v=l.getSubcommandReporter?l.getSubcommandReporter(m):void 0,E=I(a,c,v);return{[m]:E,_:[]}}const t=D(g,{string:h,boolean:d,alias:u}),s={},r=t;s._=t._.map(c=>String(c)).filter(c=>c.length>0),delete r._;for(const c in y){const a=y[c];if(a.type==="subcommand")continue;a.alias&&delete r[a.alias];let v=r[c];if(a.deprecates)for(const E of a.deprecates)r.hasOwnProperty(E)&&(v||(v=r[E],v&&l.onDeprecatedOption(E,a.deprecationMessage||(0,k.localize)(36,null,c))),delete r[E]);if(typeof v<"u"){if(a.type==="string[]"){if(Array.isArray(v)||(v=[v]),!a.allowEmptyValue){const E=v.filter(R=>R.length>0);E.length!==v.length&&(l.onEmptyValue(c),v=E.length>0?E:void 0)}}else a.type==="string"&&(Array.isArray(v)?(v=v.pop(),l.onMultipleValues(c,v)):!v&&!a.allowEmptyValue&&(l.onEmptyValue(c),v=void 0));s[c]=v,a.deprecationMessage&&l.onDeprecatedOption(c,a.deprecationMessage)}delete r[c]}for(const c in r)l.onUnknownOption(c);return s}e.parseArgs=I;function P(g,y){let l="";return y.args&&(Array.isArray(y.args)?l=` <${y.args.join("> <")}>`:l=` <${y.args}>`),y.alias?`-${y.alias} --${g}${l}`:`--${g}${l}`}function w(g,y){const l=[];for(const m in g){const u=g[m],h=P(m,u);l.push([h,u.description])}return C(l,y)}e.formatOptions=w;function C(g,y){const m=g.reduce((d,n)=>Math.max(d,n[0].length),12)+2+1;if(y-m<25)return g.reduce((d,n)=>d.concat([`  ${n[0]}`,`      ${n[1]}`]),[]);const u=y-m-1,h=[];for(const d of g){const n=d[0],o=p(d[1],u),t=b(m-n.length-2);h.push("  "+n+t+o[0]);for(let s=1;s<o.length;s++)h.push(b(m)+o[s])}return h}function b(g){return" ".repeat(g)}function p(g,y){const l=[];for(;g.length;){const m=g.length<y?g.length:g.lastIndexOf(" ",y),u=g.slice(0,m).trim();g=g.slice(m),l.push(u)}return l}function S(g,y,l,m,u){const h=process.stdout.isTTY&&process.stdout.columns||80,d=u?.noInputFiles!==!0?`[${(0,k.localize)(37,null)}...]`:"",n=[`${g} ${l}`];n.push(""),n.push(`${(0,k.localize)(38,null)}: ${y} [${(0,k.localize)(39,null)}]${d}`),n.push(""),u?.noPipe!==!0&&(i.isWindows?n.push((0,k.localize)(40,null,y)):n.push((0,k.localize)(41,null,y)),n.push(""));const o={},t=[];for(const s in m){const r=m[s];if(r.type==="subcommand")r.description&&t.push({command:s,description:r.description});else if(r.description&&r.cat){let c=o[r.cat];c||(o[r.cat]=c={}),c[s]=r}}for(const s in o){const r=s,c=o[r];c&&(n.push(L[r]),n.push(...w(c,h)),n.push(""))}return t.length&&(n.push((0,k.localize)(42,null)),n.push(...C(t.map(s=>[s.command,s.description]),h)),n.push("")),n.join(`
`)}e.buildHelpMessage=S;function f(g,y){return`${g||(0,k.localize)(43,null)}
${y||(0,k.localize)(44,null)}
${process.arch}`}e.buildVersionMessage=f}),define(se[184],oe([0,1,284,154,183]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLaunchedFromCli=e.addArg=e.parseCLIProcessArgv=e.parseMainProcessArgv=void 0;const L=2048;function T(p,S){const f=(h,d)=>{console.warn((0,i.localize)(0,null,h,d))},g=h=>{console.warn((0,i.localize)(1,null,h))},y=(h,d)=>{console.warn((0,i.localize)(2,null,h,d))},l=h=>({onUnknownOption:d=>{h!=="tunnel"&&console.warn((0,i.localize)(3,null,d,h))},onMultipleValues:f,onEmptyValue:g,onDeprecatedOption:y,getSubcommandReporter:h!=="tunnel"?l:void 0}),m={onUnknownOption:h=>{console.warn((0,i.localize)(4,null,h))},onMultipleValues:f,onEmptyValue:g,onDeprecatedOption:y,getSubcommandReporter:l},u=(0,k.parseArgs)(p,k.OPTIONS,S?m:void 0);return u.goto&&u._.forEach(h=>D(/^(\w:)?[^:]+(:\d*){0,2}$/.test(h),(0,i.localize)(5,null))),u["max-memory"]&&D(parseInt(u["max-memory"])>=L,`The max-memory argument cannot be specified lower than ${L} MB.`),u}function I(p){const S=p.findIndex(f=>!/^-/.test(f));if(S>-1)return[...p.slice(0,S),...p.slice(S+1)]}function P(p){let[,...S]=p;process.env.VSCODE_DEV&&(S=I(S)||[]);const f=!b(process.env);return T(S,f)}e.parseMainProcessArgv=P;function w(p){let[,,...S]=p;return process.env.VSCODE_DEV&&(S=I(S)||[]),T(S,!0)}e.parseCLIProcessArgv=w;function C(p,...S){const f=p.indexOf("--");return f===-1?p.push(...S):p.splice(f,0,...S),p}e.addArg=C;function b(p){return p.VSCODE_CLI==="1"}e.isLaunchedFromCli=b}),function(){"use strict";function Z(e,D,i){function k(T,I){const P=L(T,I),w=[P];return e.isAbsolute(P)||w.unshift(i),e.resolve(...w)}function L(T,I){process.env.VSCODE_DEV&&(I="code-oss-dev");const P=process.env.VSCODE_PORTABLE;if(P)return e.join(P,"user-data");let w=process.env.VSCODE_APPDATA;if(w)return e.join(w,I);const C=T["user-data-dir"];if(C)return C;switch(process.platform){case"win32":if(w=process.env.APPDATA,!w){const b=process.env.USERPROFILE;if(typeof b!="string")throw new Error("Windows: Unexpected undefined %USERPROFILE% environment variable");w=e.join(b,"AppData","Roaming")}break;case"darwin":w=e.join(D.homedir(),"Library","Application Support");break;case"linux":w=process.env.XDG_CONFIG_HOME||e.join(D.homedir(),".config");break;default:throw new Error("Platform not supported")}return e.join(w,I)}return{getUserDataPath:k}}if(typeof define=="function")define(se[95],oe([285,34,36]),function(e,D,i){return Z(e,D,i.cwd())});else if(typeof module=="object"&&typeof module.exports=="object"){const e=require("path"),D=require("os");module.exports=Z(e,D,process.env.VSCODE_CWD||process.cwd())}else throw new Error("Unknown context")}(),define(se[185],oe([0,1,34,94,95]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeEnvironmentService=void 0;class L extends i.AbstractNativeEnvironmentService{constructor(I,P){super(I,{homeDir:(0,D.homedir)(),tmpDir:(0,D.tmpdir)(),userDataDir:(0,k.getUserDataPath)(I,P.nameShort)},P)}}e.NativeEnvironmentService=L}),define(se[186],oe([0,1,7]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRemotes=e.getDomainsOfRemotes=e.AllowedSecondLevelDomains=void 0;const i=/^([^@:]+@)?([^:]+):/,k=/^([^@:]+@)?([^:]+):(.+)$/,L=/^([^@]+@)?([^:]+)(:\d+)?$/,T=/([^@:.]+\.[^@:.]+)(:\d+)?$/,I=/^\s*url\s*=\s*(.+\S)\s*$/mg,P=/[^.]/g;e.AllowedSecondLevelDomains=["github.com","bitbucket.org","visualstudio.com","gitlab.com","heroku.com","azurewebsites.net","ibm.com","amazon.com","amazonaws.com","cloudapp.net","rhcloud.com","google.com","azure.com"];function w(y){const l=y.match(T);return l?l[1]:null}function C(y){if(y.indexOf("://")===-1){const l=y.match(i);return l?w(l[2]):null}try{const l=D.URI.parse(y);if(l.authority)return w(l.authority)}catch{}return null}function b(y,l){const m=new Set;let u;for(;u=I.exec(y);){const d=C(u[1]);d&&m.add(d)}const h=new Set(l);return Array.from(m).map(d=>h.has(d)?d:d.replace(P,"a"))}e.getDomainsOfRemotes=b;function p(y){const l=y.match(L);return l?l[2]:null}function S(y,l,m){return y&&l?(m&&l.endsWith(".git")&&(l=l.substr(0,l.length-4)),l.indexOf("/")===0?`${y}${l}`:`${y}/${l}`):null}function f(y,l){if(y.indexOf("://")===-1){const m=y.match(k);if(m)return S(m[2],m[3],l)}try{const m=D.URI.parse(y);if(m.authority)return S(p(m.authority),m.path,l)}catch{}return null}function g(y,l=!1){const m=[];let u;for(;u=I.exec(y);){const h=f(u[1],l);h&&m.push(h)}return m}e.getRemotes=g}),define(se[187],oe([0,1,14,157]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localizeManifest=void 0;function k(T,I,P){try{L(T,I,P)}catch(w){console.error(w?.message??w)}return T}e.localizeManifest=k;function L(T,I,P){const w=(C,b,p)=>{const S=C[b];if((0,D.isString)(S)){const f=S,g=f.length;if(g>1&&f[0]==="%"&&f[g-1]==="%"){const y=f.substr(1,g-2);let l=I[y];l===void 0&&P&&(l=P[y]);const m=typeof l=="string"?l:l?.message,u=P?.[y],h=typeof u=="string"?u:u?.message;if(!m){h||console.warn(`[${T.name}]: ${(0,i.localize)(0,null,y)}`);return}if(p&&(b==="title"||b==="category")&&h&&h!==m){const d={value:m,original:h};C[b]=d}else C[b]=m}}else if((0,D.isObject)(S))for(const f in S)S.hasOwnProperty(f)&&(f==="commands"?w(S,f,!0):w(S,f,p));else if(Array.isArray(S))for(let f=0;f<S.length;f++)w(S,f,p)};for(const C in T)T.hasOwnProperty(C)&&w(T,C)}}),define(se[188],oe([0,1,9]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImplicitActivationEvents=e.ImplicitActivationEventsImpl=void 0;class i{constructor(){this._generators=new Map}register(L,T){this._generators.set(L,T)}updateManifest(L){if(!(typeof L.main>"u"&&typeof L.browser>"u")&&(L.activationEvents===void 0&&Object.assign(L,{activationEvents:[]}),!(!Array.isArray(L.activationEvents)||!L.contributes)))for(const T in L.contributes){const I=this._generators.get(T);if(!I)continue;const P=L.contributes[T],w=Array.isArray(P)?P:[P];try{I(w,L.activationEvents)}catch(C){(0,D.onUnexpectedError)(C)}}}}e.ImplicitActivationEventsImpl=i,e.ImplicitActivationEvents=new i}),define(se[189],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionRecommendationNotificationServiceChannel=e.ExtensionRecommendationNotificationServiceChannelClient=void 0;class D{constructor(L){this.channel=L}get ignoredRecommendations(){throw new Error("not supported")}promptImportantExtensionsInstallNotification(L,T,I,P){return this.channel.call("promptImportantExtensionsInstallNotification",[L,T,I,P])}promptWorkspaceRecommendations(L){throw new Error("not supported")}hasToIgnoreRecommendationNotifications(){throw new Error("not supported")}}e.ExtensionRecommendationNotificationServiceChannelClient=D;class i{constructor(L){this.service=L}listen(L,T){throw new Error(`Event not found: ${T}`)}call(L,T,I){switch(T){case"promptImportantExtensionsInstallNotification":return this.service.promptImportantExtensionsInstallNotification(I[0],I[1],I[2],I[3])}throw new Error(`Call not found: ${T}`)}}e.ExtensionRecommendationNotificationServiceChannel=i}),define(se[70],oe([0,1,22,88,162,53]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEngineValid=e.isValidExtensionVersion=e.validateExtensionManifest=e.isValidVersion=e.normalizeVersion=e.parseVersion=e.isValidVersionStr=void 0;const T=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,I=/^-(\d{4})(\d{2})(\d{2})$/;function P(l){return l=l.trim(),l==="*"||T.test(l)}e.isValidVersionStr=P;function w(l){if(!P(l))return null;if(l=l.trim(),l==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const m=l.match(T);return m?{hasCaret:m[1]==="^",hasGreaterEquals:m[1]===">=",majorBase:m[2]==="x"?0:parseInt(m[2],10),majorMustEqual:m[2]!=="x",minorBase:m[4]==="x"?0:parseInt(m[4],10),minorMustEqual:m[4]!=="x",patchBase:m[6]==="x"?0:parseInt(m[6],10),patchMustEqual:m[6]!=="x",preRelease:m[8]||null}:null}e.parseVersion=w;function C(l){if(!l)return null;const m=l.majorBase,u=l.majorMustEqual,h=l.minorBase;let d=l.minorMustEqual;const n=l.patchBase;let o=l.patchMustEqual;l.hasCaret&&(m===0||(d=!1),o=!1);let t=0;if(l.preRelease){const s=I.exec(l.preRelease);if(s){const[,r,c,a]=s;t=Date.UTC(Number(r),Number(c)-1,Number(a))}}return{majorBase:m,majorMustEqual:u,minorBase:h,minorMustEqual:d,patchBase:n,patchMustEqual:o,isMinimum:l.hasGreaterEquals,notBefore:t}}e.normalizeVersion=C;function b(l,m,u){let h;typeof l=="string"?h=C(w(l)):h=l;let d;m instanceof Date?d=m.getTime():typeof m=="string"&&(d=new Date(m).getTime());let n;if(typeof u=="string"?n=C(w(u)):n=u,!h||!n)return!1;const o=h.majorBase,t=h.minorBase,s=h.patchBase;let r=n.majorBase,c=n.minorBase,a=n.patchBase;const v=n.notBefore;let E=n.majorMustEqual,R=n.minorMustEqual,N=n.patchMustEqual;return n.isMinimum?o>r?!0:o<r?!1:t>c?!0:t<c||d&&d<v?!1:s>=a:(o===1&&r===0&&(!E||!R||!N)&&(r=1,c=0,a=0,E=!0,R=!1,N=!1),o<r?!1:o>r?!E:t<c?!1:t>c?!R:s<a?!1:s>a?!N:!(d&&d<v))}e.isValidVersion=b;function p(l,m,u,h,d){const n=[];if(typeof h.publisher<"u"&&typeof h.publisher!="string")return n.push([i.default.Error,k.localize(0,null)]),n;if(typeof h.name!="string")return n.push([i.default.Error,k.localize(1,null,"name")]),n;if(typeof h.version!="string")return n.push([i.default.Error,k.localize(2,null,"version")]),n;if(!h.engines)return n.push([i.default.Error,k.localize(3,null,"engines")]),n;if(typeof h.engines.vscode!="string")return n.push([i.default.Error,k.localize(4,null,"engines.vscode")]),n;if(typeof h.extensionDependencies<"u"&&!y(h.extensionDependencies))return n.push([i.default.Error,k.localize(5,null,"extensionDependencies")]),n;if(typeof h.activationEvents<"u"){if(!y(h.activationEvents))return n.push([i.default.Error,k.localize(6,null,"activationEvents")]),n;if(typeof h.main>"u"&&typeof h.browser>"u")return n.push([i.default.Error,k.localize(7,null,"activationEvents","main")]),n}if(typeof h.extensionKind<"u"&&typeof h.main>"u"&&n.push([i.default.Warning,k.localize(8,null,"extensionKind")]),typeof h.main<"u"){if(typeof h.main!="string")return n.push([i.default.Error,k.localize(9,null,"main")]),n;{const s=(0,D.joinPath)(u,h.main);(0,D.isEqualOrParent)(s,u)||n.push([i.default.Warning,k.localize(10,null,s.path,u.path)])}if(typeof h.activationEvents>"u")return n.push([i.default.Error,k.localize(11,null,"activationEvents","main")]),n}if(typeof h.browser<"u"){if(typeof h.browser!="string")return n.push([i.default.Error,k.localize(12,null,"browser")]),n;{const s=(0,D.joinPath)(u,h.browser);(0,D.isEqualOrParent)(s,u)||n.push([i.default.Warning,k.localize(13,null,s.path,u.path)])}if(typeof h.activationEvents>"u")return n.push([i.default.Error,k.localize(14,null,"activationEvents","browser")]),n}if(!L.valid(h.version))return n.push([i.default.Error,k.localize(15,null)]),n;const o=[];if(!S(l,m,h,d,o))for(const s of o)n.push([i.default.Error,s]);return n}e.validateExtensionManifest=p;function S(l,m,u,h,d){return h||typeof u.main>"u"&&typeof u.browser>"u"?!0:g(l,m,u.engines.vscode,d)}e.isValidExtensionVersion=S;function f(l,m,u){return l==="*"||g(m,u,l)}e.isEngineValid=f;function g(l,m,u,h=[]){const d=C(w(u));if(!d)return h.push(k.localize(16,null,u)),!1;if(d.majorBase===0){if(!d.majorMustEqual||!d.minorMustEqual)return h.push(k.localize(17,null,u)),!1}else if(!d.majorMustEqual)return h.push(k.localize(18,null,u)),!1;return b(l,m,d)?!0:(h.push(k.localize(19,null,l,u)),!1)}function y(l){if(!Array.isArray(l))return!1;for(let m=0,u=l.length;m<u;m++)if(typeof l[m]!="string")return!1;return!0}}),define(se[45],oe([0,1,17,31]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getServiceMachineId=void 0;async function k(L,T,I){let P=I&&I.get("storage.serviceMachineId",-1)||null;if(P)return P;try{const C=(await T.readFile(L.serviceMachineIdResource)).value.toString();P=(0,i.isUUID)(C)?C:null}catch{P=null}if(!P){P=(0,i.generateUuid)();try{await T.writeFile(L.serviceMachineIdResource,D.VSBuffer.fromString(P))}catch{}}return I?.store("storage.serviceMachineId",P,-1,1),P}e.getServiceMachineId=k}),define(se[54],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyncDescriptor=void 0;class D{constructor(k,L=[],T=!1){this.ctor=k,this.staticArguments=L,this.supportsDelayedInstantiation=T}}e.SyncDescriptor=D}),define(se[71],oe([0,1,54]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSingletonServiceDescriptors=e.registerSingleton=e.InstantiationType=void 0;const i=[];var k;(function(I){I[I.Eager=0]="Eager",I[I.Delayed=1]="Delayed"})(k=e.InstantiationType||(e.InstantiationType={}));function L(I,P,w){P instanceof D.SyncDescriptor||(P=new D.SyncDescriptor(P,[],Boolean(w))),i.push([I,P])}e.registerSingleton=L;function T(){return i}e.getSingletonServiceDescriptors=T}),define(se[190],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Node=void 0;class D{constructor(L,T){this.key=L,this.data=T,this.incoming=new Map,this.outgoing=new Map}}e.Node=D;class i{constructor(L){this._hashFn=L,this._nodes=new Map}roots(){const L=[];for(const T of this._nodes.values())T.outgoing.size===0&&L.push(T);return L}insertEdge(L,T){const I=this.lookupOrInsertNode(L),P=this.lookupOrInsertNode(T);I.outgoing.set(P.key,P),P.incoming.set(I.key,I)}removeNode(L){const T=this._hashFn(L);this._nodes.delete(T);for(const I of this._nodes.values())I.outgoing.delete(T),I.incoming.delete(T)}lookupOrInsertNode(L){const T=this._hashFn(L);let I=this._nodes.get(T);return I||(I=new D(T,L),this._nodes.set(T,I)),I}lookup(L){return this._nodes.get(this._hashFn(L))}isEmpty(){return this._nodes.size===0}toString(){const L=[];for(const[T,I]of this._nodes)L.push(`${T}
	(-> incoming)[${[...I.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...I.outgoing.keys()].join(",")}]
`);return L.join(`
`)}findCycleSlow(){for(const[L,T]of this._nodes){const I=new Set([L]),P=this._findCycle(T,I);if(P)return P}}_findCycle(L,T){for(const[I,P]of L.outgoing){if(T.has(I))return[...T,I].join(" -> ");T.add(I);const w=this._findCycle(P,T);if(w)return w;T.delete(I)}}}e.Graph=i}),define(se[4],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var D;(function(T){T.serviceIds=new Map,T.DI_TARGET="$di$target",T.DI_DEPENDENCIES="$di$dependencies";function I(P){return P[T.DI_DEPENDENCIES]||[]}T.getServiceDependencies=I})(D=e._util||(e._util={})),e.IInstantiationService=k("instantiationService");function i(T,I,P){I[D.DI_TARGET]===I?I[D.DI_DEPENDENCIES].push({id:T,index:P}):(I[D.DI_DEPENDENCIES]=[{id:T,index:P}],I[D.DI_TARGET]=I)}function k(T){if(D.serviceIds.has(T))return D.serviceIds.get(T);const I=function(P,w,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(I,P,C)};return I.toString=()=>T,D.serviceIds.set(T,I),I}e.createDecorator=k;function L(T){return T}e.refineServiceDecorator=L}),define(se[191],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IChecksumService=void 0,e.IChecksumService=(0,D.createDecorator)("checksumService")}),define(se[16],oe([0,1,14,7,4]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLanguageTagSettingPlainKey=e.getMigratedSettingValue=e.merge=e.getConfigurationValue=e.removeFromValueTree=e.addToValueTree=e.toValuesTree=e.ConfigurationTargetToString=e.ConfigurationTarget=e.isConfigurationUpdateOverrides=e.isConfigurationOverrides=e.IConfigurationService=void 0,e.IConfigurationService=(0,k.createDecorator)("configurationService");function L(l){return l&&typeof l=="object"&&(!l.overrideIdentifier||typeof l.overrideIdentifier=="string")&&(!l.resource||l.resource instanceof i.URI)}e.isConfigurationOverrides=L;function T(l){return l&&typeof l=="object"&&(!l.overrideIdentifiers||Array.isArray(l.overrideIdentifiers))&&!l.overrideIdentifier&&(!l.resource||l.resource instanceof i.URI)}e.isConfigurationUpdateOverrides=T;var I;(function(l){l[l.APPLICATION=1]="APPLICATION",l[l.USER=2]="USER",l[l.USER_LOCAL=3]="USER_LOCAL",l[l.USER_REMOTE=4]="USER_REMOTE",l[l.WORKSPACE=5]="WORKSPACE",l[l.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",l[l.DEFAULT=7]="DEFAULT",l[l.MEMORY=8]="MEMORY"})(I=e.ConfigurationTarget||(e.ConfigurationTarget={}));function P(l){switch(l){case 1:return"APPLICATION";case 2:return"USER";case 3:return"USER_LOCAL";case 4:return"USER_REMOTE";case 5:return"WORKSPACE";case 6:return"WORKSPACE_FOLDER";case 7:return"DEFAULT";case 8:return"MEMORY"}}e.ConfigurationTargetToString=P;function w(l,m){const u=Object.create(null);for(const h in l)C(u,h,l[h],m);return u}e.toValuesTree=w;function C(l,m,u,h){const d=m.split("."),n=d.pop();let o=l;for(let t=0;t<d.length;t++){const s=d[t];let r=o[s];switch(typeof r){case"undefined":r=o[s]=Object.create(null);break;case"object":break;default:h(`Ignoring ${m} as ${d.slice(0,t+1).join(".")} is ${JSON.stringify(r)}`);return}o=r}if(typeof o=="object"&&o!==null)try{o[n]=u}catch{h(`Ignoring ${m} as ${d.join(".")} is ${JSON.stringify(o)}`)}else h(`Ignoring ${m} as ${d.join(".")} is ${JSON.stringify(o)}`)}e.addToValueTree=C;function b(l,m){const u=m.split(".");p(l,u)}e.removeFromValueTree=b;function p(l,m){const u=m.shift();if(m.length===0){delete l[u];return}if(Object.keys(l).indexOf(u)!==-1){const h=l[u];typeof h=="object"&&!Array.isArray(h)&&(p(h,m),Object.keys(h).length===0&&delete l[u])}}function S(l,m,u){function h(o,t){let s=o;for(const r of t){if(typeof s!="object"||s===null)return;s=s[r]}return s}const d=m.split("."),n=h(l,d);return typeof n>"u"?u:n}e.getConfigurationValue=S;function f(l,m,u){Object.keys(m).forEach(h=>{h!=="__proto__"&&(h in l?D.isObject(l[h])&&D.isObject(m[h])?f(l[h],m[h],u):u&&(l[h]=m[h]):l[h]=m[h])})}e.merge=f;function g(l,m,u){const h=l.inspect(m),d=l.inspect(u);return typeof h.userValue<"u"||typeof h.workspaceValue<"u"||typeof h.workspaceFolderValue<"u"?h.value:typeof d.userValue<"u"||typeof d.workspaceValue<"u"||typeof d.workspaceFolderValue<"u"?d.value:h.defaultValue}e.getMigratedSettingValue=g;function y(l){return l.replace(/[\[\]]/g,"")}e.getLanguageTagSettingPlainKey=y}),define(se[192],oe([0,1,5,27,4]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const L=new Map;L.set("false",!1),L.set("true",!0),L.set("isMac",D.isMacintosh),L.set("isLinux",D.isLinux),L.set("isWindows",D.isWindows),L.set("isWeb",D.isWeb),L.set("isMacNative",D.isMacintosh&&!D.isWeb),L.set("isEdge",D.isEdge),L.set("isFirefox",D.isFirefox),L.set("isChrome",D.isChrome),L.set("isSafari",D.isSafari);const T=Object.prototype.hasOwnProperty;var I;(function(F){F[F.False=0]="False",F[F.True=1]="True",F[F.Defined=2]="Defined",F[F.Not=3]="Not",F[F.Equals=4]="Equals",F[F.NotEquals=5]="NotEquals",F[F.And=6]="And",F[F.Regex=7]="Regex",F[F.NotRegex=8]="NotRegex",F[F.Or=9]="Or",F[F.In=10]="In",F[F.NotIn=11]="NotIn",F[F.Greater=12]="Greater",F[F.GreaterEquals=13]="GreaterEquals",F[F.Smaller=14]="Smaller",F[F.SmallerEquals=15]="SmallerEquals"})(I=e.ContextKeyExprType||(e.ContextKeyExprType={}));class P{static false(){return b.INSTANCE}static true(){return p.INSTANCE}static has(A){return S.create(A)}static equals(A,M){return f.create(A,M)}static notEquals(A,M){return l.create(A,M)}static regex(A,M){return t.create(A,M)}static in(A,M){return g.create(A,M)}static notIn(A,M){return y.create(A,M)}static not(A){return m.create(A)}static and(...A){return c.create(A,null,!0)}static or(...A){return a.create(A,null,!0)}static greater(A,M){return h.create(A,M)}static greaterEquals(A,M){return d.create(A,M)}static smaller(A,M){return n.create(A,M)}static smallerEquals(A,M){return o.create(A,M)}static deserialize(A,M=!1){if(!!A)return this._deserializeOrExpression(A,M)}static _deserializeOrExpression(A,M){const $=A.split("||");return a.create($.map(V=>this._deserializeAndExpression(V,M)),null,!0)}static _deserializeAndExpression(A,M){const $=A.split("&&");return c.create($.map(V=>this._deserializeOne(V,M)),null,!0)}static _deserializeOne(A,M){if(A=A.trim(),A.indexOf("!=")>=0){const $=A.split("!=");return l.create($[0].trim(),this._deserializeValue($[1],M))}if(A.indexOf("==")>=0){const $=A.split("==");return f.create($[0].trim(),this._deserializeValue($[1],M))}if(A.indexOf("=~")>=0){const $=A.split("=~");return t.create($[0].trim(),this._deserializeRegexValue($[1],M))}if(A.indexOf(" not in ")>=0){const $=A.split(" not in ");return y.create($[0].trim(),this._deserializeValue($[1],M))}if(A.indexOf(" in ")>=0){const $=A.split(" in ");return g.create($[0].trim(),this._deserializeValue($[1],M))}if(/^[^<=>]+>=[^<=>]+$/.test(A)){const $=A.split(">=");return d.create($[0].trim(),$[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(A)){const $=A.split(">");return h.create($[0].trim(),$[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(A)){const $=A.split("<=");return o.create($[0].trim(),$[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(A)){const $=A.split("<");return n.create($[0].trim(),$[1].trim())}return/^\!\s*/.test(A)?m.create(A.substr(1).trim()):S.create(A)}static _deserializeValue(A,M){if(A=A.trim(),A==="true")return!0;if(A==="false")return!1;const $=/^'([^']*)'$/.exec(A);return $?$[1].trim():A}static _deserializeRegexValue(A,M){if((0,i.isFalsyOrWhitespace)(A)){if(M)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const $=A.indexOf("/"),V=A.lastIndexOf("/");if($===V||$<0){if(M)throw new Error(`bad regexp-value '${A}', missing /-enclosure`);return console.warn(`bad regexp-value '${A}', missing /-enclosure`),null}const B=A.slice($+1,V),Q=A[V+1]==="i"?"i":"";try{return new RegExp(B,Q)}catch(W){if(M)throw new Error(`bad regexp-value '${A}', parse error: ${W}`);return console.warn(`bad regexp-value '${A}', parse error: ${W}`),null}}}e.ContextKeyExpr=P;function w(F,A){const M=F?F.substituteConstants():void 0,$=A?A.substituteConstants():void 0;return!M&&!$?!0:!M||!$?!1:M.equals($)}e.expressionsAreEqualWithConstantSubstitution=w;function C(F,A){return F.cmp(A)}class b{constructor(){this.type=0}cmp(A){return this.type-A.type}equals(A){return A.type===this.type}substituteConstants(){return this}evaluate(A){return!1}serialize(){return"false"}keys(){return[]}map(A){return this}negate(){return p.INSTANCE}}e.ContextKeyFalseExpr=b,b.INSTANCE=new b;class p{constructor(){this.type=1}cmp(A){return this.type-A.type}equals(A){return A.type===this.type}substituteConstants(){return this}evaluate(A){return!0}serialize(){return"true"}keys(){return[]}map(A){return this}negate(){return b.INSTANCE}}e.ContextKeyTrueExpr=p,p.INSTANCE=new p;class S{static create(A,M=null){const $=L.get(A);return typeof $=="boolean"?$?p.INSTANCE:b.INSTANCE:new S(A,M)}constructor(A,M){this.key=A,this.negated=M,this.type=2}cmp(A){return A.type!==this.type?this.type-A.type:E(this.key,A.key)}equals(A){return A.type===this.type?this.key===A.key:!1}substituteConstants(){const A=L.get(this.key);return typeof A=="boolean"?A?p.INSTANCE:b.INSTANCE:this}evaluate(A){return!!A.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(A){return A.mapDefined(this.key)}negate(){return this.negated||(this.negated=m.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=S;class f{static create(A,M,$=null){if(typeof M=="boolean")return M?S.create(A,$):m.create(A,$);const V=L.get(A);return typeof V=="boolean"?M===(V?"true":"false")?p.INSTANCE:b.INSTANCE:new f(A,M,$)}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=4}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){const A=L.get(this.key);if(typeof A=="boolean"){const M=A?"true":"false";return this.value===M?p.INSTANCE:b.INSTANCE}return this}evaluate(A){return A.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(A){return A.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=l.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=f;class g{static create(A,M){return new g(A,M)}constructor(A,M){this.key=A,this.valueKey=M,this.type=10,this.negated=null}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.valueKey,A.key,A.valueKey)}equals(A){return A.type===this.type?this.key===A.key&&this.valueKey===A.valueKey:!1}substituteConstants(){return this}evaluate(A){const M=A.getValue(this.valueKey),$=A.getValue(this.key);return Array.isArray(M)?M.includes($):typeof $=="string"&&typeof M=="object"&&M!==null?T.call(M,$):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(A){return A.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=y.create(this.key,this.valueKey)),this.negated}}e.ContextKeyInExpr=g;class y{static create(A,M){return new y(A,M)}constructor(A,M){this.key=A,this.valueKey=M,this.type=11,this._negated=g.create(A,M)}cmp(A){return A.type!==this.type?this.type-A.type:this._negated.cmp(A._negated)}equals(A){return A.type===this.type?this._negated.equals(A._negated):!1}substituteConstants(){return this}evaluate(A){return!this._negated.evaluate(A)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(A){return A.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}e.ContextKeyNotInExpr=y;class l{static create(A,M,$=null){if(typeof M=="boolean")return M?m.create(A,$):S.create(A,$);const V=L.get(A);return typeof V=="boolean"?M===(V?"true":"false")?b.INSTANCE:p.INSTANCE:new l(A,M,$)}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=5}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){const A=L.get(this.key);if(typeof A=="boolean"){const M=A?"true":"false";return this.value===M?b.INSTANCE:p.INSTANCE}return this}evaluate(A){return A.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(A){return A.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=f.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=l;class m{static create(A,M=null){const $=L.get(A);return typeof $=="boolean"?$?b.INSTANCE:p.INSTANCE:new m(A,M)}constructor(A,M){this.key=A,this.negated=M,this.type=3}cmp(A){return A.type!==this.type?this.type-A.type:E(this.key,A.key)}equals(A){return A.type===this.type?this.key===A.key:!1}substituteConstants(){const A=L.get(this.key);return typeof A=="boolean"?A?b.INSTANCE:p.INSTANCE:this}evaluate(A){return!A.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(A){return A.mapNot(this.key)}negate(){return this.negated||(this.negated=S.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=m;function u(F,A){if(typeof F=="string"){const M=parseFloat(F);isNaN(M)||(F=M)}return typeof F=="string"||typeof F=="number"?A(F):b.INSTANCE}class h{static create(A,M,$=null){return u(M,V=>new h(A,V,$))}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=12}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){return this}evaluate(A){return typeof this.value=="string"?!1:parseFloat(A.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(A){return A.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=o.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=h;class d{static create(A,M,$=null){return u(M,V=>new d(A,V,$))}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=13}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){return this}evaluate(A){return typeof this.value=="string"?!1:parseFloat(A.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(A){return A.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=n.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=d;class n{static create(A,M,$=null){return u(M,V=>new n(A,V,$))}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=14}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){return this}evaluate(A){return typeof this.value=="string"?!1:parseFloat(A.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(A){return A.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=d.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=n;class o{static create(A,M,$=null){return u(M,V=>new o(A,V,$))}constructor(A,M,$){this.key=A,this.value=M,this.negated=$,this.type=15}cmp(A){return A.type!==this.type?this.type-A.type:R(this.key,this.value,A.key,A.value)}equals(A){return A.type===this.type?this.key===A.key&&this.value===A.value:!1}substituteConstants(){return this}evaluate(A){return typeof this.value=="string"?!1:parseFloat(A.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(A){return A.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=h.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=o;class t{static create(A,M){return new t(A,M)}constructor(A,M){this.key=A,this.regexp=M,this.type=7,this.negated=null}cmp(A){if(A.type!==this.type)return this.type-A.type;if(this.key<A.key)return-1;if(this.key>A.key)return 1;const M=this.regexp?this.regexp.source:"",$=A.regexp?A.regexp.source:"";return M<$?-1:M>$?1:0}equals(A){if(A.type===this.type){const M=this.regexp?this.regexp.source:"",$=A.regexp?A.regexp.source:"";return this.key===A.key&&M===$}return!1}substituteConstants(){return this}evaluate(A){const M=A.getValue(this.key);return this.regexp?this.regexp.test(M):!1}serialize(){const A=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${A}`}keys(){return[this.key]}map(A){return A.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=s.create(this)),this.negated}}e.ContextKeyRegexExpr=t;class s{static create(A){return new s(A)}constructor(A){this._actual=A,this.type=8}cmp(A){return A.type!==this.type?this.type-A.type:this._actual.cmp(A._actual)}equals(A){return A.type===this.type?this._actual.equals(A._actual):!1}substituteConstants(){return this}evaluate(A){return!this._actual.evaluate(A)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(A){return new s(this._actual.map(A))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=s;function r(F){let A=null;for(let M=0,$=F.length;M<$;M++){const V=F[M].substituteConstants();if(F[M]!==V&&A===null){A=[];for(let B=0;B<M;B++)A[B]=F[B]}A!==null&&(A[M]=V)}return A===null?F:A}class c{static create(A,M,$){return c._normalizeArr(A,M,$)}constructor(A,M){this.expr=A,this.negated=M,this.type=6}cmp(A){if(A.type!==this.type)return this.type-A.type;if(this.expr.length<A.expr.length)return-1;if(this.expr.length>A.expr.length)return 1;for(let M=0,$=this.expr.length;M<$;M++){const V=C(this.expr[M],A.expr[M]);if(V!==0)return V}return 0}equals(A){if(A.type===this.type){if(this.expr.length!==A.expr.length)return!1;for(let M=0,$=this.expr.length;M<$;M++)if(!this.expr[M].equals(A.expr[M]))return!1;return!0}return!1}substituteConstants(){const A=r(this.expr);return A===this.expr?this:c.create(A,this.negated,!1)}evaluate(A){for(let M=0,$=this.expr.length;M<$;M++)if(!this.expr[M].evaluate(A))return!1;return!0}static _normalizeArr(A,M,$){const V=[];let B=!1;for(const Q of A)if(!!Q){if(Q.type===1){B=!0;continue}if(Q.type===0)return b.INSTANCE;if(Q.type===6){V.push(...Q.expr);continue}V.push(Q)}if(V.length===0&&B)return p.INSTANCE;if(V.length!==0){if(V.length===1)return V[0];V.sort(C);for(let Q=1;Q<V.length;Q++)V[Q-1].equals(V[Q])&&(V.splice(Q,1),Q--);if(V.length===1)return V[0];for(;V.length>1;){const Q=V[V.length-1];if(Q.type!==9)break;V.pop();const W=V.pop(),q=V.length===0,G=a.create(Q.expr.map(ee=>c.create([ee,W],null,$)),null,q);G&&(V.push(G),V.sort(C))}if(V.length===1)return V[0];if($){for(let Q=0;Q<V.length;Q++)for(let W=Q+1;W<V.length;W++)if(V[Q].negate().equals(V[W]))return b.INSTANCE;if(V.length===1)return V[0]}return new c(V,M)}}serialize(){return this.expr.map(A=>A.serialize()).join(" && ")}keys(){const A=[];for(const M of this.expr)A.push(...M.keys());return A}map(A){return new c(this.expr.map(M=>M.map(A)),null)}negate(){if(!this.negated){const A=[];for(const M of this.expr)A.push(M.negate());this.negated=a.create(A,this,!0)}return this.negated}}class a{static create(A,M,$){return a._normalizeArr(A,M,$)}constructor(A,M){this.expr=A,this.negated=M,this.type=9}cmp(A){if(A.type!==this.type)return this.type-A.type;if(this.expr.length<A.expr.length)return-1;if(this.expr.length>A.expr.length)return 1;for(let M=0,$=this.expr.length;M<$;M++){const V=C(this.expr[M],A.expr[M]);if(V!==0)return V}return 0}equals(A){if(A.type===this.type){if(this.expr.length!==A.expr.length)return!1;for(let M=0,$=this.expr.length;M<$;M++)if(!this.expr[M].equals(A.expr[M]))return!1;return!0}return!1}substituteConstants(){const A=r(this.expr);return A===this.expr?this:a.create(A,this.negated,!1)}evaluate(A){for(let M=0,$=this.expr.length;M<$;M++)if(this.expr[M].evaluate(A))return!0;return!1}static _normalizeArr(A,M,$){let V=[],B=!1;if(A){for(let Q=0,W=A.length;Q<W;Q++){const q=A[Q];if(!!q){if(q.type===0){B=!0;continue}if(q.type===1)return p.INSTANCE;if(q.type===9){V=V.concat(q.expr);continue}V.push(q)}}if(V.length===0&&B)return b.INSTANCE;V.sort(C)}if(V.length!==0){if(V.length===1)return V[0];for(let Q=1;Q<V.length;Q++)V[Q-1].equals(V[Q])&&(V.splice(Q,1),Q--);if(V.length===1)return V[0];if($){for(let Q=0;Q<V.length;Q++)for(let W=Q+1;W<V.length;W++)if(V[Q].negate().equals(V[W]))return p.INSTANCE;if(V.length===1)return V[0]}return new a(V,M)}}serialize(){return this.expr.map(A=>A.serialize()).join(" || ")}keys(){const A=[];for(const M of this.expr)A.push(...M.keys());return A}map(A){return new a(this.expr.map(M=>M.map(A)),null)}negate(){if(!this.negated){const A=[];for(const M of this.expr)A.push(M.negate());for(;A.length>1;){const M=A.shift(),$=A.shift(),V=[];for(const B of z(M))for(const Q of z($))V.push(c.create([B,Q],null,!1));A.unshift(a.create(V,null,!1))}this.negated=a.create(A,this,!0)}return this.negated}}class v extends S{static all(){return v._info.values()}constructor(A,M,$){super(A,null),this._defaultValue=M,typeof $=="object"?v._info.push({...$,key:A}):$!==!0&&v._info.push({key:A,description:$,type:M!=null?typeof M:void 0})}bindTo(A){return A.createKey(this.key,this._defaultValue)}getValue(A){return A.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(A){return f.create(this.key,A)}notEqualsTo(A){return l.create(this.key,A)}}e.RawContextKey=v,v._info=[],e.IContextKeyService=(0,k.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function E(F,A){return F<A?-1:F>A?1:0}function R(F,A,M,$){return F<M?-1:F>M?1:A<$?-1:A>$?1:0}function N(F,A){if(F.type===0||A.type===1)return!0;if(F.type===9)return A.type===9?O(F.expr,A.expr):!1;if(A.type===9){for(const M of A.expr)if(N(F,M))return!0;return!1}if(F.type===6){if(A.type===6)return O(A.expr,F.expr);for(const M of F.expr)if(N(M,A))return!0;return!1}return F.equals(A)}e.implies=N;function O(F,A){let M=0,$=0;for(;M<F.length&&$<A.length;){const V=F[M].cmp(A[$]);if(V<0)return!1;V===0&&M++,$++}return M===F.length}function z(F){return F.type===9?F.expr:[F]}}),define(se[96],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullDiagnosticsService=e.isRemoteDiagnosticError=e.IDiagnosticsService=e.ID=void 0,e.ID="diagnosticsService",e.IDiagnosticsService=(0,D.createDecorator)(e.ID);function i(L){return!!L.hostName&&!!L.errorMessage}e.isRemoteDiagnosticError=i;class k{async getPerformanceInfo(T,I){return{}}async getSystemInfo(T,I){return{processArgs:"nullProcessArgs",gpuStatus:"nullGpuStatus",screenReader:"nullScreenReader",remoteData:[],os:"nullOs",memory:"nullMemory",vmHint:"nullVmHint"}}async getDiagnostics(T,I){return""}async getWorkspaceFileExtensions(T){return{extensions:[]}}async reportWorkspaceStats(T){}}e.NullDiagnosticsService=k}),define(se[97],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IDownloadService=void 0,e.IDownloadService=(0,D.createDecorator)("downloadService")}),define(se[15],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INativeEnvironmentService=e.IEnvironmentService=void 0,e.IEnvironmentService=(0,D.createDecorator)("environmentService"),e.INativeEnvironmentService=(0,D.refineServiceDecorator)(e.IEnvironmentService)}),define(se[29],oe([0,1,156,4]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferencesLocalizedLabel=e.PreferencesLabel=e.ExtensionsLocalizedLabel=e.ExtensionsLabel=e.IExtensionTipsService=e.IGlobalExtensionEnablementService=e.ENABLED_EXTENSIONS_STORAGE_PATH=e.DISABLED_EXTENSIONS_STORAGE_PATH=e.IExtensionManagementService=e.ExtensionManagementError=e.ExtensionManagementErrorCode=e.IExtensionGalleryService=e.InstallOperation=e.StatisticType=e.SortOrder=e.SortBy=e.isIExtensionIdentifier=e.getFallbackTargetPlarforms=e.isTargetPlatformCompatible=e.isNotWebExtensionInWebTargetPlatform=e.getTargetPlatform=e.toTargetPlatform=e.TargetPlatformToString=e.WEB_EXTENSION_TAG=e.EXTENSION_IDENTIFIER_REGEX=e.EXTENSION_IDENTIFIER_PATTERN=void 0,e.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",e.EXTENSION_IDENTIFIER_REGEX=new RegExp(e.EXTENSION_IDENTIFIER_PATTERN),e.WEB_EXTENSION_TAG="__web_extension";function k(l){switch(l){case"win32-x64":return"Windows 64 bit";case"win32-ia32":return"Windows 32 bit";case"win32-arm64":return"Windows ARM";case"linux-x64":return"Linux 64 bit";case"linux-arm64":return"Linux ARM 64";case"linux-armhf":return"Linux ARM";case"alpine-x64":return"Alpine Linux 64 bit";case"alpine-arm64":return"Alpine ARM 64";case"darwin-x64":return"Mac";case"darwin-arm64":return"Mac Silicon";case"web":return"Web";case"universal":return"universal";case"unknown":return"unknown";case"undefined":return"undefined"}}e.TargetPlatformToString=k;function L(l){switch(l){case"win32-x64":return"win32-x64";case"win32-ia32":return"win32-ia32";case"win32-arm64":return"win32-arm64";case"linux-x64":return"linux-x64";case"linux-arm64":return"linux-arm64";case"linux-armhf":return"linux-armhf";case"alpine-x64":return"alpine-x64";case"alpine-arm64":return"alpine-arm64";case"darwin-x64":return"darwin-x64";case"darwin-arm64":return"darwin-arm64";case"web":return"web";case"universal":return"universal";default:return"unknown"}}e.toTargetPlatform=L;function T(l,m){switch(l){case 3:return m==="x64"?"win32-x64":m==="ia32"?"win32-ia32":m==="arm64"?"win32-arm64":"unknown";case 2:return m==="x64"?"linux-x64":m==="arm64"?"linux-arm64":m==="arm"?"linux-armhf":"unknown";case"alpine":return m==="x64"?"alpine-x64":m==="arm64"?"alpine-arm64":"unknown";case 1:return m==="x64"?"darwin-x64":m==="arm64"?"darwin-arm64":"unknown";case 0:return"web"}}e.getTargetPlatform=T;function I(l,m){return m==="web"&&!l.includes("web")}e.isNotWebExtensionInWebTargetPlatform=I;function P(l,m,u){return I(m,u)?!1:l==="undefined"||l==="universal"?!0:l==="unknown"?!1:l===u?!0:w(u).includes(l)}e.isTargetPlatformCompatible=P;function w(l){switch(l){case"win32-x64":return["win32-ia32"];case"win32-arm64":return["win32-ia32"]}return[]}e.getFallbackTargetPlarforms=w;function C(l){return l&&typeof l=="object"&&typeof l.id=="string"&&(!l.uuid||typeof l.uuid=="string")}e.isIExtensionIdentifier=C;var b;(function(l){l[l.NoneOrRelevance=0]="NoneOrRelevance",l[l.LastUpdatedDate=1]="LastUpdatedDate",l[l.Title=2]="Title",l[l.PublisherName=3]="PublisherName",l[l.InstallCount=4]="InstallCount",l[l.PublishedDate=10]="PublishedDate",l[l.AverageRating=6]="AverageRating",l[l.WeightedRating=12]="WeightedRating"})(b=e.SortBy||(e.SortBy={}));var p;(function(l){l[l.Default=0]="Default",l[l.Ascending=1]="Ascending",l[l.Descending=2]="Descending"})(p=e.SortOrder||(e.SortOrder={}));var S;(function(l){l.Install="install",l.Uninstall="uninstall"})(S=e.StatisticType||(e.StatisticType={}));var f;(function(l){l[l.None=1]="None",l[l.Install=2]="Install",l[l.Update=3]="Update",l[l.Migrate=4]="Migrate"})(f=e.InstallOperation||(e.InstallOperation={})),e.IExtensionGalleryService=(0,i.createDecorator)("extensionGalleryService");var g;(function(l){l.Unsupported="Unsupported",l.Deprecated="Deprecated",l.Malicious="Malicious",l.Incompatible="Incompatible",l.IncompatiblePreRelease="IncompatiblePreRelease",l.IncompatibleTargetPlatform="IncompatibleTargetPlatform",l.ReleaseVersionNotFound="ReleaseVersionNotFound",l.Invalid="Invalid",l.Download="Download",l.Extract="Extract",l.Delete="Delete",l.Rename="Rename",l.CorruptZip="CorruptZip",l.IncompleteZip="IncompleteZip",l.Internal="Internal",l.Signature="Signature"})(g=e.ExtensionManagementErrorCode||(e.ExtensionManagementErrorCode={}));class y extends Error{constructor(m,u){super(m),this.code=u,this.name=u}}e.ExtensionManagementError=y,e.IExtensionManagementService=(0,i.createDecorator)("extensionManagementService"),e.DISABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/disabled",e.ENABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/enabled",e.IGlobalExtensionEnablementService=(0,i.createDecorator)("IGlobalExtensionEnablementService"),e.IExtensionTipsService=(0,i.createDecorator)("IExtensionTipsService"),e.ExtensionsLabel=(0,D.localize)(0,null),e.ExtensionsLocalizedLabel={value:e.ExtensionsLabel,original:"Extensions"},e.PreferencesLabel=(0,D.localize)(1,null),e.PreferencesLocalizedLabel={value:e.PreferencesLabel,original:"Preferences"}}),define(se[193],oe([0,1,3,2,67,32,7,143,29]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionTipsChannel=e.ExtensionManagementChannelClient=e.ExtensionManagementChannel=void 0;function w(y,l){return T.URI.revive(l?l.transformIncoming(y):y)}function C(y,l){return l?l.transformOutgoingURI(y):y}function b(y,l){l=l||I.DefaultURITransformer;const m=y.manifest;return{...(0,I.transformAndReviveIncomingURIs)({...y,manifest:void 0},l),manifest:m}}function p(y,l){return l?(0,L.cloneAndChange)(y,m=>m instanceof T.URI?l.transformOutgoingURI(m):void 0):y}class S{constructor(l,m){this.service=l,this.getUriTransformer=m,this.onInstallExtension=D.Event.buffer(l.onInstallExtension,!0),this.onDidInstallExtensions=D.Event.buffer(l.onDidInstallExtensions,!0),this.onUninstallExtension=D.Event.buffer(l.onUninstallExtension,!0),this.onDidUninstallExtension=D.Event.buffer(l.onDidUninstallExtension,!0)}listen(l,m){const u=this.getUriTransformer(l);switch(m){case"onInstallExtension":return this.onInstallExtension;case"onDidInstallExtensions":return D.Event.map(this.onDidInstallExtensions,h=>h.map(d=>({...d,local:d.local?p(d.local,u):d.local})));case"onUninstallExtension":return this.onUninstallExtension;case"onDidUninstallExtension":return this.onDidUninstallExtension}throw new Error("Invalid listen")}call(l,m,u){const h=this.getUriTransformer(l);switch(m){case"zip":return this.service.zip(b(u[0],h)).then(d=>C(d,h));case"unzip":return this.service.unzip(w(u[0],h));case"install":return this.service.install(w(u[0],h),(0,k.revive)(u[1]));case"installFromLocation":return this.service.installFromLocation(w(u[0],h),T.URI.revive(u[1]));case"getManifest":return this.service.getManifest(w(u[0],h));case"getTargetPlatform":return this.service.getTargetPlatform();case"canInstall":return this.service.canInstall(u[0]);case"installFromGallery":return this.service.installFromGallery(u[0],(0,k.revive)(u[1]));case"uninstall":return this.service.uninstall(b(u[0],h),(0,k.revive)(u[1]));case"reinstallFromGallery":return this.service.reinstallFromGallery(b(u[0],h));case"getInstalled":return this.service.getInstalled(u[0],T.URI.revive(u[1])).then(d=>d.map(n=>p(n,h)));case"getMetadata":return this.service.getMetadata(b(u[0],h));case"updateMetadata":return this.service.updateMetadata(b(u[0],h),u[1]).then(d=>p(d,h));case"updateExtensionScope":return this.service.updateExtensionScope(b(u[0],h),u[1]).then(d=>p(d,h));case"getExtensionsControlManifest":return this.service.getExtensionsControlManifest();case"download":return this.service.download(u[0],u[1])}throw new Error("Invalid call")}}e.ExtensionManagementChannel=S;class f extends i.Disposable{get onInstallExtension(){return this._onInstallExtension.event}get onDidInstallExtensions(){return this._onDidInstallExtensions.event}get onUninstallExtension(){return this._onUninstallExtension.event}get onDidUninstallExtension(){return this._onDidUninstallExtension.event}constructor(l){super(),this.channel=l,this._onInstallExtension=this._register(new D.Emitter),this._onDidInstallExtensions=this._register(new D.Emitter),this._onUninstallExtension=this._register(new D.Emitter),this._onDidUninstallExtension=this._register(new D.Emitter),this._register(this.channel.listen("onInstallExtension")(m=>this._onInstallExtension.fire({identifier:m.identifier,source:this.isUriComponents(m.source)?T.URI.revive(m.source):m.source,profileLocation:T.URI.revive(m.profileLocation)}))),this._register(this.channel.listen("onDidInstallExtensions")(m=>this._onDidInstallExtensions.fire(m.map(u=>({...u,local:u.local?b(u.local,null):u.local,source:this.isUriComponents(u.source)?T.URI.revive(u.source):u.source,profileLocation:T.URI.revive(u.profileLocation)}))))),this._register(this.channel.listen("onUninstallExtension")(m=>this._onUninstallExtension.fire({identifier:m.identifier,profileLocation:T.URI.revive(m.profileLocation)}))),this._register(this.channel.listen("onDidUninstallExtension")(m=>this._onDidUninstallExtension.fire({...m,profileLocation:T.URI.revive(m.profileLocation)})))}isUriComponents(l){return l?typeof l.path=="string"&&typeof l.scheme=="string":!1}getTargetPlatform(){return this._targetPlatformPromise||(this._targetPlatformPromise=this.channel.call("getTargetPlatform")),this._targetPlatformPromise}async canInstall(l){const m=await this.getTargetPlatform();return l.allTargetPlatforms.some(u=>(0,P.isTargetPlatformCompatible)(u,l.allTargetPlatforms,m))}zip(l){return Promise.resolve(this.channel.call("zip",[l]).then(m=>T.URI.revive(m)))}unzip(l){return Promise.resolve(this.channel.call("unzip",[l]))}install(l,m){return Promise.resolve(this.channel.call("install",[l,m])).then(u=>b(u,null))}installFromLocation(l,m){return Promise.resolve(this.channel.call("installFromLocation",[l,m])).then(u=>b(u,null))}getManifest(l){return Promise.resolve(this.channel.call("getManifest",[l]))}installFromGallery(l,m){return Promise.resolve(this.channel.call("installFromGallery",[l,m])).then(u=>b(u,null))}uninstall(l,m){return Promise.resolve(this.channel.call("uninstall",[l,m]))}reinstallFromGallery(l){return Promise.resolve(this.channel.call("reinstallFromGallery",[l]))}getInstalled(l=null,m){return Promise.resolve(this.channel.call("getInstalled",[l,m])).then(u=>u.map(h=>b(h,null)))}getMetadata(l){return Promise.resolve(this.channel.call("getMetadata",[l]))}updateMetadata(l,m){return Promise.resolve(this.channel.call("updateMetadata",[l,m])).then(u=>b(u,null))}updateExtensionScope(l,m){return Promise.resolve(this.channel.call("updateExtensionScope",[l,m])).then(u=>b(u,null))}getExtensionsControlManifest(){return Promise.resolve(this.channel.call("getExtensionsControlManifest"))}async download(l,m){const u=await this.channel.call("download",[l,m]);return T.URI.revive(u)}registerParticipant(){throw new Error("Not Supported")}}e.ExtensionManagementChannelClient=f;class g{constructor(l){this.service=l}listen(l,m){throw new Error("Invalid listen")}call(l,m,u){switch(m){case"getConfigBasedTips":return this.service.getConfigBasedTips(T.URI.revive(u[0]));case"getImportantExecutableBasedTips":return this.service.getImportantExecutableBasedTips();case"getOtherExecutableBasedTips":return this.service.getOtherExecutableBasedTips()}throw new Error("Invalid call")}}e.ExtensionTipsChannel=g}),define(se[98],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionSignatureVerificationService=e.IExtensionSignatureVerificationService=void 0,e.IExtensionSignatureVerificationService=(0,D.createDecorator)("IExtensionSignatureVerificationService");class i{vsceSign(){return this.moduleLoadingPromise||(this.moduleLoadingPromise=new Promise((L,T)=>Z(["node-vsce-sign"],async I=>L(I),T))),this.moduleLoadingPromise}async verify(L,T){let I;try{I=await this.vsceSign()}catch{return!1}return I.verify(L,T)}}e.ExtensionSignatureVerificationService=i}),define(se[99],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IExtensionRecommendationNotificationService=e.RecommendationsNotificationResult=e.RecommendationSourceToString=e.RecommendationSource=void 0;var i;(function(T){T[T.FILE=1]="FILE",T[T.WORKSPACE=2]="WORKSPACE",T[T.EXE=3]="EXE"})(i=e.RecommendationSource||(e.RecommendationSource={}));function k(T){switch(T){case 1:return"file";case 2:return"workspace";case 3:return"exe"}}e.RecommendationSourceToString=k;var L;(function(T){T.Ignored="ignored",T.Cancelled="cancelled",T.TooMany="toomany",T.IncompatibleWindow="incompatibleWindow",T.Accepted="reacted"})(L=e.RecommendationsNotificationResult||(e.RecommendationsNotificationResult={})),e.IExtensionRecommendationNotificationService=(0,D.createDecorator)("IExtensionRecommendationNotificationService")}),define(se[13],oe([0,1,48,12,27,14,7,164,4]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPlatformLimits=e.Arch=e.ByteSize=e.FALLBACK_MAX_MEMORY_SIZE_MB=e.MIN_MAX_MEMORY_SIZE_MB=e.whenProviderRegistered=e.etag=e.ETAG_DISABLED=e.FileKind=e.FILES_EXCLUDE_CONFIG=e.FILES_ASSOCIATIONS_CONFIG=e.HotExitConfiguration=e.AutoSaveConfiguration=e.FileOperationResult=e.NotModifiedSinceFileOperationError=e.FileOperationError=e.isParent=e.FileChangesEvent=e.FileChangeType=e.FileOperationEvent=e.FileOperation=e.toFileOperationResult=e.toFileSystemProviderErrorCode=e.markAsFileSystemProviderError=e.ensureFileSystemProviderError=e.createFileSystemProviderError=e.FileSystemProviderError=e.FileSystemProviderErrorCode=e.hasFileAtomicReadCapability=e.hasFileReadStreamCapability=e.hasOpenReadWriteCloseCapability=e.hasFileCloneCapability=e.hasFileFolderCopyCapability=e.hasReadWriteCapability=e.FileSystemProviderCapabilities=e.FilePermission=e.FileType=e.isFileOpenForWriteOptions=e.IFileService=void 0,e.IFileService=(0,P.createDecorator)("fileService");function w(B){return B.create===!0}e.isFileOpenForWriteOptions=w;var C;(function(B){B[B.Unknown=0]="Unknown",B[B.File=1]="File",B[B.Directory=2]="Directory",B[B.SymbolicLink=64]="SymbolicLink"})(C=e.FileType||(e.FileType={}));var b;(function(B){B[B.Readonly=1]="Readonly"})(b=e.FilePermission||(e.FilePermission={}));var p;(function(B){B[B.FileReadWrite=2]="FileReadWrite",B[B.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",B[B.FileReadStream=16]="FileReadStream",B[B.FileFolderCopy=8]="FileFolderCopy",B[B.PathCaseSensitive=1024]="PathCaseSensitive",B[B.Readonly=2048]="Readonly",B[B.Trash=4096]="Trash",B[B.FileWriteUnlock=8192]="FileWriteUnlock",B[B.FileAtomicRead=16384]="FileAtomicRead",B[B.FileClone=32768]="FileClone"})(p=e.FileSystemProviderCapabilities||(e.FileSystemProviderCapabilities={}));function S(B){return!!(B.capabilities&2)}e.hasReadWriteCapability=S;function f(B){return!!(B.capabilities&8)}e.hasFileFolderCopyCapability=f;function g(B){return!!(B.capabilities&32768)}e.hasFileCloneCapability=g;function y(B){return!!(B.capabilities&4)}e.hasOpenReadWriteCloseCapability=y;function l(B){return!!(B.capabilities&16)}e.hasFileReadStreamCapability=l;function m(B){return S(B)?!!(B.capabilities&16384):!1}e.hasFileAtomicReadCapability=m;var u;(function(B){B.FileExists="EntryExists",B.FileNotFound="EntryNotFound",B.FileNotADirectory="EntryNotADirectory",B.FileIsADirectory="EntryIsADirectory",B.FileExceedsMemoryLimit="EntryExceedsMemoryLimit",B.FileTooLarge="EntryTooLarge",B.FileWriteLocked="EntryWriteLocked",B.NoPermissions="NoPermissions",B.Unavailable="Unavailable",B.Unknown="Unknown"})(u=e.FileSystemProviderErrorCode||(e.FileSystemProviderErrorCode={}));class h extends Error{constructor(Q,W){super(Q),this.code=W}}e.FileSystemProviderError=h;function d(B,Q){const W=new h(B.toString(),Q);return o(W,Q),W}e.createFileSystemProviderError=d;function n(B){return B||d((0,I.localize)(0,null),u.Unknown)}e.ensureFileSystemProviderError=n;function o(B,Q){return B.name=Q?`${Q} (FileSystemError)`:"FileSystemError",B}e.markAsFileSystemProviderError=o;function t(B){if(!B)return u.Unknown;if(B instanceof h)return B.code;const Q=/^(.+) \(FileSystemError\)$/.exec(B.name);if(!Q)return u.Unknown;switch(Q[1]){case u.FileExists:return u.FileExists;case u.FileIsADirectory:return u.FileIsADirectory;case u.FileNotADirectory:return u.FileNotADirectory;case u.FileNotFound:return u.FileNotFound;case u.FileExceedsMemoryLimit:return u.FileExceedsMemoryLimit;case u.FileTooLarge:return u.FileTooLarge;case u.FileWriteLocked:return u.FileWriteLocked;case u.NoPermissions:return u.NoPermissions;case u.Unavailable:return u.Unavailable}return u.Unknown}e.toFileSystemProviderErrorCode=t;function s(B){if(B instanceof R)return B.fileOperationResult;switch(t(B)){case u.FileNotFound:return 1;case u.FileIsADirectory:return 0;case u.FileNotADirectory:return 10;case u.FileWriteLocked:return 5;case u.NoPermissions:return 6;case u.FileExists:return 4;case u.FileExceedsMemoryLimit:return 9;case u.FileTooLarge:return 7;default:return 11}}e.toFileOperationResult=s;var r;(function(B){B[B.CREATE=0]="CREATE",B[B.DELETE=1]="DELETE",B[B.MOVE=2]="MOVE",B[B.COPY=3]="COPY",B[B.WRITE=4]="WRITE"})(r=e.FileOperation||(e.FileOperation={}));class c{constructor(Q,W,q){this.resource=Q,this.operation=W,this.target=q}isOperation(Q){return this.operation===Q}}e.FileOperationEvent=c;var a;(function(B){B[B.UPDATED=0]="UPDATED",B[B.ADDED=1]="ADDED",B[B.DELETED=2]="DELETED"})(a=e.FileChangeType||(e.FileChangeType={}));class v{constructor(Q,W){this.added=void 0,this.updated=void 0,this.deleted=void 0,this.rawChanges=[],this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[],this.rawChanges=Q;const q=new Map;for(const G of Q){const ee=q.get(G.type);switch(ee?ee.push([G.resource,G]):q.set(G.type,[[G.resource,G]]),G.type){case 1:this.rawAdded.push(G.resource);break;case 0:this.rawUpdated.push(G.resource);break;case 2:this.rawDeleted.push(G.resource);break}}for(const[G,ee]of q)switch(G){case 1:this.added=D.TernarySearchTree.forUris(()=>W),this.added.fill(ee);break;case 0:this.updated=D.TernarySearchTree.forUris(()=>W),this.updated.fill(ee);break;case 2:this.deleted=D.TernarySearchTree.forUris(()=>W),this.deleted.fill(ee);break}}contains(Q,...W){return this.doContains(Q,{includeChildren:!1},...W)}affects(Q,...W){return this.doContains(Q,{includeChildren:!0},...W)}doContains(Q,W,...q){if(!Q)return!1;const G=q.length>0;return!!((!G||q.includes(1))&&(this.added?.get(Q)||W.includeChildren&&this.added?.findSuperstr(Q))||(!G||q.includes(0))&&(this.updated?.get(Q)||W.includeChildren&&this.updated?.findSuperstr(Q))||(!G||q.includes(2))&&(this.deleted?.findSubstr(Q)||W.includeChildren&&this.deleted?.findSuperstr(Q)))}gotAdded(){return!!this.added}gotDeleted(){return!!this.deleted}gotUpdated(){return!!this.updated}}e.FileChangesEvent=v;function E(B,Q,W){return!B||!Q||B===Q||Q.length>B.length?!1:(Q.charAt(Q.length-1)!==i.sep&&(Q+=i.sep),W?(0,k.startsWithIgnoreCase)(B,Q):B.indexOf(Q)===0)}e.isParent=E;class R extends Error{constructor(Q,W,q){super(Q),this.fileOperationResult=W,this.options=q}}e.FileOperationError=R;class N extends R{constructor(Q,W,q){super(Q,2,q),this.stat=W}}e.NotModifiedSinceFileOperationError=N;var O;(function(B){B[B.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",B[B.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",B[B.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",B[B.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",B[B.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",B[B.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",B[B.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",B[B.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",B[B.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",B[B.FILE_EXCEEDS_MEMORY_LIMIT=9]="FILE_EXCEEDS_MEMORY_LIMIT",B[B.FILE_NOT_DIRECTORY=10]="FILE_NOT_DIRECTORY",B[B.FILE_OTHER_ERROR=11]="FILE_OTHER_ERROR"})(O=e.FileOperationResult||(e.FileOperationResult={})),e.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},e.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},e.FILES_ASSOCIATIONS_CONFIG="files.associations",e.FILES_EXCLUDE_CONFIG="files.exclude";var z;(function(B){B[B.FILE=0]="FILE",B[B.FOLDER=1]="FOLDER",B[B.ROOT_FOLDER=2]="ROOT_FOLDER"})(z=e.FileKind||(e.FileKind={})),e.ETAG_DISABLED="";function F(B){if(!(typeof B.size!="number"||typeof B.mtime!="number"))return B.mtime.toString(29)+B.size.toString(31)}e.etag=F;async function A(B,Q){if(!Q.hasProvider(T.URI.from({scheme:B.scheme})))return new Promise(W=>{const q=Q.onDidChangeFileSystemProviderRegistrations(G=>{G.scheme===B.scheme&&G.added&&(q.dispose(),W())})})}e.whenProviderRegistered=A,e.MIN_MAX_MEMORY_SIZE_MB=2048,e.FALLBACK_MAX_MEMORY_SIZE_MB=4096;class M{static formatSize(Q){return(0,L.isNumber)(Q)||(Q=0),Q<M.KB?(0,I.localize)(1,null,Q.toFixed(0)):Q<M.MB?(0,I.localize)(2,null,(Q/M.KB).toFixed(2)):Q<M.GB?(0,I.localize)(3,null,(Q/M.MB).toFixed(2)):Q<M.TB?(0,I.localize)(4,null,(Q/M.GB).toFixed(2)):(0,I.localize)(5,null,(Q/M.TB).toFixed(2))}}e.ByteSize=M,M.KB=1024,M.MB=M.KB*M.KB,M.GB=M.MB*M.KB,M.TB=M.GB*M.KB;var $;(function(B){B[B.IA32=0]="IA32",B[B.OTHER=1]="OTHER"})($=e.Arch||(e.Arch={}));function V(B){return{maxFileSize:B===0?300*M.MB:16*M.GB,maxHeapSize:B===0?700*M.MB:2*700*M.MB}}e.getPlatformLimits=V});var H=this&&this.__param||function(Z,e){return function(D,i){e(D,i,Z)}};define(se[194],oe([0,1,100,44,13]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChecksumService=void 0;let L=class{constructor(I){this.fileService=I}async checksum(I){const P=(await this.fileService.readFileStream(I)).value;return new Promise((w,C)=>{const b=(0,D.createHash)("md5");(0,i.listenStream)(P,{onData:p=>b.update(p.buffer),onError:p=>C(p),onEnd:()=>w(b.digest("base64").replace(/=+$/,""))})})}};L=ve([H(0,k.IFileService)],L),e.ChecksumService=L}),define(se[195],oe([0,1,17,38,9,3,2,44,7,31,13]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiskFileSystemProviderClient=e.LOCAL_FILE_SYSTEM_CHANNEL_NAME=void 0,e.LOCAL_FILE_SYSTEM_CHANNEL_NAME="localFilesystem";class b extends T.Disposable{constructor(S,f){super(),this.channel=S,this.extraCapabilities=f,this.onDidChangeCapabilities=L.Event.None,this._onDidChange=this._register(new L.Emitter),this.onDidChangeFile=this._onDidChange.event,this._onDidWatchError=this._register(new L.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.sessionId=(0,w.generateUuid)(),this.registerFileChangeListeners()}get capabilities(){return this._capabilities||(this._capabilities=57374,this.extraCapabilities.pathCaseSensitive&&(this._capabilities|=1024),this.extraCapabilities.trash&&(this._capabilities|=4096)),this._capabilities}stat(S){return this.channel.call("stat",[S])}readdir(S){return this.channel.call("readdir",[S])}async readFile(S,f){const{buffer:g}=await this.channel.call("readFile",[S,f]);return g}readFileStream(S,f,g){const y=(0,I.newWriteableStream)(m=>D.VSBuffer.concat(m.map(u=>D.VSBuffer.wrap(u))).buffer),l=this.channel.listen("readFileStream",[S,f])(m=>{if(m instanceof D.VSBuffer)y.write(m.buffer);else{if(m==="end")y.end();else{let u=m;u instanceof Error||(u=(0,C.createFileSystemProviderError)((0,i.toErrorMessage)(u),C.FileSystemProviderErrorCode.Unknown)),y.error(u),y.end()}l.dispose()}});return g.onCancellationRequested(()=>{y.error((0,k.canceled)()),y.end(),l.dispose()}),y}writeFile(S,f,g){return this.channel.call("writeFile",[S,D.VSBuffer.wrap(f),g])}open(S,f){return this.channel.call("open",[S,f])}close(S){return this.channel.call("close",[S])}async read(S,f,g,y,l){const[m,u]=await this.channel.call("read",[S,f,l]);return g.set(m.buffer.slice(0,u),y),u}write(S,f,g,y,l){return this.channel.call("write",[S,f,D.VSBuffer.wrap(g),y,l])}mkdir(S){return this.channel.call("mkdir",[S])}delete(S,f){return this.channel.call("delete",[S,f])}rename(S,f,g){return this.channel.call("rename",[S,f,g])}copy(S,f,g){return this.channel.call("copy",[S,f,g])}cloneFile(S,f){return this.channel.call("cloneFile",[S,f])}registerFileChangeListeners(){this._register(this.channel.listen("fileChange",[this.sessionId])(S=>{if(Array.isArray(S)){const f=S;this._onDidChange.fire(f.map(g=>({resource:P.URI.revive(g.resource),type:g.type})))}else{const f=S;this._onDidWatchError.fire(f)}}))}watch(S,f){const g=(0,w.generateUuid)();return this.channel.call("watch",[this.sessionId,g,S,f]),(0,T.toDisposable)(()=>this.channel.call("unwatch",[this.sessionId,g]))}}e.DiskFileSystemProviderClient=b}),define(se[101],oe([0,1,17,9,165,13]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readFileIntoStream=void 0;async function T(C,b,p,S,f,g){let y;try{await I(C,b,p,S,f,g)}catch(l){y=l}finally{y&&f.errorTransformer&&(y=f.errorTransformer(y)),typeof y<"u"&&p.error(y),p.end()}}e.readFileIntoStream=T;async function I(C,b,p,S,f,g){P(g);const y=await C.open(b,{create:!1});try{P(g);let l=0,m=0,u=f&&typeof f.length=="number"?f.length:void 0,h=D.VSBuffer.alloc(Math.min(f.bufferSize,typeof u=="number"?u:f.bufferSize)),d=f&&typeof f.position=="number"?f.position:0,n=0;do m=await C.read(y,d,h.buffer,n,h.byteLength-n),d+=m,n+=m,l+=m,typeof u=="number"&&(u-=m),n===h.byteLength&&(await p.write(S(h)),h=D.VSBuffer.alloc(Math.min(f.bufferSize,typeof u=="number"?u:f.bufferSize)),n=0);while(m>0&&(typeof u!="number"||u>0)&&P(g)&&w(l,f));if(n>0){let o=n;typeof u=="number"&&(o=Math.min(n,u)),p.write(S(h.slice(0,o)))}}catch(l){throw(0,L.ensureFileSystemProviderError)(l)}finally{await C.close(y)}}function P(C){if(C.isCancellationRequested)throw(0,i.canceled)();return!0}function w(C,b){if(b?.limits){if(typeof b.limits.memory=="number"&&C>b.limits.memory)throw(0,L.createFileSystemProviderError)((0,k.localize)(0,null),L.FileSystemProviderErrorCode.FileExceedsMemoryLimit);if(typeof b.limits.size=="number"&&C>b.limits.size)throw(0,L.createFileSystemProviderError)((0,k.localize)(1,null),L.FileSystemProviderErrorCode.FileTooLarge)}return!0}}),define(se[55],oe([0,1,89,2,12,5,7,13]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseWatcherPatterns=e.normalizeWatcherPattern=e.coalesceEvents=e.toFileChanges=e.AbstractUniversalWatcherClient=e.AbstractNonRecursiveWatcherClient=e.AbstractWatcherClient=e.isRecursiveWatchRequest=void 0;function P(l){return l.recursive===!0}e.isRecursiveWatchRequest=P;class w extends i.Disposable{constructor(m,u,h,d){super(),this.onFileChanges=m,this.onLogMessage=u,this.verboseLogging=h,this.options=d,this.watcherDisposables=this._register(new i.MutableDisposable),this.requests=void 0,this.restartCounter=0}init(){const m=new i.DisposableStore;this.watcherDisposables.value=m,this.watcher=this.createWatcher(m),this.watcher.setVerboseLogging(this.verboseLogging),m.add(this.watcher.onDidChangeFile(u=>this.onFileChanges(u))),m.add(this.watcher.onDidLogMessage(u=>this.onLogMessage(u))),m.add(this.watcher.onDidError(u=>this.onError(u)))}onError(m){this.options.restartOnError?this.restartCounter<w.MAX_RESTARTS&&this.requests?(this.error(`restarting watcher after error: ${m}`),this.restart(this.requests)):this.error(`gave up attempting to restart watcher after error: ${m}`):this.error(m)}restart(m){this.restartCounter++,this.init(),this.watch(m)}async watch(m){this.requests=m,await this.watcher?.watch(m)}async setVerboseLogging(m){this.verboseLogging=m,await this.watcher?.setVerboseLogging(m)}error(m){this.onLogMessage({type:"error",message:`[File Watcher (${this.options.type})] ${m}`})}dispose(){return this.watcher=void 0,super.dispose()}}e.AbstractWatcherClient=w,w.MAX_RESTARTS=5;class C extends w{constructor(m,u,h){super(m,u,h,{type:"node.js",restartOnError:!1})}}e.AbstractNonRecursiveWatcherClient=C;class b extends w{constructor(m,u,h){super(m,u,h,{type:"universal",restartOnError:!0})}}e.AbstractUniversalWatcherClient=b;function p(l){return l.map(m=>({type:m.type,resource:T.URI.file(m.path)}))}e.toFileChanges=p;function S(l){const m=new y;for(const u of l)m.processEvent(u);return m.coalesce()}e.coalesceEvents=S;function f(l,m){return typeof m=="string"&&!m.startsWith(D.GLOBSTAR)&&!(0,k.isAbsolute)(m)?{base:l,pattern:m}:m}e.normalizeWatcherPattern=f;function g(l,m){const u=[];for(const h of m)u.push((0,D.parse)(f(l,h)));return u}e.parseWatcherPatterns=g;class y{constructor(){this.coalesced=new Set,this.mapPathToChange=new Map}toKey(m){return L.isLinux?m.path:m.path.toLowerCase()}processEvent(m){const u=this.mapPathToChange.get(this.toKey(m));let h=!1;if(u){const d=u.type,n=m.type;u.path!==m.path&&(m.type===2||m.type===1)?h=!0:d===1&&n===2?(this.mapPathToChange.delete(this.toKey(m)),this.coalesced.delete(u)):d===2&&n===1?u.type=0:d===1&&n===0||(u.type=n)}else h=!0;h&&(this.coalesced.add(m),this.mapPathToChange.set(this.toKey(m),m))}coalesce(){const m=[],u=[];return Array.from(this.coalesced).filter(h=>h.type!==2?(m.push(h),!1):!0).sort((h,d)=>h.path.length-d.path.length).filter(h=>u.some(d=>(0,I.isParent)(h.path,d,!L.isLinux))?!1:(u.push(h.path),!0)).concat(m)}}}),define(se[196],oe([0,1,52,6,24,47,2,85,12,5,145,28,55]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.watchFileContents=e.NodeJSFileWatcherLibrary=void 0;class S extends T.Disposable{constructor(y,l,m,u){super(),this.request=y,this.onDidFilesChange=l,this.onLogMessage=m,this.verboseLogging=u,this.throttledFileChangesWorker=new i.ThrottledWorker({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},h=>this.onDidFilesChange(h)),this.fileChangesDelayer=this._register(new i.ThrottledDelayer(S.FILE_CHANGES_HANDLER_DELAY)),this.fileChangesBuffer=[],this.excludes=(0,p.parseWatcherPatterns)(this.request.path,this.request.excludes),this.includes=this.request.includes?(0,p.parseWatcherPatterns)(this.request.path,this.request.includes):void 0,this.cts=new k.CancellationTokenSource,this.ready=this.watch()}async watch(){try{const y=await this.normalizePath(this.request);if(this.cts.token.isCancellationRequested)return;const l=await b.Promises.stat(y);this._register(await this.doWatch(y,l.isDirectory()))}catch(y){y.code!=="ENOENT"?this.error(y):this.trace(y)}}async normalizePath(y){let l=y.path;try{l=await b.Promises.realpath(y.path),y.path===l&&(l=await(0,C.realcase)(y.path)??y.path),y.path!==l&&this.trace(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${y.path}, real: ${l})`)}catch{}return l}async doWatch(y,l){if(w.isMacintosh&&(0,L.isEqualOrParent)(y,"/Volumes/",!0))return this.error(`Refusing to watch ${y} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`),T.Disposable.None;const m=new k.CancellationTokenSource(this.cts.token),u=new T.DisposableStore;try{const h=(0,P.basename)(y),d=(0,D.watch)(y);u.add((0,T.toDisposable)(()=>{d.removeAllListeners(),d.close()})),this.trace(`Started watching: '${y}'`);const n=new Set;if(l)try{for(const t of await b.Promises.readdir(y))n.add(t)}catch(t){this.error(t)}const o=new Map;u.add((0,T.toDisposable)(()=>{for(const[,t]of o)t.dispose();o.clear()})),d.on("error",(t,s)=>{this.error(`Failed to watch ${y} for changes using fs.watch() (${t}, ${s})`),this.dispose()}),d.on("change",(t,s)=>{if(m.token.isCancellationRequested)return;this.trace(`[raw] ["${t}"] ${s}`);let r="";if(s&&(r=s.toString(),w.isMacintosh&&(r=(0,I.normalizeNFC)(r))),!(!r||t!=="change"&&t!=="rename"))if(l)if(t==="rename"){o.get(r)?.dispose();const c=setTimeout(async()=>{if(o.delete(r),r===h&&!await b.Promises.exists(y)){this.warn("Watcher shutdown because watched path got deleted"),this.dispose();return}const a=await this.existsChildStrictCase((0,P.join)(y,r));if(m.token.isCancellationRequested)return;let v;a?n.has(r)?v=0:(v=1,n.add(r)):(n.delete(r),v=2),this.onFileChange({path:(0,P.join)(this.request.path,r),type:v})},S.FILE_DELETE_HANDLER_DELAY);o.set(r,(0,T.toDisposable)(()=>clearTimeout(c)))}else{let c;n.has(r)?c=0:(c=1,n.add(r)),this.onFileChange({path:(0,P.join)(this.request.path,r),type:c})}else if(t==="rename"||r!==h){const c=setTimeout(async()=>{const a=await b.Promises.exists(y);m.token.isCancellationRequested||(a?(this.onFileChange({path:this.request.path,type:0},!0),u.add(await this.doWatch(y,!1))):(await this.onFileChange({path:this.request.path,type:2},!0),this.dispose()))},S.FILE_DELETE_HANDLER_DELAY);u.clear(),u.add((0,T.toDisposable)(()=>clearTimeout(c)))}else this.onFileChange({path:this.request.path,type:0},!0)})}catch(h){await b.Promises.exists(y)&&!m.token.isCancellationRequested&&this.error(`Failed to watch ${y} for changes using fs.watch() (${h.toString()})`)}return(0,T.toDisposable)(()=>{m.dispose(!0),u.dispose()})}async onFileChange(y,l=!1){if(!this.cts.token.isCancellationRequested){this.verboseLogging&&this.trace(`${y.type===1?"[ADDED]":y.type===2?"[DELETED]":"[CHANGED]"} ${y.path}`),!l&&this.excludes.some(m=>m(y.path))?this.verboseLogging&&this.trace(` >> ignored (excluded) ${y.path}`):!l&&this.includes&&this.includes.length>0&&!this.includes.some(m=>m(y.path))?this.verboseLogging&&this.trace(` >> ignored (not included) ${y.path}`):this.fileChangesBuffer.push(y);try{await this.fileChangesDelayer.trigger(async()=>{const m=this.fileChangesBuffer;this.fileChangesBuffer=[];const u=(0,p.coalesceEvents)(m);if(u.length>0){if(this.verboseLogging)for(const d of u)this.trace(`>> normalized ${d.type===1?"[ADDED]":d.type===2?"[DELETED]":"[CHANGED]"} ${d.path}`);this.throttledFileChangesWorker.work(u)?this.throttledFileChangesWorker.pending>0&&this.trace(`started throttling events due to large amount of file change events at once (pending: ${this.throttledFileChangesWorker.pending}, most recent change: ${u[0].path}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.warn(`started ignoring events due to too many file change events at once (incoming: ${u.length}, most recent change: ${u[0].path}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}})}catch{}}}async existsChildStrictCase(y){if(w.isLinux)return b.Promises.exists(y);try{const l=(0,P.basename)(y);return(await b.Promises.readdir((0,P.dirname)(y))).some(u=>u===l)}catch(l){return this.trace(l),!1}}setVerboseLogging(y){this.verboseLogging=y}error(y){this.cts.token.isCancellationRequested||this.onLogMessage?.({type:"error",message:`[File Watcher (node.js)] ${y}`})}warn(y){this.cts.token.isCancellationRequested||this.onLogMessage?.({type:"warn",message:`[File Watcher (node.js)] ${y}`})}trace(y){!this.cts.token.isCancellationRequested&&this.verboseLogging&&this.onLogMessage?.({type:"trace",message:`[File Watcher (node.js)] ${y}`})}dispose(){this.trace(`stopping file watcher on ${this.request.path}`),this.cts.dispose(!0),super.dispose()}}e.NodeJSFileWatcherLibrary=S,S.FILE_DELETE_HANDLER_DELAY=100,S.FILE_CHANGES_HANDLER_DELAY=50;async function f(g,y,l,m,u=512){const h=await b.Promises.open(g,"r"),d=Buffer.allocUnsafe(u),n=new k.CancellationTokenSource(m);let o,t=!1;const s={path:g,excludes:[],recursive:!1},r=new S(s,c=>{(async()=>{for(const{type:a}of c)if(a===0){if(t)return;t=!0;try{for(;!n.token.isCancellationRequested;){const{bytesRead:v}=await b.Promises.read(h,d,0,u,null);if(!v||n.token.isCancellationRequested)break;y(d.slice(0,v))}}catch(v){o=new Error(v),n.dispose(!0)}finally{t=!1}}})()});return await r.ready,l(),new Promise((c,a)=>{n.token.onCancellationRequested(async()=>{r.dispose();try{await b.Promises.close(h)}catch(v){o=new Error(v)}o?a(o):c()})})}e.watchFileContents=f}),define(se[197],oe([0,1,3,89,2,5,196]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeJSWatcher=void 0;class I extends k.Disposable{constructor(){super(...arguments),this._onDidChangeFile=this._register(new D.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this._onDidLogMessage=this._register(new D.Emitter),this.onDidLogMessage=this._onDidLogMessage.event,this.onDidError=D.Event.None,this.watchers=new Map,this.verboseLogging=!1}async watch(w){const C=this.normalizeRequests(w),b=C.filter(S=>{const f=this.watchers.get(S.path);return f?!(0,i.patternsEquals)(f.request.excludes,S.excludes)||!(0,i.patternsEquals)(f.request.includes,S.includes):!0}),p=Array.from(this.watchers.values()).filter(({request:S})=>!C.find(f=>f.path===S.path&&(0,i.patternsEquals)(f.excludes,S.excludes)&&(0,i.patternsEquals)(f.includes,S.includes))).map(({request:S})=>S.path);b.length&&this.trace(`Request to start watching: ${b.map(S=>`${S.path} (excludes: ${S.excludes.length>0?S.excludes:"<none>"}, includes: ${S.includes&&S.includes.length>0?JSON.stringify(S.includes):"<all>"})`).join(",")}`),p.length&&this.trace(`Request to stop watching: ${p.join(",")}`);for(const S of p)this.stopWatching(S);for(const S of b)this.startWatching(S)}startWatching(w){const C=new T.NodeJSFileWatcherLibrary(w,p=>this._onDidChangeFile.fire(p),p=>this._onDidLogMessage.fire(p),this.verboseLogging),b={request:w,instance:C};this.watchers.set(w.path,b)}async stop(){for(const[w]of this.watchers)this.stopWatching(w);this.watchers.clear()}stopWatching(w){const C=this.watchers.get(w);C&&(this.watchers.delete(w),C.instance.dispose())}normalizeRequests(w){const C=new Map;for(const b of w){const p=L.isLinux?b.path:b.path.toLowerCase();C.set(p,b)}return Array.from(C.values())}async setVerboseLogging(w){this.verboseLogging=w;for(const[,C]of this.watchers)C.instance.setVerboseLogging(w)}trace(w){this.verboseLogging&&this._onDidLogMessage.fire({type:"trace",message:this.toMessage(w)})}toMessage(w,C){return C?`[File Watcher (node.js)] ${w} (path: ${C.request.path})`:`[File Watcher (node.js)] ${w}`}}e.NodeJSWatcher=I}),define(se[198],oe([0,1,55,197]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeJSWatcherClient=void 0;class k extends D.AbstractNonRecursiveWatcherClient{constructor(T,I,P){super(T,I,P),this.init()}createWatcher(){return new i.NodeJSWatcher}}e.NodeJSWatcherClient=k}),define(se[199],oe([0,1,21,39,68,55]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniversalWatcherClient=void 0;class T extends L.AbstractUniversalWatcherClient{constructor(P,w,C){super(P,w,C),this.init()}createWatcher(P){const w=P.add(new k.Client(D.FileAccess.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return P.add(w.onDidProcessExit(({code:C,signal:b})=>this.onError(`terminated by itself with code ${C}, signal: ${b}`))),i.ProxyChannel.toService((0,i.getNextTickChannel)(w.getChannel("watcher")))}}e.UniversalWatcherClient=T}),define(se[72],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceCollection=void 0;class D{constructor(...k){this._entries=new Map;for(const[L,T]of k)this.set(L,T)}set(k,L){const T=this._entries.get(k);return this._entries.set(k,L),T}has(k){return this._entries.has(k)}get(k){return this._entries.get(k)}}e.ServiceCollection=D}),define(se[200],oe([0,1,6,9,2,54,190,4,72,84]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trace=e.InstantiationService=void 0;const C=!1;class b extends Error{constructor(y){super("cyclic dependency between services"),this.message=y.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${y.toString()}`}}class p{constructor(y=new P.ServiceCollection,l=!1,m,u=C){this._services=y,this._strict=l,this._parent=m,this._enableTracing=u,this._activeInstantiations=new Set,this._services.set(I.IInstantiationService,this),this._globalGraph=u?m?._globalGraph??new T.Graph(h=>h):void 0}createChild(y){return new p(y,this._strict,this,this._enableTracing)}invokeFunction(y,...l){const m=f.traceInvocation(this._enableTracing,y);let u=!1;try{return y({get:d=>{if(u)throw(0,i.illegalState)("service accessor is only valid during the invocation of its target method");const n=this._getOrCreateServiceInstance(d,m);if(!n)throw new Error(`[invokeFunction] unknown service '${d}'`);return n}},...l)}finally{u=!0,m.stop()}}createInstance(y,...l){let m,u;return y instanceof L.SyncDescriptor?(m=f.traceCreation(this._enableTracing,y.ctor),u=this._createInstance(y.ctor,y.staticArguments.concat(l),m)):(m=f.traceCreation(this._enableTracing,y),u=this._createInstance(y,l,m)),m.stop(),u}_createInstance(y,l=[],m){const u=I._util.getServiceDependencies(y).sort((n,o)=>n.index-o.index),h=[];for(const n of u){const o=this._getOrCreateServiceInstance(n.id,m);o||this._throwIfStrict(`[createInstance] ${y.name} depends on UNKNOWN service ${n.id}.`,!1),h.push(o)}const d=u.length>0?u[0].index:l.length;if(l.length!==d){console.trace(`[createInstance] First service dependency of ${y.name} at position ${d+1} conflicts with ${l.length} static arguments`);const n=d-l.length;n>0?l=l.concat(new Array(n)):l=l.slice(0,d)}return Reflect.construct(y,l.concat(h))}_setServiceInstance(y,l){if(this._services.get(y)instanceof L.SyncDescriptor)this._services.set(y,l);else if(this._parent)this._parent._setServiceInstance(y,l);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(y){const l=this._services.get(y);return!l&&this._parent?this._parent._getServiceInstanceOrDescriptor(y):l}_getOrCreateServiceInstance(y,l){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(y));const m=this._getServiceInstanceOrDescriptor(y);return m instanceof L.SyncDescriptor?this._safeCreateAndCacheServiceInstance(y,m,l.branch(y,!0)):(l.branch(y,!1),m)}_safeCreateAndCacheServiceInstance(y,l,m){if(this._activeInstantiations.has(y))throw new Error(`illegal state - RECURSIVELY instantiating service '${y}'`);this._activeInstantiations.add(y);try{return this._createAndCacheServiceInstance(y,l,m)}finally{this._activeInstantiations.delete(y)}}_createAndCacheServiceInstance(y,l,m){const u=new T.Graph(n=>n.id.toString());let h=0;const d=[{id:y,desc:l,_trace:m}];for(;d.length;){const n=d.pop();if(u.lookupOrInsertNode(n),h++>1e3)throw new b(u);for(const o of I._util.getServiceDependencies(n.desc.ctor)){const t=this._getServiceInstanceOrDescriptor(o.id);if(t||this._throwIfStrict(`[createInstance] ${y} depends on ${o.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(n.id),String(o.id)),t instanceof L.SyncDescriptor){const s={id:o.id,desc:t,_trace:n._trace.branch(o.id,!0)};u.insertEdge(n,s),d.push(s)}}}for(;;){const n=u.roots();if(n.length===0){if(!u.isEmpty())throw new b(u);break}for(const{data:o}of n){if(this._getServiceInstanceOrDescriptor(o.id)instanceof L.SyncDescriptor){const s=this._createServiceInstanceWithOwner(o.id,o.desc.ctor,o.desc.staticArguments,o.desc.supportsDelayedInstantiation,o._trace);this._setServiceInstance(o.id,s)}u.removeNode(o)}}return this._getServiceInstanceOrDescriptor(y)}_createServiceInstanceWithOwner(y,l,m=[],u,h){if(this._services.get(y)instanceof L.SyncDescriptor)return this._createServiceInstance(y,l,m,u,h);if(this._parent)return this._parent._createServiceInstanceWithOwner(y,l,m,u,h);throw new Error(`illegalState - creating UNKNOWN service instance ${l.name}`)}_createServiceInstance(y,l,m=[],u,h){if(u){const d=new p(void 0,this._strict,this,this._enableTracing);d._globalGraphImplicitDependency=String(y);const n=new Map,o=new D.IdleValue(()=>{const t=d._createInstance(l,m,h);for(const[s,r]of n){const c=t[s];if(typeof c=="function")for(const a of r)c.apply(t,a)}return n.clear(),t});return new Proxy(Object.create(null),{get(t,s){if(!o.isInitialized&&typeof s=="string"&&(s.startsWith("onDid")||s.startsWith("onWill"))){let a=n.get(s);return a||(a=new w.LinkedList,n.set(s,a)),(E,R,N)=>{const O=a.push([E,R,N]);return(0,k.toDisposable)(O)}}if(s in t)return t[s];const r=o.value;let c=r[s];return typeof c!="function"||(c=c.bind(r),t[s]=c),c},set(t,s,r){return o.value[s]=r,!0},getPrototypeOf(t){return l.prototype}})}else return this._createInstance(l,m,h)}_throwIfStrict(y,l){if(l&&console.warn(y),this._strict)throw new Error(y)}}e.InstantiationService=p;var S;(function(g){g[g.Creation=0]="Creation",g[g.Invocation=1]="Invocation",g[g.Branch=2]="Branch"})(S||(S={}));class f{static traceInvocation(y,l){return y?new f(1,l.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):f._None}static traceCreation(y,l){return y?new f(0,l.name):f._None}constructor(y,l){this.type=y,this.name=l,this._start=Date.now(),this._dep=[]}branch(y,l){const m=new f(2,y.toString());return this._dep.push([y,l,m]),m}stop(){const y=Date.now()-this._start;f._totals+=y;let l=!1;function m(h,d){const n=[],o=new Array(h+1).join("	");for(const[t,s,r]of d._dep)if(s&&r){l=!0,n.push(`${o}CREATES -> ${t}`);const c=m(h+1,r);c&&n.push(c)}else n.push(`${o}uses -> ${t}`);return n.join(`
`)}const u=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${m(1,this)}`,`DONE, took ${y.toFixed(2)}ms (grand total ${f._totals.toFixed(2)}ms)`];(y>2||l)&&f.all.add(u.join(`
`))}}e.Trace=f,f.all=new Set,f._None=new class extends f{constructor(){super(-1,null)}stop(){}branch(){return this}},f._totals=0}),define(se[201],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessagePortMainProcessService=void 0;class D{constructor(k,L){this.server=k,this.router=L}getChannel(k){return this.server.getChannel(k,this.router)}registerChannel(k,L){this.server.registerChannel(k,L)}}e.MessagePortMainProcessService=D}),define(se[56],oe([0,1,39,54,71,4]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerSharedProcessRemoteService=e.ISharedProcessService=e.registerMainProcessRemoteService=e.IMainProcessService=void 0;class T{constructor(S,f,g,y){const l=g.getChannel(S);return I(f)?y.createInstance(new i.SyncDescriptor(f.channelClientCtor,[l])):D.ProxyChannel.toService(l,f?.proxyOptions)}}function I(p){return!!p?.channelClientCtor}e.IMainProcessService=(0,L.createDecorator)("mainProcessService");let P=class extends T{constructor(S,f,g,y){super(S,f,g,y)}};P=ve([H(2,e.IMainProcessService),H(3,L.IInstantiationService)],P);function w(p,S,f){(0,k.registerSingleton)(p,new i.SyncDescriptor(P,[S,f],!0))}e.registerMainProcessRemoteService=w,e.ISharedProcessService=(0,L.createDecorator)("sharedProcessService");let C=class extends T{constructor(S,f,g,y){super(S,f,g,y)}};C=ve([H(2,e.ISharedProcessService),H(3,L.IInstantiationService)],C);function b(p,S,f){(0,k.registerSingleton)(p,new i.SyncDescriptor(C,[S,f],!0))}e.registerSharedProcessRemoteService=b}),define(se[73],oe([0,1,24,2,5,167,29,4]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguagePackBaseService=e.ILanguagePackService=e.getLocale=void 0;function P(C){return C.tags.find(b=>b.startsWith("lp-"))?.split("lp-")[1]}e.getLocale=P,e.ILanguagePackService=(0,I.createDecorator)("languagePackService");let w=class extends i.Disposable{constructor(b){super(),this.extensionGalleryService=b}async getAvailableLanguages(){const b=new D.CancellationTokenSource;setTimeout(()=>b.cancel(),1e3);let p;try{p=await this.extensionGalleryService.query({text:'category:"language packs"',pageSize:20},b.token)}catch{return[]}const f=p.firstPage.filter(g=>g.properties.localizedLanguages?.length&&g.tags.some(y=>y.startsWith("lp-"))).map(g=>{const y=g.properties.localizedLanguages?.[0],l=P(g);return{...this.createQuickPickItem(l,y,g),extensionId:g.identifier.id,galleryExtension:g}});return f.push({...this.createQuickPickItem("en","English"),extensionId:"default"}),f}createQuickPickItem(b,p,S){const f=p??b;let g;if(f!==b&&(g=`(${b})`),b.toLowerCase()===k.language.toLowerCase()&&(g??="",g+=(0,L.localize)(0,null)),S?.installCount){g??="";const y=S.installCount;let l;y>1e6?l=`${Math.floor(y/1e5)/10}M`:y>1e3?l=`${Math.floor(y/1e3)}K`:l=String(y),g+=` $(cloud-download) ${l}`}return{id:b,label:f,description:g}}};w=ve([H(0,T.IExtensionGalleryService)],w),e.LanguagePackBaseService=w}),define(se[202],oe([0,1,2,73]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalizationsUpdater=void 0;let k=class extends D.Disposable{constructor(T){super(),this.localizationsService=T,this.updateLocalizations()}updateLocalizations(){this.localizationsService.update()}};k=ve([H(0,i.ILanguagePackService)],k),e.LocalizationsUpdater=k}),define(se[8],oe([0,1,38,3,2,37,5,7,4]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseLogLevel=e.LogLevelToString=e.getLogLevel=e.NullLoggerService=e.NullLogService=e.NullLogger=e.AbstractLoggerService=e.LogService=e.MultiplexLogService=e.AdapterLogger=e.ConsoleLogger=e.ConsoleMainLogger=e.AbstractMessageLogger=e.AbstractLogger=e.format=e.log=e.DEFAULT_LOG_LEVEL=e.LogLevel=e.ILoggerService=e.ILogService=void 0,e.ILogService=(0,P.createDecorator)("logService"),e.ILoggerService=(0,P.createDecorator)("loggerService");function w(){return new Date().toISOString()}var C;(function(c){c[c.Off=0]="Off",c[c.Trace=1]="Trace",c[c.Debug=2]="Debug",c[c.Info=3]="Info",c[c.Warning=4]="Warning",c[c.Error=5]="Error"})(C=e.LogLevel||(e.LogLevel={})),e.DEFAULT_LOG_LEVEL=C.Info;function b(c,a,v){switch(a){case C.Trace:c.trace(v);break;case C.Debug:c.debug(v);break;case C.Info:c.info(v);break;case C.Warning:c.warn(v);break;case C.Error:c.error(v);break;case C.Off:break;default:throw new Error(`Invalid log level ${a}`)}}e.log=b;function p(c){let a="";for(let v=0;v<c.length;v++){let E=c[v];if(typeof E=="object")try{E=JSON.stringify(E)}catch{}a+=(v>0?" ":"")+E}return a}e.format=p;class S extends k.Disposable{constructor(){super(...arguments),this.level=e.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new i.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(a){this.level!==a&&(this.level=a,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(a){return this.level!==C.Off&&this.level<=a}}e.AbstractLogger=S;class f extends S{constructor(a){super(),this.logAlways=a}checkLogLevel(a){return this.logAlways||super.checkLogLevel(a)}trace(a,...v){this.checkLogLevel(C.Trace)&&this.log(C.Trace,p([a,...v]))}debug(a,...v){this.checkLogLevel(C.Debug)&&this.log(C.Debug,p([a,...v]))}info(a,...v){this.checkLogLevel(C.Info)&&this.log(C.Info,p([a,...v]))}warn(a,...v){this.checkLogLevel(C.Warning)&&this.log(C.Warning,p([a,...v]))}error(a,...v){if(this.checkLogLevel(C.Error))if(a instanceof Error){const E=Array.prototype.slice.call(arguments);E[0]=a.stack,this.log(C.Error,p(E))}else this.log(C.Error,p([a,...v]))}flush(){}}e.AbstractMessageLogger=f;class g extends S{constructor(a=e.DEFAULT_LOG_LEVEL){super(),this.setLevel(a),this.useColors=!T.isWindows}trace(a,...v){this.checkLogLevel(C.Trace)&&(this.useColors?console.log(`\x1B[90m[main ${w()}]\x1B[0m`,a,...v):console.log(`[main ${w()}]`,a,...v))}debug(a,...v){this.checkLogLevel(C.Debug)&&(this.useColors?console.log(`\x1B[90m[main ${w()}]\x1B[0m`,a,...v):console.log(`[main ${w()}]`,a,...v))}info(a,...v){this.checkLogLevel(C.Info)&&(this.useColors?console.log(`\x1B[90m[main ${w()}]\x1B[0m`,a,...v):console.log(`[main ${w()}]`,a,...v))}warn(a,...v){this.checkLogLevel(C.Warning)&&(this.useColors?console.warn(`\x1B[93m[main ${w()}]\x1B[0m`,a,...v):console.warn(`[main ${w()}]`,a,...v))}error(a,...v){this.checkLogLevel(C.Error)&&(this.useColors?console.error(`\x1B[91m[main ${w()}]\x1B[0m`,a,...v):console.error(`[main ${w()}]`,a,...v))}dispose(){}flush(){}}e.ConsoleMainLogger=g;class y extends S{constructor(a=e.DEFAULT_LOG_LEVEL){super(),this.setLevel(a)}trace(a,...v){this.checkLogLevel(C.Trace)&&console.log("%cTRACE","color: #888",a,...v)}debug(a,...v){this.checkLogLevel(C.Debug)&&console.log("%cDEBUG","background: #eee; color: #888",a,...v)}info(a,...v){this.checkLogLevel(C.Info)&&console.log("%c INFO","color: #33f",a,...v)}warn(a,...v){this.checkLogLevel(C.Warning)&&console.log("%c WARN","color: #993",a,...v)}error(a,...v){this.checkLogLevel(C.Error)&&console.log("%c  ERR","color: #f33",a,...v)}dispose(){}flush(){}}e.ConsoleLogger=y;class l extends S{constructor(a,v=e.DEFAULT_LOG_LEVEL){super(),this.adapter=a,this.setLevel(v)}trace(a,...v){this.checkLogLevel(C.Trace)&&this.adapter.log(C.Trace,[this.extractMessage(a),...v])}debug(a,...v){this.checkLogLevel(C.Debug)&&this.adapter.log(C.Debug,[this.extractMessage(a),...v])}info(a,...v){this.checkLogLevel(C.Info)&&this.adapter.log(C.Info,[this.extractMessage(a),...v])}warn(a,...v){this.checkLogLevel(C.Warning)&&this.adapter.log(C.Warning,[this.extractMessage(a),...v])}error(a,...v){this.checkLogLevel(C.Error)&&this.adapter.log(C.Error,[this.extractMessage(a),...v])}extractMessage(a){return typeof a=="string"?a:(0,D.toErrorMessage)(a,this.checkLogLevel(C.Trace))}dispose(){}flush(){}}e.AdapterLogger=l;class m extends S{constructor(a){super(),this.logServices=a,a.length&&this.setLevel(a[0].getLevel())}setLevel(a){for(const v of this.logServices)v.setLevel(a);super.setLevel(a)}trace(a,...v){for(const E of this.logServices)E.trace(a,...v)}debug(a,...v){for(const E of this.logServices)E.debug(a,...v)}info(a,...v){for(const E of this.logServices)E.info(a,...v)}warn(a,...v){for(const E of this.logServices)E.warn(a,...v)}error(a,...v){for(const E of this.logServices)E.error(a,...v)}flush(){for(const a of this.logServices)a.flush()}dispose(){for(const a of this.logServices)a.dispose()}}e.MultiplexLogService=m;class u extends k.Disposable{constructor(a){super(),this.logger=a,this._register(a)}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(a){this.logger.setLevel(a)}getLevel(){return this.logger.getLevel()}trace(a,...v){this.logger.trace(a,...v)}debug(a,...v){this.logger.debug(a,...v)}info(a,...v){this.logger.info(a,...v)}warn(a,...v){this.logger.warn(a,...v)}error(a,...v){this.logger.error(a,...v)}flush(){this.logger.flush()}}e.LogService=u;class h extends k.Disposable{constructor(a,v){super(),this.logLevel=a,this.loggerItems=new L.ResourceMap,this._register(v(E=>this.setLevel(E)))}getLoggers(){return[...this.loggerItems.values()].map(({logger:a})=>a)}getLogger(a){return this.loggerItems.get(a)?.logger}createLogger(a,v,E){let R=this.loggerItems.get(a)?.logger;return R||(E=v?.always?C.Trace:E,R=this.doCreateLogger(a,E??this.logLevel,v),this.loggerItems.set(a,{logger:R,logLevel:E})),R}setLevel(a,v){const E=I.URI.isUri(a)?a:void 0,R=E?v:a;if(E){const N=this.loggerItems.get(E);N&&N.logLevel!==R&&(N.logLevel=R,N.logger.setLevel(R))}else this.logLevel=R,this.loggerItems.forEach(({logLevel:N,logger:O})=>{N===void 0&&O.setLevel(this.logLevel)})}getLogLevel(a){return this.loggerItems.get(a)?.logLevel}dispose(){this.loggerItems.forEach(({logger:a})=>a.dispose()),this.loggerItems.clear(),super.dispose()}}e.AbstractLoggerService=h;class d{constructor(){this.onDidChangeLogLevel=new i.Emitter().event}setLevel(a){}getLevel(){return C.Info}trace(a,...v){}debug(a,...v){}info(a,...v){}warn(a,...v){}error(a,...v){}critical(a,...v){}dispose(){}flush(){}}e.NullLogger=d;class n extends d{}e.NullLogService=n;class o extends h{constructor(){super(C.Info,i.Event.None)}doCreateLogger(a,v,E){return new d}}e.NullLoggerService=o;function t(c){if(c.verbose)return C.Trace;if(typeof c.logLevel=="string"){const a=r(c.logLevel.toLowerCase());if(a!==void 0)return a}return e.DEFAULT_LOG_LEVEL}e.getLogLevel=t;function s(c){switch(c){case C.Trace:return"trace";case C.Debug:return"debug";case C.Info:return"info";case C.Warning:return"warn";case C.Error:return"error";case C.Off:return"off"}}e.LogLevelToString=s;function r(c){switch(c){case"trace":return C.Trace;case"debug":return C.Debug;case"info":return C.Info;case"warn":return C.Warning;case"error":return C.Error;case"critical":return C.Error;case"off":return C.Off}}e.parseLogLevel=r}),define(se[203],oe([0,1,6,9,2,12,28,15,8]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogsDataCleaner=void 0;let w=class extends k.Disposable{constructor(b,p){super(),this.environmentService=b,this.logService=p,this._register(new D.RunOnceScheduler(()=>{this.cleanUpOldLogs()},10*1e3)).schedule()}async cleanUpOldLogs(){this.logService.trace("[logs cleanup]: Starting to clean up old logs.");try{const b=(0,L.basename)(this.environmentService.logsPath),p=(0,L.dirname)(this.environmentService.logsPath),g=(await T.Promises.readdir(p)).filter(l=>/^\d{8}T\d{6}$/.test(l)).sort().filter(l=>l!==b),y=g.slice(0,Math.max(0,g.length-9));y.length>0&&(this.logService.trace(`[logs cleanup]: Removing log folders '${y.join(", ")}'`),await Promise.all(y.map(l=>T.Promises.rm((0,L.join)(p,l)))))}catch(b){(0,i.onUnexpectedError)(b)}}};w=ve([H(0,I.IEnvironmentService),H(1,P.ILogService)],w),e.LogsDataCleaner=w}),define(se[204],oe([0,1,20,6,9,3,2,12,55,8]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractDiskFileSystemProvider=void 0;class C extends T.Disposable{constructor(p,S){super(),this.logService=p,this.options=S,this._onDidChangeFile=this._register(new L.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this._onDidWatchError=this._register(new L.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.universalPathsToWatch=[],this.universalWatchRequestDelayer=this._register(new i.ThrottledDelayer(0)),this.nonRecursivePathsToWatch=[],this.nonRecursiveWatchRequestDelayer=this._register(new i.ThrottledDelayer(0))}watch(p,S){return S.recursive||this.options?.watcher?.forceUniversal?this.watchUniversal(p,S):this.watchNonRecursive(p,S)}watchUniversal(p,S){const f={path:this.toFilePath(p),excludes:S.excludes,includes:S.includes,recursive:S.recursive},g=(0,D.insert)(this.universalPathsToWatch,f);return this.refreshUniversalWatchers(),(0,T.toDisposable)(()=>{g(),this.refreshUniversalWatchers()})}refreshUniversalWatchers(){this.universalWatchRequestDelayer.trigger(()=>this.doRefreshUniversalWatchers()).catch(p=>(0,k.onUnexpectedError)(p))}doRefreshUniversalWatchers(){this.universalWatcher||(this.universalWatcher=this._register(this.createUniversalWatcher(S=>this._onDidChangeFile.fire((0,P.toFileChanges)(S)),S=>this.onWatcherLogMessage(S),this.logService.getLevel()===w.LogLevel.Trace)),this._register(this.logService.onDidChangeLogLevel(()=>{this.universalWatcher?.setVerboseLogging(this.logService.getLevel()===w.LogLevel.Trace)})));const p=this.options?.watcher?.recursive?.usePolling;if(p===!0)for(const S of this.universalPathsToWatch)(0,P.isRecursiveWatchRequest)(S)&&(S.pollingInterval=this.options?.watcher?.recursive?.pollingInterval??5e3);else if(Array.isArray(p))for(const S of this.universalPathsToWatch)(0,P.isRecursiveWatchRequest)(S)&&p.includes(S.path)&&(S.pollingInterval=this.options?.watcher?.recursive?.pollingInterval??5e3);return this.universalWatcher.watch(this.universalPathsToWatch)}watchNonRecursive(p,S){const f={path:this.toFilePath(p),excludes:S.excludes,includes:S.includes,recursive:!1},g=(0,D.insert)(this.nonRecursivePathsToWatch,f);return this.refreshNonRecursiveWatchers(),(0,T.toDisposable)(()=>{g(),this.refreshNonRecursiveWatchers()})}refreshNonRecursiveWatchers(){this.nonRecursiveWatchRequestDelayer.trigger(()=>this.doRefreshNonRecursiveWatchers()).catch(p=>(0,k.onUnexpectedError)(p))}doRefreshNonRecursiveWatchers(){return this.nonRecursiveWatcher||(this.nonRecursiveWatcher=this._register(this.createNonRecursiveWatcher(p=>this._onDidChangeFile.fire((0,P.toFileChanges)(p)),p=>this.onWatcherLogMessage(p),this.logService.getLevel()===w.LogLevel.Trace)),this._register(this.logService.onDidChangeLogLevel(()=>{this.nonRecursiveWatcher?.setVerboseLogging(this.logService.getLevel()===w.LogLevel.Trace)}))),this.nonRecursiveWatcher.watch(this.nonRecursivePathsToWatch)}onWatcherLogMessage(p){p.type==="error"&&this._onDidWatchError.fire(p.message),this.logService[p.type](p.message)}toFilePath(p){return(0,I.normalize)(p.fsPath)}}e.AbstractDiskFileSystemProvider=C}),define(se[205],oe([0,1,20,6,17,24,3,66,64,2,48,21,206,22,44,163,13,101,8]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileService=void 0;let u=class extends w.Disposable{constructor(d){super(),this.logService=d,this.BUFFER_SIZE=256*1024,this._onDidChangeFileSystemProviderRegistrations=this._register(new T.Emitter),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new T.Emitter),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this._onDidChangeFileSystemProviderCapabilities=this._register(new T.Emitter),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new T.Emitter),this.onDidRunOperation=this._onDidRunOperation.event,this._onDidFilesChange=this._register(new T.Emitter),this.onDidFilesChange=this._onDidFilesChange.event,this._onDidWatchError=this._register(new T.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.activeWatchers=new Map,this.writeQueue=this._register(new i.ResourceQueue)}registerProvider(d,n){if(this.provider.has(d))throw new Error(`A filesystem provider for the scheme '${d}' is already registered.`);(0,p.mark)(`code/registerFilesystem/${d}`);const o=new w.DisposableStore;return this.provider.set(d,n),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:d,provider:n}),o.add(n.onDidChangeFile(t=>this._onDidFilesChange.fire(new y.FileChangesEvent(t,!this.isPathCaseSensitive(n))))),typeof n.onDidWatchError=="function"&&o.add(n.onDidWatchError(t=>this._onDidWatchError.fire(new Error(t)))),o.add(n.onDidChangeCapabilities(()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:n,scheme:d}))),(0,w.toDisposable)(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:d,provider:n}),this.provider.delete(d),(0,w.dispose)(o)})}getProvider(d){return this.provider.get(d)}async activateProvider(d){const n=[];this._onWillActivateFileSystemProvider.fire({scheme:d,join(o){n.push(o)}}),!this.provider.has(d)&&await i.Promises.settled(n)}async canHandleResource(d){return await this.activateProvider(d.scheme),this.hasProvider(d)}hasProvider(d){return this.provider.has(d.scheme)}hasCapability(d,n){const o=this.provider.get(d.scheme);return!!(o&&o.capabilities&n)}listCapabilities(){return P.Iterable.map(this.provider,([d,n])=>({scheme:d,capabilities:n.capabilities}))}async withProvider(d){if(!(0,S.isAbsolutePath)(d))throw new y.FileOperationError((0,g.localize)(0,null,this.resourceForError(d)),8);await this.activateProvider(d.scheme);const n=this.provider.get(d.scheme);if(!n){const o=new Error;throw o.name="ENOPRO",o.message=(0,g.localize)(1,null,d.toString()),o}return n}async withReadProvider(d){const n=await this.withProvider(d);if((0,y.hasOpenReadWriteCloseCapability)(n)||(0,y.hasReadWriteCapability)(n)||(0,y.hasFileReadStreamCapability)(n))return n;throw new Error(`Filesystem provider for scheme '${d.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async withWriteProvider(d){const n=await this.withProvider(d);if((0,y.hasOpenReadWriteCloseCapability)(n)||(0,y.hasReadWriteCapability)(n))return n;throw new Error(`Filesystem provider for scheme '${d.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(d,n){try{return await this.doResolveFile(d,n)}catch(o){throw(0,y.toFileSystemProviderErrorCode)(o)===y.FileSystemProviderErrorCode.FileNotFound?new y.FileOperationError((0,g.localize)(2,null,this.resourceForError(d)),1):(0,y.ensureFileSystemProviderError)(o)}}async doResolveFile(d,n){const o=await this.withProvider(d),t=this.isPathCaseSensitive(o),s=n?.resolveTo,r=n?.resolveSingleChildDescendants,c=n?.resolveMetadata,a=await o.stat(d);let v;return this.toFileStat(o,d,a,void 0,!!c,(E,R)=>(v||(v=C.TernarySearchTree.forUris(()=>!t),v.set(d,!0),s&&v.fill(!0,s)),v.get(E.resource)||v.findSuperstr(E.resource.with({query:null,fragment:null}))?!0:E.isDirectory&&r?R===1:!1))}async toFileStat(d,n,o,t,s,r){const{providerExtUri:c}=this.getExtUri(d),a={resource:n,name:c.basename(n),isFile:(o.type&y.FileType.File)!==0,isDirectory:(o.type&y.FileType.Directory)!==0,isSymbolicLink:(o.type&y.FileType.SymbolicLink)!==0,mtime:o.mtime,ctime:o.ctime,size:o.size,readonly:Boolean((o.permissions??0)&y.FilePermission.Readonly)||Boolean(d.capabilities&2048),etag:(0,y.etag)({mtime:o.mtime,size:o.size}),children:void 0};if(a.isDirectory&&r(a,t)){try{const v=await d.readdir(n),E=await i.Promises.settled(v.map(async([R,N])=>{try{const O=c.joinPath(n,R),z=s?await d.stat(O):{type:N};return await this.toFileStat(d,O,z,v.length,s,r)}catch(O){return this.logService.trace(O),null}}));a.children=(0,D.coalesce)(E)}catch(v){this.logService.trace(v),a.children=[]}return a}return a}async resolveAll(d){return i.Promises.settled(d.map(async n=>{try{return{stat:await this.doResolveFile(n.resource,n.options),success:!0}}catch(o){return this.logService.trace(o),{stat:void 0,success:!1}}}))}async stat(d){const n=await this.withProvider(d),o=await n.stat(d);return this.toFileStat(n,d,o,void 0,!0,()=>!1)}async exists(d){const n=await this.withProvider(d);try{return!!await n.stat(d)}catch{return!1}}async canCreateFile(d,n){try{await this.doValidateCreateFile(d,n)}catch(o){return o}return!0}async doValidateCreateFile(d,n){if(!n?.overwrite&&await this.exists(d))throw new y.FileOperationError((0,g.localize)(3,null,this.resourceForError(d)),3,n)}async createFile(d,n=k.VSBuffer.fromString(""),o){await this.doValidateCreateFile(d,o);const t=await this.writeFile(d,n);return this._onDidRunOperation.fire(new y.FileOperationEvent(d,0,t)),t}async writeFile(d,n,o){const t=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(d),d),{providerExtUri:s}=this.getExtUri(t);try{await this.validateWriteFile(t,d,o)||await this.mkdirp(t,s.dirname(d));let c;if((0,y.hasReadWriteCapability)(t)&&!(n instanceof k.VSBuffer))if((0,f.isReadableStream)(n)){const a=await(0,f.peekStream)(n,3);a.ended?c=k.VSBuffer.concat(a.buffer):c=a}else c=(0,f.peekReadable)(n,a=>k.VSBuffer.concat(a),3);else c=n;!(0,y.hasOpenReadWriteCloseCapability)(t)||(0,y.hasReadWriteCapability)(t)&&c instanceof k.VSBuffer?await this.doWriteUnbuffered(t,d,o,c):await this.doWriteBuffered(t,d,o,c instanceof k.VSBuffer?(0,k.bufferToReadable)(c):c),this._onDidRunOperation.fire(new y.FileOperationEvent(d,4))}catch(r){throw new y.FileOperationError((0,g.localize)(4,null,this.resourceForError(d),(0,y.ensureFileSystemProviderError)(r).toString()),(0,y.toFileOperationResult)(r),o)}return this.resolve(d,{resolveMetadata:!0})}async validateWriteFile(d,n,o){if(!!o?.unlock&&!(d.capabilities&8192))throw new Error((0,g.localize)(5,null,this.resourceForError(n)));let s;try{s=await d.stat(n)}catch{return}if((s.type&y.FileType.Directory)!==0)throw new y.FileOperationError((0,g.localize)(6,null,this.resourceForError(n)),0,o);if(this.throwIfFileIsReadonly(n,s),typeof o?.mtime=="number"&&typeof o.etag=="string"&&o.etag!==y.ETAG_DISABLED&&typeof s.mtime=="number"&&typeof s.size=="number"&&o.mtime<s.mtime&&o.etag!==(0,y.etag)({mtime:o.mtime,size:s.size}))throw new y.FileOperationError((0,g.localize)(7,null),3,o);return s}async readFile(d,n,o){const t=await this.withReadProvider(d);return n?.atomic?this.doReadFileAtomic(t,d,n,o):this.doReadFile(t,d,n,o)}async doReadFileAtomic(d,n,o,t){return new Promise((s,r)=>{this.writeQueue.queueFor(n,this.getExtUri(d).providerExtUri).queue(async()=>{try{const c=await this.doReadFile(d,n,o,t);s(c)}catch(c){r(c)}})})}async doReadFile(d,n,o,t){const s=await this.doReadFileStream(d,n,{...o,preferUnbuffered:!0},t);return{...s,value:await(0,k.streamToBuffer)(s.value)}}async readFileStream(d,n,o){const t=await this.withReadProvider(d);return this.doReadFileStream(t,d,n,o)}async doReadFileStream(d,n,o,t){const s=new L.CancellationTokenSource(t),r=this.validateReadFile(n,o).then(a=>a,a=>{throw s.cancel(),a});let c;try{return typeof o?.etag=="string"&&o.etag!==y.ETAG_DISABLED&&await r,o?.atomic&&(0,y.hasFileAtomicReadCapability)(d)||!((0,y.hasOpenReadWriteCloseCapability)(d)||(0,y.hasFileReadStreamCapability)(d))||(0,y.hasReadWriteCapability)(d)&&o?.preferUnbuffered?c=this.readFileUnbuffered(d,n,o):(0,y.hasFileReadStreamCapability)(d)?c=this.readFileStreamed(d,n,s.token,o):c=this.readFileBuffered(d,n,s.token,o),{...await r,value:c}}catch(a){c&&await(0,f.consumeStream)(c);const v=(0,g.localize)(8,null,this.resourceForError(n),(0,y.ensureFileSystemProviderError)(a).toString());throw a instanceof y.NotModifiedSinceFileOperationError?new y.NotModifiedSinceFileOperationError(v,a.stat,o):new y.FileOperationError(v,(0,y.toFileOperationResult)(a),o)}}readFileStreamed(d,n,o,t=Object.create(null)){const s=d.readFileStream(n,t,o);return(0,f.transform)(s,{data:r=>r instanceof k.VSBuffer?r:k.VSBuffer.wrap(r),error:r=>new y.FileOperationError((0,g.localize)(9,null,this.resourceForError(n),(0,y.ensureFileSystemProviderError)(r).toString()),(0,y.toFileOperationResult)(r),t)},r=>k.VSBuffer.concat(r))}readFileBuffered(d,n,o,t=Object.create(null)){const s=(0,k.newWriteableBufferStream)();return(0,l.readFileIntoStream)(d,n,s,r=>r,{...t,bufferSize:this.BUFFER_SIZE,errorTransformer:r=>new y.FileOperationError((0,g.localize)(10,null,this.resourceForError(n),(0,y.ensureFileSystemProviderError)(r).toString()),(0,y.toFileOperationResult)(r),t)},o),s}readFileUnbuffered(d,n,o){const t=(0,f.newWriteableStream)(s=>k.VSBuffer.concat(s));return(async()=>{try{let s;o?.atomic&&(0,y.hasFileAtomicReadCapability)(d)?s=await d.readFile(n,{atomic:!0}):s=await d.readFile(n),typeof o?.position=="number"&&(s=s.slice(o.position)),typeof o?.length=="number"&&(s=s.slice(0,o.length)),this.validateReadFileLimits(n,s.byteLength,o),t.end(k.VSBuffer.wrap(s))}catch(s){t.error(s),t.end()}})(),t}async validateReadFile(d,n){const o=await this.resolve(d,{resolveMetadata:!0});if(o.isDirectory)throw new y.FileOperationError((0,g.localize)(11,null,this.resourceForError(d)),0,n);if(typeof n?.etag=="string"&&n.etag!==y.ETAG_DISABLED&&n.etag===o.etag)throw new y.NotModifiedSinceFileOperationError((0,g.localize)(12,null),o,n);return this.validateReadFileLimits(d,o.size,n),o}validateReadFileLimits(d,n,o){if(o?.limits){let t;if(typeof o.limits.memory=="number"&&n>o.limits.memory&&(t=9),typeof o.limits.size=="number"&&n>o.limits.size&&(t=7),typeof t=="number")throw new y.FileOperationError((0,g.localize)(13,null,this.resourceForError(d)),t)}}async canMove(d,n,o){return this.doCanMoveCopy(d,n,"move",o)}async canCopy(d,n,o){return this.doCanMoveCopy(d,n,"copy",o)}async doCanMoveCopy(d,n,o,t){if(d.toString()!==n.toString())try{const s=o==="move"?this.throwIfFileSystemIsReadonly(await this.withWriteProvider(d),d):await this.withReadProvider(d),r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(n),n);await this.doValidateMoveCopy(s,d,r,n,o,t)}catch(s){return s}return!0}async move(d,n,o){const t=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(d),d),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(n),n),r=await this.doMoveCopy(t,d,s,n,"move",!!o),c=await this.resolve(n,{resolveMetadata:!0});return this._onDidRunOperation.fire(new y.FileOperationEvent(d,r==="move"?2:3,c)),c}async copy(d,n,o){const t=await this.withReadProvider(d),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(n),n),r=await this.doMoveCopy(t,d,s,n,"copy",!!o),c=await this.resolve(n,{resolveMetadata:!0});return this._onDidRunOperation.fire(new y.FileOperationEvent(d,r==="copy"?3:2,c)),c}async doMoveCopy(d,n,o,t,s,r){if(n.toString()===t.toString())return s;const{exists:c,isSameResourceWithDifferentPathCase:a}=await this.doValidateMoveCopy(d,n,o,t,s,r);if(c&&!a&&r&&await this.del(t,{recursive:!0}),await this.mkdirp(o,this.getExtUri(o).providerExtUri.dirname(t)),s==="copy"){if(d===o&&(0,y.hasFileFolderCopyCapability)(d))await d.copy(n,t,{overwrite:r});else{const v=await this.resolve(n);v.isDirectory?await this.doCopyFolder(d,v,o,t):await this.doCopyFile(d,n,o,t)}return s}else return d===o?(await d.rename(n,t,{overwrite:r}),s):(await this.doMoveCopy(d,n,o,t,"copy",r),await this.del(n,{recursive:!0}),"copy")}async doCopyFile(d,n,o,t){if((0,y.hasOpenReadWriteCloseCapability)(d)&&(0,y.hasOpenReadWriteCloseCapability)(o))return this.doPipeBuffered(d,n,o,t);if((0,y.hasOpenReadWriteCloseCapability)(d)&&(0,y.hasReadWriteCapability)(o))return this.doPipeBufferedToUnbuffered(d,n,o,t);if((0,y.hasReadWriteCapability)(d)&&(0,y.hasOpenReadWriteCloseCapability)(o))return this.doPipeUnbufferedToBuffered(d,n,o,t);if((0,y.hasReadWriteCapability)(d)&&(0,y.hasReadWriteCapability)(o))return this.doPipeUnbuffered(d,n,o,t)}async doCopyFolder(d,n,o,t){await o.mkdir(t),Array.isArray(n.children)&&await i.Promises.settled(n.children.map(async s=>{const r=this.getExtUri(o).providerExtUri.joinPath(t,s.name);return s.isDirectory?this.doCopyFolder(d,await this.resolve(s.resource),o,r):this.doCopyFile(d,s.resource,o,r)}))}async doValidateMoveCopy(d,n,o,t,s,r){let c=!1;if(d===o){const{providerExtUri:v,isPathCaseSensitive:E}=this.getExtUri(d);if(E||(c=v.isEqual(n,t)),c&&s==="copy")throw new Error((0,g.localize)(14,null,this.resourceForError(n),this.resourceForError(t)));if(!c&&v.isEqualOrParent(t,n))throw new Error((0,g.localize)(15,null,this.resourceForError(n),this.resourceForError(t)))}const a=await this.exists(t);if(a&&!c){if(!r)throw new y.FileOperationError((0,g.localize)(16,null,this.resourceForError(n),this.resourceForError(t)),4);if(d===o){const{providerExtUri:v}=this.getExtUri(d);if(v.isEqualOrParent(n,t))throw new Error((0,g.localize)(17,null,this.resourceForError(n),this.resourceForError(t)))}}return{exists:a,isSameResourceWithDifferentPathCase:c}}getExtUri(d){const n=this.isPathCaseSensitive(d);return{providerExtUri:n?S.extUri:S.extUriIgnorePathCase,isPathCaseSensitive:n}}isPathCaseSensitive(d){return!!(d.capabilities&1024)}async createFolder(d){const n=this.throwIfFileSystemIsReadonly(await this.withProvider(d),d);await this.mkdirp(n,d);const o=await this.resolve(d,{resolveMetadata:!0});return this._onDidRunOperation.fire(new y.FileOperationEvent(d,0,o)),o}async mkdirp(d,n){const o=[],{providerExtUri:t}=this.getExtUri(d);for(;!t.isEqual(n,t.dirname(n));)try{if(((await d.stat(n)).type&y.FileType.Directory)===0)throw new Error((0,g.localize)(18,null,this.resourceForError(n)));break}catch(s){if((0,y.toFileSystemProviderErrorCode)(s)!==y.FileSystemProviderErrorCode.FileNotFound)throw s;o.push(t.basename(n)),n=t.dirname(n)}for(let s=o.length-1;s>=0;s--){n=t.joinPath(n,o[s]);try{await d.mkdir(n)}catch(r){if((0,y.toFileSystemProviderErrorCode)(r)!==y.FileSystemProviderErrorCode.FileExists)throw r}}}async canDelete(d,n){try{await this.doValidateDelete(d,n)}catch(o){return o}return!0}async doValidateDelete(d,n){const o=this.throwIfFileSystemIsReadonly(await this.withProvider(d),d);if(!!n?.useTrash&&!(o.capabilities&4096))throw new Error((0,g.localize)(19,null,this.resourceForError(d)));let s;try{s=await o.stat(d)}catch{}if(s)this.throwIfFileIsReadonly(d,s);else throw new y.FileOperationError((0,g.localize)(20,null,this.resourceForError(d)),1);if(!!!n?.recursive){const c=await this.resolve(d);if(c.isDirectory&&Array.isArray(c.children)&&c.children.length>0)throw new Error((0,g.localize)(21,null,this.resourceForError(d)))}return o}async del(d,n){const o=await this.doValidateDelete(d,n),t=!!n?.useTrash,s=!!n?.recursive;await o.delete(d,{recursive:s,useTrash:t}),this._onDidRunOperation.fire(new y.FileOperationEvent(d,1))}async cloneFile(d,n){const o=await this.withProvider(d),t=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(n),n);if(o===t&&this.getExtUri(o).providerExtUri.isEqual(d,n))return;if(o===t&&(0,y.hasFileCloneCapability)(o))return o.cloneFile(d,n);await this.mkdirp(t,this.getExtUri(t).providerExtUri.dirname(n));const s=this.writeQueue.queueFor(d,this.getExtUri(o).providerExtUri);return o===t&&(0,y.hasFileFolderCopyCapability)(o)?s.queue(()=>o.copy(d,n,{overwrite:!0})):s.queue(()=>this.doCopyFile(o,d,t,n))}watch(d,n={recursive:!1,excludes:[]}){const o=new w.DisposableStore;let t=!1,s=()=>{t=!0};return o.add((0,w.toDisposable)(()=>s())),(async()=>{try{const r=await this.doWatch(d,n);t?(0,w.dispose)(r):s=()=>(0,w.dispose)(r)}catch(r){this.logService.error(r)}})(),o}async doWatch(d,n){const o=await this.withProvider(d),t=(0,I.hash)([this.getExtUri(o).providerExtUri.getComparisonKey(d),n]);let s=this.activeWatchers.get(t);return s||(s={count:0,disposable:o.watch(d,n)},this.activeWatchers.set(t,s)),s.count+=1,(0,w.toDisposable)(()=>{s&&(s.count--,s.count===0&&((0,w.dispose)(s.disposable),this.activeWatchers.delete(t)))})}dispose(){super.dispose();for(const[,d]of this.activeWatchers)(0,w.dispose)(d.disposable);this.activeWatchers.clear()}async doWriteBuffered(d,n,o,t){return this.writeQueue.queueFor(n,this.getExtUri(d).providerExtUri).queue(async()=>{const s=await d.open(n,{create:!0,unlock:o?.unlock??!1});try{(0,f.isReadableStream)(t)||(0,f.isReadableBufferedStream)(t)?await this.doWriteStreamBufferedQueued(d,s,t):await this.doWriteReadableBufferedQueued(d,s,t)}catch(r){throw(0,y.ensureFileSystemProviderError)(r)}finally{await d.close(s)}})}async doWriteStreamBufferedQueued(d,n,o){let t=0,s;if((0,f.isReadableBufferedStream)(o)){if(o.buffer.length>0){const r=k.VSBuffer.concat(o.buffer);await this.doWriteBuffer(d,n,r,r.byteLength,t,0),t+=r.byteLength}if(o.ended)return;s=o.stream}else s=o;return new Promise((r,c)=>{(0,f.listenStream)(s,{onData:async a=>{s.pause();try{await this.doWriteBuffer(d,n,a,a.byteLength,t,0)}catch(v){return c(v)}t+=a.byteLength,setTimeout(()=>s.resume())},onError:a=>c(a),onEnd:()=>r()})})}async doWriteReadableBufferedQueued(d,n,o){let t=0,s;for(;(s=o.read())!==null;)await this.doWriteBuffer(d,n,s,s.byteLength,t,0),t+=s.byteLength}async doWriteBuffer(d,n,o,t,s,r){let c=0;for(;c<t;)c+=await d.write(n,s+c,o.buffer,r+c,t-c)}async doWriteUnbuffered(d,n,o,t){return this.writeQueue.queueFor(n,this.getExtUri(d).providerExtUri).queue(()=>this.doWriteUnbufferedQueued(d,n,o,t))}async doWriteUnbufferedQueued(d,n,o,t){let s;t instanceof k.VSBuffer?s=t:(0,f.isReadableStream)(t)?s=await(0,k.streamToBuffer)(t):(0,f.isReadableBufferedStream)(t)?s=await(0,k.bufferedStreamToBuffer)(t):s=(0,k.readableToBuffer)(t),await d.writeFile(n,s.buffer,{create:!0,overwrite:!0,unlock:o?.unlock??!1})}async doPipeBuffered(d,n,o,t){return this.writeQueue.queueFor(t,this.getExtUri(o).providerExtUri).queue(()=>this.doPipeBufferedQueued(d,n,o,t))}async doPipeBufferedQueued(d,n,o,t){let s,r;try{s=await d.open(n,{create:!1}),r=await o.open(t,{create:!0,unlock:!1});const c=k.VSBuffer.alloc(this.BUFFER_SIZE);let a=0,v=0,E=0;do E=await d.read(s,a,c.buffer,v,c.byteLength-v),await this.doWriteBuffer(o,r,c,E,a,v),a+=E,v+=E,v===c.byteLength&&(v=0);while(E>0)}catch(c){throw(0,y.ensureFileSystemProviderError)(c)}finally{await i.Promises.settled([typeof s=="number"?d.close(s):Promise.resolve(),typeof r=="number"?o.close(r):Promise.resolve()])}}async doPipeUnbuffered(d,n,o,t){return this.writeQueue.queueFor(t,this.getExtUri(o).providerExtUri).queue(()=>this.doPipeUnbufferedQueued(d,n,o,t))}async doPipeUnbufferedQueued(d,n,o,t){return o.writeFile(t,await d.readFile(n),{create:!0,overwrite:!0,unlock:!1})}async doPipeUnbufferedToBuffered(d,n,o,t){return this.writeQueue.queueFor(t,this.getExtUri(o).providerExtUri).queue(()=>this.doPipeUnbufferedToBufferedQueued(d,n,o,t))}async doPipeUnbufferedToBufferedQueued(d,n,o,t){const s=await o.open(t,{create:!0,unlock:!1});try{const r=await d.readFile(n);await this.doWriteBuffer(o,s,k.VSBuffer.wrap(r),r.byteLength,0,0)}catch(r){throw(0,y.ensureFileSystemProviderError)(r)}finally{await o.close(s)}}async doPipeBufferedToUnbuffered(d,n,o,t){const s=await(0,k.streamToBuffer)(this.readFileBuffered(d,n,L.CancellationToken.None));await this.doWriteUnbuffered(o,t,void 0,s)}throwIfFileSystemIsReadonly(d,n){if(d.capabilities&2048)throw new y.FileOperationError((0,g.localize)(22,null,this.resourceForError(n)),6);return d}throwIfFileIsReadonly(d,n){if((n.permissions??0)&y.FilePermission.Readonly)throw new y.FileOperationError((0,g.localize)(23,null,this.resourceForError(d)),6)}resourceForError(d){return d.scheme===b.Schemas.file?d.fsPath:d.toString(!0)}};u=ve([H(0,m.ILogService)],u),e.FileService=u}),define(se[207],oe([0,1,52,286,6,37,17,3,47,2,12,5,22,44,28,166,13,101,204,38,199,198]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiskFileSystemProvider=void 0,(()=>{try{(0,i.gracefulify)(D)}catch(o){console.error(`Error enabling graceful-fs: ${(0,u.toErrorMessage)(o)}`)}})();class n extends m.AbstractDiskFileSystemProvider{constructor(t,s){super(t,s),this.onDidChangeCapabilities=I.Event.None,this.resourceLocks=new L.ResourceMap(r=>p.extUriBiasedIgnorePathCase.getComparisonKey(r)),this.mapHandleToPos=new Map,this.mapHandleToLock=new Map,this.writeHandles=new Map}get capabilities(){return this._capabilities||(this._capabilities=57374,b.isLinux&&(this._capabilities|=1024)),this._capabilities}async stat(t){try{const{stat:s,symbolicLink:r}=await f.SymlinkSupport.stat(this.toFilePath(t));return{type:this.toType(s,r),ctime:s.birthtime.getTime(),mtime:s.mtime.getTime(),size:s.size}}catch(s){throw this.toFileSystemProviderError(s)}}async readdir(t){try{const s=await f.Promises.readdir(this.toFilePath(t),{withFileTypes:!0}),r=[];return await Promise.all(s.map(async c=>{try{let a;c.isSymbolicLink()?a=(await this.stat((0,p.joinPath)(t,c.name))).type:a=this.toType(c),r.push([c.name,a])}catch(a){this.logService.trace(a)}})),r}catch(s){throw this.toFileSystemProviderError(s)}}toType(t,s){let r;return s?.dangling?r=y.FileType.Unknown:t.isFile()?r=y.FileType.File:t.isDirectory()?r=y.FileType.Directory:r=y.FileType.Unknown,s&&(r|=y.FileType.SymbolicLink),r}async createResourceLock(t){const s=this.toFilePath(t);this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${s})`);let r;for(;r=this.resourceLocks.get(t);)this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${s})`),await r.wait();const c=new k.Barrier;return this.resourceLocks.set(t,c),this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${s})`),(0,w.toDisposable)(()=>{this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${s})`),this.resourceLocks.get(t)===c&&(this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${s})`),this.resourceLocks.delete(t)),this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${s})`),c.open()})}async readFile(t,s){let r;try{s?.atomic&&(this.traceLock(`[Disk FileSystemProvider]: atomic read operation started (${this.toFilePath(t)})`),r=await this.createResourceLock(t));const c=this.toFilePath(t);return await f.Promises.readFile(c)}catch(c){throw this.toFileSystemProviderError(c)}finally{r?.dispose()}}traceLock(t){n.TRACE_LOG_RESOURCE_LOCKS&&this.logService.trace(t)}readFileStream(t,s,r){const c=(0,S.newWriteableStream)(a=>T.VSBuffer.concat(a.map(v=>T.VSBuffer.wrap(v))).buffer);return(0,l.readFileIntoStream)(this,t,c,a=>a.buffer,{...s,bufferSize:256*1024},r),c}async writeFile(t,s,r){let c;try{const a=this.toFilePath(t);if(!r.create||!r.overwrite){if(await f.Promises.exists(a)){if(!r.overwrite)throw(0,y.createFileSystemProviderError)((0,g.localize)(0,null),y.FileSystemProviderErrorCode.FileExists)}else if(!r.create)throw(0,y.createFileSystemProviderError)((0,g.localize)(1,null),y.FileSystemProviderErrorCode.FileNotFound)}c=await this.open(t,{create:!0,unlock:r.unlock}),await this.write(c,0,s,0,s.byteLength)}catch(a){throw await this.toFileSystemProviderWriteError(t,a)}finally{typeof c=="number"&&await this.close(c)}}static configureFlushOnWrite(t){n.canFlush=t}async open(t,s){const r=this.toFilePath(t);let c;(0,y.isFileOpenForWriteOptions)(s)&&(c=await this.createResourceLock(t));let a;try{if((0,y.isFileOpenForWriteOptions)(s)&&s.unlock)try{const{stat:E}=await f.SymlinkSupport.stat(r);E.mode&128||await f.Promises.chmod(r,E.mode|128)}catch(E){this.logService.trace(E)}let v;if((0,y.isFileOpenForWriteOptions)(s)){if(b.isWindows)try{await f.Promises.truncate(r,0),v="r+"}catch(E){E.code!=="ENOENT"&&this.logService.trace(E)}v||(v="w")}else v="r";a=await f.Promises.open(r,v)}catch(v){throw c?.dispose(),(0,y.isFileOpenForWriteOptions)(s)?await this.toFileSystemProviderWriteError(t,v):this.toFileSystemProviderError(v)}if(this.mapHandleToPos.set(a,0),(0,y.isFileOpenForWriteOptions)(s)&&this.writeHandles.set(a,t),c){const v=this.mapHandleToLock.get(a);this.traceLock(`[Disk FileSystemProvider]: open() - storing lock for handle ${a} (${r})`),this.mapHandleToLock.set(a,c),v&&(this.traceLock(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${a} (${r})`),v.dispose())}return a}async close(t){const s=this.mapHandleToLock.get(t);try{if(this.mapHandleToPos.delete(t),this.writeHandles.delete(t)&&n.canFlush)try{await f.Promises.fdatasync(t)}catch(r){n.configureFlushOnWrite(!1),this.logService.error(r)}return await f.Promises.close(t)}catch(r){throw this.toFileSystemProviderError(r)}finally{s&&(this.mapHandleToLock.get(t)===s&&(this.traceLock(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.mapHandleToLock.delete(t)),this.traceLock(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),s.dispose())}}async read(t,s,r,c,a){const v=this.normalizePos(t,s);let E=null;try{E=(await f.Promises.read(t,r,c,a,v)).bytesRead}catch(R){throw this.toFileSystemProviderError(R)}finally{this.updatePos(t,v,E)}return E}normalizePos(t,s){return s===this.mapHandleToPos.get(t)?null:s}updatePos(t,s,r){const c=this.mapHandleToPos.get(t);typeof c=="number"&&(typeof s=="number"||(typeof r=="number"?this.mapHandleToPos.set(t,c+r):this.mapHandleToPos.delete(t)))}async write(t,s,r,c,a){return(0,k.retry)(()=>this.doWrite(t,s,r,c,a),100,3)}async doWrite(t,s,r,c,a){const v=this.normalizePos(t,s);let E=null;try{E=(await f.Promises.write(t,r,c,a,v)).bytesWritten}catch(R){throw await this.toFileSystemProviderWriteError(this.writeHandles.get(t),R)}finally{this.updatePos(t,v,E)}return E}async mkdir(t){try{await f.Promises.mkdir(this.toFilePath(t))}catch(s){throw this.toFileSystemProviderError(s)}}async delete(t,s){try{const r=this.toFilePath(t);s.recursive?await f.Promises.rm(r,f.RimRafMode.MOVE):await f.Promises.unlink(r)}catch(r){throw this.toFileSystemProviderError(r)}}async rename(t,s,r){const c=this.toFilePath(t),a=this.toFilePath(s);if(c!==a)try{await this.validateTargetDeleted(t,s,"move",r.overwrite),await f.Promises.move(c,a)}catch(v){throw(v.code==="EINVAL"||v.code==="EBUSY"||v.code==="ENAMETOOLONG")&&(v=new Error((0,g.localize)(2,null,(0,C.basename)(c),(0,C.basename)((0,C.dirname)(a)),v.toString()))),this.toFileSystemProviderError(v)}}async copy(t,s,r){const c=this.toFilePath(t),a=this.toFilePath(s);if(c!==a)try{await this.validateTargetDeleted(t,s,"copy",r.overwrite),await f.Promises.copy(c,a,{preserveSymlinks:!0})}catch(v){throw(v.code==="EINVAL"||v.code==="EBUSY"||v.code==="ENAMETOOLONG")&&(v=new Error((0,g.localize)(3,null,(0,C.basename)(c),(0,C.basename)((0,C.dirname)(a)),v.toString()))),this.toFileSystemProviderError(v)}}async validateTargetDeleted(t,s,r,c){const a=this.toFilePath(t),v=this.toFilePath(s);let E=!1;if(!!(this.capabilities&1024)||(E=(0,P.isEqual)(a,v,!0)),E&&r==="copy")throw(0,y.createFileSystemProviderError)((0,g.localize)(4,null),y.FileSystemProviderErrorCode.FileExists);if(!E&&await f.Promises.exists(v)){if(!c)throw(0,y.createFileSystemProviderError)((0,g.localize)(5,null),y.FileSystemProviderErrorCode.FileExists);await this.delete(s,{recursive:!0,useTrash:!1})}}async cloneFile(t,s){return this.doCloneFile(t,s,!1)}async doCloneFile(t,s,r){const c=this.toFilePath(t),a=this.toFilePath(s),v=!!(this.capabilities&1024);if((0,P.isEqual)(c,a,!v))return;const E=new w.DisposableStore;try{const[R,N]=await Promise.all([this.createResourceLock(t),this.createResourceLock(s)]);E.add(R),E.add(N),r&&await f.Promises.mkdir((0,C.dirname)(a),{recursive:!0}),await f.Promises.copyFile(c,a)}catch(R){if(R.code==="ENOENT"&&!r)return this.doCloneFile(t,s,!0);throw this.toFileSystemProviderError(R)}finally{E.dispose()}}createUniversalWatcher(t,s,r){return new h.UniversalWatcherClient(c=>t(c),c=>s(c),r)}createNonRecursiveWatcher(t,s,r){return new d.NodeJSWatcherClient(c=>t(c),c=>s(c),r)}toFileSystemProviderError(t){if(t instanceof y.FileSystemProviderError)return t;let s;switch(t.code){case"ENOENT":s=y.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":s=y.FileSystemProviderErrorCode.FileIsADirectory;break;case"ENOTDIR":s=y.FileSystemProviderErrorCode.FileNotADirectory;break;case"EEXIST":s=y.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":s=y.FileSystemProviderErrorCode.NoPermissions;break;default:s=y.FileSystemProviderErrorCode.Unknown}return(0,y.createFileSystemProviderError)(t,s)}async toFileSystemProviderWriteError(t,s){let r=this.toFileSystemProviderError(s);if(t&&r.code===y.FileSystemProviderErrorCode.NoPermissions)try{const{stat:c}=await f.SymlinkSupport.stat(this.toFilePath(t));c.mode&128||(r=(0,y.createFileSystemProviderError)(s,y.FileSystemProviderErrorCode.FileWriteLocked))}catch(c){this.logService.trace(c)}return r}}e.DiskFileSystemProvider=n,n.TRACE_LOG_RESOURCE_LOCKS=!1,n.canFlush=!0}),define(se[102],oe([0,1,6,3,2,4,8]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessLifecycleService=e.ISharedProcessLifecycleService=void 0,e.ISharedProcessLifecycleService=(0,L.createDecorator)("lifecycleSharedProcessService");let I=class extends k.Disposable{constructor(w){super(),this.logService=w,this.pendingWillShutdownPromise=void 0,this._onWillShutdown=this._register(new i.Emitter),this.onWillShutdown=this._onWillShutdown.event}fireOnWillShutdown(){if(this.pendingWillShutdownPromise)return this.pendingWillShutdownPromise;this.logService.trace("Lifecycle#onWillShutdown.fire()");const w=[];return this._onWillShutdown.fire({join(C){w.push(C)}}),this.pendingWillShutdownPromise=(async()=>{try{await D.Promises.settled(w)}catch(C){this.logService.error(C)}})(),this.pendingWillShutdownPromise}};I=ve([H(0,T.ILogService)],I),e.SharedProcessLifecycleService=I}),define(se[103],oe([0,1,3,7,8]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowerLogService=e.LoggerChannelClient=e.LoggerChannel=e.LogLevelChannelClient=e.LogLevelChannel=void 0;class L{constructor(p,S){this.logService=p,this.loggerService=S,this.onDidChangeLogLevel=D.Event.buffer(p.onDidChangeLogLevel,!0)}listen(p,S){switch(S){case"onDidChangeLogLevel":return this.onDidChangeLogLevel}throw new Error(`Event not found: ${S}`)}async call(p,S,f){switch(S){case"setLevel":return f[1]?this.loggerService.setLevel(i.URI.revive(f[1]),f[0]):this.logService.setLevel(f[0])}throw new Error(`Call not found: ${S}`)}}e.LogLevelChannel=L;class T{constructor(p){this.channel=p}get onDidChangeLogLevel(){return this.channel.listen("onDidChangeLogLevel")}setLevel(p,S){T.setLevel(this.channel,p,S)}static setLevel(p,S,f){return p.call("setLevel",[S,f])}}e.LogLevelChannelClient=T;class I{constructor(p){this.loggerService=p,this.loggers=new Map}listen(p,S){throw new Error(`Event not found: ${S}`)}async call(p,S,f){switch(S){case"createLogger":this.createLogger(i.URI.revive(f[0]),f[1]);return;case"log":return this.log(i.URI.revive(f[0]),f[1]);case"consoleLog":return this.consoleLog(f[0],f[1])}throw new Error(`Call not found: ${S}`)}createLogger(p,S){this.loggers.set(p.toString(),this.loggerService.createLogger(p,S))}consoleLog(p,S){let f=console.log;switch(p){case k.LogLevel.Error:f=console.error;break;case k.LogLevel.Warning:f=console.warn;break;case k.LogLevel.Info:f=console.info;break}f.call(console,...S)}log(p,S){const f=this.loggers.get(p.toString());if(!f)throw new Error("Create the logger before logging");for(const[g,y]of S)(0,k.log)(f,g,y)}}e.LoggerChannel=I;class P extends k.AbstractLoggerService{constructor(p,S,f){super(p,S),this.channel=f}createConsoleMainLogger(){return new k.AdapterLogger({log:(p,S)=>{this.channel.call("consoleLog",[p,S])}})}doCreateLogger(p,S,f){return new w(this.channel,p,S,f)}}e.LoggerChannelClient=P;class w extends k.AbstractMessageLogger{constructor(p,S,f,g){super(g?.always),this.channel=p,this.file=S,this.isLoggerCreated=!1,this.buffer=[],this.setLevel(f),this.channel.call("createLogger",[S,g]).then(()=>{this.doLog(this.buffer),this.isLoggerCreated=!0})}log(p,S){const f=[[p,S]];this.isLoggerCreated?this.doLog(f):this.buffer.push(...f)}doLog(p){this.channel.call("log",[this.file,p])}}class C extends k.LogService{constructor(p,S){super(S),this.parent=p,this._register(p.onDidChangeLogLevel(f=>S.setLevel(f)))}setLevel(p){super.setLevel(p),this.parent.setLevel(p)}}e.FollowerLogService=C}),define(se[57],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INativeHostService=void 0,e.INativeHostService=(0,D.createDecorator)("nativeHostService")}),define(se[58],oe([0,1,3,64,2,4]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullPolicyService=e.AbstractPolicyService=e.IPolicyService=void 0,e.IPolicyService=(0,L.createDecorator)("policy");class T extends k.Disposable{constructor(){super(...arguments),this.policyDefinitions={},this.policies=new Map,this._onDidChange=this._register(new D.Emitter),this.onDidChange=this._onDidChange.event}async updatePolicyDefinitions(w){const C=Object.keys(this.policyDefinitions).length;return this.policyDefinitions={...w,...this.policyDefinitions},C!==Object.keys(this.policyDefinitions).length&&await this._updatePolicyDefinitions(w),i.Iterable.reduce(this.policies.entries(),(b,[p,S])=>({...b,[p]:S}),{})}getPolicyValue(w){return this.policies.get(w)}serialize(){return i.Iterable.reduce(Object.entries(this.policyDefinitions),(w,[C,b])=>({...w,[C]:{definition:b,value:this.policies.get(C)}}),{})}}e.AbstractPolicyService=T;class I{constructor(){this.onDidChange=D.Event.None}async updatePolicyDefinitions(){return{}}getPolicyValue(){}serialize(){}}e.NullPolicyService=I}),define(se[208],oe([0,1,3,2,58]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicyChannelClient=e.PolicyChannel=void 0;class L{constructor(P){this.service=P,this.disposables=new i.DisposableStore}listen(P,w){switch(w){case"onDidChange":return D.Event.map(this.service.onDidChange,C=>C.reduce((b,p)=>({...b,[p]:this.service.getPolicyValue(p)??null}),{}),this.disposables)}throw new Error(`Event not found: ${w}`)}call(P,w,C){switch(w){case"updatePolicyDefinitions":return this.service.updatePolicyDefinitions(C)}throw new Error(`Call not found: ${w}`)}dispose(){this.disposables.dispose()}}e.PolicyChannel=L;class T extends k.AbstractPolicyService{constructor(P,w){super(),this.channel=w;for(const C in P){const{definition:b,value:p}=P[C];this.policyDefinitions[C]=b,p!==void 0&&this.policies.set(C,p)}this.channel.listen("onDidChange")(C=>{for(const b in C){const p=C[b];p===null?this.policies.delete(b):this.policies.set(b,p)}this._onDidChange.fire(Object.keys(C))})}async _updatePolicyDefinitions(P){const w=await this.channel.call("updatePolicyDefinitions",P);for(const C in w)this.policies.set(C,w[C])}}e.PolicyChannelClient=T}),define(se[104],oe([0,1,21,5,36,95]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let T;if(typeof i.globals.vscode<"u"&&typeof i.globals.vscode.context<"u"){const I=i.globals.vscode.context.configuration();if(I)T=I.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){T=globalThis._VSCODE_PRODUCT_JSON;const{serviceUrl:I,searchUrl:P,itemUrl:w,controlUrl:C}=T.extensionsGallery||{};Object.assign(T,{extensionsGallery:{serviceUrl:k.env.VSCODE_GALLERY_SERVICE_URL||I,searchUrl:k.env.VSCODE_GALLERY_SEARCH_URL||P,itemUrl:k.env.VSCODE_GALLERY_ITEM_URL||w,controlUrl:k.env.VSCODE_GALLERY_CONTROL_URL||C}});try{const b=(...g)=>g.reduce((y,l)=>(Object.keys(l).forEach(m=>{Array.isArray(y[m])&&Array.isArray(l[m])?y[m]=l[m]:typeof y[m]=="object"&&typeof l[m]=="object"?y[m]=b(y[m],l[m]):y[m]=l[m]}),y),{}),p=(0,L.getUserDataPath)({},T.nameShort),S=i.isWindows?`file:///${p}/product.json`:`file://${p}/product.json`,f=Z.__$__nodeRequire(D.FileAccess.asFileUri(S).fsPath);T=b(T,f)}catch{}if(k.env.VSCODE_DEV&&Object.assign(T,{nameShort:`${T.nameShort} Dev`,nameLong:`${T.nameLong} Dev`,dataFolderName:`${T.dataFolderName}-dev`,serverDataFolderName:T.serverDataFolderName?`${T.serverDataFolderName}-dev`:void 0}),!T.version){const b=globalThis._VSCODE_PACKAGE_JSON;Object.assign(T,{version:b.version,release:b.release})}}else T={},Object.keys(T).length===0&&Object.assign(T,{version:"1.72.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});e.default=T}),define(se[25],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.productSchemaId=e.IProductService=void 0,e.IProductService=(0,D.createDecorator)("productService"),e.productSchemaId="vscode://schemas/vscode-product"}),define(se[209],oe([0,1,6,9,2,12,28,8,25]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeCacheCleaner=void 0;let w=class extends k.Disposable{constructor(b,p,S){super(),this.productService=p,this.logService=S,this._DataMaxAge=this.productService.quality!=="stable"?1e3*60*60*24*7:1e3*60*60*24*30*3,b&&this._register(new D.RunOnceScheduler(()=>{this.cleanUpCodeCaches(b)},3e4)).schedule()}async cleanUpCodeCaches(b){this.logService.trace("[code cache cleanup]: Starting to clean up old code cache folders.");try{const p=Date.now(),S=(0,L.dirname)(b),f=(0,L.basename)(b),g=await T.Promises.readdir(S);await Promise.all(g.map(async y=>{if(y===f)return;const l=(0,L.join)(S,y),m=await T.Promises.stat(l);if(m.isDirectory()&&p-m.mtime.getTime()>this._DataMaxAge)return this.logService.trace(`[code cache cleanup]: Removing code cache folder ${y}.`),T.Promises.rm(l)}))}catch(p){(0,i.onUnexpectedError)(p)}}};w=ve([H(1,P.IProductService),H(2,I.ILogService)],w),e.CodeCacheCleaner=w}),define(se[210],oe([0,1,6,9,2,12,28,15,8,25]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguagePackCachedDataCleaner=void 0;let C=class extends k.Disposable{constructor(p,S,f){super(),this.environmentService=p,this.logService=S,this.productService=f,this._DataMaxAge=this.productService.quality!=="stable"?1e3*60*60*24*7:1e3*60*60*24*30*3,this.environmentService.isBuilt&&this._register(new D.RunOnceScheduler(()=>{this.cleanUpLanguagePackCache()},4e4)).schedule()}async cleanUpLanguagePackCache(){this.logService.trace("[language pack cache cleanup]: Starting to clean up unused language packs.");try{const p=Object.create(null),S=JSON.parse(await T.Promises.readFile((0,L.join)(this.environmentService.userDataPath,"languagepacks.json"),"utf8"));for(const m of Object.keys(S)){const u=S[m];p[`${u.hash}.${m}`]=!0}const f=(0,L.join)(this.environmentService.userDataPath,"clp");if(!await T.Promises.exists(f))return;const y=await T.Promises.readdir(f);for(const m of y){if(p[m]){this.logService.trace(`[language pack cache cleanup]: Skipping folder ${m}. Language pack still in use.`);continue}this.logService.trace(`[language pack cache cleanup]: Removing unused language pack: ${m}`),await T.Promises.rm((0,L.join)(f,m))}const l=Date.now();for(const m of Object.keys(p)){const u=(0,L.join)(f,m),h=await T.Promises.readdir(u);for(const d of h){if(d==="tcf.json")continue;const n=(0,L.join)(u,d),o=await T.Promises.stat(n);o.isDirectory()&&l-o.mtime.getTime()>this._DataMaxAge&&(this.logService.trace(`[language pack cache cleanup]: Removing language pack cache folder: ${(0,L.join)(m,d)}`),await T.Promises.rm(n))}}}catch(p){(0,i.onUnexpectedError)(p)}}};C=ve([H(0,I.INativeEnvironmentService),H(1,P.ILogService),H(2,w.IProductService)],C),e.LanguagePackCachedDataCleaner=C}),define(se[211],oe([0,1,20,2,22,186,13,25]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionTipsService=void 0;let P=class extends i.Disposable{constructor(C,b){super(),this.fileService=C,this.productService=b,this.allConfigBasedTips=new Map,this.productService.configBasedExtensionTips&&Object.entries(this.productService.configBasedExtensionTips).forEach(([,p])=>this.allConfigBasedTips.set(p.configPath,p))}getConfigBasedTips(C){return this.getValidConfigBasedTips(C)}async getImportantExecutableBasedTips(){return[]}async getOtherExecutableBasedTips(){return[]}async getValidConfigBasedTips(C){const b=[];for(const[p,S]of this.allConfigBasedTips)if(!(S.configScheme&&S.configScheme!==C.scheme))try{const f=await this.fileService.readFile((0,k.joinPath)(C,p)),g=new Map;Object.entries(S.recommendations).forEach(([l,m])=>{if((0,D.isNonEmptyArray)(m.remotes))for(const u of m.remotes)g.set(u,{extensionId:l,extensionName:m.name,configName:S.configName,important:!!m.important,isExtensionPack:!!m.isExtensionPack,whenNotInstalled:m.whenNotInstalled});else b.push({extensionId:l,extensionName:m.name,configName:S.configName,important:!!m.important,isExtensionPack:!!m.isExtensionPack,whenNotInstalled:m.whenNotInstalled})});const y=(0,L.getDomainsOfRemotes)(f.value.toString(),[...g.keys()]);for(const l of y){const m=g.get(l);m&&b.push(m)}}catch{}return b}};P=ve([H(0,T.IFileService),H(1,I.IProductService)],P),e.ExtensionTipsService=P}),define(se[212],oe([0,1,12,4]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=e.IV8InspectProfilingService=void 0,e.IV8InspectProfilingService=(0,i.createDecorator)("IV8InspectProfilingService");var k;(function(L){function T(P){return Boolean(P.samples&&P.timeDeltas)}L.isValidProfile=T;function I(P,w="noAbsolutePaths"){for(const C of P.nodes)C.callFrame&&C.callFrame.url&&((0,D.isAbsolute)(C.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(C.callFrame.url))&&(C.callFrame.url=(0,D.join)(w,(0,D.basename)(C.callFrame.url)));return P}L.rewriteAbsolutePaths=I})(k=e.Utils||(e.Utils={}))}),define(se[213],oe([0,1,31]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InspectProfilingService=void 0;class i{constructor(){this._sessions=new Map}async startProfiling(L){const I=await(await new Promise((w,C)=>{Z(["v8-inspect-profiler"],w,C)})).startProfiling({port:L.port,checkForPaused:!0}),P=(0,D.generateUuid)();return this._sessions.set(P,I),P}async stopProfiling(L){const T=this._sessions.get(L);if(!T)throw new Error(`UNKNOWN session '${L}'`);const I=await T.stop();return this._sessions.delete(L),I.profile}}e.InspectProfilingService=i}),define(se[40],oe([0,1,127,14]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=void 0;class k{constructor(){this.data=new Map}add(T,I){D.ok(i.isString(T)),D.ok(i.isObject(I)),D.ok(!this.data.has(T),"There is already an extension with this id"),this.data.set(T,I)}knows(T){return this.data.has(T)}as(T){return this.data.get(T)||null}}e.Registry=new k}),define(se[105],oe([0,1,3,40]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Extensions=void 0,e.Extensions={JSONContribution:"base.contributions.json"};function k(I){return I.length>0&&I.charAt(I.length-1)==="#"?I.substring(0,I.length-1):I}class L{constructor(){this._onDidChangeSchema=new D.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(P,w){this.schemasById[k(P)]=w,this._onDidChangeSchema.fire(P)}notifySchemaChanged(P){this._onDidChangeSchema.fire(P)}getSchemaContributions(){return{schemas:this.schemasById}}}const T=new L;i.Registry.add(e.Extensions.JSONContribution,T)}),define(se[46],oe([0,1,20,3,14,152,16,105,40]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getScopes=e.validateProperty=e.getDefaultValue=e.keyFromOverrideIdentifiers=e.overrideIdentifiersFromKey=e.OVERRIDE_PROPERTY_REGEX=e.OVERRIDE_PROPERTY_PATTERN=e.configurationDefaultsSchemaId=e.resourceLanguageSettingsSchemaId=e.resourceSettings=e.windowSettings=e.machineOverridableSettings=e.machineSettings=e.applicationSettings=e.allSettings=e.ConfigurationScope=e.Extensions=e.EditPresentationTypes=void 0;var w;(function(d){d.Multiline="multilineText",d.Singleline="singlelineText"})(w=e.EditPresentationTypes||(e.EditPresentationTypes={})),e.Extensions={Configuration:"base.contributions.configuration"};var C;(function(d){d[d.APPLICATION=1]="APPLICATION",d[d.MACHINE=2]="MACHINE",d[d.WINDOW=3]="WINDOW",d[d.RESOURCE=4]="RESOURCE",d[d.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",d[d.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(C=e.ConfigurationScope||(e.ConfigurationScope={})),e.allSettings={properties:{},patternProperties:{}},e.applicationSettings={properties:{},patternProperties:{}},e.machineSettings={properties:{},patternProperties:{}},e.machineOverridableSettings={properties:{},patternProperties:{}},e.windowSettings={properties:{},patternProperties:{}},e.resourceSettings={properties:{},patternProperties:{}},e.resourceLanguageSettingsSchemaId="vscode://schemas/settings/resourceLanguage",e.configurationDefaultsSchemaId="vscode://schemas/settings/configurationDefaults";const b=P.Registry.as(I.Extensions.JSONContribution);class p{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new i.Emitter,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new i.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:L.localize(0,null),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(n,o=!0){this.registerConfigurations([n],o)}registerConfigurations(n,o=!0){const t=this.doRegisterConfigurations(n,o);b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}deregisterConfigurations(n){const o=this.doDeregisterConfigurations(n);b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:o})}updateConfigurations({add:n,remove:o}){const t=[];t.push(...this.doDeregisterConfigurations(o)),t.push(...this.doRegisterConfigurations(n,!1)),b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:(0,D.distinct)(t)})}registerDefaultConfigurations(n){const o=[],t=[];for(const{overrides:s,source:r}of n)for(const c in s)if(o.push(c),e.OVERRIDE_PROPERTY_REGEX.test(c)){const a=this.configurationDefaultsOverrides.get(c),v=a?.valuesSources??new Map;if(r)for(const O of Object.keys(s[c]))v.set(O,r);const E={...a?.value||{},...s[c]};this.configurationDefaultsOverrides.set(c,{source:r,value:E,valuesSources:v});const R=(0,T.getLanguageTagSettingPlainKey)(c),N={type:"object",default:E,description:L.localize(1,null,R),$ref:e.resourceLanguageSettingsSchemaId,defaultDefaultValue:E,source:k.isString(r)?void 0:r,defaultValueSource:r};t.push(...g(c)),this.configurationProperties[c]=N,this.defaultLanguageConfigurationOverridesNode.properties[c]=N}else{this.configurationDefaultsOverrides.set(c,{value:s[c],source:r});const a=this.configurationProperties[c];a&&(this.updatePropertyDefaultValue(c,a),this.updateSchema(c,a))}this.registerOverrideIdentifiers(t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:o,defaultsOverrides:!0})}deregisterDefaultConfigurations(n){const o=[];for(const{overrides:t,source:s}of n)for(const r in t){const c=this.configurationDefaultsOverrides.get(r),a=k.isString(s)?s:s?.id,v=k.isString(c?.source)?c?.source:c?.source?.id;if(a===v)if(o.push(r),this.configurationDefaultsOverrides.delete(r),e.OVERRIDE_PROPERTY_REGEX.test(r))delete this.configurationProperties[r],delete this.defaultLanguageConfigurationOverridesNode.properties[r];else{const E=this.configurationProperties[r];E&&(this.updatePropertyDefaultValue(r,E),this.updateSchema(r,E))}}this.updateOverridePropertyPatternKey(),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:o,defaultsOverrides:!0})}notifyConfigurationSchemaUpdated(...n){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(n){for(const o of n)this.overrideIdentifiers.add(o);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(n,o){const t=[];return n.forEach(s=>{t.push(...this.validateAndRegisterProperties(s,o,s.extensionInfo,s.restrictedProperties)),this.configurationContributors.push(s),this.registerJSONConfiguration(s)}),t}doDeregisterConfigurations(n){const o=[],t=s=>{if(s.properties)for(const r in s.properties){o.push(r);const c=this.configurationProperties[r];c?.policy?.name&&this.policyConfigurations.delete(c.policy.name),delete this.configurationProperties[r],this.removeFromSchema(r,s.properties[r])}s.allOf?.forEach(r=>t(r))};for(const s of n){t(s);const r=this.configurationContributors.indexOf(s);r!==-1&&this.configurationContributors.splice(r,1)}return o}validateAndRegisterProperties(n,o=!0,t,s,r=3){r=k.isUndefinedOrNull(n.scope)?r:n.scope;const c=[],a=n.properties;if(a)for(const E in a){const R=a[E];if(o&&u(E,R)){delete a[E];continue}if(R.source=t,R.defaultDefaultValue=a[E].default,this.updatePropertyDefaultValue(E,R),e.OVERRIDE_PROPERTY_REGEX.test(E)?R.scope=void 0:(R.scope=k.isUndefinedOrNull(R.scope)?r:R.scope,R.restricted=k.isUndefinedOrNull(R.restricted)?!!s?.includes(E):R.restricted),a[E].hasOwnProperty("included")&&!a[E].included){this.excludedConfigurationProperties[E]=a[E],delete a[E];continue}else this.configurationProperties[E]=a[E],a[E].policy?.name&&this.policyConfigurations.set(a[E].policy.name,E);!a[E].deprecationMessage&&a[E].markdownDeprecationMessage&&(a[E].deprecationMessage=a[E].markdownDeprecationMessage),c.push(E)}const v=n.allOf;if(v)for(const E of v)c.push(...this.validateAndRegisterProperties(E,o,t,s,r));return c}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(n){const o=t=>{const s=t.properties;if(s)for(const c in s)this.updateSchema(c,s[c]);t.allOf?.forEach(o)};o(n)}updateSchema(n,o){switch(e.allSettings.properties[n]=o,o.scope){case 1:e.applicationSettings.properties[n]=o;break;case 2:e.machineSettings.properties[n]=o;break;case 6:e.machineOverridableSettings.properties[n]=o;break;case 3:e.windowSettings.properties[n]=o;break;case 4:e.resourceSettings.properties[n]=o;break;case 5:e.resourceSettings.properties[n]=o,this.resourceLanguageSettingsSchema.properties[n]=o;break}}removeFromSchema(n,o){switch(delete e.allSettings.properties[n],o.scope){case 1:delete e.applicationSettings.properties[n];break;case 2:delete e.machineSettings.properties[n];break;case 6:delete e.machineOverridableSettings.properties[n];break;case 3:delete e.windowSettings.properties[n];break;case 4:case 5:delete e.resourceSettings.properties[n],delete this.resourceLanguageSettingsSchema.properties[n];break}}updateOverridePropertyPatternKey(){for(const n of this.overrideIdentifiers.values()){const o=`[${n}]`,t={type:"object",description:L.localize(2,null),errorMessage:L.localize(3,null),$ref:e.resourceLanguageSettingsSchemaId};this.updatePropertyDefaultValue(o,t),e.allSettings.properties[o]=t,e.applicationSettings.properties[o]=t,e.machineSettings.properties[o]=t,e.machineOverridableSettings.properties[o]=t,e.windowSettings.properties[o]=t,e.resourceSettings.properties[o]=t}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){const n={type:"object",description:L.localize(4,null),errorMessage:L.localize(5,null),$ref:e.resourceLanguageSettingsSchemaId};e.allSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,e.applicationSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,e.machineSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,e.machineOverridableSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,e.windowSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,e.resourceSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=n,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(n,o){const t=this.configurationDefaultsOverrides.get(n);let s=t?.value,r=t?.source;k.isUndefined(s)&&(s=o.defaultDefaultValue,r=void 0),k.isUndefined(s)&&(s=l(o.type)),o.default=s,o.defaultValueSource=r}}const S="\\[([^\\]]+)\\]",f=new RegExp(S,"g");e.OVERRIDE_PROPERTY_PATTERN=`^(${S})+$`,e.OVERRIDE_PROPERTY_REGEX=new RegExp(e.OVERRIDE_PROPERTY_PATTERN);function g(d){const n=[];if(e.OVERRIDE_PROPERTY_REGEX.test(d)){let o=f.exec(d);for(;o?.length;){const t=o[1].trim();t&&n.push(t),o=f.exec(d)}}return(0,D.distinct)(n)}e.overrideIdentifiersFromKey=g;function y(d){return d.reduce((n,o)=>`${n}[${o}]`,"")}e.keyFromOverrideIdentifiers=y;function l(d){switch(Array.isArray(d)?d[0]:d){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}e.getDefaultValue=l;const m=new p;P.Registry.add(e.Extensions.Configuration,m);function u(d,n){return d.trim()?e.OVERRIDE_PROPERTY_REGEX.test(d)?L.localize(7,null,d):m.getConfigurationProperties()[d]!==void 0?L.localize(8,null,d):n.policy?.name&&m.getPolicyConfigurations().get(n.policy?.name)!==void 0?L.localize(9,null,d,n.policy?.name,m.getPolicyConfigurations().get(n.policy?.name)):null:L.localize(6,null)}e.validateProperty=u;function h(){const d=[],n=m.getConfigurationProperties();for(const o of Object.keys(n))d.push([o,n[o].scope]);return d.push(["launch",4]),d.push(["task",4]),d}e.getScopes=h}),define(se[74],oe([0,1,20,3,35,2,37,32,14,7,16,46,40]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationChangeEvent=e.mergeChanges=e.Configuration=e.UserSettings=e.ConfigurationModelParser=e.ConfigurationModel=void 0;class S{constructor(o={},t=[],s=[],r){this._contents=o,this._keys=t,this._overrides=s,this.raw=r,this.frozen=!1,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const o=this.raw.map(t=>{if(t instanceof S)return t;const s=new f("");return s.parseRaw(t),s.configurationModel});this._rawConfiguration=o.reduce((t,s)=>s===t?s:t.merge(s),o[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}isFrozen(){return this.frozen}getValue(o){return o?(0,C.getConfigurationValue)(this.contents,o):this.contents}inspect(o,t){const s=this.rawConfiguration.getValue(o),r=t?this.rawConfiguration.getOverrideValue(o,t):void 0,c=t?this.rawConfiguration.override(t).getValue(o):s;return{value:s,override:r,merged:c}}getOverrideValue(o,t){const s=this.getContentsForOverrideIdentifer(t);return s?o?(0,C.getConfigurationValue)(s,o):s:void 0}getKeysForOverrideIdentifier(o){const t=[];for(const s of this.overrides)s.identifiers.includes(o)&&t.push(...s.keys);return D.distinct(t)}getAllOverrideIdentifiers(){const o=[];for(const t of this.overrides)o.push(...t.identifiers);return D.distinct(o)}override(o){let t=this.overrideConfigurations.get(o);return t||(t=this.createOverrideConfigurationModel(o),this.overrideConfigurations.set(o,t)),t}merge(...o){const t=I.deepClone(this.contents),s=I.deepClone(this.overrides),r=[...this.keys],c=this.raw?.length?[...this.raw]:[this];for(const a of o)if(c.push(...a.raw?.length?a.raw:[a]),!a.isEmpty()){this.mergeContents(t,a.contents);for(const v of a.overrides){const[E]=s.filter(R=>D.equals(R.identifiers,v.identifiers));E?(this.mergeContents(E.contents,v.contents),E.keys.push(...v.keys),E.keys=D.distinct(E.keys)):s.push(I.deepClone(v))}for(const v of a.keys)r.indexOf(v)===-1&&r.push(v)}return new S(t,r,s,c.every(a=>a instanceof S)?void 0:c)}freeze(){return this.frozen=!0,this}clone(){return new S(I.deepClone(this.contents),[...this.keys],I.deepClone(this.overrides))}createOverrideConfigurationModel(o){const t=this.getContentsForOverrideIdentifer(o);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const s={};for(const r of D.distinct([...Object.keys(this.contents),...Object.keys(t)])){let c=this.contents[r];const a=t[r];a&&(typeof c=="object"&&typeof a=="object"?(c=I.deepClone(c),this.mergeContents(c,a)):c=a),s[r]=c}return new S(s,this.keys,this.overrides)}mergeContents(o,t){for(const s of Object.keys(t)){if(s in o&&P.isObject(o[s])&&P.isObject(t[s])){this.mergeContents(o[s],t[s]);continue}o[s]=I.deepClone(t[s])}}checkAndFreeze(o){return this.frozen&&!Object.isFrozen(o)?I.deepFreeze(o):o}getContentsForOverrideIdentifer(o){let t=null,s=null;const r=c=>{c&&(s?this.mergeContents(s,c):s=I.deepClone(c))};for(const c of this.overrides)D.equals(c.identifiers,[o])?t=c.contents:c.identifiers.includes(o)&&r(c.contents);return r(t),s}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(o,t){this.addKey(o),(0,C.addToValueTree)(this.contents,o,t,s=>{throw new Error(s)})}removeValue(o){this.removeKey(o)&&(0,C.removeFromValueTree)(this.contents,o)}addKey(o){let t=this.keys.length;for(let s=0;s<t;s++)o.indexOf(this.keys[s])===0&&(t=s);this.keys.splice(t,1,o)}removeKey(o){const t=this.keys.indexOf(o);return t!==-1?(this.keys.splice(t,1),!0):!1}}e.ConfigurationModel=S;class f{constructor(o){this._name=o,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||new S}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(o,t){if(!P.isUndefinedOrNull(o)){const s=this.doParseContent(o);this.parseRaw(s,t)}}reparse(o){this._raw&&this.parseRaw(this._raw,o)}parseRaw(o,t){this._raw=o;const{contents:s,keys:r,overrides:c,restricted:a,hasExcludedProperties:v}=this.doParseRaw(o,t);this._configurationModel=new S(s,r,c,v?[o]:void 0),this._restrictedConfigurations=a||[]}doParseContent(o){let t={},s=null,r=[];const c=[],a=[];function v(R){Array.isArray(r)?r.push(R):s!==null&&(r[s]=R)}const E={onObjectBegin:()=>{const R={};v(R),c.push(r),r=R,s=null},onObjectProperty:R=>{s=R},onObjectEnd:()=>{r=c.pop()},onArrayBegin:()=>{const R=[];v(R),c.push(r),r=R,s=null},onArrayEnd:()=>{r=c.pop()},onLiteralValue:v,onError:(R,N,O)=>{a.push({error:R,offset:N,length:O})}};if(o)try{k.visit(o,E),t=r[0]||{}}catch(R){console.error(`Error while parsing settings file ${this._name}: ${R}`),this._parseErrors=[R]}return t}doParseRaw(o,t){const s=p.Registry.as(b.Extensions.Configuration).getConfigurationProperties(),r=this.filter(o,s,!0,t);o=r.raw;const c=(0,C.toValuesTree)(o,E=>console.error(`Conflict in settings file ${this._name}: ${E}`)),a=Object.keys(o),v=this.toOverrides(o,E=>console.error(`Conflict in settings file ${this._name}: ${E}`));return{contents:c,keys:a,overrides:v,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(o,t,s,r){let c=!1;if(!r?.scopes&&!r?.skipRestricted)return{raw:o,restricted:[],hasExcludedProperties:c};const a={},v=[];for(const E in o)if(b.OVERRIDE_PROPERTY_REGEX.test(E)&&s){const R=this.filter(o[E],t,!1,r);a[E]=R.raw,c=c||R.hasExcludedProperties,v.push(...R.restricted)}else{const R=t[E],N=R?typeof R.scope<"u"?R.scope:3:void 0;R?.restricted&&v.push(E),(N===void 0||r.scopes===void 0||r.scopes.includes(N))&&!(r.skipRestricted&&R?.restricted)?a[E]=o[E]:c=!0}return{raw:a,restricted:v,hasExcludedProperties:c}}toOverrides(o,t){const s=[];for(const r of Object.keys(o))if(b.OVERRIDE_PROPERTY_REGEX.test(r)){const c={};for(const a in o[r])c[a]=o[r][a];s.push({identifiers:(0,b.overrideIdentifiersFromKey)(r),keys:Object.keys(c),contents:(0,C.toValuesTree)(c,t)})}return s}}e.ConfigurationModelParser=f;class g extends L.Disposable{constructor(o,t,s,r){super(),this.userSettingsResource=o,this.scopes=t,this.fileService=r,this._onDidChange=this._register(new i.Emitter),this.onDidChange=this._onDidChange.event,this.parser=new f(this.userSettingsResource.toString()),this.parseOptions={scopes:this.scopes},this._register(this.fileService.watch(s.dirname(this.userSettingsResource))),this._register(this.fileService.watch(this.userSettingsResource)),this._register(i.Event.any(i.Event.filter(this.fileService.onDidFilesChange,c=>c.contains(this.userSettingsResource)),i.Event.filter(this.fileService.onDidRunOperation,c=>(c.isOperation(0)||c.isOperation(3)||c.isOperation(1)||c.isOperation(4))&&s.isEqual(c.resource,o)))(()=>this._onDidChange.fire()))}async loadConfiguration(){try{const o=await this.fileService.readFile(this.userSettingsResource);return this.parser.parse(o.value.toString()||"{}",this.parseOptions),this.parser.configurationModel}catch{return new S}}reparse(){return this.parser.reparse(this.parseOptions),this.parser.configurationModel}getRestrictedSettings(){return this.parser.restrictedConfigurations}}e.UserSettings=g;class y{constructor(o,t,s,r,c,a,v,E,R,N,O,z,F){this.key=o,this.overrides=t,this.value=s,this.overrideIdentifiers=r,this.defaultConfiguration=c,this.policyConfiguration=a,this.applicationConfiguration=v,this.userConfiguration=E,this.localUserConfiguration=R,this.remoteUserConfiguration=N,this.workspaceConfiguration=O,this.folderConfigurationModel=z,this.memoryInspectValue=F}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.defaultInspectValue.value!==void 0||this.defaultInspectValue.override!==void 0?{value:this.defaultInspectValue.value,override:this.defaultInspectValue.override}:void 0}get policyInspectValue(){return this._policyInspectValue===void 0&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){return this.policyInspectValue?.merged}get policy(){return this.policyInspectValue?.value!==void 0?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return this._applicationInspectValue===void 0&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){return this.applicationInspectValue?.merged}get application(){return this.applicationInspectValue?.value!==void 0||this.applicationInspectValue?.override!==void 0?{value:this.applicationInspectValue.value,override:this.applicationInspectValue.override}:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.userLocalInspectValue.value!==void 0||this.userLocalInspectValue.override!==void 0?{value:this.userLocalInspectValue.value,override:this.userLocalInspectValue.override}:void 0}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.userRemoteInspectValue.value!==void 0||this.userRemoteInspectValue.override!==void 0?{value:this.userRemoteInspectValue.value,override:this.userRemoteInspectValue.override}:void 0}get workspaceInspectValue(){return this._workspaceInspectValue===void 0&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){return this.workspaceInspectValue?.merged}get workspace(){return this.workspaceInspectValue?.value!==void 0||this.workspaceInspectValue?.override!==void 0?{value:this.workspaceInspectValue.value,override:this.workspaceInspectValue.override}:void 0}get workspaceFolderInspectValue(){return this._workspaceFolderInspectValue===void 0&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){return this.workspaceFolderInspectValue?.merged}get workspaceFolder(){return this.workspaceFolderInspectValue?.value!==void 0||this.workspaceFolderInspectValue?.override!==void 0?{value:this.workspaceFolderInspectValue.value,override:this.workspaceFolderInspectValue.override}:void 0}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.memoryInspectValue.value!==void 0||this.memoryInspectValue.override!==void 0?{value:this.memoryInspectValue.value,override:this.memoryInspectValue.override}:void 0}}class l{constructor(o,t,s,r,c=new S,a=new S,v=new T.ResourceMap,E=new S,R=new T.ResourceMap,N=!0){this._defaultConfiguration=o,this._policyConfiguration=t,this._applicationConfiguration=s,this._localUserConfiguration=r,this._remoteUserConfiguration=c,this._workspaceConfiguration=a,this._folderConfigurations=v,this._memoryConfiguration=E,this._memoryConfigurationByResource=R,this._freeze=N,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new T.ResourceMap,this._userConfiguration=null}getValue(o,t,s){return this.getConsolidatedConfigurationModel(o,t,s).getValue(o)}updateValue(o,t,s={}){let r;s.resource?(r=this._memoryConfigurationByResource.get(s.resource),r||(r=new S,this._memoryConfigurationByResource.set(s.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(o):r.setValue(o,t),s.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(o,t,s){const r=this.getConsolidatedConfigurationModel(o,t,s),c=D.distinct(r.overrides.map(E=>E.identifiers).flat()).filter(E=>r.getOverrideValue(o,E)!==void 0),a=this.getFolderConfigurationModelForResource(t.resource,s),v=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration;return new y(o,t,r.getValue(o),c.length?c:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze(),this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze(),this.userConfiguration.freeze(),this.localUserConfiguration.freeze(),this.remoteUserConfiguration.freeze(),s?this._workspaceConfiguration.freeze():void 0,a?a.freeze():void 0,v.inspect(o,t.overrideIdentifier))}keys(o){const t=this.getFolderConfigurationModelForResource(void 0,o);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(o){this._defaultConfiguration=o,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(o){this._policyConfiguration=o}updateApplicationConfiguration(o){this._applicationConfiguration=o,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(o){this._localUserConfiguration=o,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(o){this._remoteUserConfiguration=o,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(o){this._workspaceConfiguration=o,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(o,t){this._folderConfigurations.set(o,t),this._foldersConsolidatedConfigurations.delete(o)}deleteFolderConfiguration(o){this.folderConfigurations.delete(o),this._foldersConsolidatedConfigurations.delete(o)}compareAndUpdateDefaultConfiguration(o,t){const s=[];if(!t){const{added:r,updated:c,removed:a}=h(this._defaultConfiguration,o);t=[...r,...c,...a]}for(const r of t)for(const c of(0,b.overrideIdentifiersFromKey)(r)){const a=this._defaultConfiguration.getKeysForOverrideIdentifier(c),v=o.getKeysForOverrideIdentifier(c),E=[...v.filter(R=>a.indexOf(R)===-1),...a.filter(R=>v.indexOf(R)===-1),...a.filter(R=>!I.equals(this._defaultConfiguration.override(c).getValue(R),o.override(c).getValue(R)))];s.push([c,E])}return this.updateDefaultConfiguration(o),{keys:t,overrides:s}}compareAndUpdatePolicyConfiguration(o){const{added:t,updated:s,removed:r}=h(this._policyConfiguration,o),c=[...t,...s,...r];return c.length&&this.updatePolicyConfiguration(o),{keys:c,overrides:[]}}compareAndUpdateApplicationConfiguration(o){const{added:t,updated:s,removed:r,overrides:c}=h(this.applicationConfiguration,o),a=[...t,...s,...r];return a.length&&this.updateApplicationConfiguration(o),{keys:a,overrides:c}}compareAndUpdateLocalUserConfiguration(o){const{added:t,updated:s,removed:r,overrides:c}=h(this.localUserConfiguration,o),a=[...t,...s,...r];return a.length&&this.updateLocalUserConfiguration(o),{keys:a,overrides:c}}compareAndUpdateRemoteUserConfiguration(o){const{added:t,updated:s,removed:r,overrides:c}=h(this.remoteUserConfiguration,o),a=[...t,...s,...r];return a.length&&this.updateRemoteUserConfiguration(o),{keys:a,overrides:c}}compareAndUpdateWorkspaceConfiguration(o){const{added:t,updated:s,removed:r,overrides:c}=h(this.workspaceConfiguration,o),a=[...t,...s,...r];return a.length&&this.updateWorkspaceConfiguration(o),{keys:a,overrides:c}}compareAndUpdateFolderConfiguration(o,t){const s=this.folderConfigurations.get(o),{added:r,updated:c,removed:a,overrides:v}=h(s,t),E=[...r,...c,...a];return(E.length||!s)&&this.updateFolderConfiguration(o,t),{keys:E,overrides:v}}compareAndDeleteFolderConfiguration(o){const t=this.folderConfigurations.get(o);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(o);const{added:s,updated:r,removed:c,overrides:a}=h(t,void 0);return{keys:[...s,...r,...c],overrides:a}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(o,t,s){let r=this.getConsolidatedConfigurationModelForResource(t,s);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(o)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:o},t){let s=this.getWorkspaceConsolidatedConfiguration();if(t&&o){const r=t.getFolder(o);r&&(s=this.getFolderConsolidatedConfiguration(r.uri)||s);const c=this._memoryConfigurationByResource.get(o);c&&(s=s.merge(c))}return s}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(o){let t=this._foldersConsolidatedConfigurations.get(o);if(!t){const s=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(o);r?(t=s.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(o,t)):t=s}return t}getFolderConfigurationModelForResource(o,t){if(t&&o){const s=t.getFolder(o);if(s)return this._folderConfigurations.get(s.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((o,t)=>{const{contents:s,overrides:r,keys:c}=this._folderConfigurations.get(t);return o.push([t,{contents:s,overrides:r,keys:c}]),o},[])}}allKeys(){const o=new Set;return this._defaultConfiguration.freeze().keys.forEach(t=>o.add(t)),this.userConfiguration.freeze().keys.forEach(t=>o.add(t)),this._workspaceConfiguration.freeze().keys.forEach(t=>o.add(t)),this._folderConfigurations.forEach(t=>t.freeze().keys.forEach(s=>o.add(s))),[...o.values()]}allOverrideIdentifiers(){const o=new Set;return this._defaultConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>o.add(t)),this.userConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>o.add(t)),this._workspaceConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>o.add(t)),this._folderConfigurations.forEach(t=>t.freeze().getAllOverrideIdentifiers().forEach(s=>o.add(s))),[...o.values()]}getAllKeysForOverrideIdentifier(o){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(o).forEach(s=>t.add(s)),this.userConfiguration.getKeysForOverrideIdentifier(o).forEach(s=>t.add(s)),this._workspaceConfiguration.getKeysForOverrideIdentifier(o).forEach(s=>t.add(s)),this._folderConfigurations.forEach(s=>s.getKeysForOverrideIdentifier(o).forEach(r=>t.add(r))),[...t.values()]}static parse(o){const t=this.parseConfigurationModel(o.defaults),s=this.parseConfigurationModel(o.policy),r=this.parseConfigurationModel(o.application),c=this.parseConfigurationModel(o.user),a=this.parseConfigurationModel(o.workspace),v=o.folders.reduce((E,R)=>(E.set(w.URI.revive(R[0]),this.parseConfigurationModel(R[1])),E),new T.ResourceMap);return new l(t,s,r,c,new S,a,v,new S,new T.ResourceMap,!1)}static parseConfigurationModel(o){return new S(o.contents,o.keys,o.overrides).freeze()}}e.Configuration=l;function m(...n){if(n.length===0)return{keys:[],overrides:[]};if(n.length===1)return n[0];const o=new Set,t=new Map;for(const r of n)r.keys.forEach(c=>o.add(c)),r.overrides.forEach(([c,a])=>{const v=(0,T.getOrSet)(t,c,new Set);a.forEach(E=>v.add(E))});const s=[];return t.forEach((r,c)=>s.push([c,[...r.values()]])),{keys:[...o.values()],overrides:s}}e.mergeChanges=m;class u{constructor(o,t,s,r){this.change=o,this.previous=t,this.currentConfiguraiton=s,this.currentWorkspace=r,this._previousConfiguration=void 0;const c=new Set;o.keys.forEach(v=>c.add(v)),o.overrides.forEach(([,v])=>v.forEach(E=>c.add(E))),this.affectedKeys=[...c.values()];const a=new S;this.affectedKeys.forEach(v=>a.setValue(v,{})),this.affectedKeysTree=a.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=l.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(o,t){if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,o)){if(t){const s=this.previousConfiguration?this.previousConfiguration.getValue(o,t,this.previous?.workspace):void 0,r=this.currentConfiguraiton.getValue(o,t,this.currentWorkspace);return!I.equals(s,r)}return!0}return!1}doesAffectedKeysTreeContains(o,t){let s=(0,C.toValuesTree)({[t]:!0},()=>{}),r;for(;typeof s=="object"&&(r=Object.keys(s)[0]);){if(o=o[r],!o)return!1;s=s[r]}return!0}}e.ConfigurationChangeEvent=u;function h(n,o){const{added:t,removed:s,updated:r}=d(o?.rawConfiguration,n?.rawConfiguration),c=[],a=n?.getAllOverrideIdentifiers()||[],v=o?.getAllOverrideIdentifiers()||[];if(o){const E=v.filter(R=>!a.includes(R));for(const R of E)c.push([R,o.getKeysForOverrideIdentifier(R)])}if(n){const E=a.filter(R=>!v.includes(R));for(const R of E)c.push([R,n.getKeysForOverrideIdentifier(R)])}if(o&&n){for(const E of a)if(v.includes(E)){const R=d({contents:n.getOverrideValue(void 0,E)||{},keys:n.getKeysForOverrideIdentifier(E)},{contents:o.getOverrideValue(void 0,E)||{},keys:o.getKeysForOverrideIdentifier(E)});c.push([E,[...R.added,...R.removed,...R.updated]])}}return{added:t,removed:s,updated:r,overrides:c}}function d(n,o){const t=n?o?n.keys.filter(c=>o.keys.indexOf(c)===-1):[...n.keys]:[],s=o?n?o.keys.filter(c=>n.keys.indexOf(c)===-1):[...o.keys]:[],r=[];if(n&&o){for(const c of o.keys)if(n.keys.indexOf(c)!==-1){const a=(0,C.getConfigurationValue)(o.contents,c),v=(0,C.getConfigurationValue)(n.contents,c);I.equals(a,v)||r.push(c)}}return{added:t,removed:s,updated:r}}}),define(se[214],oe([0,1,20,3,2,32,14,16,74,46,8,58,40]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicyConfiguration=e.NullPolicyConfiguration=e.DefaultConfigurationModel=e.DefaultConfiguration=void 0;class S extends k.Disposable{constructor(){super(...arguments),this._onDidChangeConfiguration=this._register(new i.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event}get configurationModel(){return this._configurationModel||(this._configurationModel=new f(this.getConfigurationDefaultOverrides())),this._configurationModel}async initialize(){return this._configurationModel=void 0,this._register(p.Registry.as(w.Extensions.Configuration).onDidUpdateConfiguration(({properties:m,defaultsOverrides:u})=>this.onDidUpdateConfiguration(m,u))),this.configurationModel}reload(){return this._configurationModel=void 0,this.configurationModel}onDidUpdateConfiguration(m,u){this._configurationModel=void 0,this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:m})}getConfigurationDefaultOverrides(){return{}}}e.DefaultConfiguration=S;class f extends P.ConfigurationModel{constructor(m={}){const u=p.Registry.as(w.Extensions.Configuration).getConfigurationProperties(),h=Object.keys(u),d=Object.create(null),n=[];for(const o in u){const t=m[o],s=t!==void 0?t:u[o].default;(0,I.addToValueTree)(d,o,s,r=>console.error(`Conflict in default settings: ${r}`))}for(const o of Object.keys(d))w.OVERRIDE_PROPERTY_REGEX.test(o)&&n.push({identifiers:(0,w.overrideIdentifiersFromKey)(o),keys:Object.keys(d[o]),contents:(0,I.toValuesTree)(d[o],t=>console.error(`Conflict in default settings file: ${t}`))});super(d,h,n)}}e.DefaultConfigurationModel=f;class g{constructor(){this.onDidChangeConfiguration=i.Event.None,this.configurationModel=new P.ConfigurationModel}async initialize(){return this.configurationModel}}e.NullPolicyConfiguration=g;let y=class extends k.Disposable{get configurationModel(){return this._configurationModel}constructor(m,u,h){super(),this.defaultConfiguration=m,this.policyService=u,this.logService=h,this._onDidChangeConfiguration=this._register(new i.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=new P.ConfigurationModel}async initialize(){return this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this._register(this.policyService.onDidChange(m=>this.onDidChangePolicies(m))),this._register(this.defaultConfiguration.onDidChangeConfiguration(async({properties:m})=>this.update(await this.updatePolicyDefinitions(m),!0))),this._configurationModel}async updatePolicyDefinitions(m){const u={},h=[],d=p.Registry.as(w.Extensions.Configuration).getConfigurationProperties();for(const n of m){const o=d[n];if(!o){h.push(n);continue}if(o.policy){if(o.type!=="string"&&o.type!=="number"){this.logService.warn(`Policy ${o.policy.name} has unsupported type ${o.type}`);continue}h.push(n),u[o.policy.name]={type:o.type}}}return(0,T.isEmptyObject)(u)||await this.policyService.updatePolicyDefinitions(u),h}onDidChangePolicies(m){const u=p.Registry.as(w.Extensions.Configuration).getPolicyConfigurations(),h=(0,D.coalesce)(m.map(d=>u.get(d)));this.update(h,!0)}update(m,u){const h=p.Registry.as(w.Extensions.Configuration).getConfigurationProperties(),d=[],n=this._configurationModel.isEmpty();for(const o of m){const t=h[o]?.policy?.name;if(t){const s=this.policyService.getPolicyValue(t);(n?s!==void 0:!(0,L.equals)(this._configurationModel.getValue(o),s))&&d.push([o,s])}else this._configurationModel.getValue(o)!==void 0&&d.push([o,void 0])}if(d.length){const o=this._configurationModel;this._configurationModel=new P.ConfigurationModel;for(const t of o.keys)this._configurationModel.setValue(t,o.getValue(t));for(const[t,s]of d)s===void 0?this._configurationModel.removeValue(t):this._configurationModel.setValue(t,s);u&&this._onDidChangeConfiguration.fire(this._configurationModel)}}};y=ve([H(1,b.IPolicyService),H(2,C.ILogService)],y),e.PolicyConfiguration=y}),define(se[215],oe([0,1,6,3,2,22,16,74,214,58]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationService=void 0;class C extends k.Disposable{constructor(p,S,f,g){super(),this.settingsResource=p,this._onDidChangeConfiguration=this._register(new i.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.defaultConfiguration=this._register(new P.DefaultConfiguration),this.policyConfiguration=f instanceof w.NullPolicyService?new P.NullPolicyConfiguration:this._register(new P.PolicyConfiguration(this.defaultConfiguration,f,g)),this.userConfiguration=this._register(new I.UserSettings(this.settingsResource,void 0,L.extUriBiasedIgnorePathCase,S)),this.configuration=new I.Configuration(this.defaultConfiguration.configurationModel,this.policyConfiguration.configurationModel,new I.ConfigurationModel,new I.ConfigurationModel),this.reloadConfigurationScheduler=this._register(new D.RunOnceScheduler(()=>this.reloadConfiguration(),50)),this._register(this.defaultConfiguration.onDidChangeConfiguration(({defaults:y,properties:l})=>this.onDidDefaultConfigurationChange(y,l))),this._register(this.policyConfiguration.onDidChangeConfiguration(y=>this.onDidPolicyConfigurationChange(y))),this._register(this.userConfiguration.onDidChange(()=>this.reloadConfigurationScheduler.schedule()))}async initialize(){const[p,S,f]=await Promise.all([this.defaultConfiguration.initialize(),this.policyConfiguration.initialize(),this.userConfiguration.loadConfiguration()]);this.configuration=new I.Configuration(p,S,new I.ConfigurationModel,f)}getConfigurationData(){return this.configuration.toData()}getValue(p,S){const f=typeof p=="string"?p:void 0,g=(0,T.isConfigurationOverrides)(p)?p:(0,T.isConfigurationOverrides)(S)?S:{};return this.configuration.getValue(f,g,void 0)}updateValue(p,S,f,g){return Promise.reject(new Error("not supported"))}inspect(p){return this.configuration.inspect(p,{},void 0)}keys(){return this.configuration.keys(void 0)}async reloadConfiguration(){const p=await this.userConfiguration.loadConfiguration();this.onDidChangeUserConfiguration(p)}onDidChangeUserConfiguration(p){const S=this.configuration.toData(),f=this.configuration.compareAndUpdateLocalUserConfiguration(p);this.trigger(f,S,2)}onDidDefaultConfigurationChange(p,S){const f=this.configuration.toData(),g=this.configuration.compareAndUpdateDefaultConfiguration(p,S);this.trigger(g,f,7)}onDidPolicyConfigurationChange(p){const S=this.configuration.toData(),f=this.configuration.compareAndUpdatePolicyConfiguration(p);this.trigger(f,S,7)}trigger(p,S,f){const g=new I.ConfigurationChangeEvent(p,{data:S},this.configuration);g.source=f,g.sourceConfig=this.getTargetConfiguration(f),this._onDidChangeConfiguration.fire(g)}getTargetConfiguration(p){switch(p){case 7:return this.configuration.defaults.contents;case 2:return this.configuration.localUserConfiguration.contents}return{}}}e.ConfigurationService=C}),define(se[216],oe([0,1,9,4]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteAuthorityResolverError=e.RemoteAuthorityResolverErrorCode=e.IRemoteAuthorityResolverService=void 0,e.IRemoteAuthorityResolverService=(0,i.createDecorator)("remoteAuthorityResolverService");var k;(function(T){T.Unknown="Unknown",T.NotAvailable="NotAvailable",T.TemporarilyNotAvailable="TemporarilyNotAvailable",T.NoResolverFound="NoResolverFound"})(k=e.RemoteAuthorityResolverErrorCode||(e.RemoteAuthorityResolverErrorCode={}));class L extends D.ErrorNoTelemetry{static isNotAvailable(I){return I instanceof L&&I._code===k.NotAvailable}static isTemporarilyNotAvailable(I){return I instanceof L&&I._code===k.TemporarilyNotAvailable}static isNoResolverFound(I){return I instanceof L&&I._code===k.NoResolverFound}static isHandled(I){return I instanceof L&&I.isHandled}constructor(I,P=k.Unknown,w){super(I),this._message=I,this._code=P,this._detail=w,this.isHandled=P===k.NotAvailable&&w===!0,Object.setPrototypeOf(this,L.prototype)}}e.RemoteAuthorityResolverError=L}),define(se[75],oe([0,1,21]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseAuthorityWithOptionalPort=e.parseAuthorityWithPort=e.getRemoteServerRootPath=e.getRemoteName=e.getRemoteAuthority=void 0;function i(w){return w.scheme===D.Schemas.vscodeRemote?w.authority:void 0}e.getRemoteAuthority=i;function k(w){if(!w)return;const C=w.indexOf("+");return C<0?w:w.substr(0,C)}e.getRemoteName=k;function L(w){return`/${w.quality??"oss"}-${w.commit??"dev"}`}e.getRemoteServerRootPath=L;function T(w){const{host:C,port:b}=P(w);if(typeof b>"u")throw new Error("Remote authority doesn't contain a port!");return{host:C,port:b}}e.parseAuthorityWithPort=T;function I(w,C){let{host:b,port:p}=P(w);return typeof p>"u"&&(p=C),{host:b,port:p}}e.parseAuthorityWithOptionalPort=I;function P(w){const C=w.match(/^(\[[0-9a-z:]+\]):(\d+)$/);if(C)return{host:C[1],port:parseInt(C[2],10)};const b=w.match(/^(\[[0-9a-z:]+\])$/);if(b)return{host:b[1],port:void 0};const p=w.match(/(.*):(\d+)$/);return p?{host:p[1],port:parseInt(p[2],10)}:{host:w,port:void 0}}}),define(se[42],oe([0,1,27,4,75]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IBuiltinExtensionsScannerService=e.isResolverExtension=e.isAuthenticationProviderExtension=e.isLanguagePackExtension=e.isApplicationScopedExtension=e.ExtensionIdentifier=e.TargetPlatform=e.ExtensionType=e.EXTENSION_CATEGORIES=e.isIExtensionIdentifier=e.getWorkspaceSupportTypeMessage=e.ALL_EXTENSION_KINDS=e.UNDEFINED_PUBLISHER=e.BUILTIN_MANIFEST_CACHE_FILE=e.USER_MANIFEST_CACHE_FILE=e.MANIFEST_CACHE_FOLDER=void 0,e.MANIFEST_CACHE_FOLDER="CachedExtensions",e.USER_MANIFEST_CACHE_FILE="user",e.BUILTIN_MANIFEST_CACHE_FILE="builtin",e.UNDEFINED_PUBLISHER="undefined_publisher",e.ALL_EXTENSION_KINDS=["ui","workspace","web"];function L(f){if(typeof f=="object"&&f!==null&&f.supported!==!0)return f.description}e.getWorkspaceSupportTypeMessage=L;function T(f){return f&&typeof f=="object"&&typeof f.id=="string"&&(!f.uuid||typeof f.uuid=="string")}e.isIExtensionIdentifier=T,e.EXTENSION_CATEGORIES=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var I;(function(f){f[f.System=0]="System",f[f.User=1]="User"})(I=e.ExtensionType||(e.ExtensionType={}));var P;(function(f){f.WIN32_X64="win32-x64",f.WIN32_IA32="win32-ia32",f.WIN32_ARM64="win32-arm64",f.LINUX_X64="linux-x64",f.LINUX_ARM64="linux-arm64",f.LINUX_ARMHF="linux-armhf",f.ALPINE_X64="alpine-x64",f.ALPINE_ARM64="alpine-arm64",f.DARWIN_X64="darwin-x64",f.DARWIN_ARM64="darwin-arm64",f.WEB="web",f.UNIVERSAL="universal",f.UNKNOWN="unknown",f.UNDEFINED="undefined"})(P=e.TargetPlatform||(e.TargetPlatform={}));class w{constructor(g){this.value=g,this._lower=g.toLowerCase()}static equals(g,y){if(typeof g>"u"||g===null)return typeof y>"u"||y===null;if(typeof y>"u"||y===null)return!1;if(typeof g=="string"||typeof y=="string"){const l=typeof g=="string"?g:g.value,m=typeof y=="string"?y:y.value;return D.equalsIgnoreCase(l,m)}return g._lower===y._lower}static toKey(g){return typeof g=="string"?g.toLowerCase():g._lower}}e.ExtensionIdentifier=w;function C(f){return b(f)}e.isApplicationScopedExtension=C;function b(f){return f.contributes&&f.contributes.localizations?f.contributes.localizations.length>0:!1}e.isLanguagePackExtension=b;function p(f){return f.contributes&&f.contributes.authentication?f.contributes.authentication.length>0:!1}e.isAuthenticationProviderExtension=p;function S(f,g){if(g){const y=`onResolveRemoteAuthority:${(0,k.getRemoteName)(g)}`;return f.activationEvents?.indexOf(y)!==-1}return!1}e.isResolverExtension=S,e.IBuiltinExtensionsScannerService=(0,i.createDecorator)("IBuiltinExtensionsScannerService")}),define(se[33],oe([0,1,27,29,42,5,7,9,36]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeTargetPlatform=e.isAlpineLinux=e.getExtensionDependencies=e.BetterMergeId=e.getGalleryExtensionTelemetryData=e.getLocalExtensionTelemetryData=e.groupByExtension=e.getGalleryExtensionId=e.adoptToGalleryExtensionId=e.getExtensionId=e.getIdAndVersion=e.ExtensionKey=e.areSameExtensions=void 0;function w(o,t){return o.uuid&&t.uuid?o.uuid===t.uuid:o.id===t.id?!0:(0,D.compareIgnoreCase)(o.id,t.id)===0}e.areSameExtensions=w;const C=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class b{static create(t){const s=t.manifest?t.manifest.version:t.version,r=t.manifest?t.targetPlatform:t.properties.targetPlatform;return new b(t.identifier,s,r)}static parse(t){const s=C.exec(t);return s&&s[1]&&s[2]?new b({id:s[1]},s[2],s[4]||void 0):null}constructor(t,s,r="undefined"){this.version=s,this.targetPlatform=r,this.id=t.id}toString(){return`${this.id}-${this.version}${this.targetPlatform!=="undefined"?`-${this.targetPlatform}`:""}`}equals(t){return t instanceof b?w(this,t)&&this.version===t.version&&this.targetPlatform===t.targetPlatform:!1}}e.ExtensionKey=b;const p=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function S(o){const t=p.exec(o);return t&&t[1]?[g(t[1]),t[2]]:[g(o),void 0]}e.getIdAndVersion=S;function f(o,t){return`${o}.${t}`}e.getExtensionId=f;function g(o){return o.toLocaleLowerCase()}e.adoptToGalleryExtensionId=g;function y(o,t){return g(f(o,t))}e.getGalleryExtensionId=y;function l(o,t){const s=[],r=c=>{for(const a of s)if(a.some(v=>w(t(v),t(c))))return a;return null};for(const c of o){const a=r(c);a?a.push(c):s.push([c])}return s}e.groupByExtension=l;function m(o){return{id:o.identifier.id,name:o.manifest.name,galleryId:null,publisherId:o.publisherId,publisherName:o.manifest.publisher,publisherDisplayName:o.publisherDisplayName,dependencies:o.manifest.extensionDependencies&&o.manifest.extensionDependencies.length>0}}e.getLocalExtensionTelemetryData=m;function u(o){return{id:o.identifier.id,name:o.name,galleryId:o.identifier.uuid,publisherId:o.publisherId,publisherName:o.publisher,publisherDisplayName:o.publisherDisplayName,isPreReleaseVersion:o.properties.isPreReleaseVersion,dependencies:!!(o.properties.dependencies&&o.properties.dependencies.length>0),isSigned:o.isSigned,...o.telemetryData}}e.getGalleryExtensionTelemetryData=u,e.BetterMergeId=new k.ExtensionIdentifier("pprice.better-merge");function h(o,t){const s=[],r=t.manifest.extensionDependencies?.slice(0)??[];for(;r.length;){const c=r.shift();if(c&&s.every(a=>!w(a.identifier,{id:c}))){const a=o.filter(v=>w(v.identifier,{id:c}));a.length===1&&(s.push(a[0]),r.push(...a[0].manifest.extensionDependencies?.slice(0)??[]))}}return s}e.getExtensionDependencies=h;async function d(o,t){if(!L.isLinux)return!1;let s;try{s=(await o.readFile(T.URI.file("/etc/os-release"))).value.toString()}catch{try{s=(await o.readFile(T.URI.file("/usr/lib/os-release"))).value.toString()}catch(c){t.debug("Error while getting the os-release file.",(0,I.getErrorMessage)(c))}}return!!s&&(s.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}e.isAlpineLinux=d;async function n(o,t){const s=await d(o,t),r=(0,i.getTargetPlatform)(s?"alpine":L.platform,P.arch);return t.debug("ComputeTargetPlatform:",r),r}e.computeTargetPlatform=n}),define(se[217],oe([0,1,24,33]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.migrateUnsupportedExtensions=void 0;async function k(L,T,I,P,w){try{const C=await L.getExtensionsControlManifest();if(!C.deprecated)return;const b=await L.getInstalled(1);for(const[p,S]of Object.entries(C.deprecated)){if(!S?.extension)continue;const{id:f,autoMigrate:g,preRelease:y}=S.extension;if(!g)continue;const l=b.find(u=>(0,i.areSameExtensions)(u.identifier,{id:p}));if(!l)continue;const m=(await T.getExtensions([{id:f,preRelease:y}],{targetPlatform:await L.getTargetPlatform(),compatible:!0},D.CancellationToken.None))[0];if(!m){w.info(`Skipping migrating '${l.identifier.id}' extension because, the comaptible target '${f}' extension is not found`);continue}try{w.info(`Migrating '${l.identifier.id}' extension to '${f}' extension...`);const u=!P.getDisabledExtensions().some(d=>(0,i.areSameExtensions)(d,l.identifier));await L.uninstall(l),w.info(`Uninstalled the unsupported extension '${l.identifier.id}'`);let h=b.find(d=>(0,i.areSameExtensions)(d.identifier,{id:f}));(!h||!h.isPreReleaseVersion&&u)&&(h=await L.installFromGallery(m,{installPreReleaseVersion:!0,isMachineScoped:l.isMachineScoped,operation:4}),w.info(`Installed the pre-release extension '${h.identifier.id}'`),u||(await P.disableExtension(h.identifier),w.info(`Disabled the pre-release extension '${h.identifier.id}' because the unsupported extension '${l.identifier.id}' is disabled`)),g.storage&&(I.addToMigrationList((0,i.getExtensionId)(l.manifest.publisher,l.manifest.name),(0,i.getExtensionId)(h.manifest.publisher,h.manifest.name)),w.info("Added pre-release extension to the storage migration list"))),w.info(`Migrated '${l.identifier.id}' extension to '${f}' extension.`)}catch(u){w.error(u)}}}catch(C){w.error(C)}}e.migrateUnsupportedExtensions=k}),define(se[218],oe([0,1,6,9,2,21,5,22,53,14,31,28,16,15,29,33,98,13,8,25]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsDownloader=void 0;let h=class St extends k.Disposable{constructor(n,o,t,s,r,c,a,v){super(),this.targetPlatform=n,this.fileService=t,this.extensionGalleryService=s,this.configurationService=r,this.productService=c,this.extensionSignatureVerificationService=a,this.logService=v,this.extensionsDownloadDir=o.extensionsDownloadLocation,this.cache=20,this.cleanUpPromise=this.cleanUp()}async download(n,o){await this.cleanUpPromise;const t=(0,I.joinPath)(this.extensionsDownloadDir,this.getName(n));try{await this.downloadFile(n,t,r=>this.extensionGalleryService.download(n,r,o))}catch(r){throw new f.ExtensionManagementError(r.message,f.ExtensionManagementErrorCode.Download)}let s=!1;if(await this.checkForVerification(n)){const r=await this.downloadSignatureArchive(n);try{s=await this.extensionSignatureVerificationService.verify(t.fsPath,r.fsPath),this.logService.info(`Verified extension: ${n.identifier.id}`,s)}catch(c){throw await this.delete(r),await this.delete(t),new f.ExtensionManagementError(c.code,f.ExtensionManagementErrorCode.Signature)}}return{location:t,verified:s}}async checkForVerification(n){if(!n.isSigned||await this.targetPlatform==="linux-armhf")return!1;const t=this.configurationService.getValue("extensions.verifySignature");return(0,w.isBoolean)(t)?t:this.productService.quality!=="stable"}async downloadSignatureArchive(n){await this.cleanUpPromise;const o=(0,I.joinPath)(this.extensionsDownloadDir,`${this.getName(n)}${St.SignatureArchiveExtension}`);return await this.downloadFile(n,o,t=>this.extensionGalleryService.downloadSignatureArchive(n,t)),o}async downloadFile(n,o,t){if(await this.fileService.exists(o))return;if(o.scheme!==L.Schemas.file){await t(o);return}const s=(0,I.joinPath)(this.extensionsDownloadDir,`.${(0,C.generateUuid)()}`);await this.fileService.exists(s)||await t(s);try{await this.rename(s,o,Date.now()+2*60*1e3)}catch(r){try{await this.fileService.del(s)}catch{}if(r.code==="ENOTEMPTY")this.logService.info("Rename failed because the file was downloaded by another source. So ignoring renaming.",n.identifier.id,o.path);else throw this.logService.info(`Rename failed because of ${(0,i.getErrorMessage)(r)}. Deleted the file from downloaded location`,s.path),r}}async delete(n){await this.cleanUpPromise,await this.fileService.del(n)}async rename(n,o,t){try{await b.Promises.rename(n.fsPath,o.fsPath)}catch(s){if(T.isWindows&&s&&s.code==="EPERM"&&Date.now()<t)return this.logService.info(`Failed renaming ${n} to ${o} with 'EPERM' error. Trying again...`),this.rename(n,o,t);throw s}}async cleanUp(){try{if(!await this.fileService.exists(this.extensionsDownloadDir)){this.logService.trace("Extension VSIX downloads cache dir does not exist");return}const n=await this.fileService.resolve(this.extensionsDownloadDir,{resolveMetadata:!0});if(n.children){const o=[],t=[],s=[];for(const a of n.children)if(a.name.endsWith(St.SignatureArchiveExtension))s.push(a.resource);else{const v=g.ExtensionKey.parse(a.name);v&&t.push([v,a])}const r=(0,g.groupByExtension)(t,([a])=>a),c=[];for(const a of r)a.sort((v,E)=>P.rcompare(v[0].version,E[0].version)),o.push(...a.slice(1).map(v=>v[1].resource)),c.push(a[0][1]);c.sort((a,v)=>a.mtime-v.mtime),o.push(...c.slice(0,Math.max(0,c.length-this.cache)).map(a=>a.resource)),o.push(...s),await D.Promises.settled(o.map(a=>(this.logService.trace("Deleting from cache",a.path),this.fileService.del(a))))}}catch(n){this.logService.error(n)}}getName(n){return this.cache?g.ExtensionKey.create(n).toString().toLowerCase():(0,C.generateUuid)()}};h.SignatureArchiveExtension=".sigzip",h=ve([H(1,S.INativeEnvironmentService),H(2,l.IFileService),H(3,f.IExtensionGalleryService),H(4,p.IConfigurationService),H(5,u.IProductService),H(6,y.IExtensionSignatureVerificationService),H(7,m.ILogService)],h),e.ExtensionsDownloader=h}),define(se[219],oe([0,1,2,12,28,42]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsManifestCache=void 0;class T extends D.Disposable{constructor(P,w){super(),this.environmentService=P,this.extensionsManifestCache=(0,i.join)(this.environmentService.userDataPath,L.MANIFEST_CACHE_FOLDER,L.USER_MANIFEST_CACHE_FILE),this._register(w.onDidInstallExtensions(C=>this.onDidInstallExtensions(C))),this._register(w.onDidUninstallExtension(C=>this.onDidUnInstallExtension(C)))}onDidInstallExtensions(P){P.some(w=>!!w.local)&&this.invalidate()}onDidUnInstallExtension(P){P.error||this.invalidate()}invalidate(){k.Promises.rm(this.extensionsManifestCache,k.RimRafMode.MOVE).then(()=>{},()=>{})}}e.ExtensionsManifestCache=T}),define(se[220],oe([0,1,3,2,37,33,42]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsWatcher=void 0;class I extends i.Disposable{constructor(w,C,b,p,S,f,g){super(),this.extensionManagementService=w,this.extensionsScannerService=C,this.userDataProfilesService=b,this.extensionsProfileScannerService=p,this.uriIdentityService=S,this.fileService=f,this.logService=g,this._onDidChangeExtensionsByAnotherSource=this._register(new D.Emitter),this.onDidChangeExtensionsByAnotherSource=this._onDidChangeExtensionsByAnotherSource.event,this.allExtensions=new Map,this.extensionsProfileWatchDisposables=this._register(new i.DisposableMap),this.initialize().then(null,y=>g.error(y))}async initialize(){await this.extensionsScannerService.initializeDefaultProfileExtensions(),await this.onDidChangeProfiles(this.userDataProfilesService.profiles,[]),this.registerListeners(),await this.uninstallExtensionsNotInProfiles()}registerListeners(){this._register(this.userDataProfilesService.onDidChangeProfiles(w=>this.onDidChangeProfiles(w.added,w.removed))),this._register(this.extensionsProfileScannerService.onAddExtensions(w=>this.onAddExtensions(w))),this._register(this.extensionsProfileScannerService.onDidAddExtensions(w=>this.onDidAddExtensions(w))),this._register(this.extensionsProfileScannerService.onRemoveExtensions(w=>this.onRemoveExtensions(w))),this._register(this.extensionsProfileScannerService.onDidRemoveExtensions(w=>this.onDidRemoveExtensions(w))),this._register(this.fileService.onDidFilesChange(w=>this.onDidFilesChange(w)))}async onDidChangeProfiles(w,C){try{await Promise.all(C.map(b=>(this.extensionsProfileWatchDisposables.deleteAndDispose(b.id),this.removeExtensionsFromProfile(b.extensionsResource)))),w.length&&await Promise.all(w.map(b=>(this.extensionsProfileWatchDisposables.set(b.id,(0,i.combinedDisposable)(this.fileService.watch(this.uriIdentityService.extUri.dirname(b.extensionsResource)),this.fileService.watch(b.extensionsResource))),this.populateExtensionsFromProfile(b.extensionsResource))))}catch(b){throw this.logService.error(b),b}}async onAddExtensions(w){for(const C of w.extensions)this.addExtensionWithKey(this.getKey(C.identifier,C.version),w.profileLocation)}async onDidAddExtensions(w){for(const C of w.extensions){const b=this.getKey(C.identifier,C.version);w.error?this.removeExtensionWithKey(b,w.profileLocation):this.addExtensionWithKey(b,w.profileLocation)}}async onRemoveExtensions(w){for(const C of w.extensions)this.removeExtensionWithKey(this.getKey(C.identifier,C.version),w.profileLocation)}async onDidRemoveExtensions(w){let C=!1;for(const b of w.extensions){const p=this.getKey(b.identifier,b.version);w.error?this.addExtensionWithKey(p,w.profileLocation):(this.removeExtensionWithKey(p,w.profileLocation),C=C||!this.allExtensions.has(p))}C&&await this.uninstallExtensionsNotInProfiles()}onDidFilesChange(w){for(const C of this.userDataProfilesService.profiles)w.contains(C.extensionsResource,0,1)&&this.onDidExtensionsProfileChange(C.extensionsResource)}async onDidExtensionsProfileChange(w){const C=[],b=[],p=await this.extensionsProfileScannerService.scanProfileExtensions(w),S=new Set,f=new Set;for(const[g,y]of this.allExtensions)y.has(w)&&f.add(g);for(const g of p){const y=this.getKey(g.identifier,g.version);S.add(y),f.has(y)||(C.push(g.identifier),this.addExtensionWithKey(y,w))}for(const g of f)if(!S.has(g)){const y=this.fromKey(g);y&&(b.push(y.identifier),this.removeExtensionWithKey(g,w))}(C.length||b.length)&&this._onDidChangeExtensionsByAnotherSource.fire({added:C.length?{extensions:C,profileLocation:w}:void 0,removed:b.length?{extensions:b,profileLocation:w}:void 0})}async populateExtensionsFromProfile(w){const C=await this.extensionsProfileScannerService.scanProfileExtensions(w);for(const b of C)this.addExtensionWithKey(this.getKey(b.identifier,b.version),w)}async removeExtensionsFromProfile(w){for(const C of[...this.allExtensions.keys()])this.removeExtensionWithKey(C,w);await this.uninstallExtensionsNotInProfiles()}async uninstallExtensionsNotInProfiles(){const C=(await this.extensionManagementService.getAllUserInstalled()).filter(b=>b.installedTimestamp&&!this.allExtensions.has(this.getKey(b.identifier,b.manifest.version)));C.length&&await this.extensionManagementService.markAsUninstalled(...C)}addExtensionWithKey(w,C){let b=this.allExtensions.get(w);b||this.allExtensions.set(w,b=new k.ResourceSet(p=>this.uriIdentityService.extUri.getComparisonKey(p))),b.add(C)}removeExtensionWithKey(w,C){const b=this.allExtensions.get(w);b&&b.delete(C),b?.size||this.allExtensions.delete(w)}getKey(w,C){return`${T.ExtensionIdentifier.toKey(w.id)}@${C}`}fromKey(w){const[C,b]=(0,L.getIdAndVersion)(w);return b?{identifier:{id:C},version:b}:void 0}}e.ExtensionsWatcher=I}),define(se[221],oe([0,1,100,20,6,2,21,12,28,15,29,33,8,73,5,7]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeLanguagePackService=void 0;let y=class extends S.LanguagePackBaseService{constructor(h,d,n,o){super(n),this.extensionManagementService=h,this.logService=o,this.cache=this._register(new l(d,o)),this.extensionManagementService.registerParticipant({postInstall:async t=>this.postInstallExtension(t),postUninstall:async t=>this.postUninstallExtension(t)})}async getBuiltInExtensionTranslationsUri(h){const n=(await this.cache.getLanguagePacks())[f.Language.value()];if(!n){this.logService.warn(`No language pack found for ${f.Language.value()}`);return}const o=n.translations[h];return o?g.URI.file(o):void 0}async getInstalledLanguages(){const h=await this.cache.getLanguagePacks(),d=Object.keys(h).map(n=>{const o=h[n];return{...this.createQuickPickItem(n,o.label),extensionId:o.extensions[0].extensionIdentifier.id}});return d.push({...this.createQuickPickItem("en","English"),extensionId:"default"}),d.sort((n,o)=>n.label.localeCompare(o.label)),d}async postInstallExtension(h){h&&h.manifest&&h.manifest.contributes&&h.manifest.contributes.localizations&&h.manifest.contributes.localizations.length&&(this.logService.info("Adding language packs from the extension",h.identifier.id),await this.update())}async postUninstallExtension(h){const d=await this.cache.getLanguagePacks();Object.keys(d).some(n=>d[n]&&d[n].extensions.some(o=>(0,b.areSameExtensions)(o.extensionIdentifier,h.identifier)))&&(this.logService.info("Removing language packs from the extension",h.identifier.id),await this.update())}async update(){const[h,d]=await Promise.all([this.cache.getLanguagePacks(),this.extensionManagementService.getInstalled()]),n=await this.cache.update(d);return!(0,i.equals)(Object.keys(h),Object.keys(n))}};y=ve([H(0,C.IExtensionManagementService),H(1,w.INativeEnvironmentService),H(2,C.IExtensionGalleryService),H(3,p.ILogService)],y),e.NativeLanguagePackService=y;let l=class extends L.Disposable{constructor(h,d){super(),this.logService=d,this.languagePacks={},this.languagePacksFilePath=(0,I.join)(h.userDataPath,"languagepacks.json"),this.languagePacksFileLimiter=new k.Queue}getLanguagePacks(){return this.languagePacksFileLimiter.size||!this.initializedCache?this.withLanguagePacks().then(()=>this.languagePacks):Promise.resolve(this.languagePacks)}update(h){return this.withLanguagePacks(d=>{Object.keys(d).forEach(n=>delete d[n]),this.createLanguagePacksFromExtensions(d,...h)}).then(()=>this.languagePacks)}createLanguagePacksFromExtensions(h,...d){for(const n of d)n&&n.manifest&&n.manifest.contributes&&n.manifest.contributes.localizations&&n.manifest.contributes.localizations.length&&this.createLanguagePacksFromExtension(h,n);Object.keys(h).forEach(n=>this.updateHash(h[n]))}createLanguagePacksFromExtension(h,d){const n=d.identifier,o=d.manifest.contributes&&d.manifest.contributes.localizations?d.manifest.contributes.localizations:[];for(const t of o)if(d.location.scheme===T.Schemas.file&&m(t)){let s=h[t.languageId];s||(s={hash:"",extensions:[],translations:{},label:t.localizedLanguageName??t.languageName},h[t.languageId]=s);const r=s.extensions.filter(c=>(0,b.areSameExtensions)(c.extensionIdentifier,n))[0];r?r.version=d.manifest.version:s.extensions.push({extensionIdentifier:n,version:d.manifest.version});for(const c of t.translations)s.translations[c.id]=(0,I.join)(d.location.fsPath,c.path)}}updateHash(h){if(h){const d=(0,D.createHash)("md5");for(const n of h.extensions)d.update(n.extensionIdentifier.uuid||n.extensionIdentifier.id).update(n.version);h.hash=d.digest("hex")}}withLanguagePacks(h=()=>null){return this.languagePacksFileLimiter.queue(()=>{let d=null;return P.Promises.readFile(this.languagePacksFilePath,"utf8").then(void 0,n=>n.code==="ENOENT"?Promise.resolve("{}"):Promise.reject(n)).then(n=>{try{return JSON.parse(n)}catch{return{}}}).then(n=>(d=h(n),n)).then(n=>{for(const t of Object.keys(n))n[t]||delete n[t];this.languagePacks=n,this.initializedCache=!0;const o=JSON.stringify(this.languagePacks);return this.logService.debug("Writing language packs",o),P.Promises.writeFile(this.languagePacksFilePath,o)}).then(()=>d,n=>this.logService.error(n))})}};l=ve([H(0,w.INativeEnvironmentService),H(1,p.ILogService)],l);function m(u){if(typeof u.languageId!="string"||!Array.isArray(u.translations)||u.translations.length===0)return!1;for(const h of u.translations)if(typeof h.id!="string"||typeof h.path!="string")return!1;return!(u.languageName&&typeof u.languageName!="string"||u.localizedLanguageName&&typeof u.localizedLanguageName!="string")}}),define(se[222],oe([0,1,6,17,24,9,3,2,31,92,216,75]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionHostPersistentConnection=e.ManagementPersistentConnection=e.PersistentConnection=e.ReconnectionPermanentFailureEvent=e.ConnectionGainEvent=e.ReconnectionRunningEvent=e.ReconnectionWaitEvent=e.ConnectionLostEvent=e.PersistentConnectionEventType=e.connectRemoteAgentTunnel=e.connectRemoteAgentExtensionHost=e.connectRemoteAgentManagement=e.ConnectionType=void 0;const p=30*1e3;var S;(function(K){K[K.Management=1]="Management",K[K.ExtensionHost=2]="ExtensionHost",K[K.Tunnel=3]="Tunnel"})(S=e.ConnectionType||(e.ConnectionType={}));function f(K){switch(K){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function g(K){const X=new k.CancellationTokenSource;return setTimeout(()=>X.cancel(),K),X.token}function y(K,X){if(K.isCancellationRequested||X.isCancellationRequested)return k.CancellationToken.Cancelled;const _=new k.CancellationTokenSource;return K.onCancellationRequested(()=>_.cancel()),X.onCancellationRequested(()=>_.cancel()),_.token}class l{get didTimeout(){return this._state==="timedout"}constructor(X){this._state="pending",this._disposables=new I.DisposableStore,this.promise=new Promise((_,U)=>{this._resolvePromise=_,this._rejectPromise=U}),X.isCancellationRequested?this._timeout():this._disposables.add(X.onCancellationRequested(()=>this._timeout()))}registerDisposable(X){this._state==="pending"?this._disposables.add(X):X.dispose()}_timeout(){this._state==="pending"&&(this._disposables.dispose(),this._state="timedout",this._rejectPromise(this._createTimeoutError()))}_createTimeoutError(){const X=new Error("Time limit reached");return X.code="ETIMEDOUT",X.syscall="connect",X}resolve(X){this._state==="pending"&&(this._disposables.dispose(),this._state="resolved",this._resolvePromise(X))}reject(X){this._state==="pending"&&(this._disposables.dispose(),this._state="rejected",this._rejectPromise(X))}}function m(K,X){const _=new l(X);return _.registerDisposable(K.onControlMessage(U=>{const x=JSON.parse(U.toString()),j=W(x);j?_.reject(j):_.resolve(x)})),_.promise}function u(K,X,_,U,x,j,J,re){const Y=new l(re);return X.connect(_,U,x,j,J,(ie,ne)=>{Y.didTimeout?(ie&&K.error(ie),ne?.dispose()):ie||!ne?Y.reject(ie):Y.resolve(ne)}),Y.promise}function h(K,X){const _=new l(X);return K.then(U=>{_.didTimeout||_.resolve(U)},U=>{_.didTimeout||_.reject(U)}),_.promise}async function d(K,X,_,U){const x=ee(K,X);K.logService.trace(`${x} 1/6. invoking socketFactory.connect().`);let j;try{j=await u(K.logService,K.socketFactory,K.host,K.port,(0,b.getRemoteServerRootPath)(K),`reconnectionToken=${K.reconnectionToken}&reconnection=${K.reconnectionProtocol?"true":"false"}`,`renderer-${f(X)}-${K.reconnectionToken}`,U)}catch(ne){throw K.logService.error(`${x} socketFactory.connect() failed or timed out. Error:`),K.logService.error(ne),ne}K.logService.trace(`${x} 2/6. socketFactory.connect() was successful.`);let J,re;K.reconnectionProtocol?(K.reconnectionProtocol.beginAcceptReconnection(j,null),J=K.reconnectionProtocol,re=!1):(J=new w.PersistentProtocol(j,null),re=!0),K.logService.trace(`${x} 3/6. sending AuthRequest control message.`);const Y=await h(K.signService.createNewMessage((0,P.generateUuid)()),U),ie={type:"auth",auth:K.connectionToken||"00000000000000000000",data:Y.data};J.sendControl(i.VSBuffer.fromString(JSON.stringify(ie)));try{const ne=await m(J,y(U,g(1e4)));if(ne.type!=="sign"||typeof ne.data!="string"){const we=new Error("Unexpected handshake message");throw we.code="VSCODE_CONNECTION_ERROR",we}if(K.logService.trace(`${x} 4/6. received SignRequest control message.`),!await h(K.signService.validate(Y,ne.signedData),U)){const we=new Error("Refused to connect to unsupported server");throw we.code="VSCODE_CONNECTION_ERROR",we}const ue=await h(K.signService.sign(ne.data),U),Se={type:"connectionType",commit:K.commit,signedData:ue,desiredConnectionType:X};return _&&(Se.args=_),K.logService.trace(`${x} 5/6. sending ConnectionTypeRequest control message.`),J.sendControl(i.VSBuffer.fromString(JSON.stringify(Se))),{protocol:J,ownsProtocol:re}}catch(ne){throw ne&&ne.code==="ETIMEDOUT"&&(K.logService.error(`${x} the handshake timed out. Error:`),K.logService.error(ne)),ne&&ne.code==="VSCODE_CONNECTION_ERROR"&&(K.logService.error(`${x} received error control message when negotiating connection. Error:`),K.logService.error(ne)),re&&Q(J),ne}}async function n(K,X,_,U){const x=Date.now(),j=ee(K,X),{protocol:J,ownsProtocol:re}=await d(K,X,_,U),Y=new l(U);return Y.registerDisposable(J.onControlMessage(ie=>{const ne=JSON.parse(ie.toString()),le=W(ne);le?(K.logService.error(`${j} received error control message when negotiating connection. Error:`),K.logService.error(le),re&&Q(J),Y.reject(le)):(K.reconnectionProtocol?.endAcceptReconnection(),K.logService.trace(`${j} 6/6. handshake finished, connection is up and running after ${ae(x)}!`),Y.resolve({protocol:J,firstMessage:ne}))})),Y.promise}async function o(K,X){const{protocol:_}=await n(K,1,void 0,X);return{protocol:_}}async function t(K,X,_){const{protocol:U,firstMessage:x}=await n(K,2,X,_),j=x&&x.debugPort;return{protocol:U,debugPort:j}}async function s(K,X,_){const U=Date.now(),x=ee(K,3),{protocol:j}=await d(K,3,X,_);return K.logService.trace(`${x} 6/6. handshake finished, connection is up and running after ${ae(U)}!`),j}async function r(K,X,_){const{host:U,port:x,connectionToken:j}=await K.addressProvider.getAddress();return{commit:K.commit,quality:K.quality,host:U,port:x,connectionToken:j,reconnectionToken:X,reconnectionProtocol:_,socketFactory:K.socketFactory,signService:K.signService,logService:K.logService}}async function c(K,X,_){return v(K,async U=>{const{protocol:x}=await o(U,k.CancellationToken.None);return new V(K,X,_,U.reconnectionToken,x)})}e.connectRemoteAgentManagement=c;async function a(K,X){return v(K,async _=>{const{protocol:U,debugPort:x}=await t(_,X,k.CancellationToken.None);return new B(K,X,_.reconnectionToken,U,x)})}e.connectRemoteAgentExtensionHost=a;async function v(K,X){for(let U=1;;U++)try{const x=(0,P.generateUuid)(),j=await r(K,x,null);return await X(j)}catch(x){if(U<5)K.logService.error(`[remote-connection][attempt ${U}] An error occurred in initial connection! Will retry... Error:`),K.logService.error(x);else throw K.logService.error(`[remote-connection][attempt ${U}]  An error occurred in initial connection! It will be treated as a permanent error. Error:`),K.logService.error(x),$.triggerPermanentFailure(0,0,C.RemoteAuthorityResolverError.isHandled(x)),x}}async function E(K,X,_){const U=await r(K,(0,P.generateUuid)(),null);return await s(U,{host:X,port:_},k.CancellationToken.None)}e.connectRemoteAgentTunnel=E;function R(K){return(0,D.createCancelablePromise)(X=>new Promise((_,U)=>{const x=setTimeout(_,K*1e3);X.onCancellationRequested(()=>{clearTimeout(x),_()})}))}var N;(function(K){K[K.ConnectionLost=0]="ConnectionLost",K[K.ReconnectionWait=1]="ReconnectionWait",K[K.ReconnectionRunning=2]="ReconnectionRunning",K[K.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",K[K.ConnectionGain=4]="ConnectionGain"})(N=e.PersistentConnectionEventType||(e.PersistentConnectionEventType={}));class O{constructor(X,_){this.reconnectionToken=X,this.millisSinceLastIncomingData=_,this.type=0}}e.ConnectionLostEvent=O;class z{constructor(X,_,U,x){this.reconnectionToken=X,this.millisSinceLastIncomingData=_,this.durationSeconds=U,this.cancellableTimer=x,this.type=1}skipWait(){this.cancellableTimer.cancel()}}e.ReconnectionWaitEvent=z;class F{constructor(X,_,U){this.reconnectionToken=X,this.millisSinceLastIncomingData=_,this.attempt=U,this.type=2}}e.ReconnectionRunningEvent=F;class A{constructor(X,_,U){this.reconnectionToken=X,this.millisSinceLastIncomingData=_,this.attempt=U,this.type=4}}e.ConnectionGainEvent=A;class M{constructor(X,_,U,x){this.reconnectionToken=X,this.millisSinceLastIncomingData=_,this.attempt=U,this.handled=x,this.type=3}}e.ReconnectionPermanentFailureEvent=M;class $ extends I.Disposable{static triggerPermanentFailure(X,_,U){this._permanentFailure=!0,this._permanentFailureMillisSinceLastIncomingData=X,this._permanentFailureAttempt=_,this._permanentFailureHandled=U,this._instances.forEach(x=>x._gotoPermanentFailure(this._permanentFailureMillisSinceLastIncomingData,this._permanentFailureAttempt,this._permanentFailureHandled))}static debugTriggerReconnection(){this._instances.forEach(X=>X._beginReconnecting())}static debugPauseSocketWriting(){this._instances.forEach(X=>X._pauseSocketWriting())}get _isPermanentFailure(){return this._permanentFailure||$._permanentFailure}constructor(X,_,U,x,j){super(),this._connectionType=X,this._options=_,this.reconnectionToken=U,this.protocol=x,this._reconnectionFailureIsFatal=j,this._onDidStateChange=this._register(new T.Emitter),this.onDidStateChange=this._onDidStateChange.event,this._permanentFailure=!1,this._isReconnecting=!1,this._onDidStateChange.fire(new A(this.reconnectionToken,0,0)),this._register(x.onSocketClose(J=>{const re=G(this._connectionType,this.reconnectionToken,!0);J?J.type===0?(this._options.logService.info(`${re} received socket close event (hadError: ${J.hadError}).`),J.error&&this._options.logService.error(J.error)):(this._options.logService.info(`${re} received socket close event (wasClean: ${J.wasClean}, code: ${J.code}, reason: ${J.reason}).`),J.event&&this._options.logService.error(J.event)):this._options.logService.info(`${re} received socket close event.`),this._beginReconnecting()})),this._register(x.onSocketTimeout(J=>{const re=G(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${re} received socket timeout event (unacknowledgedMsgCount: ${J.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${J.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${J.timeSinceLastReceivedSomeData}).`),this._beginReconnecting()})),$._instances.push(this),this._register((0,I.toDisposable)(()=>{const J=$._instances.indexOf(this);J>=0&&$._instances.splice(J,1)})),this._isPermanentFailure&&this._gotoPermanentFailure($._permanentFailureMillisSinceLastIncomingData,$._permanentFailureAttempt,$._permanentFailureHandled)}async _beginReconnecting(){if(!this._isReconnecting)try{this._isReconnecting=!0,await this._runReconnectingLoop()}finally{this._isReconnecting=!1}}async _runReconnectingLoop(){if(this._isPermanentFailure)return;const X=G(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${X} starting reconnecting loop. You can get more information with the trace log level.`),this._onDidStateChange.fire(new O(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const _=[0,5,5,10,10,10,10,10,30];let U=-1;do{U++;const x=U<_.length?_[U]:_[_.length-1];try{if(x>0){const J=R(x);this._onDidStateChange.fire(new z(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),x,J)),this._options.logService.info(`${X} waiting for ${x} seconds before reconnecting...`);try{await J}catch{}}if(this._isPermanentFailure){this._options.logService.error(`${X} permanent failure occurred while running the reconnecting loop.`);break}this._onDidStateChange.fire(new F(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),U+1)),this._options.logService.info(`${X} resolving connection...`);const j=await r(this._options,this.reconnectionToken,this.protocol);this._options.logService.info(`${X} connecting to ${j.host}:${j.port}...`),await this._reconnect(j,g(p)),this._options.logService.info(`${X} reconnected!`),this._onDidStateChange.fire(new A(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),U+1));break}catch(j){if(j.code==="VSCODE_CONNECTION_ERROR"){this._options.logService.error(`${X} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this._options.logService.error(j),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),U+1,!1);break}if(U>360){this._options.logService.error(`${X} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this._options.logService.error(j),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),U+1,!1);break}if(C.RemoteAuthorityResolverError.isTemporarilyNotAvailable(j)){this._options.logService.info(`${X} A temporarily not available error occurred while trying to reconnect, will try again...`),this._options.logService.trace(j);continue}if((j.code==="ETIMEDOUT"||j.code==="ENETUNREACH"||j.code==="ECONNREFUSED"||j.code==="ECONNRESET")&&j.syscall==="connect"){this._options.logService.info(`${X} A network error occurred while trying to reconnect, will try again...`),this._options.logService.trace(j);continue}if((0,L.isCancellationError)(j)){this._options.logService.info(`${X} A promise cancelation error occurred while trying to reconnect, will try again...`),this._options.logService.trace(j);continue}if(j instanceof C.RemoteAuthorityResolverError){this._options.logService.error(`${X} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this._options.logService.error(j),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),U+1,C.RemoteAuthorityResolverError.isHandled(j));break}this._options.logService.error(`${X} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this._options.logService.error(j),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),U+1,!1);break}}while(!this._isPermanentFailure)}_onReconnectionPermanentFailure(X,_,U){this._reconnectionFailureIsFatal?$.triggerPermanentFailure(X,_,U):this._gotoPermanentFailure(X,_,U)}_gotoPermanentFailure(X,_,U){this._onDidStateChange.fire(new M(this.reconnectionToken,X,_,U)),Q(this.protocol)}_pauseSocketWriting(){this.protocol.pauseSocketWriting()}}e.PersistentConnection=$,$._permanentFailure=!1,$._permanentFailureMillisSinceLastIncomingData=0,$._permanentFailureAttempt=0,$._permanentFailureHandled=!1,$._instances=[];class V extends ${constructor(X,_,U,x,j){super(1,X,x,j,!0),this.client=this._register(new w.Client(j,{remoteAuthority:_,clientId:U},X.ipcLogger))}async _reconnect(X,_){await o(X,_)}}e.ManagementPersistentConnection=V;class B extends ${constructor(X,_,U,x,j){super(2,X,U,x,!1),this._startArguments=_,this.debugPort=j}async _reconnect(X,_){await t(X,this._startArguments,_)}}e.ExtensionHostPersistentConnection=B;function Q(K){try{K.acceptDisconnect();const X=K.getSocket();K.dispose(),X.dispose()}catch(X){(0,L.onUnexpectedError)(X)}}function W(K){if(K&&K.type==="error"){const X=new Error(`Connection error: ${K.reason}`);return X.code="VSCODE_CONNECTION_ERROR",X}return null}function q(K,X){for(;K.length<X;)K+=" ";return K}function G(K,X,_){return`[remote-connection][${q(f(K),13)}][${X.substr(0,5)}\u2026][${_?"reconnect":"initial"}]`}function ee(K,X){return`${G(X,K.reconnectionToken,!!K.reconnectionProtocol)}[${K.host}:${K.port}]`}function ae(K){return`${Date.now()-K} ms`}}),define(se[223],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipcSharedProcessTunnelChannelName=e.ISharedProcessTunnelService=void 0,e.ISharedProcessTunnelService=(0,D.createDecorator)("sharedProcessTunnelService"),e.ipcSharedProcessTunnelChannelName="sharedProcessTunnel"}),define(se[224],oe([0,1,86,150]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nodeSocketFactory=void 0,e.nodeSocketFactory=new class{connect(k,L,T,I,P,w){const C=p=>w(p,void 0),b=D.createConnection({host:k,port:L},()=>{b.removeListener("error",C);const p=Buffer.alloc(16);for(let y=0;y<16;y++)p[y]=Math.round(Math.random()*256);const S=p.toString("base64"),f=[`GET ws://${/:/.test(k)?`[${k}]`:k}:${L}${T}?${I}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${S}`];b.write(f.join(`\r
`)+`\r
\r
`);const g=y=>{y.toString().indexOf(`\r
\r
`)>=0&&(b.off("data",g),w(void 0,new i.NodeSocket(b,P)))};b.on("data",g)});b.setNoDelay(!0),b.once("error",C)}}}),define(se[106],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LOG_CHANNEL_ID=e.LOGGER_NAME=e.LOG_FILE_NAME=e.CONFIGURATION_KEY_HOST_NAME=e.CONFIGURATION_KEY_PREFIX=e.TunnelStates=e.IRemoteTunnelService=void 0,e.IRemoteTunnelService=(0,D.createDecorator)("IRemoteTunnelService");var i;(function(k){k.disconnected={type:"disconnected"},k.uninitialized={type:"uninitialized"},k.connected=L=>({type:"connected",info:L}),k.connecting=L=>({type:"connecting",progress:L})})(i=e.TunnelStates||(e.TunnelStates={})),e.CONFIGURATION_KEY_PREFIX="remote.tunnels.access",e.CONFIGURATION_KEY_HOST_NAME=e.CONFIGURATION_KEY_PREFIX+".hostNameOverride",e.LOG_FILE_NAME="remoteTunnelService.log",e.LOGGER_NAME="remoteTunnelService",e.LOG_CHANNEL_ID="remoteTunnelServiceLog"}),define(se[225],oe([0,1,133,16,8]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestService=void 0;let L=class{constructor(I,P){this.configurationService=I,this.logService=P}async request(I,P){this.logService.trace("RequestService#request (browser) - begin",I.url),I.proxyAuthorization||(I.proxyAuthorization=this.configurationService.getValue("http.proxyAuthorization"));try{const w=await(0,D.request)(I,P);return this.logService.trace("RequestService#request (browser) - success",I.url),w}catch(w){throw this.logService.error("RequestService#request (browser) - error",I.url,w),w}}async resolveProxy(I){}};L=ve([H(0,i.IConfigurationService),H(1,k.ILogService)],L),e.RequestService=L}),define(se[59],oe([0,1,17,169,46,4,40]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateProxyConfigurationsScope=e.asJson=e.asTextOrError=e.asText=e.isSuccess=e.IRequestService=void 0,e.IRequestService=(0,L.createDecorator)("requestService");function I(g){return g.res.statusCode&&g.res.statusCode>=200&&g.res.statusCode<300||g.res.statusCode===1223}e.isSuccess=I;function P(g){return g.res.statusCode===204}async function w(g){return P(g)?null:(await(0,D.streamToBuffer)(g.stream)).toString()}e.asText=w;async function C(g){if(!I(g))throw new Error("Server returned "+g.res.statusCode);return w(g)}e.asTextOrError=C;async function b(g){if(!I(g))throw new Error("Server returned "+g.res.statusCode);if(P(g))return null;const l=(await(0,D.streamToBuffer)(g.stream)).toString();try{return JSON.parse(l)}catch(m){throw m.message+=`:
`+l,m}}e.asJson=b;function p(g){f(g)}e.updateProxyConfigurationsScope=p;let S;function f(g){const y=T.Registry.as(k.Extensions.Configuration),l=S;S={id:"http",order:15,title:(0,i.localize)(0,null),type:"object",scope:g,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks5?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:(0,i.localize)(1,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:(0,i.localize)(2,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:(0,i.localize)(3,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[(0,i.localize)(4,null),(0,i.localize)(5,null),(0,i.localize)(6,null),(0,i.localize)(7,null)],default:"override",description:(0,i.localize)(8,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:(0,i.localize)(9,null),restricted:!0}}},y.updateConfigurations({add:[S],remove:l?[l]:[]})}f(2)}),define(se[226],oe([0,1,24,21,13,59]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadService=void 0;let T=class{constructor(P,w){this.requestService=P,this.fileService=w}async download(P,w,C=D.CancellationToken.None){if(P.scheme===i.Schemas.file||P.scheme===i.Schemas.vscodeRemote){await this.fileService.copy(P,w);return}const b={type:"GET",url:P.toString(!0)},p=await this.requestService.request(b,C);if(p.res.statusCode===200)await this.fileService.writeFile(w,p.stream);else{const S=await(0,L.asTextOrError)(p);throw new Error(`Expected 200, got back ${p.res.statusCode} instead.

${S}`)}}};T=ve([H(0,L.IRequestService),H(1,k.IFileService)],T),e.DownloadService=T}),define(se[227],oe([0,1,17,24]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestChannelClient=e.RequestChannel=void 0;class k{constructor(I){this.service=I}listen(I,P){throw new Error("Invalid listen")}call(I,P,w,C=i.CancellationToken.None){switch(P){case"request":return this.service.request(w[0],C).then(async({res:b,stream:p})=>{const S=await(0,D.streamToBuffer)(p);return[{statusCode:b.statusCode,headers:b.headers},S]});case"resolveProxy":return this.service.resolveProxy(w[0])}throw new Error("Invalid call")}}e.RequestChannel=k;class L{constructor(I){this.channel=I}async request(I,P){const[w,C]=await this.channel.call("request",[I],P);return{res:w,stream:(0,D.bufferToStream)(C)}}async resolveProxy(I){return this.channel.call("resolveProxy",[I])}}e.RequestChannelClient=L}),define(se[228],oe([0,1,14,225,227]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessRequestService=void 0;class L{constructor(I,P,w,C){this.configurationService=P,this.productService=w,this.logService=C,this.browserRequestService=new i.RequestService(P,C),this.mainRequestService=new k.RequestChannelClient(I.getChannel("request"))}request(I,P){return this.getRequestService().request(I,P)}async resolveProxy(I){return this.getRequestService().resolveProxy(I)}getRequestService(){return this.isMainRequestServiceEnabled()?(this.logService.trace("Using main request service"),this.mainRequestService):(this.logService.trace("Using browser request service"),this.browserRequestService)}isMainRequestServiceEnabled(){const I=this.configurationService.getValue("developer.sharedProcess.redirectRequestsToMain");return(0,D.isBoolean)(I)?I:this.productService.quality!=="stable"}}e.SharedProcessRequestService=L}),define(se[107],oe([0,1,66,4]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipcSharedProcessWorkerChannelName=e.ISharedProcessWorkerService=e.hash=void 0;function k(L){return(0,D.hash)({moduleId:L.process.moduleId,windowId:L.reply.windowId})}e.hash=k,e.ISharedProcessWorkerService=(0,i.createDecorator)("sharedProcessWorkerService"),e.ipcSharedProcessWorkerChannelName="sharedProcessWorker"}),define(se[229],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessWorkerMessages=void 0;var D;(function(i){i.Spawn="vscode:shared-process->shared-process-worker=spawn",i.Terminate="vscode:shared-process->shared-process-worker=terminate",i.SelfTerminated="vscode:shared-process-worker->shared-process=selfTerminated",i.Ready="vscode:shared-process-worker->shared-process=ready",i.Ack="vscode:shared-process-worker->shared-process=ack",i.Trace="vscode:shared-process-worker->shared-process=trace",i.Info="vscode:shared-process-worker->shared-process=info",i.Warn="vscode:shared-process-worker->shared-process=warn",i.Error="vscode:shared-process-worker->shared-process=error"})(D=e.SharedProcessWorkerMessages||(e.SharedProcessWorkerMessages={}))}),define(se[230],oe([0,1,93,6,24,3,2,21,31,8,107,229]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessWorkerService=void 0;let p=class{constructor(g){this.logService=g,this.workers=new Map,this.processeDisposables=new Map,this.processResolvers=new Map}async createWorker(g){const y=`window: ${g.reply.windowId}, moduleId: ${g.process.moduleId}`;this.logService.trace(`SharedProcess: createWorker (${y})`);const l=(0,C.hash)(g);this.processeDisposables.has(l)&&(this.logService.warn(`SharedProcess: createWorker found an existing worker that will be terminated (${y})`),this.doDisposeWorker(g));const m=new k.CancellationTokenSource;let u,h,d;this.processeDisposables.set(l,s=>{m.dispose(!0),u?.terminate(g,k.CancellationToken.None),h?.close(),d?.close(),this.processeDisposables.delete(l);const r=this.processResolvers.get(l);r&&(this.processResolvers.delete(l),r({reason:s}))}),u=await this.getOrCreateWebWorker(g);const n=new Promise(s=>{this.processResolvers.set(l,s)});if(m.token.isCancellationRequested)return n;const{port1:o,port2:t}=new MessageChannel;return h=o,d=t,await u.spawn(g,d,m.token),m.token.isCancellationRequested||(this.logService.trace(`SharedProcess: createWorker sending message port back to window (${y})`),D.ipcRenderer.postMessage("vscode:relaySharedProcessWorkerMessageChannel",g,[h])),n}getOrCreateWebWorker(g){let y=this.workers.get(g.process.moduleId);if(!y){this.logService.trace(`SharedProcess: creating new web worker (${g.process.moduleId})`);const l=new S(g.process.type,this.logService);y=l.init(),l.onDidProcessSelfTerminate(({configuration:m,reason:u})=>{this.doDisposeWorker(m,u)}),this.workers.set(g.process.moduleId,y)}return y}async disposeWorker(g){return this.doDisposeWorker(g)}doDisposeWorker(g,y){const l=this.processeDisposables.get((0,C.hash)(g));l&&(this.logService.trace(`SharedProcess: disposeWorker (window: ${g.reply.windowId}, moduleId: ${g.process.moduleId})`),l(y))}};p=ve([H(0,w.ILogService)],p),e.SharedProcessWorkerService=p;class S extends T.Disposable{constructor(g,y){super(),this.type=g,this.logService=y,this._onDidProcessSelfTerminate=this._register(new L.Emitter),this.onDidProcessSelfTerminate=this._onDidProcessSelfTerminate.event,this.workerReady=this.doInit(),this.mapMessageNonceToPendingMessageResolve=new Map}async init(){return await this.workerReady,this}doInit(){const g=new i.DeferredPromise,y=new Worker("../../../base/worker/workerMain.js",{name:`Shared Process Worker (${this.type})`});return y.onerror=l=>{this.logService.error(`SharedProcess: worker error (${this.type})`,l.message)},y.onmessageerror=l=>{this.logService.error(`SharedProcess: worker message error (${this.type})`,l)},y.onmessage=l=>{const{id:m,message:u,configuration:h,nonce:d}=l.data;switch(m){case b.SharedProcessWorkerMessages.Ready:g.complete(y);break;case b.SharedProcessWorkerMessages.Ack:if(d){const n=this.mapMessageNonceToPendingMessageResolve.get(d);n&&(this.mapMessageNonceToPendingMessageResolve.delete(d),n())}break;case b.SharedProcessWorkerMessages.SelfTerminated:h&&u&&this._onDidProcessSelfTerminate.fire({configuration:h,reason:JSON.parse(u)});break;case b.SharedProcessWorkerMessages.Trace:this.logService.trace(`SharedProcess (worker, ${this.type}):`,u);break;case b.SharedProcessWorkerMessages.Info:u&&this.logService.info(u);break;case b.SharedProcessWorkerMessages.Warn:this.logService.warn(`SharedProcess (worker, ${this.type}):`,u);break;case b.SharedProcessWorkerMessages.Error:this.logService.error(`SharedProcess (worker, ${this.type}):`,u);break;default:this.logService.warn(`SharedProcess: unexpected worker message (${this.type})`,l)}},y.postMessage("vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain"),g.p}async send(g,y,l){const m=await this.workerReady;if(!y.isCancellationRequested)return new Promise(u=>{const h=(0,P.generateUuid)();this.mapMessageNonceToPendingMessageResolve.set(h,u);const d={...g,nonce:h};l?m.postMessage(d,[l]):m.postMessage(d),y.onCancellationRequested(()=>{this.mapMessageNonceToPendingMessageResolve.delete(h)&&u()})})}spawn(g,y,l){const m={id:b.SharedProcessWorkerMessages.Spawn,configuration:g,environment:{bootstrapPath:I.FileAccess.asFileUri("bootstrap-fork").fsPath}};return this.send(m,l,y)}terminate(g,y){const l={id:b.SharedProcessWorkerMessages.Terminate,configuration:g};return this.send(l,y)}}}),define(se[231],oe([0,1,63,21,185]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessEnvironmentService=void 0;class L extends k.NativeEnvironmentService{get userRoamingDataHome(){return this.appSettingsHome.with({scheme:i.Schemas.vscodeUserData})}}ve([D.memoize],L.prototype,"userRoamingDataHome",null),e.SharedProcessEnvironmentService=L}),define(se[232],oe([0,1,49,12,170,24,38,9,5,31,147,184,6]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getResolvedShellEnv=void 0;const S=1e4;let f;async function g(l,m,u){return m["force-disable-user-env"]?(l.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):P.isWindows?(l.trace("resolveShellEnv(): skipped (Windows)"),{}):(0,b.isLaunchedFromCli)(u)&&!m["force-user-env"]?(l.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):((0,b.isLaunchedFromCli)(u)?l.trace("resolveShellEnv(): running (--force-user-env)"):l.trace("resolveShellEnv(): running (macOS/Linux)"),f||(f=p.Promises.withAsyncBody(async(h,d)=>{const n=new L.CancellationTokenSource,o=setTimeout(()=>{n.dispose(!0),d(new Error((0,k.localize)(0,null)))},S);try{h(await y(l,n.token))}catch(t){!(0,I.isCancellationError)(t)&&!n.token.isCancellationRequested?d(new Error((0,k.localize)(1,null,(0,T.toErrorMessage)(t)))):h({})}finally{clearTimeout(o),n.dispose()}})),f)}e.getResolvedShellEnv=g;async function y(l,m){const u=process.env.ELECTRON_RUN_AS_NODE;l.trace("getUnixShellEnvironment#runAsNode",u);const h=process.env.ELECTRON_NO_ATTACH_CONSOLE;l.trace("getUnixShellEnvironment#noAttach",h);const d=(0,w.generateUuid)().replace(/-/g,"").substr(0,12),n=new RegExp(d+"(.*)"+d),o={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1"};l.trace("getUnixShellEnvironment#env",o);const t=await(0,C.getSystemShell)(P.OS,o);return l.trace("getUnixShellEnvironment#shell",t),new Promise((s,r)=>{if(m.isCancellationRequested)return r((0,I.canceled)());const c=(0,i.basename)(t);let a,v;const E=process.versions.electron&&process.versions["microsoft-build"]?"--ms-enable-electron-run-as-node":"";/^pwsh(-preview)?$/.test(c)?(a=`& '${process.execPath}' ${E} -p '''${d}'' + JSON.stringify(process.env) + ''${d}'''`,v=["-Login","-Command"]):(a=`'${process.execPath}' ${E} -p '"${d}" + JSON.stringify(process.env) + "${d}"'`,c==="tcsh"?v=["-ic"]:v=["-ilc"]),l.trace("getUnixShellEnvironment#spawn",JSON.stringify(v),a);const R=(0,D.spawn)(t,[...v,a],{detached:!0,stdio:["ignore","pipe","pipe"],env:o});m.onCancellationRequested(()=>(R.kill(),r((0,I.canceled)()))),R.on("error",z=>{l.error("getUnixShellEnvironment#errorChildProcess",(0,T.toErrorMessage)(z)),r(z)});const N=[];R.stdout.on("data",z=>N.push(z));const O=[];R.stderr.on("data",z=>O.push(z)),R.on("close",(z,F)=>{const A=Buffer.concat(N).toString("utf8");l.trace("getUnixShellEnvironment#raw",A);const M=Buffer.concat(O).toString("utf8");if(M.trim()&&l.trace("getUnixShellEnvironment#stderr",M),z||F)return r(new Error((0,k.localize)(2,null,z,F)));const $=n.exec(A),V=$?$[1]:"{}";try{const B=JSON.parse(V);u?B.ELECTRON_RUN_AS_NODE=u:delete B.ELECTRON_RUN_AS_NODE,h?B.ELECTRON_NO_ATTACH_CONSOLE=h:delete B.ELECTRON_NO_ATTACH_CONSOLE,delete B.XDG_RUNTIME_DIR,l.trace("getUnixShellEnvironment#result",B),s(B)}catch(B){l.error("getUnixShellEnvironment#errorCaught",(0,T.toErrorMessage)(B)),r(B)}})})}}),define(se[108],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISignService=e.SIGN_SERVICE_ID=void 0,e.SIGN_SERVICE_ID="signService",e.ISignService=(0,D.createDecorator)(e.SIGN_SERVICE_ID)}),define(se[233],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignService=void 0;class D{constructor(){this.validators=new Map}vsda(){return new Promise((k,L)=>Z(["vsda"],k,L))}async createNewMessage(k){try{const L=await this.vsda(),T=new L.validator;if(T){const I=String(D._nextId++);return this.validators.set(I,T),{id:I,data:T.createNewMessage(k)}}}catch{}return{id:"",data:k}}async validate(k,L){if(!k.id)return!0;const T=this.validators.get(k.id);if(!T)return!1;this.validators.delete(k.id);try{return T.validate(L)==="ok"}catch{return!1}}async sign(k){try{const L=await this.vsda(),T=new L.signer;if(T)return T.sign(k)}catch{}return k}}e.SignService=D,D._nextId=1}),define(se[76],oe([0,1,3,2]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StorageClient=e.WorkspaceStorageDatabaseClient=e.ProfileStorageDatabaseClient=e.ApplicationStorageDatabaseClient=void 0;class k extends i.Disposable{constructor(b,p,S){super(),this.channel=b,this.profile=p,this.workspace=S}async getItems(){const b={profile:this.profile,workspace:this.workspace},p=await this.channel.call("getItems",b);return new Map(p)}updateItems(b){const p={profile:this.profile,workspace:this.workspace};return b.insert&&(p.insert=Array.from(b.insert.entries())),b.delete&&(p.delete=Array.from(b.delete.values())),this.channel.call("updateItems",p)}}class L extends k{constructor(b,p){super(b,p,void 0),this._onDidChangeItemsExternal=this._register(new D.Emitter),this.onDidChangeItemsExternal=this._onDidChangeItemsExternal.event,this.registerListeners()}registerListeners(){this._register(this.channel.listen("onDidChangeStorage",{profile:this.profile})(b=>this.onDidChangeStorage(b)))}onDidChangeStorage(b){(Array.isArray(b.changed)||Array.isArray(b.deleted))&&this._onDidChangeItemsExternal.fire({changed:b.changed?new Map(b.changed):void 0,deleted:b.deleted?new Set(b.deleted):void 0})}}class T extends L{constructor(b){super(b,void 0)}async close(){this.dispose()}}e.ApplicationStorageDatabaseClient=T;class I extends L{constructor(b,p){super(b,p)}async close(){this.dispose()}}e.ProfileStorageDatabaseClient=I;class P extends k{constructor(b,p){super(b,void 0,p),this.onDidChangeItemsExternal=D.Event.None}async close(){this.dispose()}}e.WorkspaceStorageDatabaseClient=P;class w{constructor(b){this.channel=b}isUsed(b){const p={payload:b,profile:void 0,workspace:void 0};return this.channel.call("isUsed",p)}}e.StorageClient=w}),define(se[109],oe([0,1,5,36,7,31]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verifyMicrosoftInternalDomain=e.resolveCommonProperties=void 0;function T(w){if(D.platform===2&&/^penguin(\.|$)/i.test(w))return"chromebook"}async function I(w,C,b,p,S,f,g,y,l,m){const u=Object.create(null);u["common.machineId"]=g,u.sessionID=(0,L.generateUuid)()+Date.now(),u.commitHash=S,u.version=f,u["common.platformVersion"]=(C||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),u["common.platform"]=(0,D.PlatformToString)(D.platform),u["common.nodePlatform"]=i.platform,u["common.nodeArch"]=p,u["common.product"]=m||"desktop",y&&(u["common.msftInternal"]=y);let h=0;const d=Date.now();Object.defineProperties(u,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-d,enumerable:!0},"common.sequence":{get:()=>h++,enumerable:!0}}),D.isLinuxSnap&&(u["common.snap"]="true");const n=T(b);n&&(u["common.platformDetail"]=n);try{const o=await w.readFile(k.URI.file(l));u["common.source"]=o.value.toString().slice(0,30)}catch{}return u}e.resolveCommonProperties=I;function P(w){const C=i.env.USERDNSDOMAIN;if(!C)return!1;const b=C.toLowerCase();return w.some(p=>b===p)}e.verifyMicrosoftInternalDomain=P}),define(se[23],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryConfiguration=e.TelemetryLevel=e.TELEMETRY_OLD_SETTING_ID=e.TELEMETRY_SETTING_ID=e.TELEMETRY_SECTION_ID=e.machineIdKey=e.lastSessionDateStorageKey=e.firstSessionDateStorageKey=e.currentSessionDateStorageKey=e.ICustomEndpointTelemetryService=e.ITelemetryService=void 0,e.ITelemetryService=(0,D.createDecorator)("telemetryService"),e.ICustomEndpointTelemetryService=(0,D.createDecorator)("customEndpointTelemetryService"),e.currentSessionDateStorageKey="telemetry.currentSessionDate",e.firstSessionDateStorageKey="telemetry.firstSessionDate",e.lastSessionDateStorageKey="telemetry.lastSessionDate",e.machineIdKey="telemetry.machineId",e.TELEMETRY_SECTION_ID="telemetry",e.TELEMETRY_SETTING_ID="telemetry.telemetryLevel",e.TELEMETRY_OLD_SETTING_ID="telemetry.enableTelemetry";var i;(function(L){L[L.NONE=0]="NONE",L[L.CRASH=1]="CRASH",L[L.ERROR=2]="ERROR",L[L.USAGE=3]="USAGE"})(i=e.TelemetryLevel||(e.TelemetryLevel={}));var k;(function(L){L.OFF="off",L.CRASH="crash",L.ERROR="error",L.ON="all"})(k=e.TelemetryConfiguration||(e.TelemetryConfiguration={}))}),define(se[234],oe([0,1,34,6,35,21,12,5,7,144,28,146,96,13,25,23]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticsService=e.collectLaunchConfigs=e.getMachineInfo=e.collectWorkspaceStats=void 0;const y=new Map;async function l(n,o){const t=`${n}::${o.join(":")}`,s=y.get(t);if(s)return s;const r=[{tag:"grunt.js",filePattern:/^gruntfile\.js$/i},{tag:"gulp.js",filePattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",filePattern:/^tsconfig\.json$/i},{tag:"package.json",filePattern:/^package\.json$/i},{tag:"jsconfig.json",filePattern:/^jsconfig\.json$/i},{tag:"tslint.json",filePattern:/^tslint\.json$/i},{tag:"eslint.json",filePattern:/^eslint\.json$/i},{tag:"tasks.json",filePattern:/^tasks\.json$/i},{tag:"launch.json",filePattern:/^launch\.json$/i},{tag:"settings.json",filePattern:/^settings\.json$/i},{tag:"webpack.config.js",filePattern:/^webpack\.config\.js$/i},{tag:"project.json",filePattern:/^project\.json$/i},{tag:"makefile",filePattern:/^makefile$/i},{tag:"sln",filePattern:/^.+\.sln$/i},{tag:"csproj",filePattern:/^.+\.csproj$/i},{tag:"cmake",filePattern:/^.+\.cmake$/i},{tag:"github-actions",filePattern:/^.+\.ya?ml$/i,relativePathPattern:/^\.github(?:\/|\\)workflows$/i},{tag:"devcontainer.json",filePattern:/^devcontainer\.json$/i},{tag:"dockerfile",filePattern:/^(dockerfile|docker\-compose\.ya?ml)$/i}],c=new Map,a=new Map,v=2e4;function E(N,O,z,F){const A=O.substring(N.length+1);return i.Promises.withAsyncBody(async M=>{let $;try{$=await C.Promises.readdir(O,{withFileTypes:!0})}catch{M();return}if(F.count>=v){F.count+=$.length,F.maxReached=!0,M();return}let V=$.length;if(V===0){M();return}let B=$;F.count+$.length>v&&(F.maxReached=!0,V=v-F.count,B=$.slice(0,V)),F.count+=$.length;for(const Q of B)if(Q.isDirectory()){if(z.includes(Q.name)||await E(N,(0,T.join)(O,Q.name),z,F),--V===0){M();return}}else{const W=Q.name.lastIndexOf(".");if(W>=0){const q=Q.name.substring(W+1);q&&c.set(q,(c.get(q)??0)+1)}for(const q of r)q.relativePathPattern?.test(A)!==!1&&q.filePattern.test(Q.name)&&a.set(q.tag,(a.get(q.tag)??0)+1);if(--V===0){M();return}}})}const R=i.Promises.withAsyncBody(async N=>{const O={count:0,maxReached:!1};await E(n,n,o,O);const z=await h(n);N({configFiles:m(a),fileTypes:m(c),fileCount:O.count,maxFilesReached:O.maxReached,launchConfigFiles:z})});return y.set(t,R),R}e.collectWorkspaceStats=l;function m(n){return Array.from(n.entries(),([o,t])=>({name:o,count:t})).sort((o,t)=>t.count-o.count)}function u(){const n={os:`${D.type()} ${D.arch()} ${D.release()}`,memory:`${(D.totalmem()/S.ByteSize.GB).toFixed(2)}GB (${(D.freemem()/S.ByteSize.GB).toFixed(2)}GB free)`,vmHint:`${Math.round(w.virtualMachineHint.value()*100)}%`},o=D.cpus();return o&&o.length>0&&(n.cpus=`${o[0].model} (${o.length} x ${o[0].speed})`),n}e.getMachineInfo=u;async function h(n){try{const o=new Map,t=(0,T.join)(n,".vscode","launch.json"),s=await C.Promises.readFile(t),r=[],c=(0,k.parse)(s.toString(),r);if(r.length)return console.log(`Unable to parse ${t}`),[];if((0,k.getNodeType)(c)==="object"&&c.configurations)for(const a of c.configurations){const v=a.type;v&&(o.has(v)?o.set(v,o.get(v)+1):o.set(v,1))}return m(o)}catch{return[]}}e.collectLaunchConfigs=h;let d=class{constructor(o,t){this.telemetryService=o,this.productService=t}formatMachineInfo(o){const t=[];return t.push(`OS Version:       ${o.os}`),t.push(`CPUs:             ${o.cpus}`),t.push(`Memory (System):  ${o.memory}`),t.push(`VM:               ${o.vmHint}`),t.join(`
`)}formatEnvironment(o){const t=[];t.push(`Version:          ${this.productService.nameShort} ${this.productService.version} ${this.productService.release||"Release unknown"} (${this.productService.commit||"Commit unknown"}, ${this.productService.date||"Date unknown"})`),t.push(`OS Version:       ${D.type()} ${D.arch()} ${D.release()}`);const s=D.cpus();return s&&s.length>0&&t.push(`CPUs:             ${s[0].model} (${s.length} x ${s[0].speed})`),t.push(`Memory (System):  ${(D.totalmem()/S.ByteSize.GB).toFixed(2)}GB (${(D.freemem()/S.ByteSize.GB).toFixed(2)}GB free)`),I.isWindows||t.push(`Load (avg):       ${D.loadavg().map(r=>Math.round(r)).join(", ")}`),t.push(`VM:               ${Math.round(w.virtualMachineHint.value()*100)}%`),t.push(`Screen Reader:    ${o.screenReader?"yes":"no"}`),t.push(`Process Argv:     ${o.mainArguments.join(" ")}`),t.push(`GPU Status:       ${this.expandGPUFeatures(o.gpuFeatureStatus)}`),t.join(`
`)}async getPerformanceInfo(o,t){return Promise.all([(0,b.listProcesses)(o.mainPID),this.formatWorkspaceMetadata(o)]).then(async s=>{let[r,c]=s,a=this.formatProcessList(o,r);return t.forEach(v=>{if((0,p.isRemoteDiagnosticError)(v))a+=`
${v.errorMessage}`,c+=`
${v.errorMessage}`;else if(a+=`

Remote: ${v.hostName}`,v.processes&&(a+=`
${this.formatProcessList(o,v.processes)}`),v.workspaceMetadata){c+=`
|  Remote: ${v.hostName}`;for(const E of Object.keys(v.workspaceMetadata)){const R=v.workspaceMetadata[E];let N=`${R.fileCount} files`;R.maxFilesReached&&(N=`more than ${N}`),c+=`|    Folder (${E}): ${N}`,c+=this.formatWorkspaceStats(R)}}}),{processInfo:a,workspaceInfo:c}})}async getSystemInfo(o,t){const{memory:s,vmHint:r,os:c,cpus:a}=u(),v={os:c,memory:s,cpus:a,vmHint:r,processArgs:`${o.mainArguments.join(" ")}`,gpuStatus:o.gpuFeatureStatus,screenReader:`${o.screenReader?"yes":"no"}`,remoteData:t};return I.isWindows||(v.load=`${D.loadavg().map(E=>Math.round(E)).join(", ")}`),I.isLinux&&(v.linuxEnv={desktopSession:process.env.DESKTOP_SESSION,xdgSessionDesktop:process.env.XDG_SESSION_DESKTOP,xdgCurrentDesktop:process.env.XDG_CURRENT_DESKTOP,xdgSessionType:process.env.XDG_SESSION_TYPE}),Promise.resolve(v)}async getDiagnostics(o,t){const s=[];return(0,b.listProcesses)(o.mainPID).then(async r=>(s.push(""),s.push(this.formatEnvironment(o)),s.push(""),s.push(this.formatProcessList(o,r)),o.windows.some(c=>c.folderURIs&&c.folderURIs.length>0&&!c.remoteAuthority)&&(s.push(""),s.push("Workspace Stats: "),s.push(await this.formatWorkspaceMetadata(o))),t.forEach(c=>{if((0,p.isRemoteDiagnosticError)(c))s.push(`
${c.errorMessage}`);else if(s.push(`

`),s.push(`Remote:           ${c.hostName}`),s.push(this.formatMachineInfo(c.machineInfo)),c.processes&&s.push(this.formatProcessList(o,c.processes)),c.workspaceMetadata)for(const a of Object.keys(c.workspaceMetadata)){const v=c.workspaceMetadata[a];let E=`${v.fileCount} files`;v.maxFilesReached&&(E=`more than ${E}`),s.push(`Folder (${a}): ${E}`),s.push(this.formatWorkspaceStats(v))}}),s.push(""),s.push(""),s.join(`
`)))}formatWorkspaceStats(o){const t=[];let r=0;const c=(R,N)=>{const O=` ${R}(${N})`;r+O.length>60?(t.push(a),a="|                 ",r=a.length):r+=O.length,a+=O};let a="|      File types:";const v=10,E=o.fileTypes.length>v?v:o.fileTypes.length;for(let R=0;R<E;R++){const N=o.fileTypes[R];c(N.name,N.count)}if(t.push(a),o.configFiles.length>=0&&(a="|      Conf files:",r=0,o.configFiles.forEach(R=>{c(R.name,R.count)}),t.push(a)),o.launchConfigFiles.length>0){let R="|      Launch Configs:";o.launchConfigFiles.forEach(N=>{R+=N.count>1?` ${N.name}(${N.count})`:` ${N.name}`}),t.push(R)}return t.join(`
`)}expandGPUFeatures(o){const t=Math.max(...Object.keys(o).map(s=>s.length));return Object.keys(o).map(s=>`${s}:  ${" ".repeat(t-s.length)}  ${o[s]}`).join(`
                  `)}formatWorkspaceMetadata(o){const t=[],s=[];return o.windows.forEach(r=>{r.folderURIs.length===0||!!r.remoteAuthority||(t.push(`|  Window (${r.title})`),r.folderURIs.forEach(c=>{const a=P.URI.revive(c);if(a.scheme===L.Schemas.file){const v=a.fsPath;s.push(l(v,["node_modules",".git"]).then(E=>{let R=`${E.fileCount} files`;E.maxFilesReached&&(R=`more than ${R}`),t.push(`|    Folder (${(0,T.basename)(v)}): ${R}`),t.push(this.formatWorkspaceStats(E))}).catch(E=>{t.push(`|      Error: Unable to collect workspace stats for folder ${v} (${E.toString()})`)}))}else t.push(`|    Folder (${a.toString()}): Workspace stats not available.`)}))}),Promise.all(s).then(r=>t.join(`
`)).catch(r=>`Unable to collect workspace stats: ${r}`)}formatProcessList(o,t){const s=new Map;o.windows.forEach(c=>s.set(c.pid,c.title));const r=[];return r.push("CPU %	Mem MB	   PID	Process"),t&&this.formatProcessItem(o.mainPID,s,r,t,0),r.join(`
`)}formatProcessItem(o,t,s,r,c){const a=c===0;let v;a?v=r.pid===o?`${this.productService.applicationName} main`:"remote agent":(v=`${"  ".repeat(c)} ${r.name}`,r.name==="window"&&(v=`${v} (${t.get(r.pid)})`));const E=process.platform==="win32"?r.mem:D.totalmem()*(r.mem/100);s.push(`${r.load.toFixed(0).padStart(5," ")}	${(E/S.ByteSize.MB).toFixed(0).padStart(6," ")}	${r.pid.toFixed(0).padStart(6," ")}	${v}`),Array.isArray(r.children)&&r.children.forEach(R=>this.formatProcessItem(o,t,s,R,c+1))}async getWorkspaceFileExtensions(o){const t=new Set;for(const{uri:s}of o.folders){const r=P.URI.revive(s);if(r.scheme!==L.Schemas.file)continue;const c=r.fsPath;try{(await l(c,["node_modules",".git"])).fileTypes.forEach(v=>t.add(v.name))}catch{}}return{extensions:[...t]}}async reportWorkspaceStats(o){for(const{uri:t}of o.folders){const s=P.URI.revive(t);if(s.scheme!==L.Schemas.file)continue;const r=s.fsPath;try{const c=await l(r,["node_modules",".git"]);this.telemetryService.publicLog2("workspace.stats",{"workspace.id":o.telemetryId,rendererSessionId:o.rendererSessionId}),c.fileTypes.forEach(a=>{this.telemetryService.publicLog2("workspace.stats.file",{rendererSessionId:o.rendererSessionId,type:a.name,count:a.count})}),c.launchConfigFiles.forEach(a=>{this.telemetryService.publicLog2("workspace.stats.launchConfigFile",{rendererSessionId:o.rendererSessionId,type:a.name,count:a.count})}),c.configFiles.forEach(a=>{this.telemetryService.publicLog2("workspace.stats.configFiles",{rendererSessionId:o.rendererSessionId,type:a.name,count:a.count})})}catch{}}}};d=ve([H(0,g.ITelemetryService),H(1,f.IProductService)],d),e.DiagnosticsService=d}),define(se[235],oe([0,1,106,3,23,15,2,8,12,49,25,5,6,102,16,168,34,7]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteTunnelService=void 0;let m=class extends T.Disposable{constructor(h,d,n,o,t,s){super(),this.telemetryService=h,this.productService=d,this.environmentService=n,this.configurationService=s,this._onDidTokenFailedEmitter=new i.Emitter,this.onDidTokenFailed=this._onDidTokenFailedEmitter.event,this._onDidChangeTunnelStatusEmitter=new i.Emitter,this.onDidChangeTunnelStatus=this._onDidChangeTunnelStatusEmitter.event,this._onDidChangeAccountEmitter=new i.Emitter,this.onDidChangeAccount=this._onDidChangeAccountEmitter.event,this._tunnelStatus=D.TunnelStates.disconnected;const r=l.URI.file((0,P.join)(n.logsPath,D.LOG_FILE_NAME));this._logger=this._register(o.createLogger(r,{name:D.LOGGER_NAME})),this._startTunnelProcessDelayer=new p.Delayer(100),this._register(this._logger.onDidChangeLogLevel(c=>this._logger.info("Log level changed to "+(0,I.LogLevelToString)(c)))),this._register(t.onWillShutdown(c=>{this._tunnelProcess&&(this._tunnelProcess.cancel(),this._tunnelProcess=void 0),this.dispose()})),this._register(s.onDidChangeConfiguration(c=>{c.affectsConfiguration(D.CONFIGURATION_KEY_HOST_NAME)&&this._startTunnelProcessDelayer.trigger(()=>this.updateTunnelProcess())}))}async getAccount(){return this._account}async updateAccount(h){if(h&&this._account?h.token!==this._account.token||h.providerId!==this._account.providerId:h!==this._account){this._account=h,this._onDidChangeAccountEmitter.fire(h),h?this._logger.info(`Account updated: ${h.accountLabel} (${h.providerId})`):this._logger.info("Account reset"),this.telemetryService.publicLog2("remoteTunnel.enablement",{enabled:!!h});try{await this._startTunnelProcessDelayer.trigger(()=>this.updateTunnelProcess())}catch(d){this._logger.error(d)}}return this._tunnelStatus}getTunnelCommandLocation(){if(!this._tunnelCommand){let h;b.isMacintosh?h=this.environmentService.appRoot:h=(0,P.dirname)((0,P.dirname)(this.environmentService.appRoot)),this._tunnelCommand=(0,P.join)(h,"bin",`${this.productService.tunnelApplicationName}${b.isWindows?".exe":""}`)}return this._tunnelCommand}async updateTunnelProcess(){if(this._tunnelProcess&&(this._tunnelProcess.cancel(),this._tunnelProcess=void 0),!this._account){this.setTunnelStatus(D.TunnelStates.disconnected);return}const{token:h,providerId:d,accountLabel:n}=this._account;this.setTunnelStatus(D.TunnelStates.connecting((0,g.localize)(0,null,n,d)));const o=(a,v)=>{a=a.replaceAll(h,"*".repeat(4)),v?this._logger.error(a):this._logger.info(a),!this.environmentService.isBuilt&&a.startsWith("   Compiling")&&this.setTunnelStatus(D.TunnelStates.connecting((0,g.localize)(1,null)))},t=this.runCodeTunneCommand("login",["user","login","--provider",d,"--access-token",h,"--log",(0,I.LogLevelToString)(this._logger.getLevel())],o);this._tunnelProcess=t;try{if(await t,this._tunnelProcess!==t)return}catch(a){this._logger.error(a),this._tunnelProcess=void 0,this._onDidTokenFailedEmitter.fire(!0),this.setTunnelStatus(D.TunnelStates.disconnected);return}const s=this._getHostName();s?this.setTunnelStatus(D.TunnelStates.connecting((0,g.localize)(2,null,s))):this.setTunnelStatus(D.TunnelStates.connecting((0,g.localize)(3,null)));const r=["--parent-process-id",String(process.pid),"--accept-server-license-terms","--log",(0,I.LogLevelToString)(this._logger.getLevel())];s?r.push("--name",s):r.push("--random-name");const c=this.runCodeTunneCommand("tunnel",r,(a,v)=>{v?this._logger.error(a):this._logger.info(a);const E=a.match(/^\s*Open this link in your browser (https:\/\/([^\/\s]+)\/([^\/\s]+)\/([^\/\s]+))/);if(E){const R={link:E[1],domain:E[2],hostName:E[4]};this.setTunnelStatus(D.TunnelStates.connected(R))}else a.match(/error refreshing token/)&&(c.cancel(),this._onDidTokenFailedEmitter.fire(!0),this.setTunnelStatus(D.TunnelStates.disconnected))});this._tunnelProcess=c,c.finally(()=>{c===this._tunnelProcess&&(this._logger.info("tunnel process terminated"),this._tunnelProcess=void 0,this._account=void 0,this.setTunnelStatus(D.TunnelStates.disconnected))})}async getTunnelStatus(){return this._tunnelStatus}setTunnelStatus(h){this._tunnelStatus=h,this._onDidChangeTunnelStatusEmitter.fire(h)}runCodeTunneCommand(h,d,n=()=>{}){return(0,p.createCancelablePromise)(o=>new Promise((t,s)=>{o.isCancellationRequested&&t();let r;if(o.onCancellationRequested(()=>{r&&(this._logger.info(`${h} terminating(${r.pid})`),r.kill())}),!this.environmentService.isBuilt)n("Building tunnel CLI from sources and run",!1),n(`${h} Spawning: cargo run -- tunnel ${d.join(" ")}`,!1),r=(0,w.spawn)("cargo",["run","--","tunnel",...d],{cwd:(0,P.join)(this.environmentService.appRoot,"cli")});else{n("Running tunnel CLI",!1);const c=this.getTunnelCommandLocation();n(`${h} Spawning: ${c} tunnel ${d.join(" ")}`,!1),r=(0,w.spawn)(c,["tunnel",...d],{cwd:(0,y.homedir)()})}r.stdout.on("data",c=>{if(r){const a=c.toString();n(a,!1)}}),r.stderr.on("data",c=>{if(r){const a=c.toString();n(a,!0)}}),r.on("exit",c=>{r&&(n(`${h} exit(${r.pid}): + ${c} `,!1),r=void 0,c===0?t():s())}),r.on("error",c=>{r&&(n(`${h} error(${r.pid}): + ${c} `,!0),r=void 0,s())})}))}async getHostName(){return this._getHostName()}_getHostName(){let h=this.configurationService.getValue(D.CONFIGURATION_KEY_HOST_NAME)||(0,y.hostname)();return h=h.replace(/[^\w-]/g,"").substring(0,20),h||void 0}};m=ve([H(0,k.ITelemetryService),H(1,C.IProductService),H(2,L.INativeEnvironmentService),H(3,I.ILoggerService),H(4,S.ISharedProcessLifecycleService),H(5,f.IConfigurationService)],m),e.RemoteTunnelService=m}),define(se[110],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryAppenderClient=e.TelemetryAppenderChannel=void 0;class D{constructor(L){this.appenders=L}listen(L,T){throw new Error(`Event not found: ${T}`)}call(L,T,{eventName:I,data:P}){return this.appenders.forEach(w=>w.log(I,P)),Promise.resolve(null)}}e.TelemetryAppenderChannel=D;class i{constructor(L){this.channel=L}log(L,T){return this.channel.call("log",{eventName:L,data:T}).then(void 0,I=>`Failed to log telemetry: ${console.warn(I)}`),Promise.resolve(null)}flush(){return Promise.resolve()}}e.TelemetryAppenderClient=i}),define(se[50],oe([0,1,32,14,16,75,109,23]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cleanData=e.getPiiPathsFromEnvironment=e.isInternalTelemetry=e.cleanRemoteAuthority=e.validateTelemetryData=e.getTelemetryLevel=e.isLoggingOnly=e.supportsTelemetry=e.configurationTelemetry=e.NullAppender=e.NullEndpointTelemetryService=e.NullTelemetryService=e.NullTelemetryServiceShape=e.TrustedTelemetryValue=void 0;class P{constructor(c){this.value=c}}e.TrustedTelemetryValue=P;class w{constructor(){this.sendErrorTelemetry=!1,this.telemetryLevel=0}publicLog(c,a){return Promise.resolve(void 0)}publicLog2(c,a){return this.publicLog(c,a)}publicLogError(c,a){return Promise.resolve(void 0)}publicLogError2(c,a){return this.publicLogError(c,a)}setExperimentProperty(){}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId",firstSessionDate:"someValue.firstSessionDate"})}}e.NullTelemetryServiceShape=w,e.NullTelemetryService=new w;class C{async publicLog(c,a,v){}async publicLogError(c,a,v){}}e.NullEndpointTelemetryService=C,e.NullAppender={log:()=>null,flush:()=>Promise.resolve(null)};function b(r,c){return c.onDidChangeConfiguration(a=>{a.source!==7&&r.publicLog2("updateConfiguration",{configurationSource:(0,k.ConfigurationTargetToString)(a.source),configurationKeys:u(a.sourceConfig)})})}e.configurationTelemetry=b;function p(r,c){return!c.isBuilt&&!c.disableTelemetry?!0:!(c.disableTelemetry||!r.enableTelemetry||c.extensionTestsLocationURI)}e.supportsTelemetry=p;function S(r,c){return!(c.isBuilt||c.disableTelemetry||r.enableTelemetry&&r.aiConfig?.ariaKey)}e.isLoggingOnly=S;function f(r){const c=r.getValue(I.TELEMETRY_SETTING_ID),a=r.getValue("telemetry.enableCrashReporter");if(r.getValue(I.TELEMETRY_OLD_SETTING_ID)===!1||a===!1)return 0;switch(c??"all"){case"all":return 3;case"error":return 2;case"crash":return 1;case"off":return 0}}e.getTelemetryLevel=f;function g(r){const c={},a={},v={};m(r,v);for(let E in v){E=E.length>150?E.substr(E.length-149):E;const R=v[E];typeof R=="number"?a[E]=R:typeof R=="boolean"?a[E]=R?1:0:typeof R=="string"?(R.length>8192&&console.warn(`Telemetry property: ${E} has been trimmed to 8192, the original length is ${R.length}`),c[E]=R.substring(0,8191)):typeof R<"u"&&R!==null&&(c[E]=R)}return{properties:c,measurements:a}}e.validateTelemetryData=g;const y=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces"]);function l(r){if(!r)return"none";const c=(0,L.getRemoteName)(r);return y.has(c)?c:"other"}e.cleanRemoteAuthority=l;function m(r,c,a=0,v){if(!!r)for(const E of Object.getOwnPropertyNames(r)){const R=r[E],N=v?v+E:E;Array.isArray(R)?c[N]=(0,D.safeStringify)(R):R instanceof Date?c[N]=R.toISOString():(0,i.isObject)(R)?a<2?m(R,c,a+1,N+"."):c[N]=(0,D.safeStringify)(R):c[N]=R}}function u(r){if(!r)return[];const c=[];return h(c,"",r),c}function h(r,c,a){a&&typeof a=="object"&&!Array.isArray(a)?Object.keys(a).forEach(v=>h(r,c?`${c}.${v}`:v,a[v])):r.push(c)}function d(r,c){const a=r.msftInternalDomains||[],v=c.getValue("telemetry.internalTesting");return(0,T.verifyMicrosoftInternalDomain)(a)||v}e.isInternalTelemetry=d;function n(r){return[r.appRoot,r.extensionsPath,r.userHome.fsPath,r.tmpDir.fsPath,r.userDataPath]}e.getPiiPathsFromEnvironment=n;function o(r,c){if(!r||!r.includes("/")&&!r.includes("\\"))return r;let a=r;const v=[];for(const O of c)for(;;){const z=O.exec(r);if(!z)break;v.push([z.index,O.lastIndex])}const E=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,R=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let N=0;for(a="";;){const O=R.exec(r);if(!O)break;const z=v.some(([F,A])=>O.index<A&&F<R.lastIndex);!E.test(O[0])&&!z&&(a+=r.substring(N,O.index)+"<REDACTED: user-file-path>",N=R.lastIndex)}return N<r.length&&(a+=r.substr(N)),a}function t(r){if(!r)return r;const c=r.toLowerCase(),a=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const v of a)if(v.regex.test(c))return`<REDACTED: ${v.label}>`;return r}function s(r,c){return(0,D.cloneAndChange)(r,a=>{if(a instanceof P)return a.value;if(typeof a=="string"){let v=a.replaceAll("%20"," ");v=o(v,c);for(const E of c)v=v.replace(E,"");return v=t(v),v}})}e.cleanData=s}),define(se[236],oe([0,1,45,50]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveMarketplaceHeaders=void 0;async function k(L,T,I,P,w,C,b){const p={"X-Market-Client-Id":`VSCode ${L}`,"User-Agent":`VSCode ${L} (${T.nameShort})`};if((0,i.supportsTelemetry)(T,I)&&(0,i.getTelemetryLevel)(P)===3){const S=await(0,D.getServiceMachineId)(I,w,C),{machineId:f}=await b.getTelemetryInfo();p["X-Market-User-Id"]=S,p["VSCode-SessionId"]=f||S}return p}e.resolveMarketplaceHeaders=k}),define(se[237],oe([0,1,9,32,50]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractOneDataSystemAppender=void 0;const L="https://0.0.0.0/OneCollector/1.0";async function T(P,w,C){const b=await new Promise((y,l)=>{Z(["@microsoft/1ds-core-js"],y,l)}),p=await new Promise((y,l)=>{Z(["@microsoft/1ds-post-js"],y,l)}),S=new b.AppInsightsCore,f=new p.PostChannel,g={instrumentationKey:P,endpointUrl:L,loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[f]]};if(C){g.extensionConfig={};const y={alwaysUseXhrOverride:!0,httpXHROverride:C};g.extensionConfig[f.identifier]=y}return S.initialize(g,[]),S.addTelemetryInitializer(y=>{w&&(y.ext=y.ext??{},y.ext.utc=y.ext.utc??{},y.ext.utc.flags=8462029)}),S}class I{constructor(w,C,b,p,S){this._isInternalTelemetry=w,this._eventPrefix=C,this._defaultData=b,this._xhrOverride=S,this.endPointUrl=L,this._defaultData||(this._defaultData={}),typeof p=="function"?this._aiCoreOrKey=p():this._aiCoreOrKey=p,this._asyncAiCore=null}_withAIClient(w){if(!!this._aiCoreOrKey){if(typeof this._aiCoreOrKey!="string"){w(this._aiCoreOrKey);return}this._asyncAiCore||(this._asyncAiCore=T(this._aiCoreOrKey,this._isInternalTelemetry,this._xhrOverride)),this._asyncAiCore.then(C=>{w(C)},C=>{(0,D.onUnexpectedError)(C),console.error(C)})}}log(w,C){if(!this._aiCoreOrKey)return;C=(0,i.mixin)(C,this._defaultData),C=(0,k.validateTelemetryData)(C);const b=this._eventPrefix+"/"+w;try{this._withAIClient(p=>{p.pluginVersionString=C?.properties.version??"Unknown",p.track({name:b,baseData:{name:b,properties:C?.properties,measurements:C?.measurements}})})}catch{}}flush(){return this._aiCoreOrKey?new Promise(w=>{this._withAIClient(C=>{C.unload(!0,()=>{this._aiCoreOrKey=void 0,w(void 0)})})}):Promise.resolve(void 0)}}e.AbstractOneDataSystemAppender=I}),define(se[111],oe([0,1,2,15,8,50]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryLogAppender=void 0;let T=class extends D.Disposable{constructor(P,w,C=""){super(),this.prefix=C;const b=P.getLogger(w.telemetryLogResource);b?this.logger=this._register(b):(this.logger=this._register(P.createLogger(w.telemetryLogResource)),this.logger.info("Below are logs for every telemetry event sent from VS Code once the log level is set to trace."),this.logger.info("==========================================================="))}flush(){return Promise.resolve(void 0)}log(P,w){this.logger.trace(`${this.prefix}telemetry/${P}`,(0,L.validateTelemetryData)(w))}};T=ve([H(0,k.ILoggerService),H(1,i.IEnvironmentService)],T),e.TelemetryLogAppender=T}),define(se[112],oe([0,1,2,32,5,27,171,16,46,104,25,40,23,50]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryService=void 0;let f=class{constructor(l,m,u){this._configurationService=m,this._productService=u,this._experimentProperties={},this._disposables=new D.DisposableStore,this._cleanupPatterns=[],this._appenders=l.appenders,this._commonProperties=l.commonProperties||Promise.resolve({}),this._piiPaths=l.piiPaths||[],this._telemetryLevel=3,this._sendErrorTelemetry=!!l.sendErrorTelemetry,this._cleanupPatterns=[/(vscode-)?file:\/\/\/.*?\/resources\/app\//gi];for(const h of this._piiPaths)this._cleanupPatterns.push(new RegExp((0,L.escapeRegExpCharacters)(h),"gi")),h.indexOf("\\")>=0&&this._cleanupPatterns.push(new RegExp((0,L.escapeRegExpCharacters)(h.replace(/\\/g,"/")),"gi"));this._updateTelemetryLevel(),this._configurationService.onDidChangeConfiguration(this._updateTelemetryLevel,this,this._disposables)}setExperimentProperty(l,m){this._experimentProperties[l]=m}_updateTelemetryLevel(){let l=(0,S.getTelemetryLevel)(this._configurationService);const m=this._productService.enabledTelemetryLevels;if(m){this._sendErrorTelemetry=this.sendErrorTelemetry?m.error:!1;const u=m.usage?3:m.error?2:0;l=Math.min(l,u)}this._telemetryLevel=l}get sendErrorTelemetry(){return this._sendErrorTelemetry}get telemetryLevel(){return this._telemetryLevel}async getTelemetryInfo(){const l=await this._commonProperties,m=l.sessionID,u=l["common.machineId"],h=l["common.firstSessionDate"],d=l["common.msftInternal"];return{sessionId:m,machineId:u,firstSessionDate:h,msftInternal:d}}dispose(){this._disposables.dispose()}_log(l,m,u){return this._telemetryLevel<m?Promise.resolve(void 0):this._commonProperties.then(h=>{u=(0,i.mixin)(u,this._experimentProperties),u=(0,S.cleanData)(u,this._cleanupPatterns),u=(0,i.mixin)(u,h),this._appenders.forEach(d=>d.log(l,u))},h=>{console.error(h)})}publicLog(l,m){return this._log(l,3,m)}publicLog2(l,m){return this.publicLog(l,m)}publicLogError(l,m){return this._sendErrorTelemetry?this._log(l,2,m):Promise.resolve(void 0)}publicLogError2(l,m){return this.publicLogError(l,m)}};f.IDLE_START_EVENT_NAME="UserIdleStart",f.IDLE_STOP_EVENT_NAME="UserIdleStop",f=ve([H(1,I.IConfigurationService),H(2,C.IProductService)],f),e.TelemetryService=f;function g(){const y=(0,T.localize)(0,null,w.default.nameLong),l=w.default.privacyStatementUrl?(0,T.localize)(2,null,"https://aka.ms/vscode-telemetry",w.default.privacyStatementUrl):(0,T.localize)(1,null,"https://aka.ms/vscode-telemetry"),m=k.isWeb?"":(0,T.localize)(3,null),u=(0,T.localize)(4,null),h=(0,T.localize)(5,null),d=(0,T.localize)(6,null),n=(0,T.localize)(7,null),o=`
|       | ${u} | ${h} | ${d} |
|:------|:---------------------:|:---------------:|:--------------:|
| all   |            \u2713          |        \u2713        |        \u2713       |
| error |            \u2713          |        \u2713        |        -       |
| crash |            \u2713          |        -        |        -       |
| off   |            -          |        -        |        -       |
`,t=(0,T.localize)(8,null);return`
${y} ${l} ${m}

&nbsp;

${n}
${o}

&nbsp;

${t}
`}b.Registry.as(P.Extensions.Configuration).registerConfiguration({id:p.TELEMETRY_SECTION_ID,order:110,type:"object",title:(0,T.localize)(9,null),properties:{[p.TELEMETRY_SETTING_ID]:{type:"string",enum:["all","error","crash","off"],enumDescriptions:[(0,T.localize)(10,null),(0,T.localize)(11,null),(0,T.localize)(12,null),(0,T.localize)(13,null)],markdownDescription:g(),default:"off",restricted:!0,scope:1,tags:["usesOnlineServices","telemetry"]}}}),b.Registry.as(P.Extensions.Configuration).registerConfiguration({id:p.TELEMETRY_SECTION_ID,order:110,type:"object",title:(0,T.localize)(14,null),properties:{[p.TELEMETRY_OLD_SETTING_ID]:{type:"boolean",markdownDescription:w.default.privacyStatementUrl?(0,T.localize)(16,null,w.default.nameLong,w.default.privacyStatementUrl):(0,T.localize)(15,null,w.default.nameLong),default:!0,restricted:!0,markdownDeprecationMessage:(0,T.localize)(17,null,`\`#${p.TELEMETRY_SETTING_ID}#\``),scope:1,tags:["usesOnlineServices","telemetry"]}}})}),define(se[238],oe([0,1,287,237]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OneDataSystemAppender=void 0;class k extends i.AbstractOneDataSystemAppender{constructor(T,I,P,w){const C={sendPOST:(b,p)=>{const S={method:"POST",headers:{...b.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(b.data)}};try{const f=D.request(b.urlString,S,g=>{g.on("data",function(y){p(g.statusCode??200,g.headers,y.toString())}),g.on("error",function(y){p(0,{})})});f.write(b.data),f.end()}catch{p(0,{})}}};super(T,I,P,w,C)}}e.OneDataSystemAppender=k}),define(se[239],oe([0,1,21,68,16,15,8,25,23,110,111,112]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomEndpointTelemetryService=void 0;let p=class{constructor(f,g,y,l,m){this.configurationService=f,this.telemetryService=g,this.loggerService=y,this.environmentService=l,this.productService=m,this.customTelemetryServices=new Map}async getCustomTelemetryService(f){if(!this.customTelemetryServices.has(f.id)){const{machineId:g,sessionId:y}=await this.telemetryService.getTelemetryInfo(),l=Object.create(null);l["common.vscodemachineid"]=g,l["common.vscodesessionid"]=y;const m=[f.id,JSON.stringify(l),f.aiKey],h=new i.Client(D.FileAccess.asFileUri("bootstrap-fork").fsPath,{serverName:"Debug Telemetry",timeout:1e3*60*5,args:m,env:{ELECTRON_RUN_AS_NODE:1,VSCODE_PIPE_LOGGING:"true",VSCODE_AMD_ENTRYPOINT:"vs/workbench/contrib/debug/node/telemetryApp"}}).getChannel("telemetryAppender"),d=[new w.TelemetryAppenderClient(h),new C.TelemetryLogAppender(this.loggerService,this.environmentService,`[${f.id}] `)];this.customTelemetryServices.set(f.id,new b.TelemetryService({appenders:d,sendErrorTelemetry:f.sendErrorTelemetry},this.configurationService,this.productService))}return this.customTelemetryServices.get(f.id)}async publicLog(f,g,y){await(await this.getCustomTelemetryService(f)).publicLog(g,y)}async publicLogError(f,g,y){await(await this.getCustomTelemetryService(f)).publicLogError(g,y)}};p=ve([H(0,k.IConfigurationService),H(1,P.ITelemetryService),H(2,T.ILoggerService),H(3,L.IEnvironmentService),H(4,I.IProductService)],p),e.CustomEndpointTelemetryService=p}),define(se[240],oe([0,1,6,24,3,2,8]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestStore=void 0;let I=class extends L.Disposable{constructor(w,C){super(),this._logService=C,this._lastRequestId=0,this._pendingRequests=new Map,this._pendingRequestDisposables=new Map,this._onCreateRequest=this._register(new k.Emitter),this.onCreateRequest=this._onCreateRequest.event,this._timeout=w===void 0?15e3:w}createRequest(w){return new Promise((C,b)=>{const p=++this._lastRequestId;this._pendingRequests.set(p,C),this._onCreateRequest.fire({requestId:p,...w});const S=new i.CancellationTokenSource;(0,D.timeout)(this._timeout,S.token).then(()=>b(`Request ${p} timed out (${this._timeout}ms)`)),this._pendingRequestDisposables.set(p,[(0,L.toDisposable)(()=>S.cancel())])})}acceptReply(w,C){const b=this._pendingRequests.get(w);b?(this._pendingRequests.delete(w),(0,L.dispose)(this._pendingRequestDisposables.get(w)||[]),this._pendingRequestDisposables.delete(w),b(C)):this._logService.warn(`RequestStore#acceptReply was called without receiving a matching request ${w}`)}};I=ve([H(1,T.ILogService)],I),e.RequestStore=I}),define(se[113],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalExitReason=e.ShellIntegrationStatus=e.ProfileSource=e.FlowControlConstants=e.LocalReconnectConstants=e.TerminalLocationString=e.TerminalLocation=e.HeartbeatConstants=e.ProcessPropertyType=e.IPtyService=e.TerminalIpcChannels=e.TitleEventSource=e.WindowsShellType=e.PosixShellType=e.TerminalLogConstants=e.TerminalSettingId=e.TerminalSettingPrefix=void 0;var i;(function(u){u.Shell="terminal.integrated.shell.",u.ShellArgs="terminal.integrated.shellArgs.",u.DefaultProfile="terminal.integrated.defaultProfile.",u.Profiles="terminal.integrated.profiles."})(i=e.TerminalSettingPrefix||(e.TerminalSettingPrefix={}));var k;(function(u){u.ShellLinux="terminal.integrated.shell.linux",u.ShellMacOs="terminal.integrated.shell.osx",u.ShellWindows="terminal.integrated.shell.windows",u.SendKeybindingsToShell="terminal.integrated.sendKeybindingsToShell",u.AutomationShellLinux="terminal.integrated.automationShell.linux",u.AutomationShellMacOs="terminal.integrated.automationShell.osx",u.AutomationShellWindows="terminal.integrated.automationShell.windows",u.AutomationProfileLinux="terminal.integrated.automationProfile.linux",u.AutomationProfileMacOs="terminal.integrated.automationProfile.osx",u.AutomationProfileWindows="terminal.integrated.automationProfile.windows",u.ShellArgsLinux="terminal.integrated.shellArgs.linux",u.ShellArgsMacOs="terminal.integrated.shellArgs.osx",u.ShellArgsWindows="terminal.integrated.shellArgs.windows",u.ProfilesWindows="terminal.integrated.profiles.windows",u.ProfilesMacOs="terminal.integrated.profiles.osx",u.ProfilesLinux="terminal.integrated.profiles.linux",u.DefaultProfileLinux="terminal.integrated.defaultProfile.linux",u.DefaultProfileMacOs="terminal.integrated.defaultProfile.osx",u.DefaultProfileWindows="terminal.integrated.defaultProfile.windows",u.UseWslProfiles="terminal.integrated.useWslProfiles",u.TabsDefaultColor="terminal.integrated.tabs.defaultColor",u.TabsDefaultIcon="terminal.integrated.tabs.defaultIcon",u.TabsEnabled="terminal.integrated.tabs.enabled",u.TabsEnableAnimation="terminal.integrated.tabs.enableAnimation",u.TabsHideCondition="terminal.integrated.tabs.hideCondition",u.TabsShowActiveTerminal="terminal.integrated.tabs.showActiveTerminal",u.TabsShowActions="terminal.integrated.tabs.showActions",u.TabsLocation="terminal.integrated.tabs.location",u.TabsFocusMode="terminal.integrated.tabs.focusMode",u.MacOptionIsMeta="terminal.integrated.macOptionIsMeta",u.MacOptionClickForcesSelection="terminal.integrated.macOptionClickForcesSelection",u.AltClickMovesCursor="terminal.integrated.altClickMovesCursor",u.CopyOnSelection="terminal.integrated.copyOnSelection",u.EnableMultiLinePasteWarning="terminal.integrated.enableMultiLinePasteWarning",u.DrawBoldTextInBrightColors="terminal.integrated.drawBoldTextInBrightColors",u.FontFamily="terminal.integrated.fontFamily",u.FontSize="terminal.integrated.fontSize",u.LetterSpacing="terminal.integrated.letterSpacing",u.LineHeight="terminal.integrated.lineHeight",u.MinimumContrastRatio="terminal.integrated.minimumContrastRatio",u.FastScrollSensitivity="terminal.integrated.fastScrollSensitivity",u.MouseWheelScrollSensitivity="terminal.integrated.mouseWheelScrollSensitivity",u.BellDuration="terminal.integrated.bellDuration",u.FontWeight="terminal.integrated.fontWeight",u.FontWeightBold="terminal.integrated.fontWeightBold",u.CursorBlinking="terminal.integrated.cursorBlinking",u.CursorStyle="terminal.integrated.cursorStyle",u.CursorWidth="terminal.integrated.cursorWidth",u.Scrollback="terminal.integrated.scrollback",u.DetectLocale="terminal.integrated.detectLocale",u.DefaultLocation="terminal.integrated.defaultLocation",u.GpuAcceleration="terminal.integrated.gpuAcceleration",u.TerminalTitleSeparator="terminal.integrated.tabs.separator",u.TerminalTitle="terminal.integrated.tabs.title",u.TerminalDescription="terminal.integrated.tabs.description",u.RightClickBehavior="terminal.integrated.rightClickBehavior",u.Cwd="terminal.integrated.cwd",u.ConfirmOnExit="terminal.integrated.confirmOnExit",u.ConfirmOnKill="terminal.integrated.confirmOnKill",u.EnableBell="terminal.integrated.enableBell",u.CommandsToSkipShell="terminal.integrated.commandsToSkipShell",u.AllowChords="terminal.integrated.allowChords",u.AllowMnemonics="terminal.integrated.allowMnemonics",u.EnvMacOs="terminal.integrated.env.osx",u.EnvLinux="terminal.integrated.env.linux",u.EnvWindows="terminal.integrated.env.windows",u.EnvironmentChangesIndicator="terminal.integrated.environmentChangesIndicator",u.EnvironmentChangesRelaunch="terminal.integrated.environmentChangesRelaunch",u.ShowExitAlert="terminal.integrated.showExitAlert",u.SplitCwd="terminal.integrated.splitCwd",u.WindowsEnableConpty="terminal.integrated.windowsEnableConpty",u.WordSeparators="terminal.integrated.wordSeparators",u.EnableFileLinks="terminal.integrated.enableFileLinks",u.UnicodeVersion="terminal.integrated.unicodeVersion",u.LocalEchoLatencyThreshold="terminal.integrated.localEchoLatencyThreshold",u.LocalEchoEnabled="terminal.integrated.localEchoEnabled",u.LocalEchoExcludePrograms="terminal.integrated.localEchoExcludePrograms",u.LocalEchoStyle="terminal.integrated.localEchoStyle",u.EnablePersistentSessions="terminal.integrated.enablePersistentSessions",u.PersistentSessionReviveProcess="terminal.integrated.persistentSessionReviveProcess",u.CustomGlyphs="terminal.integrated.customGlyphs",u.PersistentSessionScrollback="terminal.integrated.persistentSessionScrollback",u.InheritEnv="terminal.integrated.inheritEnv",u.ShowLinkHover="terminal.integrated.showLinkHover",u.IgnoreProcessNames="terminal.integrated.ignoreProcessNames",u.AutoReplies="terminal.integrated.autoReplies",u.ShellIntegrationEnabled="terminal.integrated.shellIntegration.enabled",u.ShellIntegrationShowWelcome="terminal.integrated.shellIntegration.showWelcome",u.ShellIntegrationDecorationsEnabled="terminal.integrated.shellIntegration.decorationsEnabled",u.ShellIntegrationCommandHistory="terminal.integrated.shellIntegration.history",u.SmoothScrolling="terminal.integrated.smoothScrolling"})(k=e.TerminalSettingId||(e.TerminalSettingId={}));var L;(function(u){u.FileName="ptyhost"})(L=e.TerminalLogConstants||(e.TerminalLogConstants={}));var T;(function(u){u.PowerShell="pwsh",u.Bash="bash",u.Fish="fish",u.Sh="sh",u.Csh="csh",u.Ksh="ksh",u.Zsh="zsh"})(T=e.PosixShellType||(e.PosixShellType={}));var I;(function(u){u.CommandPrompt="cmd",u.PowerShell="pwsh",u.Wsl="wsl",u.GitBash="gitbash"})(I=e.WindowsShellType||(e.WindowsShellType={}));var P;(function(u){u[u.Api=0]="Api",u[u.Process=1]="Process",u[u.Sequence=2]="Sequence",u[u.Config=3]="Config"})(P=e.TitleEventSource||(e.TitleEventSource={}));var w;(function(u){u.LocalPty="localPty",u.PtyHost="ptyHost",u.Log="log",u.Heartbeat="heartbeat"})(w=e.TerminalIpcChannels||(e.TerminalIpcChannels={})),e.IPtyService=(0,D.createDecorator)("ptyService");var C;(function(u){u.Cwd="cwd",u.InitialCwd="initialCwd",u.FixedDimensions="fixedDimensions",u.Title="title",u.ShellType="shellType",u.HasChildProcesses="hasChildProcesses",u.ResolvedShellLaunchConfig="resolvedShellLaunchConfig",u.OverrideDimensions="overrideDimensions",u.FailedShellIntegrationActivation="failedShellIntegrationActivation",u.UsedShellIntegrationInjection="usedShellIntegrationInjection"})(C=e.ProcessPropertyType||(e.ProcessPropertyType={}));var b;(function(u){u[u.BeatInterval=5e3]="BeatInterval",u[u.FirstWaitMultiplier=1.2]="FirstWaitMultiplier",u[u.SecondWaitMultiplier=1]="SecondWaitMultiplier",u[u.CreateProcessTimeout=5e3]="CreateProcessTimeout"})(b=e.HeartbeatConstants||(e.HeartbeatConstants={}));var p;(function(u){u[u.Panel=1]="Panel",u[u.Editor=2]="Editor"})(p=e.TerminalLocation||(e.TerminalLocation={}));var S;(function(u){u.TerminalView="view",u.Editor="editor"})(S=e.TerminalLocationString||(e.TerminalLocationString={}));var f;(function(u){u[u.GraceTime=6e4]="GraceTime",u[u.ShortGraceTime=6e3]="ShortGraceTime"})(f=e.LocalReconnectConstants||(e.LocalReconnectConstants={}));var g;(function(u){u[u.HighWatermarkChars=1e5]="HighWatermarkChars",u[u.LowWatermarkChars=5e3]="LowWatermarkChars",u[u.CharCountAckSize=5e3]="CharCountAckSize"})(g=e.FlowControlConstants||(e.FlowControlConstants={}));var y;(function(u){u.GitBash="Git Bash",u.Pwsh="PowerShell"})(y=e.ProfileSource||(e.ProfileSource={}));var l;(function(u){u[u.Off=0]="Off",u[u.FinalTerm=1]="FinalTerm",u[u.VSCode=2]="VSCode"})(l=e.ShellIntegrationStatus||(e.ShellIntegrationStatus={}));var m;(function(u){u[u.Unknown=0]="Unknown",u[u.Shutdown=1]="Shutdown",u[u.Process=2]="Process",u[u.User=3]="User",u[u.Extension=4]="Extension"})(m=e.TerminalExitReason||(e.TerminalExitReason={}))}),define(se[241],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ILocalPtyService=void 0,e.ILocalPtyService=(0,D.createDecorator)("localPtyService")}),define(se[242],oe([0,1,34,21,32,12,5,36,27,14,28]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shellIntegrationArgs=e.ShellIntegrationExecutable=e.getShellIntegrationInjection=e.findExecutable=e.getWindowsBuildNumber=void 0;function b(){const h=/(\d+)\.(\d+)\.(\d+)/g.exec(D.release());let d=0;return h&&h.length===4&&(d=parseInt(h[3])),d}e.getWindowsBuildNumber=b;async function p(h,d,n,o=I.env,t=C.Promises.exists){if(L.isAbsolute(h))return await t(h)?h:void 0;if(d===void 0&&(d=I.cwd()),L.dirname(h)!=="."){const a=L.join(d,h);return await t(a)?a:void 0}const r=(0,k.getCaseInsensitive)(o,"PATH");if(n===void 0&&(0,w.isString)(r)&&(n=r.split(L.delimiter)),n===void 0||n.length===0){const a=L.join(d,h);return await t(a)?a:void 0}for(const a of n){let v;if(L.isAbsolute(a)?v=L.join(a,h):v=L.join(d,a,h),await t(v))return v;if(T.isWindows){let E=v+".com";if(await t(E)||(E=v+".exe",await t(E)))return E}}const c=L.join(d,h);return await t(c)?c:void 0}e.findExecutable=p;function S(h,d,n,o,t){if(!d.shellIntegration.enabled||!h.executable||h.isFeatureTerminal||h.hideFromUser||h.ignoreShellIntegration||T.isWindows&&!d.windowsEnableConpty)return;const s=h.args,r=I.platform==="win32"?L.basename(h.executable).toLowerCase():L.basename(h.executable),c=L.dirname(i.FileAccess.asFileUri("").fsPath);let a;const v={VSCODE_INJECTION:"1"};if(T.isWindows){if(r==="pwsh.exe"||r==="powershell.exe")return!s||m(s)?a=e.shellIntegrationArgs.get(f.WindowsPwsh):l(s)&&(a=e.shellIntegrationArgs.get(f.WindowsPwshLogin)),a?(a=[...a],a[a.length-1]=(0,P.format)(a[a.length-1],c,""),{newArgs:a,envMixin:v}):void 0;o.warn(`Shell integration cannot be enabled for executable "${h.executable}" and args`,h.args);return}switch(r){case"bash":return!s||s.length===0?a=e.shellIntegrationArgs.get(f.Bash):u(s)&&(v.VSCODE_SHELL_LOGIN="1",a=e.shellIntegrationArgs.get(f.Bash)),a?(a=[...a],a[a.length-1]=(0,P.format)(a[a.length-1],c),{newArgs:a,envMixin:v}):void 0;case"pwsh":return!s||m(s)?a=e.shellIntegrationArgs.get(f.Pwsh):l(s)&&(a=e.shellIntegrationArgs.get(f.PwshLogin)),a?(a=[...a],a[a.length-1]=(0,P.format)(a[a.length-1],c,""),{newArgs:a,envMixin:v}):void 0;case"zsh":{if(!s||s.length===0?a=e.shellIntegrationArgs.get(f.Zsh):u(s)?a=e.shellIntegrationArgs.get(f.ZshLogin):(s===e.shellIntegrationArgs.get(f.Zsh)||s===e.shellIntegrationArgs.get(f.ZshLogin))&&(a=s),!a)return;a=[...a],a[a.length-1]=(0,P.format)(a[a.length-1],c);const E=L.join(D.tmpdir(),`${D.userInfo().username}-${t.applicationName}-zsh`);v.ZDOTDIR=E;const R=n?.ZDOTDIR??D.homedir()??"~";v.USER_ZDOTDIR=R;const N=[];return N.push({source:L.join(c,"out/vs/workbench/contrib/terminal/browser/media/shellIntegration-rc.zsh"),dest:L.join(E,".zshrc")}),N.push({source:L.join(c,"out/vs/workbench/contrib/terminal/browser/media/shellIntegration-profile.zsh"),dest:L.join(E,".zprofile")}),N.push({source:L.join(c,"out/vs/workbench/contrib/terminal/browser/media/shellIntegration-env.zsh"),dest:L.join(E,".zshenv")}),N.push({source:L.join(c,"out/vs/workbench/contrib/terminal/browser/media/shellIntegration-login.zsh"),dest:L.join(E,".zlogin")}),{newArgs:a,envMixin:v,filesToCopy:N}}}o.warn(`Shell integration cannot be enabled for executable "${h.executable}" and args`,h.args)}e.getShellIntegrationInjection=S;var f;(function(h){h.WindowsPwsh="windows-pwsh",h.WindowsPwshLogin="windows-pwsh-login",h.Pwsh="pwsh",h.PwshLogin="pwsh-login",h.Zsh="zsh",h.ZshLogin="zsh-login",h.Bash="bash"})(f=e.ShellIntegrationExecutable||(e.ShellIntegrationExecutable={})),e.shellIntegrationArgs=new Map,e.shellIntegrationArgs.set(f.WindowsPwsh,["-noexit","-command",'try { . "{0}\\out\\vs\\workbench\\contrib\\terminal\\browser\\media\\shellIntegration.ps1" } catch {}{1}']),e.shellIntegrationArgs.set(f.WindowsPwshLogin,["-l","-noexit","-command",'try { . "{0}\\out\\vs\\workbench\\contrib\\terminal\\browser\\media\\shellIntegration.ps1" } catch {}{1}']),e.shellIntegrationArgs.set(f.Pwsh,["-noexit","-command",'. "{0}/out/vs/workbench/contrib/terminal/browser/media/shellIntegration.ps1"{1}']),e.shellIntegrationArgs.set(f.PwshLogin,["-l","-noexit","-command",'. "{0}/out/vs/workbench/contrib/terminal/browser/media/shellIntegration.ps1"']),e.shellIntegrationArgs.set(f.Zsh,["-i"]),e.shellIntegrationArgs.set(f.ZshLogin,["-il"]),e.shellIntegrationArgs.set(f.Bash,["--init-file","{0}/out/vs/workbench/contrib/terminal/browser/media/shellIntegration-bash.sh"]);const g=["-login","-l"],y=["-nol","-nologo"];function l(h){return typeof h=="string"?g.includes(h.toLowerCase()):h.length===1&&g.includes(h[0].toLowerCase())||h.length===2&&(g.includes(h[0].toLowerCase())||g.includes(h[1].toLowerCase()))&&(y.includes(h[0].toLowerCase())||y.includes(h[1].toLowerCase()))}function m(h){return typeof h=="string"?y.includes(h.toLowerCase()):h.length===0||h?.length===1&&y.includes(h[0].toLowerCase())}function u(h){return h==="string"&&g.includes(h.toLowerCase())||typeof h!="string"&&h.length===1&&g.includes(h[0].toLowerCase())}}),define(se[243],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDark=e.isHighContrast=e.ColorScheme=void 0;var D;(function(L){L.DARK="dark",L.LIGHT="light",L.HIGH_CONTRAST_DARK="hcDark",L.HIGH_CONTRAST_LIGHT="hcLight"})(D=e.ColorScheme||(e.ColorScheme={}));function i(L){return L===D.HIGH_CONTRAST_DARK||L===D.HIGH_CONTRAST_LIGHT}e.isHighContrast=i;function k(L){return L===D.DARK||L===D.HIGH_CONTRAST_DARK}e.isDark=k}),define(se[114],oe([0,1,51,3,2,4,40,243]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Themable=e.registerThemingParticipant=e.Extensions=e.getThemeTypeSelector=e.FolderThemeIcon=e.FileThemeIcon=e.ThemeIcon=e.themeColorFromId=e.ThemeColor=e.IThemeService=void 0,e.IThemeService=(0,L.createDecorator)("themeService");var P;(function(y){function l(m){return m&&typeof m=="object"&&typeof m.id=="string"}y.isThemeColor=l})(P=e.ThemeColor||(e.ThemeColor={}));function w(y){return{id:y}}e.themeColorFromId=w;var C;(function(y){function l(s){return s&&typeof s=="object"&&typeof s.id=="string"&&(typeof s.color>"u"||P.isThemeColor(s.color))}y.isThemeIcon=l;const m=new RegExp(`^\\$\\((${D.CSSIcon.iconNameExpression}(?:${D.CSSIcon.iconModifierExpression})?)\\)$`);function u(s){const r=m.exec(s);if(!r)return;const[,c]=r;return{id:c}}y.fromString=u;function h(s){return{id:s}}y.fromId=h;function d(s,r){let c=s.id;const a=c.lastIndexOf("~");return a!==-1&&(c=c.substring(0,a)),r&&(c=`${c}~${r}`),{id:c}}y.modify=d;function n(s){const r=s.id.lastIndexOf("~");if(r!==-1)return s.id.substring(r+1)}y.getModifier=n;function o(s,r){return s.id===r.id&&s.color?.id===r.color?.id}y.isEqual=o;function t(s,r){return{id:s.id,color:r?w(r):void 0}}y.asThemeIcon=t,y.asClassNameArray=D.CSSIcon.asClassNameArray,y.asClassName=D.CSSIcon.asClassName,y.asCSSSelector=D.CSSIcon.asCSSSelector})(C=e.ThemeIcon||(e.ThemeIcon={})),e.FileThemeIcon=D.Codicon.file,e.FolderThemeIcon=D.Codicon.folder;function b(y){switch(y){case I.ColorScheme.DARK:return"vs-dark";case I.ColorScheme.HIGH_CONTRAST_DARK:return"hc-black";case I.ColorScheme.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}e.getThemeTypeSelector=b,e.Extensions={ThemingContribution:"base.contributions.theming"};class p{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new i.Emitter}onColorThemeChange(l){return this.themingParticipants.push(l),this.onThemingParticipantAddedEmitter.fire(l),(0,k.toDisposable)(()=>{const m=this.themingParticipants.indexOf(l);this.themingParticipants.splice(m,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}}const S=new p;T.Registry.add(e.Extensions.ThemingContribution,S);function f(y){return S.onColorThemeChange(y)}e.registerThemingParticipant=f;class g extends k.Disposable{constructor(l){super(),this.themeService=l,this.theme=l.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(m=>this.onThemeChange(m)))}onThemeChange(l){this.theme=l,this.updateStyles()}updateStyles(){}getColor(l,m){let u=this.theme.getColor(l);return u&&m&&(u=m(u,this.theme)),u?u.toString():null}}e.Themable=g}),define(se[244],oe([0,1,51,7,173,114]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUriComponents=e.terminalIconsEqual=e.terminalProfileArgsMatch=e.createProfileSchemaEnums=void 0;function T(p,S){const f=[{name:null,description:(0,k.localize)(0,null)}];return f.push(...p.map(g=>({name:g.profileName,description:I(g)}))),S&&f.push(...S.map(g=>({name:g.title,description:P(g)}))),{values:f.map(g=>g.name),markdownDescriptions:f.map(g=>g.description)}}e.createProfileSchemaEnums=T;function I(p){let S=`$(${L.ThemeIcon.isThemeIcon(p.icon)?p.icon.id:p.icon?p.icon:D.Codicon.terminal.id}) ${p.profileName}
- path: ${p.path}`;return p.args&&(typeof p.args=="string"?S+=`
- args: "${p.args}"`:S+=`
- args: [${p.args.length===0?"":`'${p.args.join("','")}'`}]`),p.overrideName!==void 0&&(S+=`
- overrideName: ${p.overrideName}`),p.color&&(S+=`
- color: ${p.color}`),p.env&&(S+=`
- env: ${JSON.stringify(p.env)}`),S}function P(p){return`$(${L.ThemeIcon.isThemeIcon(p.icon)?p.icon.id:p.icon?p.icon:D.Codicon.terminal.id}) ${p.title}
- extensionIdentifier: ${p.extensionIdentifier}`}function w(p,S){if(!p&&!S)return!0;if(typeof p=="string"&&typeof S=="string")return p===S;if(Array.isArray(p)&&Array.isArray(S)){if(p.length!==S.length)return!1;for(let f=0;f<p.length;f++)if(p[f]!==S[f])return!1;return!0}return!1}e.terminalProfileArgsMatch=w;function C(p,S){if(!p&&!S)return!0;if(!p||!S)return!1;if(L.ThemeIcon.isThemeIcon(p)&&L.ThemeIcon.isThemeIcon(S))return p.id===S.id&&p.color===S.color;if(typeof p=="object"&&"light"in p&&"dark"in p&&typeof S=="object"&&"light"in S&&"dark"in S){const f=p,g=S;if((i.URI.isUri(f.light)||b(f.light))&&(i.URI.isUri(f.dark)||b(f.dark))&&(i.URI.isUri(g.light)||b(g.light))&&(i.URI.isUri(g.dark)||b(g.dark)))return f.light.path===g.light.path&&f.dark.path===g.dark.path}if(i.URI.isUri(p)&&i.URI.isUri(S)||b(p)||b(S)){const f=p,g=S;return f.path===g.path&&f.scheme===g.scheme}return!1}e.terminalIconsEqual=C;function b(p){return p?typeof p.path=="string"&&typeof p.scheme=="string":!1}e.isUriComponents=b}),define(se[245],oe([0,1,51,172,46,40,244]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerTerminalDefaultProfileConfiguration=e.registerTerminalPlatformConfiguration=e.terminalIconSchema=e.terminalColorSchema=void 0,e.terminalColorSchema={type:["string","null"],enum:["terminal.ansiBlack","terminal.ansiRed","terminal.ansiGreen","terminal.ansiYellow","terminal.ansiBlue","terminal.ansiMagenta","terminal.ansiCyan","terminal.ansiWhite"],default:null},e.terminalIconSchema={type:"string",enum:Array.from(D.Codicon.getAll(),h=>h.id),markdownEnumDescriptions:Array.from(D.Codicon.getAll(),h=>`$(${h.id})`)};const I={args:{description:(0,i.localize)(0,null),type:"array",items:{type:"string"}},overrideName:{description:(0,i.localize)(1,null),type:"boolean"},icon:{description:(0,i.localize)(2,null),...e.terminalIconSchema},color:{description:(0,i.localize)(3,null),...e.terminalColorSchema},env:{markdownDescription:(0,i.localize)(4,null),type:"object",additionalProperties:{type:["string","null"]},default:{}}},P={type:"object",required:["path"],properties:{path:{description:(0,i.localize)(5,null),type:["string","array"],items:{type:"string"}},...I}},w={type:"object",required:["path"],properties:{path:{description:(0,i.localize)(6,null),type:["string"],items:{type:"string"}},...I}},C=(0,i.localize)(7,null,"`#terminal.integrated.profiles.linux#`","`#terminal.integrated.defaultProfile.linux#`"),b=(0,i.localize)(8,null,"`#terminal.integrated.profiles.osx#`","`#terminal.integrated.defaultProfile.osx#`"),p=(0,i.localize)(9,null,"`#terminal.integrated.profiles.windows#`","`#terminal.integrated.defaultProfile.windows#`"),S=(0,i.localize)(10,null,"`#terminal.integrated.automationProfile.linux#`"),f=(0,i.localize)(11,null,"`#terminal.integrated.automationProfile.osx#`"),g=(0,i.localize)(12,null,"`#terminal.integrated.automationProfile.windows#`"),y={id:"terminal",order:100,title:(0,i.localize)(13,null),type:"object",properties:{["terminal.integrated.automationShell.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(14,null,"`terminal.integrated.shell.linux`","`shellArgs`"),type:["string","null"],default:null,markdownDeprecationMessage:S},["terminal.integrated.automationShell.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(15,null,"`terminal.integrated.shell.osx`","`shellArgs`"),type:["string","null"],default:null,markdownDeprecationMessage:f},["terminal.integrated.automationShell.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(16,null,"`terminal.integrated.shell.windows`","`shellArgs`"),type:["string","null"],default:null,markdownDeprecationMessage:g},["terminal.integrated.automationProfile.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(17,null,"`terminal.integrated.automationShell.linux`"),type:["object","null"],default:null,anyOf:[{type:"null"},w],defaultSnippets:[{body:{path:"${1}",icon:"${2}"}}]},["terminal.integrated.automationProfile.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(18,null,"`terminal.integrated.automationShell.osx`"),type:["object","null"],default:null,anyOf:[{type:"null"},w],defaultSnippets:[{body:{path:"${1}",icon:"${2}"}}]},["terminal.integrated.automationProfile.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(19,null,"`terminal.integrated.automationShell.windows`"),type:["object","null"],default:null,anyOf:[{type:"null"},w],defaultSnippets:[{body:{path:"${1}",icon:"${2}"}}]},["terminal.integrated.shell.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(20,null),type:["string","null"],default:null,markdownDeprecationMessage:C},["terminal.integrated.shell.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(21,null),type:["string","null"],default:null,markdownDeprecationMessage:b},["terminal.integrated.shell.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(22,null),type:["string","null"],default:null,markdownDeprecationMessage:p},["terminal.integrated.shellArgs.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(23,null),type:"array",items:{type:"string"},default:[],markdownDeprecationMessage:C},["terminal.integrated.shellArgs.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(24,null),type:"array",items:{type:"string"},default:["-l"],markdownDeprecationMessage:b},["terminal.integrated.shellArgs.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(25,null),anyOf:[{type:"array",items:{type:"string",markdownDescription:(0,i.localize)(26,null)}},{type:"string",markdownDescription:(0,i.localize)(27,null)}],default:[],markdownDeprecationMessage:p},["terminal.integrated.profiles.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(28,null,"`source`","`path`","`args`","`null`",'`"Ubuntu-20.04 (WSL)": null`'),type:"object",default:{PowerShell:{source:"PowerShell",icon:"terminal-powershell"},"Command Prompt":{path:["${env:windir}\\Sysnative\\cmd.exe","${env:windir}\\System32\\cmd.exe"],args:[],icon:"terminal-cmd"},"Git Bash":{source:"Git Bash"}},additionalProperties:{anyOf:[{type:"object",required:["source"],properties:{source:{description:(0,i.localize)(29,null),enum:["PowerShell","Git Bash"]},...I}},{type:"object",required:["extensionIdentifier","id","title"],properties:{extensionIdentifier:{description:(0,i.localize)(30,null),type:"string"},id:{description:(0,i.localize)(31,null),type:"string"},title:{description:(0,i.localize)(32,null),type:"string"},...I}},{type:"null"},P]}},["terminal.integrated.profiles.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(33,null,"`path`","`args`","`null`",'`"bash": null`'),type:"object",default:{bash:{path:"bash",args:["-l"],icon:"terminal-bash"},zsh:{path:"zsh",args:["-l"]},fish:{path:"fish",args:["-l"]},tmux:{path:"tmux",icon:"terminal-tmux"},pwsh:{path:"pwsh",icon:"terminal-powershell"}},additionalProperties:{anyOf:[{type:"object",required:["extensionIdentifier","id","title"],properties:{extensionIdentifier:{description:(0,i.localize)(34,null),type:"string"},id:{description:(0,i.localize)(35,null),type:"string"},title:{description:(0,i.localize)(36,null),type:"string"},...I}},{type:"null"},P]}},["terminal.integrated.profiles.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(37,null,"`path`","`args`","`null`",'`"bash": null`'),type:"object",default:{bash:{path:"bash",icon:"terminal-bash"},zsh:{path:"zsh"},fish:{path:"fish"},tmux:{path:"tmux",icon:"terminal-tmux"},pwsh:{path:"pwsh",icon:"terminal-powershell"}},additionalProperties:{anyOf:[{type:"object",required:["extensionIdentifier","id","title"],properties:{extensionIdentifier:{description:(0,i.localize)(38,null),type:"string"},id:{description:(0,i.localize)(39,null),type:"string"},title:{description:(0,i.localize)(40,null),type:"string"},...I}},{type:"null"},P]}},["terminal.integrated.useWslProfiles"]:{description:(0,i.localize)(41,null),type:"boolean",default:!0},["terminal.integrated.inheritEnv"]:{scope:1,description:(0,i.localize)(42,null),type:"boolean",default:!0},["terminal.integrated.persistentSessionScrollback"]:{scope:1,markdownDescription:(0,i.localize)(43,null),type:"number",default:100},["terminal.integrated.showLinkHover"]:{scope:1,description:(0,i.localize)(44,null),type:"boolean",default:!0},["terminal.integrated.ignoreProcessNames"]:{description:(0,i.localize)(45,null,"`terminal.integrated.confirmOnKill`"),type:"array",items:{type:"string",uniqueItems:!0},default:["starship","oh-my-posh","bash","zsh"]}}};function l(){L.Registry.as(k.Extensions.Configuration).registerConfiguration(y),u()}e.registerTerminalPlatformConfiguration=l;let m;function u(h,d){const n=L.Registry.as(k.Extensions.Configuration);let o;h&&(o=(0,T.createProfileSchemaEnums)(h?.profiles,d));const t=m;m={id:"terminal",order:100,title:(0,i.localize)(46,null),type:"object",properties:{["terminal.integrated.defaultProfile.linux"]:{restricted:!0,markdownDescription:(0,i.localize)(47,null,"`terminal.integrated.shell.linux`","`terminal.integrated.shellArgs.linux`"),type:["string","null"],default:null,enum:h?.os===3?o?.values:void 0,markdownEnumDescriptions:h?.os===3?o?.markdownDescriptions:void 0},["terminal.integrated.defaultProfile.osx"]:{restricted:!0,markdownDescription:(0,i.localize)(48,null,"`terminal.integrated.shell.osx`","`terminal.integrated.shellArgs.osx`"),type:["string","null"],default:null,enum:h?.os===2?o?.values:void 0,markdownEnumDescriptions:h?.os===2?o?.markdownDescriptions:void 0},["terminal.integrated.defaultProfile.windows"]:{restricted:!0,markdownDescription:(0,i.localize)(49,null,"`terminal.integrated.shell.windows`","`terminal.integrated.shellArgs.windows`"),type:["string","null"],default:null,enum:h?.os===1?o?.values:void 0,markdownEnumDescriptions:h?.os===1?o?.markdownDescriptions:void 0}}},n.updateConfigurations({add:[m],remove:t?[t]:[]})}e.registerTerminalDefaultProfileConfiguration=u}),define(se[246],oe([0,1,49,51,12,5,28,90,242,114]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectAvailableProfiles=void 0;let C,b=!0;function p(o,t,s,r,c=process.env,a,v,E,R){return a=a||{existsFile:T.SymlinkSupport.existsFile,readFile:T.Promises.readFile},L.isWindows?S(s,a,c,v,r.getValue("terminal.integrated.useWslProfiles")!==!1,o&&typeof o=="object"?{...o}:r.getValue("terminal.integrated.profiles.windows"),typeof t=="string"?t:r.getValue("terminal.integrated.defaultProfile.windows"),R,E):h(a,v,s,o&&typeof o=="object"?{...o}:r.getValue(L.isLinux?"terminal.integrated.profiles.linux":"terminal.integrated.profiles.osx"),typeof t=="string"?t:r.getValue(L.isLinux?"terminal.integrated.defaultProfile.linux":"terminal.integrated.defaultProfile.osx"),R,E,c)}e.detectAvailableProfiles=p;async function S(o,t,s,r,c,a,v,E,R){const N=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),O=`${process.env.windir}\\${N?"Sysnative":"System32"}`;let z=!1;(0,P.getWindowsBuildNumber)()>=16299&&(z=!0),await y(E);const F=new Map;o&&(F.set("PowerShell",{source:"PowerShell",icon:i.Codicon.terminalPowershell,isAutoDetected:!0}),F.set("Windows PowerShell",{path:`${O}\\WindowsPowerShell\\v1.0\\powershell.exe`,icon:i.Codicon.terminalPowershell,isAutoDetected:!0}),F.set("Git Bash",{source:"Git Bash",isAutoDetected:!0}),F.set("Command Prompt",{path:`${O}\\cmd.exe`,icon:i.Codicon.terminalCmd,isAutoDetected:!0})),d(a,F);const A=await f(F.entries(),v,t,s,r,R);if(o||c)try{const M=await m(`${O}\\${z?"wsl":"bash"}.exe`,v);for(const $ of M)(!a||!($.profileName in a))&&A.push($)}catch{b&&(r?.info("WSL is not installed, so could not detect WSL profiles"),b=!1)}return A}async function f(o,t,s,r=process.env,c,a){const v=[];for(const[E,R]of o){if(R===null)continue;let N,O,z;if("source"in R){const M=C?.get(R.source);if(!M)continue;N=M.paths,O=R.args||M.args,R.icon?z=g(R.icon):M.icon&&(z=M.icon)}else N=Array.isArray(R.path)?R.path:[R.path],O=L.isWindows||Array.isArray(R.args)?R.args:void 0,z=g(R.icon);const F=await a?.(N)||N.slice(),A=await n(E,t,F,s,r,O,R.env,R.overrideName,R.isAutoDetected,c);A?(A.isAutoDetected=R.isAutoDetected,A.icon=z,A.color=R.color,v.push(A)):c?.debug("Terminal profile not validated",E,N)}return c?.debug("Validated terminal profiles",v),v}function g(o){return typeof o=="string"?{id:o}:o}async function y(o){C&&!o||(C=new Map,C.set("Git Bash",{profileName:"Git Bash",paths:[`${process.env.ProgramW6432}\\Git\\bin\\bash.exe`,`${process.env.ProgramW6432}\\Git\\usr\\bin\\bash.exe`,`${process.env.ProgramFiles}\\Git\\bin\\bash.exe`,`${process.env.ProgramFiles}\\Git\\usr\\bin\\bash.exe`,`${process.env["ProgramFiles(X86)"]}\\Git\\bin\\bash.exe`,`${process.env["ProgramFiles(X86)"]}\\Git\\usr\\bin\\bash.exe`,`${process.env.LocalAppData}\\Programs\\Git\\bin\\bash.exe`,`${process.env.UserProfile}\\scoop\\apps\\git-with-openssh\\current\\bin\\bash.exe`],args:["--login","-i"]}),C.set("PowerShell",{profileName:"PowerShell",paths:o||await l(),icon:w.ThemeIcon.asThemeIcon(i.Codicon.terminalPowershell)}))}async function l(){const o=[];for await(const t of(0,I.enumeratePowerShellInstallations)())o.push(t.exePath);return o}async function m(o,t){const s=[],r=await new Promise((v,E)=>{D.exec("wsl.exe -l -q",{encoding:"utf16le",timeout:1e3},(R,N)=>{if(R)return E("Problem occurred when getting wsl distros");v(N)})});if(!r)return[];const c=new RegExp(/[\r?\n]/),a=r.split(c).filter(v=>v.trim().length>0&&v!=="");for(const v of a){if(v===""||v.startsWith("docker-desktop"))continue;const E=`${v} (WSL)`,R={profileName:E,path:o,args:["-d",`${v}`],isDefault:E===t,icon:u(v),isAutoDetected:!1};s.push(R)}return s}function u(o){return o.includes("Ubuntu")?w.ThemeIcon.asThemeIcon(i.Codicon.terminalUbuntu):o.includes("Debian")?w.ThemeIcon.asThemeIcon(i.Codicon.terminalDebian):w.ThemeIcon.asThemeIcon(i.Codicon.terminalLinux)}async function h(o,t,s,r,c,a,v,E){const R=new Map;if(s){const N=(await o.readFile("/etc/shells")).toString(),O=a||N.split(`
`).filter(F=>F.trim().indexOf("#")!==0&&F.trim().length>0),z=new Map;for(const F of O){let A=(0,k.basename)(F),M=z.get(A)||0;M++,M>1&&(A=`${A} (${M})`),z.set(A,M),R.set(A,{path:F,isAutoDetected:!0})}}return d(r,R),await f(R.entries(),c,o,E,t,v)}function d(o,t){if(!!o)for(const[s,r]of Object.entries(o))r===null||!("path"in r)&&!("source"in r)?t.delete(s):(r.icon=r.icon||t.get(s)?.icon,t.set(s,r))}async function n(o,t,s,r,c,a,v,E,R,N){if(s.length===0)return Promise.resolve(void 0);const O=s.shift();if(O==="")return n(o,t,s,r,c,a,v,E,R);const z={profileName:o,path:O,args:a,env:v,overrideName:E,isAutoDetected:R,isDefault:o===t};if((0,k.basename)(O)===O){const A=c.PATH?c.PATH.split(k.delimiter):void 0,M=await(0,P.findExecutable)(O,void 0,A,void 0,r.existsFile);return M?(z.path=M,z.isFromPath=!0,z):n(o,t,s,r,c,a)}return await r.existsFile((0,k.normalize)(O))?z:n(o,t,s,r,c,a,v,E,R)}}),define(se[247],oe([0,1,3,2,21,5,39,68,16,15,94,232,8,103,240,113,245,246]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PtyHostService=void 0;var m;(function(d){d[d.MaxRestarts=5]="MaxRestarts"})(m||(m={}));let u=0,h=class extends i.Disposable{constructor(n,o,t,s){super(),this._reconnectConstants=n,this._configurationService=o,this._environmentService=t,this._logService=s,this._restartCount=0,this._isResponsive=!0,this._isDisposed=!1,this._onPtyHostExit=this._register(new D.Emitter),this.onPtyHostExit=this._onPtyHostExit.event,this._onPtyHostStart=this._register(new D.Emitter),this.onPtyHostStart=this._onPtyHostStart.event,this._onPtyHostUnresponsive=this._register(new D.Emitter),this.onPtyHostUnresponsive=this._onPtyHostUnresponsive.event,this._onPtyHostResponsive=this._register(new D.Emitter),this.onPtyHostResponsive=this._onPtyHostResponsive.event,this._onPtyHostRequestResolveVariables=this._register(new D.Emitter),this.onPtyHostRequestResolveVariables=this._onPtyHostRequestResolveVariables.event,this._onProcessData=this._register(new D.Emitter),this.onProcessData=this._onProcessData.event,this._onProcessReady=this._register(new D.Emitter),this.onProcessReady=this._onProcessReady.event,this._onProcessReplay=this._register(new D.Emitter),this.onProcessReplay=this._onProcessReplay.event,this._onProcessOrphanQuestion=this._register(new D.Emitter),this.onProcessOrphanQuestion=this._onProcessOrphanQuestion.event,this._onDidRequestDetach=this._register(new D.Emitter),this.onDidRequestDetach=this._onDidRequestDetach.event,this._onDidChangeProperty=this._register(new D.Emitter),this.onDidChangeProperty=this._onDidChangeProperty.event,this._onProcessExit=this._register(new D.Emitter),this.onProcessExit=this._onProcessExit.event,(0,y.registerTerminalPlatformConfiguration)(),this._shellEnv=this._resolveShellEnv(),this._register((0,i.toDisposable)(()=>this._disposePtyHost())),this._resolveVariablesRequestStore=this._register(new f.RequestStore(void 0,this._logService)),this._resolveVariablesRequestStore.onCreateRequest(this._onPtyHostRequestResolveVariables.fire,this._onPtyHostRequestResolveVariables),[this._client,this._proxy]=this._startPtyHost(),this._register(this._configurationService.onDidChangeConfiguration(async r=>{r.affectsConfiguration("terminal.integrated.ignoreProcessNames")&&await this._refreshIgnoreProcessNames()}))}initialize(){this._refreshIgnoreProcessNames()}get _ignoreProcessNames(){return this._configurationService.getValue("terminal.integrated.ignoreProcessNames")}async _refreshIgnoreProcessNames(){return this._proxy.refreshIgnoreProcessNames?.(this._ignoreProcessNames)}async _resolveShellEnv(){if(L.isWindows)return process.env;try{return await(0,b.getResolvedShellEnv)(this._logService,{_:[]},process.env)}catch(n){return this._logService.error("ptyHost was unable to resolve shell environment",n),{}}}_startPtyHost(){const n={serverName:"Pty Host",args:["--type=ptyHost","--logsPath",this._environmentService.logsPath],env:{VSCODE_LAST_PTY_ID:u,VSCODE_AMD_ENTRYPOINT:"vs/platform/terminal/node/ptyHostMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true",VSCODE_RECONNECT_GRACE_TIME:this._reconnectConstants.graceTime,VSCODE_RECONNECT_SHORT_GRACE_TIME:this._reconnectConstants.shortGraceTime,VSCODE_RECONNECT_SCROLLBACK:this._reconnectConstants.scrollback}},o=(0,C.parsePtyHostPort)(this._environmentService.args,this._environmentService.isBuilt);o&&(o.break&&o.port?n.debugBrk=o.port:!o.break&&o.port&&(n.debug=o.port));const t=new I.Client(k.FileAccess.asFileUri("bootstrap-fork").fsPath,n);this._onPtyHostStart.fire(),T.ProxyChannel.toService(t.getChannel(g.TerminalIpcChannels.Heartbeat)).onBeat(()=>this._handleHeartbeat()),this._handleHeartbeat(),this._register(t.onDidProcessExit(a=>{this._onPtyHostExit.fire(a.code),this._isDisposed||(this._restartCount<=m.MaxRestarts?(this._logService.error(`ptyHost terminated unexpectedly with code ${a.code}`),this._restartCount++,this.restartPtyHost()):this._logService.error(`ptyHost terminated unexpectedly with code ${a.code}, giving up`))}));const r=t.getChannel(g.TerminalIpcChannels.Log);S.LogLevelChannelClient.setLevel(r,this._logService.getLevel()),this._register(this._logService.onDidChangeLogLevel(()=>{S.LogLevelChannelClient.setLevel(r,this._logService.getLevel())}));const c=T.ProxyChannel.toService(t.getChannel(g.TerminalIpcChannels.PtyHost));return this._register(c.onProcessData(a=>this._onProcessData.fire(a))),this._register(c.onProcessReady(a=>this._onProcessReady.fire(a))),this._register(c.onProcessExit(a=>this._onProcessExit.fire(a))),this._register(c.onDidChangeProperty(a=>this._onDidChangeProperty.fire(a))),this._register(c.onProcessReplay(a=>this._onProcessReplay.fire(a))),this._register(c.onProcessOrphanQuestion(a=>this._onProcessOrphanQuestion.fire(a))),this._register(c.onDidRequestDetach(a=>this._onDidRequestDetach.fire(a))),[t,c]}dispose(){this._isDisposed=!0,super.dispose()}async createProcess(n,o,t,s,r,c,a,v,E,R,N){const O=setTimeout(()=>this._handleUnresponsiveCreateProcess(),g.HeartbeatConstants.CreateProcessTimeout),z=await this._proxy.createProcess(n,o,t,s,r,c,a,v,E,R,N);return clearTimeout(O),u=Math.max(u,z),z}updateTitle(n,o,t){return this._proxy.updateTitle(n,o,t)}updateIcon(n,o,t,s){return this._proxy.updateIcon(n,o,t,s)}attachToProcess(n){return this._proxy.attachToProcess(n)}detachFromProcess(n,o){return this._proxy.detachFromProcess(n,o)}listProcesses(){return this._proxy.listProcesses()}reduceConnectionGraceTime(){return this._proxy.reduceConnectionGraceTime()}start(n){return this._proxy.start(n)}shutdown(n,o){return this._proxy.shutdown(n,o)}input(n,o){return this._proxy.input(n,o)}processBinary(n,o){return this._proxy.processBinary(n,o)}resize(n,o,t){return this._proxy.resize(n,o,t)}acknowledgeDataEvent(n,o){return this._proxy.acknowledgeDataEvent(n,o)}setUnicodeVersion(n,o){return this._proxy.setUnicodeVersion(n,o)}getInitialCwd(n){return this._proxy.getInitialCwd(n)}getCwd(n){return this._proxy.getCwd(n)}getLatency(n){return this._proxy.getLatency(n)}orphanQuestionReply(n){return this._proxy.orphanQuestionReply(n)}installAutoReply(n,o){return this._proxy.installAutoReply(n,o)}uninstallAllAutoReplies(){return this._proxy.uninstallAllAutoReplies()}uninstallAutoReply(n){return this._proxy.uninstallAutoReply(n)}getDefaultSystemShell(n){return this._proxy.getDefaultSystemShell(n)}async getProfiles(n,o,t,s=!1){const r=await this._shellEnv;return(0,l.detectAvailableProfiles)(o,t,s,this._configurationService,r,void 0,this._logService,this._resolveVariables.bind(this,n))}getEnvironment(){return this._proxy.getEnvironment()}getWslPath(n){return this._proxy.getWslPath(n)}getRevivedPtyNewId(n){return this._proxy.getRevivedPtyNewId(n)}setTerminalLayoutInfo(n){return this._proxy.setTerminalLayoutInfo(n)}async getTerminalLayoutInfo(n){return await this._proxy.getTerminalLayoutInfo(n)}async requestDetachInstance(n,o){return this._proxy.requestDetachInstance(n,o)}async acceptDetachInstanceReply(n,o){return this._proxy.acceptDetachInstanceReply(n,o)}async freePortKillProcess(n){if(!this._proxy.freePortKillProcess)throw new Error("freePortKillProcess does not exist on the pty proxy");return this._proxy.freePortKillProcess(n)}async serializeTerminalState(n){return this._proxy.serializeTerminalState(n)}async reviveTerminalProcesses(n,o){return this._proxy.reviveTerminalProcesses(n,o)}async refreshProperty(n,o){return this._proxy.refreshProperty(n,o)}async updateProperty(n,o,t){return this._proxy.updateProperty(n,o,t)}async restartPtyHost(){this._isResponsive=!0,this._disposePtyHost(),[this._client,this._proxy]=this._startPtyHost()}_disposePtyHost(){this._proxy.shutdownAll?.(),this._client.dispose()}_handleHeartbeat(){this._clearHeartbeatTimeouts(),this._heartbeatFirstTimeout=setTimeout(()=>this._handleHeartbeatFirstTimeout(),g.HeartbeatConstants.BeatInterval*g.HeartbeatConstants.FirstWaitMultiplier),this._isResponsive||(this._isResponsive=!0,this._onPtyHostResponsive.fire())}_handleHeartbeatFirstTimeout(){this._logService.warn(`No ptyHost heartbeat after ${g.HeartbeatConstants.BeatInterval*g.HeartbeatConstants.FirstWaitMultiplier/1e3} seconds`),this._heartbeatFirstTimeout=void 0,this._heartbeatSecondTimeout=setTimeout(()=>this._handleHeartbeatSecondTimeout(),g.HeartbeatConstants.BeatInterval*g.HeartbeatConstants.SecondWaitMultiplier)}_handleHeartbeatSecondTimeout(){this._logService.error(`No ptyHost heartbeat after ${(g.HeartbeatConstants.BeatInterval*g.HeartbeatConstants.FirstWaitMultiplier+g.HeartbeatConstants.BeatInterval*g.HeartbeatConstants.FirstWaitMultiplier)/1e3} seconds`),this._heartbeatSecondTimeout=void 0,this._isResponsive&&(this._isResponsive=!1,this._onPtyHostUnresponsive.fire())}_handleUnresponsiveCreateProcess(){this._clearHeartbeatTimeouts(),this._logService.error(`No ptyHost response to createProcess after ${g.HeartbeatConstants.CreateProcessTimeout/1e3} seconds`),this._isResponsive&&(this._isResponsive=!1,this._onPtyHostUnresponsive.fire())}_clearHeartbeatTimeouts(){this._heartbeatFirstTimeout&&(clearTimeout(this._heartbeatFirstTimeout),this._heartbeatFirstTimeout=void 0),this._heartbeatSecondTimeout&&(clearTimeout(this._heartbeatSecondTimeout),this._heartbeatSecondTimeout=void 0)}_resolveVariables(n,o){return this._resolveVariablesRequestStore.createRequest({workspaceId:n,originalText:o})}async acceptPtyHostResolvedVariables(n,o){this._resolveVariablesRequestStore.acceptReply(n,o)}};h=ve([H(1,P.IConfigurationService),H(2,w.IEnvironmentService),H(3,p.ILogService)],h),e.PtyHostService=h}),define(se[77],oe([0,1,3,16,4,8]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractTunnelService=e.DisposableTunnel=e.isPortPrivileged=e.isAllInterfaces=e.ALL_INTERFACES_ADDRESSES=e.isLocalhost=e.LOCALHOST_ADDRESSES=e.extractLocalHostUriMetaDataForPortMapping=e.ProvidedOnAutoForward=e.TunnelPrivacyId=e.TunnelProtocol=e.ISharedTunnelsService=e.ITunnelService=void 0,e.ITunnelService=(0,k.createDecorator)("tunnelService"),e.ISharedTunnelsService=(0,k.createDecorator)("sharedTunnelsService");var T;(function(g){g.Http="http",g.Https="https"})(T=e.TunnelProtocol||(e.TunnelProtocol={}));var I;(function(g){g.ConstantPrivate="constantPrivate",g.Private="private",g.Public="public"})(I=e.TunnelPrivacyId||(e.TunnelPrivacyId={}));var P;(function(g){g[g.Notify=1]="Notify",g[g.OpenBrowser=2]="OpenBrowser",g[g.OpenPreview=3]="OpenPreview",g[g.Silent=4]="Silent",g[g.Ignore=5]="Ignore",g[g.OpenBrowserOnce=6]="OpenBrowserOnce"})(P=e.ProvidedOnAutoForward||(e.ProvidedOnAutoForward={}));function w(g){if(g.scheme!=="http"&&g.scheme!=="https")return;const y=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(g.authority);if(!!y)return{address:y[1],port:+y[2]}}e.extractLocalHostUriMetaDataForPortMapping=w,e.LOCALHOST_ADDRESSES=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function C(g){return e.LOCALHOST_ADDRESSES.indexOf(g)>=0}e.isLocalhost=C,e.ALL_INTERFACES_ADDRESSES=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function b(g){return e.ALL_INTERFACES_ADDRESSES.indexOf(g)>=0}e.isAllInterfaces=b;function p(g,y,l,m){if(l===1)return!1;if(l===2&&b(y)){const u=/(\d+)\.(\d+)\.(\d+)/g.exec(m);if(u?.length===4&&parseInt(u[1])>=18)return!1}return g<1024}e.isPortPrivileged=p;class S{constructor(y,l,m){this.remoteAddress=y,this.localAddress=l,this._dispose=m,this._onDispose=new D.Emitter,this.onDidDispose=this._onDispose.event}dispose(){return this._onDispose.fire(),this._dispose()}}e.DisposableTunnel=S;let f=class{constructor(y,l){this.logService=y,this.configurationService=l,this._onTunnelOpened=new D.Emitter,this.onTunnelOpened=this._onTunnelOpened.event,this._onTunnelClosed=new D.Emitter,this.onTunnelClosed=this._onTunnelClosed.event,this._onAddedTunnelProvider=new D.Emitter,this.onAddedTunnelProvider=this._onAddedTunnelProvider.event,this._tunnels=new Map,this._canElevate=!1,this._privacyOptions=[],this._factoryInProgress=new Set}get hasTunnelProvider(){return!!this._tunnelProvider}get defaultTunnelHost(){const y=this.configurationService.getValue("remote.localPortHost");return!y||y==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(y){return this._tunnelProvider=y,y?(this._onAddedTunnelProvider.fire(),{dispose:()=>{this._tunnelProvider=void 0,this._canElevate=!1,this._privacyOptions=[]}}):(this._canElevate=!1,this._privacyOptions=[],this._onAddedTunnelProvider.fire(),{dispose:()=>{}})}setTunnelFeatures(y){this._canElevate=y.elevation,this._privacyOptions=y.privacyOptions}get canElevate(){return this._canElevate}get canChangePrivacy(){return this._privacyOptions.length>0}get privacyOptions(){return this._privacyOptions}get tunnels(){return this.getTunnels()}async getTunnels(){const y=[],l=Array.from(this._tunnels.values());for(const m of l){const u=Array.from(m.values());for(const h of u){const d=await h.value;d&&y.push(d)}}return y}async dispose(){for(const y of this._tunnels.values()){for(const{value:l}of y.values())await l.then(m=>m?.dispose());y.clear()}this._tunnels.clear()}setEnvironmentTunnel(y,l,m,u,h){this.addTunnelToMap(y,l,Promise.resolve({tunnelRemoteHost:y,tunnelRemotePort:l,localAddress:m,privacy:u,protocol:h,dispose:()=>Promise.resolve()}))}async getExistingTunnel(y,l){(b(y)||C(y))&&(y=e.LOCALHOST_ADDRESSES[0]);const m=this.getTunnelFromMap(y,l);if(m)return++m.refcount,m.value}openTunnel(y,l,m,u,h=!1,d,n){if(this.logService.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${l}:${m} on local port ${u}.`),!y)return;if(l||(l="localhost"),this._tunnelProvider&&this._factoryInProgress.has(m)){this.logService.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const o=this.retainOrCreateTunnel(y,l,m,u,h,d,n);return o?o.then(t=>{if(!t){this.logService.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.removeEmptyTunnelFromMap(l,m);return}this.logService.trace("ForwardedPorts: (TunnelService) New tunnel established.");const s=this.makeTunnel(t);return(t.tunnelRemoteHost!==l||t.tunnelRemotePort!==m)&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),this._onTunnelOpened.fire(s),s}):(this.logService.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),o)}makeTunnel(y){return{tunnelRemotePort:y.tunnelRemotePort,tunnelRemoteHost:y.tunnelRemoteHost,tunnelLocalPort:y.tunnelLocalPort,localAddress:y.localAddress,privacy:y.privacy,protocol:y.protocol,dispose:async()=>{this.logService.trace(`ForwardedPorts: (TunnelService) dispose request for ${y.tunnelRemoteHost}:${y.tunnelRemotePort} `);const l=this._tunnels.get(y.tunnelRemoteHost);if(l){const m=l.get(y.tunnelRemotePort);m&&(m.refcount--,await this.tryDisposeTunnel(y.tunnelRemoteHost,y.tunnelRemotePort,m))}}}}async tryDisposeTunnel(y,l,m){if(m.refcount<=0){this.logService.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${y}:${l}.`);const u=m.value.then(async h=>{h&&(await h.dispose(!0),this._onTunnelClosed.fire({host:h.tunnelRemoteHost,port:h.tunnelRemotePort}))});return this._tunnels.has(y)&&this._tunnels.get(y).delete(l),u}}async closeTunnel(y,l){this.logService.trace(`ForwardedPorts: (TunnelService) close request for ${y}:${l} `);const m=this._tunnels.get(y);if(m&&m.has(l)){const u=m.get(l);u.refcount=0,await this.tryDisposeTunnel(y,l,u)}}addTunnelToMap(y,l,m){this._tunnels.has(y)||this._tunnels.set(y,new Map),this._tunnels.get(y).set(l,{refcount:1,value:m})}async removeEmptyTunnelFromMap(y,l){const m=this._tunnels.get(y);m&&(await m.get(l)||m.delete(l),m.size===0&&this._tunnels.delete(y))}getTunnelFromMap(y,l){const m=[y];C(y)?(m.push(...e.LOCALHOST_ADDRESSES),m.push(...e.ALL_INTERFACES_ADDRESSES)):b(y)&&m.push(...e.ALL_INTERFACES_ADDRESSES);const u=m.map(h=>this._tunnels.get(h));for(const h of u){const d=h?.get(l);if(d)return d}}canTunnel(y){return!!w(y)}createWithProvider(y,l,m,u,h,d,n){this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${l}:${m} on local port ${u}.`);const o=m;this._factoryInProgress.add(o);const t=u===void 0?m:u,s={elevationRequired:h?this.isPortPrivileged(t):!1},r={remoteAddress:{host:l,port:m},localAddressPort:u,privacy:d,public:d?d!==I.Private:void 0,protocol:n},c=y.forwardPort(r,s);return c?(this.addTunnelToMap(l,m,c),c.finally(()=>{this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this._factoryInProgress.delete(o)})):this._factoryInProgress.delete(o),c}};f=ve([H(0,L.ILogService),H(1,i.IConfigurationService)],f),e.AbstractTunnelService=f}),define(se[248],oe([0,1,8,77,2,9,6]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessTunnelService=void 0;class I extends k.Disposable{constructor(){super(),this._address=null,this._addressPromise=null}async getAddress(){return this._address?this._address:(this._addressPromise||(this._addressPromise=new T.DeferredPromise),this._addressPromise.p)}setAddress(C){this._address=C,this._addressPromise&&(this._addressPromise.complete(C),this._addressPromise=null)}setTunnel(C){this._register(C)}}let P=class kt extends k.Disposable{constructor(C,b){super(),this._tunnelService=C,this._logService=b,this._tunnels=new Map,this._disposedTunnels=new Set}dispose(){super.dispose(),this._tunnels.forEach(C=>C.dispose())}async createTunnel(){return{id:String(++kt._lastId)}}async startTunnel(C,b,p,S,f,g){const y=new I,l=await Promise.resolve(this._tunnelService.openTunnel(C,y,p,S,f,g));if(!l)throw this._logService.info(`[SharedProcessTunnelService] Could not create a tunnel to ${p}:${S} (remote).`),y.dispose(),new Error("Could not create tunnel");if(this._disposedTunnels.has(b))throw this._disposedTunnels.delete(b),y.dispose(),await l.dispose(),(0,L.canceled)();return y.setTunnel(l),this._tunnels.set(b,y),this._logService.info(`[SharedProcessTunnelService] Created tunnel ${b}: ${l.localAddress} (local) to ${p}:${S} (remote).`),{tunnelLocalPort:l.tunnelLocalPort,localAddress:l.localAddress}}async setAddress(C,b){const p=this._tunnels.get(C);!p||p.setAddress(b)}async destroyTunnel(C){const b=this._tunnels.get(C);if(b){this._logService.info(`[SharedProcessTunnelService] Disposing tunnel ${C}.`),this._tunnels.delete(C),await b.dispose();return}this._disposedTunnels.add(C)}};P._lastId=0,P=ve([H(0,i.ISharedTunnelsService),H(1,D.ILogService)],P),e.SharedProcessTunnelService=P}),define(se[249],oe([0,1,86,34,131,224,6,2,16,8,25,222,77,108,5]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedTunnelsService=e.TunnelService=e.BaseTunnelService=void 0;async function g(h,d,n,o,t){let s;for(let r=3;r&&(s?.dispose(),s=await new y(h,d,n,o,t).waitForReady(),!(t&&k.BROWSER_RESTRICTED_PORTS[t]||!k.BROWSER_RESTRICTED_PORTS[s.tunnelLocalPort]));r--);return s}class y extends I.Disposable{constructor(d,n,o,t,s){super(),this.defaultTunnelHost=n,this.suggestedLocalPort=s,this.privacy=p.TunnelPrivacyId.Private,this._socketsDispose=new Map,this._options=d,this._server=D.createServer(),this._barrier=new T.Barrier,this._listeningListener=()=>this._barrier.open(),this._server.on("listening",this._listeningListener),this._connectionListener=r=>this._onConnection(r),this._server.on("connection",this._connectionListener),this._errorListener=()=>{},this._server.on("error",this._errorListener),this.tunnelRemotePort=t,this.tunnelRemoteHost=o}async dispose(){super.dispose(),this._server.removeListener("listening",this._listeningListener),this._server.removeListener("connection",this._connectionListener),this._server.removeListener("error",this._errorListener),this._server.close(),Array.from(this._socketsDispose.values()).forEach(n=>{n()})}async waitForReady(){const d=this.suggestedLocalPort??this.tunnelRemotePort,n=(0,p.isAllInterfaces)(this.defaultTunnelHost)?"0.0.0.0":"127.0.0.1";let o=await(0,k.findFreePortFaster)(d,2,1e3,n),t=null;return this._server.listen(o,this.defaultTunnelHost),await this._barrier.wait(),t=this._server.address(),t||(o=0,this._server.listen(o,this.defaultTunnelHost),await this._barrier.wait(),t=this._server.address()),this.tunnelLocalPort=t.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${t.port}`,this}async _onConnection(d){d.pause();const n=(0,p.isLocalhost)(this.tunnelRemoteHost)||(0,p.isAllInterfaces)(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,o=await(0,b.connectRemoteAgentTunnel)(this._options,n,this.tunnelRemotePort),t=o.getSocket().socket,s=o.readEntireBuffer();o.dispose(),s.byteLength>0&&d.write(s.buffer),d.on("end",()=>{d.localAddress&&this._socketsDispose.delete(d.localAddress),t.end()}),d.on("close",()=>t.end()),d.on("error",()=>{d.localAddress&&this._socketsDispose.delete(d.localAddress),t.destroy()}),t.on("end",()=>d.end()),t.on("close",()=>d.end()),t.on("error",()=>{d.destroy()}),d.pipe(t),t.pipe(d),d.localAddress&&this._socketsDispose.set(d.localAddress,()=>{d.end(),t.end()})}}let l=class extends p.AbstractTunnelService{constructor(d,n,o,t,s){super(n,s),this.socketFactory=d,this.signService=o,this.productService=t}isPortPrivileged(d){return(0,p.isPortPrivileged)(d,this.defaultTunnelHost,f.OS,i.release())}retainOrCreateTunnel(d,n,o,t,s,r,c){const a=this.getTunnelFromMap(n,o);if(a)return++a.refcount,a.value;if(this._tunnelProvider)return this.createWithProvider(this._tunnelProvider,n,o,t,s,r,c);{this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${n}:${o} on local port ${t}.`);const v={commit:this.productService.commit,quality:this.productService.quality,socketFactory:this.socketFactory,addressProvider:d,signService:this.signService,logService:this.logService,ipcLogger:null},E=g(v,this.defaultTunnelHost,n,o,t);return this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.addTunnelToMap(n,o,E),E}}};l=ve([H(1,w.ILogService),H(2,S.ISignService),H(3,C.IProductService),H(4,P.IConfigurationService)],l),e.BaseTunnelService=l;let m=class extends l{constructor(d,n,o,t){super(L.nodeSocketFactory,d,n,o,t)}};m=ve([H(0,w.ILogService),H(1,S.ISignService),H(2,C.IProductService),H(3,P.IConfigurationService)],m),e.TunnelService=m;let u=class extends I.Disposable{constructor(d,n,o,t){super(),this.logService=d,this.productService=n,this.signService=o,this.configurationService=t,this._tunnelServices=new Map}async openTunnel(d,n,o,t,s,r,c,a){if(this.logService.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${o}:${t} on local port ${s}.`),!this._tunnelServices.has(d)){const v=new m(this.logService,this.signService,this.productService,this.configurationService);this._register(v),this._tunnelServices.set(d,v),v.onTunnelClosed(async()=>{(await v.tunnels).length===0&&(v.dispose(),this._tunnelServices.delete(d))})}return this._tunnelServices.get(d).openTunnel(n,o,t,s,r,c,a)}};u=ve([H(0,w.ILogService),H(1,C.IProductService),H(2,S.ISignService),H(3,P.IConfigurationService)],u),e.SharedTunnelsService=u}),define(se[30],oe([0,1,4]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IUriIdentityService=void 0,e.IUriIdentityService=(0,D.createDecorator)("IUriIdentityService")}),define(se[250],oe([0,1,30,71,13,22,129,3,2]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UriIdentityService=void 0;class w{constructor(p){this.uri=p,this.time=w._clock++}touch(){return this.time=w._clock++,this}}w._clock=0;let C=class{constructor(p){this._fileService=p,this._dispooables=new P.DisposableStore,this._limit=2**16;const S=new Map,f=g=>{let y=S.get(g.scheme);return y===void 0&&(y=p.hasProvider(g)&&!this._fileService.hasCapability(g,1024),S.set(g.scheme,y)),y};this._dispooables.add(I.Event.any(p.onDidChangeFileSystemProviderRegistrations,p.onDidChangeFileSystemProviderCapabilities)(g=>{S.delete(g.scheme)})),this.extUri=new L.ExtUri(f),this._canonicalUris=new T.SkipList((g,y)=>this.extUri.compare(g,y,!0),this._limit)}dispose(){this._dispooables.dispose(),this._canonicalUris.clear()}asCanonicalUri(p){this._fileService.hasProvider(p)&&(p=(0,L.normalizePath)(p));const S=this._canonicalUris.get(p);return S?S.touch().uri.with({fragment:p.fragment}):(this._canonicalUris.set(p,new w(p)),this._checkTrim(),p)}_checkTrim(){if(this._canonicalUris.size<this._limit)return;const p=[...this._canonicalUris.entries()].sort((f,g)=>f[1].touch<g[1].touch?1:f[1].touch>g[1].touch?-1:0);w._clock=0,this._canonicalUris.clear();const S=this._limit*.5;for(let f=0;f<S;f++)this._canonicalUris.set(p[f][0],p[f][1].touch())}};C=ve([H(0,k.IFileService)],C),e.UriIdentityService=C,(0,i.registerSingleton)(D.IUriIdentityService,C,1)}),define(se[251],oe([0,1,3,2,13,44,48,17]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileUserDataProvider=void 0;class P extends i.Disposable{get capabilities(){return this.fileSystemProvider.capabilities&-5}constructor(C,b,p,S){super(),this.fileSystemScheme=C,this.fileSystemProvider=b,this.userDataScheme=p,this.logService=S,this.onDidChangeCapabilities=this.fileSystemProvider.onDidChangeCapabilities,this._onDidChangeFile=this._register(new D.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this.watchResources=T.TernarySearchTree.forUris(()=>!(this.capabilities&1024)),this._register(this.fileSystemProvider.onDidChangeFile(f=>this.handleFileChanges(f)))}watch(C,b){this.watchResources.set(C,C);const p=this.fileSystemProvider.watch(this.toFileSystemResource(C),b);return(0,i.toDisposable)(()=>{this.watchResources.delete(C),p.dispose()})}stat(C){return this.fileSystemProvider.stat(this.toFileSystemResource(C))}mkdir(C){return this.fileSystemProvider.mkdir(this.toFileSystemResource(C))}rename(C,b,p){return this.fileSystemProvider.rename(this.toFileSystemResource(C),this.toFileSystemResource(b),p)}readFile(C){return this.fileSystemProvider.readFile(this.toFileSystemResource(C),{atomic:!0})}readFileStream(C,b,p){const S=(0,L.newWriteableStream)(f=>I.VSBuffer.concat(f.map(g=>I.VSBuffer.wrap(g))).buffer);return(async()=>{try{const f=await this.readFile(C);S.end(f)}catch(f){S.error(f),S.end()}})(),S}readdir(C){return this.fileSystemProvider.readdir(this.toFileSystemResource(C))}writeFile(C,b,p){return this.fileSystemProvider.writeFile(this.toFileSystemResource(C),b,p)}delete(C,b){return this.fileSystemProvider.delete(this.toFileSystemResource(C),b)}copy(C,b,p){if((0,k.hasFileFolderCopyCapability)(this.fileSystemProvider))return this.fileSystemProvider.copy(this.toFileSystemResource(C),this.toFileSystemResource(b),p);throw new Error("copy not supported")}handleFileChanges(C){const b=[];for(const p of C){if(p.resource.scheme!==this.fileSystemScheme)continue;const S=this.toUserDataResource(p.resource);this.watchResources.findSubstr(S)&&b.push({resource:S,type:p.type})}b.length&&(this.logService.debug("User data changed"),this._onDidChangeFile.fire(b))}toFileSystemResource(C){return C.with({scheme:this.fileSystemScheme})}toUserDataResource(C){return C.with({scheme:this.userDataScheme})}}e.FileUserDataProvider=P}),define(se[60],oe([0,1,83]),function(Z,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLineEndOffset=e.getLineStartOffset=e.edit=void 0;function i(T,I,P,w){const C=(0,D.setProperty)(T,I,P,w)[0];return C&&(T=T.substring(0,C.offset)+C.content+T.substring(C.offset+C.length)),T}e.edit=i;function k(T,I,P){let w=P;for(;w>=0;){if(T.charAt(w)===I.charAt(I.length-1)&&I.length===1)return w+1;if(w--,I.length===2&&w>=0&&T.charAt(w)===I.charAt(0))return w+2}return 0}e.getLineStartOffset=k;function L(T,I,P){let w=P;for(;w>=0;)if(T.charAt(w)===I.charAt(I.length-1)&&I.length===1||(w++,I.length===2&&w>=0&&T.charAt(w)===I.charAt(1)))return w;return T.length-1}e.getLineEndOffset=L}),define(se[252],oe([0,1,32,53,14]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;function L(S,f,g,y,l,m){const u=[],h=[],d=[];if(!f){const M=S.filter(({identifier:$})=>l.every(V=>V.toLowerCase()!==$.id.toLowerCase()));return{local:{added:u,removed:h,updated:d},remote:M.length>0?{added:M,updated:[],removed:[],all:M}:null}}S=S.map(b),f=f.map(b),g=g?g.map(b):null;const n=new Map,o=M=>{M.uuid&&n.set(M.id.toLowerCase(),M.uuid)};S.forEach(({identifier:M})=>o(M)),f.forEach(({identifier:M})=>o(M)),g?.forEach(({identifier:M})=>o(M));const t=M=>{const $=M.identifier.uuid||n.get(M.identifier.id.toLowerCase());return $?`uuid:${$}`:`id:${M.identifier.id.toLowerCase()}`},s=(M,$)=>(M.set(t($),$),M),r=S.reduce(s,new Map),c=f.reduce(s,new Map),a=f.reduce((M,$)=>s(M,(0,D.deepClone)($)),new Map),v=g?g.reduce(s,new Map):null,E=y.reduce(s,new Map),R=l.reduce((M,$)=>{const V=n.get($.toLowerCase());return M.add(V?`uuid:${V}`:`id:${$.toLowerCase()}`)},new Set),N=m.reduce((M,{id:$,uuid:V})=>(V=V??n.get($.toLowerCase()),M.add(V?`uuid:${V}`:`id:${$.toLowerCase()}`)),new Set),O=T(r,c,R,!1);if(O.added.size>0||O.removed.size>0||O.updated.size>0){const M=T(v,r,R,!1),$=T(v,c,R,!0),V=(B,Q,W,q)=>({...q,installed:Q.installed||W.installed,version:W.version&&(!Q.installed||i.gt(W.version,Q.version))?W.version:Q.version,state:P(Q,W,v?.get(B)),preRelease:(Q.installed?q.preRelease:W.preRelease)??Q.preRelease});for(const B of $.removed.values()){const Q=r.get(B);if(!Q)continue;const W=(0,k.assertIsDefined)(v?.get(B)),q=!N.has(B)&&W.installed;Q.installed&&q?h.push(Q.identifier):a.set(B,Q)}for(const B of $.added.values()){const Q=(0,k.assertIsDefined)(c.get(B)),W=r.get(B);if(W){if(O.updated.has(B)){const q=V(B,W,Q,Q);I(W,Q,!1,!1)||d.push(p(q,B)),a.set(B,q)}}else Q.installed&&u.push(p(Q,B))}for(const B of $.updated.values()){const Q=(0,k.assertIsDefined)(c.get(B)),W=(0,k.assertIsDefined)(v?.get(B)),q=r.get(B);if(q)if(!N.has(B)&&W.installed&&q.installed&&!Q.installed)h.push(q.identifier);else{const ee=V(B,q,Q,Q);d.push(p(ee,B)),a.set(B,ee)}else Q.installed&&u.push(p(Q,B))}for(const B of M.added.values())$.added.has(B)||a.set(B,(0,k.assertIsDefined)(r.get(B)));for(const B of M.updated.values()){if($.removed.has(B)||$.updated.has(B))continue;const Q=(0,k.assertIsDefined)(r.get(B)),W=(0,k.assertIsDefined)(c.get(B));a.set(B,V(B,Q,W,Q))}for(const B of M.removed.values())$.updated.has(B)||$.removed.has(B)||E.has(B)||!(0,k.assertIsDefined)(c.get(B)).installed||N.has(B)||!(0,k.assertIsDefined)(v?.get(B)).installed||a.delete(B)}const z=[],F=T(c,a,new Set,!0),A=F.added.size>0||F.updated.size>0||F.removed.size>0;return A&&a.forEach((M,$)=>z.push(p(M,$))),{local:{added:u,removed:h,updated:d},remote:A?{added:[...F.added].map(M=>a.get(M)),updated:[...F.updated].map(M=>a.get(M)),removed:[...F.removed].map(M=>c.get(M)),all:z}:null}}e.merge=L;function T(S,f,g,y){const l=S?[...S.keys()].filter(n=>!g.has(n)):[],m=[...f.keys()].filter(n=>!g.has(n)),u=m.filter(n=>l.indexOf(n)===-1).reduce((n,o)=>(n.add(o),n),new Set),h=l.filter(n=>m.indexOf(n)===-1).reduce((n,o)=>(n.add(o),n),new Set),d=new Set;for(const n of l){if(h.has(n))continue;const o=S.get(n),t=f.get(n);(!t||!I(o,t,y,!0))&&d.add(n)}return{added:u,removed:h,updated:d}}function I(S,f,g,y){return!(S.disabled!==f.disabled||y&&S.installed!==f.installed||S.installed&&f.installed&&S.preRelease!==f.preRelease||!C(S.state,f.state)||g&&S.version!==f.version)}function P(S,f,g){const y=S.state,l=f.state,m=g?.state;if(!f.version||y&&i.gt(S.version,f.version))return y;if(l&&i.gt(f.version,S.version)||!y)return l;if(!l)return y;const u=(0,D.deepClone)(y),h=m?w(m,l):{added:Object.keys(l).reduce((n,o)=>(n.add(o),n),new Set),removed:new Set,updated:new Set},d=m?w(m,y):{added:Object.keys(y).reduce((n,o)=>(n.add(o),n),new Set),removed:new Set,updated:new Set};for(const n of[...h.added.values(),...h.updated.values()])u[n]=l[n];for(const n of h.removed.values())d.updated.has(n)||delete u[n];return u}function w(S,f){const g=Object.keys(S),y=Object.keys(f),l=y.filter(h=>g.indexOf(h)===-1).reduce((h,d)=>(h.add(d),h),new Set),m=g.filter(h=>y.indexOf(h)===-1).reduce((h,d)=>(h.add(d),h),new Set),u=new Set;for(const h of g){if(m.has(h))continue;const d=S[h],n=f[h];(0,D.equals)(d,n)||u.add(h)}return{added:l,removed:m,updated:u}}function C(S={},f={}){const{added:g,removed:y,updated:l}=w(S,f);return g.size===0&&y.size===0&&l.size===0}function b(S){return{...S,disabled:!!S.disabled,installed:!!S.installed}}function p(S,f){const g={identifier:{id:S.identifier.id,uuid:f.startsWith("uuid:")?f.substring(5):void 0},preRelease:!!S.preRelease};return S.version&&(g.version=S.version),S.disabled&&(g.disabled=!0),S.installed&&(g.installed=!0),S.state&&(g.state=S.state),g}}),define(se[115],oe([0,1,20,16,4]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoredExtensionsManagementService=e.IIgnoredExtensionsManagementService=void 0,e.IIgnoredExtensionsManagementService=(0,k.createDecorator)("IIgnoredExtensionsManagementService");let L=class{constructor(I){this.configurationService=I}hasToNeverSyncExtension(I){return this.getConfiguredIgnoredExtensions().includes(I.toLowerCase())}hasToAlwaysSyncExtension(I){return this.getConfiguredIgnoredExtensions().includes(`-${I.toLowerCase()}`)}updateIgnoredExtensions(I,P){let w=[...this.configurationService.getValue("settingsSync.ignoredExtensions")].map(C=>C.toLowerCase());return w=w.filter(C=>C!==I&&C!==`-${I}`),P&&w.push(I.toLowerCase()),this.configurationService.updateValue("settingsSync.ignoredExtensions",w.length?w:void 0,2)}updateSynchronizedExtensions(I,P){let w=[...this.configurationService.getValue("settingsSync.ignoredExtensions")].map(C=>C.toLowerCase());return w=w.filter(C=>C!==I&&C!==`-${I}`),P&&w.push(`-${I.toLowerCase()}`),this.configurationService.updateValue("settingsSync.ignoredExtensions",w.length?w:void 0,2)}getIgnoredExtensions(I){const P=I.filter(p=>p.isMachineScoped).map(p=>p.identifier.id.toLowerCase()),w=this.getConfiguredIgnoredExtensions().map(p=>p.toLowerCase()),C=[],b=[];if(Array.isArray(w))for(const p of w)p.startsWith("-")?b.push(p.substring(1)):C.push(p);return(0,D.distinct)([...P,...C].filter(p=>b.indexOf(p)===-1))}getConfiguredIgnoredExtensions(){let I=this.configurationService.inspect("settingsSync.ignoredExtensions").userValue;return I!==void 0||(I=this.configurationService.inspect("sync.ignoredExtensions").userValue,I!==void 0)?I:(this.configurationService.getValue("settingsSync.ignoredExtensions")||[]).map(P=>P.toLowerCase())}};L=ve([H(0,i.IConfigurationService)],L),e.IgnoredExtensionsManagementService=L}),define(se[253],oe([0,1,20,35,32,192,60]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=e.parseKeybindings=void 0;function I(h){return(0,i.parse)(h)||[]}e.parseKeybindings=I;async function P(h,d,n,o,t){const s=I(h),r=I(d),c=n?I(n):null,a=[...s,...r,...c||[]].map(V=>V.key),v=await t.resolveUserBindings(a),E=C(s,r,c,v);if(!E.hasLocalForwarded&&!E.hasRemoteForwarded)return{mergeContent:h,hasChanges:!1,hasConflicts:!1};if(!E.hasLocalForwarded&&E.hasRemoteForwarded)return{mergeContent:d,hasChanges:!0,hasConflicts:!1};if(E.hasLocalForwarded&&!E.hasRemoteForwarded)return{mergeContent:h,hasChanges:!0,hasConflicts:!1};const R=p(s),N=p(r),O=c?p(c):null,z=f(R,N,v),F=O?f(O,R,v):{added:[...R.keys()].reduce((V,B)=>(V.add(B),V),new Set),removed:new Set,updated:new Set},A=O?f(O,N,v):{added:[...N.keys()].reduce((V,B)=>(V.add(B),V),new Set),removed:new Set,updated:new Set},M=w(z,F,A);let $=h;for(const V of M.removed.values())M.conflicts.has(V)||($=m($,V,o));for(const V of M.added.values()){if(M.conflicts.has(V))continue;const B=N.get(V);if(B.some(Q=>Q.command!==`-${V}`&&E.conflicts.has(v[Q.key]))){M.conflicts.add(V);continue}$=l($,B,o)}for(const V of M.updated.values()){if(M.conflicts.has(V))continue;const B=N.get(V);if(B.some(Q=>Q.command!==`-${V}`&&E.conflicts.has(v[Q.key]))){M.conflicts.add(V);continue}$=u($,V,B,o)}return{mergeContent:$,hasChanges:!0,hasConflicts:M.conflicts.size>0}}e.merge=P;function w(h,d,n){const o=new Set,t=new Set,s=new Set,r=new Set;for(const c of d.removed.values())n.updated.has(c)&&r.add(c);for(const c of n.removed.values())r.has(c)||(d.updated.has(c)?r.add(c):t.add(c));for(const c of d.added.values())r.has(c)||n.added.has(c)&&h.updated.has(c)&&r.add(c);for(const c of n.added.values())r.has(c)||(d.added.has(c)?h.updated.has(c)&&r.add(c):o.add(c));for(const c of d.updated.values())r.has(c)||n.updated.has(c)&&h.updated.has(c)&&r.add(c);for(const c of n.updated.values())r.has(c)||(d.updated.has(c)?h.updated.has(c)&&r.add(c):s.add(c));return{added:o,removed:t,updated:s,conflicts:r}}function C(h,d,n,o){const t=new Set,s=b(h,o),r=b(d,o),c=n?b(n,o):null,a=S(s,r);if(a.added.size===0&&a.removed.size===0&&a.updated.size===0)return{hasLocalForwarded:!1,hasRemoteForwarded:!1,added:t,removed:t,updated:t,conflicts:t};const v=c?S(c,s):{added:[...s.keys()].reduce((F,A)=>(F.add(A),F),new Set),removed:new Set,updated:new Set};if(v.added.size===0&&v.removed.size===0&&v.updated.size===0)return{hasLocalForwarded:!1,hasRemoteForwarded:!0,added:t,removed:t,updated:t,conflicts:t};const E=c?S(c,r):{added:[...r.keys()].reduce((F,A)=>(F.add(A),F),new Set),removed:new Set,updated:new Set};if(E.added.size===0&&E.removed.size===0&&E.updated.size===0)return{hasLocalForwarded:!0,hasRemoteForwarded:!1,added:t,removed:t,updated:t,conflicts:t};const{added:R,removed:N,updated:O,conflicts:z}=w(a,v,E);return{hasLocalForwarded:!0,hasRemoteForwarded:!0,added:R,removed:N,updated:O,conflicts:z}}function b(h,d){const n=new Map;for(const o of h){const t=d[o.key];let s=n.get(t);s||(s=[],n.set(t,s)),s.push(o)}return n}function p(h){const d=new Map;for(const n of h){const o=n.command[0]==="-"?n.command.substring(1):n.command;let t=d.get(o);t||(t=[],d.set(o,t)),t.push(n)}return d}function S(h,d){const n=[...h.keys()],o=[...d.keys()],t=o.filter(c=>n.indexOf(c)===-1).reduce((c,a)=>(c.add(a),c),new Set),s=n.filter(c=>o.indexOf(c)===-1).reduce((c,a)=>(c.add(a),c),new Set),r=new Set;for(const c of n){if(s.has(c))continue;const a=h.get(c).map(E=>({...E,key:c})),v=d.get(c).map(E=>({...E,key:c}));(0,D.equals)(a,v,(E,R)=>y(E,R))||r.add(c)}return{added:t,removed:s,updated:r}}function f(h,d,n){const o=[...h.keys()],t=[...d.keys()],s=t.filter(a=>o.indexOf(a)===-1).reduce((a,v)=>(a.add(v),a),new Set),r=o.filter(a=>t.indexOf(a)===-1).reduce((a,v)=>(a.add(v),a),new Set),c=new Set;for(const a of o){if(r.has(a))continue;const v=h.get(a).map(R=>({...R,key:n[R.key]})),E=d.get(a).map(R=>({...R,key:n[R.key]}));g(v,E)||c.add(a)}return{added:s,removed:r,updated:c}}function g(h,d){return!(!(0,D.equals)(h.filter(({command:n})=>n[0]!=="-"),d.filter(({command:n})=>n[0]!=="-"),(n,o)=>y(n,o))||!(0,D.equals)(h.filter(({command:n})=>n[0]==="-"),d.filter(({command:n})=>n[0]==="-"),(n,o)=>y(n,o)))}function y(h,d){if(h.command!==d.command||h.key!==d.key)return!1;const n=L.ContextKeyExpr.deserialize(h.when),o=L.ContextKeyExpr.deserialize(d.when);return!(n&&!o||!n&&o||n&&o&&!n.equals(o)||!k.equals(h.args,d.args))}function l(h,d,n){for(const o of d)h=T.edit(h,[-1],o,n);return h}function m(h,d,n){const o=I(h);for(let t=o.length-1;t>=0;t--)(o[t].command===d||o[t].command===`-${d}`)&&(h=T.edit(h,[t],void 0,n));return h}function u(h,d,n,o){const t=I(h),s=t.findIndex(r=>r.command===d||r.command===`-${d}`);for(let r=t.length-1;r>=0;r--)(t[r].command===d||t[r].command===`-${d}`)&&(h=T.edit(h,[r],void 0,o));for(let r=n.length-1;r>=0;r--)h=T.edit(h,[s],n[r],o);return h}}),define(se[254],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.areSame=e.merge=void 0;function D(L,T,I){const P={},w={},C=new Set;if(!T)return{local:{added:P,updated:w,removed:[...C.values()]},remote:{added:L,updated:{},removed:[]},conflicts:[]};const b=i(L,T);if(b.added.size===0&&b.removed.size===0&&b.updated.size===0)return{local:{added:P,updated:w,removed:[...C.values()]},remote:{added:{},updated:{},removed:[]},conflicts:[]};const p=i(I,L),S=i(I,T),f={},g={},y=new Set,l=new Set;for(const m of p.removed.values())S.updated.has(m)?P[m]=T[m]:y.add(m);for(const m of S.removed.values())l.has(m)||(p.updated.has(m)?l.add(m):C.add(m));for(const m of p.updated.values())l.has(m)||(S.updated.has(m)?b.updated.has(m)&&l.add(m):g[m]=L[m]);for(const m of S.updated.values())l.has(m)||(p.updated.has(m)?b.updated.has(m)&&l.add(m):L[m]!==void 0&&(w[m]=T[m]));for(const m of p.added.values())l.has(m)||(S.added.has(m)?b.updated.has(m)&&l.add(m):f[m]=L[m]);for(const m of S.added.values())l.has(m)||(p.added.has(m)?b.updated.has(m)&&l.add(m):P[m]=T[m]);return{local:{added:P,removed:[...C.values()],updated:w},remote:{added:f,removed:[...y.values()],updated:g},conflicts:[...l.values()]}}e.merge=D;function i(L,T){const I=L?Object.keys(L):[],P=T?Object.keys(T):[],w=P.filter(p=>I.indexOf(p)===-1).reduce((p,S)=>(p.add(S),p),new Set),C=I.filter(p=>P.indexOf(p)===-1).reduce((p,S)=>(p.add(S),p),new Set),b=new Set;for(const p of I){if(C.has(p))continue;const S=L[p],f=T[p];S!==f&&b.add(p)}return{added:w,removed:C,updated:b}}function k(L,T){const{added:I,removed:P,updated:w}=i(L,T);return I.size===0&&P.size===0&&w.size===0}e.areSame=k}),define(se[255],oe([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;function D(k,L,T,I){const P={local:{added:[],removed:[],updated:[]},remote:{added:[],removed:[],updated:[]}};if(!L){const C=k.filter(({id:b})=>!I.includes(b));return C.length?P.remote.added=C:P.remote=null,P}const w=i(k,L,I);if(w.added.length>0||w.removed.length>0||w.updated.length>0){const C=i(T,k,I),b=i(T,L,I);for(const p of b.removed){const S=k.find(f=>f.id===p);S&&P.local.removed.push(S)}for(const p of b.added){const S=L.find(f=>f.id===p);C.added.includes(p)?w.updated.includes(p)&&P.local.updated.push(S):P.local.added.push(S)}for(const p of b.updated)P.local.updated.push(L.find(S=>S.id===p));for(const p of C.added)b.added.includes(p)||P.remote.added.push(k.find(S=>S.id===p));for(const p of C.updated)b.removed.includes(p)||b.updated.includes(p)||P.remote.updated.push(k.find(S=>S.id===p));for(const p of C.removed)P.remote.removed.push(L.find(S=>S.id===p))}return P.remote.added.length===0&&P.remote.removed.length===0&&P.remote.updated.length===0&&(P.remote=null),P}e.merge=D;function i(k,L,T){k=k?k.filter(({id:p})=>!T.includes(p)):[],L=L.filter(({id:p})=>!T.includes(p));const I=k.map(({id:p})=>p),P=L.map(({id:p})=>p),w=P.filter(p=>I.indexOf(p)===-1),C=I.filter(p=>P.indexOf(p)===-1),b=[];for(const{id:p,name:S,shortName:f}of k){if(C.includes(p))continue;const g=L.find(y=>y.id===p);(!g||g.name!==S||g.shortName!==f)&&b.push(p)}return{added:w,removed:C,updated:b}}}),define(se[26],oe([0,1,20,14,179,46,29,4,105,40]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PREVIEW_DIR_NAME=e.USER_DATA_SYNC_SCHEME=e.IUserDataSyncLogService=e.IUserDataSyncUtilService=e.IUserDataAutoSyncService=e.IUserDataSyncResourceProviderService=e.IUserDataSyncService=e.IUserDataSyncEnablementService=e.getEnablementKey=e.SYNC_SERVICE_URL_TYPE=e.MergeState=e.Change=e.SyncStatus=e.UserDataAutoSyncError=e.UserDataSyncStoreError=e.UserDataSyncError=e.UserDataSyncErrorCode=e.createSyncHeaders=e.HEADER_EXECUTION_ID=e.HEADER_OPERATION_ID=e.IUserDataSyncBackupStoreService=e.IUserDataSyncStoreService=e.IUserDataSyncStoreManagementService=e.getLastSyncResourceUri=e.getPathSegments=e.ALL_SYNC_RESOURCES=e.SyncResource=e.isAuthenticationProvider=e.registerConfiguration=e.CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM=e.USER_DATA_SYNC_CONFIGURATION_SCOPE=e.getDefaultIgnoredSettings=e.getDisallowedIgnoredSettings=e.CONFIGURATION_SYNC_STORE_KEY=void 0,e.CONFIGURATION_SYNC_STORE_KEY="configurationSync.store";function C(){const r=w.Registry.as(L.Extensions.Configuration).getConfigurationProperties();return Object.keys(r).filter(c=>!!r[c].disallowSyncIgnore)}e.getDisallowedIgnoredSettings=C;function b(){const r=w.Registry.as(L.Extensions.Configuration).getConfigurationProperties(),c=Object.keys(r).filter(E=>!!r[E].ignoreSync),a=Object.keys(r).filter(E=>r[E].scope===2||r[E].scope===6),v=C();return(0,D.distinct)([e.CONFIGURATION_SYNC_STORE_KEY,...c,...a,...v])}e.getDefaultIgnoredSettings=b,e.USER_DATA_SYNC_CONFIGURATION_SCOPE="settingsSync",e.CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM="settingsSync.keybindingsPerPlatform";function p(){const r="vscode://schemas/ignoredSettings",c=w.Registry.as(L.Extensions.Configuration);c.registerConfiguration({id:"settingsSync",order:30,title:(0,k.localize)(0,null),type:"object",properties:{[e.CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM]:{type:"boolean",description:(0,k.localize)(1,null),default:!0,scope:1,tags:["sync","usesOnlineServices"]},"settingsSync.ignoredExtensions":{type:"array",markdownDescription:(0,k.localize)(2,null),items:[{type:"string",pattern:T.EXTENSION_IDENTIFIER_PATTERN,errorMessage:(0,k.localize)(3,null)}],default:[],scope:1,uniqueItems:!0,disallowSyncIgnore:!0,tags:["sync","usesOnlineServices"]},"settingsSync.ignoredSettings":{type:"array",description:(0,k.localize)(4,null),default:[],scope:1,$ref:r,additionalProperties:!0,uniqueItems:!0,disallowSyncIgnore:!0,tags:["sync","usesOnlineServices"]}}});const a=w.Registry.as(P.Extensions.JSONContribution),v=()=>{const E=C(),R=b().filter(F=>F!==e.CONFIGURATION_SYNC_STORE_KEY),N=Object.keys(L.allSettings.properties).filter(F=>R.indexOf(F)===-1),O=R.filter(F=>E.indexOf(F)===-1),z={items:{type:"string",enum:[...N,...O.map(F=>`-${F}`)]}};a.registerSchema(r,z)};return c.onDidUpdateConfiguration(()=>v())}e.registerConfiguration=p;function S(r){return r&&(0,i.isObject)(r)&&(0,i.isString)(r.id)&&Array.isArray(r.scopes)}e.isAuthenticationProvider=S;var f;(function(r){r.Settings="settings",r.Keybindings="keybindings",r.Snippets="snippets",r.Tasks="tasks",r.Extensions="extensions",r.GlobalState="globalState",r.Profiles="profiles"})(f=e.SyncResource||(e.SyncResource={})),e.ALL_SYNC_RESOURCES=["settings","keybindings","snippets","tasks","extensions","globalState","profiles"];function g(r,...c){return r?[r,...c]:c}e.getPathSegments=g;function y(r,c,a,v){return v.joinPath(a.userDataSyncHome,...g(r,c,`lastSync${c}.json`))}e.getLastSyncResourceUri=y,e.IUserDataSyncStoreManagementService=(0,I.createDecorator)("IUserDataSyncStoreManagementService"),e.IUserDataSyncStoreService=(0,I.createDecorator)("IUserDataSyncStoreService"),e.IUserDataSyncBackupStoreService=(0,I.createDecorator)("IUserDataSyncBackupStoreService"),e.HEADER_OPERATION_ID="x-operation-id",e.HEADER_EXECUTION_ID="X-Execution-Id";function l(r){const c={};return c[e.HEADER_EXECUTION_ID]=r,c}e.createSyncHeaders=l;var m;(function(r){r.Unauthorized="Unauthorized",r.NotFound="NotFound",r.Conflict="Conflict",r.Gone="Gone",r.PreconditionFailed="PreconditionFailed",r.TooLarge="TooLarge",r.UpgradeRequired="UpgradeRequired",r.PreconditionRequired="PreconditionRequired",r.TooManyRequests="RemoteTooManyRequests",r.TooManyRequestsAndRetryAfter="TooManyRequestsAndRetryAfter",r.RequestFailed="RequestFailed",r.RequestCanceled="RequestCanceled",r.RequestTimeout="RequestTimeout",r.RequestProtocolNotSupported="RequestProtocolNotSupported",r.RequestPathNotEscaped="RequestPathNotEscaped",r.RequestHeadersNotObject="RequestHeadersNotObject",r.NoCollection="NoCollection",r.NoRef="NoRef",r.EmptyResponse="EmptyResponse",r.TurnedOff="TurnedOff",r.SessionExpired="SessionExpired",r.ServiceChanged="ServiceChanged",r.DefaultServiceChanged="DefaultServiceChanged",r.LocalTooManyRequests="LocalTooManyRequests",r.LocalPreconditionFailed="LocalPreconditionFailed",r.LocalInvalidContent="LocalInvalidContent",r.LocalError="LocalError",r.IncompatibleLocalContent="IncompatibleLocalContent",r.IncompatibleRemoteContent="IncompatibleRemoteContent",r.Unknown="Unknown"})(m=e.UserDataSyncErrorCode||(e.UserDataSyncErrorCode={}));class u extends Error{constructor(c,a,v,E){super(c),this.code=a,this.resource=v,this.operationId=E,this.name=`${this.code} (UserDataSyncError) syncResource:${this.resource||"unknown"} operationId:${this.operationId||"unknown"}`}}e.UserDataSyncError=u;class h extends u{constructor(c,a,v,E,R){super(c,v,void 0,R),this.url=a,this.serverCode=E}}e.UserDataSyncStoreError=h;class d extends u{constructor(c,a){super(c,a)}}e.UserDataAutoSyncError=d,function(r){function c(a){if(a instanceof r)return a;const v=/^(.+) \(UserDataSyncError\) syncResource:(.+) operationId:(.+)$/.exec(a.name);if(v&&v[1]){const E=v[2]==="unknown"?void 0:v[2],R=v[3]==="unknown"?void 0:v[3];return new r(a.message,v[1],E,R)}return new r(a.message,"Unknown")}r.toUserDataSyncError=c}(u=e.UserDataSyncError||(e.UserDataSyncError={}));var n;(function(r){r.Uninitialized="uninitialized",r.Idle="idle",r.Syncing="syncing",r.HasConflicts="hasConflicts"})(n=e.SyncStatus||(e.SyncStatus={}));var o;(function(r){r[r.None=0]="None",r[r.Added=1]="Added",r[r.Modified=2]="Modified",r[r.Deleted=3]="Deleted"})(o=e.Change||(e.Change={}));var t;(function(r){r.Preview="preview",r.Conflict="conflict",r.Accepted="accepted"})(t=e.MergeState||(e.MergeState={})),e.SYNC_SERVICE_URL_TYPE="sync.store.url.type";function s(r){return`sync.enable.${r}`}e.getEnablementKey=s,e.IUserDataSyncEnablementService=(0,I.createDecorator)("IUserDataSyncEnablementService"),e.IUserDataSyncService=(0,I.createDecorator)("IUserDataSyncService"),e.IUserDataSyncResourceProviderService=(0,I.createDecorator)("IUserDataSyncResourceProviderService"),e.IUserDataAutoSyncService=(0,I.createDecorator)("IUserDataAutoSyncService"),e.IUserDataSyncUtilService=(0,I.createDecorator)("IUserDataSyncUtilService"),e.IUserDataSyncLogService=(0,I.createDecorator)("IUserDataSyncLogService"),e.USER_DATA_SYNC_SCHEME="vscode-userdata-sync",e.PREVIEW_DIR_NAME="preview"}),define(se[256],oe([0,1,32,26]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;function k(T,I,P,w,C){if(!I)return{remote:{added:Object.keys(T),removed:[],updated:[],all:Object.keys(T).length>0?T:null},local:{added:{},removed:[],updated:{}}};const b=L(T,I);if(b.added.size===0&&b.removed.size===0&&b.updated.size===0)return{remote:{added:[],removed:[],updated:[],all:null},local:{added:{},removed:[],updated:{}}};const p=P?L(P,I):{added:Object.keys(I).reduce((m,u)=>(m.add(u),m),new Set),removed:new Set,updated:new Set},S=P?L(P,T):{added:Object.keys(T).reduce((m,u)=>(m.add(u),m),new Set),removed:new Set,updated:new Set},f={added:{},removed:[],updated:{}},g=D.deepClone(I),y=!P;for(const m of S.added.values())m!==i.SYNC_SERVICE_URL_TYPE&&y&&p.added.has(m)||(g[m]=T[m]);for(const m of S.updated.values())g[m]=T[m];for(const m of S.removed.values())w.unregistered.includes(m)||delete g[m];for(const m of p.added.values()){const u=I[m];if(w.machine.includes(m)){C.info(`GlobalState: Skipped adding ${m} in local storage because it is declared as machine scoped.`);continue}if(P&&S.added.has(m))continue;const h=T[m];h&&h.value===u.value||m===i.SYNC_SERVICE_URL_TYPE&&y&&S.added.has(m)||(h?f.updated[m]=u:f.added[m]=u)}for(const m of p.updated.values()){const u=I[m];if(w.machine.includes(m)){C.info(`GlobalState: Skipped updating ${m} in local storage because it is declared as machine scoped.`);continue}if(S.updated.has(m)||S.removed.has(m))continue;const h=T[m];h&&h.value===u.value||(f.updated[m]=u)}for(const m of p.removed.values()){if(w.machine.includes(m)){C.trace(`GlobalState: Skipped removing ${m} in local storage because it is declared as machine scoped.`);continue}S.updated.has(m)||S.removed.has(m)||f.removed.push(m)}const l=L(I,g);return{local:f,remote:{added:[...l.added],updated:[...l.updated],removed:[...l.removed],all:l.added.size===0&&l.removed.size===0&&l.updated.size===0?null:g}}}e.merge=k;function L(T,I){const P=Object.keys(T),w=Object.keys(I),C=w.filter(S=>P.indexOf(S)===-1).reduce((S,f)=>(S.add(f),S),new Set),b=P.filter(S=>w.indexOf(S)===-1).reduce((S,f)=>(S.add(f),S),new Set),p=new Set;for(const S of P){if(b.has(S))continue;const f=T[S],g=I[S];D.equals(f,g)||p.add(S)}return{added:C,removed:b,updated:p}}}),define(se[257],oe([0,1,20,35,83,43,32,60,26]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addSetting=e.isEmpty=e.areSame=e.merge=e.updateIgnoredSettings=e.removeComments=e.getIgnoredSettings=void 0;function w(a,v,E){let R=[];E?R=b(E):R=C(v);const N=[],O=[...(0,P.getDisallowedIgnoredSettings)()];if(Array.isArray(R))for(const z of R)z.startsWith("-")?O.push(z.substring(1)):N.push(z);return(0,D.distinct)([...a,...N].filter(z=>O.indexOf(z)===-1))}e.getIgnoredSettings=w;function C(a){let v=a.inspect("settingsSync.ignoredSettings").userValue;return v!==void 0||(v=a.inspect("sync.ignoredSettings").userValue,v!==void 0)?v:a.getValue("settingsSync.ignoredSettings")||[]}function b(a){const v=(0,i.parse)(a);return v?v["settingsSync.ignoredSettings"]||v["sync.ignoredSettings"]||[]:[]}function p(a,v){const E=(0,i.parse)(a)||{};let R="{}";for(const N of Object.keys(E)){const O=(0,k.setProperty)(R,[N],E[N],v);R=(0,k.applyEdits)(R,O)}return R}e.removeComments=p;function S(a,v,E,R){if(E.length){const N=c(v),O=(0,i.parse)(v)||{},z=(0,i.parse)(a);if(!z)return a;const F=[];for(const A of E){const M=O[A],$=z[A];M===void 0?a=I.edit(a,[A],void 0,R):$!==void 0?a=I.edit(a,[A],M,R):F.push(n(A,N))}F.sort((A,M)=>A.startOffset-M.startOffset),F.forEach(A=>a=m(A.setting.key,v,a,R))}return a}e.updateIgnoredSettings=S;function f(a,v,E,R,N,O){const z=S(a,v,R,O),F=E!==z,A=E!==v;if(!F&&!A)return{conflictsSettings:[],localContent:null,remoteContent:null,hasConflicts:!1};if(F&&!A)return{conflictsSettings:[],localContent:null,remoteContent:z,hasConflicts:!1};if(A&&!F)return{conflictsSettings:[],localContent:S(v,a,R,O),remoteContent:null,hasConflicts:!1};if(E===null&&y(a)){const j=g(a,v,R)?null:S(v,a,R,O);return{conflictsSettings:[],localContent:j,remoteContent:null,hasConflicts:!1}}let M=a,$=v;const V=(0,i.parse)(a),B=(0,i.parse)(v),Q=E?(0,i.parse)(E):null,W=R.reduce((j,J)=>(j.add(J),j),new Set),q=l(V,B,W),G=l(Q,V,W),ee=l(Q,B,W),ae=new Map,K=new Set,X=j=>{K.add(j);const J=N.filter(({key:re})=>re===j)[0];J?(M=I.edit(M,[j],J.value,O),$=I.edit($,[j],J.value,O)):ae.set(j,{key:j,localValue:V[j],remoteValue:B[j]})};for(const j of G.removed.values())ee.updated.has(j)?X(j):$=I.edit($,[j],void 0,O);for(const j of ee.removed.values())K.has(j)||(G.updated.has(j)?X(j):M=I.edit(M,[j],void 0,O));for(const j of G.updated.values())K.has(j)||(ee.updated.has(j)?q.updated.has(j)&&X(j):$=I.edit($,[j],V[j],O));for(const j of ee.updated.values())K.has(j)||(G.updated.has(j)?q.updated.has(j)&&X(j):M=I.edit(M,[j],B[j],O));for(const j of G.added.values())K.has(j)||(ee.added.has(j)?q.updated.has(j)&&X(j):$=m(j,M,$,O));for(const j of ee.added.values())K.has(j)||(G.added.has(j)?q.updated.has(j)&&X(j):M=m(j,$,M,O));const _=ae.size>0||!g(M,$,R),U=_||!g(M,a,[]),x=_||!g($,v,[]);return{localContent:U?M:null,remoteContent:x?$:null,conflictsSettings:[...ae.values()],hasConflicts:_}}e.merge=f;function g(a,v,E){if(a===v)return!0;const R=(0,i.parse)(a),N=(0,i.parse)(v),O=E.reduce((A,M)=>(A.add(M),A),new Set),z=c(a).filter(A=>!(A.setting&&O.has(A.setting.key))),F=c(v).filter(A=>!(A.setting&&O.has(A.setting.key)));if(z.length!==F.length)return!1;for(let A=0;A<z.length;A++){const M=z[A],$=F[A];if(M.setting&&$.setting){if(M.setting.key!==$.setting.key||!T.equals(R[M.setting.key],N[M.setting.key]))return!1}else if(!M.setting&&!$.setting){if(M.value!==$.value)return!1}else return!1}return!0}e.areSame=g;function y(a){return a?c(a).length===0:!0}e.isEmpty=y;function l(a,v,E){const R=a?Object.keys(a).filter(A=>!E.has(A)):[],N=Object.keys(v).filter(A=>!E.has(A)),O=N.filter(A=>R.indexOf(A)===-1).reduce((A,M)=>(A.add(M),A),new Set),z=R.filter(A=>N.indexOf(A)===-1).reduce((A,M)=>(A.add(M),A),new Set),F=new Set;if(a)for(const A of R){if(z.has(A))continue;const M=a[A],$=v[A];T.equals(M,$)||F.add(A)}return{added:O,removed:z,updated:F}}function m(a,v,E,R){const N=(0,i.parse)(v),O=c(v),z=c(E),F=u(a,O,z);return h(E,a,N[a],F,z,R)}e.addSetting=m;function u(a,v,E){const R=v.findIndex(O=>O.setting?.key===a),N=v[R-1];if(N){if(N.setting){const z=n(N.setting.key,E);if(z)return{index:E.indexOf(z),insertAfter:!0}}else{const z=o(R,v);if(z){const F=n(z.setting.key,E);if(F){const A=t(E.indexOf(F),E),M=s(v,z,v[R]);if(A){const $=s(E,F,A),V=r(M,$);return V?{index:E.indexOf(V),insertAfter:!0}:{index:E.indexOf(A),insertAfter:!1}}else{const $=s(E,F,E[E.length-1]),V=r(M,$);return V?{index:E.indexOf(V),insertAfter:!0}:{index:E.length-1,insertAfter:!0}}}}}const O=v[R+1];if(O)if(O.setting){const z=n(O.setting.key,E);if(z)return{index:E.indexOf(z),insertAfter:!1}}else{const z=t(R,v);if(z){const F=n(z.setting.key,E);if(F){const A=o(E.indexOf(F),E),M=s(v,v[R],z);if(A){const $=s(E,A,F),V=r(M.reverse(),$.reverse());return V?{index:E.indexOf(V),insertAfter:!1}:{index:E.indexOf(A),insertAfter:!0}}else{const $=s(E,E[0],F),V=r(M.reverse(),$.reverse());return V?{index:E.indexOf(V),insertAfter:!1}:{index:0,insertAfter:!1}}}}}}return{index:E.length-1,insertAfter:!0}}function h(a,v,E,R,N,O){let z;return R.index===-1?z=(0,k.setProperty)(a,[v],E,O):z=d(a,v,E,R,N,O).map(F=>(0,k.withFormatting)(a,F,O)[0]),(0,k.applyEdits)(a,z)}function d(a,v,E,R,N,O){const z=`${JSON.stringify(v)}: ${JSON.stringify(E)}`,F=(0,L.getEOL)(O,a),A=N[R.index];if(R.insertAfter){const M=[];if(A.setting)M.push({offset:A.endOffset,length:0,content:","+z});else{const $=t(R.index,N),V=o(R.index,N),B=V?.setting?.commaOffset;V&&B===void 0&&M.push({offset:V.endOffset,length:0,content:","});const Q=B!==void 0&&B>A.endOffset;M.push({offset:Q?B+1:A.endOffset,length:0,content:$?F+z+",":F+z})}return M}else{if(A.setting)return[{offset:A.startOffset,length:0,content:z+","}];const M=(N[R.index-1]&&!N[R.index-1].setting?F:"")+z+(t(R.index,N)?",":"")+F;return[{offset:A.startOffset,length:0,content:M}]}}function n(a,v){return v.filter(E=>E.setting?.key===a)[0]}function o(a,v){for(let E=a-1;E>=0;E--)if(v[E].setting)return v[E]}function t(a,v){for(let E=a+1;E<v.length;E++)if(v[E].setting)return v[E]}function s(a,v,E){const R=a.indexOf(v),N=a.indexOf(E);return a.filter((O,z)=>R<z&&z<N)}function r(a,v){if(a.length&&v.length){let E=0;for(;E<v.length&&E<a.length;E++)if(a[E].value!==v[E].value)return v[E-1];return v[E-1]}}function c(a){const v=[];let E=-1,R,N;const O={onObjectBegin:z=>{E++},onObjectProperty:(z,F,A)=>{E===0&&(R=F,N=z)},onObjectEnd:(z,F)=>{E--,E===0&&v.push({startOffset:R,endOffset:z+F,value:a.substring(R,z+F),setting:{key:N,commaOffset:void 0}})},onArrayBegin:(z,F)=>{E++},onArrayEnd:(z,F)=>{E--,E===0&&v.push({startOffset:R,endOffset:z+F,value:a.substring(R,z+F),setting:{key:N,commaOffset:void 0}})},onLiteralValue:(z,F,A)=>{E===0&&v.push({startOffset:R,endOffset:F+A,value:a.substring(R,F+A),setting:{key:N,commaOffset:void 0}})},onSeparator:(z,F,A)=>{if(E===0&&z===","){let M=v.length-1;for(;M>=0&&!v[M].setting;M--);const $=v[M];$&&v.splice(M,1,{startOffset:$.startOffset,endOffset:$.endOffset,value:$.value,setting:{key:$.setting.key,commaOffset:F}})}},onComment:(z,F)=>{E===0&&v.push({startOffset:z,endOffset:z+F,value:a.substring(z,z+F)})}};return(0,i.visit)(a,O),v}}),define(se[78],oe([0,1,3,2,4,26]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncAccountService=e.IUserDataSyncAccountService=void 0,e.IUserDataSyncAccountService=(0,k.createDecorator)("IUserDataSyncAccountService");let T=class extends i.Disposable{get account(){return this._account}constructor(P,w){super(),this.userDataSyncStoreService=P,this.logService=w,this._onDidChangeAccount=this._register(new D.Emitter),this.onDidChangeAccount=this._onDidChangeAccount.event,this._onTokenFailed=this._register(new D.Emitter),this.onTokenFailed=this._onTokenFailed.event,this.wasTokenFailed=!1,this._register(P.onTokenFailed(()=>{this.logService.info("Settings Sync auth token failed",this.account?.authenticationProviderId,this.wasTokenFailed),this.updateAccount(void 0),this._onTokenFailed.fire(this.wasTokenFailed),this.wasTokenFailed=!0})),this._register(P.onTokenSucceed(()=>this.wasTokenFailed=!1))}async updateAccount(P){(P&&this._account?P.token!==this._account.token||P.authenticationProviderId!==this._account.authenticationProviderId:P!==this._account)&&(this._account=P,this._account&&this.userDataSyncStoreService.setAuthToken(this._account.token,this._account.authenticationProviderId),this._onDidChangeAccount.fire(P))}};T=ve([H(0,L.IUserDataSyncStoreService),H(1,L.IUserDataSyncLogService)],T),e.UserDataSyncAccountService=T}),define(se[258],oe([0,1,2,7]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncStoreManagementServiceChannelClient=e.UserDataSyncStoreManagementServiceChannel=e.UserDataSyncAccountServiceChannel=e.UserDataSyncMachinesServiceChannel=e.UserDataSyncUtilServiceClient=e.UserDataSycnUtilServiceChannel=e.UserDataAutoSyncChannel=void 0;class k{constructor(p){this.service=p}listen(p,S){switch(S){case"onError":return this.service.onError}throw new Error(`Event not found: ${S}`)}call(p,S,f){switch(S){case"triggerSync":return this.service.triggerSync(f[0],f[1],f[2]);case"turnOn":return this.service.turnOn();case"turnOff":return this.service.turnOff(f[0])}throw new Error("Invalid call")}}e.UserDataAutoSyncChannel=k;class L{constructor(p){this.service=p}listen(p,S){throw new Error(`Event not found: ${S}`)}call(p,S,f){switch(S){case"resolveDefaultIgnoredSettings":return this.service.resolveDefaultIgnoredSettings();case"resolveUserKeybindings":return this.service.resolveUserBindings(f[0]);case"resolveFormattingOptions":return this.service.resolveFormattingOptions(i.URI.revive(f[0]))}throw new Error("Invalid call")}}e.UserDataSycnUtilServiceChannel=L;class T{constructor(p){this.channel=p}async resolveDefaultIgnoredSettings(){return this.channel.call("resolveDefaultIgnoredSettings")}async resolveUserBindings(p){return this.channel.call("resolveUserKeybindings",[p])}async resolveFormattingOptions(p){return this.channel.call("resolveFormattingOptions",[p])}}e.UserDataSyncUtilServiceClient=T;class I{constructor(p){this.service=p}listen(p,S){switch(S){case"onDidChange":return this.service.onDidChange}throw new Error(`Event not found: ${S}`)}async call(p,S,f){switch(S){case"getMachines":return this.service.getMachines();case"addCurrentMachine":return this.service.addCurrentMachine();case"removeCurrentMachine":return this.service.removeCurrentMachine();case"renameMachine":return this.service.renameMachine(f[0],f[1]);case"setEnablements":return this.service.setEnablements(f)}throw new Error("Invalid call")}}e.UserDataSyncMachinesServiceChannel=I;class P{constructor(p){this.service=p}listen(p,S){switch(S){case"onDidChangeAccount":return this.service.onDidChangeAccount;case"onTokenFailed":return this.service.onTokenFailed}throw new Error(`Event not found: ${S}`)}call(p,S,f){switch(S){case"_getInitialData":return Promise.resolve(this.service.account);case"updateAccount":return this.service.updateAccount(f)}throw new Error("Invalid call")}}e.UserDataSyncAccountServiceChannel=P;class w{constructor(p){this.service=p}listen(p,S){switch(S){case"onDidChangeUserDataSyncStore":return this.service.onDidChangeUserDataSyncStore}throw new Error(`Event not found: ${S}`)}call(p,S,f){switch(S){case"switch":return this.service.switch(f[0]);case"getPreviousUserDataSyncStore":return this.service.getPreviousUserDataSyncStore()}throw new Error("Invalid call")}}e.UserDataSyncStoreManagementServiceChannel=w;class C extends D.Disposable{constructor(p){super(),this.channel=p,this.onDidChangeUserDataSyncStore=this.channel.listen("onDidChangeUserDataSyncStore")}async switch(p){return this.channel.call("switch",[p])}async getPreviousUserDataSyncStore(){const p=await this.channel.call("getPreviousUserDataSyncStore");return this.revive(p)}revive(p){return{url:i.URI.revive(p.url),type:p.type,defaultUrl:i.URI.revive(p.defaultUrl),insidersUrl:i.URI.revive(p.insidersUrl),stableUrl:i.URI.revive(p.stableUrl),canSwitch:p.canSwitch,authenticationProviders:p.authenticationProviders}}}e.UserDataSyncStoreManagementServiceChannelClient=C}),define(se[259],oe([0,1,15,8]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncLogService=void 0;let k=class extends i.AbstractLogger{constructor(T,I){super(),this.logger=this._register(T.createLogger(I.userDataSyncLogResource,{name:"settingssync"}))}trace(T,...I){this.logger.trace(T,...I)}debug(T,...I){this.logger.debug(T,...I)}info(T,...I){this.logger.info(T,...I)}warn(T,...I){this.logger.warn(T,...I)}error(T,...I){this.logger.error(T,...I)}flush(){this.logger.flush()}};k=ve([H(0,i.ILoggerService),H(1,D.IEnvironmentService)],k),e.UserDataSyncLogService=k}),define(se[260],oe([0,1,6,3,2]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActiveWindowManager=void 0;class L extends k.Disposable{constructor({onDidOpenWindow:I,onDidFocusWindow:P,getActiveWindowId:w}){super(),this.disposables=this._register(new k.DisposableStore),i.Event.latch(i.Event.any(I,P))(this.setActiveWindow,this,this.disposables),this.firstActiveWindowIdPromise=(0,D.createCancelablePromise)(()=>w()),(async()=>{try{const b=await this.firstActiveWindowIdPromise;this.activeWindowId=typeof this.activeWindowId=="number"?this.activeWindowId:b}catch{}finally{this.firstActiveWindowIdPromise=void 0}})()}setActiveWindow(I){this.firstActiveWindowIdPromise&&(this.firstActiveWindowIdPromise.cancel(),this.firstActiveWindowIdPromise=void 0),this.activeWindowId=I}async getActiveClientId(){return`window:${this.firstActiveWindowIdPromise?await this.firstActiveWindowIdPromise:this.activeWindowId}`}}e.ActiveWindowManager=L}),define(se[116],oe([0,1,182,12,48,22,7,4,21]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasWorkspaceFileExtension=e.isSavedWorkspace=e.isTemporaryWorkspace=e.isUntitledWorkspace=e.UNTITLED_WORKSPACE_NAME=e.WORKSPACE_FILTER=e.WORKSPACE_SUFFIX=e.WORKSPACE_EXTENSION=e.toWorkspaceFolder=e.WorkspaceFolder=e.Workspace=e.isWorkspaceFolder=e.isWorkspace=e.WorkbenchState=e.reviveIdentifier=e.isWorkspaceIdentifier=e.toWorkspaceIdentifier=e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE=e.isSingleFolderWorkspaceIdentifier=e.IWorkspaceContextService=void 0,e.IWorkspaceContextService=(0,I.createDecorator)("contextService");function w(o){const t=o;return typeof t?.id=="string"&&T.URI.isUri(t.uri)}e.isSingleFolderWorkspaceIdentifier=w,e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE={id:"ext-dev"};function C(o,t){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:(0,i.basename)(o)}:t?e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE:void 0;const s=o;if(s.configuration)return{id:s.id,configPath:s.configuration};if(s.folders.length===1)return{id:s.id,uri:s.folders[0].uri}}e.toWorkspaceIdentifier=C;function b(o){const t=o;return typeof t?.id=="string"&&T.URI.isUri(t.configPath)}e.isWorkspaceIdentifier=b;function p(o){const t=o;if(t?.uri)return{id:t.id,uri:T.URI.revive(t.uri)};const s=o;if(s?.configPath)return{id:s.id,configPath:T.URI.revive(s.configPath)};if(o?.id)return{id:o.id}}e.reviveIdentifier=p;var S;(function(o){o[o.EMPTY=1]="EMPTY",o[o.FOLDER=2]="FOLDER",o[o.WORKSPACE=3]="WORKSPACE"})(S=e.WorkbenchState||(e.WorkbenchState={}));function f(o){const t=o;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&Array.isArray(t.folders))}e.isWorkspace=f;function g(o){const t=o;return!!(t&&typeof t=="object"&&T.URI.isUri(t.uri)&&typeof t.name=="string"&&typeof t.toResource=="function")}e.isWorkspaceFolder=g;class y{constructor(t,s,r,c,a){this._id=t,this._transient=r,this._configuration=c,this._ignorePathCasing=a,this._foldersMap=k.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0),this.folders=s}update(t){this._id=t.id,this._configuration=t.configuration,this._transient=t.transient,this._ignorePathCasing=t._ignorePathCasing,this.folders=t.folders}get folders(){return this._folders}set folders(t){this._folders=t,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(t){this._configuration=t}getFolder(t){return t&&this._foldersMap.findSubstr(t)||null}updateFoldersMap(){this._foldersMap=k.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0);for(const t of this.folders)this._foldersMap.set(t.uri,t)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}e.Workspace=y;class l{constructor(t,s){this.raw=s,this.uri=t.uri,this.index=t.index,this.name=t.name}toResource(t){return(0,L.joinPath)(this.uri,t)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}e.WorkspaceFolder=l;function m(o){return new l({uri:o,index:0,name:(0,L.basenameOrAuthority)(o)},{uri:o.toString()})}e.toWorkspaceFolder=m,e.WORKSPACE_EXTENSION="code-workspace",e.WORKSPACE_SUFFIX=`.${e.WORKSPACE_EXTENSION}`,e.WORKSPACE_FILTER=[{name:(0,D.localize)(0,null),extensions:[e.WORKSPACE_EXTENSION]}],e.UNTITLED_WORKSPACE_NAME="workspace.json";function u(o,t){return L.extUriBiasedIgnorePathCase.isEqualOrParent(o,t.untitledWorkspacesHome)}e.isUntitledWorkspace=u;function h(o){let t;return T.URI.isUri(o)?t=o:t=o.configuration,t?.scheme===P.Schemas.tmp}e.isTemporaryWorkspace=h;function d(o,t){return!u(o,t)&&!h(o)}e.isSavedWorkspace=d;function n(o){return(typeof o=="string"?(0,i.extname)(o):(0,L.extname)(o))===e.WORKSPACE_SUFFIX}e.hasWorkspaceFileExtension=n}),define(se[18],oe([0,1,66,3,2,22,7,174,15,13,4,8,116,37,30,6,31,27,14]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryUserDataProfilesService=e.UserDataProfilesService=e.toUserDataProfile=e.reviveProfile=e.IUserDataProfilesService=e.PROFILES_ENABLEMENT_CONFIG=e.isUserDataProfile=void 0;function u(t){const s=t;return!!(s&&typeof s=="object"&&typeof s.id=="string"&&typeof s.isDefault=="boolean"&&typeof s.name=="string"&&T.URI.isUri(s.location)&&T.URI.isUri(s.globalStorageHome)&&T.URI.isUri(s.settingsResource)&&T.URI.isUri(s.keybindingsResource)&&T.URI.isUri(s.tasksResource)&&T.URI.isUri(s.snippetsHome)&&T.URI.isUri(s.extensionsResource))}e.isUserDataProfile=u,e.PROFILES_ENABLEMENT_CONFIG="workbench.experimental.settingsProfiles.enabled",e.IUserDataProfilesService=(0,C.createDecorator)("IUserDataProfilesService");function h(t,s){return{id:t.id,isDefault:t.isDefault,name:t.name,shortName:t.shortName,location:T.URI.revive(t.location).with({scheme:s}),globalStorageHome:T.URI.revive(t.globalStorageHome).with({scheme:s}),settingsResource:T.URI.revive(t.settingsResource).with({scheme:s}),keybindingsResource:T.URI.revive(t.keybindingsResource).with({scheme:s}),tasksResource:T.URI.revive(t.tasksResource).with({scheme:s}),snippetsHome:T.URI.revive(t.snippetsHome).with({scheme:s}),extensionsResource:T.URI.revive(t.extensionsResource)?.with({scheme:s}),useDefaultFlags:t.useDefaultFlags,isTransient:t.isTransient}}e.reviveProfile=h;function d(t,s,r,c){return{id:t,name:s,location:r,isDefault:!1,shortName:c?.shortName,globalStorageHome:(0,L.joinPath)(r,"globalStorage"),settingsResource:(0,L.joinPath)(r,"settings.json"),keybindingsResource:(0,L.joinPath)(r,"keybindings.json"),tasksResource:(0,L.joinPath)(r,"tasks.json"),snippetsHome:(0,L.joinPath)(r,"snippets"),extensionsResource:(0,L.joinPath)(r,"extensions.json"),useDefaultFlags:c?.useDefaultFlags,isTransient:c?.transient}}e.toUserDataProfile=d;let n=class extends k.Disposable{get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(s,r,c,a){super(),this.environmentService=s,this.fileService=r,this.uriIdentityService=c,this.logService=a,this.enabled=!1,this._onDidChangeProfiles=this._register(new i.Emitter),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new i.Emitter),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new i.Emitter),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new i.Emitter),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],workspaces:new S.ResourceMap},this.profilesHome=(0,L.joinPath)(this.environmentService.userRoamingDataHome,"profiles")}setEnablement(s){this.enabled!==s&&(this._profilesObject=void 0,this.enabled=s)}isEnabled(){return this.enabled}get profilesObject(){if(!this._profilesObject){const s=[];if(this.enabled)for(const v of this.getStoredProfiles()){if(!v.name||!(0,m.isString)(v.name)||!v.location){this.logService.warn("Skipping the invalid stored profile",v.location||v.name);continue}s.push(d((0,L.basename)(v.location),v.name,v.location,{shortName:v.shortName,useDefaultFlags:v.useDefaultFlags}))}let r;const c=new S.ResourceMap,a=d((0,D.hash)(this.environmentService.userRoamingDataHome.path).toString(16),(0,I.localize)(0,null),this.environmentService.userRoamingDataHome);if(s.unshift({...a,extensionsResource:this.getDefaultProfileExtensionsLocation()??a.extensionsResource,isDefault:!0}),s.length){const v=this.getStoredProfileAssociations();if(v.workspaces)for(const[E,R]of Object.entries(v.workspaces)){const N=T.URI.parse(E),O=T.URI.parse(R),z=s.find(F=>this.uriIdentityService.extUri.isEqual(F.location,O));z&&c.set(N,z)}if(v.emptyWindow){const E=T.URI.parse(v.emptyWindow);r=s.find(R=>this.uriIdentityService.extUri.isEqual(R.location,E))}}this._profilesObject={profiles:s,workspaces:c,emptyWindow:r}}return this._profilesObject}async createTransientProfile(s){const r="Temp",c=new RegExp(`${(0,l.escapeRegExpCharacters)(r)}\\s(\\d+)`);let a=0;for(const E of this.profiles){const R=c.exec(E.name),N=R?parseInt(R[1]):0;a=N>a?N:a}const v=`${r} ${a+1}`;return this.createProfile((0,D.hash)((0,y.generateUuid)()).toString(16),v,{transient:!0},s)}async createNamedProfile(s,r,c){return this.createProfile((0,D.hash)((0,y.generateUuid)()).toString(16),s,r,c)}async createProfile(s,r,c,a){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);const v=await this.doCreateProfile(s,r,c);return a&&await this.setProfileForWorkspace(a,v),v}async doCreateProfile(s,r,c){if(!(0,m.isString)(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let a=this.profileCreationPromises.get(r);return a||(a=(async()=>{try{const v=this.profiles.find(N=>N.name===r||N.id===s);if(v)return v;const E=d(s,r,(0,L.joinPath)(this.profilesHome,s),c);await this.fileService.createFolder(E.location);const R=[];return this._onWillCreateProfile.fire({profile:E,join(N){R.push(N)}}),await g.Promises.settled(R),this.updateProfiles([E],[],[]),E}finally{this.profileCreationPromises.delete(r)}})(),this.profileCreationPromises.set(r,a)),a}async updateProfile(s,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);let c=this.profiles.find(a=>a.id===s.id);if(!c)throw new Error(`Profile '${s.name}' does not exist`);return c=d(c.id,r.name??c.name,c.location,{shortName:r.shortName??c.shortName,transient:r.transient??c.isTransient,useDefaultFlags:r.useDefaultFlags??c.useDefaultFlags}),this.updateProfiles([],[],[c]),c}async removeProfile(s){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);if(s.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(a=>a.id===s.id);if(!r)throw new Error(`Profile '${s.name}' does not exist`);const c=[];this._onWillRemoveProfile.fire({profile:r,join(a){c.push(a)}});try{await Promise.allSettled(c)}catch(a){this.logService.error(a)}r.id===this.profilesObject.emptyWindow?.id&&(this.profilesObject.emptyWindow=void 0);for(const a of[...this.profilesObject.workspaces.keys()])r.id===this.profilesObject.workspaces.get(a)?.id&&this.profilesObject.workspaces.delete(a);this.updateStoredProfileAssociations(),this.updateProfiles([],[r],[]);try{this.profiles.length===1?await this.fileService.del(this.profilesHome,{recursive:!0}):await this.fileService.del(r.location,{recursive:!0})}catch(a){this.logService.error(a)}}getOrSetProfileForWorkspace(s,r=this.defaultProfile){if(!this.enabled)return this.defaultProfile;let c=this.getProfileForWorkspace(s);return c||(c=r,this.profiles.length>1&&this.setProfileForWorkspaceSync(s,c)),c}async setProfileForWorkspace(s,r){this.setProfileForWorkspaceSync(s,r)}setProfileForWorkspaceSync(s,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);const c=this.profiles.find(a=>a.id===r.id);if(!c)throw new Error(`Profile '${r.name}' does not exist`);this.updateWorkspaceAssociation(s,c)}unsetWorkspace(s,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);this.updateWorkspaceAssociation(s,void 0,r)}async resetWorkspaces(){this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindow=void 0,this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindow=void 0,this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(!!this.enabled&&await this.fileService.exists(this.profilesHome)){const s=await this.fileService.resolve(this.profilesHome);await Promise.all((s.children||[]).filter(r=>r.isDirectory&&this.profiles.every(c=>!this.uriIdentityService.extUri.isEqual(c.location,r.resource))).map(r=>this.fileService.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;const s=this.transientProfilesObject.profiles.filter(r=>!this.isProfileAssociatedToWorkspace(r));await Promise.allSettled(s.map(r=>this.removeProfile(r)))}getProfileForWorkspace(s){const r=this.getWorkspace(s);return T.URI.isUri(r)?this.transientProfilesObject.workspaces.get(r)??this.profilesObject.workspaces.get(r):this.transientProfilesObject.emptyWindow??this.profilesObject.emptyWindow}getWorkspace(s){return(0,p.isSingleFolderWorkspaceIdentifier)(s)?s.uri:(0,p.isWorkspaceIdentifier)(s)?s.configPath:"empty-window"}isProfileAssociatedToWorkspace(s){return!!(this.uriIdentityService.extUri.isEqual(this.transientProfilesObject.emptyWindow?.location,s.location)||[...this.transientProfilesObject.workspaces.values()].some(r=>this.uriIdentityService.extUri.isEqual(r.location,s.location))||this.uriIdentityService.extUri.isEqual(this.profilesObject.emptyWindow?.location,s.location)||[...this.profilesObject.workspaces.values()].some(r=>this.uriIdentityService.extUri.isEqual(r.location,s.location)))}updateProfiles(s,r,c){const a=[...this.profiles,...s],v=[];this.transientProfilesObject.profiles=[];for(let E of a)E.isDefault||r.some(R=>E.id===R.id)||(E=c.find(R=>E.id===R.id)??E,E.isTransient?this.transientProfilesObject.profiles.push(E):v.push({location:E.location,name:E.name,shortName:E.shortName,useDefaultFlags:E.useDefaultFlags}));this.saveStoredProfiles(v),this._profilesObject=void 0,this.triggerProfilesChanges(s,r,c)}triggerProfilesChanges(s,r,c){this._onDidChangeProfiles.fire({added:s,removed:r,updated:c,all:this.profiles})}updateWorkspaceAssociation(s,r,c){c=r?.isTransient?!0:c,c||this.updateWorkspaceAssociation(s,void 0,!0);const a=this.getWorkspace(s),v=c?this.transientProfilesObject:this.profilesObject;T.URI.isUri(a)?(v.workspaces.delete(a),r&&v.workspaces.set(a,r)):v.emptyWindow=r,c||this.updateStoredProfileAssociations()}updateStoredProfileAssociations(){const s={};for(const[c,a]of this.profilesObject.workspaces.entries())s[c.toString()]=a.location.toString();const r=this.profilesObject.emptyWindow?.location.toString();this.saveStoredProfileAssociations({workspaces:s,emptyWindow:r}),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(s){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(s){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};n.PROFILES_KEY="userDataProfiles",n.PROFILE_ASSOCIATIONS_KEY="profileAssociations",n=ve([H(0,P.IEnvironmentService),H(1,w.IFileService),H(2,f.IUriIdentityService),H(3,b.ILogService)],n),e.UserDataProfilesService=n;class o extends n{constructor(){super(...arguments),this.storedProfiles=[],this.storedProfileAssociations={}}getStoredProfiles(){return this.storedProfiles}saveStoredProfiles(s){this.storedProfiles=s}getStoredProfileAssociations(){return this.storedProfileAssociations}saveStoredProfileAssociations(s){this.storedProfileAssociations=s}}e.InMemoryUserDataProfilesService=o}),define(se[261],oe([0,1,6,2,18]),function(Z,e,D,i,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataProfilesCleaner=void 0;let L=class extends i.Disposable{constructor(I){super(),this._register(new D.RunOnceScheduler(()=>{I.cleanUp()},10*1e3)).schedule()}};L=ve([H(0,k.IUserDataProfilesService)],L),e.UserDataProfilesCleaner=L}),define(se[262],oe([0,1,20,6,24,9,3,2,5,7,155,29,33,42,8,25,23,18]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractExtensionTask=e.reportTelemetry=e.joinErrors=e.AbstractExtensionManagementService=void 0;let m=class extends I.Disposable{get onInstallExtension(){return this._onInstallExtension.event}get onDidInstallExtensions(){return this._onDidInstallExtensions.event}get onUninstallExtension(){return this._onUninstallExtension.event}get onDidUninstallExtension(){return this._onDidUninstallExtension.event}constructor(t,s,r,c,a){super(),this.galleryService=t,this.telemetryService=s,this.logService=r,this.productService=c,this.userDataProfilesService=a,this.lastReportTimestamp=0,this.installingExtensions=new Map,this.uninstallingExtensions=new Map,this._onInstallExtension=this._register(new T.Emitter),this._onDidInstallExtensions=this._register(new T.Emitter),this._onUninstallExtension=this._register(new T.Emitter),this._onDidUninstallExtension=this._register(new T.Emitter),this.participants=[],this._register((0,I.toDisposable)(()=>{this.installingExtensions.forEach(({task:v})=>v.cancel()),this.uninstallingExtensions.forEach(v=>v.cancel()),this.installingExtensions.clear(),this.uninstallingExtensions.clear()}))}async canInstall(t){const s=await this.getTargetPlatform();return t.allTargetPlatforms.some(r=>(0,b.isTargetPlatformCompatible)(r,t.allTargetPlatforms,s))}async installFromGallery(t,s={}){try{if(!this.galleryService.isEnabled())throw new b.ExtensionManagementError(C.localize(0,null),b.ExtensionManagementErrorCode.Internal);const r=await this.checkAndGetCompatibleVersion(t,!!s.installGivenVersion,!!s.installPreReleaseVersion);return await this.installExtension(r.manifest,r.extension,s)}catch(r){throw d(this.telemetryService,"extensionGallery:install",{extensionData:(0,p.getGalleryExtensionTelemetryData)(t),error:r}),this.logService.error("Failed to install extension.",t.identifier.id),this.logService.error(r),h(r)}}async uninstall(t,s={}){return this.logService.trace("ExtensionManagementService#uninstall",t.identifier.id),this.uninstallExtension(t,s)}getExtensionsControlManifest(){const t=new Date().getTime();return(!this.extensionsControlManifest||t-this.lastReportTimestamp>1e3*60*5)&&(this.extensionsControlManifest=this.updateControlCache(),this.lastReportTimestamp=t),this.extensionsControlManifest}registerParticipant(t){this.participants.push(t)}async installExtension(t,s,r){const c={...r,installOnlyNewlyAddedFromExtensionPack:w.URI.isUri(s)?r.installOnlyNewlyAddedFromExtensionPack:!0,profileLocation:(0,S.isApplicationScopedExtension)(t)?this.userDataProfilesService.defaultProfile.extensionsResource:r.profileLocation??this.getCurrentExtensionsManifestLocation()},a=z=>`${p.ExtensionKey.create(z).toString()}${c.profileLocation?`-${c.profileLocation.toString()}`:""}`;if(!w.URI.isUri(s)){const z=this.installingExtensions.get(a(s));if(z){this.logService.info("Extensions is already requested to install",s.identifier.id);const{local:F}=await z.task.waitUntilTaskIsFinished();return F}}const v=[],E=[],R=[],N=this.createInstallExtensionTask(t,s,c);w.URI.isUri(s)||this.installingExtensions.set(a(s),{task:N,waitingTasks:[]}),this._onInstallExtension.fire({identifier:N.identifier,source:s,profileLocation:c.profileLocation}),this.logService.info("Installing extension:",N.identifier.id),v.push({task:N,manifest:t});let O=!1;try{if(c.donotIncludePackAndDependencies)this.logService.info("Installing the extension without checking dependencies and pack",N.identifier.id);else try{const F=await this.getAllDepsAndPackExtensions(N.identifier,t,!!c.installOnlyNewlyAddedFromExtensionPack,!!c.installPreReleaseVersion,c.profileLocation),A=await this.getInstalled(void 0,c.profileLocation);for(const{gallery:M,manifest:$}of(0,D.distinct)(F,({gallery:V})=>V.identifier.id)){O=O||!!$.extensionDependencies?.some(Q=>(0,p.areSameExtensions)({id:Q},N.identifier));const V=a(M),B=this.installingExtensions.get(V);if(B){if(this.canWaitForTask(N,B.task)){const Q=B.task.identifier;this.logService.info("Waiting for already requested installing extension",Q.id,N.identifier.id),B.waitingTasks.push(N),E.push(T.Event.toPromise(T.Event.filter(this.onDidInstallExtensions,W=>W.some(q=>(0,p.areSameExtensions)(q.identifier,Q)))).then(W=>{if(this.logService.info("Finished waiting for already requested installing extension",Q.id,N.identifier.id),!W.find(G=>(0,p.areSameExtensions)(G.identifier,Q))?.local)throw new Error(`Extension ${Q.id} is not installed`)}))}}else if(!A.some(({identifier:Q})=>(0,p.areSameExtensions)(Q,M.identifier))){const Q=this.createInstallExtensionTask($,M,{...c,donotIncludePackAndDependencies:!0});this.installingExtensions.set(V,{task:Q,waitingTasks:[N]}),this._onInstallExtension.fire({identifier:Q.identifier,source:M,profileLocation:c.profileLocation}),this.logService.info("Installing extension:",Q.identifier.id,N.identifier.id),v.push({task:Q,manifest:$})}}}catch(F){if(w.URI.isUri(N.source))(0,D.isNonEmptyArray)(t.extensionDependencies)&&this.logService.warn("Cannot install dependencies of extension:",N.identifier.id,F.message),(0,D.isNonEmptyArray)(t.extensionPack)&&this.logService.warn("Cannot install packed extensions of extension:",N.identifier.id,F.message);else throw this.logService.error("Error while preparing to install dependencies and extension packs of the extension:",N.identifier.id),F}const z=v.reduce((F,{task:A,manifest:M})=>(F.set(A.identifier.id.toLowerCase(),{task:A,manifest:M}),F),new Map);for(;z.size;){let F;const A=[...z.values()].filter(({manifest:M})=>!M.extensionDependencies?.some($=>z.has($.toLowerCase())));A.length?F=z.size===1?A:A.filter(({task:M})=>!(M===N&&!O)):(this.logService.info("Found extensions with circular dependencies",A.map(({task:M})=>M.identifier.id)),F=[...z.values()]),await this.joinAllSettled(F.map(async({task:M})=>{const $=new Date().getTime();try{const{local:V}=await M.run();if(await this.joinAllSettled(this.participants.map(B=>B.postInstall(V,M.source,c,k.CancellationToken.None))),!w.URI.isUri(M.source)){const B=M.operation===3,Q=B?void 0:(new Date().getTime()-M.source.lastUpdated)/1e3;if(d(this.telemetryService,B?"extensionGallery:update":"extensionGallery:install",{extensionData:(0,p.getGalleryExtensionTelemetryData)(M.source),wasVerified:M.wasVerified,duration:new Date().getTime()-$,durationSinceUpdate:Q}),P.isWeb&&M.operation!==3)try{await this.galleryService.reportStatistic(V.manifest.publisher,V.manifest.name,V.manifest.version,"install")}catch{}}R.push({local:V,identifier:M.identifier,operation:M.operation,source:M.source,context:c.context,profileLocation:c.profileLocation,applicationScoped:V.isApplicationScoped})}catch(V){throw w.URI.isUri(M.source)||d(this.telemetryService,M.operation===3?"extensionGallery:update":"extensionGallery:install",{extensionData:(0,p.getGalleryExtensionTelemetryData)(M.source),wasVerified:M.wasVerified,duration:new Date().getTime()-$,error:V}),this.logService.error("Error while installing the extension:",M.identifier.id),V}finally{z.delete(M.identifier.id.toLowerCase())}}))}return E.length&&await this.joinAllSettled(E),R.forEach(({identifier:F})=>this.logService.info("Extension installed successfully:",F.id)),this._onDidInstallExtensions.fire(R),R.filter(({identifier:F})=>(0,p.areSameExtensions)(F,N.identifier))[0].local}catch(z){if(v.forEach(({task:F})=>F.cancel()),R.length)try{const F=await Promise.allSettled(R.map(({local:A})=>this.createUninstallExtensionTask(A,{versionOnly:!0,profileLocation:c.profileLocation}).run()));for(let A=0;A<F.length;A++){const M=F[A],{identifier:$}=R[A];M.status==="fulfilled"?this.logService.info("Rollback: Uninstalled extension",$.id):this.logService.warn("Rollback: Error while uninstalling extension",$.id,(0,L.getErrorMessage)(M.reason))}}catch(F){this.logService.warn("Error while rolling back extensions",(0,L.getErrorMessage)(F),R.map(({identifier:A})=>A.id))}throw this._onDidInstallExtensions.fire(v.map(({task:F})=>({identifier:F.identifier,operation:2,source:F.source,context:c.context,profileLocation:c.profileLocation}))),z}finally{for(const{task:z}of v)z.source&&!w.URI.isUri(z.source)&&this.installingExtensions.delete(a(z.source))}}canWaitForTask(t,s){for(const[,{task:r,waitingTasks:c}]of this.installingExtensions.entries())if(r===t&&(c.includes(s)||c.some(a=>this.canWaitForTask(a,s)))||r===s&&c[0]&&!this.canWaitForTask(t,c[0]))return!1;return!0}async joinAllSettled(t){const s=[],r=[],c=await Promise.allSettled(t);for(const a of c)a.status==="fulfilled"?s.push(a.value):r.push(a.reason);if(r.length)throw u(r);return s}async getAllDepsAndPackExtensions(t,s,r,c,a){if(!this.galleryService.isEnabled())return[];const v=await this.getInstalled(void 0,a),E=[],R=[],N=async(O,z)=>{E.push(O);const F=z.extensionDependencies||[],A=[...F];if(z.extensionPack){const M=r?v.find($=>(0,p.areSameExtensions)($.identifier,O)):void 0;for(const $ of z.extensionPack)M&&M.manifest.extensionPack&&M.manifest.extensionPack.some(V=>(0,p.areSameExtensions)({id:V},{id:$}))||A.every(V=>!(0,p.areSameExtensions)({id:V},{id:$}))&&A.push($)}if(A.length){const M=A.filter($=>E.every(V=>!(0,p.areSameExtensions)(V,{id:$})));if(M.length){const $=await this.galleryService.getExtensions(M.map(V=>({id:V,preRelease:c})),k.CancellationToken.None);for(const V of $){if(E.find(W=>(0,p.areSameExtensions)(W,V.identifier)))continue;const B=F.some(W=>(0,p.areSameExtensions)({id:W},V.identifier));let Q;try{Q=await this.checkAndGetCompatibleVersion(V,!1,c)}catch(W){if(W instanceof b.ExtensionManagementError&&W.code===b.ExtensionManagementErrorCode.IncompatibleTargetPlatform&&!B){this.logService.info("Skipping the packed extension as it cannot be installed",V.identifier.id);continue}else throw W}R.push({gallery:Q.extension,manifest:Q.manifest}),await N(Q.extension.identifier,Q.manifest)}}}};return await N(t,s),R}async checkAndGetCompatibleVersion(t,s,r){if((await this.getExtensionsControlManifest()).malicious.some(E=>(0,p.areSameExtensions)(t.identifier,E)))throw new b.ExtensionManagementError(C.localize(1,null,t.identifier.id),b.ExtensionManagementErrorCode.Malicious);if(!await this.canInstall(t)){const E=await this.getTargetPlatform();throw new b.ExtensionManagementError(C.localize(2,null,t.identifier.id,this.productService.nameLong,(0,b.TargetPlatformToString)(E)),b.ExtensionManagementErrorCode.IncompatibleTargetPlatform)}const a=await this.getCompatibleVersion(t,s,r);if(a){if(r&&!s&&t.hasPreReleaseVersion&&!a.properties.isPreReleaseVersion)throw new b.ExtensionManagementError(C.localize(3,null,t.identifier.id,this.productService.nameLong,this.productService.version),b.ExtensionManagementErrorCode.IncompatiblePreRelease)}else throw!r&&t.properties.isPreReleaseVersion&&(await this.galleryService.getExtensions([t.identifier],k.CancellationToken.None))[0]?new b.ExtensionManagementError(C.localize(4,null,t.identifier.id),b.ExtensionManagementErrorCode.ReleaseVersionNotFound):new b.ExtensionManagementError(C.localize(5,null,t.identifier.id,this.productService.nameLong,this.productService.version),b.ExtensionManagementErrorCode.Incompatible);this.logService.info("Getting Manifest...",a.identifier.id);const v=await this.galleryService.getManifest(a,k.CancellationToken.None);if(v===null)throw new b.ExtensionManagementError(`Missing manifest for extension ${t.identifier.id}`,b.ExtensionManagementErrorCode.Invalid);if(v.version!==a.version)throw new b.ExtensionManagementError(`Cannot install '${t.identifier.id}' extension because of version mismatch in Marketplace`,b.ExtensionManagementErrorCode.Invalid);return{extension:a,manifest:v}}async getCompatibleVersion(t,s,r){const c=await this.getTargetPlatform();let a=null;return!s&&t.hasPreReleaseVersion&&t.properties.isPreReleaseVersion!==r&&(a=(await this.galleryService.getExtensions([{...t.identifier,preRelease:r}],{targetPlatform:c,compatible:!0},k.CancellationToken.None))[0]||null),!a&&await this.galleryService.isExtensionCompatible(t,r,c)&&(a=t),a||(s?a=(await this.galleryService.getExtensions([{...t.identifier,version:t.version}],{targetPlatform:c,compatible:!0},k.CancellationToken.None))[0]||null:a=await this.galleryService.getCompatibleExtension(t,r,c)),a}async uninstallExtension(t,s){const r={...s,profileLocation:t.isApplicationScoped?this.userDataProfilesService.defaultProfile.extensionsResource:s.profileLocation??this.getCurrentExtensionsManifestLocation()},c=O=>`${O.id.toLowerCase()}${r.versionOnly?`-${t.manifest.version}`:""}${r.profileLocation?`@${r.profileLocation.toString()}`:""}`,a=this.uninstallingExtensions.get(c(t.identifier));if(a)return this.logService.info("Extensions is already requested to uninstall",t.identifier.id),a.waitUntilTaskIsFinished();const v=O=>{const z=this.createUninstallExtensionTask(O,r);return this.uninstallingExtensions.set(c(z.extension.identifier),z),r.profileLocation?this.logService.info("Uninstalling extension from the profile:",`${O.identifier.id}@${O.manifest.version}`,r.profileLocation.toString()):this.logService.info("Uninstalling extension:",`${O.identifier.id}@${O.manifest.version}`),this._onUninstallExtension.fire({identifier:O.identifier,profileLocation:r.profileLocation,applicationScoped:O.isApplicationScoped}),z},E=(O,z)=>{z?r.profileLocation?this.logService.error("Failed to uninstall extension from the profile:",`${O.identifier.id}@${O.manifest.version}`,r.profileLocation.toString(),z.message):this.logService.error("Failed to uninstall extension:",`${O.identifier.id}@${O.manifest.version}`,z.message):r.profileLocation?this.logService.info("Successfully uninstalled extension from the profile",`${O.identifier.id}@${O.manifest.version}`,r.profileLocation.toString()):this.logService.info("Successfully uninstalled extension:",`${O.identifier.id}@${O.manifest.version}`),d(this.telemetryService,"extensionGallery:uninstall",{extensionData:(0,p.getLocalExtensionTelemetryData)(O),error:z}),this._onDidUninstallExtension.fire({identifier:O.identifier,error:z?.code,profileLocation:r.profileLocation,applicationScoped:O.isApplicationScoped})},R=[],N=[];try{R.push(v(t));const O=await this.getInstalled(1,r.profileLocation);if(r.donotIncludePack)this.logService.info("Uninstalling the extension without including packed extension",`${t.identifier.id}@${t.manifest.version}`);else{const z=this.getAllPackExtensionsToUninstall(t,O);for(const F of z)this.uninstallingExtensions.has(c(F.identifier))?this.logService.info("Extensions is already requested to uninstall",F.identifier.id):R.push(v(F))}r.donotCheckDependents?this.logService.info("Uninstalling the extension without checking dependents",`${t.identifier.id}@${t.manifest.version}`):this.checkForDependents(R.map(z=>z.extension),O,t),await this.joinAllSettled(R.map(async z=>{try{if(await z.run(),await this.joinAllSettled(this.participants.map(F=>F.postUninstall(z.extension,r,k.CancellationToken.None))),z.extension.identifier.uuid)try{await this.galleryService.reportStatistic(z.extension.manifest.publisher,z.extension.manifest.name,z.extension.manifest.version,"uninstall")}catch{}E(z.extension)}catch(F){const A=F instanceof b.ExtensionManagementError?F:new b.ExtensionManagementError((0,L.getErrorMessage)(F),b.ExtensionManagementErrorCode.Internal);throw E(z.extension,A),A}finally{N.push(z)}}))}catch(O){const z=O instanceof b.ExtensionManagementError?O:new b.ExtensionManagementError((0,L.getErrorMessage)(O),b.ExtensionManagementErrorCode.Internal);for(const F of R){try{F.cancel()}catch{}N.includes(F)||E(F.extension,z)}throw z}finally{for(const O of R)this.uninstallingExtensions.delete(c(O.extension.identifier))||this.logService.warn("Uninstallation task is not found in the cache",O.extension.identifier.id)}}checkForDependents(t,s,r){for(const c of t){const a=this.getDependents(c,s);if(a.length){const v=a.filter(E=>!t.some(R=>(0,p.areSameExtensions)(R.identifier,E.identifier)));if(v.length)throw new Error(this.getDependentsErrorMessage(c,v,r))}}}getDependentsErrorMessage(t,s,r){return r===t?s.length===1?C.localize(6,null,r.manifest.displayName||r.manifest.name,s[0].manifest.displayName||s[0].manifest.name):s.length===2?C.localize(7,null,r.manifest.displayName||r.manifest.name,s[0].manifest.displayName||s[0].manifest.name,s[1].manifest.displayName||s[1].manifest.name):C.localize(8,null,r.manifest.displayName||r.manifest.name,s[0].manifest.displayName||s[0].manifest.name,s[1].manifest.displayName||s[1].manifest.name):s.length===1?C.localize(9,null,r.manifest.displayName||r.manifest.name,t.manifest.displayName||t.manifest.name,s[0].manifest.displayName||s[0].manifest.name):s.length===2?C.localize(10,null,r.manifest.displayName||r.manifest.name,t.manifest.displayName||t.manifest.name,s[0].manifest.displayName||s[0].manifest.name,s[1].manifest.displayName||s[1].manifest.name):C.localize(11,null,r.manifest.displayName||r.manifest.name,t.manifest.displayName||t.manifest.name,s[0].manifest.displayName||s[0].manifest.name,s[1].manifest.displayName||s[1].manifest.name)}getAllPackExtensionsToUninstall(t,s,r=[]){if(r.indexOf(t)!==-1)return[];r.push(t);const c=t.manifest.extensionPack?t.manifest.extensionPack:[];if(c.length){const a=s.filter(E=>!E.isBuiltin&&c.some(R=>(0,p.areSameExtensions)({id:R},E.identifier))),v=[];for(const E of a)v.push(...this.getAllPackExtensionsToUninstall(E,s,r));return[...a,...v]}return[]}getDependents(t,s){return s.filter(r=>r.manifest.extensionDependencies&&r.manifest.extensionDependencies.some(c=>(0,p.areSameExtensions)({id:c},t.identifier)))}async updateControlCache(){try{this.logService.trace("ExtensionManagementService.refreshReportedCache");const t=await this.galleryService.getExtensionsControlManifest();return this.logService.trace("ExtensionManagementService.refreshControlCache",t),t}catch{return this.logService.trace("ExtensionManagementService.refreshControlCache - failed to get extension control manifest"),{malicious:[],deprecated:{}}}}};m=ve([H(0,b.IExtensionGalleryService),H(1,y.ITelemetryService),H(2,f.ILogService),H(3,g.IProductService),H(4,l.IUserDataProfilesService)],m),e.AbstractExtensionManagementService=m;function u(o){const t=Array.isArray(o)?o:[o];return t.length===1?t[0]instanceof Error?t[0]:new Error(t[0]):t.reduce((s,r)=>new Error(`${s.message}${s.message?",":""}${r instanceof Error?r.message:r}`),new Error(""))}e.joinErrors=u;function h(o){if(o instanceof b.ExtensionManagementError)return o;const t=new b.ExtensionManagementError(o.message,b.ExtensionManagementErrorCode.Internal);return t.stack=o.stack,t}function d(o,t,{extensionData:s,wasVerified:r,duration:c,error:a,durationSinceUpdate:v}){let E,R;a&&(a instanceof b.ExtensionManagementError?(E=a.code,a.code===b.ExtensionManagementErrorCode.Signature&&(R=a.message)):E=b.ExtensionManagementErrorCode.Internal),o.publicLog(t,{...s,wasVerified:r,success:!a,duration:c,errorcode:E,errorcodeDetail:R,durationSinceUpdate:v})}e.reportTelemetry=d;class n{constructor(){this.barrier=new i.Barrier}async waitUntilTaskIsFinished(){return await this.barrier.wait(),this.cancellablePromise}async run(){return this.cancellablePromise||(this.cancellablePromise=(0,i.createCancelablePromise)(t=>this.doRun(t))),this.barrier.open(),this.cancellablePromise}cancel(){this.cancellablePromise||(this.cancellablePromise=(0,i.createCancelablePromise)(t=>new Promise((s,r)=>{const c=t.onCancellationRequested(()=>{c.dispose(),r(new L.CancellationError)})})),this.barrier.open()),this.cancellablePromise.cancel()}}e.AbstractExtensionTask=n}),define(se[61],oe([0,1,6,17,2,3,37,7,33,42,13,4,8,18,30]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsProfileScannerService=e.IExtensionsProfileScannerService=void 0,e.IExtensionsProfileScannerService=(0,b.createDecorator)("IExtensionsProfileScannerService");let g=class extends k.Disposable{constructor(m,u,h,d){super(),this.fileService=m,this.userDataProfilesService=u,this.uriIdentityService=h,this.logService=d,this._onAddExtensions=this._register(new L.Emitter),this.onAddExtensions=this._onAddExtensions.event,this._onDidAddExtensions=this._register(new L.Emitter),this.onDidAddExtensions=this._onDidAddExtensions.event,this._onRemoveExtensions=this._register(new L.Emitter),this.onRemoveExtensions=this._onRemoveExtensions.event,this._onDidRemoveExtensions=this._register(new L.Emitter),this.onDidRemoveExtensions=this._onDidRemoveExtensions.event,this.resourcesAccessQueueMap=new T.ResourceMap}scanProfileExtensions(m){return this.withProfileExtensions(m)}async addExtensionsToProfile(m,u){const h=[],d=[];try{return await this.withProfileExtensions(u,n=>{const o=[];for(const t of n)m.some(([s])=>(0,P.areSameExtensions)(s.identifier,t.identifier)&&s.manifest.version!==t.version)?h.push(t):o.push(t);for(const[t,s]of m)if(!o.some(r=>(0,P.areSameExtensions)(r.identifier,t.identifier)&&r.version===t.manifest.version)){const r={identifier:t.identifier,version:t.manifest.version,location:t.location,metadata:s};d.push(r),o.push(r)}return d.length&&this._onAddExtensions.fire({extensions:d,profileLocation:u}),h.length&&this._onRemoveExtensions.fire({extensions:h,profileLocation:u}),o}),d.length&&this._onDidAddExtensions.fire({extensions:d,profileLocation:u}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,profileLocation:u}),d}catch(n){throw d.length&&this._onDidAddExtensions.fire({extensions:d,error:n,profileLocation:u}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,error:n,profileLocation:u}),n}}async removeExtensionFromProfile(m,u){const h=[];this._onRemoveExtensions.fire({extensions:h,profileLocation:u});try{await this.withProfileExtensions(u,d=>{const n=[];for(const o of d)(0,P.areSameExtensions)(o.identifier,m.identifier)?h.push(o):n.push(o);return h.length&&this._onRemoveExtensions.fire({extensions:h,profileLocation:u}),n}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,profileLocation:u})}catch(d){throw h.length&&this._onDidRemoveExtensions.fire({extensions:h,error:d,profileLocation:u}),d}}async withProfileExtensions(m,u){return this.getResourceAccessQueue(m).queue(async()=>{let h=[],d;try{const n=await this.fileService.readFile(m);d=JSON.parse(n.value.toString())}catch(n){if((0,C.toFileOperationResult)(n)!==1)throw n;this.uriIdentityService.extUri.isEqual(m,this.userDataProfilesService.defaultProfile.extensionsResource)&&(d=await this.migrateFromOldDefaultProfileExtensionsLocation())}if(d)for(const n of d){if(!n.identifier){this.logService.info("Ignoring invalid extension while scanning. Identifier does not exist.",n);continue}if(!n.location){this.logService.info("Ignoring invalid extension while scanning. Location does not exist.",n);continue}if(!n.version){this.logService.info("Ignoring invalid extension while scanning. Version does not exist.",n);continue}h.push({identifier:n.identifier,location:I.URI.revive(n.location),version:n.version,metadata:n.metadata})}if(u){h=u(h);const n=h.map(o=>({identifier:o.identifier,version:o.version,location:o.location.toJSON(),metadata:o.metadata}));await this.fileService.writeFile(m,i.VSBuffer.fromString(JSON.stringify(n)))}return h})}async migrateFromOldDefaultProfileExtensionsLocation(){return this._migrationPromise||(this._migrationPromise=(async()=>{const m=this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,"extensions.json");let u;try{u=(await this.fileService.readFile(m)).value.toString()}catch(d){if((0,C.toFileOperationResult)(d)===1)return;throw d}this.logService.info("Migrating extensions from old default profile location",m.toString());let h;try{const d=JSON.parse(u);Array.isArray(d)&&d.every(n=>!!(n&&typeof n=="object"&&(0,w.isIExtensionIdentifier)(n.identifier)&&y(n.location)&&n.version&&typeof n.version=="string"))?h=d:this.logService.warn("Skipping migrating from old default profile locaiton: Found invalid data",d)}catch(d){this.logService.error(d)}if(h)try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,i.VSBuffer.fromString(JSON.stringify(h)),{overwrite:!1}),this.logService.info("Migrated extensions from old default profile location to new location",m.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString())}catch(d){if((0,C.toFileOperationResult)(d)===3)this.logService.info("Migration from old default profile location to new location is done by another window",m.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString());else throw d}try{await this.fileService.del(m)}catch(d){(0,C.toFileOperationResult)(d)!==1&&this.logService.error(d)}return h})()),this._migrationPromise}getResourceAccessQueue(m){let u=this.resourcesAccessQueueMap.get(m);return u||(u=new D.Queue,this.resourcesAccessQueueMap.set(m,u)),u}};g=ve([H(0,C.IFileService),H(1,S.IUserDataProfilesService),H(2,f.IUriIdentityService),H(3,p.ILogService)],g),e.ExtensionsProfileScannerService=g;function y(l){return l?typeof l.path=="string"&&typeof l.scheme=="string":!1}}),define(se[79],oe([0,1,20,6,32,17,9,35,137,2,21,12,5,22,53,88,14,7,158,15,33,42,70,13,4,8,25,3,67,61,18,30,187,188]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o,t,s,r,c,a,v,E,R,N,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeExtensionsScannerService=e.toExtensionDescription=e.AbstractExtensionsScannerService=e.IExtensionsScannerService=e.Translations=void 0;var z;(function(Q){function W(q,G){if(q===G)return!0;const ee=Object.keys(q),ae=new Set;for(const K of Object.keys(G))ae.add(K);if(ee.length!==ae.size)return!1;for(const K of ee){if(q[K]!==G[K])return!1;ae.delete(K)}return ae.size===0}Q.equals=W})(z=e.Translations||(e.Translations={})),e.IExtensionsScannerService=(0,t.createDecorator)("IExtensionsScannerService");let F=class extends w.Disposable{constructor(W,q,G,ee,ae,K,X,_,U,x,j,J){super(),this.systemExtensionsLocation=W,this.userExtensionsLocation=q,this.extensionsControlLocation=G,this.cacheLocation=ee,this.userDataProfilesService=ae,this.extensionsProfileScannerService=K,this.fileService=X,this.logService=_,this.environmentService=U,this.productService=x,this.uriIdentityService=j,this.instantiationService=J,this._onDidChangeCache=this._register(new c.Emitter),this.onDidChangeCache=this._onDidChangeCache.event,this.obsoleteFile=(0,S.joinPath)(this.userExtensionsLocation,".obsolete"),this.systemExtensionsCachedScanner=this._register(this.instantiationService.createInstance($,(0,S.joinPath)(this.cacheLocation,d.BUILTIN_MANIFEST_CACHE_FILE),this.obsoleteFile)),this.userExtensionsCachedScanner=this._register(this.instantiationService.createInstance($,(0,S.joinPath)(this.cacheLocation,d.USER_MANIFEST_CACHE_FILE),this.obsoleteFile)),this.extensionsScanner=this._register(this.instantiationService.createInstance(M,this.obsoleteFile)),this._initializeDefaultProfileExtensionsPromise=void 0,this._register(this.systemExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(0))),this._register(this.userExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(1)))}getTargetPlatform(){return this._targetPlatformPromise||(this._targetPlatformPromise=(0,h.computeTargetPlatform)(this.fileService,this.logService)),this._targetPlatformPromise}async scanAllExtensions(W,q,G){const[ee,ae]=await Promise.all([this.scanSystemExtensions(W),this.scanUserExtensions(q)]),K=G?await this.scanExtensionsUnderDevelopment(W,[...ee,...ae]):[];return this.dedupExtensions(ee,ae,K,await this.getTargetPlatform(),!0)}async scanSystemExtensions(W){const q=[];q.push(this.scanDefaultSystemExtensions(!!W.useCache,W.language)),q.push(this.scanDevSystemExtensions(W.language,!!W.checkControlFile));const[G,ee]=await Promise.all(q);return this.applyScanOptions([...G,...ee],0,W,!1)}async scanUserExtensions(W){const q=W.profileLocation??this.userExtensionsLocation;this.logService.trace("Started scanning user extensions",q);const G=await this.createExtensionScannerInput(q,!!W.profileLocation,1,!W.includeUninstalled,W.language);let ae=await(W.useCache&&!G.devMode&&G.excludeObsolete?this.userExtensionsCachedScanner:this.extensionsScanner).scanExtensions(G);return ae=await this.applyScanOptions(ae,1,W,!0),this.logService.trace("Scanned user extensions:",ae.length),ae}async scanExtensionsUnderDevelopment(W,q){if(this.environmentService.isExtensionDevelopment&&this.environmentService.extensionDevelopmentLocationURI){const G=(await Promise.all(this.environmentService.extensionDevelopmentLocationURI.filter(ee=>ee.scheme===C.Schemas.file).map(async ee=>{const ae=await this.createExtensionScannerInput(ee,!1,1,!0,W.language,!1);return(await this.extensionsScanner.scanOneOrMultipleExtensions(ae)).map(X=>(X.type=q.find(_=>(0,h.areSameExtensions)(_.identifier,X.identifier))?.type??X.type,this.extensionsScanner.validate(X,ae)))}))).flat();return this.applyScanOptions(G,"development",W,!0)}return[]}async scanExistingExtension(W,q,G){const ee=await this.createExtensionScannerInput(W,!1,q,!0,G.language),ae=await this.extensionsScanner.scanExtension(ee);return!ae||!G.includeInvalid&&!ae.isValid?null:ae}async scanOneOrMultipleExtensions(W,q,G){const ee=await this.createExtensionScannerInput(W,!1,q,!0,G.language),ae=await this.extensionsScanner.scanOneOrMultipleExtensions(ee);return this.applyScanOptions(ae,q,G,!0)}async scanMetadata(W){const q=(0,S.joinPath)(W,"package.json"),G=(await this.fileService.readFile(q)).value.toString();return JSON.parse(G).__metadata}async updateMetadata(W,q){const G=(0,S.joinPath)(W,"package.json"),ee=(await this.fileService.readFile(G)).value.toString(),ae=JSON.parse(ee);q.isMachineScoped=q.isMachineScoped||void 0,q.isBuiltin=q.isBuiltin||void 0,q.installedTimestamp=q.installedTimestamp||void 0,ae.__metadata={...ae.__metadata,...q},await this.fileService.writeFile((0,S.joinPath)(W,"package.json"),L.VSBuffer.fromString(JSON.stringify(ae,null,"	")))}initializeDefaultProfileExtensions(){return this._initializeDefaultProfileExtensionsPromise||(this._initializeDefaultProfileExtensionsPromise=(async()=>{try{const W=this.uriIdentityService.extUri.joinPath(this.userExtensionsLocation,".init-default-profile-extensions");if(await this.fileService.exists(W))return;if(!await this.fileService.exists(this.userDataProfilesService.defaultProfile.extensionsResource)&&!await this.fileService.exists(this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,"extensions.json"))){this.logService.info("Started initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString());const q=await this.scanUserExtensions({includeInvalid:!0});await this.extensionsProfileScannerService.addExtensionsToProfile(q.map(G=>[G,G.metadata]),this.userDataProfilesService.defaultProfile.extensionsResource),this.logService.info("Completed initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString())}try{await this.fileService.createFile(W,L.VSBuffer.fromString(""))}catch(q){(0,o.toFileOperationResult)(q)!==1&&this.logService.warn("Failed to create default profile extensions initialize marker in extensions installation folder.",this.userExtensionsLocation.toString(),(0,T.getErrorMessage)(q))}}catch(W){throw this.logService.error(W),W}})()),this._initializeDefaultProfileExtensionsPromise}async applyScanOptions(W,q,G,ee){return G.includeAllVersions||(W=this.dedupExtensions(q===0?W:void 0,q===1?W:void 0,q==="development"?W:void 0,await this.getTargetPlatform(),ee)),G.includeInvalid||(W=W.filter(ae=>ae.isValid)),W.sort((ae,K)=>{const X=b.basename(ae.location.fsPath),_=b.basename(K.location.fsPath);return X<_?-1:X>_?1:0})}dedupExtensions(W,q,G,ee,ae){const K=(_,U,x)=>{if(_.isValid&&!U.isValid)return!1;if(_.isValid===U.isValid){if(ae&&f.gt(_.manifest.version,U.manifest.version))return this.logService.debug(`Skipping extension ${U.location.path} with lower version ${U.manifest.version} in favour of ${_.location.path} with version ${_.manifest.version}`),!1;if(f.eq(_.manifest.version,U.manifest.version)){if(_.type===0)return this.logService.debug(`Skipping extension ${U.location.path} in favour of system extension ${_.location.path} with same version`),!1;if(_.targetPlatform===ee)return this.logService.debug(`Skipping extension ${U.location.path} from different target platform ${U.targetPlatform}`),!1}}return x?this.logService.warn(`Overwriting user extension ${_.location.path} with ${U.location.path}.`):this.logService.debug(`Overwriting user extension ${_.location.path} with ${U.location.path}.`),!0},X=new Map;return W?.forEach(_=>{const U=d.ExtensionIdentifier.toKey(_.identifier.id),x=X.get(U);(!x||K(x,_,!1))&&X.set(U,_)}),q?.forEach(_=>{const U=d.ExtensionIdentifier.toKey(_.identifier.id),x=X.get(U);if(!x&&W&&_.type===0){this.logService.debug(`Skipping obsolete system extension ${_.location.path}.`);return}(!x||K(x,_,!1))&&X.set(U,_)}),G?.forEach(_=>{const U=d.ExtensionIdentifier.toKey(_.identifier.id),x=X.get(U);(!x||K(x,_,!0))&&X.set(U,_),X.set(U,_)}),[...X.values()]}async scanDefaultSystemExtensions(W,q){this.logService.trace("Started scanning system extensions");const G=await this.createExtensionScannerInput(this.systemExtensionsLocation,!1,0,!0,q),ae=await(W&&!G.devMode?this.systemExtensionsCachedScanner:this.extensionsScanner).scanExtensions(G);return this.logService.trace("Scanned system extensions:",ae.length),ae}async scanDevSystemExtensions(W,q){const G=this.environmentService.isBuilt?[]:this.productService.builtInExtensions;if(!G?.length)return[];this.logService.trace("Started scanning dev system extensions");const ee=q?await this.getBuiltInExtensionControl():{},ae=[],K=l.URI.file(b.normalize(b.join(C.FileAccess.asFileUri("").fsPath,"..",".build","builtInExtensions")));for(const _ of G){const U=ee[_.name]||"marketplace";switch(U){case"disabled":break;case"marketplace":ae.push((0,S.joinPath)(K,_.name));break;default:ae.push(l.URI.file(U));break}}const X=await Promise.all(ae.map(async _=>this.extensionsScanner.scanExtension(await this.createExtensionScannerInput(_,!1,0,!0,W))));return this.logService.trace("Scanned dev system extensions:",X.length),(0,D.coalesce)(X)}async getBuiltInExtensionControl(){try{const W=await this.fileService.readFile(this.extensionsControlLocation);return JSON.parse(W.value.toString())}catch{return{}}}async createExtensionScannerInput(W,q,G,ee,ae,K=!0){const X=await this.getTranslations(ae??p.language),_=await this.getMtime(W),U=q&&!this.uriIdentityService.extUri.isEqual(W,this.userDataProfilesService.defaultProfile.extensionsResource)?this.userDataProfilesService.defaultProfile.extensionsResource:void 0,x=U?await this.getMtime(U):void 0;return new A(W,_,U,x,q,G,ee,K,this.productService.version,this.productService.date,this.productService.commit,!this.environmentService.isBuilt,ae,X)}async getMtime(W){try{const q=await this.fileService.stat(W);if(typeof q.mtime=="number")return q.mtime}catch{}}};F=ve([H(4,E.IUserDataProfilesService),H(5,v.IExtensionsProfileScannerService),H(6,o.IFileService),H(7,s.ILogService),H(8,u.IEnvironmentService),H(9,r.IProductService),H(10,R.IUriIdentityService),H(11,t.IInstantiationService)],F),e.AbstractExtensionsScannerService=F;class A{constructor(W,q,G,ee,ae,K,X,_,U,x,j,J,re,Y){this.location=W,this.mtime=q,this.applicationExtensionslocation=G,this.applicationExtensionslocationMtime=ee,this.profile=ae,this.type=K,this.excludeObsolete=X,this.validate=_,this.productVersion=U,this.productDate=x,this.productCommit=j,this.devMode=J,this.language=re,this.translations=Y}static createNlsConfiguration(W){return{language:W.language,pseudo:W.language==="pseudo",devMode:W.devMode,translations:W.translations}}static equals(W,q){return(0,S.isEqual)(W.location,q.location)&&W.mtime===q.mtime&&(0,S.isEqual)(W.applicationExtensionslocation,q.applicationExtensionslocation)&&W.applicationExtensionslocationMtime===q.applicationExtensionslocationMtime&&W.profile===q.profile&&W.type===q.type&&W.excludeObsolete===q.excludeObsolete&&W.validate===q.validate&&W.productVersion===q.productVersion&&W.productDate===q.productDate&&W.productCommit===q.productCommit&&W.devMode===q.devMode&&W.language===q.language&&z.equals(W.translations,q.translations)}}let M=class extends w.Disposable{constructor(W,q,G,ee,ae){super(),this.obsoleteFile=W,this.extensionsProfileScannerService=q,this.uriIdentityService=G,this.fileService=ee,this.logService=ae}async scanExtensions(W){const q=W.profile?await this.scanExtensionsFromProfile(W):await this.scanExtensionsFromLocation(W);let G={};if(W.excludeObsolete&&W.type===1)try{const ee=(await this.fileService.readFile(this.obsoleteFile)).value.toString();G=JSON.parse(ee)}catch{}return(0,y.isEmptyObject)(G)?q:q.filter(ee=>!G[h.ExtensionKey.create(ee).toString()])}async scanExtensionsFromLocation(W){const q=await this.fileService.resolve(W.location);if(!q.children?.length)return[];const G=await Promise.all(q.children.map(async ee=>{if(!ee.isDirectory||W.type===1&&(0,S.basename)(ee.resource).indexOf(".")===0)return null;const ae=new A(ee.resource,W.mtime,W.applicationExtensionslocation,W.applicationExtensionslocationMtime,W.profile,W.type,W.excludeObsolete,W.validate,W.productVersion,W.productDate,W.productCommit,W.devMode,W.language,W.translations);return this.scanExtension(ae)}));return(0,D.coalesce)(G).sort((ee,ae)=>ee.location.path<ae.location.path?-1:1)}async scanExtensionsFromProfile(W){let q=await this.scanExtensionsFromProfileResource(W.location,()=>!0,W);if(W.applicationExtensionslocation&&!this.uriIdentityService.extUri.isEqual(W.location,W.applicationExtensionslocation)){q=q.filter(ee=>!ee.metadata?.isApplicationScoped);const G=await this.scanExtensionsFromProfileResource(W.applicationExtensionslocation,ee=>!!ee.metadata?.isApplicationScoped,W);q.push(...G)}return q}async scanExtensionsFromProfileResource(W,q,G){const ee=await this.extensionsProfileScannerService.scanProfileExtensions(W);if(!ee.length)return[];const ae=await Promise.all(ee.map(async K=>{if(q(K)){const X=new A(K.location,G.mtime,G.applicationExtensionslocation,G.applicationExtensionslocationMtime,G.profile,G.type,G.excludeObsolete,G.validate,G.productVersion,G.productDate,G.productCommit,G.devMode,G.language,G.translations);return this.scanExtension(X,K.metadata)}return null}));return(0,D.coalesce)(ae)}async scanOneOrMultipleExtensions(W){try{if(await this.fileService.exists((0,S.joinPath)(W.location,"package.json"))){const q=await this.scanExtension(W);return q?[q]:[]}else return await this.scanExtensions(W)}catch(q){return this.logService.error(`Error scanning extensions at ${W.location.path}:`,(0,T.getErrorMessage)(q)),[]}}async scanExtension(W,q){try{let G=await this.scanExtensionManifest(W.location);if(G){G.publisher||(G.publisher=d.UNDEFINED_PUBLISHER),q=q??G.__metadata,delete G.__metadata;const ee=(0,h.getGalleryExtensionId)(G.publisher,G.name),ae=q?.id?{id:ee,uuid:q.id}:{id:ee},K=q?.isSystem?0:W.type,X=K===0||!!q?.isBuiltin;O.ImplicitActivationEvents.updateManifest(G),G=await this.translateManifest(W.location,G,A.createNlsConfiguration(W));const _={type:K,identifier:ae,manifest:G,location:W.location,isBuiltin:X,targetPlatform:q?.targetPlatform??"undefined",metadata:q,isValid:!0,validations:[]};return W.validate?this.validate(_,W):_}}catch(G){W.type!==0&&this.logService.error(G)}return null}validate(W,q){let G=!0;const ee=(0,n.validateExtensionManifest)(q.productVersion,q.productDate,q.location,W.manifest,W.isBuiltin);for(const[ae,K]of ee)ae===g.default.Error&&(G=!1,this.logService.error(this.formatMessage(q.location,K)));return W.isValid=G,W.validations=ee,W}async scanExtensionManifest(W){const q=(0,S.joinPath)(W,"package.json");let G;try{G=(await this.fileService.readFile(q)).value.toString()}catch(ae){return(0,o.toFileOperationResult)(ae)!==1&&this.logService.error(this.formatMessage(W,(0,m.localize)(0,null,q.path,ae.message))),null}let ee;try{ee=JSON.parse(G)}catch{const K=[];(0,I.parse)(G,K);for(const X of K)this.logService.error(this.formatMessage(W,(0,m.localize)(1,null,q.path,X.offset,X.length,(0,P.getParseErrorMessage)(X.error))));return null}return(0,I.getNodeType)(ee)!=="object"?(this.logService.error(this.formatMessage(W,(0,m.localize)(2,null,q.path))),null):ee}async translateManifest(W,q,G){const ee=await this.getLocalizedMessages(W,q,G);if(ee)try{const ae=[],K=await this.resolveOriginalMessageBundle(ee.default,ae);if(ae.length>0)return ae.forEach(_=>{this.logService.error(this.formatMessage(W,(0,m.localize)(3,null,ee.default?.path,(0,P.getParseErrorMessage)(_.error))))}),q;if((0,I.getNodeType)(ee)!=="object")return this.logService.error(this.formatMessage(W,(0,m.localize)(4,null,ee.default?.path))),q;const X=ee.values||Object.create(null);return(0,N.localizeManifest)(q,X,K)}catch{}return q}async getLocalizedMessages(W,q,G){const ee=(0,S.joinPath)(W,"package.nls.json"),ae=(U,x)=>{x.forEach(j=>{this.logService.error(this.formatMessage(W,(0,m.localize)(5,null,U?.path,(0,P.getParseErrorMessage)(j.error))))})},K=U=>{this.logService.error(this.formatMessage(W,(0,m.localize)(6,null,U?.path)))},X=`${q.publisher}.${q.name}`,_=G.translations[X];if(_)try{const U=l.URI.file(_),x=(await this.fileService.readFile(U)).value.toString(),j=[],J=(0,I.parse)(x,j);return j.length>0?(ae(U,j),{values:void 0,default:ee}):(0,I.getNodeType)(J)!=="object"?(K(U),{values:void 0,default:ee}):{values:J.contents?J.contents.package:void 0,default:ee}}catch{return{values:void 0,default:ee}}else{if(!await this.fileService.exists(ee))return;let x;try{x=await this.findMessageBundles(W,G)}catch{return}if(!x.localized)return{values:void 0,default:x.original};try{const j=(await this.fileService.readFile(x.localized)).value.toString(),J=[],re=(0,I.parse)(j,J);return J.length>0?(ae(x.localized,J),{values:void 0,default:x.original}):(0,I.getNodeType)(re)!=="object"?(K(x.localized),{values:void 0,default:x.original}):{values:re,default:x.original}}catch{return{values:void 0,default:x.original}}}}async resolveOriginalMessageBundle(W,q){if(W)try{const G=(await this.fileService.readFile(W)).value.toString();return(0,I.parse)(G,q)}catch{}}findMessageBundles(W,q){return new Promise((G,ee)=>{const ae=K=>{const X=(0,S.joinPath)(W,`package.nls.${K}.json`);this.fileService.exists(X).then(_=>{_&&G({localized:X,original:(0,S.joinPath)(W,"package.nls.json")});const U=K.lastIndexOf("-");U===-1?G({localized:(0,S.joinPath)(W,"package.nls.json"),original:null}):(K=K.substring(0,U),ae(K))})};if(q.devMode||q.pseudo||!q.language)return G({localized:(0,S.joinPath)(W,"package.nls.json"),original:null});ae(q.language)})}formatMessage(W,q){return`[${W.path}]: ${q}`}};M=ve([H(1,v.IExtensionsProfileScannerService),H(2,R.IUriIdentityService),H(3,o.IFileService),H(4,s.ILogService)],M);let $=class extends M{constructor(W,q,G,ee,ae,K){super(q,G,ee,ae,K),this.cacheFile=W,this.cacheValidatorThrottler=this._register(new i.ThrottledDelayer(3e3)),this._onDidChangeCache=this._register(new c.Emitter),this.onDidChangeCache=this._onDidChangeCache.event}async scanExtensions(W){const q=await this.readExtensionCache();if(this.input=W,q&&q.input&&A.equals(q.input,this.input))return this.cacheValidatorThrottler.trigger(()=>this.validateCache()),q.result.map(ee=>(ee.location=l.URI.revive(ee.location),ee));const G=await super.scanExtensions(W);return await this.writeExtensionCache({input:W,result:G}),G}async readExtensionCache(){try{const W=await this.fileService.readFile(this.cacheFile),q=JSON.parse(W.value.toString());return{result:q.result,input:(0,a.revive)(q.input)}}catch(W){this.logService.debug("Error while reading the extension cache file:",this.cacheFile.path,(0,T.getErrorMessage)(W))}return null}async writeExtensionCache(W){try{await this.fileService.writeFile(this.cacheFile,L.VSBuffer.fromString(JSON.stringify(W)))}catch(q){this.logService.debug("Error while writing the extension cache file:",this.cacheFile.path,(0,T.getErrorMessage)(q))}}async validateCache(){if(!this.input)return;const W=await this.readExtensionCache();if(!W)return;const q=W.result,G=JSON.parse(JSON.stringify(await super.scanExtensions(this.input)));if(!k.equals(G,q))try{await this.fileService.del(this.cacheFile),this._onDidChangeCache.fire()}catch(ee){this.logService.error(ee)}}};$=ve([H(2,v.IExtensionsProfileScannerService),H(3,R.IUriIdentityService),H(4,o.IFileService),H(5,s.ILogService)],$);function V(Q,W){const q=(0,h.getExtensionId)(Q.manifest.publisher,Q.manifest.name);return{id:q,identifier:new d.ExtensionIdentifier(q),isBuiltin:Q.type===0,isUserBuiltin:Q.type===1&&Q.isBuiltin,isUnderDevelopment:W,extensionLocation:Q.location,uuid:Q.identifier.uuid,targetPlatform:Q.targetPlatform,...Q.manifest}}e.toExtensionDescription=V;class B extends F{constructor(W,q,G,ee,ae,K,X,_,U,x,j,J){super(W,q,(0,S.joinPath)(G,".vscode-oss-dev","extensions","control.json"),(0,S.joinPath)(ee,d.MANIFEST_CACHE_FOLDER),ae,K,X,_,U,x,j,J),this.translationsPromise=(async()=>{if(p.translationsConfigFile)try{const re=await this.fileService.readFile(l.URI.file(p.translationsConfigFile));return JSON.parse(re.value.toString())}catch{}return Object.create(null)})()}getTranslations(W){return this.translationsPromise}}e.NativeExtensionsScannerService=B}),define(se[263],oe([0,1,49,6,38,3,2,21,12,28,8,18]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsLifecycle=void 0;let p=class extends T.Disposable{constructor(f,g){super(),this.userDataProfilesService=f,this.logService=g,this.processesLimiter=new i.Limiter(5)}async postUninstall(f){const g=this.parseScript(f,"uninstall");return g&&(this.logService.info(f.identifier.id,f.manifest.version,"Running post uninstall script"),await this.processesLimiter.queue(()=>this.runLifecycleHook(g.script,"uninstall",g.args,!0,f).then(()=>this.logService.info(f.identifier.id,f.manifest.version,"Finished running post uninstall script"),y=>this.logService.error(f.identifier.id,f.manifest.version,`Failed to run post uninstall script: ${y}`)))),w.Promises.rm(this.getExtensionStoragePath(f)).then(void 0,y=>this.logService.error("Error while removing extension storage path",y))}parseScript(f,g){const y=`vscode:${g}`;if(f.location.scheme===I.Schemas.file&&f.manifest&&f.manifest.scripts&&typeof f.manifest.scripts[y]=="string"){const l=f.manifest.scripts[y].split(" ");return l.length<2||l[0]!=="node"||!l[1]?(this.logService.warn(f.identifier.id,f.manifest.version,`${y} should be a node script`),null):{script:(0,P.join)(f.location.fsPath,l[1]),args:l.slice(2)||[]}}return null}runLifecycleHook(f,g,y,l,m){return new Promise((u,h)=>{const d=this.start(f,g,y,m);let n;const o=t=>{n&&(clearTimeout(n),n=null),t?h(t):u(void 0)};d.on("error",t=>{o((0,k.toErrorMessage)(t)||"Unknown")}),d.on("exit",(t,s)=>{o(t?`post-${g} process exited with code ${t}`:void 0)}),l&&(n=setTimeout(()=>{n=null,d.kill(),h("timed out")},5e3))})}start(f,g,y,l){const m={silent:!0,execArgv:void 0},u=(0,D.fork)(f,[`--type=extension-post-${g}`,...y],m);u.stdout.setEncoding("utf8"),u.stderr.setEncoding("utf8");const h=L.Event.fromNodeEventEmitter(u.stdout,"data"),d=L.Event.fromNodeEventEmitter(u.stderr,"data");h(t=>this.logService.info(l.identifier.id,l.manifest.version,`post-${g}`,t)),d(t=>this.logService.error(l.identifier.id,l.manifest.version,`post-${g}`,t));const n=L.Event.any(L.Event.map(h,t=>({data:`%c${t}`,format:[""]})),L.Event.map(d,t=>({data:`%c${t}`,format:["color: red"]})));return L.Event.debounce(n,(t,s)=>t?{data:t.data+s.data,format:[...t.format,...s.format]}:{data:s.data,format:s.format},100)(t=>{console.group(l.identifier.id),console.log(t.data,...t.format),console.groupEnd()}),u}getExtensionStoragePath(f){return(0,P.join)(this.userDataProfilesService.defaultProfile.globalStorageHome.fsPath,f.identifier.id.toLowerCase())}};p=ve([H(0,b.IUserDataProfilesService),H(1,C.ILogService)],p),e.ExtensionsLifecycle=p}),define(se[264],oe([0,1,7,15,61,79,13,4,8,25,30,18]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsScannerService=void 0;let p=class extends L.NativeExtensionsScannerService{constructor(f,g,y,l,m,u,h,d){super(D.URI.file(m.builtinExtensionsPath),D.URI.file(m.extensionsPath),m.userHome,D.URI.file(m.userDataPath),f,g,y,l,m,u,h,d)}};p=ve([H(0,b.IUserDataProfilesService),H(1,k.IExtensionsProfileScannerService),H(2,T.IFileService),H(3,P.ILogService),H(4,i.INativeEnvironmentService),H(5,w.IProductService),H(6,C.IUriIdentityService),H(7,I.IInstantiationService)],p),e.ExtensionsScannerService=p}),define(se[19],oe([0,1,6,3,2,206,14,69,4,18]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logStorage=e.InMemoryStorageService=e.isProfileUsingDefaultStorage=e.AbstractStorageService=e.loadKeyTargets=e.StorageTarget=e.StorageScope=e.WillSaveStateReason=e.IStorageService=e.TARGET_KEY=e.IS_NEW_KEY=void 0,e.IS_NEW_KEY="__$__isNewStorageMarker",e.TARGET_KEY="__$__targetStorageMarker",e.IStorageService=(0,P.createDecorator)("storageService");var C;(function(m){m[m.NONE=0]="NONE",m[m.SHUTDOWN=1]="SHUTDOWN"})(C=e.WillSaveStateReason||(e.WillSaveStateReason={}));var b;(function(m){m[m.APPLICATION=-1]="APPLICATION",m[m.PROFILE=0]="PROFILE",m[m.WORKSPACE=1]="WORKSPACE"})(b=e.StorageScope||(e.StorageScope={}));var p;(function(m){m[m.USER=0]="USER",m[m.MACHINE=1]="MACHINE"})(p=e.StorageTarget||(e.StorageTarget={}));function S(m){const u=m.get(e.TARGET_KEY);if(u)try{return JSON.parse(u)}catch{}return Object.create(null)}e.loadKeyTargets=S;class f extends k.Disposable{constructor(u={flushInterval:f.DEFAULT_FLUSH_INTERVAL}){super(),this.options=u,this._onDidChangeValue=this._register(new i.PauseableEmitter),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new i.PauseableEmitter),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new i.Emitter),this.onWillSaveState=this._onWillSaveState.event,this.flushWhenIdleScheduler=this._register(new D.RunOnceScheduler(()=>this.doFlushWhenIdle(),this.options.flushInterval)),this.runFlushWhenIdle=this._register(new k.MutableDisposable),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}doFlushWhenIdle(){this.runFlushWhenIdle.value=(0,D.runWhenIdle)(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){(0,k.dispose)([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{(0,L.mark)("code/willInitStorage");try{await this.doInitialize()}finally{(0,L.mark)("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(u,h){if(h===e.TARGET_KEY){switch(u){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:u})}else this._onDidChangeValue.fire({scope:u,key:h,target:this.getKeyTargets(u)[h]})}emitWillSaveState(u){this._onWillSaveState.fire({reason:u})}get(u,h,d){return this.getStorage(h)?.get(u,d)}getBoolean(u,h,d){return this.getStorage(h)?.getBoolean(u,d)}getNumber(u,h,d){return this.getStorage(h)?.getNumber(u,d)}store(u,h,d,n){if((0,T.isUndefinedOrNull)(h)){this.remove(u,d);return}this.withPausedEmitters(()=>{this.updateKeyTarget(u,d,n),this.getStorage(d)?.set(u,h)})}remove(u,h){this.withPausedEmitters(()=>{this.updateKeyTarget(u,h,void 0),this.getStorage(h)?.delete(u)})}withPausedEmitters(u){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{u()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(u,h){const d=[],n=this.getKeyTargets(u);for(const o of Object.keys(n))n[o]===h&&d.push(o);return d}updateKeyTarget(u,h,d){const n=this.getKeyTargets(h);typeof d=="number"?n[u]!==d&&(n[u]=d,this.getStorage(h)?.set(e.TARGET_KEY,JSON.stringify(n))):typeof n[u]=="number"&&(delete n[u],this.getStorage(h)?.set(e.TARGET_KEY,JSON.stringify(n)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(u){switch(u){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(u){const h=this.getStorage(u);return h?S(h):Object.create(null)}isNew(u){return this.getBoolean(e.IS_NEW_KEY,u)===!0}async flush(u=C.NONE){this._onWillSaveState.fire({reason:u});const h=this.getStorage(-1),d=this.getStorage(0),n=this.getStorage(1);switch(u){case C.NONE:await D.Promises.settled([h?.whenFlushed()??Promise.resolve(),d?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve()]);break;case C.SHUTDOWN:await D.Promises.settled([h?.flush(0)??Promise.resolve(),d?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve()]);break}}async log(){const u=this.getStorage(-1)?.items??new Map,h=this.getStorage(0)?.items??new Map,d=this.getStorage(1)?.items??new Map;return l(u,h,d,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async switch(u,h){return this.emitWillSaveState(C.NONE),(0,w.isUserDataProfile)(u)?this.switchToProfile(u,h):this.switchToWorkspace(u,h)}canSwitchProfile(u,h){return!(u.id===h.id||g(h)&&g(u))}switchData(u,h,d,n){this.withPausedEmitters(()=>{if(n)for(const[o,t]of u)h.set(o,t);else{const o=new Set;for(const[t,s]of u)o.add(t),h.get(t)!==s&&this.emitDidChangeValue(d,t);for(const[t]of h.items)o.has(t)||this.emitDidChangeValue(d,t)}})}}e.AbstractStorageService=f,f.DEFAULT_FLUSH_INTERVAL=60*1e3;function g(m){return m.isDefault||!!m.useDefaultFlags?.uiState}e.isProfileUsingDefaultStorage=g;class y extends f{constructor(){super(),this.applicationStorage=this._register(new I.Storage(new I.InMemoryStorageDatabase,{hint:I.StorageHint.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new I.Storage(new I.InMemoryStorageDatabase,{hint:I.StorageHint.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new I.Storage(new I.InMemoryStorageDatabase,{hint:I.StorageHint.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(u=>this.emitDidChangeValue(1,u))),this._register(this.profileStorage.onDidChangeStorage(u=>this.emitDidChangeValue(0,u))),this._register(this.applicationStorage.onDidChangeStorage(u=>this.emitDidChangeValue(-1,u)))}getStorage(u){switch(u){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(u){switch(u){case-1:return"inMemory (application)";case 0:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}hasScope(u){return!1}}e.InMemoryStorageService=y;async function l(m,u,h,d,n,o){const t=O=>{try{return JSON.parse(O)}catch{return O}},s=new Map,r=new Map;m.forEach((O,z)=>{s.set(z,O),r.set(z,t(O))});const c=new Map,a=new Map;u.forEach((O,z)=>{c.set(z,O),a.set(z,t(O))});const v=new Map,E=new Map;h.forEach((O,z)=>{v.set(z,O),E.set(z,t(O))}),console.group(d!==n?`Storage: Application (path: ${d})`:`Storage: Application & Profile (path: ${d}, default profile)`);const R=[];if(s.forEach((O,z)=>{R.push({key:z,value:O})}),console.table(R),console.groupEnd(),console.log(r),d!==n){console.group(`Storage: Profile (path: ${n}, profile specific)`);const O=[];c.forEach((z,F)=>{O.push({key:F,value:z})}),console.table(O),console.groupEnd(),console.log(a)}console.group(`Storage: Workspace (path: ${o})`);const N=[];v.forEach((O,z)=>{N.push({key:z,value:O})}),console.table(N),console.groupEnd(),console.log(E)}e.logStorage=l}),define(se[117],oe([0,1,3,2,14,29,33,19]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StorageManager=e.GlobalExtensionEnablementService=void 0;let P=class extends i.Disposable{constructor(b,p){super(),this._onDidChangeEnablement=new D.Emitter,this.onDidChangeEnablement=this._onDidChangeEnablement.event,this.storageManger=this._register(new w(b)),this._register(this.storageManger.onDidChange(S=>this._onDidChangeEnablement.fire({extensions:S,source:"storage"}))),this._register(p.onDidInstallExtensions(S=>S.forEach(({local:f,operation:g})=>{f&&g===4&&this._removeFromDisabledExtensions(f.identifier)})))}async enableExtension(b,p){return this._removeFromDisabledExtensions(b)?(this._onDidChangeEnablement.fire({extensions:[b],source:p}),!0):!1}async disableExtension(b,p){return this._addToDisabledExtensions(b)?(this._onDidChangeEnablement.fire({extensions:[b],source:p}),!0):!1}getDisabledExtensions(){return this._getExtensions(L.DISABLED_EXTENSIONS_STORAGE_PATH)}async getDisabledExtensionsAsync(){return this.getDisabledExtensions()}_addToDisabledExtensions(b){const p=this.getDisabledExtensions();return p.every(S=>!(0,T.areSameExtensions)(S,b))?(p.push(b),this._setDisabledExtensions(p),!0):!1}_removeFromDisabledExtensions(b){const p=this.getDisabledExtensions();for(let S=0;S<p.length;S++){const f=p[S];if((0,T.areSameExtensions)(f,b))return p.splice(S,1),this._setDisabledExtensions(p),!0}return!1}_setDisabledExtensions(b){this._setExtensions(L.DISABLED_EXTENSIONS_STORAGE_PATH,b)}_getExtensions(b){return this.storageManger.get(b,0)}_setExtensions(b,p){this.storageManger.set(b,p,0)}};P=ve([H(0,I.IStorageService),H(1,L.IExtensionManagementService)],P),e.GlobalExtensionEnablementService=P;class w extends i.Disposable{constructor(b){super(),this.storageService=b,this.storage=Object.create(null),this._onDidChange=this._register(new D.Emitter),this.onDidChange=this._onDidChange.event,this._register(b.onDidChangeValue(p=>this.onDidStorageChange(p)))}get(b,p){let S;return p===0?((0,k.isUndefinedOrNull)(this.storage[b])&&(this.storage[b]=this._get(b,p)),S=this.storage[b]):S=this._get(b,p),JSON.parse(S)}set(b,p,S){const f=JSON.stringify(p.map(({id:y,uuid:l})=>({id:y,uuid:l})));this._get(b,S)!==f&&(S===0&&(p.length?this.storage[b]=f:delete this.storage[b]),this._set(b,p.length?f:void 0,S))}onDidStorageChange(b){if(b.scope===0&&!(0,k.isUndefinedOrNull)(this.storage[b.key])&&this._get(b.key,b.scope)!==this.storage[b.key]){const S=this.get(b.key,b.scope);delete this.storage[b.key];const f=this.get(b.key,b.scope),g=S.filter(l=>!f.some(m=>(0,T.areSameExtensions)(l,m))),y=f.filter(l=>!S.some(m=>(0,T.areSameExtensions)(m,l)));(g.length||y.length)&&this._onDidChange.fire([...g,...y])}}_get(b,p){return this.storageService.get(b,p,"[]")}_set(b,p,S){p?this.storageService.store(b,p,S,1):this.storageService.remove(b,S)}}e.StorageManager=w}),define(se[265],oe([0,1,20,24,9,5,36,14,7,16,15,29,33,70,13,8,25,59,236,19,23]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionGalleryServiceWithNoStorageService=e.ExtensionGalleryService=e.sortExtensionVersions=void 0;const d=L.isWeb?"web":(0,b.getTargetPlatform)(L.platform,T.arch);var n;(function(_){_[_.None=0]="None",_[_.IncludeVersions=1]="IncludeVersions",_[_.IncludeFiles=2]="IncludeFiles",_[_.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",_[_.IncludeSharedAccounts=8]="IncludeSharedAccounts",_[_.IncludeVersionProperties=16]="IncludeVersionProperties",_[_.ExcludeNonValidated=32]="ExcludeNonValidated",_[_.IncludeInstallationTargets=64]="IncludeInstallationTargets",_[_.IncludeAssetUri=128]="IncludeAssetUri",_[_.IncludeStatistics=256]="IncludeStatistics",_[_.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",_[_.Unpublished=4096]="Unpublished",_[_.IncludeNameConflictInfo=32768]="IncludeNameConflictInfo"})(n||(n={}));function o(..._){return String(_.reduce((U,x)=>U|x,0))}var t;(function(_){_[_.Tag=1]="Tag",_[_.ExtensionId=4]="ExtensionId",_[_.Category=5]="Category",_[_.ExtensionName=7]="ExtensionName",_[_.Target=8]="Target",_[_.Featured=9]="Featured",_[_.SearchText=10]="SearchText",_[_.ExcludeWithFlags=12]="ExcludeWithFlags"})(t||(t={}));const s={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source",Signature:"Microsoft.VisualStudio.Services.VsixSignature"},r={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",PreRelease:"Microsoft.VisualStudio.Code.PreRelease",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages",WebExtension:"Microsoft.VisualStudio.Code.WebExtension",SponsorLink:"Microsoft.VisualStudio.Code.SponsorLink"},a={pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:n.None,criteria:[],assetTypes:[]};class v{constructor(U=a){this.state=U}get pageNumber(){return this.state.pageNumber}get pageSize(){return this.state.pageSize}get sortBy(){return this.state.sortBy}get sortOrder(){return this.state.sortOrder}get flags(){return this.state.flags}get criteria(){return this.state.criteria}withPage(U,x=this.state.pageSize){return new v({...this.state,pageNumber:U,pageSize:x})}withFilter(U,...x){const j=[...this.state.criteria,...x.length?x.map(J=>({filterType:U,value:J})):[{filterType:U}]];return new v({...this.state,criteria:j})}withSortBy(U){return new v({...this.state,sortBy:U})}withSortOrder(U){return new v({...this.state,sortOrder:U})}withFlags(...U){return new v({...this.state,flags:U.reduce((x,j)=>x|j,0)})}withAssetTypes(...U){return new v({...this.state,assetTypes:U})}withSource(U){return new v({...this.state,source:U})}get raw(){const{criteria:U,pageNumber:x,pageSize:j,sortBy:J,sortOrder:re,flags:Y,assetTypes:ie}=this.state;return{filters:[{criteria:U,pageNumber:x,pageSize:j,sortBy:J,sortOrder:re}],assetTypes:ie,flags:Y}}get searchText(){const U=this.state.criteria.filter(x=>x.filterType===t.SearchText)[0];return U&&U.value?U.value:""}get telemetryData(){return{filterTypes:this.state.criteria.map(U=>String(U.filterType)),flags:this.state.flags,sortBy:String(this.sortBy),sortOrder:String(this.sortOrder),pageNumber:String(this.pageNumber),source:this.state.source,searchTextLength:this.searchText.length}}}function E(_,U){const x=(_||[]).filter(j=>j.statisticName===U)[0];return x?x.value:0}function R(_){const U="Microsoft.VisualStudio.Code.Translation.";return _.files.filter(j=>j.assetType.indexOf(U)===0).reduce((j,J)=>{const re=z(_,J.assetType);return re&&j.push([J.assetType.substring(U.length),re]),j},[])}function N(_){if(_.properties){const U=_.properties.filter(J=>J.key===s.Repository),x=new RegExp("((git|ssh|http(s)?)|(git@[\\w.]+))(:(//)?)([\\w.@:/\\-~]+)(.git)(/)?"),j=U.filter(J=>x.test(J.value))[0];return j?{uri:j.value,fallbackUri:j.value}:null}return z(_,s.Repository)}function O(_){return{uri:`${_.fallbackAssetUri}/${s.VSIX}?redirect=true${_.targetPlatform?`&targetPlatform=${_.targetPlatform}`:""}`,fallbackUri:`${_.fallbackAssetUri}/${s.VSIX}${_.targetPlatform?`?targetPlatform=${_.targetPlatform}`:""}`}}function z(_,U){return _.files.filter(j=>j.assetType===U)[0]?{uri:`${_.assetUri}/${U}${_.targetPlatform?`?targetPlatform=${_.targetPlatform}`:""}`,fallbackUri:`${_.fallbackAssetUri}/${U}${_.targetPlatform?`?targetPlatform=${_.targetPlatform}`:""}`}:null}function F(_,U){const x=_.properties?_.properties.filter(J=>J.key===U):[],j=x.length>0&&x[0].value;return j?j.split(",").map(J=>(0,p.adoptToGalleryExtensionId)(J)):[]}function A(_){const U=_.properties?_.properties.filter(x=>x.key===r.Engine):[];return U.length>0&&U[0].value||""}function M(_){const U=_.properties?_.properties.filter(x=>x.key===r.PreRelease):[];return U.length>0&&U[0].value==="true"}function $(_){const U=_.properties?_.properties.filter(j=>j.key===r.LocalizedLanguages):[],x=U.length>0&&U[0].value||"";return x?x.split(","):[]}function V(_){return _.properties?.find(U=>U.key===r.SponsorLink)?.value}function B(_){return _.indexOf("preview")!==-1}function Q(_){return _.targetPlatform?(0,b.toTargetPlatform)(_.targetPlatform):"undefined"}function W(_){const U=(0,D.distinct)(_.versions.map(Q)),x=!!_.tags?.includes(b.WEB_EXTENSION_TAG),j=U.indexOf("web");return x?j===-1&&U.push("web"):j!==-1&&U.splice(j,1),U}function q(_,U){const x=(0,b.getFallbackTargetPlarforms)(U);for(let j=0;j<_.length;j++){const J=_[j];if(J.version===_[j-1]?.version){let re=j;const Y=Q(J);if(Y===U)for(;re>0&&_[re-1].version===J.version;)re--;else if(x.includes(Y))for(;re>0&&_[re-1].version===J.version&&Q(_[re-1])!==U;)re--;re!==j&&(_.splice(j,1),_.splice(re,0,J))}}return _}e.sortExtensionVersions=q;function G(_,U,x){_.telemetryData={index:U,querySource:x}}function ee(_,U,x){const j=_.versions[0],J={manifest:z(U,s.Manifest),readme:z(U,s.Details),changelog:z(U,s.Changelog),license:z(U,s.License),repository:N(U),download:O(U),icon:z(U,s.Icon),signature:z(U,s.Signature),coreTranslations:R(U)};return{identifier:{id:(0,p.getGalleryExtensionId)(_.publisher.publisherName,_.extensionName),uuid:_.extensionId},name:_.extensionName,version:U.version,displayName:_.displayName,publisherId:_.publisher.publisherId,publisher:_.publisher.publisherName,publisherDisplayName:_.publisher.displayName,publisherDomain:_.publisher.domain?{link:_.publisher.domain,verified:!!_.publisher.isDomainVerified}:void 0,publisherSponsorLink:V(j),description:_.shortDescription||"",installCount:E(_.statistics,"install"),rating:E(_.statistics,"averagerating"),ratingCount:E(_.statistics,"ratingcount"),categories:_.categories||[],tags:_.tags||[],releaseDate:Date.parse(_.releaseDate),lastUpdated:Date.parse(_.lastUpdated),allTargetPlatforms:x,assets:J,properties:{dependencies:F(U,r.Dependency),extensionPack:F(U,r.ExtensionPack),engine:A(U),localizedLanguages:$(U),targetPlatform:Q(U),isPreReleaseVersion:M(U)},hasPreReleaseVersion:M(j),hasReleaseVersion:!0,preview:B(_.flags),isSigned:!!J.signature}}let ae=class{constructor(U,x,j,J,re,Y,ie,ne){this.requestService=x,this.logService=j,this.environmentService=J,this.telemetryService=re,this.fileService=Y,this.productService=ie,this.configurationService=ne;const le=ie.extensionsGallery,ue=le?.servicePPEUrl&&ne.getValue("_extensionsGallery.enablePPE");this.extensionsGalleryUrl=ue?le.servicePPEUrl:le?.serviceUrl,this.extensionsGallerySearchUrl=ue?void 0:le?.searchUrl,this.extensionsControlUrl=le?.controlUrl,this.commonHeadersPromise=(0,m.resolveMarketplaceHeaders)(ie.version,ie,this.environmentService,this.configurationService,this.fileService,U,this.telemetryService)}api(U=""){return`${this.extensionsGalleryUrl}${U}`}isEnabled(){return!!this.extensionsGalleryUrl}async getExtensions(U,x,j){const J=i.CancellationToken.isCancellationToken(x)?{}:x,re=i.CancellationToken.isCancellationToken(x)?x:j,Y=[],ie=[],ne=[],le=[];let ue=!0;for(const Ee of U){Ee.uuid?ie.push(Ee.uuid):Y.push(Ee.id);const be=!!(Ee.version||Ee.preRelease);ne.push({id:Ee.id,uuid:Ee.uuid,includePreRelease:be}),Ee.version&&le.push({id:Ee.id,uuid:Ee.uuid,version:Ee.version}),ue=ue&&!!Ee.hasPreRelease&&!be}if(!ie.length&&!Y.length)return[];let Se=new v().withPage(1,U.length);ie.length&&(Se=Se.withFilter(t.ExtensionId,...ie)),Y.length&&(Se=Se.withFilter(t.ExtensionName,...Y)),(J.queryAllVersions||ue)&&(Se=Se.withFlags(Se.flags,n.IncludeVersions)),J.source&&(Se=Se.withSource(J.source));const{extensions:we}=await this.queryGalleryExtensions(Se,{targetPlatform:J.targetPlatform??d,includePreRelease:ne,versions:le,compatible:!!J.compatible},re);return J.source&&we.forEach((Ee,be)=>G(Ee,be,J.source)),we}async getCompatibleExtension(U,x,j){if((0,b.isNotWebExtensionInWebTargetPlatform)(U.allTargetPlatforms,j))return null;if(await this.isExtensionCompatible(U,x,j))return U;const J=new v().withFlags(n.IncludeVersions).withPage(1,1).withFilter(t.ExtensionId,U.identifier.uuid),{extensions:re}=await this.queryGalleryExtensions(J,{targetPlatform:j,compatible:!0,includePreRelease:x},i.CancellationToken.None);return re[0]||null}async isExtensionCompatible(U,x,j){if(!(0,b.isTargetPlatformCompatible)(U.properties.targetPlatform,U.allTargetPlatforms,j)||!x&&U.properties.isPreReleaseVersion)return!1;let J=U.properties.engine;if(!J){const re=await this.getManifest(U,i.CancellationToken.None);if(!re)throw new Error("Manifest was not found");J=re.engines.vscode}return(0,S.isEngineValid)(J,this.productService.version,this.productService.date)}async isValidVersion(U,x,j,J,re){if(!(0,b.isTargetPlatformCompatible)(Q(U),J,re)||x!=="any"&&M(U)!==(x==="prerelease"))return!1;if(j)try{const Y=await this.getEngine(U);if(!(0,S.isEngineValid)(Y,this.productService.version,this.productService.date))return!1}catch(Y){return this.logService.error(`Error while getting the engine for the version ${U.version}.`,(0,k.getErrorMessage)(Y)),!1}return!0}async query(U,x){let j=U.text||"";const J=U.pageSize??50;let re=new v().withPage(1,J);j?(j=j.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(ue,Se,we)=>(re=re.withFilter(t.Category,we||Se),"")),j=j.replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(ue,Se,we)=>(re=re.withFilter(t.Tag,we||Se),"")),j=j.replace(/\bfeatured(\s+|\b|$)/g,()=>(re=re.withFilter(t.Featured),"")),j=j.trim(),j&&(j=j.length<200?j:j.substring(0,200),re=re.withFilter(t.SearchText,j)),re=re.withSortBy(0)):U.ids?re=re.withFilter(t.ExtensionId,...U.ids):U.names?re=re.withFilter(t.ExtensionName,...U.names):re=re.withSortBy(4),typeof U.sortBy=="number"&&(re=re.withSortBy(U.sortBy)),typeof U.sortOrder=="number"&&(re=re.withSortOrder(U.sortOrder)),U.source&&(re=re.withSource(U.source));const Y=async(ue,Se)=>{const{extensions:we,total:Ee}=await this.queryGalleryExtensions(ue,{targetPlatform:d,compatible:!1,includePreRelease:!!U.includePreRelease},Se);return we.forEach((be,Oe)=>G(be,(ue.pageNumber-1)*ue.pageSize+Oe,U.source)),{extensions:we,total:Ee}},{extensions:ie,total:ne}=await Y(re,x),le=async(ue,Se)=>{if(Se.isCancellationRequested)throw new k.CancellationError;const{extensions:we}=await Y(re.withPage(ue+1),Se);return we};return{firstPage:ie,total:ne,pageSize:re.pageSize,getPage:le}}async queryGalleryExtensions(U,x,j){const J=U.flags;!!(U.flags&n.IncludeLatestVersionOnly)&&!!(U.flags&n.IncludeVersions)&&(U=U.withFlags(U.flags&~n.IncludeVersions,n.IncludeLatestVersionOnly)),!(U.flags&n.IncludeLatestVersionOnly)&&!(U.flags&n.IncludeVersions)&&(U=U.withFlags(U.flags,n.IncludeLatestVersionOnly)),x.versions?.length&&(U=U.withFlags(U.flags&~n.IncludeLatestVersionOnly,n.IncludeVersions)),U=U.withFlags(U.flags,n.IncludeAssetUri,n.IncludeCategoryAndTags,n.IncludeFiles,n.IncludeStatistics,n.IncludeVersionProperties);const{galleryExtensions:re,total:Y}=await this.queryRawGalleryExtensions(U,j);if(!(U.flags&n.IncludeLatestVersionOnly)){const ue=[];for(const Se of re){const we=await this.toGalleryExtensionWithCriteria(Se,x);we&&ue.push(we)}return{extensions:ue,total:Y}}const ne=[],le=new Map;for(let ue=0;ue<re.length;ue++){const Se=re[ue],we={id:(0,p.getGalleryExtensionId)(Se.publisher.publisherName,Se.extensionName),uuid:Se.extensionId},Ee=(0,I.isBoolean)(x.includePreRelease)?x.includePreRelease:!!x.includePreRelease.find(Oe=>(0,p.areSameExtensions)(Oe,we))?.includePreRelease;if(x.compatible&&(0,b.isNotWebExtensionInWebTargetPlatform)(W(Se),x.targetPlatform))continue;const be=await this.toGalleryExtensionWithCriteria(Se,x);!be||be.properties.isPreReleaseVersion&&(!Ee||!be.hasReleaseVersion)||!be.properties.isPreReleaseVersion&&be.properties.targetPlatform!==x.targetPlatform&&be.hasPreReleaseVersion?le.set(Se.extensionId,ue):ne.push([ue,be])}if(le.size){const ue=new Date().getTime(),Se=new v().withFlags(J&~n.IncludeLatestVersionOnly,n.IncludeVersions).withPage(1,le.size).withFilter(t.ExtensionId,...le.keys()),{extensions:we}=await this.queryGalleryExtensions(Se,x,j);this.telemetryService.publicLog2("galleryService:additionalQuery",{duration:new Date().getTime()-ue,count:le.size});for(const Ee of we){const be=le.get(Ee.identifier.uuid);ne.push([be,Ee])}}return{extensions:ne.sort((ue,Se)=>ue[0]-Se[0]).map(([,ue])=>ue),total:Y}}async toGalleryExtensionWithCriteria(U,x){const j={id:(0,p.getGalleryExtensionId)(U.publisher.publisherName,U.extensionName),uuid:U.extensionId},J=x.versions?.find(ne=>(0,p.areSameExtensions)(ne,j))?.version,re=(0,I.isBoolean)(x.includePreRelease)?x.includePreRelease:!!x.includePreRelease.find(ne=>(0,p.areSameExtensions)(ne,j))?.includePreRelease,Y=W(U),ie=q(U.versions,x.targetPlatform);if(x.compatible&&(0,b.isNotWebExtensionInWebTargetPlatform)(Y,x.targetPlatform))return null;for(let ne=0;ne<ie.length;ne++){const le=ie[ne];if(!(J&&le.version!==J)){if(await this.isValidVersion(le,re?"any":"release",x.compatible,Y,x.targetPlatform))return ee(U,le,Y);if(J&&le.version===J)return null}}return J||x.compatible?null:ee(U,U.versions[0],Y)}async queryRawGalleryExtensions(U,x){if(!this.isEnabled())throw new Error("No extension gallery service configured.");U=U.withFlags(U.flags,n.ExcludeNonValidated).withFilter(t.Target,"Microsoft.VisualStudio.Code").withFilter(t.ExcludeWithFlags,o(n.Unpublished));const j=await this.commonHeadersPromise,J=JSON.stringify(U.raw),re={...j,"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":String(J.length)},Y=new Date().getTime();let ie,ne,le=0;try{if(ie=await this.requestService.request({type:"POST",url:this.extensionsGallerySearchUrl&&U.criteria.some(Se=>Se.filterType===t.SearchText)?this.extensionsGallerySearchUrl:this.api("/extensionquery"),data:J,headers:re},x),ie.res.statusCode&&ie.res.statusCode>=400&&ie.res.statusCode<500)return{galleryExtensions:[],total:le};const ue=await(0,l.asJson)(ie);if(ue){const Se=ue.results[0],we=Se.extensions,Ee=Se.resultMetadata&&Se.resultMetadata.filter(be=>be.metadataType==="ResultCount")[0];return le=Ee&&Ee.metadataItems.filter(be=>be.name==="TotalCount")[0].count||0,{galleryExtensions:we,total:le}}return{galleryExtensions:[],total:le}}catch(ue){throw ne=ue,ue}finally{this.telemetryService.publicLog2("galleryService:query",{...U.telemetryData,requestBodySize:String(J.length),duration:new Date().getTime()-Y,success:!!ie&&(0,l.isSuccess)(ie),responseBodySize:ie?.res.headers["Content-Length"],statusCode:ie?String(ie.res.statusCode):void 0,errorCode:ne?(0,k.isCancellationError)(ne)?"canceled":(0,k.getErrorMessage)(ne).startsWith("XHR timeout")?"timeout":"failed":void 0,count:String(le)})}}async reportStatistic(U,x,j,J){if(!this.isEnabled())return;const re=L.isWeb?this.api(`/itemName/${U}.${x}/version/${j}/statType/${J==="install"?"1":"3"}/vscodewebextension`):this.api(`/publishers/${U}/extensions/${x}/${j}/stats?statType=${J}`),Y=L.isWeb?"api-version=6.1-preview.1":"*/*;api-version=4.0-preview.1",ne={...await this.commonHeadersPromise,Accept:Y};try{await this.requestService.request({type:"POST",url:re,headers:ne},i.CancellationToken.None)}catch{}}async download(U,x,j){this.logService.trace("ExtensionGalleryService#download",U.identifier.id);const J=(0,p.getGalleryExtensionTelemetryData)(U),re=new Date().getTime(),Y=ue=>this.telemetryService.publicLog("galleryService:downloadVSIX",{...J,duration:ue}),ie=j===2?"install":j===3?"update":"",ne=ie?{uri:`${U.assets.download.uri}${P.URI.parse(U.assets.download.uri).query?"&":"?"}${ie}=true`,fallbackUri:`${U.assets.download.fallbackUri}${P.URI.parse(U.assets.download.fallbackUri).query?"&":"?"}${ie}=true`}:U.assets.download,le=await this.getAsset(ne);await this.fileService.writeFile(x,le.stream),Y(new Date().getTime()-re)}async downloadSignatureArchive(U,x){if(!U.assets.signature)throw new Error("No signature asset found");this.logService.trace("ExtensionGalleryService#downloadSignatureArchive",U.identifier.id);const j=await this.getAsset(U.assets.signature);await this.fileService.writeFile(x,j.stream)}async getReadme(U,x){if(U.assets.readme){const j=await this.getAsset(U.assets.readme,{},x);return await(0,l.asTextOrError)(j)||""}return""}async getManifest(U,x){if(U.assets.manifest){const j=await this.getAsset(U.assets.manifest,{},x),J=await(0,l.asTextOrError)(j);return J?JSON.parse(J):null}return null}async getManifestFromRawExtensionVersion(U,x){const j=z(U,s.Manifest);if(!j)throw new Error("Manifest was not found");const J={"Accept-Encoding":"gzip"},re=await this.getAsset(j,{headers:J});return await(0,l.asJson)(re)}async getCoreTranslation(U,x){const j=U.assets.coreTranslations.filter(J=>J[0]===x.toUpperCase())[0];if(j){const J=await this.getAsset(j[1]),re=await(0,l.asTextOrError)(J);return re?JSON.parse(re):null}return null}async getChangelog(U,x){if(U.assets.changelog){const j=await this.getAsset(U.assets.changelog,{},x);return await(0,l.asTextOrError)(j)||""}return""}async getAllCompatibleVersions(U,x,j){let J=new v().withFlags(n.IncludeVersions,n.IncludeCategoryAndTags,n.IncludeFiles,n.IncludeVersionProperties).withPage(1,1);U.identifier.uuid?J=J.withFilter(t.ExtensionId,U.identifier.uuid):J=J.withFilter(t.ExtensionName,U.identifier.id);const{galleryExtensions:re}=await this.queryRawGalleryExtensions(J,i.CancellationToken.None);if(!re.length)return[];const Y=W(re[0]);if((0,b.isNotWebExtensionInWebTargetPlatform)(Y,j))return[];const ie=[];await Promise.all(re[0].versions.map(async ue=>{try{await this.isValidVersion(ue,x?"any":"release",!0,Y,j)&&ie.push(ue)}catch{}}));const ne=[],le=new Set;for(const ue of q(ie,j))le.has(ue.version)||(le.add(ue.version),ne.push({version:ue.version,date:ue.lastUpdated,isPreReleaseVersion:M(ue)}));return ne}async getAsset(U,x={},j=i.CancellationToken.None){const J=await this.commonHeadersPromise,re={type:"GET"},Y={...J,...x.headers||{}};x={...x,...re,headers:Y};const ie=U.uri,ne=U.fallbackUri,le={...x,url:ie};try{const ue=await this.requestService.request(le,j);if(ue.res.statusCode===200)return ue;const Se=await(0,l.asTextOrError)(ue);throw new Error(`Expected 200, got back ${ue.res.statusCode} instead.

${Se}`)}catch(ue){if((0,k.isCancellationError)(ue))throw ue;const Se=(0,k.getErrorMessage)(ue);this.telemetryService.publicLog2("galleryService:cdnFallback",{url:ie,message:Se});const we={...x,url:ne};return this.requestService.request(we,j)}}async getEngine(U){let x=A(U);if(!x){const j=await this.getManifestFromRawExtensionVersion(U,i.CancellationToken.None);if(!j)throw new Error("Manifest was not found");x=j.engines.vscode}return x}async getExtensionsControlManifest(){if(!this.isEnabled())throw new Error("No extension gallery service configured.");if(!this.extensionsControlUrl)return{malicious:[],deprecated:{}};const U=await this.requestService.request({type:"GET",url:this.extensionsControlUrl},i.CancellationToken.None);if(U.res.statusCode!==200)throw new Error("Could not get extensions report.");const x=await(0,l.asJson)(U),j=[],J={};if(x){for(const re of x.malicious)j.push({id:re});if(x.migrateToPreRelease)for(const[re,Y]of Object.entries(x.migrateToPreRelease))(!Y.engine||(0,S.isEngineValid)(Y.engine,this.productService.version,this.productService.date))&&(J[re.toLowerCase()]={disallowInstall:!0,extension:{id:Y.id,displayName:Y.displayName,autoMigrate:{storage:!!Y.migrateStorage},preRelease:!0}});if(x.deprecated)for(const[re,Y]of Object.entries(x.deprecated))Y&&(J[re.toLowerCase()]=(0,I.isBoolean)(Y)?{}:Y)}return{malicious:j,deprecated:J}}};ae=ve([H(1,l.IRequestService),H(2,g.ILogService),H(3,C.IEnvironmentService),H(4,h.ITelemetryService),H(5,f.IFileService),H(6,y.IProductService),H(7,w.IConfigurationService)],ae);let K=class extends ae{constructor(U,x,j,J,re,Y,ie,ne){super(U,x,j,J,re,Y,ie,ne)}};K=ve([H(0,u.IStorageService),H(1,l.IRequestService),H(2,g.ILogService),H(3,C.IEnvironmentService),H(4,h.ITelemetryService),H(5,f.IFileService),H(6,y.IProductService),H(7,w.IConfigurationService)],K),e.ExtensionGalleryService=K;let X=class extends ae{constructor(U,x,j,J,re,Y,ie){super(void 0,U,x,j,J,re,Y,ie)}};X=ve([H(0,l.IRequestService),H(1,g.ILogService),H(2,C.IEnvironmentService),H(3,h.ITelemetryService),H(4,f.IFileService),H(5,y.IProductService),H(6,w.IConfigurationService)],X),e.ExtensionGalleryServiceWithNoStorageService=X}),define(se[80],oe([0,1,4,3,2,19,33,25,20,8,14]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionStorageService=e.IExtensionStorageService=void 0,e.IExtensionStorageService=(0,D.createDecorator)("IExtensionStorageService");const b=/^extensionKeys\/([^.]+\..+)@(\d+\.\d+\.\d+(-.*)?)$/;let p=class Qe extends k.Disposable{static toKey(f){return`extensionKeys/${(0,T.adoptToGalleryExtensionId)(f.id)}@${f.version}`}static fromKey(f){const g=b.exec(f);if(g&&g[1])return{id:g[1],version:g[2]}}static async removeOutdatedExtensionVersions(f,g){const y=await f.getInstalled(),l=[];for(const[m,u]of Qe.readAllExtensionsWithKeysForSync(g)){const h=y.find(d=>(0,T.areSameExtensions)(d.identifier,{id:m}))?.manifest.version;for(const d of u)h!==d&&l.push(Qe.toKey({id:m,version:d}))}for(const m of l)g.remove(m,0)}static readAllExtensionsWithKeysForSync(f){const g=new Map,y=f.keys(0,1);for(const l of y){const m=Qe.fromKey(l);if(m){let u=g.get(m.id.toLowerCase());u||g.set(m.id.toLowerCase(),u=[]),u.push(m.version)}}return g}constructor(f,g,y){super(),this.storageService=f,this.productService=g,this.logService=y,this._onDidChangeExtensionStorageToSync=this._register(new i.Emitter),this.onDidChangeExtensionStorageToSync=this._onDidChangeExtensionStorageToSync.event,this.extensionsWithKeysForSync=Qe.readAllExtensionsWithKeysForSync(f),this._register(this.storageService.onDidChangeValue(l=>this.onDidChangeStorageValue(l)))}onDidChangeStorageValue(f){if(f.scope!==0)return;if(this.extensionsWithKeysForSync.has(f.key.toLowerCase())){this._onDidChangeExtensionStorageToSync.fire();return}const g=Qe.fromKey(f.key);if(g){if(this.storageService.get(f.key,0)===void 0)this.extensionsWithKeysForSync.delete(g.id.toLowerCase());else{let y=this.extensionsWithKeysForSync.get(g.id.toLowerCase());y||this.extensionsWithKeysForSync.set(g.id.toLowerCase(),y=[]),y.push(g.version),this._onDidChangeExtensionStorageToSync.fire()}return}}getExtensionId(f){if((0,C.isString)(f))return f;const g=f.manifest?f.manifest.publisher:f.publisher,y=f.manifest?f.manifest.name:f.name;return(0,T.getExtensionId)(g,y)}getExtensionState(f,g){const y=this.getExtensionId(f),l=this.getExtensionStateRaw(f,g);if(l)try{return JSON.parse(l)}catch(m){this.logService.error(`[mainThreadStorage] unexpected error parsing storage contents (extensionId: ${y}, global: ${g}): ${m}`)}}getExtensionStateRaw(f,g){const y=this.getExtensionId(f),l=this.storageService.get(y,g?0:1);return l&&l?.length>Qe.LARGE_STATE_WARNING_THRESHOLD&&this.logService.warn(`[mainThreadStorage] large extension state detected (extensionId: ${y}, global: ${g}): ${l.length/1024}kb. Consider to use 'storageUri' or 'globalStorageUri' to store this data on disk instead.`),l}setExtensionState(f,g,y){const l=this.getExtensionId(f);g===void 0?this.storageService.remove(l,y?0:1):this.storageService.store(l,JSON.stringify(g),y?0:1,1)}setKeysForSync(f,g){this.storageService.store(Qe.toKey(f),JSON.stringify(g),0,1)}getKeysForSync(f){const g=this.productService.extensionSyncedKeys?.[f.id.toLowerCase()],y=this.storageService.get(Qe.toKey(f),0),l=y?JSON.parse(y):void 0;return l&&g?(0,P.distinct)([...l,...g]):l||g}addToMigrationList(f,g){if(f!==g){const y=this.migrationList.filter(l=>!l.includes(f)&&!l.includes(g));y.push([f,g]),this.migrationList=y}}getSourceExtensionToMigrate(f){const g=this.migrationList.find(([,y])=>f===y);return g?g[0]:void 0}get migrationList(){const f=this.storageService.get("extensionStorage.migrationList",-1,"[]");try{const g=JSON.parse(f);if(Array.isArray(g))return g}catch{}return[]}set migrationList(f){f.length?this.storageService.store("extensionStorage.migrationList",JSON.stringify(f),-1,1):this.storageService.remove("extensionStorage.migrationList",-1)}};p.LARGE_STATE_WARNING_THRESHOLD=512*1024,p=ve([H(0,L.IStorageService),H(1,I.IProductService),H(2,w.ILogService)],p),e.ExtensionStorageService=p}),define(se[266],oe([0,1,20,6,3,12,5,36,7,159,15,29,33,211,99,13,57,25,19,23]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionTipsService=void 0;const h="extensionTips/promptedExecutableTips",d="extensionTips/lastPromptedMediumImpExeTime";let n=class extends S.ExtensionTipsService{constructor(t,s,r,c,a,v,E,R){super(E,R),this.environmentService=t,this.telemetryService=s,this.extensionManagementService=r,this.storageService=c,this.nativeHostService=a,this.extensionRecommendationNotificationService=v,this.highImportanceExecutableTips=new Map,this.mediumImportanceExecutableTips=new Map,this.allOtherExecutableTips=new Map,this.highImportanceTipsByExe=new Map,this.mediumImportanceTipsByExe=new Map,R.exeBasedExtensionTips&&Object.entries(R.exeBasedExtensionTips).forEach(([N,O])=>{const z=[],F=[],A=[];Object.entries(O.recommendations).forEach(([M,$])=>{$.important?O.important?z.push({extensionId:M,extensionName:$.name,isExtensionPack:!!$.isExtensionPack}):F.push({extensionId:M,extensionName:$.name,isExtensionPack:!!$.isExtensionPack}):A.push({extensionId:M,extensionName:$.name,isExtensionPack:!!$.isExtensionPack})}),z.length&&this.highImportanceExecutableTips.set(N,{exeFriendlyName:O.friendlyName,windowsPath:O.windowsPath,recommendations:z}),F.length&&this.mediumImportanceExecutableTips.set(N,{exeFriendlyName:O.friendlyName,windowsPath:O.windowsPath,recommendations:F}),A.length&&this.allOtherExecutableTips.set(N,{exeFriendlyName:O.friendlyName,windowsPath:O.windowsPath,recommendations:A})}),(0,i.timeout)(3e3).then(async()=>{await this.collectTips(),this.promptHighImportanceExeBasedTip(),this.promptMediumImportanceExeBasedTip()})}async getImportantExecutableBasedTips(){const t=await this.getValidExecutableBasedExtensionTips(this.highImportanceExecutableTips),s=await this.getValidExecutableBasedExtensionTips(this.mediumImportanceExecutableTips);return[...t,...s]}getOtherExecutableBasedTips(){return this.getValidExecutableBasedExtensionTips(this.allOtherExecutableTips)}async collectTips(){const t=await this.getValidExecutableBasedExtensionTips(this.highImportanceExecutableTips),s=await this.getValidExecutableBasedExtensionTips(this.mediumImportanceExecutableTips),r=await this.extensionManagementService.getInstalled();this.highImportanceTipsByExe=this.groupImportantTipsByExe(t,r),this.mediumImportanceTipsByExe=this.groupImportantTipsByExe(s,r)}groupImportantTipsByExe(t,s){const r=new Map;t.forEach(R=>r.set(R.extensionId.toLowerCase(),R));const{installed:c,uninstalled:a}=this.groupByInstalled([...r.keys()],s);for(const R of c){const N=r.get(R);N&&this.telemetryService.publicLog2("exeExtensionRecommendations:alreadyInstalled",{extensionId:R,exeName:N.exeName})}for(const R of a){const N=r.get(R);N&&this.telemetryService.publicLog2("exeExtensionRecommendations:notInstalled",{extensionId:R,exeName:N.exeName})}const v=this.getPromptedExecutableTips(),E=new Map;for(const R of a){const N=r.get(R);if(N&&(!v[N.exeName]||!v[N.exeName].includes(N.extensionId))){let O=E.get(N.exeName);O||(O=[],E.set(N.exeName,O)),O.push(N)}}return E}promptHighImportanceExeBasedTip(){if(this.highImportanceTipsByExe.size===0)return;const[t,s]=[...this.highImportanceTipsByExe.entries()][0];this.promptExeRecommendations(s).then(r=>{switch(r){case"reacted":this.addToRecommendedExecutables(s[0].exeName,s);break;case"ignored":this.highImportanceTipsByExe.delete(t);break;case"incompatibleWindow":{const c=k.Event.once(k.Event.latch(k.Event.any(this.nativeHostService.onDidOpenWindow,this.nativeHostService.onDidFocusWindow)));this._register(c(()=>this.promptHighImportanceExeBasedTip()));break}case"toomany":{const c=this._register((0,i.disposableTimeout)(()=>{c.dispose(),this.promptHighImportanceExeBasedTip()},36e5));break}}})}promptMediumImportanceExeBasedTip(){if(this.mediumImportanceTipsByExe.size===0)return;const t=this.getLastPromptedMediumExeTime(),s=Date.now()-t,r=7*24*60*60*1e3;if(s<r){const v=this._register((0,i.disposableTimeout)(()=>{v.dispose(),this.promptMediumImportanceExeBasedTip()},r-s));return}const[c,a]=[...this.mediumImportanceTipsByExe.entries()][0];this.promptExeRecommendations(a).then(v=>{switch(v){case"reacted":{this.updateLastPromptedMediumExeTime(Date.now()),this.mediumImportanceTipsByExe.delete(c),this.addToRecommendedExecutables(a[0].exeName,a);const E=this._register((0,i.disposableTimeout)(()=>{E.dispose(),this.promptMediumImportanceExeBasedTip()},r));break}case"ignored":this.mediumImportanceTipsByExe.delete(c),this.promptMediumImportanceExeBasedTip();break;case"incompatibleWindow":{const E=k.Event.once(k.Event.latch(k.Event.any(this.nativeHostService.onDidOpenWindow,this.nativeHostService.onDidFocusWindow)));this._register(E(()=>this.promptMediumImportanceExeBasedTip()));break}case"toomany":{const E=this._register((0,i.disposableTimeout)(()=>{E.dispose(),this.promptMediumImportanceExeBasedTip()},36e5));break}}})}async promptExeRecommendations(t){const s=await this.extensionManagementService.getInstalled(1),r=t.filter(a=>!a.whenNotInstalled||a.whenNotInstalled.every(v=>s.every(E=>!(0,p.areSameExtensions)(E.identifier,{id:v})))).map(({extensionId:a})=>a.toLowerCase()),c=(0,w.localize)(0,null,t[0].exeFriendlyName);return this.extensionRecommendationNotificationService.promptImportantExtensionsInstallNotification(r,c,`@exe:"${t[0].exeName}"`,3)}getLastPromptedMediumExeTime(){let t=this.storageService.getNumber(d,-1);return t||(t=Date.now(),this.updateLastPromptedMediumExeTime(t)),t}updateLastPromptedMediumExeTime(t){this.storageService.store(d,t,-1,1)}getPromptedExecutableTips(){return JSON.parse(this.storageService.get(h,-1,"{}"))}addToRecommendedExecutables(t,s){const r=this.getPromptedExecutableTips();r[t]=s.map(({extensionId:c})=>c.toLowerCase()),this.storageService.store(h,JSON.stringify(r),-1,0)}groupByInstalled(t,s){const r=[],c=[],a=s.reduce((v,E)=>(v.add(E.identifier.id.toLowerCase()),v),new Set);return t.forEach(v=>{a.has(v.toLowerCase())?r.push(v):c.push(v)}),{installed:r,uninstalled:c}}async getValidExecutableBasedExtensionTips(t){const s=[],r=new Map;for(const c of t.keys()){const a=t.get(c);if(!a||!(0,D.isNonEmptyArray)(a.recommendations))continue;const v=[];T.isWindows?a.windowsPath&&v.push(a.windowsPath.replace("%USERPROFILE%",I.env.USERPROFILE).replace("%ProgramFiles(x86)%",I.env["ProgramFiles(x86)"]).replace("%ProgramFiles%",I.env.ProgramFiles).replace("%APPDATA%",I.env.APPDATA).replace("%WINDIR%",I.env.WINDIR)):(v.push((0,L.join)("/usr/local/bin",c)),v.push((0,L.join)("/usr/bin",c)),v.push((0,L.join)(this.environmentService.userHome.fsPath,c)));for(const E of v){let R=r.get(E);if(R===void 0&&(R=await this.fileService.exists(P.URI.file(E)),r.set(E,R)),R)for(const{extensionId:N,extensionName:O,isExtensionPack:z,whenNotInstalled:F}of a.recommendations)s.push({extensionId:N,extensionName:O,isExtensionPack:z,exeName:c,exeFriendlyName:a.exeFriendlyName,windowsPath:a.windowsPath,whenNotInstalled:F})}}return s}};n=ve([H(0,C.INativeEnvironmentService),H(1,u.ITelemetryService),H(2,b.IExtensionManagementService),H(3,m.IStorageService),H(4,y.INativeHostService),H(5,f.IExtensionRecommendationNotificationService),H(6,g.IFileService),H(7,l.IProductService)],n),e.ExtensionTipsService=n}),define(se[267],oe([0,1,6,2,22,69,19,76,18]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeStorageService=void 0;class w extends T.AbstractStorageService{constructor(b,p,S,f){super(),this.initialWorkspace=b,this.initialProfiles=p,this.mainProcessService=S,this.environmentService=f,this.applicationStorageProfile=this.initialProfiles.defaultProfile,this.applicationStorage=this.createApplicationStorage(),this.profileStorageProfile=this.initialProfiles.currentProfile,this.profileStorageDisposables=this._register(new i.DisposableStore),this.profileStorage=this.createProfileStorage(this.profileStorageProfile),this.workspaceStorageId=this.initialWorkspace?.id,this.workspaceStorageDisposables=this._register(new i.DisposableStore),this.workspaceStorage=this.createWorkspaceStorage(this.initialWorkspace)}createApplicationStorage(){const b=this._register(new I.ApplicationStorageDatabaseClient(this.mainProcessService.getChannel("storage"))),p=this._register(new L.Storage(b));return this._register(p.onDidChangeStorage(S=>this.emitDidChangeValue(-1,S))),p}createProfileStorage(b){this.profileStorageDisposables.clear(),this.profileStorageProfile=b;let p;if((0,T.isProfileUsingDefaultStorage)(b))p=this.applicationStorage;else{const S=this.profileStorageDisposables.add(new I.ProfileStorageDatabaseClient(this.mainProcessService.getChannel("storage"),b));p=this.profileStorageDisposables.add(new L.Storage(S))}return this.profileStorageDisposables.add(p.onDidChangeStorage(S=>this.emitDidChangeValue(0,S))),p}createWorkspaceStorage(b){this.workspaceStorageDisposables.clear(),this.workspaceStorageId=b?.id;let p;if(b){const S=this.workspaceStorageDisposables.add(new I.WorkspaceStorageDatabaseClient(this.mainProcessService.getChannel("storage"),b));p=this.workspaceStorageDisposables.add(new L.Storage(S)),this.workspaceStorageDisposables.add(p.onDidChangeStorage(f=>this.emitDidChangeValue(1,f)))}return p}async doInitialize(){await D.Promises.settled([this.applicationStorage.init(),this.profileStorage.init(),this.workspaceStorage?.init()??Promise.resolve()])}getStorage(b){switch(b){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(b){switch(b){case-1:return this.applicationStorageProfile.globalStorageHome.fsPath;case 0:return this.profileStorageProfile?.globalStorageHome.fsPath;default:return this.workspaceStorageId?`${(0,k.joinPath)(this.environmentService.workspaceStorageHome,this.workspaceStorageId,"state.vscdb").fsPath}`:void 0}}async close(){this.stopFlushWhenIdle(),this.emitWillSaveState(T.WillSaveStateReason.SHUTDOWN),await D.Promises.settled([this.applicationStorage.close(),this.profileStorage.close(),this.workspaceStorage?.close()??Promise.resolve()])}async switchToProfile(b,p){if(!this.canSwitchProfile(this.profileStorageProfile,b))return;const S=this.profileStorage,f=S.items;S!==this.applicationStorage&&await S.close(),this.profileStorage=this.createProfileStorage(b),await this.profileStorage.init(),this.switchData(f,this.profileStorage,0,p)}async switchToWorkspace(b,p){const S=this.workspaceStorage,f=S?.items??new Map;await S?.close(),this.workspaceStorage=this.createWorkspaceStorage(b),await this.workspaceStorage.init(),this.switchData(f,this.workspaceStorage,1,p)}hasScope(b){return(0,P.isUserDataProfile)(b)?this.profileStorageProfile.id===b.id:this.workspaceStorageId===b.id}}e.NativeStorageService=w}),define(se[62],oe([0,1,2,69,4,19]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractUserDataProfileStorageService=e.IUserDataProfileStorageService=void 0,e.IUserDataProfileStorageService=(0,k.createDecorator)("IUserDataProfileStorageService");let T=class extends D.Disposable{constructor(w){super(),this.storageService=w}async readStorageData(w){return this.withProfileScopedStorageService(w,async C=>this.getItems(C))}async updateStorageData(w,C,b){return this.withProfileScopedStorageService(w,async p=>this.writeItems(p,C,b))}async withProfileScopedStorageService(w,C){if(this.storageService.hasScope(w))return C(this.storageService);const b=await this.createStorageDatabase(w),p=new I(b);try{await p.initialize();const S=await C(p);return await p.flush(),S}finally{p.dispose(),await this.closeAndDispose(b)}}getItems(w){const C=new Map,b=p=>{for(const S of w.keys(0,p))C.set(S,{value:w.get(S,0),target:p})};return b(0),b(1),C}writeItems(w,C,b){for(const[p,S]of C)w.store(p,S,0,b)}async closeAndDispose(w){try{await w.close()}finally{(0,D.isDisposable)(w)&&w.dispose()}}};T=ve([H(0,L.IStorageService)],T),e.AbstractUserDataProfileStorageService=T;class I extends L.AbstractStorageService{constructor(w){super({flushInterval:100}),this.profileStorage=this._register(new i.Storage(w))}doInitialize(){return this.profileStorage.init()}getStorage(w){return w===0?this.profileStorage:void 0}getLogDetails(){}async switchToProfile(){}async switchToWorkspace(){}hasScope(){return!1}}}),define(se[268],oe([0,1,3,2,22,15,56,18]),function(Z,e,D,i,k,L,T,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataProfilesNativeService=void 0;let P=class extends i.Disposable{get defaultProfile(){return this.profiles[0]}get profiles(){return this._profiles}constructor(C,b,p){super(),this._profiles=[],this._onDidChangeProfiles=this._register(new D.Emitter),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this.enabled=!0,this.channel=b.getChannel("userDataProfiles"),this.profilesHome=(0,k.joinPath)(p.userRoamingDataHome,"profiles"),this._profiles=C.map(S=>(0,I.reviveProfile)(S,this.profilesHome.scheme)),this._register(this.channel.listen("onDidChangeProfiles")(S=>{const f=S.added.map(l=>(0,I.reviveProfile)(l,this.profilesHome.scheme)),g=S.removed.map(l=>(0,I.reviveProfile)(l,this.profilesHome.scheme)),y=S.updated.map(l=>(0,I.reviveProfile)(l,this.profilesHome.scheme));this._profiles=S.all.map(l=>(0,I.reviveProfile)(l,this.profilesHome.scheme)),this._onDidChangeProfiles.fire({added:f,removed:g,updated:y,all:this.profiles})})),this.onDidResetWorkspaces=this.channel.listen("onDidResetWorkspaces")}setEnablement(C){this.enabled=C}isEnabled(){return this.enabled}async createNamedProfile(C,b,p){const S=await this.channel.call("createNamedProfile",[C,b,p]);return(0,I.reviveProfile)(S,this.profilesHome.scheme)}async createProfile(C,b,p,S){const f=await this.channel.call("createProfile",[C,b,p,S]);return(0,I.reviveProfile)(f,this.profilesHome.scheme)}async createTransientProfile(C){const b=await this.channel.call("createTransientProfile",[C]);return(0,I.reviveProfile)(b,this.profilesHome.scheme)}async setProfileForWorkspace(C,b){await this.channel.call("setProfileForWorkspace",[C,b])}removeProfile(C){return this.channel.call("removeProfile",[C])}async updateProfile(C,b){const p=await this.channel.call("updateProfile",[C,b]);return(0,I.reviveProfile)(p,this.profilesHome.scheme)}resetWorkspaces(){return this.channel.call("resetWorkspaces")}cleanUp(){return this.channel.call("cleanUp")}cleanUpTransientProfiles(){return this.channel.call("cleanUpTransientProfiles")}};P=ve([H(1,T.IMainProcessService),H(2,L.IEnvironmentService)],P),e.UserDataProfilesNativeService=P}),define(se[269],oe([0,1,3,2,56,8,62,19,76,18,71]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataProfileStorageService=void 0;let b=class extends T.AbstractUserDataProfileStorageService{constructor(S,f,g,y){super(g),this.mainProcessService=S;const l=S.getChannel("profileStorageListener"),m=this._register(new i.MutableDisposable);this._onDidChange=this._register(new D.Emitter({onWillAddFirstListener:()=>{m.value=l.listen("onDidChange")(u=>{y.trace("profile storage changes",u),this._onDidChange.fire({targetChanges:u.targetChanges.map(h=>(0,w.reviveProfile)(h,f.profilesHome.scheme)),valueChanges:u.valueChanges.map(h=>({...h,profile:(0,w.reviveProfile)(h.profile,f.profilesHome.scheme)}))})})},onDidRemoveLastListener:()=>m.value=void 0})),this.onDidChange=this._onDidChange.event}async createStorageDatabase(S){const f=this.mainProcessService.getChannel("storage");return(0,I.isProfileUsingDefaultStorage)(S)?new P.ApplicationStorageDatabaseClient(f):new P.ProfileStorageDatabaseClient(f,S)}};b=ve([H(0,k.IMainProcessService),H(1,w.IUserDataProfilesService),H(2,I.IStorageService),H(3,L.ILogService)],b),e.UserDataProfileStorageService=b,(0,C.registerSingleton)(T.IUserDataProfileStorageService,b,1)}),define(se[41],oe([0,1,20,6,17,24,3,35,2,27,14,175,16,15,13,8,45,19,23,30,26,18]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractInitializer=e.AbstractJsonFileSynchroniser=e.AbstractFileSynchroniser=e.AbstractSynchroniser=e.getSyncResourceLogLabel=e.isSyncData=e.isRemoteUserData=void 0;function n(v){return!!(v&&v.ref!==void 0&&typeof v.ref=="string"&&v.ref!==""&&v.syncData!==void 0&&(v.syncData===null||o(v.syncData)))}e.isRemoteUserData=n;function o(v){return!!(v&&v.version!==void 0&&typeof v.version=="number"&&v.content!==void 0&&typeof v.content=="string"&&(Object.keys(v).length===2||Object.keys(v).length===3&&v.machineId!==void 0&&typeof v.machineId=="string"))}e.isSyncData=o;function t(v,E){return`${(0,w.uppercaseFirstLetter)(v)}${E.isDefault?"":` (${E.name})`}`}e.getSyncResourceLogLabel=t;let s=class extends P.Disposable{get status(){return this._status}get conflicts(){return{...this.syncResource,conflicts:this._conflicts}}constructor(E,R,N,O,z,F,A,M,$,V,B,Q){super(),this.syncResource=E,this.collection=R,this.fileService=N,this.environmentService=O,this.storageService=z,this.userDataSyncStoreService=F,this.userDataSyncBackupStoreService=A,this.userDataSyncEnablementService=M,this.telemetryService=$,this.logService=V,this.configurationService=B,this.syncPreviewPromise=null,this._status="idle",this._onDidChangStatus=this._register(new T.Emitter),this.onDidChangeStatus=this._onDidChangStatus.event,this._conflicts=[],this._onDidChangeConflicts=this._register(new T.Emitter),this.onDidChangeConflicts=this._onDidChangeConflicts.event,this.localChangeTriggerThrottler=new i.ThrottledDelayer(50),this._onDidChangeLocal=this._register(new T.Emitter),this.onDidChangeLocal=this._onDidChangeLocal.event,this.lastSyncUserDataStateKey=`${this.collection?`${this.collection}.`:""}${this.syncResource.syncResource}.lastSyncUserData`,this.hasSyncResourceStateVersionChanged=!1,this.syncHeaders={},this.resource=this.syncResource.syncResource,this.syncResourceLogLabel=t(E.syncResource,E.profile),this.extUri=Q.extUri,this.syncFolder=this.extUri.joinPath(O.userDataSyncHome,...(0,h.getPathSegments)(E.profile.isDefault?void 0:E.profile.id,E.syncResource)),this.syncPreviewFolder=this.extUri.joinPath(this.syncFolder,h.PREVIEW_DIR_NAME),this.lastSyncResource=(0,h.getLastSyncResourceUri)(E.profile.isDefault?void 0:E.profile.id,E.syncResource,O,this.extUri),this.currentMachineIdPromise=(0,y.getServiceMachineId)(O,N,z)}triggerLocalChange(){this.localChangeTriggerThrottler.trigger(()=>this.doTriggerLocalChange())}async doTriggerLocalChange(){if(this.status==="hasConflicts"){this.logService.info(`${this.syncResourceLogLabel}: In conflicts state and local change detected. Syncing again...`);const E=await this.syncPreviewPromise;this.syncPreviewPromise=null;const R=await this.performSync(E.remoteUserData,E.lastSyncUserData,!0,this.getUserDataSyncConfiguration());this.setStatus(R)}else{this.logService.trace(`${this.syncResourceLogLabel}: Checking for local changes...`);const E=await this.getLastSyncUserData();(E?await this.hasRemoteChanged(E):!0)&&this._onDidChangeLocal.fire()}}setStatus(E){this._status!==E&&(this._status=E,this._onDidChangStatus.fire(E))}async sync(E,R={}){await this._sync(E,!0,this.getUserDataSyncConfiguration(),R)}async preview(E,R,N={}){return this._sync(E,!1,R,N)}async apply(E,R={}){try{this.syncHeaders={...R};const N=await this.doApply(E);return this.setStatus(N),this.syncPreviewPromise}finally{this.syncHeaders={}}}async _sync(E,R,N,O){try{if(this.syncHeaders={...O},this.status==="hasConflicts")return this.logService.info(`${this.syncResourceLogLabel}: Skipped synchronizing ${this.resource.toLowerCase()} as there are conflicts.`),this.syncPreviewPromise;if(this.status==="syncing")return this.logService.info(`${this.syncResourceLogLabel}: Skipped synchronizing ${this.resource.toLowerCase()} as it is running already.`),this.syncPreviewPromise;this.logService.trace(`${this.syncResourceLogLabel}: Started synchronizing ${this.resource.toLowerCase()}...`),this.setStatus("syncing");let z="idle";try{const F=await this.getLastSyncUserData(),A=await this.getLatestRemoteUserData(E,F);return z=await this.performSync(A,F,R,N),z==="hasConflicts"?this.logService.info(`${this.syncResourceLogLabel}: Detected conflicts while synchronizing ${this.resource.toLowerCase()}.`):z==="idle"&&this.logService.trace(`${this.syncResourceLogLabel}: Finished synchronizing ${this.resource.toLowerCase()}.`),this.syncPreviewPromise||null}finally{this.setStatus(z)}}finally{this.syncHeaders={}}}async replace(E){const R=this.parseSyncData(E);if(!R)return!1;await this.stop();try{this.logService.trace(`${this.syncResourceLogLabel}: Started resetting ${this.resource.toLowerCase()}...`),this.setStatus("syncing");const N=await this.getLastSyncUserData(),O=await this.getLatestRemoteUserData(null,N),z=await this.isRemoteDataFromCurrentMachine(O),F=await this.generateSyncPreview({ref:O.ref,syncData:R},N,z,this.getUserDataSyncConfiguration(),L.CancellationToken.None),A=[];for(const M of F){const $=await this.getAcceptResult(M,M.remoteResource,void 0,L.CancellationToken.None),{remoteChange:V}=await this.getAcceptResult(M,M.previewResource,M.remoteContent,L.CancellationToken.None);A.push([M,{...$,remoteChange:V!==0?V:2}])}await this.applyResult(O,N,A,!1),this.logService.info(`${this.syncResourceLogLabel}: Finished resetting ${this.resource.toLowerCase()}.`)}finally{this.setStatus("idle")}return!0}async isRemoteDataFromCurrentMachine(E){const R=await this.currentMachineIdPromise;return!!E.syncData?.machineId&&E.syncData.machineId===R}async getLatestRemoteUserData(E,R){if(R){const N=E?E[this.resource]:void 0;if(R.ref===N||N===void 0&&R.syncData===null)return R}return this.getRemoteUserData(R)}async performSync(E,R,N,O){if(E.syncData&&E.syncData.version>this.version)throw this.telemetryService.publicLog2("sync/incompatible",{source:this.resource}),new h.UserDataSyncError((0,b.localize)(0,null,this.resource,this.version,E.syncData.version),"IncompatibleLocalContent",this.resource);try{return await this.doSync(E,R,N,O)}catch(z){if(z instanceof h.UserDataSyncError)switch(z.code){case"LocalPreconditionFailed":return this.logService.info(`${this.syncResourceLogLabel}: Failed to synchronize ${this.syncResourceLogLabel} as there is a new local version available. Synchronizing again...`),this.performSync(E,R,N,O);case"Conflict":case"PreconditionFailed":return this.logService.info(`${this.syncResourceLogLabel}: Failed to synchronize as there is a new remote version available. Synchronizing again...`),E=await this.getRemoteUserData(null),R=await this.getLastSyncUserData(),this.performSync(E,R,N,O)}throw z}}async doSync(E,R,N,O){try{const z=await this.isRemoteDataFromCurrentMachine(E),F=!z&&R===null&&this.getStoredLastSyncUserDataStateContent()!==void 0,A=N&&!F;this.syncPreviewPromise||(this.syncPreviewPromise=(0,i.createCancelablePromise)($=>this.doGenerateSyncResourcePreview(E,R,z,A,O,$)));let M=await this.syncPreviewPromise;if(N&&F){this.logService.info(`${this.syncResourceLogLabel}: Accepting remote because it was synced before and the last sync data is not available.`);for(const $ of M.resourcePreviews)M=await this.accept($.remoteResource)||M}return this.updateConflicts(M.resourcePreviews),M.resourcePreviews.some(({mergeState:$})=>$==="conflict")?"hasConflicts":N?await this.doApply(!1):"syncing"}catch(z){throw this.syncPreviewPromise=null,z}}async merge(E){return await this.updateSyncResourcePreview(E,async R=>{const N=await this.getMergeResult(R,L.CancellationToken.None);await this.fileService.writeFile(R.previewResource,k.VSBuffer.fromString(N?.content||""));const O=N&&!N.hasConflicts?await this.getAcceptResult(R,R.previewResource,void 0,L.CancellationToken.None):void 0;return R.acceptResult=O,R.mergeState=N.hasConflicts?"conflict":O?"accepted":"preview",R.localChange=O?O.localChange:N.localChange,R.remoteChange=O?O.remoteChange:N.remoteChange,R}),this.syncPreviewPromise}async accept(E,R){return await this.updateSyncResourcePreview(E,async N=>{const O=await this.getAcceptResult(N,E,R,L.CancellationToken.None);return N.acceptResult=O,N.mergeState="accepted",N.localChange=O.localChange,N.remoteChange=O.remoteChange,N}),this.syncPreviewPromise}async discard(E){return await this.updateSyncResourcePreview(E,async R=>{const N=await this.getMergeResult(R,L.CancellationToken.None);return await this.fileService.writeFile(R.previewResource,k.VSBuffer.fromString(N.content||"")),R.acceptResult=void 0,R.mergeState="preview",R.localChange=N.localChange,R.remoteChange=N.remoteChange,R}),this.syncPreviewPromise}async updateSyncResourcePreview(E,R){if(!this.syncPreviewPromise)return;let N=await this.syncPreviewPromise;const O=N.resourcePreviews.findIndex(({localResource:z,remoteResource:F,previewResource:A})=>this.extUri.isEqual(z,E)||this.extUri.isEqual(F,E)||this.extUri.isEqual(A,E));O!==-1&&(this.syncPreviewPromise=(0,i.createCancelablePromise)(async z=>{const F=[...N.resourcePreviews];return F[O]=await R(F[O]),{...N,resourcePreviews:F}}),N=await this.syncPreviewPromise,this.updateConflicts(N.resourcePreviews),N.resourcePreviews.some(({mergeState:z})=>z==="conflict")?this.setStatus("hasConflicts"):this.setStatus("syncing"))}async doApply(E){if(!this.syncPreviewPromise)return"idle";const R=await this.syncPreviewPromise;return R.resourcePreviews.some(({mergeState:N})=>N==="conflict")?"hasConflicts":R.resourcePreviews.some(({mergeState:N})=>N!=="accepted")?"syncing":(await this.applyResult(R.remoteUserData,R.lastSyncUserData,R.resourcePreviews.map(N=>[N,N.acceptResult]),E),this.syncPreviewPromise=null,await this.clearPreviewFolder(),"idle")}async clearPreviewFolder(){try{await this.fileService.del(this.syncPreviewFolder,{recursive:!0})}catch{}}updateConflicts(E){const R=E.filter(({mergeState:N})=>N==="conflict");(0,D.equals)(this._conflicts,R,(N,O)=>this.extUri.isEqual(N.previewResource,O.previewResource))||(this._conflicts=R,this._onDidChangeConflicts.fire(this.conflicts))}async hasPreviouslySynced(){const E=await this.getLastSyncUserData();return!!E&&E.syncData!==null}async resolvePreviewContent(E){const R=this.syncPreviewPromise?await this.syncPreviewPromise:null;if(R)for(const N of R.resourcePreviews){if(this.extUri.isEqual(N.acceptedResource,E))return N.acceptResult?N.acceptResult.content:null;if(this.extUri.isEqual(N.remoteResource,E))return N.remoteContent;if(this.extUri.isEqual(N.localResource,E))return N.localContent;if(this.extUri.isEqual(N.baseResource,E))return N.baseContent}return null}async resetLocal(){this.storageService.remove(this.lastSyncUserDataStateKey,-1);try{await this.fileService.del(this.lastSyncResource)}catch(E){this.logService.error(E)}}async doGenerateSyncResourcePreview(E,R,N,O,z,F){const A=await this.generateSyncPreview(E,R,N,z,F),M=[];for(const $ of A){const V=$.previewResource.with({scheme:h.USER_DATA_SYNC_SCHEME,authority:"accepted"});if($.localChange===0&&$.remoteChange===0)M.push({...$,acceptedResource:V,acceptResult:{content:null,localChange:0,remoteChange:0},mergeState:"accepted"});else{const B=O?await this.getMergeResult($,F):void 0;if(F.isCancellationRequested)break;await this.fileService.writeFile($.previewResource,k.VSBuffer.fromString(B?.content||""));const Q=B&&!B.hasConflicts?await this.getAcceptResult($,$.previewResource,void 0,F):void 0;M.push({...$,acceptResult:Q,mergeState:B?.hasConflicts?"conflict":Q?"accepted":"preview",localChange:Q?Q.localChange:B?B.localChange:$.localChange,remoteChange:Q?Q.remoteChange:B?B.remoteChange:$.remoteChange})}}return{syncResource:this.resource,profile:this.syncResource.profile,remoteUserData:E,lastSyncUserData:R,resourcePreviews:M,isLastSyncFromCurrentMachine:N}}async getLastSyncUserData(){let E=this.getStoredLastSyncUserDataStateContent();if(E||(E=await this.migrateLastSyncUserData()),!E)return this.logService.info(`${this.syncResourceLogLabel}: Last sync data state does not exist.`),null;const R=JSON.parse(E),N=this.userDataSyncEnablementService.getResourceSyncStateVersion(this.resource);if(this.hasSyncResourceStateVersionChanged=!!R.version&&!!N&&R.version!==N,this.hasSyncResourceStateVersionChanged)return this.logService.info(`${this.syncResourceLogLabel}: Reset last sync state because last sync state version ${R.version} is not compatible with current sync state version ${N}.`),await this.resetLocal(),null;let O,z=1;for(;O===void 0&&z++<6;)try{const F=await this.readLastSyncStoredRemoteUserData();F&&(F.ref===R.ref?O=F.syncData:this.logService.info(`${this.syncResourceLogLabel}: Last sync data stored locally is not same as the last sync state.`));break}catch(F){if(F instanceof f.FileOperationError&&F.fileOperationResult===1){this.logService.info(`${this.syncResourceLogLabel}: Last sync resource does not exist locally.`);break}else{if(F instanceof h.UserDataSyncError)throw F;this.logService.error(F,z)}}if(O===void 0)try{const F=await this.userDataSyncStoreService.resolveResourceContent(this.resource,R.ref,this.collection,this.syncHeaders);O=F===null?null:this.parseSyncData(F),await this.writeLastSyncStoredRemoteUserData({ref:R.ref,syncData:O})}catch(F){if(F instanceof h.UserDataSyncError&&F.code==="NotFound")this.logService.info(`${this.syncResourceLogLabel}: Last sync resource does not exist remotely.`);else throw F}return O===void 0?null:{...R,syncData:O}}async updateLastSyncUserData(E,R={}){if(R.ref||R.version)throw new Error("Cannot have core properties as additional");const N=this.userDataSyncEnablementService.getResourceSyncStateVersion(this.resource),O={ref:E.ref,version:N,...R};this.storageService.store(this.lastSyncUserDataStateKey,JSON.stringify(O),-1,1),await this.writeLastSyncStoredRemoteUserData(E)}getStoredLastSyncUserDataStateContent(){return this.storageService.get(this.lastSyncUserDataStateKey,-1)}async readLastSyncStoredRemoteUserData(){const E=(await this.fileService.readFile(this.lastSyncResource)).value.toString();try{const R=E?JSON.parse(E):void 0;if(n(R))return R}catch(R){this.logService.error(R)}}async writeLastSyncStoredRemoteUserData(E){await this.fileService.writeFile(this.lastSyncResource,k.VSBuffer.fromString(JSON.stringify(E)))}async migrateLastSyncUserData(){try{const E=await this.fileService.readFile(this.lastSyncResource),R=JSON.parse(E.value.toString());await this.fileService.del(this.lastSyncResource),R.ref&&R.content!==void 0&&(this.storageService.store(this.lastSyncUserDataStateKey,JSON.stringify({...R,content:void 0}),-1,1),await this.writeLastSyncStoredRemoteUserData({ref:R.ref,syncData:R.content===null?null:JSON.parse(R.content)}))}catch(E){E instanceof f.FileOperationError&&E.fileOperationResult===1?this.logService.debug(`${this.syncResourceLogLabel}: Migrating last sync user data. Resource does not exist.`):this.logService.error(E)}return this.storageService.get(this.lastSyncUserDataStateKey,-1)}async getRemoteUserData(E){const{ref:R,content:N}=await this.getUserData(E);let O=null;return N!==null&&(O=this.parseSyncData(N)),{ref:R,syncData:O}}parseSyncData(E){try{const R=JSON.parse(E);if(o(R))return R}catch(R){this.logService.error(R)}throw new h.UserDataSyncError((0,b.localize)(1,null),"IncompatibleRemoteContent",this.resource)}async getUserData(E){const R=E?{ref:E.ref,content:E.syncData?JSON.stringify(E.syncData):null}:null;return this.userDataSyncStoreService.readResource(this.resource,R,this.collection,this.syncHeaders)}async updateRemoteUserData(E,R){const N=await this.currentMachineIdPromise,O={version:this.version,machineId:N,content:E};try{return R=await this.userDataSyncStoreService.writeResource(this.resource,JSON.stringify(O),R,this.collection,this.syncHeaders),{ref:R,syncData:O}}catch(z){throw z instanceof h.UserDataSyncError&&z.code==="TooLarge"&&(z=new h.UserDataSyncError(z.message,z.code,this.resource)),z}}async backupLocal(E){const R={version:this.version,content:E};return this.userDataSyncBackupStoreService.backup(this.syncResource.profile,this.resource,JSON.stringify(R))}async stop(){this.status!=="idle"&&(this.logService.trace(`${this.syncResourceLogLabel}: Stopping synchronizing ${this.resource.toLowerCase()}.`),this.syncPreviewPromise&&(this.syncPreviewPromise.cancel(),this.syncPreviewPromise=null),this.updateConflicts([]),await this.clearPreviewFolder(),this.setStatus("idle"),this.logService.info(`${this.syncResourceLogLabel}: Stopped synchronizing ${this.resource.toLowerCase()}.`))}getUserDataSyncConfiguration(){return this.configurationService.getValue(h.USER_DATA_SYNC_CONFIGURATION_SCOPE)}};s=ve([H(2,f.IFileService),H(3,S.IEnvironmentService),H(4,l.IStorageService),H(5,h.IUserDataSyncStoreService),H(6,h.IUserDataSyncBackupStoreService),H(7,h.IUserDataSyncEnablementService),H(8,m.ITelemetryService),H(9,h.IUserDataSyncLogService),H(10,p.IConfigurationService),H(11,u.IUriIdentityService)],s),e.AbstractSynchroniser=s;let r=class extends s{constructor(E,R,N,O,z,F,A,M,$,V,B,Q,W){super(R,N,O,z,F,A,M,$,V,B,Q,W),this.file=E,this._register(this.fileService.watch(this.extUri.dirname(E))),this._register(this.fileService.onDidFilesChange(q=>this.onFileChanges(q)))}async getLocalFileContent(){try{return await this.fileService.readFile(this.file)}catch{return null}}async updateLocalFileContent(E,R,N){try{R?await this.fileService.writeFile(this.file,k.VSBuffer.fromString(E),N?void 0:R):await this.fileService.createFile(this.file,k.VSBuffer.fromString(E),{overwrite:N})}catch(O){throw O instanceof f.FileOperationError&&O.fileOperationResult===1||O instanceof f.FileOperationError&&O.fileOperationResult===3?new h.UserDataSyncError(O.message,"LocalPreconditionFailed"):O}}async deleteLocalFile(){try{await this.fileService.del(this.file)}catch(E){if(!(E instanceof f.FileOperationError&&E.fileOperationResult===1))throw E}}onFileChanges(E){!E.contains(this.file)||this.triggerLocalChange()}};r=ve([H(3,f.IFileService),H(4,S.IEnvironmentService),H(5,l.IStorageService),H(6,h.IUserDataSyncStoreService),H(7,h.IUserDataSyncBackupStoreService),H(8,h.IUserDataSyncEnablementService),H(9,m.ITelemetryService),H(10,h.IUserDataSyncLogService),H(11,p.IConfigurationService),H(12,u.IUriIdentityService)],r),e.AbstractFileSynchroniser=r;let c=class extends r{constructor(E,R,N,O,z,F,A,M,$,V,B,Q,W,q){super(E,R,N,O,z,F,A,M,$,V,B,W,q),this.userDataSyncUtilService=Q,this._formattingOptions=void 0}hasErrors(E,R){const N=[],O=(0,I.parse)(E,N,{allowEmptyContent:!0,allowTrailingComma:!0});return N.length>0||!(0,C.isUndefined)(O)&&R!==Array.isArray(O)}getFormattingOptions(){return this._formattingOptions||(this._formattingOptions=this.userDataSyncUtilService.resolveFormattingOptions(this.file)),this._formattingOptions}};c=ve([H(3,f.IFileService),H(4,S.IEnvironmentService),H(5,l.IStorageService),H(6,h.IUserDataSyncStoreService),H(7,h.IUserDataSyncBackupStoreService),H(8,h.IUserDataSyncEnablementService),H(9,m.ITelemetryService),H(10,h.IUserDataSyncLogService),H(11,h.IUserDataSyncUtilService),H(12,p.IConfigurationService),H(13,u.IUriIdentityService)],c),e.AbstractJsonFileSynchroniser=c;let a=class{constructor(E,R,N,O,z,F,A){this.resource=E,this.userDataProfilesService=R,this.environmentService=N,this.logService=O,this.fileService=z,this.storageService=F,this.extUri=A.extUri,this.lastSyncResource=(0,h.getLastSyncResourceUri)(void 0,this.resource,N,this.extUri)}async initialize({ref:E,content:R}){if(!R){this.logService.info("Remote content does not exist.",this.resource);return}const N=this.parseSyncData(R);if(!!N)try{await this.doInitialize({ref:E,syncData:N})}catch(O){this.logService.error(O)}}parseSyncData(E){try{const R=JSON.parse(E);if(o(R))return R}catch(R){this.logService.error(R)}this.logService.info("Cannot parse sync data as it is not compatible with the current version.",this.resource)}async updateLastSyncUserData(E,R={}){if(R.ref||R.version)throw new Error("Cannot have core properties as additional");const N={ref:E.ref,version:void 0,...R};this.storageService.store(`${this.resource}.lastSyncUserData`,JSON.stringify(N),-1,1),await this.fileService.writeFile(this.lastSyncResource,k.VSBuffer.fromString(JSON.stringify(E)))}};a=ve([H(1,d.IUserDataProfilesService),H(2,S.IEnvironmentService),H(3,g.ILogService),H(4,f.IFileService),H(5,l.IStorageService),H(6,u.IUriIdentityService)],a),e.AbstractInitializer=a}),define(se[118],oe([0,1,6,24,9,3,43,2,27,16,15,117,29,33,80,13,4,72,8,19,23,30,18,41,252,115,26,62]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o,t,s,r,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractExtensionsInitializer=e.LocalExtensionsProvider=e.ExtensionsSynchroniser=e.stringify=e.parseExtensions=void 0;async function a(z,F){const A=JSON.parse(z.content);if(z.version===1||z.version===2){const M=(await F.getInstalled(0)).filter($=>$.isBuiltin);for(const $ of A)z.version===1&&($.enabled===!1&&($.disabled=!0),delete $.enabled),z.version===2&&M.every(V=>!(0,S.areSameExtensions)(V.identifier,$.identifier))&&($.installed=!0)}return A}function v(z){return JSON.parse(z.content)}e.parseExtensions=v;function E(z,F){return z.sort((A,M)=>!A.identifier.uuid&&M.identifier.uuid?-1:A.identifier.uuid&&!M.identifier.uuid?1:(0,P.compare)(A.identifier.id,M.identifier.id)),F?(0,T.toFormattedString)(z,{}):JSON.stringify(z)}e.stringify=E;let R=class extends o.AbstractSynchroniser{constructor(F,A,M,$,V,B,Q,W,q,G,ee,ae,K,X,_,U,x){super({syncResource:"extensions",profile:F},A,$,M,V,B,Q,ae,K,G,ee,_),this.extensionManagementService=W,this.ignoredExtensionsManagementService=q,this.instantiationService=x,this.version=5,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"extensions.json"),this.baseResource=this.previewResource.with({scheme:r.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:r.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:r.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:r.USER_DATA_SYNC_SCHEME,authority:"accepted"}),this.localExtensionsProvider=this.instantiationService.createInstance(N),this._register(L.Event.any(L.Event.filter(this.extensionManagementService.onDidInstallExtensions,j=>j.some(({local:J})=>!!J)),L.Event.filter(this.extensionManagementService.onDidUninstallExtension,j=>!j.error),L.Event.filter(U.onDidChange,j=>j.valueChanges.some(({profile:J,changes:re})=>this.syncResource.profile.id===J.id&&re.some(Y=>Y.key===p.DISABLED_EXTENSIONS_STORAGE_PATH))),X.onDidChangeExtensionStorageToSync)(()=>this.triggerLocalChange()))}async generateSyncPreview(F,A){const M=F.syncData?await a(F.syncData,this.extensionManagementService):null,$=A?.skippedExtensions||[],V=A?.builtinExtensions||[],B=A?.syncData?await a(A.syncData,this.extensionManagementService):null,{localExtensions:Q,ignoredExtensions:W}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile);M?this.logService.trace(`${this.syncResourceLogLabel}: Merging remote extensions with local extensions...`):this.logService.trace(`${this.syncResourceLogLabel}: Remote extensions does not exist. Synchronizing extensions for the first time.`);const{local:q,remote:G}=(0,t.merge)(Q,M,B,$,W,V),ee={local:q,remote:G,content:this.getPreviewContent(Q,q.added,q.updated,q.removed),localChange:q.added.length>0||q.removed.length>0||q.updated.length>0?2:0,remoteChange:G!==null?2:0},ae=this.stringify(Q,!1);return[{skippedExtensions:$,builtinExtensions:V,baseResource:this.baseResource,baseContent:B?this.stringify(B,!1):ae,localResource:this.localResource,localContent:ae,localExtensions:Q,remoteResource:this.remoteResource,remoteExtensions:M,remoteContent:M?this.stringify(M,!1):null,previewResource:this.previewResource,previewResult:ee,localChange:ee.localChange,remoteChange:ee.remoteChange,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(F){const A=F.syncData?await a(F.syncData,this.extensionManagementService):null,{localExtensions:M,ignoredExtensions:$}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile),{remote:V}=(0,t.merge)(M,A,A,F.skippedExtensions||[],$,F.builtinExtensions||[]);return V!==null}getPreviewContent(F,A,M,$){const V=[...A,...M],B=new Set,Q=W=>{B.add(W.id.toLowerCase()),W.uuid&&B.add(W.uuid)};V.forEach(({identifier:W})=>Q(W)),$.forEach(Q);for(const W of F)B.has(W.identifier.id.toLowerCase())||W.identifier.uuid&&B.has(W.identifier.uuid)||V.push(W);return this.stringify(V,!1)}async getMergeResult(F,A){return{...F.previewResult,hasConflicts:!1}}async getAcceptResult(F,A,M,$){if(this.extUri.isEqual(A,this.localResource))return this.acceptLocal(F);if(this.extUri.isEqual(A,this.remoteResource))return this.acceptRemote(F);if(this.extUri.isEqual(A,this.previewResource))return F.previewResult;throw new Error(`Invalid Resource: ${A.toString()}`)}async acceptLocal(F){const A=await this.extensionManagementService.getInstalled(void 0,this.syncResource.profile.extensionsResource),M=this.ignoredExtensionsManagementService.getIgnoredExtensions(A),$=(0,t.merge)(F.localExtensions,null,null,F.skippedExtensions,M,F.builtinExtensions),{local:V,remote:B}=$;return{content:F.localContent,local:V,remote:B,localChange:V.added.length>0||V.removed.length>0||V.updated.length>0?2:0,remoteChange:B!==null?2:0}}async acceptRemote(F){const A=await this.extensionManagementService.getInstalled(void 0,this.syncResource.profile.extensionsResource),M=this.ignoredExtensionsManagementService.getIgnoredExtensions(A),$=F.remoteContent?JSON.parse(F.remoteContent):null;if($!==null){const V=(0,t.merge)(F.localExtensions,$,F.localExtensions,[],M,F.builtinExtensions),{local:B,remote:Q}=V;return{content:F.remoteContent,local:B,remote:Q,localChange:B.added.length>0||B.removed.length>0||B.updated.length>0?2:0,remoteChange:Q!==null?2:0}}else return{content:F.remoteContent,local:{added:[],removed:[],updated:[]},remote:null,localChange:0,remoteChange:0}}async applyResult(F,A,M,$){let{skippedExtensions:V,localExtensions:B}=M[0][0];const{local:Q,remote:W,localChange:q,remoteChange:G}=M[0][1];if(q===0&&G===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing extensions.`),q!==0&&(await this.backupLocal(JSON.stringify(B)),V=await this.localExtensionsProvider.updateLocalExtensions(Q.added,Q.removed,Q.updated,V,this.syncResource.profile)),W){this.logService.trace(`${this.syncResourceLogLabel}: Updating remote extensions...`);const ee=JSON.stringify(W.all);F=await this.updateRemoteUserData(ee,$?null:F.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote extensions.${W.added.length?` Added: ${JSON.stringify(W.added.map(ae=>ae.identifier.id))}.`:""}${W.updated.length?` Updated: ${JSON.stringify(W.updated.map(ae=>ae.identifier.id))}.`:""}${W.removed.length?` Removed: ${JSON.stringify(W.removed.map(ae=>ae.identifier.id))}.`:""}`)}if(A?.ref!==F.ref){this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized extensions...`);const ee=B.filter(ae=>!ae.installed).map(ae=>ae.identifier);await this.updateLastSyncUserData(F,{skippedExtensions:V,builtinExtensions:ee}),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized extensions.${V.length?` Skipped: ${JSON.stringify(V.map(ae=>ae.identifier.id))}.`:""}`)}}async resolveContent(F){if(this.extUri.isEqual(this.remoteResource,F)||this.extUri.isEqual(this.baseResource,F)||this.extUri.isEqual(this.localResource,F)||this.extUri.isEqual(this.acceptedResource,F)){const A=await this.resolvePreviewContent(F);return A&&this.stringify(JSON.parse(A),!0)}return null}stringify(F,A){return E(F,A)}async hasLocalData(){try{const{localExtensions:F}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile);if(F.some(A=>A.installed||A.disabled))return!0}catch{}return!1}};R=ve([H(2,C.IEnvironmentService),H(3,g.IFileService),H(4,u.IStorageService),H(5,r.IUserDataSyncStoreService),H(6,r.IUserDataSyncBackupStoreService),H(7,p.IExtensionManagementService),H(8,s.IIgnoredExtensionsManagementService),H(9,r.IUserDataSyncLogService),H(10,w.IConfigurationService),H(11,r.IUserDataSyncEnablementService),H(12,h.ITelemetryService),H(13,f.IExtensionStorageService),H(14,d.IUriIdentityService),H(15,c.IUserDataProfileStorageService),H(16,y.IInstantiationService)],R),e.ExtensionsSynchroniser=R;let N=class{constructor(F,A,M,$,V,B){this.extensionManagementService=F,this.userDataProfileStorageService=A,this.extensionGalleryService=M,this.ignoredExtensionsManagementService=$,this.instantiationService=V,this.logService=B}async getLocalExtensions(F){const A=await this.extensionManagementService.getInstalled(void 0,F.extensionsResource),M=this.ignoredExtensionsManagementService.getIgnoredExtensions(A);return{localExtensions:await this.withProfileScopedServices(F,async(V,B)=>{const Q=V.getDisabledExtensions();return A.map(W=>{const{identifier:q,isBuiltin:G,manifest:ee,preRelease:ae}=W,K={identifier:q,preRelease:ae,version:ee.version};Q.some(X=>(0,S.areSameExtensions)(X,q))&&(K.disabled=!0),G||(K.installed=!0);try{const X=B.getKeysForSync({id:q.id,version:ee.version});if(X){const _=B.getExtensionState(W,!0)||{};K.state=Object.keys(_).reduce((U,x)=>(X.includes(x)&&(U[x]=_[x]),U),{})}}catch(X){this.logService.info(`${(0,o.getSyncResourceLogLabel)("extensions",F)}: Error while parsing extension state`,(0,k.getErrorMessage)(X))}return K})}),ignoredExtensions:M}}async updateLocalExtensions(F,A,M,$,V){const B=(0,o.getSyncResourceLogLabel)("extensions",V);return this.withProfileScopedServices(V,async(Q,W)=>{const q=[],G=[],ee=await this.extensionManagementService.getInstalled(void 0,V.extensionsResource);if(A.length){const K=ee.filter(({identifier:X,isBuiltin:_})=>!_&&A.some(U=>(0,S.areSameExtensions)(X,U)));await D.Promises.settled(K.map(async X=>{this.logService.trace(`${B}: Uninstalling local extension...`,X.identifier.id),await this.extensionManagementService.uninstall(X,{donotIncludePack:!0,donotCheckDependents:!0,profileLocation:V.extensionsResource}),this.logService.info(`${B}: Uninstalled local extension.`,X.identifier.id),q.push(X.identifier)}))}(F.length||M.length)&&await D.Promises.settled([...F,...M].map(async K=>{const X=ee.find(U=>(0,S.areSameExtensions)(U.identifier,K.identifier));if(X&&X.isBuiltin){K.state&&X.manifest.version===K.version&&this.updateExtensionState(K.state,X,X.manifest.version,W),Q.getDisabledExtensions().some(x=>(0,S.areSameExtensions)(x,K.identifier))!==!!K.disabled&&(K.disabled?(this.logService.trace(`${B}: Disabling extension...`,K.identifier.id),await Q.disableExtension(K.identifier),this.logService.info(`${B}: Disabled extension`,K.identifier.id)):(this.logService.trace(`${B}: Enabling extension...`,K.identifier.id),await Q.enableExtension(K.identifier),this.logService.info(`${B}: Enabled extension`,K.identifier.id))),q.push(K.identifier);return}const _=(await this.extensionGalleryService.getExtensions([{...K.identifier,preRelease:K.preRelease}],i.CancellationToken.None))[0];if(K.state&&(X?X.manifest.version===K.version:!!_)&&this.updateExtensionState(K.state,X||_,X?.manifest.version,W),_)try{Q.getDisabledExtensions().some(x=>(0,S.areSameExtensions)(x,K.identifier))!==!!K.disabled&&(K.disabled?(this.logService.trace(`${B}: Disabling extension...`,K.identifier.id,_.version),await Q.disableExtension(_.identifier),this.logService.info(`${B}: Disabled extension`,K.identifier.id,_.version)):(this.logService.trace(`${B}: Enabling extension...`,K.identifier.id,_.version),await Q.enableExtension(_.identifier),this.logService.info(`${B}: Enabled extension`,K.identifier.id,_.version))),(!X||X.preRelease!==K.preRelease)&&(await this.extensionManagementService.canInstall(_)?(this.logService.trace(`${B}: Installing extension...`,K.identifier.id,_.version),await this.extensionManagementService.installFromGallery(_,{isMachineScoped:!1,donotIncludePackAndDependencies:!0,installPreReleaseVersion:K.preRelease,profileLocation:V.extensionsResource}),this.logService.info(`${B}: Installed extension.`,K.identifier.id,_.version),q.push(_.identifier)):(this.logService.info(`${B}: Skipped synchronizing extension because it cannot be installed.`,_.displayName||_.identifier.id),G.push(K)))}catch(U){G.push(K),U instanceof p.ExtensionManagementError&&[p.ExtensionManagementErrorCode.Incompatible,p.ExtensionManagementErrorCode.IncompatiblePreRelease,p.ExtensionManagementErrorCode.IncompatibleTargetPlatform].includes(U.code)?this.logService.info(`${B}: Skipped synchronizing extension because the compatible extension is not found.`,_.displayName||_.identifier.id):(this.logService.error(U),this.logService.info(`${B}: Skipped synchronizing extension`,_.displayName||_.identifier.id))}else G.push(K),this.logService.info(`${B}: Skipped synchronizing extension because the extension is not found.`,K.identifier.id)}));const ae=[];for(const K of $)q.some(X=>(0,S.areSameExtensions)(X,K.identifier))||ae.push(K);for(const K of G)ae.some(X=>(0,S.areSameExtensions)(X.identifier,K.identifier))||ae.push(K);return ae})}updateExtensionState(F,A,M,$){const V=$.getExtensionState(A,!0)||{},B=M?$.getKeysForSync({id:A.identifier.id,version:M}):void 0;B?B.forEach(Q=>{V[Q]=F[Q]}):Object.keys(F).forEach(Q=>V[Q]=F[Q]),$.setExtensionState(A,V,!0)}async withProfileScopedServices(F,A){return this.userDataProfileStorageService.withProfileScopedStorageService(F,async M=>{const $=new I.DisposableStore,V=this.instantiationService.createChild(new l.ServiceCollection([u.IStorageService,M])),B=$.add(V.createInstance(b.GlobalExtensionEnablementService)),Q=$.add(V.createInstance(f.ExtensionStorageService));try{return await A(B,Q)}finally{$.dispose()}})}};N=ve([H(0,p.IExtensionManagementService),H(1,c.IUserDataProfileStorageService),H(2,p.IExtensionGalleryService),H(3,s.IIgnoredExtensionsManagementService),H(4,y.IInstantiationService),H(5,r.IUserDataSyncLogService)],N),e.LocalExtensionsProvider=N;let O=class extends o.AbstractInitializer{constructor(F,A,M,$,V,B,Q,W){super("extensions",$,V,B,M,Q,W),this.extensionManagementService=F,this.ignoredExtensionsManagementService=A}async parseExtensions(F){return F.syncData?await a(F.syncData,this.extensionManagementService):null}generatePreview(F,A){const M=[],$=[],V=[];for(const B of F){if(this.ignoredExtensionsManagementService.hasToNeverSyncExtension(B.identifier.id))continue;const Q=A.find(W=>(0,S.areSameExtensions)(W.identifier,B.identifier));Q?(M.push(Q),B.disabled&&V.push(B.identifier)):B.installed&&($.push({...B.identifier,preRelease:!!B.preRelease}),B.disabled&&V.push(B.identifier))}return{installedExtensions:M,newExtensions:$,disabledExtensions:V,remoteExtensions:F}}};O=ve([H(0,p.IExtensionManagementService),H(1,s.IIgnoredExtensionsManagementService),H(2,g.IFileService),H(3,n.IUserDataProfilesService),H(4,C.IEnvironmentService),H(5,m.ILogService),H(6,u.IStorageService),H(7,d.IUriIdentityService)],O),e.AbstractExtensionsInitializer=O}),define(se[119],oe([0,1,17,9,3,35,43,5,31,16,15,13,8,45,19,23,30,41,60,256,26,18,62,4]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncStoreTypeSynchronizer=e.GlobalStateInitializer=e.LocalGlobalStateProvider=e.GlobalStateSynchroniser=e.stringify=void 0;const t="globalState.argv.",s=["locale"];function r(N,O){const z=N.storage?Object.keys(N.storage).sort():[],F={};return z.forEach(A=>F[A]=N.storage[A]),N.storage=F,O?(0,T.toFormattedString)(N,{}):JSON.stringify(N)}e.stringify=r;const c=1;let a=class extends l.AbstractSynchroniser{constructor(O,z,F,A,M,$,V,B,Q,W,q,G,ee,ae){super({syncResource:"globalState",profile:O},z,A,B,G,M,$,Q,W,V,q,ee),this.userDataProfileStorageService=F,this.version=c,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"globalState.json"),this.baseResource=this.previewResource.with({scheme:h.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:h.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:h.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:h.USER_DATA_SYNC_SCHEME,authority:"accepted"}),this.localGlobalStateProvider=ae.createInstance(v),this._register(A.watch(this.extUri.dirname(this.environmentService.argvResource))),this._register(k.Event.any(k.Event.filter(A.onDidFilesChange,K=>K.contains(this.environmentService.argvResource)),k.Event.filter(F.onDidChange,K=>!!(K.targetChanges.some(X=>this.syncResource.profile.id===X.id)||K.valueChanges.some(({profile:X,changes:_})=>this.syncResource.profile.id===X.id&&_.some(U=>U.target===0)))))(()=>this.triggerLocalChange()))}async generateSyncPreview(O,z,F){const A=O.syncData?JSON.parse(O.syncData.content):null;z=z===null&&F?O:z;const M=z&&z.syncData?JSON.parse(z.syncData.content):null,$=await this.localGlobalStateProvider.getLocalGlobalState(this.syncResource.profile);A?this.logService.trace(`${this.syncResourceLogLabel}: Merging remote ui state with local ui state...`):this.logService.trace(`${this.syncResourceLogLabel}: Remote ui state does not exist. Synchronizing ui state for the first time.`);const V=await this.getStorageKeys(M),{local:B,remote:Q}=(0,u.merge)($.storage,A?A.storage:null,M?M.storage:null,V,this.logService),W={content:null,local:B,remote:Q,localChange:Object.keys(B.added).length>0||Object.keys(B.updated).length>0||B.removed.length>0?2:0,remoteChange:Q.all!==null?2:0},q=r($,!1);return[{baseResource:this.baseResource,baseContent:M?r(M,!1):q,localResource:this.localResource,localContent:q,localUserData:$,remoteResource:this.remoteResource,remoteContent:A?r(A,!1):null,previewResource:this.previewResource,previewResult:W,localChange:W.localChange,remoteChange:W.remoteChange,acceptedResource:this.acceptedResource,storageKeys:V}]}async hasRemoteChanged(O){const z=O.syncData?JSON.parse(O.syncData.content):null;if(z===null)return!0;const F=await this.localGlobalStateProvider.getLocalGlobalState(this.syncResource.profile),A=await this.getStorageKeys(z),{remote:M}=(0,u.merge)(F.storage,z.storage,z.storage,A,this.logService);return M.all!==null}async getMergeResult(O,z){return{...O.previewResult,hasConflicts:!1}}async getAcceptResult(O,z,F,A){if(this.extUri.isEqual(z,this.localResource))return this.acceptLocal(O);if(this.extUri.isEqual(z,this.remoteResource))return this.acceptRemote(O);if(this.extUri.isEqual(z,this.previewResource))return O.previewResult;throw new Error(`Invalid Resource: ${z.toString()}`)}async acceptLocal(O){return{content:O.localContent,local:{added:{},removed:[],updated:{}},remote:{added:Object.keys(O.localUserData.storage),removed:[],updated:[],all:O.localUserData.storage},localChange:0,remoteChange:2}}async acceptRemote(O){if(O.remoteContent!==null){const z=JSON.parse(O.remoteContent),{local:F,remote:A}=(0,u.merge)(O.localUserData.storage,z.storage,null,O.storageKeys,this.logService);return{content:O.remoteContent,local:F,remote:A,localChange:Object.keys(F.added).length>0||Object.keys(F.updated).length>0||F.removed.length>0?2:0,remoteChange:A!==null?2:0}}else return{content:O.remoteContent,local:{added:{},removed:[],updated:{}},remote:{added:[],removed:[],updated:[],all:null},localChange:0,remoteChange:0}}async applyResult(O,z,F,A){const{localUserData:M}=F[0][0],{local:$,remote:V,localChange:B,remoteChange:Q}=F[0][1];if(B===0&&Q===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing ui state.`),B!==0&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating local ui state...`),await this.backupLocal(JSON.stringify(M)),await this.localGlobalStateProvider.writeLocalGlobalState($,this.syncResource.profile),this.logService.info(`${this.syncResourceLogLabel}: Updated local ui state`)),Q!==0){this.logService.trace(`${this.syncResourceLogLabel}: Updating remote ui state...`);const W=JSON.stringify({storage:V.all});O=await this.updateRemoteUserData(W,A?null:O.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote ui state.${V.added.length?` Added: ${V.added}.`:""}${V.updated.length?` Updated: ${V.updated}.`:""}${V.removed.length?` Removed: ${V.removed}.`:""}`)}z?.ref!==O.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized ui state...`),await this.updateLastSyncUserData(O),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized ui state`))}async resolveContent(O){if(this.extUri.isEqual(this.remoteResource,O)||this.extUri.isEqual(this.baseResource,O)||this.extUri.isEqual(this.localResource,O)||this.extUri.isEqual(this.acceptedResource,O)){const z=await this.resolvePreviewContent(O);return z&&r(JSON.parse(z),!0)}return null}async hasLocalData(){try{const{storage:O}=await this.localGlobalStateProvider.getLocalGlobalState(this.syncResource.profile);if(Object.keys(O).length>1||O[`${t}.locale`]?.value!=="en")return!0}catch{}return!1}async getStorageKeys(O){const z=await this.userDataProfileStorageService.readStorageData(this.syncResource.profile),F=[],A=[];for(const[V,B]of z)B.target===0?F.push(V):B.target===1&&A.push(V);const M=[...F,...A],$=O?.storage?Object.keys(O.storage).filter(V=>!V.startsWith(t)&&!M.includes(V)&&z.get(V)!==void 0):[];if(!I.isWeb){const V=[...h.ALL_SYNC_RESOURCES.map(B=>(0,h.getEnablementKey)(B)),h.SYNC_SERVICE_URL_TYPE];$.push(...V),A.push(...V)}return{user:F,machine:A,unregistered:$}}};a=ve([H(2,n.IUserDataProfileStorageService),H(3,b.IFileService),H(4,h.IUserDataSyncStoreService),H(5,h.IUserDataSyncBackupStoreService),H(6,h.IUserDataSyncLogService),H(7,C.IEnvironmentService),H(8,h.IUserDataSyncEnablementService),H(9,g.ITelemetryService),H(10,w.IConfigurationService),H(11,f.IStorageService),H(12,y.IUriIdentityService),H(13,o.IInstantiationService)],a),e.GlobalStateSynchroniser=a;let v=class{constructor(O,z,F,A){this.fileService=O,this.environmentService=z,this.userDataProfileStorageService=F,this.logService=A}async getLocalGlobalState(O){const z={};if(O.isDefault){const A=await this.getLocalArgvContent(),M=(0,L.parse)(A);for(const $ of s)M[$]!==void 0&&(z[`${t}${$}`]={version:1,value:M[$]})}const F=await this.userDataProfileStorageService.readStorageData(O);for(const[A,M]of F)M.value&&M.target===0&&(z[A]={version:1,value:M.value});return{storage:z}}async getLocalArgvContent(){try{this.logService.debug("GlobalStateSync#getLocalArgvContent",this.environmentService.argvResource);const O=await this.fileService.readFile(this.environmentService.argvResource);return this.logService.debug("GlobalStateSync#getLocalArgvContent - Resolved",this.environmentService.argvResource),O.value.toString()}catch(O){this.logService.debug((0,i.getErrorMessage)(O))}return"{}"}async writeLocalGlobalState({added:O,removed:z,updated:F},A){const M=(0,l.getSyncResourceLogLabel)("globalState",A),$={},V=new Map,B=await this.userDataProfileStorageService.readStorageData(A),Q=(W,q)=>{for(const G of W){if(G.startsWith(t)){$[G.substring(t.length)]=q?q[G].value:void 0;continue}if(q){const ee=q[G];ee.value!==B.get(G)?.value&&V.set(G,ee.value)}else B.get(G)!==void 0&&V.set(G,void 0)}};if(Q(Object.keys(O),O),Q(Object.keys(F),F),Q(z),Object.keys($).length){this.logService.trace(`${M}: Updating locale...`);const W=await this.getLocalArgvContent();let q=W;for(const G of Object.keys($))q=(0,m.edit)(q,[G],$[G],{});W!==q&&(this.logService.trace(`${M}: Updating locale...`),await this.fileService.writeFile(this.environmentService.argvResource,D.VSBuffer.fromString(q)),this.logService.info(`${M}: Updated locale.`)),this.logService.info(`${M}: Updated locale`)}V.size&&(this.logService.trace(`${M}: Updating global state...`),await this.userDataProfileStorageService.updateStorageData(A,V,0),this.logService.info(`${M}: Updated global state`,[...V.keys()]))}};v=ve([H(0,b.IFileService),H(1,C.IEnvironmentService),H(2,n.IUserDataProfileStorageService),H(3,h.IUserDataSyncLogService)],v),e.LocalGlobalStateProvider=v;let E=class extends l.AbstractInitializer{constructor(O,z,F,A,M,$){super("globalState",F,A,M,z,O,$)}async doInitialize(O){const z=O.syncData?JSON.parse(O.syncData.content):null;if(!z){this.logService.info("Skipping initializing global state because remote global state does not exist.");return}const F={},A={};for(const M of Object.keys(z.storage))M.startsWith(t)?F[M.substring(t.length)]=z.storage[M].value:this.storageService.get(M,0)===void 0&&(A[M]=z.storage[M].value);if(Object.keys(F).length){let M="{}";try{M=(await this.fileService.readFile(this.environmentService.argvResource)).value.toString()}catch{}for(const $ of Object.keys(F))M=(0,m.edit)(M,[$],F[$],{});await this.fileService.writeFile(this.environmentService.argvResource,D.VSBuffer.fromString(M))}if(Object.keys(A).length)for(const M of Object.keys(A))this.storageService.store(M,A[M],0,0)}};E=ve([H(0,f.IStorageService),H(1,b.IFileService),H(2,d.IUserDataProfilesService),H(3,C.IEnvironmentService),H(4,h.IUserDataSyncLogService),H(5,y.IUriIdentityService)],E),e.GlobalStateInitializer=E;let R=class{constructor(O,z,F,A,M){this.userDataSyncStoreClient=O,this.storageService=z,this.environmentService=F,this.fileService=A,this.logService=M}getSyncStoreType(O){return this.parseGlobalState(O)?.storage[h.SYNC_SERVICE_URL_TYPE]?.value}async sync(O){const z=(0,h.createSyncHeaders)((0,P.generateUuid)());try{return await this.doSync(O,z)}catch(F){if(F instanceof h.UserDataSyncError)switch(F.code){case"PreconditionFailed":return this.logService.info("Failed to synchronize UserDataSyncStoreType as there is a new remote version available. Synchronizing again..."),this.doSync(O,z)}throw F}}async doSync(O,z){const F=await this.userDataSyncStoreClient.readResource("globalState",null,void 0,z),A=this.parseGlobalState(F)||{storage:{}};A.storage[h.SYNC_SERVICE_URL_TYPE]={value:O,version:c};const M=await(0,S.getServiceMachineId)(this.environmentService,this.fileService,this.storageService),$={version:c,machineId:M,content:r(A,!1)};await this.userDataSyncStoreClient.writeResource("globalState",JSON.stringify($),F.ref,void 0,z)}parseGlobalState({content:O}){if(!O)return null;const z=JSON.parse(O);if((0,l.isSyncData)(z))return z?JSON.parse(z.content):null;throw new Error("Invalid remote data")}};R=ve([H(1,f.IStorageService),H(2,C.IEnvironmentService),H(3,b.IFileService),H(4,p.ILogService)],R),e.UserDataSyncStoreTypeSynchronizer=R}),define(se[120],oe([0,1,20,17,3,35,5,14,176,16,15,13,19,23,30,18,41,253,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeybindingsInitializer=e.KeybindingsSynchroniser=e.getKeybindingsContentFromSyncContent=void 0;function u(n,o,t){try{const s=JSON.parse(n);if(!o)return(0,I.isUndefined)(s.all)?null:s.all;switch(T.OS){case 2:return(0,I.isUndefined)(s.mac)?null:s.mac;case 3:return(0,I.isUndefined)(s.linux)?null:s.linux;case 1:return(0,I.isUndefined)(s.windows)?null:s.windows}}catch(s){return t.error(s),null}}e.getKeybindingsContentFromSyncContent=u;let h=class extends y.AbstractJsonFileSynchroniser{constructor(o,t,s,r,c,a,v,E,R,N,O,z,F){super(o.keybindingsResource,{syncResource:"keybindings",profile:o},t,E,R,N,s,r,v,z,c,O,a,F),this.version=2,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"keybindings.json"),this.baseResource=this.previewResource.with({scheme:m.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:m.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:m.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:m.USER_DATA_SYNC_SCHEME,authority:"accepted"}),this._register(k.Event.filter(a.onDidChangeConfiguration,A=>A.affectsConfiguration("settingsSync.keybindingsPerPlatform"))(()=>this.triggerLocalChange()))}async generateSyncPreview(o,t,s,r){const c=o.syncData?u(o.syncData.content,r.keybindingsPerPlatform??this.syncKeybindingsPerPlatform(),this.logService):null;t=t===null&&s?o:t;const a=t?this.getKeybindingsContentFromLastSyncUserData(t):null,v=await this.getLocalFileContent(),E=await this.getFormattingOptions();let R=null,N=!1,O=!1,z=!1;if(c){let M=v?v.value.toString():"[]";if(M=M||"[]",this.hasErrors(M,!0))throw new m.UserDataSyncError((0,P.localize)(0,null),"LocalInvalidContent",this.resource);if(!a||a!==M||a!==c){this.logService.trace(`${this.syncResourceLogLabel}: Merging remote keybindings with local keybindings...`);const $=await(0,l.merge)(M,c,a,E,this.userDataSyncUtilService);$.hasChanges&&(R=$.mergeContent,z=$.hasConflicts,N=z||$.mergeContent!==M,O=z||$.mergeContent!==c)}}else v&&(this.logService.trace(`${this.syncResourceLogLabel}: Remote keybindings does not exist. Synchronizing keybindings for the first time.`),R=v.value.toString(),O=!0);const F={content:z?a:R,localChange:N?v?2:1:0,remoteChange:O?2:0,hasConflicts:z},A=v?v.value.toString():null;return[{fileContent:v,baseResource:this.baseResource,baseContent:a,localResource:this.localResource,localContent:A,localChange:F.localChange,remoteResource:this.remoteResource,remoteContent:c,remoteChange:F.remoteChange,previewResource:this.previewResource,previewResult:F,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(o){const t=this.getKeybindingsContentFromLastSyncUserData(o);if(t===null)return!0;const s=await this.getLocalFileContent(),r=s?s.value.toString():"",c=await this.getFormattingOptions(),a=await(0,l.merge)(r||"[]",t,t,c,this.userDataSyncUtilService);return a.hasConflicts||a.mergeContent!==t}async getMergeResult(o,t){return o.previewResult}async getAcceptResult(o,t,s,r){if(this.extUri.isEqual(t,this.localResource))return{content:o.fileContent?o.fileContent.value.toString():null,localChange:0,remoteChange:2};if(this.extUri.isEqual(t,this.remoteResource))return{content:o.remoteContent,localChange:2,remoteChange:0};if(this.extUri.isEqual(t,this.previewResource))return s===void 0?{content:o.previewResult.content,localChange:o.previewResult.localChange,remoteChange:o.previewResult.remoteChange}:{content:s,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${t.toString()}`)}async applyResult(o,t,s,r){const{fileContent:c}=s[0][0];let{content:a,localChange:v,remoteChange:E}=s[0][1];if(v===0&&E===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing keybindings.`),a!==null&&(a=a.trim(),a=a||"[]",this.hasErrors(a,!0)))throw new m.UserDataSyncError((0,P.localize)(1,null),"LocalInvalidContent",this.resource);if(v!==0&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating local keybindings...`),c&&await this.backupLocal(this.toSyncContent(c.value.toString())),await this.updateLocalFileContent(a||"[]",c,r),this.logService.info(`${this.syncResourceLogLabel}: Updated local keybindings`)),E!==0){this.logService.trace(`${this.syncResourceLogLabel}: Updating remote keybindings...`);const R=this.toSyncContent(a||"[]",o.syncData?.content);o=await this.updateRemoteUserData(R,r?null:o.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote keybindings`)}try{await this.fileService.del(this.previewResource)}catch{}t?.ref!==o.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized keybindings...`),await this.updateLastSyncUserData(o,{platformSpecific:this.syncKeybindingsPerPlatform()}),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized keybindings`))}async hasLocalData(){try{const o=await this.getLocalFileContent();if(o){const t=(0,L.parse)(o.value.toString());if((0,D.isNonEmptyArray)(t))return!0}}catch(o){if(o.fileOperationResult!==1)return!0}return!1}async resolveContent(o){return this.extUri.isEqual(this.remoteResource,o)||this.extUri.isEqual(this.baseResource,o)||this.extUri.isEqual(this.localResource,o)||this.extUri.isEqual(this.acceptedResource,o)?this.resolvePreviewContent(o):null}getKeybindingsContentFromLastSyncUserData(o){return!o.syncData||o.platformSpecific!==void 0&&o.platformSpecific!==this.syncKeybindingsPerPlatform()?null:u(o.syncData.content,this.syncKeybindingsPerPlatform(),this.logService)}toSyncContent(o,t){let s={};try{s=JSON.parse(t||"{}")}catch(r){this.logService.error(r)}switch(this.syncKeybindingsPerPlatform()?delete s.all:s.all=o,T.OS){case 2:s.mac=o;break;case 3:s.linux=o;break;case 1:s.windows=o;break}return JSON.stringify(s)}syncKeybindingsPerPlatform(){return!!this.configurationService.getValue(m.CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM)}};h=ve([H(2,m.IUserDataSyncStoreService),H(3,m.IUserDataSyncBackupStoreService),H(4,m.IUserDataSyncLogService),H(5,w.IConfigurationService),H(6,m.IUserDataSyncEnablementService),H(7,b.IFileService),H(8,C.IEnvironmentService),H(9,p.IStorageService),H(10,m.IUserDataSyncUtilService),H(11,S.ITelemetryService),H(12,f.IUriIdentityService)],h),e.KeybindingsSynchroniser=h;let d=class extends y.AbstractInitializer{constructor(o,t,s,r,c,a){super("keybindings",t,s,r,o,c,a)}async doInitialize(o){const t=o.syncData?this.getKeybindingsContentFromSyncContent(o.syncData.content):null;if(!t){this.logService.info("Skipping initializing keybindings because remote keybindings does not exist.");return}if(!await this.isEmpty()){this.logService.info("Skipping initializing keybindings because local keybindings exist.");return}await this.fileService.writeFile(this.userDataProfilesService.defaultProfile.keybindingsResource,i.VSBuffer.fromString(t)),await this.updateLastSyncUserData(o)}async isEmpty(){try{const o=await this.fileService.readFile(this.userDataProfilesService.defaultProfile.settingsResource),t=(0,L.parse)(o.value.toString());return!(0,D.isNonEmptyArray)(t)}catch(o){return o.fileOperationResult===1}}getKeybindingsContentFromSyncContent(o){try{return u(o,!0,this.logService)}catch(t){return this.logService.error(t),null}}};d=ve([H(0,b.IFileService),H(1,g.IUserDataProfilesService),H(2,C.IEnvironmentService),H(3,m.IUserDataSyncLogService),H(4,p.IStorageService),H(5,f.IUriIdentityService)],d),e.KeybindingsInitializer=d}),define(se[121],oe([0,1,17,3,177,16,74,15,29,13,19,23,30,18,41,60,257,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SettingsInitializer=e.SettingsSynchroniser=e.parseSettingsSyncContent=void 0;function m(n){return n&&n.settings&&typeof n.settings=="string"&&Object.keys(n).length===1}function u(n){const o=JSON.parse(n);return m(o)?o:{settings:n}}e.parseSettingsSyncContent=u;let h=class extends f.AbstractJsonFileSynchroniser{constructor(o,t,s,r,c,a,v,E,R,N,O,z,F,A){super(o.settingsResource,{syncResource:"settings",profile:o},t,s,r,c,a,v,O,z,E,R,N,A),this.extensionManagementService=F,this.version=2,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"settings.json"),this.baseResource=this.previewResource.with({scheme:l.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:l.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:l.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:l.USER_DATA_SYNC_SCHEME,authority:"accepted"}),this._defaultIgnoredSettings=void 0}async getRemoteUserDataSyncConfiguration(o){const t=await this.getLastSyncUserData(),s=await this.getLatestRemoteUserData(o,t),r=this.getSettingsSyncContent(s),c=new T.ConfigurationModelParser(l.USER_DATA_SYNC_CONFIGURATION_SCOPE);return r?.settings&&c.parse(r.settings),c.configurationModel.getValue(l.USER_DATA_SYNC_CONFIGURATION_SCOPE)||{}}async generateSyncPreview(o,t,s){const r=await this.getLocalFileContent(),c=await this.getFormattingOptions(),a=this.getSettingsSyncContent(o);t=t===null&&s?o:t;const v=t?this.getSettingsSyncContent(t):null,E=await this.getIgnoredSettings();let R=null,N=!1,O=!1,z=!1;if(a){let $=r?r.value.toString().trim():"{}";$=$||"{}",this.validateContent($),this.logService.trace(`${this.syncResourceLogLabel}: Merging remote settings with local settings...`);const V=(0,y.merge)($,a.settings,v?v.settings:null,E,[],c);R=V.localContent||V.remoteContent,N=V.localContent!==null,O=V.remoteContent!==null,z=V.hasConflicts}else r&&(this.logService.trace(`${this.syncResourceLogLabel}: Remote settings does not exist. Synchronizing settings for the first time.`),R=r.value.toString().trim()||"{}",this.validateContent(R),O=!0);const F=r?r.value.toString():null,A=v?.settings??null,M={content:z?A:R,localChange:N?2:0,remoteChange:O?2:0,hasConflicts:z};return[{fileContent:r,baseResource:this.baseResource,baseContent:A,localResource:this.localResource,localContent:F,localChange:M.localChange,remoteResource:this.remoteResource,remoteContent:a?a.settings:null,remoteChange:M.remoteChange,previewResource:this.previewResource,previewResult:M,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(o){const t=this.getSettingsSyncContent(o);if(t===null)return!0;const s=await this.getLocalFileContent(),r=s?s.value.toString().trim():"",c=await this.getIgnoredSettings(),a=await this.getFormattingOptions();return(0,y.merge)(r||"{}",t.settings,t.settings,c,[],a).remoteContent!==null}async getMergeResult(o,t){const s=await this.getFormattingOptions(),r=await this.getIgnoredSettings();return{...o.previewResult,content:o.previewResult.content?(0,y.updateIgnoredSettings)(o.previewResult.content,"{}",r,s):null}}async getAcceptResult(o,t,s,r){const c=await this.getFormattingOptions(),a=await this.getIgnoredSettings();if(this.extUri.isEqual(t,this.localResource))return{content:o.fileContent?(0,y.updateIgnoredSettings)(o.fileContent.value.toString(),"{}",a,c):null,localChange:0,remoteChange:2};if(this.extUri.isEqual(t,this.remoteResource))return{content:o.remoteContent!==null?(0,y.updateIgnoredSettings)(o.remoteContent,o.fileContent?o.fileContent.value.toString():"{}",a,c):null,localChange:2,remoteChange:0};if(this.extUri.isEqual(t,this.previewResource))return s===void 0?{content:o.previewResult.content,localChange:o.previewResult.localChange,remoteChange:o.previewResult.remoteChange}:{content:s!==null?(0,y.updateIgnoredSettings)(s,o.fileContent?o.fileContent.value.toString():"{}",a,c):null,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${t.toString()}`)}async applyResult(o,t,s,r){const{fileContent:c}=s[0][0];let{content:a,localChange:v,remoteChange:E}=s[0][1];if(v===0&&E===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing settings.`),a=a?a.trim():"{}",a=a||"{}",this.validateContent(a),v!==0&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating local settings...`),c&&await this.backupLocal(JSON.stringify(this.toSettingsSyncContent(c.value.toString()))),await this.updateLocalFileContent(a,c,r),await this.configurationService.reloadConfiguration(3),this.logService.info(`${this.syncResourceLogLabel}: Updated local settings`)),E!==0){const R=await this.getFormattingOptions(),N=this.getSettingsSyncContent(o),O=await this.getIgnoredSettings(a);a=(0,y.updateIgnoredSettings)(a,N?N.settings:"{}",O,R),this.logService.trace(`${this.syncResourceLogLabel}: Updating remote settings...`),o=await this.updateRemoteUserData(JSON.stringify(this.toSettingsSyncContent(a)),r?null:o.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote settings`)}try{await this.fileService.del(this.previewResource)}catch{}t?.ref!==o.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized settings...`),await this.updateLastSyncUserData(o),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized settings`))}async hasLocalData(){try{const o=await this.getLocalFileContent();if(o){const t=await this.getFormattingOptions(),s=(0,g.edit)(o.value.toString(),[l.CONFIGURATION_SYNC_STORE_KEY],void 0,t);return!(0,y.isEmpty)(s)}}catch(o){if(o.fileOperationResult!==1)return!0}return!1}async resolveContent(o){return this.extUri.isEqual(this.remoteResource,o)||this.extUri.isEqual(this.localResource,o)||this.extUri.isEqual(this.acceptedResource,o)||this.extUri.isEqual(this.baseResource,o)?this.resolvePreviewContent(o):null}async resolvePreviewContent(o){let t=await super.resolvePreviewContent(o);if(t){const s=await this.getFormattingOptions(),r=await this.getIgnoredSettings();t=(0,y.updateIgnoredSettings)(t,"{}",r,s)}return t}getSettingsSyncContent(o){return o.syncData?this.parseSettingsSyncContent(o.syncData.content):null}parseSettingsSyncContent(o){try{return u(o)}catch(t){this.logService.error(t)}return null}toSettingsSyncContent(o){return{settings:o}}async getIgnoredSettings(o){if(!this._defaultIgnoredSettings){this._defaultIgnoredSettings=this.userDataSyncUtilService.resolveDefaultIgnoredSettings();const s=i.Event.any(i.Event.filter(this.extensionManagementService.onDidInstallExtensions,r=>r.some(({local:c})=>!!c)),i.Event.filter(this.extensionManagementService.onDidUninstallExtension,r=>!r.error))(()=>{s.dispose(),this._defaultIgnoredSettings=void 0})}const t=await this._defaultIgnoredSettings;return(0,y.getIgnoredSettings)(t,this.configurationService,o)}validateContent(o){if(this.hasErrors(o,!1))throw new l.UserDataSyncError((0,k.localize)(0,null),"LocalInvalidContent",this.resource)}};h=ve([H(2,w.IFileService),H(3,I.IEnvironmentService),H(4,C.IStorageService),H(5,l.IUserDataSyncStoreService),H(6,l.IUserDataSyncBackupStoreService),H(7,l.IUserDataSyncLogService),H(8,l.IUserDataSyncUtilService),H(9,L.IConfigurationService),H(10,l.IUserDataSyncEnablementService),H(11,b.ITelemetryService),H(12,P.IExtensionManagementService),H(13,p.IUriIdentityService)],h),e.SettingsSynchroniser=h;let d=class extends f.AbstractInitializer{constructor(o,t,s,r,c,a){super("settings",t,s,r,o,c,a)}async doInitialize(o){const t=o.syncData?this.parseSettingsSyncContent(o.syncData.content):null;if(!t){this.logService.info("Skipping initializing settings because remote settings does not exist.");return}if(!await this.isEmpty()){this.logService.info("Skipping initializing settings because local settings exist.");return}await this.fileService.writeFile(this.userDataProfilesService.defaultProfile.settingsResource,D.VSBuffer.fromString(t.settings)),await this.updateLastSyncUserData(o)}async isEmpty(){try{const o=await this.fileService.readFile(this.userDataProfilesService.defaultProfile.settingsResource);return(0,y.isEmpty)(o.value.toString().trim())}catch(o){return o.fileOperationResult===1}}parseSettingsSyncContent(o){try{return u(o)}catch(t){this.logService.error(t)}return null}};d=ve([H(0,w.IFileService),H(1,S.IUserDataProfilesService),H(2,I.IEnvironmentService),H(3,l.IUserDataSyncLogService),H(4,C.IStorageService),H(5,p.IUriIdentityService)],d),e.SettingsInitializer=d}),define(se[122],oe([0,1,17,3,32,16,15,13,19,23,30,18,41,254,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetsInitializer=e.SnippetsSynchroniser=e.parseSnippets=void 0;function g(m){return JSON.parse(m.content)}e.parseSnippets=g;let y=class extends p.AbstractSynchroniser{constructor(u,h,d,n,o,t,s,r,c,a,v,E){super({syncResource:"snippets",profile:u},h,n,d,o,t,s,a,v,r,c,E),this.version=1,this.snippetsFolder=u.snippetsHome,this._register(this.fileService.watch(d.userRoamingDataHome)),this._register(this.fileService.watch(this.snippetsFolder)),this._register(i.Event.filter(this.fileService.onDidFilesChange,R=>R.affects(this.snippetsFolder))(()=>this.triggerLocalChange()))}async generateSyncPreview(u,h,d){const n=await this.getSnippetsFileContents(),o=this.toSnippetsContents(n),t=u.syncData?this.parseSnippets(u.syncData):null;h=h===null&&d?u:h;const s=h&&h.syncData?this.parseSnippets(h.syncData):null;t?this.logService.trace(`${this.syncResourceLogLabel}: Merging remote snippets with local snippets...`):this.logService.trace(`${this.syncResourceLogLabel}: Remote snippets does not exist. Synchronizing snippets for the first time.`);const r=(0,S.merge)(o,t,s);return this.getResourcePreviews(r,n,t||{},s||{})}async hasRemoteChanged(u){const h=u.syncData?this.parseSnippets(u.syncData):null;if(h===null)return!0;const d=await this.getSnippetsFileContents(),n=this.toSnippetsContents(d),o=(0,S.merge)(n,h,h);return Object.keys(o.remote.added).length>0||Object.keys(o.remote.updated).length>0||o.remote.removed.length>0||o.conflicts.length>0}async getMergeResult(u,h){return u.previewResult}async getAcceptResult(u,h,d,n){if(this.extUri.isEqualOrParent(h,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"})))return{content:u.fileContent?u.fileContent.value.toString():null,localChange:0,remoteChange:u.fileContent?u.remoteContent!==null?2:1:3};if(this.extUri.isEqualOrParent(h,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"})))return{content:u.remoteContent,localChange:u.remoteContent!==null?u.fileContent?2:1:3,remoteChange:0};if(this.extUri.isEqualOrParent(h,this.syncPreviewFolder))return d===void 0?{content:u.previewResult.content,localChange:u.previewResult.localChange,remoteChange:u.previewResult.remoteChange}:{content:d,localChange:d===null?u.fileContent!==null?3:0:2,remoteChange:d===null?u.remoteContent!==null?3:0:2};throw new Error(`Invalid Resource: ${h.toString()}`)}async applyResult(u,h,d,n){const o=d.map(([t,s])=>({...t,acceptResult:s}));o.every(({localChange:t,remoteChange:s})=>t===0&&s===0)&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing snippets.`),o.some(({localChange:t})=>t!==0)&&(await this.updateLocalBackup(o),await this.updateLocalSnippets(o,n)),o.some(({remoteChange:t})=>t!==0)&&(u=await this.updateRemoteSnippets(o,u,n)),h?.ref!==u.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized snippets...`),await this.updateLastSyncUserData(u),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized snippets`));for(const{previewResource:t}of o)try{await this.fileService.del(t)}catch{}}getResourcePreviews(u,h,d,n){const o=new Map;for(const t of Object.keys(u.local.added)){const s={content:u.local.added[t],hasConflicts:!1,localChange:1,remoteChange:0};o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:null,fileContent:null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),localContent:null,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t],previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of Object.keys(u.local.updated)){const s={content:u.local.updated[t],hasConflicts:!1,localChange:2,remoteChange:0},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t],localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t],previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of u.local.removed){const s={content:null,hasConflicts:!1,localChange:3,remoteChange:0},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t],localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:null,previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of Object.keys(u.remote.added)){const s={content:u.remote.added[t],hasConflicts:!1,localChange:0,remoteChange:1},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t],localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:null,previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of Object.keys(u.remote.updated)){const s={content:u.remote.updated[t],hasConflicts:!1,localChange:0,remoteChange:2},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t],localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t],previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of u.remote.removed){const s={content:null,hasConflicts:!1,localChange:0,remoteChange:3};o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:null,localContent:null,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t],previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of u.conflicts){const s={content:n[t]??null,hasConflicts:!0,localChange:h[t]?2:1,remoteChange:d[t]?2:1},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t]||null,localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t]||null,previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}for(const t of Object.keys(h))if(!o.has(t)){const s={content:h[t]?h[t].value.toString():null,hasConflicts:!1,localChange:0,remoteChange:0},r=h[t]?h[t].value.toString():null;o.set(t,{baseResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}),baseContent:n[t]??null,localResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}),fileContent:h[t]||null,localContent:r,remoteResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}),remoteContent:d[t]||null,previewResource:this.extUri.joinPath(this.syncPreviewFolder,t),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.extUri.joinPath(this.syncPreviewFolder,t).with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"})})}return[...o.values()]}async resolveContent(u){return this.extUri.isEqualOrParent(u,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"remote"}))||this.extUri.isEqualOrParent(u,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"local"}))||this.extUri.isEqualOrParent(u,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"base"}))||this.extUri.isEqualOrParent(u,this.syncPreviewFolder.with({scheme:f.USER_DATA_SYNC_SCHEME,authority:"accepted"}))?this.resolvePreviewContent(u):null}async hasLocalData(){try{const u=await this.getSnippetsFileContents();if(Object.keys(u).length)return!0}catch{}return!1}async updateLocalBackup(u){const h={};for(const d of u)d.fileContent&&(h[this.extUri.basename(d.localResource)]=d.fileContent);await this.backupLocal(JSON.stringify(this.toSnippetsContents(h)))}async updateLocalSnippets(u,h){for(const{fileContent:d,acceptResult:n,localResource:o,remoteResource:t,localChange:s}of u)if(s!==0){const r=t?this.extUri.basename(t):this.extUri.basename(o),c=this.extUri.joinPath(this.snippetsFolder,r);s===3?(this.logService.trace(`${this.syncResourceLogLabel}: Deleting snippet...`,this.extUri.basename(c)),await this.fileService.del(c),this.logService.info(`${this.syncResourceLogLabel}: Deleted snippet`,this.extUri.basename(c))):s===1?(this.logService.trace(`${this.syncResourceLogLabel}: Creating snippet...`,this.extUri.basename(c)),await this.fileService.createFile(c,D.VSBuffer.fromString(n.content),{overwrite:h}),this.logService.info(`${this.syncResourceLogLabel}: Created snippet`,this.extUri.basename(c))):(this.logService.trace(`${this.syncResourceLogLabel}: Updating snippet...`,this.extUri.basename(c)),await this.fileService.writeFile(c,D.VSBuffer.fromString(n.content),h?void 0:d),this.logService.info(`${this.syncResourceLogLabel}: Updated snippet`,this.extUri.basename(c)))}}async updateRemoteSnippets(u,h,d){const n=h.syncData?this.parseSnippets(h.syncData):{},o=(0,k.deepClone)(n);for(const{acceptResult:t,localResource:s,remoteResource:r,remoteChange:c}of u)if(c!==0){const a=s?this.extUri.basename(s):this.extUri.basename(r);c===3?delete o[a]:o[a]=t.content}return(0,S.areSame)(n,o)||(this.logService.trace(`${this.syncResourceLogLabel}: Updating remote snippets...`),h=await this.updateRemoteUserData(JSON.stringify(o),d?null:h.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote snippets`)),h}parseSnippets(u){return g(u)}toSnippetsContents(u){const h={};for(const d of Object.keys(u))h[d]=u[d].value.toString();return h}async getSnippetsFileContents(){const u={};let h;try{h=await this.fileService.resolve(this.snippetsFolder)}catch(d){if(d instanceof I.FileOperationError&&d.fileOperationResult===1)return u;throw d}for(const d of h.children||[]){const n=d.resource,o=this.extUri.extname(n);if(o===".json"||o===".code-snippets"){const t=this.extUri.relativePath(this.snippetsFolder,n),s=await this.fileService.readFile(n);u[t]=s}}return u}};y=ve([H(2,T.IEnvironmentService),H(3,I.IFileService),H(4,P.IStorageService),H(5,f.IUserDataSyncStoreService),H(6,f.IUserDataSyncBackupStoreService),H(7,f.IUserDataSyncLogService),H(8,L.IConfigurationService),H(9,f.IUserDataSyncEnablementService),H(10,w.ITelemetryService),H(11,C.IUriIdentityService)],y),e.SnippetsSynchroniser=y;let l=class extends p.AbstractInitializer{constructor(u,h,d,n,o,t){super("snippets",h,d,n,u,o,t)}async doInitialize(u){const h=u.syncData?JSON.parse(u.syncData.content):null;if(!h){this.logService.info("Skipping initializing snippets because remote snippets does not exist.");return}if(!await this.isEmpty()){this.logService.info("Skipping initializing snippets because local snippets exist.");return}for(const n of Object.keys(h)){const o=h[n];if(o){const t=this.extUri.joinPath(this.userDataProfilesService.defaultProfile.snippetsHome,n);await this.fileService.createFile(t,D.VSBuffer.fromString(o)),this.logService.info("Created snippet",this.extUri.basename(t))}}await this.updateLastSyncUserData(u)}async isEmpty(){try{return!(await this.fileService.resolve(this.userDataProfilesService.defaultProfile.snippetsHome)).children?.length}catch(u){return u.fileOperationResult===1}}};l=ve([H(0,I.IFileService),H(1,b.IUserDataProfilesService),H(2,T.IEnvironmentService),H(3,f.IUserDataSyncLogService),H(4,P.IStorageService),H(5,C.IUriIdentityService)],l),e.SnippetsInitializer=l}),define(se[123],oe([0,1,17,16,15,13,19,23,30,18,41,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TasksInitializer=e.TasksSynchroniser=e.getTasksContentFromSyncContent=void 0;function p(y,l){try{return JSON.parse(y).tasks??null}catch(m){return l.error(m),null}}e.getTasksContentFromSyncContent=p;let S=class extends C.AbstractFileSynchroniser{constructor(l,m,u,h,d,n,o,t,s,r,c,a){super(l.tasksResource,{syncResource:"tasks",profile:l},m,t,s,r,u,h,o,c,d,n,a),this.version=1,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"tasks.json"),this.baseResource=this.previewResource.with({scheme:b.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:b.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:b.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:b.USER_DATA_SYNC_SCHEME,authority:"accepted"})}async generateSyncPreview(l,m,u,h){const d=l.syncData?p(l.syncData.content,this.logService):null;m=m===null&&u?l:m;const n=m?.syncData?p(m.syncData.content,this.logService):null,o=await this.getLocalFileContent();let t=null,s=!1,r=!1,c=!1;if(l.syncData){const E=o?o.value.toString():null;if(!n||n!==E||n!==d){this.logService.trace(`${this.syncResourceLogLabel}: Merging remote tasks with local tasks...`);const R=g(E,d,n);t=R.content,c=R.hasConflicts,s=R.hasLocalChanged,r=R.hasRemoteChanged}}else o&&(this.logService.trace(`${this.syncResourceLogLabel}: Remote tasks does not exist. Synchronizing tasks for the first time.`),t=o.value.toString(),r=!0);const a={content:c?n:t,localChange:s?o?2:1:0,remoteChange:r?2:0,hasConflicts:c},v=o?o.value.toString():null;return[{fileContent:o,baseResource:this.baseResource,baseContent:n,localResource:this.localResource,localContent:v,localChange:a.localChange,remoteResource:this.remoteResource,remoteContent:d,remoteChange:a.remoteChange,previewResource:this.previewResource,previewResult:a,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(l){const m=l?.syncData?p(l.syncData.content,this.logService):null;if(m===null)return!0;const u=await this.getLocalFileContent(),h=u?u.value.toString():null,d=g(h,m,m);return d.hasLocalChanged||d.hasRemoteChanged}async getMergeResult(l,m){return l.previewResult}async getAcceptResult(l,m,u,h){if(this.extUri.isEqual(m,this.localResource))return{content:l.fileContent?l.fileContent.value.toString():null,localChange:0,remoteChange:2};if(this.extUri.isEqual(m,this.remoteResource))return{content:l.remoteContent,localChange:2,remoteChange:0};if(this.extUri.isEqual(m,this.previewResource))return u===void 0?{content:l.previewResult.content,localChange:l.previewResult.localChange,remoteChange:l.previewResult.remoteChange}:{content:u,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${m.toString()}`)}async applyResult(l,m,u,h){const{fileContent:d}=u[0][0],{content:n,localChange:o,remoteChange:t}=u[0][1];if(o===0&&t===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing tasks.`),o!==0&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating local tasks...`),d&&await this.backupLocal(JSON.stringify(this.toTasksSyncContent(d.value.toString()))),n?await this.updateLocalFileContent(n,d,h):await this.deleteLocalFile(),this.logService.info(`${this.syncResourceLogLabel}: Updated local tasks`)),t!==0){this.logService.trace(`${this.syncResourceLogLabel}: Updating remote tasks...`);const s=JSON.stringify(this.toTasksSyncContent(n));l=await this.updateRemoteUserData(s,h?null:l.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote tasks`)}try{await this.fileService.del(this.previewResource)}catch{}m?.ref!==l.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized tasks...`),await this.updateLastSyncUserData(l),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized tasks`))}async hasLocalData(){return this.fileService.exists(this.file)}async resolveContent(l){return this.extUri.isEqual(this.remoteResource,l)||this.extUri.isEqual(this.baseResource,l)||this.extUri.isEqual(this.localResource,l)||this.extUri.isEqual(this.acceptedResource,l)?this.resolvePreviewContent(l):null}toTasksSyncContent(l){return l?{tasks:l}:{}}};S=ve([H(2,b.IUserDataSyncStoreService),H(3,b.IUserDataSyncBackupStoreService),H(4,b.IUserDataSyncLogService),H(5,i.IConfigurationService),H(6,b.IUserDataSyncEnablementService),H(7,L.IFileService),H(8,k.IEnvironmentService),H(9,T.IStorageService),H(10,I.ITelemetryService),H(11,P.IUriIdentityService)],S),e.TasksSynchroniser=S;let f=class extends C.AbstractInitializer{constructor(l,m,u,h,d,n){super("tasks",m,u,h,l,d,n),this.tasksResource=this.userDataProfilesService.defaultProfile.tasksResource}async doInitialize(l){const m=l.syncData?p(l.syncData.content,this.logService):null;if(!m){this.logService.info("Skipping initializing tasks because remote tasks does not exist.");return}if(!await this.isEmpty()){this.logService.info("Skipping initializing tasks because local tasks exist.");return}await this.fileService.writeFile(this.tasksResource,D.VSBuffer.fromString(m)),await this.updateLastSyncUserData(l)}async isEmpty(){return this.fileService.exists(this.tasksResource)}};f=ve([H(0,L.IFileService),H(1,w.IUserDataProfilesService),H(2,k.IEnvironmentService),H(3,b.IUserDataSyncLogService),H(4,T.IStorageService),H(5,P.IUriIdentityService)],f),e.TasksInitializer=f;function g(y,l,m){if(y===null&&l===null&&m===null)return{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1};if(y===l)return{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1};const u=m!==y,h=m!==l;return!u&&!h?{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1}:u&&!h?{content:y,hasRemoteChanged:!0,hasLocalChanged:!1,hasConflicts:!1}:h&&!u?{content:l,hasLocalChanged:!0,hasRemoteChanged:!1,hasConflicts:!1}:{content:y,hasLocalChanged:!0,hasRemoteChanged:!0,hasConflicts:!0}}}),define(se[124],oe([0,1,43,16,15,13,19,23,30,18,41,255,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUserDataProfilesManifest=e.stringifyLocalProfiles=e.UserDataProfilesManifestSynchroniser=void 0;let S=class extends C.AbstractSynchroniser{constructor(l,m,u,h,d,n,o,t,s,r,c,a,v){super({syncResource:"profiles",profile:l},m,h,d,n,o,t,c,a,s,r,v),this.userDataProfilesService=u,this.version=1,this.previewResource=this.extUri.joinPath(this.syncPreviewFolder,"profiles.json"),this.baseResource=this.previewResource.with({scheme:p.USER_DATA_SYNC_SCHEME,authority:"base"}),this.localResource=this.previewResource.with({scheme:p.USER_DATA_SYNC_SCHEME,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:p.USER_DATA_SYNC_SCHEME,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:p.USER_DATA_SYNC_SCHEME,authority:"accepted"})}async getLastSyncedProfiles(){const l=await this.getLastSyncUserData();return l?.syncData?g(l.syncData):null}async getRemoteSyncedProfiles(l){const m=await this.getLastSyncUserData(),u=await this.getLatestRemoteUserData(l,m);return u?.syncData?g(u.syncData):null}async generateSyncPreview(l,m,u){if(!this.userDataProfilesService.isEnabled())throw new p.UserDataSyncError("Cannot sync profiles because they are disabled","LocalError");const h=l.syncData?g(l.syncData):null,d=m?.syncData?g(m.syncData):null,n=this.getLocalUserDataProfiles(),{local:o,remote:t}=(0,b.merge)(n,h,d,[]),s={local:o,remote:t,content:d?this.stringifyRemoteProfiles(d):null,localChange:o.added.length>0||o.removed.length>0||o.updated.length>0?2:0,remoteChange:t!==null?2:0},r=f(n,!1);return[{baseResource:this.baseResource,baseContent:d?this.stringifyRemoteProfiles(d):null,localResource:this.localResource,localContent:r,remoteResource:this.remoteResource,remoteContent:h?this.stringifyRemoteProfiles(h):null,remoteProfiles:h,previewResource:this.previewResource,previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(l){const m=l?.syncData?g(l.syncData):null,u=this.getLocalUserDataProfiles(),{remote:h}=(0,b.merge)(u,m,m,[]);return!!h?.added.length||!!h?.removed.length||!!h?.updated.length}async getMergeResult(l,m){return{...l.previewResult,hasConflicts:!1}}async getAcceptResult(l,m,u,h){if(this.extUri.isEqual(m,this.localResource))return this.acceptLocal(l);if(this.extUri.isEqual(m,this.remoteResource))return this.acceptRemote(l);if(this.extUri.isEqual(m,this.previewResource))return l.previewResult;throw new Error(`Invalid Resource: ${m.toString()}`)}async acceptLocal(l){const m=this.getLocalUserDataProfiles(),u=(0,b.merge)(m,null,null,[]),{local:h,remote:d}=u;return{content:l.localContent,local:h,remote:d,localChange:h.added.length>0||h.removed.length>0||h.updated.length>0?2:0,remoteChange:d!==null?2:0}}async acceptRemote(l){const m=l.remoteContent?JSON.parse(l.remoteContent):null,u=[],h=[];for(const d of this.getLocalUserDataProfiles()){const n=m?.find(o=>o.id===d.id);n&&(u.push({id:d.id,name:d.name,collection:n.collection}),h.push(d))}if(m!==null){const d=(0,b.merge)(h,m,u,[]),{local:n,remote:o}=d;return{content:l.remoteContent,local:n,remote:o,localChange:n.added.length>0||n.removed.length>0||n.updated.length>0?2:0,remoteChange:o!==null?2:0}}else return{content:l.remoteContent,local:{added:[],removed:[],updated:[]},remote:null,localChange:0,remoteChange:0}}async applyResult(l,m,u,h){const{local:d,remote:n,localChange:o,remoteChange:t}=u[0][1];if(o===0&&t===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing profiles.`),o!==0){await this.backupLocal(f(this.getLocalUserDataProfiles(),!1));const s=[];for(const r of d.added)s.push((async()=>{this.logService.trace(`${this.syncResourceLogLabel}: Creating '${r.name}' profile...`),await this.userDataProfilesService.createProfile(r.id,r.name,{shortName:r.shortName}),this.logService.info(`${this.syncResourceLogLabel}: Created profile '${r.name}'.`)})());for(const r of d.removed)s.push((async()=>{this.logService.trace(`${this.syncResourceLogLabel}: Removing '${r.name}' profile...`),await this.userDataProfilesService.removeProfile(r),this.logService.info(`${this.syncResourceLogLabel}: Removed profile '${r.name}'.`)})());for(const r of d.updated){const c=this.userDataProfilesService.profiles.find(a=>a.id===r.id);c?s.push((async()=>{this.logService.trace(`${this.syncResourceLogLabel}: Updating '${r.name}' profile...`),await this.userDataProfilesService.updateProfile(c,{name:r.name,shortName:r.shortName}),this.logService.info(`${this.syncResourceLogLabel}: Updated profile '${r.name}'.`)})()):this.logService.info(`${this.syncResourceLogLabel}: Could not find profile with id '${r.id}' to update.`)}await Promise.all(s)}if(t!==0){const s=u[0][0].remoteProfiles||[];this.logService.trace(`${this.syncResourceLogLabel}: Updating remote profiles...`);for(const r of n?.added||[]){const c=await this.userDataSyncStoreService.createCollection(this.syncHeaders);s.push({id:r.id,name:r.name,collection:c,shortName:r.shortName})}for(const r of n?.removed||[])s.splice(s.findIndex(({id:c})=>r.id===c),1);for(const r of n?.updated||[]){const c=s.find(({id:a})=>r.id===a);c&&s.splice(s.indexOf(c),1,{id:r.id,name:r.name,collection:c.collection,shortName:r.shortName})}l=await this.updateRemoteUserData(this.stringifyRemoteProfiles(s),h?null:l.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote profiles.${n?.added.length?` Added: ${JSON.stringify(n.added.map(r=>r.name))}.`:""}${n?.updated.length?` Updated: ${JSON.stringify(n.updated.map(r=>r.name))}.`:""}${n?.removed.length?` Removed: ${JSON.stringify(n.removed.map(r=>r.name))}.`:""}`);for(const r of n?.removed||[])await this.userDataSyncStoreService.deleteCollection(r.collection,this.syncHeaders)}m?.ref!==l.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized profiles...`),await this.updateLastSyncUserData(l),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized profiles.`))}async hasLocalData(){return this.getLocalUserDataProfiles().length>0}async resolveContent(l){if(this.extUri.isEqual(this.remoteResource,l)||this.extUri.isEqual(this.baseResource,l)||this.extUri.isEqual(this.localResource,l)||this.extUri.isEqual(this.acceptedResource,l)){const m=await this.resolvePreviewContent(l);return m&&(0,D.toFormattedString)(JSON.parse(m),{})}return null}getLocalUserDataProfiles(){return this.userDataProfilesService.profiles.filter(l=>!l.isDefault&&!l.isTransient)}stringifyRemoteProfiles(l){return JSON.stringify([...l].sort((m,u)=>m.name.localeCompare(u.name)))}};S=ve([H(2,w.IUserDataProfilesService),H(3,L.IFileService),H(4,k.IEnvironmentService),H(5,T.IStorageService),H(6,p.IUserDataSyncStoreService),H(7,p.IUserDataSyncBackupStoreService),H(8,p.IUserDataSyncLogService),H(9,i.IConfigurationService),H(10,p.IUserDataSyncEnablementService),H(11,I.ITelemetryService),H(12,P.IUriIdentityService)],S),e.UserDataProfilesManifestSynchroniser=S;function f(y,l){const m=[...y].sort((u,h)=>u.name.localeCompare(h.name)).map(u=>({id:u.id,name:u.name}));return l?(0,D.toFormattedString)(m,{}):JSON.stringify(m)}e.stringifyLocalProfiles=f;function g(y){return JSON.parse(y.content)}e.parseUserDataProfilesManifest=g}),define(se[270],oe([0,1,6,17,65,2,22,16,15,13,18,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncBackupStoreService=void 0;let p=class extends L.Disposable{constructor(f,g,y,l,m){super(),this.environmentService=f,this.fileService=g,this.configurationService=y,this.logService=l,this.userDataProfilesService=m;for(const u of this.userDataProfilesService.profiles)for(const h of b.ALL_SYNC_RESOURCES)this.cleanUpBackup(this.getResourceBackupHome(u,h))}async getAllRefs(f,g){const y=this.getResourceBackupHome(f,g),l=await this.fileService.resolve(y);return l.children?l.children.filter(u=>u.isFile&&/^\d{8}T\d{6}(\.json)?$/.test(u.name)).sort().reverse().map(u=>({ref:u.name,created:this.getCreationTime(u)})):[]}async resolveContent(f,g,y){const l=this.getResourceBackupHome(f,g),m=(0,T.joinPath)(l,y);try{return(await this.fileService.readFile(m)).value.toString()}catch(u){return this.logService.error(u),null}}async backup(f,g,y){const l=this.getResourceBackupHome(f,g),m=(0,T.joinPath)(l,`${(0,k.toLocalISOString)(new Date).replace(/-|:|\.\d+Z$/g,"")}.json`);try{await this.fileService.writeFile(m,i.VSBuffer.fromString(y))}catch(u){this.logService.error(u)}try{this.cleanUpBackup(l)}catch{}}getResourceBackupHome(f,g){return(0,T.joinPath)(this.environmentService.userDataSyncHome,...f.isDefault?[g]:[f.id,g])}async cleanUpBackup(f){try{try{if(!await this.fileService.exists(f))return}catch{return}const g=await this.fileService.resolve(f);if(g.children){const y=g.children.filter(h=>h.isFile&&/^\d{8}T\d{6}(\.json)?$/.test(h.name)).sort(),l=1e3*60*60*24*(this.configurationService.getValue("sync.localBackupDuration")||30);let m=y.filter(h=>Date.now()-this.getCreationTime(h)>l);const u=y.length-m.length;u<10&&(m=m.slice(10-u)),await D.Promises.settled(m.map(async h=>{this.logService.info("Deleting from backup",h.resource.path),await this.fileService.del(h.resource)}))}}catch(g){this.logService.error(g)}}getCreationTime(f){return f.ctime||new Date(parseInt(f.name.substring(0,4)),parseInt(f.name.substring(4,6))-1,parseInt(f.name.substring(6,8)),parseInt(f.name.substring(9,11)),parseInt(f.name.substring(11,13)),parseInt(f.name.substring(13,15))).getTime()}};p=ve([H(0,P.IEnvironmentService),H(1,w.IFileService),H(2,I.IConfigurationService),H(3,b.IUserDataSyncLogService),H(4,C.IUserDataProfilesService)],p),e.UserDataSyncBackupStoreService=p}),define(se[271],oe([0,1,3,2,5,15,19,23,26]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncEnablementService=void 0;const w="sync.enable";let C=class extends i.Disposable{constructor(p,S,f,g){super(),this.storageService=p,this.telemetryService=S,this.environmentService=f,this.userDataSyncStoreManagementService=g,this._onDidChangeEnablement=new D.Emitter,this.onDidChangeEnablement=this._onDidChangeEnablement.event,this._onDidChangeResourceEnablement=new D.Emitter,this.onDidChangeResourceEnablement=this._onDidChangeResourceEnablement.event,this._register(p.onDidChangeValue(y=>this.onDidStorageChange(y)))}isEnabled(){switch(this.environmentService.sync){case"on":return!0;case"off":return!1}return this.storageService.getBoolean(w,-1,!1)}canToggleEnablement(){return this.userDataSyncStoreManagementService.userDataSyncStore!==void 0&&this.environmentService.sync===void 0}setEnablement(p){p&&!this.canToggleEnablement()||(this.telemetryService.publicLog2(w,{enabled:p}),this.storageService.store(w,p,-1,1))}isResourceEnabled(p){return this.storageService.getBoolean((0,P.getEnablementKey)(p),-1,!0)}setResourceEnablement(p,S){if(this.isResourceEnabled(p)!==S){const f=(0,P.getEnablementKey)(p);this.storeResourceEnablement(f,S)}}getResourceSyncStateVersion(p){}storeResourceEnablement(p,S){this.storageService.store(p,S,-1,k.isWeb?0:1)}onDidStorageChange(p){if(p.scope!==-1)return;if(w===p.key){this._onDidChangeEnablement.fire(this.isEnabled());return}const S=P.ALL_SYNC_RESOURCES.filter(f=>(0,P.getEnablementKey)(f)===p.key)[0];if(S){this._onDidChangeResourceEnablement.fire([S,this.isResourceEnabled(S)]);return}}};C=ve([H(0,T.IStorageService),H(1,I.ITelemetryService),H(2,L.IEnvironmentService),H(3,P.IUserDataSyncStoreManagementService)],C),e.UserDataSyncEnablementService=C}),define(se[81],oe([0,1,3,2,5,27,180,15,13,4,25,45,19,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncMachinesService=e.isWebPlatform=e.IUserDataSyncMachinesService=void 0,e.IUserDataSyncMachinesService=(0,w.createDecorator)("IUserDataSyncMachinesService");const f="sync.currentMachineName",g="Safari",y="Chrome",l="Edge",m="Firefox",u="Android";function h(o){switch(o){case g:case y:case l:case m:case u:case(0,k.PlatformToString)(0):return!0}return!1}e.isWebPlatform=h;function d(){return k.isSafari?g:k.isChrome?y:k.isEdge?l:k.isFirefox?m:k.isAndroid?u:(0,k.PlatformToString)(k.isWeb?0:k.platform)}let n=class st extends i.Disposable{constructor(t,s,r,c,a,v){super(),this.storageService=r,this.userDataSyncStoreService=c,this.logService=a,this.productService=v,this._onDidChange=this._register(new D.Emitter),this.onDidChange=this._onDidChange.event,this.userData=null,this.currentMachineIdPromise=(0,b.getServiceMachineId)(t,s,r)}async getMachines(t){const s=await this.currentMachineIdPromise;return(await this.readMachinesData(t)).machines.map(c=>({...c,isCurrent:c.id===s}))}async addCurrentMachine(t){const s=await this.currentMachineIdPromise,r=await this.readMachinesData(t);r.machines.some(({id:c})=>c===s)||(r.machines.push({id:s,name:this.computeCurrentMachineName(r.machines),platform:d()}),await this.writeMachinesData(r))}async removeCurrentMachine(t){const s=await this.currentMachineIdPromise,r=await this.readMachinesData(t),c=r.machines.filter(({id:a})=>a!==s);c.length!==r.machines.length&&(r.machines=c,await this.writeMachinesData(r))}async renameMachine(t,s,r){const c=await this.readMachinesData(r),a=c.machines.find(({id:v})=>v===t);if(a){a.name=s,await this.writeMachinesData(c);const v=await this.currentMachineIdPromise;t===v&&this.storageService.store(f,s,-1,1)}}async setEnablements(t){const s=await this.readMachinesData();for(const[r,c]of t){const a=s.machines.find(v=>v.id===r);a&&(a.disabled=c?void 0:!0)}await this.writeMachinesData(s)}computeCurrentMachineName(t){const s=this.storageService.get(f,-1);if(s)return s;const r=`${this.productService.embedderIdentifier?`${this.productService.embedderIdentifier} - `:""}${d()} (${this.productService.nameShort})`,c=new RegExp(`${(0,L.escapeRegExpCharacters)(r)}\\s#(\\d+)`);let a=0;for(const v of t){const E=c.exec(v.name),R=E?parseInt(E[1]):0;a=R>a?R:a}return`${r} #${a+1}`}async readMachinesData(t){this.userData=await this.readUserData(t);const s=this.parse(this.userData);if(s.version!==st.VERSION)throw new Error((0,T.localize)(0,null,this.productService.nameLong));return s}async writeMachinesData(t){const s=JSON.stringify(t),r=await this.userDataSyncStoreService.writeResource(st.RESOURCE,s,this.userData?.ref||null);this.userData={ref:r,content:s},this._onDidChange.fire()}async readUserData(t){if(this.userData){const s=t&&t.latest?t.latest[st.RESOURCE]:void 0;if(this.userData.ref===s)return this.userData;if(s===void 0&&this.userData.content===null)return this.userData}return this.userDataSyncStoreService.readResource(st.RESOURCE,this.userData)}parse(t){if(t.content!==null)try{return JSON.parse(t.content)}catch(s){this.logService.error(s)}return{version:st.VERSION,machines:[]}}};n.VERSION=1,n.RESOURCE="machines",n=ve([H(0,I.IEnvironmentService),H(1,P.IFileService),H(2,p.IStorageService),H(3,S.IUserDataSyncStoreService),H(4,S.IUserDataSyncLogService),H(5,C.IProductService)],n),e.UserDataSyncMachinesService=n}),define(se[272],oe([0,1,6,65,38,9,3,2,5,22,7,178,25,19,23,26,78,81]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataAutoSyncService=void 0;const m="sync.disableMachineEventually",u="sync.sessionId",h="sync.storeUrl",d="sync.productQuality";let n=class extends I.Disposable{get syncUrl(){const s=this.storageService.get(h,-1);return s?C.URI.parse(s):void 0}set syncUrl(s){s?this.storageService.store(h,s.toString(),-1,1):this.storageService.remove(h,-1)}get productQuality(){return this.storageService.get(d,-1)}set productQuality(s){s?this.storageService.store(d,s,-1,1):this.storageService.remove(d,-1)}constructor(s,r,c,a,v,E,R,N,O,z){super(),this.userDataSyncStoreManagementService=r,this.userDataSyncStoreService=c,this.userDataSyncEnablementService=a,this.userDataSyncService=v,this.logService=E,this.userDataSyncAccountService=R,this.telemetryService=N,this.userDataSyncMachinesService=O,this.storageService=z,this.autoSync=this._register(new I.MutableDisposable),this.successiveFailures=0,this.lastSyncTriggerTime=void 0,this.suspendUntilRestart=!1,this._onError=this._register(new T.Emitter),this.onError=this._onError.event,this.sources=[],this.syncTriggerDelayer=this._register(new D.ThrottledDelayer(this.getSyncTriggerDelayTime())),this.lastSyncUrl=this.syncUrl,this.syncUrl=r.userDataSyncStore?.url,this.previousProductQuality=this.productQuality,this.productQuality=s.quality,this.syncUrl&&(this.logService.info("Using settings sync service",this.syncUrl.toString()),this._register(r.onDidChangeUserDataSyncStore(()=>{(0,w.isEqual)(this.syncUrl,r.userDataSyncStore?.url)||(this.lastSyncUrl=this.syncUrl,this.syncUrl=r.userDataSyncStore?.url,this.syncUrl&&this.logService.info("Using settings sync service",this.syncUrl.toString()))})),this.userDataSyncEnablementService.isEnabled()?this.logService.info("Auto Sync is enabled."):this.logService.info("Auto Sync is disabled."),this.updateAutoSync(),this.hasToDisableMachineEventually()&&this.disableMachineEventually(),this._register(R.onDidChangeAccount(()=>this.updateAutoSync())),this._register(c.onDidChangeDonotMakeRequestsUntil(()=>this.updateAutoSync())),this._register(v.onDidChangeLocal(F=>this.triggerSync([F],!1,!1))),this._register(T.Event.filter(this.userDataSyncEnablementService.onDidChangeResourceEnablement,([,F])=>F)(()=>this.triggerSync(["resourceEnablement"],!1,!1))),this._register(this.userDataSyncStoreManagementService.onDidChangeUserDataSyncStore(()=>this.triggerSync(["userDataSyncStoreChanged"],!1,!1))))}updateAutoSync(){const{enabled:s,message:r}=this.isAutoSyncEnabled();s?this.autoSync.value===void 0&&(this.autoSync.value=new o(this.lastSyncUrl,1e3*60*5,this.userDataSyncStoreManagementService,this.userDataSyncStoreService,this.userDataSyncService,this.userDataSyncMachinesService,this.logService,this.storageService),this.autoSync.value.register(this.autoSync.value.onDidStartSync(()=>this.lastSyncTriggerTime=new Date().getTime())),this.autoSync.value.register(this.autoSync.value.onDidFinishSync(c=>this.onDidFinishSync(c))),this.startAutoSync()&&this.autoSync.value.start()):(this.syncTriggerDelayer.cancel(),this.autoSync.value!==void 0?(r&&this.logService.info(r),this.autoSync.clear()):r&&this.userDataSyncEnablementService.isEnabled()&&this.logService.info(r))}startAutoSync(){return!0}isAutoSyncEnabled(){return this.userDataSyncEnablementService.isEnabled()?this.userDataSyncAccountService.account?this.userDataSyncStoreService.donotMakeRequestsUntil?{enabled:!1,message:`Auto Sync: Suspended until ${(0,i.toLocalISOString)(this.userDataSyncStoreService.donotMakeRequestsUntil)} because server is not accepting requests until then.`}:this.suspendUntilRestart?{enabled:!1,message:"Auto Sync: Suspended until restart."}:{enabled:!0}:{enabled:!1,message:"Auto Sync: Suspended until auth token is available."}:{enabled:!1,message:"Auto Sync: Disabled."}}async turnOn(){this.stopDisableMachineEventually(),this.lastSyncUrl=this.syncUrl,this.updateEnablement(!0)}async turnOff(s,r,c){try{this.userDataSyncAccountService.account&&!c&&await this.userDataSyncMachinesService.removeCurrentMachine(),this.updateEnablement(!1),this.storageService.remove(u,-1),s?(this.telemetryService.publicLog2("sync/turnOffEveryWhere"),await this.userDataSyncService.reset()):await this.userDataSyncService.resetLocal()}catch(a){if(this.logService.error(a),r)this.updateEnablement(!1);else throw a}}updateEnablement(s){this.userDataSyncEnablementService.isEnabled()!==s&&(this.userDataSyncEnablementService.setEnablement(s),this.updateAutoSync())}hasProductQualityChanged(){return!!this.previousProductQuality&&!!this.productQuality&&this.previousProductQuality!==this.productQuality}async onDidFinishSync(s){if(!s){this.successiveFailures=0;return}const r=g.UserDataSyncError.toUserDataSyncError(s);r instanceof g.UserDataAutoSyncError&&this.telemetryService.publicLog2("autosync/error",{code:r.code,service:this.userDataSyncStoreManagementService.userDataSyncStore.url.toString()}),r.code==="SessionExpired"?(await this.turnOff(!1,!0),this.logService.info("Auto Sync: Turned off sync because current session is expired")):r.code==="TurnedOff"?(await this.turnOff(!1,!0),this.logService.info("Auto Sync: Turned off sync because sync is turned off in the cloud")):r.code==="LocalTooManyRequests"?(this.suspendUntilRestart=!0,this.logService.info("Auto Sync: Suspended sync because of making too many requests to server"),this.updateAutoSync()):r.code==="RemoteTooManyRequests"?(await this.turnOff(!1,!0,!0),this.disableMachineEventually(),this.logService.info("Auto Sync: Turned off sync because of making too many requests to server")):r.code==="UpgradeRequired"||r.code==="Gone"?(await this.turnOff(!1,!0,!0),this.disableMachineEventually(),this.logService.info("Auto Sync: Turned off sync because current client is not compatible with server. Requires client upgrade.")):r.code==="IncompatibleLocalContent"?(await this.turnOff(!1,!0),this.logService.info(`Auto Sync: Turned off sync because server has ${r.resource} content with newer version than of client. Requires client upgrade.`)):r.code==="IncompatibleRemoteContent"?(await this.turnOff(!1,!0),this.logService.info(`Auto Sync: Turned off sync because server has ${r.resource} content with older version than of client. Requires server reset.`)):r.code==="ServiceChanged"||r.code==="DefaultServiceChanged"?P.isWeb&&r.code==="DefaultServiceChanged"&&!this.hasProductQualityChanged()?(await this.turnOff(!1,!0),this.logService.info("Auto Sync: Turned off sync because default sync service is changed.")):(await this.turnOff(!1,!0,!0),await this.turnOn(),this.logService.info("Auto Sync: Sync Service changed. Turned off auto sync, reset local state and turned on auto sync.")):(this.logService.error(r),this.successiveFailures++),this._onError.fire(r)}async disableMachineEventually(){this.storageService.store(m,!0,-1,1),await(0,D.timeout)(1e3*60*10),this.hasToDisableMachineEventually()&&(this.stopDisableMachineEventually(),!this.userDataSyncEnablementService.isEnabled()&&this.userDataSyncAccountService.account&&await this.userDataSyncMachinesService.removeCurrentMachine())}hasToDisableMachineEventually(){return this.storageService.getBoolean(m,-1,!1)}stopDisableMachineEventually(){this.storageService.remove(m,-1)}async triggerSync(s,r,c){if(this.autoSync.value===void 0)return this.syncTriggerDelayer.cancel();if(r&&this.lastSyncTriggerTime&&Math.round((new Date().getTime()-this.lastSyncTriggerTime)/1e3)<10){this.logService.debug("Auto Sync: Skipped. Limited to once per 10 seconds.");return}return this.sources.push(...s),this.syncTriggerDelayer.trigger(async()=>{this.logService.trace("activity sources",...this.sources);const a=this.userDataSyncAccountService.account?.authenticationProviderId||"";this.telemetryService.publicLog2("sync/triggered",{sources:this.sources,providerId:a}),this.sources=[],this.autoSync.value&&await this.autoSync.value.sync("Activity",c)},this.successiveFailures?this.getSyncTriggerDelayTime()*1*Math.min(Math.pow(2,this.successiveFailures),60):this.getSyncTriggerDelayTime())}getSyncTriggerDelayTime(){return 2e3}};n=ve([H(0,p.IProductService),H(1,g.IUserDataSyncStoreManagementService),H(2,g.IUserDataSyncStoreService),H(3,g.IUserDataSyncEnablementService),H(4,g.IUserDataSyncService),H(5,g.IUserDataSyncLogService),H(6,y.IUserDataSyncAccountService),H(7,f.ITelemetryService),H(8,l.IUserDataSyncMachinesService),H(9,S.IStorageService)],n),e.UserDataAutoSyncService=n;class o extends I.Disposable{constructor(s,r,c,a,v,E,R,N){super(),this.lastSyncUrl=s,this.interval=r,this.userDataSyncStoreManagementService=c,this.userDataSyncStoreService=a,this.userDataSyncService=v,this.userDataSyncMachinesService=E,this.logService=R,this.storageService=N,this.intervalHandler=this._register(new I.MutableDisposable),this._onDidStartSync=this._register(new T.Emitter),this.onDidStartSync=this._onDidStartSync.event,this._onDidFinishSync=this._register(new T.Emitter),this.onDidFinishSync=this._onDidFinishSync.event,this.manifest=null}start(){this._register(this.onDidFinishSync(()=>this.waitUntilNextIntervalAndSync())),this._register((0,I.toDisposable)(()=>{this.syncPromise&&(this.syncPromise.cancel(),this.logService.info("Auto sync: Cancelled sync that is in progress"),this.syncPromise=void 0),this.syncTask?.stop(),this.logService.info("Auto Sync: Stopped")})),this.sync(o.INTERVAL_SYNCING,!1)}waitUntilNextIntervalAndSync(){this.intervalHandler.value=(0,D.disposableTimeout)(()=>this.sync(o.INTERVAL_SYNCING,!1),this.interval)}sync(s,r){const c=(0,D.createCancelablePromise)(async a=>{if(this.syncPromise)try{this.logService.debug("Auto Sync: Waiting until sync is finished."),await this.syncPromise}catch(v){if((0,L.isCancellationError)(v))return}return this.doSync(s,r,a)});return this.syncPromise=c,this.syncPromise.finally(()=>this.syncPromise=void 0),this.syncPromise}hasSyncServiceChanged(){return this.lastSyncUrl!==void 0&&!(0,w.isEqual)(this.lastSyncUrl,this.userDataSyncStoreManagementService.userDataSyncStore?.url)}async hasDefaultServiceChanged(){const s=await this.userDataSyncStoreManagementService.getPreviousUserDataSyncStore(),r=this.userDataSyncStoreManagementService.userDataSyncStore;return!!r&&!!s&&(!(0,w.isEqual)(r.defaultUrl,s.defaultUrl)||!(0,w.isEqual)(r.insidersUrl,s.insidersUrl)||!(0,w.isEqual)(r.stableUrl,s.stableUrl))}async doSync(s,r,c){this.logService.info(`Auto Sync: Triggered by ${s}`),this._onDidStartSync.fire();let a;try{if(this.syncTask=await this.userDataSyncService.createSyncTask(this.manifest,r),c.isCancellationRequested)return;if(this.manifest=this.syncTask.manifest,this.manifest===null&&await this.userDataSyncService.hasPreviouslySynced())throw this.hasSyncServiceChanged()?await this.hasDefaultServiceChanged()?new g.UserDataAutoSyncError((0,b.localize)(0,null),"DefaultServiceChanged"):new g.UserDataAutoSyncError((0,b.localize)(1,null),"ServiceChanged"):new g.UserDataAutoSyncError((0,b.localize)(2,null),"TurnedOff");const v=this.storageService.get(u,-1);if(v&&this.manifest&&v!==this.manifest.session)throw this.hasSyncServiceChanged()?await this.hasDefaultServiceChanged()?new g.UserDataAutoSyncError((0,b.localize)(3,null),"DefaultServiceChanged"):new g.UserDataAutoSyncError((0,b.localize)(4,null),"ServiceChanged"):new g.UserDataAutoSyncError((0,b.localize)(5,null),"SessionExpired");const E=await this.userDataSyncMachinesService.getMachines(this.manifest||void 0);if(c.isCancellationRequested)return;const R=E.find(N=>N.isCurrent);if(R?.disabled)throw new g.UserDataAutoSyncError((0,b.localize)(6,null),"TurnedOff");if(await this.syncTask.run(),this.manifest===null)try{this.manifest=await this.userDataSyncStoreService.manifest(null)}catch(N){throw new g.UserDataAutoSyncError((0,k.toErrorMessage)(N),N instanceof g.UserDataSyncError?N.code:"Unknown")}if(this.manifest&&this.manifest.session!==v&&this.storageService.store(u,this.manifest.session,-1,1),c.isCancellationRequested)return;R||await this.userDataSyncMachinesService.addCurrentMachine(this.manifest||void 0)}catch(v){this.logService.error(v),a=v}this._onDidFinishSync.fire(a)}register(s){return super._register(s)}}o.INTERVAL_SYNCING="Interval"}),define(se[273],oe([0,1,7,181,15,13,45,19,30,26,18,41,122,121,120,16,123,118,119,4,124,43]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncResourceProviderService=void 0;let n=class xe{constructor(t,s,r,c,a,v,E,R,N,O){this.userDataSyncStoreService=t,this.userDataSyncBackupStoreService=s,this.logService=r,this.environmentService=a,this.storageService=v,this.fileService=E,this.userDataProfilesService=R,this.configurationService=N,this.instantiationService=O,this.extUri=c.extUri}async getRemoteSyncedProfiles(){const t=await this.userDataSyncStoreService.readResource("profiles",null,void 0);if(t.content){const s=this.parseSyncData(t.content,"profiles");return(0,h.parseUserDataProfilesManifest)(s)}return[]}async getRemoteSyncResourceHandles(t,s){return(await this.userDataSyncStoreService.getAllResourceRefs(t,s?.collection)).map(({created:c,ref:a})=>({created:c,uri:this.toUri({remote:!0,syncResource:t,profile:s?.id??this.userDataProfilesService.defaultProfile.id,collection:s?.collection,ref:a,node:void 0})}))}async getLocalSyncResourceHandles(t,s){return(await this.userDataSyncBackupStoreService.getAllRefs(s,t)).map(({created:c,ref:a})=>({created:c,uri:this.toUri({remote:!1,syncResource:t,profile:s.id,collection:void 0,ref:a,node:void 0})}))}resolveUserDataSyncResource({uri:t}){const s=this.resolveUri(t),r=s?this.userDataProfilesService.profiles.find(c=>c.id===s.profile):void 0;return s&&r?{profile:r,syncResource:s?.syncResource}:void 0}async getAssociatedResources({uri:t}){const s=this.resolveUri(t);if(!s)return[];const r=this.userDataProfilesService.profiles.find(c=>c.id===s.profile);switch(s.syncResource){case"settings":return this.getSettingsAssociatedResources(t,r);case"keybindings":return this.getKeybindingsAssociatedResources(t,r);case"tasks":return this.getTasksAssociatedResources(t,r);case"snippets":return this.getSnippetsAssociatedResources(t,r);case"globalState":return this.getGlobalStateAssociatedResources(t,r);case"extensions":return this.getExtensionsAssociatedResources(t,r);case"profiles":return this.getProfilesAssociatedResources(t,r)}}async getMachineId({uri:t}){const s=this.resolveUri(t);if(!!s){if(s.remote){if(s.ref){const{content:r}=await this.getUserData(s.syncResource,s.ref,s.collection);if(r)return this.parseSyncData(r,s.syncResource)?.machineId}return}return(0,T.getServiceMachineId)(this.environmentService,this.fileService,this.storageService)}}async resolveContent(t){const s=this.resolveUri(t);if(!s||s.node===xe.NOT_EXISTING_RESOURCE)return null;if(s.ref){const r=await this.getContentFromStore(s.remote,s.syncResource,s.profile,s.collection,s.ref);return s.node&&r?this.resolveNodeContent(s.syncResource,r,s.node):r}return!s.remote&&!s.node?this.resolveLatestContent(s.syncResource,s.profile):null}async getContentFromStore(t,s,r,c,a){if(t){const{content:E}=await this.getUserData(s,a,c);return E}const v=this.userDataProfilesService.profiles.find(E=>E.id===r);return v?this.userDataSyncBackupStoreService.resolveContent(v,s,a):null}resolveNodeContent(t,s,r){const c=this.parseSyncData(s,t);switch(t){case"settings":return this.resolveSettingsNodeContent(c,r);case"keybindings":return this.resolveKeybindingsNodeContent(c,r);case"tasks":return this.resolveTasksNodeContent(c,r);case"snippets":return this.resolveSnippetsNodeContent(c,r);case"globalState":return this.resolveGlobalStateNodeContent(c,r);case"extensions":return this.resolveExtensionsNodeContent(c,r);case"profiles":return this.resolveProfileNodeContent(c,r)}}async resolveLatestContent(t,s){const r=this.userDataProfilesService.profiles.find(c=>c.id===s);if(!r)return null;switch(t){case"globalState":return this.resolveLatestGlobalStateContent(r);case"extensions":return this.resolveLatestExtensionsContent(r);case"profiles":return this.resolveLatestProfilesContent(r);case"settings":return null;case"keybindings":return null;case"tasks":return null;case"snippets":return null}}getSettingsAssociatedResources(t,s){const r=this.extUri.joinPath(t,"settings.json"),c=s?s.settingsResource:this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);return[{resource:r,comparableResource:c}]}resolveSettingsNodeContent(t,s){switch(s){case"settings.json":return(0,S.parseSettingsSyncContent)(t.content).settings}return null}getKeybindingsAssociatedResources(t,s){const r=this.extUri.joinPath(t,"keybindings.json"),c=s?s.keybindingsResource:this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);return[{resource:r,comparableResource:c}]}resolveKeybindingsNodeContent(t,s){switch(s){case"keybindings.json":return(0,f.getKeybindingsContentFromSyncContent)(t.content,!!this.configurationService.getValue(w.CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM),this.logService)}return null}getTasksAssociatedResources(t,s){const r=this.extUri.joinPath(t,"tasks.json"),c=s?s.tasksResource:this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);return[{resource:r,comparableResource:c}]}resolveTasksNodeContent(t,s){switch(s){case"tasks.json":return(0,y.getTasksContentFromSyncContent)(t.content,this.logService)}return null}async getSnippetsAssociatedResources(t,s){const r=await this.resolveContent(t);if(r){const c=this.parseSyncData(r,"snippets");if(c){const a=(0,p.parseSnippets)(c),v=[];for(const E of Object.keys(a)){const R=this.extUri.joinPath(t,E),N=s?this.extUri.joinPath(s.snippetsHome,E):this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);v.push({resource:R,comparableResource:N})}return v}}return[]}resolveSnippetsNodeContent(t,s){return(0,p.parseSnippets)(t)[s]||null}getExtensionsAssociatedResources(t,s){const r=this.extUri.joinPath(t,"extensions.json"),c=s?this.toUri({remote:!1,syncResource:"extensions",profile:s.id,collection:void 0,ref:void 0,node:void 0}):this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);return[{resource:r,comparableResource:c}]}resolveExtensionsNodeContent(t,s){switch(s){case"extensions.json":return(0,l.stringify)((0,l.parseExtensions)(t),!0)}return null}async resolveLatestExtensionsContent(t){const{localExtensions:s}=await this.instantiationService.createInstance(l.LocalExtensionsProvider).getLocalExtensions(t);return(0,l.stringify)(s,!0)}getGlobalStateAssociatedResources(t,s){const r=this.extUri.joinPath(t,"globalState.json"),c=s?this.toUri({remote:!1,syncResource:"globalState",profile:s.id,collection:void 0,ref:void 0,node:void 0}):this.extUri.joinPath(t,xe.NOT_EXISTING_RESOURCE);return[{resource:r,comparableResource:c}]}resolveGlobalStateNodeContent(t,s){switch(s){case"globalState.json":return(0,m.stringify)(JSON.parse(t.content),!0)}return null}async resolveLatestGlobalStateContent(t){const s=await this.instantiationService.createInstance(m.LocalGlobalStateProvider).getLocalGlobalState(t);return(0,m.stringify)(s,!0)}getProfilesAssociatedResources(t,s){const r=this.extUri.joinPath(t,"profiles.json"),c=this.toUri({remote:!1,syncResource:"profiles",profile:this.userDataProfilesService.defaultProfile.id,collection:void 0,ref:void 0,node:void 0});return[{resource:r,comparableResource:c}]}resolveProfileNodeContent(t,s){switch(s){case"profiles.json":return(0,d.toFormattedString)(JSON.parse(t.content),{})}return null}async resolveLatestProfilesContent(t){return(0,h.stringifyLocalProfiles)(this.userDataProfilesService.profiles.filter(s=>!s.isDefault&&!s.isTransient),!0)}toUri(t){const s=t.remote?xe.REMOTE_BACKUP_AUTHORITY:xe.LOCAL_BACKUP_AUTHORITY,r=[t.syncResource,t.profile];return t.collection&&r.push(`collection:${t.collection}`),t.ref&&r.push(`ref:${t.ref}`),t.node&&r.push(t.node),this.extUri.joinPath(D.URI.from({scheme:w.USER_DATA_SYNC_SCHEME,authority:s,path:"/"}),...r)}resolveUri(t){if(t.scheme!==w.USER_DATA_SYNC_SCHEME||t.authority!==xe.LOCAL_BACKUP_AUTHORITY&&t.authority!==xe.REMOTE_BACKUP_AUTHORITY)return;const s=[];for(;t.path!=="/";)s.unshift(this.extUri.basename(t)),t=this.extUri.dirname(t);if(s.length<2)return;const r=t.authority===xe.REMOTE_BACKUP_AUTHORITY,c=s.shift(),a=s.shift();let v,E,R;for(;s.length;){const N=s.shift();N.startsWith("collection:")?v=N.substring(11):N.startsWith("ref:")?E=N.substring(4):R=N}return{remote:r,syncResource:c,profile:a,collection:v,ref:E,node:R}}parseSyncData(t,s){try{const r=JSON.parse(t);if((0,b.isSyncData)(r))return r}catch(r){this.logService.error(r)}throw new w.UserDataSyncError((0,i.localize)(0,null),"IncompatibleRemoteContent",s)}async getUserData(t,s,r){const c=await this.userDataSyncStoreService.resolveResourceContent(t,s,r);return{ref:s,content:c}}};n.NOT_EXISTING_RESOURCE="not-existing-resource",n.REMOTE_BACKUP_AUTHORITY="remote-backup",n.LOCAL_BACKUP_AUTHORITY="local-backup",n=ve([H(0,w.IUserDataSyncStoreService),H(1,w.IUserDataSyncBackupStoreService),H(2,w.IUserDataSyncLogService),H(3,P.IUriIdentityService),H(4,k.IEnvironmentService),H(5,I.IStorageService),H(6,L.IFileService),H(7,C.IUserDataProfilesService),H(8,g.IConfigurationService),H(9,u.IInstantiationService)],n),e.UserDataSyncResourceProviderService=n}),define(se[274],oe([0,1,20,6,24,38,3,2,22,14,31,16,29,4,19,23,18,118,119,120,121,122,123,124,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncService=void 0;const s="sync.lastSyncTime";let r=class extends I.Disposable{get status(){return this._status}get conflicts(){return this._conflicts}get lastSyncTime(){return this._lastSyncTime}constructor(R,N,O,z,F,A,M,$,V){super(),this.userDataSyncStoreService=R,this.userDataSyncStoreManagementService=N,this.instantiationService=O,this.logService=z,this.telemetryService=F,this.storageService=A,this.userDataSyncEnablementService=M,this.userDataProfilesService=$,this.userDataSyncResourceProviderService=V,this._status="uninitialized",this._onDidChangeStatus=this._register(new T.Emitter),this.onDidChangeStatus=this._onDidChangeStatus.event,this._onDidChangeLocal=this._register(new T.Emitter),this.onDidChangeLocal=this._onDidChangeLocal.event,this._conflicts=[],this._onDidChangeConflicts=this._register(new T.Emitter),this.onDidChangeConflicts=this._onDidChangeConflicts.event,this._syncErrors=[],this._onSyncErrors=this._register(new T.Emitter),this.onSyncErrors=this._onSyncErrors.event,this._lastSyncTime=void 0,this._onDidChangeLastSyncTime=this._register(new T.Emitter),this.onDidChangeLastSyncTime=this._onDidChangeLastSyncTime.event,this._onDidResetLocal=this._register(new T.Emitter),this.onDidResetLocal=this._onDidResetLocal.event,this._onDidResetRemote=this._register(new T.Emitter),this.onDidResetRemote=this._onDidResetRemote.event,this.activeProfileSynchronizers=new Map,this._status=N.userDataSyncStore?"idle":"uninitialized",this._lastSyncTime=this.storageService.getNumber(s,-1,void 0),this._register((0,I.toDisposable)(()=>this.clearActiveProfileSynchronizers()))}async createSyncTask(R,N){this.checkEnablement(),this.logService.info("Sync started.");const O=new Date().getTime(),z=(0,C.generateUuid)();try{const $=(0,t.createSyncHeaders)(z);N&&($["Cache-Control"]="no-cache"),R=await this.userDataSyncStoreService.manifest(R,$)}catch($){const V=t.UserDataSyncError.toUserDataSyncError($);throw v(V,z,this.userDataSyncStoreManagementService,this.telemetryService),V}const F=!1,A=this;let M;return{manifest:R,async run(){if(F)throw new Error("Can run a task only once");M=(0,i.createCancelablePromise)($=>A.sync(R,!1,z,$)),await M.finally(()=>M=void 0),A.logService.info(`Sync done. Took ${new Date().getTime()-O}ms`),A.updateLastSyncTime()},stop(){return M?.cancel(),A.stop()}}}async createManualSyncTask(){if(this.checkEnablement(),this.userDataSyncEnablementService.isEnabled())throw new t.UserDataSyncError("Cannot start manual sync when sync is enabled","LocalError");this.logService.info("Sync started.");const R=new Date().getTime(),N=(0,C.generateUuid)(),O=(0,t.createSyncHeaders)(N);let z;try{z=await this.userDataSyncStoreService.manifest(null,O)}catch(M){const $=t.UserDataSyncError.toUserDataSyncError(M);throw v($,N,this.userDataSyncStoreManagementService,this.telemetryService),$}await this.resetLocal();const F=this,A=new k.CancellationTokenSource;return{id:N,async merge(){return F.sync(z,!0,N,A.token)},async apply(){await F.applyManualSync(z,N,A.token),F.logService.info(`Sync done. Took ${new Date().getTime()-R}ms`),F.updateLastSyncTime()},async stop(){A.cancel(),await F.stop(),await F.resetLocal()}}}async sync(R,N,O,z){this._syncErrors=[];try{this.status!=="hasConflicts"&&this.setStatus("syncing");const F=this.getOrCreateActiveProfileSynchronizer(this.userDataProfilesService.defaultProfile,void 0);this._syncErrors.push(...await this.syncProfile(F,R,N,O,z));const A=F.enabled.find(M=>M.resource==="profiles");if(A){const M=await A.getLastSyncedProfiles()||[];if(z.isCancellationRequested)return;await this.syncRemoteProfiles(M,R,N,O,z)}}finally{this._onSyncErrors.fire(this._syncErrors)}}async syncRemoteProfiles(R,N,O,z,F){for(const A of R){if(F.isCancellationRequested)return;const M=this.userDataProfilesService.profiles.find(V=>V.id===A.id);if(!M){this.logService.error(`Profile with id:${A.id} and name: ${A.name} does not exist locally to sync.`);continue}this.logService.info("Syncing profile.",A.name);const $=this.getOrCreateActiveProfileSynchronizer(M,A);this._syncErrors.push(...await this.syncProfile($,N,O,z,F))}for(const[A,M]of this.activeProfileSynchronizers.entries())this.userDataProfilesService.profiles.some($=>$.id===M[0].profile.id)||(M[1].dispose(),this.activeProfileSynchronizers.delete(A))}async applyManualSync(R,N,O){const z=this.getActiveProfileSynchronizers();for(const V of z){if(O.isCancellationRequested)return;await V.apply(N,O)}const F=z.find(V=>V.profile.isDefault);if(!F)return;const A=F.enabled.find(V=>V.resource==="profiles");if(!A)return;const $=(await A.getRemoteSyncedProfiles(R?.latest??null)||[]).filter(V=>z.every(B=>B.profile.id!==V.id));$.length&&await this.syncRemoteProfiles($,R,!1,N,O)}async syncProfile(R,N,O,z,F){return(await R.sync(N,O,z,F)).map(([M,$])=>({profile:R.profile,syncResource:M,error:$}))}async stop(){this.status!=="idle"&&await Promise.allSettled(this.getActiveProfileSynchronizers().map(R=>R.stop()))}async resolveContent(R){const N=await this.userDataSyncResourceProviderService.resolveContent(R);if(N)return N;for(const O of this.getActiveProfileSynchronizers())for(const z of O.enabled){const F=await z.resolveContent(R);if(F)return F}return null}async replace(R){this.checkEnablement();const N=this.userDataSyncResourceProviderService.resolveUserDataSyncResource(R);if(!N)return;const O=await this.resolveContent(R.uri);!O||await this.performAction(N.profile,async z=>{if(N.syncResource===z.resource)return await z.replace(O),!0})}async accept(R,N,O,z){this.checkEnablement(),await this.performAction(R.profile,async F=>{if(R.syncResource===F.resource)return await F.accept(N,O),z&&await F.apply((0,w.isBoolean)(z)?!1:z.force,(0,t.createSyncHeaders)((0,C.generateUuid)())),!0})}getRemoteProfiles(){return this.userDataSyncResourceProviderService.getRemoteSyncedProfiles()}getRemoteSyncResourceHandles(R,N){return this.userDataSyncResourceProviderService.getRemoteSyncResourceHandles(R,N)}async getLocalSyncResourceHandles(R,N){return this.userDataSyncResourceProviderService.getLocalSyncResourceHandles(R,N??this.userDataProfilesService.defaultProfile)}async getAssociatedResources(R){return this.userDataSyncResourceProviderService.getAssociatedResources(R)}async getMachineId(R){return this.userDataSyncResourceProviderService.getMachineId(R)}async hasLocalData(){return!!await this.performAction(this.userDataProfilesService.defaultProfile,async N=>{if(N.resource!=="globalState"&&await N.hasLocalData())return!0})}async hasPreviouslySynced(){return!!await this.performAction(this.userDataProfilesService.defaultProfile,async N=>{if(await N.hasPreviouslySynced())return!0})}async reset(){this.checkEnablement(),await this.resetRemote(),await this.resetLocal()}async resetRemote(){this.checkEnablement();try{await this.userDataSyncStoreService.clear(),this.logService.info("Cleared data on server")}catch(R){this.logService.error(R)}this._onDidResetRemote.fire()}async resetLocal(){this.checkEnablement(),this._lastSyncTime=void 0,this.storageService.remove(s,-1);for(const[R]of this.activeProfileSynchronizers.values())try{await R.resetLocal()}catch(N){this.logService.error(N)}this.clearActiveProfileSynchronizers(),this._onDidResetLocal.fire(),this.logService.info("Did reset the local sync state.")}async performAction(R,N){const O=new I.DisposableStore;try{const z=this.activeProfileSynchronizers.get(R.id);if(z){const V=await this.performActionWithProfileSynchronizer(z[0],N,O);return(0,w.isUndefined)(V)?null:V}if(R.isDefault){const V=O.add(this.instantiationService.createInstance(c,R,void 0)),B=await this.performActionWithProfileSynchronizer(V,N,O);return(0,w.isUndefined)(B)?null:B}if(this.userDataProfilesService.isEnabled())return null;const F=O.add(this.instantiationService.createInstance(o.UserDataProfilesManifestSynchroniser,R,void 0)),A=await this.userDataSyncStoreService.manifest(null),$=(await F.getRemoteSyncedProfiles(A?.latest??null)||[]).find(V=>V.id===R.id);if($){const V=O.add(this.instantiationService.createInstance(c,R,$.collection)),B=await this.performActionWithProfileSynchronizer(V,N,O);return(0,w.isUndefined)(B)?null:B}return null}finally{O.dispose()}}async performActionWithProfileSynchronizer(R,N,O){const z=[...R.enabled,...R.disabled.map(F=>O.add(R.createSynchronizer(F)))];for(const F of z){const A=await N(F);if(!(0,w.isUndefined)(A))return A}}setStatus(R){const N=this._status;this._status!==R&&(this._status=R,this._onDidChangeStatus.fire(R),N==="hasConflicts"&&this.updateLastSyncTime())}updateConflicts(){const R=this.getActiveProfileSynchronizers().map(N=>N.conflicts).flat();(0,D.equals)(this._conflicts,R,(N,O)=>N.profile.id===O.profile.id&&N.syncResource===O.syncResource&&(0,D.equals)(N.conflicts,O.conflicts,(z,F)=>(0,P.isEqual)(z.previewResource,F.previewResource)))||(this._conflicts=R,this._onDidChangeConflicts.fire(R))}updateLastSyncTime(){this.status==="idle"&&(this._lastSyncTime=new Date().getTime(),this.storageService.store(s,this._lastSyncTime,-1,1),this._onDidChangeLastSyncTime.fire(this._lastSyncTime))}getOrCreateActiveProfileSynchronizer(R,N){let O=this.activeProfileSynchronizers.get(R.id);if(O&&O[0].collection!==N?.collection&&(this.logService.error("Profile synchronizer collection does not match with the remote sync profile collection"),O[1].dispose(),O=void 0,this.activeProfileSynchronizers.delete(R.id)),!O){const z=new I.DisposableStore,F=z.add(this.instantiationService.createInstance(c,R,N?.collection));z.add(F.onDidChangeStatus(A=>this.setStatus(A))),z.add(F.onDidChangeConflicts(A=>this.updateConflicts())),z.add(F.onDidChangeLocal(A=>this._onDidChangeLocal.fire(A))),this.activeProfileSynchronizers.set(R.id,O=[F,z])}return O[0]}getActiveProfileSynchronizers(){const R=[];for(const[N]of this.activeProfileSynchronizers.values())R.push(N);return R}clearActiveProfileSynchronizers(){this.activeProfileSynchronizers.forEach(([,R])=>R.dispose()),this.activeProfileSynchronizers.clear()}checkEnablement(){if(!this.userDataSyncStoreManagementService.userDataSyncStore)throw new Error("Not enabled")}};r=ve([H(0,t.IUserDataSyncStoreService),H(1,t.IUserDataSyncStoreManagementService),H(2,S.IInstantiationService),H(3,t.IUserDataSyncLogService),H(4,g.ITelemetryService),H(5,f.IStorageService),H(6,t.IUserDataSyncEnablementService),H(7,y.IUserDataProfilesService),H(8,t.IUserDataSyncResourceProviderService)],r),e.UserDataSyncService=r;let c=class extends I.Disposable{get enabled(){return this._enabled.sort((R,N)=>R[1]-N[1]).map(([R])=>R)}get disabled(){return t.ALL_SYNC_RESOURCES.filter(R=>!this.userDataSyncEnablementService.isResourceEnabled(R))}get status(){return this._status}get conflicts(){return this._conflicts}constructor(R,N,O,z,F,A,M,$,V,B){super(),this.profile=R,this.collection=N,this.userDataSyncEnablementService=O,this.instantiationService=z,this.extensionGalleryService=F,this.userDataSyncStoreManagementService=A,this.telemetryService=M,this.logService=$,this.userDataProfilesService=V,this.configurationService=B,this._enabled=[],this._status="idle",this._onDidChangeStatus=this._register(new T.Emitter),this.onDidChangeStatus=this._onDidChangeStatus.event,this._onDidChangeLocal=this._register(new T.Emitter),this.onDidChangeLocal=this._onDidChangeLocal.event,this._conflicts=[],this._onDidChangeConflicts=this._register(new T.Emitter),this.onDidChangeConflicts=this._onDidChangeConflicts.event,this._register(O.onDidChangeResourceEnablement(([Q,W])=>this.onDidChangeResourceEnablement(Q,W))),this._register((0,I.toDisposable)(()=>this._enabled.splice(0,this._enabled.length).forEach(([,,Q])=>Q.dispose())));for(const Q of t.ALL_SYNC_RESOURCES)O.isResourceEnabled(Q)&&this.registerSynchronizer(Q)}onDidChangeResourceEnablement(R,N){N?this.registerSynchronizer(R):this.deRegisterSynchronizer(R)}registerSynchronizer(R){if(this._enabled.some(([F])=>F.resource===R))return;if(R==="extensions"&&!this.extensionGalleryService.isEnabled()){this.logService.info("Skipping extensions sync because gallery is not configured");return}if(R==="profiles"&&(!this.profile.isDefault||!this.userDataProfilesService.isEnabled()))return;const N=new I.DisposableStore,O=N.add(this.createSynchronizer(R));N.add(O.onDidChangeStatus(()=>this.updateStatus())),N.add(O.onDidChangeConflicts(()=>this.updateConflicts())),N.add(O.onDidChangeLocal(()=>this._onDidChangeLocal.fire(R)));const z=this.getOrder(R);this._enabled.push([O,z,N])}deRegisterSynchronizer(R){const N=this._enabled.findIndex(([O])=>O.resource===R);if(N!==-1){const[[O,,z]]=this._enabled.splice(N,1);z.dispose(),this.updateStatus(),Promise.allSettled([O.stop(),O.resetLocal()]).then(null,F=>this.logService.error(F))}}createSynchronizer(R){switch(R){case"settings":return this.instantiationService.createInstance(h.SettingsSynchroniser,this.profile,this.collection);case"keybindings":return this.instantiationService.createInstance(u.KeybindingsSynchroniser,this.profile,this.collection);case"snippets":return this.instantiationService.createInstance(d.SnippetsSynchroniser,this.profile,this.collection);case"tasks":return this.instantiationService.createInstance(n.TasksSynchroniser,this.profile,this.collection);case"globalState":return this.instantiationService.createInstance(m.GlobalStateSynchroniser,this.profile,this.collection);case"extensions":return this.instantiationService.createInstance(l.ExtensionsSynchroniser,this.profile,this.collection);case"profiles":return this.instantiationService.createInstance(o.UserDataProfilesManifestSynchroniser,this.profile,this.collection)}}async sync(R,N,O,z){if(z.isCancellationRequested)return[];const F=this.enabled;if(!F.length)return[];try{const A=[],M=(0,t.createSyncHeaders)(O),$=(this.collection?R?.collections?.[this.collection]?.latest:R?.latest)??null,V=N?await this.getUserDataSyncConfiguration($):{};for(const B of F){if(z.isCancellationRequested)return[];if(!this.userDataSyncEnablementService.isResourceEnabled(B.resource))return[];try{if(N){const Q=await B.preview($,V,M);if(Q)for(const W of Q.resourcePreviews)(W.localChange!==0||W.remoteChange!==0)&&W.mergeState==="preview"&&await B.merge(W.previewResource)}else await B.sync($,M)}catch(Q){const W=t.UserDataSyncError.toUserDataSyncError(Q);if(v(W,O,this.userDataSyncStoreManagementService,this.telemetryService),a(Q))throw W;this.logService.error(Q),this.logService.error(`${B.resource}: ${(0,L.toErrorMessage)(Q)}`),A.push([B.resource,W])}}return A}finally{this.updateStatus()}}async apply(R,N){const O=(0,t.createSyncHeaders)(R);for(const z of this.enabled){if(N.isCancellationRequested)return;try{await z.apply(!1,O)}catch(F){const A=t.UserDataSyncError.toUserDataSyncError(F);if(v(A,R,this.userDataSyncStoreManagementService,this.telemetryService),a(F))throw A;this.logService.error(F),this.logService.error(`${z.resource}: ${(0,L.toErrorMessage)(F)}`)}}}async stop(){for(const R of this.enabled)try{R.status!=="idle"&&await R.stop()}catch(N){this.logService.error(N)}}async resetLocal(){for(const R of this.enabled)try{await R.resetLocal()}catch(N){this.logService.error(`${R.resource}: ${(0,L.toErrorMessage)(N)}`),this.logService.error(N)}}async getUserDataSyncConfiguration(R){if(!this.profile.isDefault)return{};const N=this.configurationService.getValue(t.USER_DATA_SYNC_CONFIGURATION_SCOPE),O=this.enabled.find(z=>z instanceof h.SettingsSynchroniser);if(O){const z=await O.getRemoteUserDataSyncConfiguration(R);return{...N,...z}}return N}setStatus(R){this._status!==R&&(this._status=R,this._onDidChangeStatus.fire(R))}updateStatus(){return this.updateConflicts(),this.enabled.some(R=>R.status==="hasConflicts")?this.setStatus("hasConflicts"):this.enabled.some(R=>R.status==="syncing")?this.setStatus("syncing"):this.setStatus("idle")}updateConflicts(){const R=this.enabled.filter(N=>N.status==="hasConflicts").filter(N=>N.conflicts.conflicts.length>0).map(N=>N.conflicts);(0,D.equals)(this._conflicts,R,(N,O)=>N.syncResource===O.syncResource&&(0,D.equals)(N.conflicts,O.conflicts,(z,F)=>(0,P.isEqual)(z.previewResource,F.previewResource)))||(this._conflicts=R,this._onDidChangeConflicts.fire(R))}getOrder(R){switch(R){case"profiles":return 0;case"settings":return 1;case"keybindings":return 2;case"snippets":return 3;case"tasks":return 4;case"globalState":return 5;case"extensions":return 6}}};c=ve([H(2,t.IUserDataSyncEnablementService),H(3,S.IInstantiationService),H(4,p.IExtensionGalleryService),H(5,t.IUserDataSyncStoreManagementService),H(6,g.ITelemetryService),H(7,t.IUserDataSyncLogService),H(8,y.IUserDataProfilesService),H(9,b.IConfigurationService)],c);function a(E){if(E instanceof t.UserDataSyncError)switch(E.code){case"TooLarge":case"RemoteTooManyRequests":case"TooManyRequestsAndRetryAfter":case"LocalTooManyRequests":case"Gone":case"UpgradeRequired":case"IncompatibleRemoteContent":case"IncompatibleLocalContent":return!0}return!1}function v(E,R,N,O){O.publicLog2("sync/error",{code:E.code,serverCode:E instanceof t.UserDataSyncStoreError?String(E.serverCode):void 0,url:E instanceof t.UserDataSyncStoreError?E.url:void 0,resource:E.resource,executionId:R,service:N.userDataSyncStore.url.toString()})}}),define(se[275],oe([0,1,3,2,7,18,26]),function(Z,e,D,i,k,L,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataSyncChannelClient=e.UserDataSyncChannel=void 0;function I(p,S){return{...p,profile:(0,L.reviveProfile)(p.profile,S.profilesHome.scheme)}}function P(p){return{created:p.created,uri:k.URI.revive(p.uri)}}class w{constructor(S,f,g){this.service=S,this.userDataProfilesService=f,this.logService=g,this.manualSyncTasks=new Map,this.onManualSynchronizeResources=new D.Emitter}listen(S,f){switch(f){case"onDidChangeStatus":return this.service.onDidChangeStatus;case"onDidChangeConflicts":return this.service.onDidChangeConflicts;case"onDidChangeLocal":return this.service.onDidChangeLocal;case"onDidChangeLastSyncTime":return this.service.onDidChangeLastSyncTime;case"onSyncErrors":return this.service.onSyncErrors;case"onDidResetLocal":return this.service.onDidResetLocal;case"onDidResetRemote":return this.service.onDidResetRemote;case"manualSync/onSynchronizeResources":return this.onManualSynchronizeResources.event}throw new Error(`Event not found: ${f}`)}async call(S,f,g){try{return await this._call(S,f,g)}catch(y){throw this.logService.error(y),y}}async _call(S,f,g){switch(f){case"_getInitialData":return Promise.resolve([this.service.status,this.service.conflicts,this.service.lastSyncTime]);case"reset":return this.service.reset();case"resetRemote":return this.service.resetRemote();case"resetLocal":return this.service.resetLocal();case"hasPreviouslySynced":return this.service.hasPreviouslySynced();case"hasLocalData":return this.service.hasLocalData();case"resolveContent":return this.service.resolveContent(k.URI.revive(g[0]));case"accept":return this.service.accept(I(g[0],this.userDataProfilesService),k.URI.revive(g[1]),g[2],g[3]);case"getRemoteProfiles":return this.service.getRemoteProfiles();case"getLocalSyncResourceHandles":return this.service.getLocalSyncResourceHandles(g[0],(0,L.reviveProfile)(g[1],this.userDataProfilesService.profilesHome.scheme));case"getRemoteSyncResourceHandles":return this.service.getRemoteSyncResourceHandles(g[0],g[1]);case"replace":return this.service.replace(P(g[0]));case"getAssociatedResources":return this.service.getAssociatedResources(P(g[0]));case"getMachineId":return this.service.getMachineId(P(g[0]));case"createManualSyncTask":return this.createManualSyncTask()}if(f.startsWith("manualSync/")){const y=f.substring(11),l=g[0],m=this.getManualSyncTask(l);switch(g=g.slice(1),y){case"merge":return m.merge();case"apply":return m.apply().finally(()=>this.manualSyncTasks.delete(this.createKey(m.id)));case"stop":return m.stop().finally(()=>this.manualSyncTasks.delete(this.createKey(m.id)))}}throw new Error("Invalid call")}getManualSyncTask(S){const f=this.manualSyncTasks.get(this.createKey(S));if(!f)throw new Error(`Manual sync taks not found: ${S}`);return f}async createManualSyncTask(){const S=await this.service.createManualSyncTask();return this.manualSyncTasks.set(this.createKey(S.id),S),S.id}createKey(S){return`manualSyncTask-${S}`}}e.UserDataSyncChannel=w;let C=class extends i.Disposable{get status(){return this._status}get onDidChangeLocal(){return this.channel.listen("onDidChangeLocal")}get conflicts(){return this._conflicts}get lastSyncTime(){return this._lastSyncTime}get onDidResetLocal(){return this.channel.listen("onDidResetLocal")}get onDidResetRemote(){return this.channel.listen("onDidResetRemote")}constructor(S,f){super(),this.userDataProfilesService=f,this._status="uninitialized",this._onDidChangeStatus=this._register(new D.Emitter),this.onDidChangeStatus=this._onDidChangeStatus.event,this._conflicts=[],this._onDidChangeConflicts=this._register(new D.Emitter),this.onDidChangeConflicts=this._onDidChangeConflicts.event,this._lastSyncTime=void 0,this._onDidChangeLastSyncTime=this._register(new D.Emitter),this.onDidChangeLastSyncTime=this._onDidChangeLastSyncTime.event,this._onSyncErrors=this._register(new D.Emitter),this.onSyncErrors=this._onSyncErrors.event,this.channel={call(g,y,l){return S.call(g,y,l).then(null,m=>{throw T.UserDataSyncError.toUserDataSyncError(m)})},listen(g,y){return S.listen(g,y)}},this.channel.call("_getInitialData").then(([g,y,l])=>{this.updateStatus(g),this.updateConflicts(y),l&&this.updateLastSyncTime(l),this._register(this.channel.listen("onDidChangeStatus")(m=>this.updateStatus(m))),this._register(this.channel.listen("onDidChangeLastSyncTime")(m=>this.updateLastSyncTime(m)))}),this._register(this.channel.listen("onDidChangeConflicts")(g=>this.updateConflicts(g))),this._register(this.channel.listen("onSyncErrors")(g=>this._onSyncErrors.fire(g.map(y=>({...y,error:T.UserDataSyncError.toUserDataSyncError(y.error)})))))}createSyncTask(){throw new Error("not supported")}async createManualSyncTask(){const S=await this.channel.call("createManualSyncTask"),f=this;return new b(S,{async call(y,l,m){return f.channel.call(`manualSync/${y}`,[S,...Array.isArray(l)?l:[l]],m)},listen(){throw new Error("not supported")}})}reset(){return this.channel.call("reset")}resetRemote(){return this.channel.call("resetRemote")}resetLocal(){return this.channel.call("resetLocal")}hasPreviouslySynced(){return this.channel.call("hasPreviouslySynced")}hasLocalData(){return this.channel.call("hasLocalData")}accept(S,f,g,y){return this.channel.call("accept",[S,f,g,y])}resolveContent(S){return this.channel.call("resolveContent",[S])}getRemoteProfiles(){return this.channel.call("getRemoteProfiles")}async getLocalSyncResourceHandles(S,f){return(await this.channel.call("getLocalSyncResourceHandles",[S,f])).map(({created:y,uri:l})=>({created:y,uri:k.URI.revive(l)}))}async getRemoteSyncResourceHandles(S,f){return(await this.channel.call("getRemoteSyncResourceHandles",[S,f])).map(({created:y,uri:l})=>({created:y,uri:k.URI.revive(l)}))}async getAssociatedResources(S){return(await this.channel.call("getAssociatedResources",[S])).map(({resource:g,comparableResource:y})=>({resource:k.URI.revive(g),comparableResource:k.URI.revive(y)}))}getMachineId(S){return this.channel.call("getMachineId",[S])}replace(S){return this.channel.call("replace",[S])}async updateStatus(S){this._status=S,this._onDidChangeStatus.fire(S)}async updateConflicts(S){this._conflicts=S.map(f=>({syncResource:f.syncResource,profile:(0,L.reviveProfile)(f.profile,this.userDataProfilesService.profilesHome.scheme),conflicts:f.conflicts.map(g=>({...g,baseResource:k.URI.revive(g.baseResource),localResource:k.URI.revive(g.localResource),remoteResource:k.URI.revive(g.remoteResource),previewResource:k.URI.revive(g.previewResource)}))})),this._onDidChangeConflicts.fire(this._conflicts)}updateLastSyncTime(S){this._lastSyncTime!==S&&(this._lastSyncTime=S,this._onDidChangeLastSyncTime.fire(S))}};C=ve([H(1,L.IUserDataProfilesService)],C),e.UserDataSyncChannelClient=C;class b extends i.Disposable{constructor(S,f){super(),this.id=S,this.channel=f}async merge(){return this.channel.call("merge")}async apply(){return this.channel.call("apply")}stop(){return this.channel.call("stop")}dispose(){this.channel.call("dispose")}}}),define(se[276],oe([0,1,6,24,9,3,2,139,5,22,14,7,31,16,15,13,25,59,45,19,26]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestsSession=e.UserDataSyncStoreService=e.UserDataSyncStoreClient=e.UserDataSyncStoreManagementService=e.AbstractUserDataSyncStoreManagementService=void 0;const d="sync.previous.store",n="sync.donot-make-requests-until",o="sync.user-session-id",t="sync.machine-session-id",s=100,r=1e3*60*5;let c=class extends T.Disposable{get userDataSyncStore(){return this._userDataSyncStore}get userDataSyncStoreType(){return this.storageService.get(h.SYNC_SERVICE_URL_TYPE,-1)}set userDataSyncStoreType(O){this.storageService.store(h.SYNC_SERVICE_URL_TYPE,O,-1,P.isWeb?0:1)}constructor(O,z,F){super(),this.productService=O,this.configurationService=z,this.storageService=F,this._onDidChangeUserDataSyncStore=this._register(new L.Emitter),this.onDidChangeUserDataSyncStore=this._onDidChangeUserDataSyncStore.event,this.updateUserDataSyncStore(),this._register(L.Event.filter(F.onDidChangeValue,A=>A.key===h.SYNC_SERVICE_URL_TYPE&&A.scope===-1&&this.userDataSyncStoreType!==this.userDataSyncStore?.type)(()=>this.updateUserDataSyncStore()))}updateUserDataSyncStore(){this._userDataSyncStore=this.toUserDataSyncStore(this.productService[h.CONFIGURATION_SYNC_STORE_KEY],this.configurationService.getValue(h.CONFIGURATION_SYNC_STORE_KEY)),this._onDidChangeUserDataSyncStore.fire()}toUserDataSyncStore(O,z){O=P.isWeb&&O?.web?{...O,...O.web}:O;const F={...O||{},...z||{}};if(F&&(0,C.isString)(F.url)&&(0,C.isObject)(F.authenticationProviders)&&Object.keys(F.authenticationProviders).every(A=>Array.isArray(F.authenticationProviders[A].scopes))){const A=F,M=!!A.canSwitch&&!z?.url,$=A.url===A.insidersUrl?"insiders":"stable",V=(M?this.userDataSyncStoreType:void 0)||$,B=z?.url||(V==="insiders"?A.insidersUrl:V==="stable"?A.stableUrl:A.url);return{url:b.URI.parse(B),type:V,defaultType:$,defaultUrl:b.URI.parse(A.url),stableUrl:b.URI.parse(A.stableUrl),insidersUrl:b.URI.parse(A.insidersUrl),canSwitch:M,authenticationProviders:Object.keys(A.authenticationProviders).reduce((Q,W)=>(Q.push({id:W,scopes:A.authenticationProviders[W].scopes}),Q),[])}}}};c=ve([H(0,y.IProductService),H(1,S.IConfigurationService),H(2,u.IStorageService)],c),e.AbstractUserDataSyncStoreManagementService=c;let a=class extends c{constructor(O,z,F){super(O,z,F);const A=this.storageService.get(d,-1);A&&(this.previousConfigurationSyncStore=JSON.parse(A));const M=this.productService[h.CONFIGURATION_SYNC_STORE_KEY];M?this.storageService.store(d,JSON.stringify(M),-1,1):this.storageService.remove(d,-1)}async switch(O){O!==this.userDataSyncStoreType&&(this.userDataSyncStoreType=O,this.updateUserDataSyncStore())}async getPreviousUserDataSyncStore(){return this.toUserDataSyncStore(this.previousConfigurationSyncStore)}};a=ve([H(0,y.IProductService),H(1,S.IConfigurationService),H(2,u.IStorageService)],a),e.UserDataSyncStoreManagementService=a;let v=class extends T.Disposable{get donotMakeRequestsUntil(){return this._donotMakeRequestsUntil}constructor(O,z,F,A,M,$,V){super(),this.requestService=F,this.logService=A,this.storageService=V,this._onTokenFailed=this._register(new L.Emitter),this.onTokenFailed=this._onTokenFailed.event,this._onTokenSucceed=this._register(new L.Emitter),this.onTokenSucceed=this._onTokenSucceed.event,this._donotMakeRequestsUntil=void 0,this._onDidChangeDonotMakeRequestsUntil=this._register(new L.Emitter),this.onDidChangeDonotMakeRequestsUntil=this._onDidChangeDonotMakeRequestsUntil.event,this.resetDonotMakeRequestsUntilPromise=void 0,this.updateUserDataSyncStoreUrl(O),this.commonHeadersPromise=(0,m.getServiceMachineId)(M,$,V).then(B=>{const Q={"X-Client-Name":`${z.applicationName}${P.isWeb?"-web":""}`,"X-Client-Version":z.version};return z.commit&&(Q["X-Client-Commit"]=z.commit),Q}),this.session=new R(s,r,this.requestService,this.logService),this.initDonotMakeRequestsUntil(),this._register((0,T.toDisposable)(()=>{this.resetDonotMakeRequestsUntilPromise&&(this.resetDonotMakeRequestsUntilPromise.cancel(),this.resetDonotMakeRequestsUntilPromise=void 0)}))}setAuthToken(O,z){this.authToken={token:O,type:z}}updateUserDataSyncStoreUrl(O){this.userDataSyncStoreUrl=O?(0,w.joinPath)(O,"v1"):void 0}initDonotMakeRequestsUntil(){const O=this.storageService.getNumber(n,-1);O&&Date.now()<O&&this.setDonotMakeRequestsUntil(new Date(O))}setDonotMakeRequestsUntil(O){this._donotMakeRequestsUntil?.getTime()!==O?.getTime()&&(this._donotMakeRequestsUntil=O,this.resetDonotMakeRequestsUntilPromise&&(this.resetDonotMakeRequestsUntilPromise.cancel(),this.resetDonotMakeRequestsUntilPromise=void 0),this._donotMakeRequestsUntil?(this.storageService.store(n,this._donotMakeRequestsUntil.getTime(),-1,1),this.resetDonotMakeRequestsUntilPromise=(0,D.createCancelablePromise)(z=>(0,D.timeout)(this._donotMakeRequestsUntil.getTime()-Date.now(),z).then(()=>this.setDonotMakeRequestsUntil(void 0))),this.resetDonotMakeRequestsUntilPromise.then(null,z=>null)):this.storageService.remove(n,-1),this._onDidChangeDonotMakeRequestsUntil.fire())}async getAllCollections(O={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const z=(0,w.joinPath)(this.userDataSyncStoreUrl,"collection").toString();O={...O},O["Content-Type"]="application/json";const F=await this.request(z,{type:"GET",headers:O},[],i.CancellationToken.None);return await(0,l.asJson)(F)||[]}async createCollection(O={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const z=(0,w.joinPath)(this.userDataSyncStoreUrl,"collection").toString();O={...O},O["Content-Type"]=I.Mimes.text;const F=await this.request(z,{type:"POST",headers:O},[],i.CancellationToken.None),A=await(0,l.asTextOrError)(F);if(!A)throw new h.UserDataSyncStoreError("Server did not return the collection id",z,"NoCollection",F.res.statusCode,F.res.headers[h.HEADER_OPERATION_ID]);return A}async deleteCollection(O,z={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const F=O?(0,w.joinPath)(this.userDataSyncStoreUrl,"collection",O).toString():(0,w.joinPath)(this.userDataSyncStoreUrl,"collection").toString();z={...z},await this.request(F,{type:"DELETE",headers:z},[],i.CancellationToken.None)}async getAllResourceRefs(O,z){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const F=this.getResourceUrl(this.userDataSyncStoreUrl,z,O),A={},M=await this.request(F.toString(),{type:"GET",headers:A},[],i.CancellationToken.None);return(await(0,l.asJson)(M)||[]).map(({url:V,created:B})=>({ref:(0,w.relativePath)(F,F.with({path:V})),created:B*1e3}))}async resolveResourceContent(O,z,F,A={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const M=(0,w.joinPath)(this.getResourceUrl(this.userDataSyncStoreUrl,F,O),z).toString();A={...A},A["Cache-Control"]="no-cache";const $=await this.request(M,{type:"GET",headers:A},[],i.CancellationToken.None);return await(0,l.asTextOrError)($)}async deleteResource(O,z,F){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const A=z!==null?(0,w.joinPath)(this.getResourceUrl(this.userDataSyncStoreUrl,F,O),z).toString():this.getResourceUrl(this.userDataSyncStoreUrl,F,O).toString(),M={};await this.request(A,{type:"DELETE",headers:M},[],i.CancellationToken.None)}async deleteResources(){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const O=(0,w.joinPath)(this.userDataSyncStoreUrl,"resource").toString(),z={"Content-Type":I.Mimes.text};await this.request(O,{type:"DELETE",headers:z},[],i.CancellationToken.None)}async readResource(O,z,F,A={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const M=(0,w.joinPath)(this.getResourceUrl(this.userDataSyncStoreUrl,F,O),"latest").toString();A={...A},A["Cache-Control"]="no-cache",z&&(A["If-None-Match"]=z.ref);const $=await this.request(M,{type:"GET",headers:A},[304],i.CancellationToken.None);let V=null;if($.res.statusCode===304&&(V=z),V===null){const B=$.res.headers.etag;if(!B)throw new h.UserDataSyncStoreError("Server did not return the ref",M,"NoRef",$.res.statusCode,$.res.headers[h.HEADER_OPERATION_ID]);const Q=await(0,l.asTextOrError)($);if(!Q&&$.res.statusCode===304)throw new h.UserDataSyncStoreError("Empty response",M,"EmptyResponse",$.res.statusCode,$.res.headers[h.HEADER_OPERATION_ID]);V={ref:B,content:Q}}return V}async writeResource(O,z,F,A,M={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const $=this.getResourceUrl(this.userDataSyncStoreUrl,A,O).toString();M={...M},M["Content-Type"]=I.Mimes.text,F&&(M["If-Match"]=F);const V=await this.request($,{type:"POST",data:z,headers:M},[],i.CancellationToken.None),B=V.res.headers.etag;if(!B)throw new h.UserDataSyncStoreError("Server did not return the ref",$,"NoRef",V.res.statusCode,V.res.headers[h.HEADER_OPERATION_ID]);return B}async manifest(O,z={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");const F=(0,w.joinPath)(this.userDataSyncStoreUrl,"manifest").toString();z={...z},z["Content-Type"]="application/json",O&&(z["If-None-Match"]=O.ref);const A=await this.request(F,{type:"GET",headers:z},[304],i.CancellationToken.None);let M=null;if(A.res.statusCode===304&&(M=O),!M){const V=A.res.headers.etag;if(!V)throw new h.UserDataSyncStoreError("Server did not return the ref",F,"NoRef",A.res.statusCode,A.res.headers[h.HEADER_OPERATION_ID]);const B=await(0,l.asTextOrError)(A);if(!B&&A.res.statusCode===304)throw new h.UserDataSyncStoreError("Empty response",F,"EmptyResponse",A.res.statusCode,A.res.headers[h.HEADER_OPERATION_ID]);B&&(M={...JSON.parse(B),ref:V})}const $=this.storageService.get(o,-1);return $&&M&&$!==M.session&&this.clearSession(),M===null&&$&&this.clearSession(),M&&this.storageService.store(o,M.session,-1,1),M}async clear(){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");await this.deleteResources(),await this.deleteCollection(),this.clearSession()}getResourceUrl(O,z,F){return z?(0,w.joinPath)(O,"collection",z,"resource",F):(0,w.joinPath)(O,"resource",F)}clearSession(){this.storageService.remove(o,-1),this.storageService.remove(t,-1)}async request(O,z,F,A){if(!this.authToken)throw new h.UserDataSyncStoreError("No Auth Token Available",O,"Unauthorized",void 0,void 0);if(this._donotMakeRequestsUntil&&Date.now()<this._donotMakeRequestsUntil.getTime())throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of too many requests (429).`,O,"TooManyRequestsAndRetryAfter",void 0,void 0);this.setDonotMakeRequestsUntil(void 0);const M=await this.commonHeadersPromise;z.headers={...z.headers||{},...M,"X-Account-Type":this.authToken.type,authorization:`Bearer ${this.authToken.token}`},this.addSessionHeaders(z.headers),this.logService.trace("Sending request to server",{url:O,type:z.type,headers:{...z.headers,authorization:void 0}});let $;try{$=await this.session.request(O,z,A)}catch(W){if(!(W instanceof h.UserDataSyncStoreError)){let q="RequestFailed";const G=(0,k.getErrorMessage)(W).toLowerCase();G.includes("xhr timeout")?q="RequestTimeout":G.includes("protocol")&&G.includes("not supported")?q="RequestProtocolNotSupported":G.includes("request path contains unescaped characters")?q="RequestPathNotEscaped":G.includes("headers must be an object")?q="RequestHeadersNotObject":(0,k.isCancellationError)(W)&&(q="RequestCanceled"),W=new h.UserDataSyncStoreError(`Connection refused for the request '${O}'.`,O,q,void 0,void 0)}throw this.logService.info("Request failed",O),W}const V=$.res.headers[h.HEADER_OPERATION_ID],B={url:O,status:$.res.statusCode,"execution-id":z.headers[h.HEADER_EXECUTION_ID],"operation-id":V},Q=(0,l.isSuccess)($)||$.res.statusCode&&F.indexOf($.res.statusCode)!==-1;if(Q?this.logService.trace("Request succeeded",B):this.logService.info("Request failed",B),$.res.statusCode===401)throw this.authToken=void 0,this._onTokenFailed.fire(),new h.UserDataSyncStoreError(`Request '${O}' failed because of Unauthorized (401).`,O,"Unauthorized",$.res.statusCode,V);if(this._onTokenSucceed.fire(),$.res.statusCode===404)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because the requested resource is not found (404).`,O,"NotFound",$.res.statusCode,V);if($.res.statusCode===409)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of Conflict (409). There is new data for this resource. Make the request again with latest data.`,O,"Conflict",$.res.statusCode,V);if($.res.statusCode===410)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because the requested resource is not longer available (410).`,O,"Gone",$.res.statusCode,V);if($.res.statusCode===412)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of Precondition Failed (412). There is new data for this resource. Make the request again with latest data.`,O,"PreconditionFailed",$.res.statusCode,V);if($.res.statusCode===413)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of too large payload (413).`,O,"TooLarge",$.res.statusCode,V);if($.res.statusCode===426)throw new h.UserDataSyncStoreError(`${z.type} request '${O}' failed with status Upgrade Required (426). Please upgrade the client and try again.`,O,"UpgradeRequired",$.res.statusCode,V);if($.res.statusCode===429){const W=$.res.headers["retry-after"];throw W?(this.setDonotMakeRequestsUntil(new Date(Date.now()+parseInt(W)*1e3)),new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of too many requests (429).`,O,"TooManyRequestsAndRetryAfter",$.res.statusCode,V)):new h.UserDataSyncStoreError(`${z.type} request '${O}' failed because of too many requests (429).`,O,"RemoteTooManyRequests",$.res.statusCode,V)}if(!Q)throw new h.UserDataSyncStoreError("Server returned "+$.res.statusCode,O,"Unknown",$.res.statusCode,V);return $}addSessionHeaders(O){let z=this.storageService.get(t,-1);z===void 0&&(z=(0,p.generateUuid)(),this.storageService.store(t,z,-1,1)),O["X-Machine-Session-Id"]=z;const F=this.storageService.get(o,-1);F!==void 0&&(O["X-User-Session-Id"]=F)}};v=ve([H(1,y.IProductService),H(2,l.IRequestService),H(3,h.IUserDataSyncLogService),H(4,f.IEnvironmentService),H(5,g.IFileService),H(6,u.IStorageService)],v),e.UserDataSyncStoreClient=v;let E=class extends v{constructor(O,z,F,A,M,$,V){super(O.userDataSyncStore?.url,z,F,A,M,$,V),this._register(O.onDidChangeUserDataSyncStore(()=>this.updateUserDataSyncStoreUrl(O.userDataSyncStore?.url)))}};E=ve([H(0,h.IUserDataSyncStoreManagementService),H(1,y.IProductService),H(2,l.IRequestService),H(3,h.IUserDataSyncLogService),H(4,f.IEnvironmentService),H(5,g.IFileService),H(6,u.IStorageService)],E),e.UserDataSyncStoreService=E;class R{constructor(O,z,F,A){this.limit=O,this.interval=z,this.requestService=F,this.logService=A,this.requests=[],this.startTime=void 0}request(O,z,F){if(this.isExpired()&&this.reset(),z.url=O,this.requests.length>=this.limit)throw this.logService.info("Too many requests",...this.requests),new h.UserDataSyncStoreError(`Too many requests. Only ${this.limit} requests allowed in ${this.interval/(1e3*60)} minutes.`,O,"LocalTooManyRequests",void 0,void 0);return this.startTime=this.startTime||new Date,this.requests.push(O),this.requestService.request(z,F)}isExpired(){return this.startTime!==void 0&&new Date().getTime()-this.startTime.getTime()>this.interval}reset(){this.requests=[],this.startTime=void 0}}e.RequestsSession=R}),define(se[277],oe([0,1,3,57,25,19,23,272,26,78,81]),function(Z,e,D,i,k,L,T,I,P,w,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataAutoSyncService=void 0;let b=class extends I.UserDataAutoSyncService{constructor(S,f,g,y,l,m,u,h,d,n,o){super(S,f,g,y,l,u,h,d,n,o),this._register(D.Event.debounce(D.Event.any(D.Event.map(m.onDidFocusWindow,()=>"windowFocus"),D.Event.map(m.onDidOpenWindow,()=>"windowOpen")),(t,s)=>t?[...t,s]:[s],1e3)(t=>this.triggerSync(t,!0,!1)))}};b=ve([H(0,k.IProductService),H(1,P.IUserDataSyncStoreManagementService),H(2,P.IUserDataSyncStoreService),H(3,P.IUserDataSyncEnablementService),H(4,P.IUserDataSyncService),H(5,i.INativeHostService),H(6,P.IUserDataSyncLogService),H(7,w.IUserDataSyncAccountService),H(8,T.ITelemetryService),H(9,C.IUserDataSyncMachinesService),H(10,L.IStorageService)],b),e.UserDataAutoSyncService=b}),define(se[278],oe([0,1,100,21,5,22]),function(Z,e,D,i,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createEmptyWorkspaceIdentifier=e.getSingleFolderWorkspaceIdentifier=e.getWorkspaceIdentifier=e.NON_EMPTY_WORKSPACE_ID_LENGTH=void 0,e.NON_EMPTY_WORKSPACE_ID_LENGTH=128/4;function T(w){function C(){let b=w.scheme===i.Schemas.file?(0,L.originalFSPath)(w):w.toString();return k.isLinux||(b=b.toLowerCase()),(0,D.createHash)("md5").update(b).digest("hex")}return{id:C(),configPath:w}}e.getWorkspaceIdentifier=T;function I(w,C){function b(){if(w.scheme!==i.Schemas.file)return(0,D.createHash)("md5").update(w.toString()).digest("hex");if(!C)return;let S;return k.isLinux?S=C.ino:k.isMacintosh?S=C.birthtime.getTime():k.isWindows&&(typeof C.birthtimeMs=="number"?S=Math.floor(C.birthtimeMs):S=C.birthtime.getTime()),(0,D.createHash)("md5").update(w.fsPath).update(S?String(S):"").digest("hex")}const p=b();if(typeof p=="string")return{id:p,uri:w}}e.getSingleFolderWorkspaceIdentifier=I;function P(){return{id:(Date.now()+Math.round(Math.random()*1e3)).toString()}}e.createEmptyWorkspaceIdentifier=P}),define(se[279],oe([0,1,6,9,2,12,28,15,56,8,57,76,116,278]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnusedWorkspaceStorageDataCleaner=void 0;let f=class extends k.Disposable{constructor(y,l,m,u){super(),this.environmentService=y,this.logService=l,this.nativeHostService=m,this.mainProcessService=u,this._register(new D.RunOnceScheduler(()=>{this.cleanUpStorage()},30*1e3)).schedule()}async cleanUpStorage(){this.logService.trace("[storage cleanup]: Starting to clean up workspace storage folders for unused empty workspaces.");try{const y=await T.Promises.readdir(this.environmentService.workspaceStorageHome.fsPath),l=new b.StorageClient(this.mainProcessService.getChannel("storage"));await Promise.all(y.map(async m=>{const u=(0,L.join)(this.environmentService.workspaceStorageHome.fsPath,m);m.length===S.NON_EMPTY_WORKSPACE_ID_LENGTH||m===p.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE.id||(await this.nativeHostService.getWindows()).some(n=>n.workspace?.id===m)||await l.isUsed(u)||(this.logService.trace(`[storage cleanup]: Deleting workspace storage folder ${m} as it seems to be an unused empty workspace.`),await T.Promises.rm(u))}))}catch(y){(0,i.onUnexpectedError)(y)}}};f=ve([H(0,I.INativeEnvironmentService),H(1,w.ILogService),H(2,C.INativeHostService),H(3,P.IMainProcessService)],f),e.UnusedWorkspaceStorageDataCleaner=f}),define(se[125],oe([0,1,52,6,12,14,28,151,288,289]),function(Z,e,D,i,k,L,T,I,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=e.extract=e.zip=e.ExtractError=void 0;class C extends Error{constructor(n,o){let t=o.message;switch(n){case"CorruptZip":t=`Corrupt ZIP: ${t}`;break}super(t),this.type=n,this.cause=o}}e.ExtractError=C;function b(d){const n=d.externalFileAttributes>>16||33188;return[448,56,7].map(o=>n&o).reduce((o,t)=>o+t,n&61440)}function p(d){if(d instanceof C)return d;let n;return/end of central directory record signature not found/.test(d.message)&&(n="CorruptZip"),new C(n,d)}function S(d,n,o,t,s,r){const c=k.dirname(n),a=k.join(t,c);if(!a.startsWith(t))return Promise.reject(new Error(I.localize(0,null,n)));const v=k.join(t,n);let E;return r.onCancellationRequested(()=>{E?.destroy()}),Promise.resolve(T.Promises.mkdir(a,{recursive:!0})).then(()=>new Promise((R,N)=>{if(!r.isCancellationRequested)try{E=(0,D.createWriteStream)(v,{mode:o}),E.once("close",()=>R()),E.once("error",N),d.once("error",N),d.pipe(E)}catch(O){N(O)}}))}function f(d,n,o,t){let s=(0,i.createCancelablePromise)(()=>Promise.resolve()),r=0;return t.onCancellationRequested(()=>{s.cancel(),d.close()}),new Promise((c,a)=>{const v=new i.Sequencer,E=R=>{R.isCancellationRequested||(r++,d.readEntry())};d.once("error",a),d.once("close",()=>s.then(()=>{t.isCancellationRequested||d.entryCount===r?c():a(new C("Incomplete",new Error(I.localize(1,null,r,d.entryCount))))},a)),d.readEntry(),d.on("entry",R=>{if(t.isCancellationRequested)return;if(!o.sourcePathRegex.test(R.fileName)){E(t);return}const N=R.fileName.replace(o.sourcePathRegex,"");if(/\/$/.test(N)){const F=k.join(n,N);s=(0,i.createCancelablePromise)(A=>T.Promises.mkdir(F,{recursive:!0}).then(()=>E(A)).then(void 0,a));return}const O=y(d,R),z=b(R);s=(0,i.createCancelablePromise)(F=>v.queue(()=>O.then(A=>S(A,N,z,n,o,F).then(()=>E(F)))).then(null,a))})})}function g(d,n=!1){return new Promise((o,t)=>{(0,P.open)(d,n?{lazyEntries:!0}:void 0,(s,r)=>{s?t(p(s)):o((0,L.assertIsDefined)(r))})})}function y(d,n){return new Promise((o,t)=>{d.openReadStream(n,(s,r)=>{s?t(p(s)):o((0,L.assertIsDefined)(r))})})}function l(d,n){return new Promise((o,t)=>{const s=new w.ZipFile;n.forEach(c=>{c.contents?s.addBuffer(typeof c.contents=="string"?Buffer.from(c.contents,"utf8"):c.contents,c.path):c.localPath&&s.addFile(c.localPath,c.path)}),s.end();const r=(0,D.createWriteStream)(d);s.outputStream.pipe(r),s.outputStream.once("error",t),r.once("error",t),r.once("finish",()=>o(d))})}e.zip=l;function m(d,n,o={},t){const s=new RegExp(o.sourcePath?`^${o.sourcePath}`:"");let r=g(d,!0);return o.overwrite&&(r=r.then(c=>T.Promises.rm(n).then(()=>c))),r.then(c=>f(c,n,{sourcePathRegex:s},t))}e.extract=m;function u(d,n){return g(d).then(o=>new Promise((t,s)=>{o.on("entry",r=>{r.fileName===n&&y(o,r).then(c=>t(c),c=>s(c))}),o.once("close",()=>s(new Error(I.localize(2,null,n))))}))}function h(d,n){return u(d,n).then(o=>new Promise((t,s)=>{const r=[];o.once("error",s),o.on("data",c=>r.push(c)),o.on("end",()=>t(Buffer.concat(r)))}))}e.buffer=h}),define(se[280],oe([0,1,125,161]),function(Z,e,D,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getManifest=void 0;function k(L){return(0,D.buffer)(L,"extension/package.json").then(T=>{try{return JSON.parse(T.toString("utf8"))}catch{throw new Error((0,i.localize)(0,null))}})}e.getManifest=k}),define(se[126],oe([0,1,6,24,38,9,3,2,37,21,12,5,22,53,14,7,31,28,125,160,97,15,262,29,33,61,79,218,263,280,219,220,42,70,13,4,8,25,23,30,18]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o,t,s,r,c,a,v,E,R,N,O,z,F,A,M,$,V,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InstallGalleryExtensionTask=e.ExtensionsScanner=e.ExtensionManagementService=e.INativeServerExtensionManagementService=void 0,e.INativeServerExtensionManagementService=(0,F.refineServiceDecorator)(o.IExtensionManagementService);let Q=class extends n.AbstractExtensionManagementService{constructor(_,U,x,j,J,re,Y,ie,ne,le,ue,Se){super(_,U,x,le,Se),this.extensionsScannerService=J,this.extensionsProfileScannerService=re,this.downloadService=Y,this.fileService=ne,this.uriIdentityService=ue,this.installGalleryExtensionsTasks=new Map,this.knownDirectories=new P.ResourceSet;const we=this._register(ie.createInstance(a.ExtensionsLifecycle));this.extensionsScanner=this._register(ie.createInstance(W,be=>we.postUninstall(be))),this.manifestCache=this._register(new E.ExtensionsManifestCache(j,this)),this.extensionsDownloader=this._register(ie.createInstance(c.ExtensionsDownloader,this.getTargetPlatform()));const Ee=this._register(new R.ExtensionsWatcher(this,this.extensionsScannerService,Se,re,ue,ne,x));this._register(Ee.onDidChangeExtensionsByAnotherSource(be=>this.onDidChangeExtensionsFromAnotherSource(be))),this.watchForExtensionsNotInstalledBySystem()}getTargetPlatform(){return this._targetPlatformPromise||(this._targetPlatformPromise=(0,t.computeTargetPlatform)(this.fileService,this.logService)),this._targetPlatformPromise}async zip(_){this.logService.trace("ExtensionManagementService#zip",_.identifier.id);const U=await this.collectFiles(_),x=await(0,m.zip)((0,p.joinPath)(this.extensionsDownloader.extensionsDownloadDir,(0,y.generateUuid)()).fsPath,U);return g.URI.file(x)}async unzip(_){return this.logService.trace("ExtensionManagementService#unzip",_.toString()),(await this.install(_)).identifier}async getManifest(_){const{location:U,cleanup:x}=await this.downloadVsix(_),j=C.resolve(U.fsPath);try{return await(0,v.getManifest)(j)}finally{await x()}}getInstalled(_,U){return this.extensionsScanner.scanExtensions(_??null,U)}getAllUserInstalled(){return this.extensionsScanner.scanAllUserExtensions(!1)}async install(_,U={}){this.logService.trace("ExtensionManagementService#install",_.toString());const{location:x,cleanup:j}=await this.downloadVsix(_);try{const J=await(0,v.getManifest)(C.resolve(x.fsPath));if(J.engines&&J.engines.vscode&&!(0,O.isEngineValid)(J.engines.vscode,this.productService.version,this.productService.date))throw new Error(u.localize(0,null,(0,t.getGalleryExtensionId)(J.publisher,J.name),this.productService.version));return await this.installExtension(J,x,U)}finally{await j()}}async installFromLocation(_,U){this.logService.trace("ExtensionManagementService#installFromLocation",_.toString());const x=await this.extensionsScanner.scanUserExtensionAtLocation(_);if(!x)throw new Error(`Cannot find a valid extension from the location ${_.toString()}`);return await this.addExtensionsToProfile([x],U),this.logService.info("Successfully installed extension",x.identifier.id,U.toString()),x}getMetadata(_){return this.extensionsScannerService.scanMetadata(_.location)}async updateMetadata(_,U){this.logService.trace("ExtensionManagementService#updateMetadata",_.identifier.id);const x={...U};return U.isPreReleaseVersion&&(x.preRelease=!0),_=await this.extensionsScanner.updateMetadata(_,x),this.manifestCache.invalidate(),_}async updateExtensionScope(_,U){return this.logService.trace("ExtensionManagementService#updateExtensionScope",_.identifier.id),_=await this.extensionsScanner.updateMetadata(_,{isMachineScoped:U}),this.manifestCache.invalidate(),_}async reinstallFromGallery(_){if(this.logService.trace("ExtensionManagementService#reinstallFromGallery",_.identifier.id),!this.galleryService.isEnabled())throw new Error(u.localize(1,null));const U=await this.getTargetPlatform(),[x]=await this.galleryService.getExtensions([{..._.identifier,preRelease:_.preRelease}],{targetPlatform:U,compatible:!0},i.CancellationToken.None);if(!x)throw new Error(u.localize(2,null));await this.extensionsScanner.setUninstalled(_);try{await this.extensionsScanner.removeUninstalledExtension(_)}catch(j){throw new Error(u.localize(3,null,(0,k.toErrorMessage)(j)))}await this.installFromGallery(x)}markAsUninstalled(..._){return this.extensionsScanner.setUninstalled(..._)}removeUninstalledExtensions(){return this.extensionsScanner.cleanUp()}async download(_,U){const{location:x}=await this.extensionsDownloader.download(_,U);return x}async downloadVsix(_){if(_.scheme===w.Schemas.file)return{location:_,async cleanup(){}};this.logService.trace("Downloading extension from",_.toString());const U=(0,p.joinPath)(this.extensionsDownloader.extensionsDownloadDir,(0,y.generateUuid)());return await this.downloadService.download(_,U),this.logService.info("Downloaded extension to",U.toString()),{location:U,cleanup:async()=>{try{await this.fileService.del(U)}catch(j){this.logService.error(j)}}}}getCurrentExtensionsManifestLocation(){return this.userDataProfilesService.defaultProfile.extensionsResource}createInstallExtensionTask(_,U,x){let j;if(g.URI.isUri(U))j=new ee(_,U,x,this.galleryService,this.extensionsScanner,this.logService);else{const J=t.ExtensionKey.create(U).toString();j=this.installGalleryExtensionsTasks.get(J),j||(this.installGalleryExtensionsTasks.set(J,j=new G(_,U,x,this.extensionsDownloader,this.extensionsScanner,this.logService)),j.waitUntilTaskIsFinished().then(()=>this.installGalleryExtensionsTasks.delete(J)))}return new ae(j,x.profileLocation,this.extensionsProfileScannerService)}createUninstallExtensionTask(_,U){return new K(_,U.profileLocation,this.extensionsProfileScannerService)}async collectFiles(_){const U=async j=>{let J=await l.Promises.readdir(j);J=J.map(ie=>C.join(j,ie));const re=await Promise.all(J.map(ie=>l.Promises.stat(ie)));let Y=Promise.resolve([]);return re.forEach((ie,ne)=>{const le=J[ne];ie.isFile()&&(Y=Y.then(ue=>[...ue,le])),ie.isDirectory()&&(Y=Y.then(ue=>U(le).then(Se=>[...ue,...Se])))}),Y};return(await U(_.location.fsPath)).map(j=>({path:`extension/${C.relative(_.location.fsPath,j)}`,localPath:j}))}async onDidChangeExtensionsFromAnotherSource({added:_,removed:U}){if(U)for(const x of U.extensions)this.logService.info("Extensions removed from another source",x.id,U.profileLocation.toString()),this._onDidUninstallExtension.fire({identifier:x,profileLocation:U.profileLocation});if(_){const j=(await this.extensionsScanner.scanExtensions(1,_.profileLocation)).filter(J=>_.extensions.some(re=>(0,t.areSameExtensions)(re,J.identifier)));this._onDidInstallExtensions.fire(j.map(J=>(this.logService.info("Extensions added from another source",J.identifier.id,_.profileLocation.toString()),{identifier:J.identifier,local:J,profileLocation:_.profileLocation,operation:1})))}}async watchForExtensionsNotInstalledBySystem(){this._register(this.extensionsScanner.onExtract(U=>this.knownDirectories.add(U)));const _=await this.fileService.resolve(this.extensionsScannerService.userExtensionsLocation);for(const U of _.children??[])U.isDirectory&&this.knownDirectories.add(U.resource);this._register(this.fileService.watch(this.extensionsScannerService.userExtensionsLocation)),this._register(this.fileService.onDidFilesChange(U=>this.onDidFilesChange(U)))}async onDidFilesChange(_){const U=[];for(const x of _.rawAdded){if(this.knownDirectories.has(x)||!this.uriIdentityService.extUri.isEqual(this.uriIdentityService.extUri.dirname(x),this.extensionsScannerService.userExtensionsLocation)||this.uriIdentityService.extUri.isEqual(x,this.uriIdentityService.extUri.joinPath(this.extensionsScannerService.userExtensionsLocation,".obsolete"))||this.uriIdentityService.extUri.basename(x).startsWith(".")||!(await this.fileService.stat(x)).isDirectory)continue;const j=await this.extensionsScanner.scanUserExtensionAtLocation(x);j&&j.installedTimestamp===void 0&&(this.knownDirectories.add(x),U.push(j))}U.length&&(await this.addExtensionsToProfile(U,this.userDataProfilesService.defaultProfile.extensionsResource),this.logService.info("Added extensions to default profile from external source",U.map(x=>x.identifier.id)))}async addExtensionsToProfile(_,U){await this.extensionsProfileScannerService.addExtensionsToProfile(_.map(x=>[x,void 0]),U),this._onDidInstallExtensions.fire(_.map(x=>({local:x,identifier:x.identifier,operation:1,profileLocation:U})))}};Q=ve([H(0,o.IExtensionGalleryService),H(1,$.ITelemetryService),H(2,A.ILogService),H(3,d.INativeEnvironmentService),H(4,r.IExtensionsScannerService),H(5,s.IExtensionsProfileScannerService),H(6,h.IDownloadService),H(7,F.IInstantiationService),H(8,z.IFileService),H(9,M.IProductService),H(10,V.IUriIdentityService),H(11,B.IUserDataProfilesService)],Q),e.ExtensionManagementService=Q;let W=class extends I.Disposable{constructor(_,U,x,j){super(),this.beforeRemovingExtension=_,this.fileService=U,this.extensionsScannerService=x,this.logService=j,this._onExtract=this._register(new T.Emitter),this.onExtract=this._onExtract.event,this.uninstalledPath=(0,p.joinPath)(this.extensionsScannerService.userExtensionsLocation,".obsolete").fsPath,this.uninstalledFileLimiter=new D.Queue}async cleanUp(){await this.removeUninstalledExtensions()}async scanExtensions(_,U){await this.extensionsScannerService.initializeDefaultProfileExtensions();const x={includeInvalid:!0,profileLocation:U};let j=[];return _===null||_===0?j.push(...await this.extensionsScannerService.scanAllExtensions({includeInvalid:!0},x,!1)):_===1&&j.push(...await this.extensionsScannerService.scanUserExtensions(x)),j=_!==null?j.filter(J=>J.type===_):j,Promise.all(j.map(J=>this.toLocalExtension(J)))}async scanAllUserExtensions(_){const U=await this.extensionsScannerService.scanUserExtensions({includeAllVersions:!_,includeInvalid:!0});return Promise.all(U.map(x=>this.toLocalExtension(x)))}async scanUserExtensionAtLocation(_){try{const U=await this.extensionsScannerService.scanExistingExtension(_,1,{includeInvalid:!0});if(U)return await this.toLocalExtension(U)}catch(U){this.logService.error(U)}return null}async extractUserExtension(_,U,x,j){await this.extensionsScannerService.initializeDefaultProfileExtensions();const J=_.toString(),re=C.join(this.extensionsScannerService.userExtensionsLocation.fsPath,`.${(0,y.generateUuid)()}`),Y=C.join(this.extensionsScannerService.userExtensionsLocation.fsPath,J);try{await l.Promises.rm(Y)}catch{throw new o.ExtensionManagementError(u.localize(4,null,Y,_.id),o.ExtensionManagementErrorCode.Delete)}await this.extractAtLocation(_,U,re,j),await this.extensionsScannerService.updateMetadata(g.URI.file(re),x);try{this._onExtract.fire(g.URI.file(Y)),await this.rename(_,re,Y,Date.now()+2*60*1e3),this.logService.info("Renamed to",Y)}catch(ie){try{await l.Promises.rm(re)}catch{}if(ie.code==="ENOTEMPTY")this.logService.info("Rename failed because extension was installed by another source. So ignoring renaming.",_.id);else throw this.logService.info(`Rename failed because of ${(0,L.getErrorMessage)(ie)}. Deleted from extracted location`,re),ie}return this.scanLocalExtension(g.URI.file(Y),1)}async updateMetadata(_,U){return await this.extensionsScannerService.updateMetadata(_.location,U),this.scanLocalExtension(_.location,_.type)}getUninstalledExtensions(){return this.withUninstalledExtensions()}async setUninstalled(..._){const U=_.map(x=>t.ExtensionKey.create(x));await this.withUninstalledExtensions(x=>U.forEach(j=>{x[j.toString()]=!0,this.logService.info("Marked extension as uninstalled",j.toString())}))}async setInstalled(_){await this.withUninstalledExtensions(j=>delete j[_.toString()]);const x=(await this.scanAllUserExtensions(!0)).find(j=>t.ExtensionKey.create(j).equals(_))||null;return x?this.updateMetadata(x,{installedTimestamp:Date.now()}):null}async removeExtension(_,U){this.logService.trace(`Deleting ${U} extension from disk`,_.identifier.id,_.location.fsPath),await l.Promises.rm(_.location.fsPath),this.logService.info("Deleted from disk",_.identifier.id,_.location.fsPath)}async removeUninstalledExtension(_){await this.removeExtension(_,"uninstalled"),await this.withUninstalledExtensions(U=>delete U[t.ExtensionKey.create(_).toString()])}async withUninstalledExtensions(_){return this.uninstalledFileLimiter.queue(async()=>{let U;try{U=await l.Promises.readFile(this.uninstalledPath,"utf8")}catch(j){if(j.code!=="ENOENT")throw j}let x={};if(U)try{x=JSON.parse(U)}catch{}return _&&(_(x),Object.keys(x).length?await l.Promises.writeFile(this.uninstalledPath,JSON.stringify(x)):await l.Promises.rm(this.uninstalledPath)),x})}async extractAtLocation(_,U,x,j){this.logService.trace(`Started extracting the extension from ${U} to ${x}`);try{await l.Promises.rm(x)}catch(J){throw new o.ExtensionManagementError(this.joinErrors(J).message,o.ExtensionManagementErrorCode.Delete)}try{await(0,m.extract)(U,x,{sourcePath:"extension",overwrite:!0},j),this.logService.info(`Extracted extension to ${x}:`,_.id)}catch(J){try{await l.Promises.rm(x)}catch{}let re=o.ExtensionManagementErrorCode.Extract;throw J instanceof m.ExtractError&&(J.type==="CorruptZip"?re=o.ExtensionManagementErrorCode.CorruptZip:J.type==="Incomplete"&&(re=o.ExtensionManagementErrorCode.IncompleteZip)),new o.ExtensionManagementError(J.message,re)}}async rename(_,U,x,j){try{await l.Promises.rename(U,x)}catch(J){if(b.isWindows&&J&&J.code==="EPERM"&&Date.now()<j)return this.logService.info(`Failed renaming ${U} to ${x} with 'EPERM' error. Trying again...`,_.id),this.rename(_,U,x,j);throw new o.ExtensionManagementError(J.message||u.localize(5,null,U,x),J.code||o.ExtensionManagementErrorCode.Rename)}}async scanLocalExtension(_,U){const x=await this.extensionsScannerService.scanExistingExtension(_,U,{includeInvalid:!0});if(x)return this.toLocalExtension(x);throw new Error(u.localize(6,null,_.path))}async toLocalExtension(_){const U=await this.fileService.resolve(_.location);let x,j;return U.children&&(x=U.children.find(({name:J})=>/^readme(\.txt|\.md|)$/i.test(J))?.resource,j=U.children.find(({name:J})=>/^changelog(\.txt|\.md|)$/i.test(J))?.resource),{identifier:_.identifier,type:_.type,isBuiltin:_.isBuiltin||!!_.metadata?.isBuiltin,location:_.location,manifest:_.manifest,targetPlatform:_.targetPlatform,validations:_.validations,isValid:_.isValid,readmeUrl:x,changelogUrl:j,publisherDisplayName:_.metadata?.publisherDisplayName||null,publisherId:_.metadata?.publisherId||null,isApplicationScoped:!!_.metadata?.isApplicationScoped,isMachineScoped:!!_.metadata?.isMachineScoped,isPreReleaseVersion:!!_.metadata?.isPreReleaseVersion,preRelease:!!_.metadata?.preRelease,installedTimestamp:_.metadata?.installedTimestamp,updated:!!_.metadata?.updated}}async removeUninstalledExtensions(){const _=await this.getUninstalledExtensions(),U=await this.extensionsScannerService.scanUserExtensions({includeAllVersions:!0,includeUninstalled:!0,includeInvalid:!0}),x=new Set;for(const re of U)_[t.ExtensionKey.create(re).toString()]||x.add(re.identifier.id.toLowerCase());const j=(0,t.groupByExtension)(U,re=>re.identifier);await D.Promises.settled(j.map(async re=>{const Y=re.sort((ie,ne)=>S.rcompare(ie.manifest.version,ne.manifest.version))[0];x.has(Y.identifier.id.toLowerCase())||await this.beforeRemovingExtension(await this.toLocalExtension(Y))}));const J=U.filter(re=>re.metadata&&_[t.ExtensionKey.create(re).toString()]);await D.Promises.settled(J.map(re=>this.removeUninstalledExtension(re)))}joinErrors(_){const U=Array.isArray(_)?_:[_];return U.length===1?U[0]instanceof Error?U[0]:new Error(U[0]):U.reduce((x,j)=>new Error(`${x.message}${x.message?",":""}${j instanceof Error?j.message:j}`),new Error(""))}};W=ve([H(1,z.IFileService),H(2,r.IExtensionsScannerService),H(3,A.ILogService)],W),e.ExtensionsScanner=W;class q extends n.AbstractExtensionTask{get operation(){return(0,f.isUndefined)(this.options.operation)?this._operation:this.options.operation}constructor(_,U,x,j,J){super(),this.identifier=_,this.source=U,this.options=x,this.extensionsScanner=j,this.logService=J,this.wasVerified=!1,this._operation=2}async installExtension(_,U){try{const x=await this.unsetUninstalledAndGetLocal(_.key);if(x)return this.extensionsScanner.updateMetadata(x,_.metadata)}catch{throw b.isMacintosh?new o.ExtensionManagementError(u.localize(7,null),o.ExtensionManagementErrorCode.Internal):new o.ExtensionManagementError(u.localize(8,null),o.ExtensionManagementErrorCode.Internal)}return this.extract(_,U)}async unsetUninstalledAndGetLocal(_){if(!await this.isUninstalled(_))return null;this.logService.trace("Removing the extension from uninstalled list:",_.id);const x=await this.extensionsScanner.setInstalled(_);return this.logService.info("Removed the extension from uninstalled list:",_.id),x}async isUninstalled(_){return!!(await this.extensionsScanner.getUninstalledExtensions())[_.toString()]}async extract({zipPath:_,key:U,metadata:x},j){const J=await this.extensionsScanner.extractUserExtension(U,_,x,j);return this.logService.info("Extracting completed.",U.id),J}}class G extends q{constructor(_,U,x,j,J,re){super(U.identifier,U,x,J,re),this.manifest=_,this.gallery=U,this.extensionsDownloader=j}async doRun(_){const x=(await this.extensionsScanner.scanExtensions(null,void 0)).find(Y=>(0,t.areSameExtensions)(Y.identifier,this.gallery.identifier));x&&(this._operation=3);const j={id:this.gallery.identifier.uuid,publisherId:this.gallery.publisherId,publisherDisplayName:this.gallery.publisherDisplayName,targetPlatform:this.gallery.properties.targetPlatform,isApplicationScoped:(0,N.isApplicationScopedExtension)(this.manifest),isMachineScoped:this.options.isMachineScoped||x?.isMachineScoped,isBuiltin:this.options.isBuiltin||x?.isBuiltin,isSystem:x?.type===0?!0:void 0,updated:!!x,isPreReleaseVersion:this.gallery.properties.isPreReleaseVersion,installedTimestamp:Date.now(),preRelease:this.gallery.properties.isPreReleaseVersion||((0,f.isBoolean)(this.options.installPreReleaseVersion)?this.options.installPreReleaseVersion:x?.preRelease)};if(x?.manifest.version===this.gallery.version)return{local:await this.extensionsScanner.updateMetadata(x,j),metadata:j};const{location:J,verified:re}=await this.extensionsDownloader.download(this.gallery,this._operation);try{return this.wasVerified=!!re,this.validateManifest(J.fsPath),{local:await this.installExtension({zipPath:J.fsPath,key:t.ExtensionKey.create(this.gallery),metadata:j},_),metadata:j}}catch(Y){try{await this.extensionsDownloader.delete(J)}catch(ie){this.logService.warn("Error while deleting the downloaded file",J.toString(),(0,L.getErrorMessage)(ie))}throw Y}}async validateManifest(_){try{await(0,v.getManifest)(_)}catch(U){throw new o.ExtensionManagementError((0,n.joinErrors)(U).message,o.ExtensionManagementErrorCode.Invalid)}}}e.InstallGalleryExtensionTask=G;class ee extends q{constructor(_,U,x,j,J,re){super({id:(0,t.getGalleryExtensionId)(_.publisher,_.name)},U,x,J,re),this.manifest=_,this.location=U,this.galleryService=j}async doRun(_){const U=new t.ExtensionKey(this.identifier,this.manifest.version),j=(await this.extensionsScanner.scanExtensions(1,void 0)).find(Y=>(0,t.areSameExtensions)(this.identifier,Y.identifier)),J=await this.getMetadata(this.identifier.id,this.manifest.version,_);if(J.isApplicationScoped=(0,N.isApplicationScopedExtension)(this.manifest),J.isMachineScoped=this.options.isMachineScoped||j?.isMachineScoped,J.isBuiltin=this.options.isBuiltin||j?.isBuiltin,J.installedTimestamp=Date.now(),j)if(this._operation=3,U.equals(new t.ExtensionKey(j.identifier,j.manifest.version)))try{await this.extensionsScanner.removeExtension(j,"existing")}catch{throw new Error(u.localize(9,null,this.manifest.displayName||this.manifest.name))}else!this.options.profileLocation&&S.gt(j.manifest.version,this.manifest.version)&&await this.extensionsScanner.setUninstalled(j);else{const Y=await this.unsetUninstalledAndGetLocal(U);if(Y)try{await this.extensionsScanner.removeExtension(Y,"existing")}catch{throw new Error(u.localize(10,null,this.manifest.displayName||this.manifest.name))}}return{local:await this.installExtension({zipPath:C.resolve(this.location.fsPath),key:U,metadata:J},_),metadata:J}}async getMetadata(_,U,x){try{let[j]=await this.galleryService.getExtensions([{id:_,version:U}],x);if(j||([j]=await this.galleryService.getExtensions([{id:_}],x)),j)return{id:j.identifier.uuid,publisherDisplayName:j.publisherDisplayName,publisherId:j.publisherId,isPreReleaseVersion:j.properties.isPreReleaseVersion,preRelease:j.properties.isPreReleaseVersion||this.options.installPreReleaseVersion}}catch{}return{}}}class ae{constructor(_,U,x){this.task=_,this.profileLocation=U,this.extensionsProfileScannerService=x,this.identifier=this.task.identifier,this.source=this.task.source,this.operation=this.task.operation,this.promise=this.waitAndAddExtensionToProfile()}async waitAndAddExtensionToProfile(){const _=await this.task.waitUntilTaskIsFinished();return await this.extensionsProfileScannerService.addExtensionsToProfile([[_.local,_.metadata]],this.profileLocation),_}async run(){return await this.task.run(),this.promise}waitUntilTaskIsFinished(){return this.promise}cancel(){return this.task.cancel()}}class K extends n.AbstractExtensionTask{constructor(_,U,x){super(),this.extension=_,this.profileLocation=U,this.extensionsProfileScannerService=x}async doRun(_){await this.extensionsProfileScannerService.removeExtensionFromProfile(this.extension,this.profileLocation)}}}),define(se[281],oe([0,1,2,29,80,217,126,8,19]),function(Z,e,D,i,k,L,T,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsContributions=void 0;let w=class extends D.Disposable{constructor(b,p,S,f,g,y){super(),b.removeUninstalledExtensions(),(0,L.migrateUnsupportedExtensions)(b,p,S,f,y),k.ExtensionStorageService.removeOutdatedExtensionVersions(b,g)}};w=ve([H(0,T.INativeServerExtensionManagementService),H(1,i.IExtensionGalleryService),H(2,k.IExtensionStorageService),H(3,i.IGlobalExtensionEnablementService),H(4,P.IStorageService),H(5,I.ILogService)],w),e.ExtensionsContributions=w}),define(se[290],oe([0,1,93,34,38,9,2,21,22,7,39,149,209,210,202,203,279,191,194,16,215,96,234,97,226,15,231,117,265,29,98,193,266,126,99,189,13,205,207,54,4,200,72,201,56,73,221,8,103,57,104,25,59,19,267,109,23,110,111,112,50,239,113,241,247,80,115,26,78,270,258,259,81,271,274,275,276,277,269,62,260,108,233,77,249,223,248,107,230,30,250,5,251,195,213,212,79,264,18,61,208,58,268,228,238,261,235,106,102,273,281]),function(Z,e,D,i,k,L,T,I,P,w,C,b,p,S,f,g,y,l,m,u,h,d,n,o,t,s,r,c,a,v,E,R,N,O,z,F,A,M,$,V,B,Q,W,q,G,ee,ae,K,X,_,U,x,j,J,re,Y,ie,ne,le,ue,Se,we,Ee,be,Oe,Ne,Ge,We,ce,fe,ge,Ce,Ie,Le,Re,Fe,Ae,Me,ze,ke,_e,te,he,de,me,pe,Pe,De,Be,$e,Te,qe,Ve,et,ot,pt,Lt,Tt,yt,wt,At,Et,_t,Ot,Ut,Mt,Nt,bt,Ct,Ft,$t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;class Wt extends T.Disposable{constructor(ye){super(),this.configuration=ye,this.server=this._register(new b.Server),this.sharedProcessWorkerService=void 0,this.lifecycleService=void 0,this.registerListeners()}registerListeners(){const ye=async()=>{this.lifecycleService&&(await this.lifecycleService.fireOnWillShutdown(),this.lifecycleService.dispose(),this.lifecycleService=void 0),this.dispose()};process.once("exit",ye),D.ipcRenderer.once("vscode:electron-main->shared-process=exit",ye);const Ue="vscode:electron-main->shared-process=disposeWorker",je=(Ke,tt)=>{this.onDisposeWorker(tt)};D.ipcRenderer.on(Ue,je),this._register((0,T.toDisposable)(()=>D.ipcRenderer.removeListener(Ue,je)))}onDisposeWorker(ye){this.sharedProcessWorkerService?.disposeWorker(ye)}async open(){const ye=await this.initServices();(0,We.registerConfiguration)(),ye.invokeFunction(Ue=>{const je=Ue.get(K.ILogService);je.trace("sharedProcess configuration",JSON.stringify(this.configuration)),this.initChannels(Ue),this.registerErrorHandler(je)}),this._register((0,T.combinedDisposable)(ye.createInstance(p.CodeCacheCleaner,this.configuration.codeCachePath),ye.createInstance(S.LanguagePackCachedDataCleaner),ye.createInstance(y.UnusedWorkspaceStorageDataCleaner),ye.createInstance(g.LogsDataCleaner),ye.createInstance(f.LocalizationsUpdater),ye.createInstance($t.ExtensionsContributions),ye.createInstance(Mt.UserDataProfilesCleaner)))}async initServices(){const ye=new W.ServiceCollection,Ue={_serviceBrand:void 0,...U.default};ye.set(x.IProductService,Ue);const je=new C.StaticRouter(Xe=>Xe==="main"),Ke=new q.MessagePortMainProcessService(this.server,je);ye.set(G.IMainProcessService,Ke);const tt=this.configuration.policiesData?new At.PolicyChannelClient(this.configuration.policiesData,Ke.getChannel("policy")):new Et.NullPolicyService;ye.set(Et.IPolicyService,tt);const He=new r.SharedProcessEnvironmentService(this.configuration.args,Ue);ye.set(s.INativeEnvironmentService,He);const lt=new X.LogLevelChannelClient(this.server.getChannel("logLevel",je)),it=new X.LoggerChannelClient(this.configuration.logLevel,lt.onDidChangeLogLevel,Ke.getChannel("logger"));ye.set(K.ILoggerService,it);const ht=this._register(new K.MultiplexLogService([this._register(new K.ConsoleLogger(this.configuration.logLevel)),this._register(it.createLogger((0,P.joinPath)(w.URI.file(He.logsPath),"sharedprocess.log"),{name:"sharedprocess"}))])),Ye=this._register(new X.FollowerLogService(lt,ht));ye.set(K.ILogService,Ye),this.lifecycleService=new Ct.SharedProcessLifecycleService(Ye),ye.set(Ct.ISharedProcessLifecycleService,this.lifecycleService),this.sharedProcessWorkerService=new Be.SharedProcessWorkerService(Ye),ye.set(De.ISharedProcessWorkerService,this.sharedProcessWorkerService);const Ze=this._register(new M.FileService(Ye));ye.set(A.IFileService,Ze);const dt=this._register(new $.DiskFileSystemProvider(Ye));Ze.registerProvider(I.Schemas.file,dt);const ft=this._register(new Ve.FileUserDataProvider(I.Schemas.file,this._register(new et.DiskFileSystemProviderClient(Ke.getChannel(et.LOCAL_FILE_SYSTEM_CHANNEL_NAME),{pathCaseSensitive:qe.isLinux})),I.Schemas.vscodeUserData,Ye));Ze.registerProvider(I.Schemas.vscodeUserData,ft);const nt=this._register(new _t.UserDataProfilesNativeService(this.configuration.profiles,Ke,He));ye.set(yt.IUserDataProfilesService,nt);const Je=this._register(new h.ConfigurationService(nt.defaultProfile.settingsResource,Ze,tt,Ye));ye.set(u.IConfigurationService,Je);const at=new re.NativeStorageService(void 0,{defaultProfile:nt.defaultProfile,currentProfile:nt.defaultProfile},Ke,He);ye.set(J.IStorageService,at),this._register((0,T.toDisposable)(()=>at.flush())),await Promise.all([Je.initialize(),at.initialize()]),ye.set($e.IUriIdentityService,new Te.UriIdentityService(Ze)),ye.set(j.IRequestService,new Ot.SharedProcessRequestService(Ke,Je,Ue,Ye)),ye.set(l.IChecksumService,new V.SyncDescriptor(m.ChecksumService,void 0,!1)),ye.set(pt.IV8InspectProfilingService,new V.SyncDescriptor(ot.InspectProfilingService,void 0,!1));const ut=C.ProxyChannel.toService(Ke.getChannel("nativeHost"),{context:this.configuration.windowId});ye.set(_.INativeHostService,ut),ye.set(o.IDownloadService,new V.SyncDescriptor(t.DownloadService,void 0,!0));const gt=this._register(new _e.ActiveWindowManager(ut)),mt=new C.StaticRouter(Xe=>gt.getActiveClientId().then(vt=>Xe===vt));ye.set(z.IExtensionRecommendationNotificationService,new F.ExtensionRecommendationNotificationServiceChannelClient(this.server.getChannel("extensionRecommendationNotification",mt)));let rt;const ct=[],It=(0,Se.isInternalTelemetry)(Ue,Je);if((0,Se.supportsTelemetry)(Ue,He)){const Xe=new le.TelemetryLogAppender(it,He);ct.push(Xe);const{installSourcePath:vt}=He;if(Ue.aiConfig?.ariaKey){const Rt=new Ut.OneDataSystemAppender(It,"monacoworkbench",null,Ue.aiConfig.ariaKey);this._register((0,T.toDisposable)(()=>Rt.flush())),ct.push(Rt)}rt=new ue.TelemetryService({appenders:ct,commonProperties:(0,Y.resolveCommonProperties)(Ze,(0,i.release)(),(0,i.hostname)(),process.arch,Ue.commit,Ue.version,this.configuration.machineId,It,vt),sendErrorTelemetry:!0,piiPaths:(0,Se.getPiiPathsFromEnvironment)(He)},Je,Ue)}else{rt=Se.NullTelemetryService;const Xe=Se.NullAppender;ct.push(Xe)}this.server.registerChannel("telemetryAppender",new ne.TelemetryAppenderChannel(ct)),ye.set(ie.ITelemetryService,rt);const qt=new we.CustomEndpointTelemetryService(Je,rt,it,He,Ue);ye.set(ie.ICustomEndpointTelemetryService,qt),ye.set(wt.IExtensionsProfileScannerService,new V.SyncDescriptor(wt.ExtensionsProfileScannerService,void 0,!0)),ye.set(Lt.IExtensionsScannerService,new V.SyncDescriptor(Tt.ExtensionsScannerService,void 0,!0)),ye.set(E.IExtensionSignatureVerificationService,new V.SyncDescriptor(E.ExtensionSignatureVerificationService,void 0,!0)),ye.set(O.INativeServerExtensionManagementService,new V.SyncDescriptor(O.ExtensionManagementService,void 0,!0)),ye.set(v.IExtensionGalleryService,new V.SyncDescriptor(a.ExtensionGalleryService,void 0,!0)),ye.set(v.IExtensionTipsService,new V.SyncDescriptor(N.ExtensionTipsService,void 0,!1)),ye.set(ee.ILanguagePackService,new V.SyncDescriptor(ae.NativeLanguagePackService,void 0,!1)),ye.set(d.IDiagnosticsService,new V.SyncDescriptor(n.DiagnosticsService,void 0,!1)),ye.set(ce.IUserDataSyncAccountService,new V.SyncDescriptor(ce.UserDataSyncAccountService,void 0,!0)),ye.set(We.IUserDataSyncLogService,new V.SyncDescriptor(Ce.UserDataSyncLogService,void 0,!0)),ye.set(We.IUserDataSyncUtilService,new ge.UserDataSyncUtilServiceClient(this.server.getChannel("userDataSyncUtil",Xe=>Xe.ctx!=="main"))),ye.set(v.IGlobalExtensionEnablementService,new V.SyncDescriptor(c.GlobalExtensionEnablementService,void 0,!1)),ye.set(Ge.IIgnoredExtensionsManagementService,new V.SyncDescriptor(Ge.IgnoredExtensionsManagementService,void 0,!0)),ye.set(Ne.IExtensionStorageService,new V.SyncDescriptor(Ne.ExtensionStorageService)),ye.set(We.IUserDataSyncStoreManagementService,new V.SyncDescriptor(Ae.UserDataSyncStoreManagementService,void 0,!0)),ye.set(We.IUserDataSyncStoreService,new V.SyncDescriptor(Ae.UserDataSyncStoreService,void 0,!0)),ye.set(Ie.IUserDataSyncMachinesService,new V.SyncDescriptor(Ie.UserDataSyncMachinesService,void 0,!0)),ye.set(We.IUserDataSyncBackupStoreService,new V.SyncDescriptor(fe.UserDataSyncBackupStoreService,void 0,!1)),ye.set(We.IUserDataSyncEnablementService,new V.SyncDescriptor(Le.UserDataSyncEnablementService,void 0,!0)),ye.set(We.IUserDataSyncService,new V.SyncDescriptor(Re.UserDataSyncService,void 0,!1)),ye.set(ke.IUserDataProfileStorageService,new V.SyncDescriptor(ze.UserDataProfileStorageService,void 0,!0)),ye.set(We.IUserDataSyncResourceProviderService,new V.SyncDescriptor(Ft.UserDataSyncResourceProviderService,void 0,!0));const Dt=new Oe.PtyHostService({graceTime:6e4,shortGraceTime:6e3,scrollback:Je.getValue("terminal.integrated.persistentSessionScrollback")??100},Je,He,Ye);return Dt.initialize(),ye.set(be.ILocalPtyService,this._register(Dt)),ye.set(te.ISignService,new V.SyncDescriptor(he.SignService,void 0,!1)),ye.set(de.ISharedTunnelsService,new V.SyncDescriptor(me.SharedTunnelsService)),ye.set(pe.ISharedProcessTunnelService,new V.SyncDescriptor(Pe.SharedProcessTunnelService)),ye.set(bt.IRemoteTunnelService,new V.SyncDescriptor(Nt.RemoteTunnelService)),new Q.InstantiationService(ye)}initChannels(ye){const Ue=new X.LogLevelChannel(ye.get(K.ILogService),ye.get(K.ILoggerService));this.server.registerChannel("logLevel",Ue);const je=new R.ExtensionManagementChannel(ye.get(v.IExtensionManagementService),()=>null);this.server.registerChannel("extensions",je);const Ke=C.ProxyChannel.fromService(ye.get(ee.ILanguagePackService));this.server.registerChannel("languagePacks",Ke);const tt=C.ProxyChannel.fromService(ye.get(d.IDiagnosticsService));this.server.registerChannel("diagnostics",tt);const He=new R.ExtensionTipsChannel(ye.get(v.IExtensionTipsService));this.server.registerChannel("extensionTipsService",He);const lt=C.ProxyChannel.fromService(ye.get(l.IChecksumService));this.server.registerChannel("checksum",lt);const it=C.ProxyChannel.fromService(ye.get(pt.IV8InspectProfilingService));this.server.registerChannel("v8InspectProfiling",it);const ht=new ge.UserDataSyncMachinesServiceChannel(ye.get(Ie.IUserDataSyncMachinesService));this.server.registerChannel("userDataSyncMachines",ht);const Ye=C.ProxyChannel.fromService(ye.get(ie.ICustomEndpointTelemetryService));this.server.registerChannel("customEndpointTelemetry",Ye);const Ze=new ge.UserDataSyncAccountServiceChannel(ye.get(ce.IUserDataSyncAccountService));this.server.registerChannel("userDataSyncAccount",Ze);const dt=new ge.UserDataSyncStoreManagementServiceChannel(ye.get(We.IUserDataSyncStoreManagementService));this.server.registerChannel("userDataSyncStoreManagement",dt);const ft=new Fe.UserDataSyncChannel(ye.get(We.IUserDataSyncService),ye.get(yt.IUserDataProfilesService),ye.get(K.ILogService));this.server.registerChannel("userDataSync",ft);const nt=this._register(ye.get(B.IInstantiationService).createInstance(Me.UserDataAutoSyncService)),Je=new ge.UserDataAutoSyncChannel(nt);this.server.registerChannel("userDataAutoSync",Je);const at=ye.get(be.ILocalPtyService),ut=C.ProxyChannel.fromService(at);this.server.registerChannel(Ee.TerminalIpcChannels.LocalPty,ut);const gt=C.ProxyChannel.fromService(ye.get(pe.ISharedProcessTunnelService));this.server.registerChannel(pe.ipcSharedProcessTunnelChannelName,gt);const mt=C.ProxyChannel.fromService(ye.get(De.ISharedProcessWorkerService));this.server.registerChannel(De.ipcSharedProcessWorkerChannelName,mt);const rt=C.ProxyChannel.fromService(ye.get(bt.IRemoteTunnelService));this.server.registerChannel("remoteTunnel",rt)}registerErrorHandler(ye){window.addEventListener("unhandledrejection",Ue=>{(0,L.onUnexpectedError)(Ue.reason),Ue.preventDefault()}),(0,L.setUnexpectedErrorHandler)(Ue=>{const je=(0,k.toErrorMessage)(Ue,!0);!je||ye.error(`[uncaught exception in sharedProcess]: ${je}`)})}}async function zt(Pt){const ye=new Wt(Pt);D.ipcRenderer.send("vscode:shared-process->electron-main=ipc-ready"),await ye.open(),D.ipcRenderer.send("vscode:shared-process->electron-main=init-done")}e.main=zt})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/d2c422ca15f1fbc976eed3e02e3392bbb39c5824/core/vs\code\electron-browser\sharedProcess\sharedProcessMain.js.map
