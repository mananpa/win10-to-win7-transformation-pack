/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/errors","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],D=0,z=te.length;D<z;D++)e[D]=ne[te[D]];return e};define(ne[12],ie([0,1]),function(te,e){"use strict";var D,z,W;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function y(d,r,s){let l=d.get(r);return l===void 0&&(l=s,d.set(r,l)),l}e.getOrSet=y;function A(d){const r=[];return d.forEach((s,l)=>{r.push(`${l} => ${s}`)}),`Map(${d.size}) {${r.join(", ")}}`}e.mapToString=A;function j(d){const r=[];return d.forEach(s=>{r.push(s)}),`Set(${d.size}) {${r.join(", ")}}`}e.setToString=j;class P{constructor(r,s){this.uri=r,this.value=s}}class _{constructor(r,s){this[D]="ResourceMap",r instanceof _?(this.map=new Map(r.map),this.toKey=s??_.defaultToKey):(this.map=new Map,this.toKey=r??_.defaultToKey)}set(r,s){return this.map.set(this.toKey(r),new P(r,s)),this}get(r){return this.map.get(this.toKey(r))?.value}has(r){return this.map.has(this.toKey(r))}get size(){return this.map.size}clear(){this.map.clear()}delete(r){return this.map.delete(this.toKey(r))}forEach(r,s){typeof s<"u"&&(r=r.bind(s));for(const[l,t]of this.map)r(t.value,t.uri,this)}*values(){for(const r of this.map.values())yield r.value}*keys(){for(const r of this.map.values())yield r.uri}*entries(){for(const r of this.map.values())yield[r.uri,r.value]}*[(D=Symbol.toStringTag,Symbol.iterator)](){for(const[,r]of this.map)yield[r.uri,r.value]}}e.ResourceMap=_,_.defaultToKey=d=>d.toString();class w{constructor(r,s){this[z]="ResourceSet",!r||typeof r=="function"?this._map=new _(r):(this._map=new _(s),r.forEach(this.add,this))}get size(){return this._map.size}add(r){return this._map.set(r,r),this}clear(){this._map.clear()}delete(r){return this._map.delete(r)}forEach(r,s){this._map.forEach((l,t)=>r.call(s,t,t,this))}has(r){return this._map.has(r)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(z=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=w;var R;(function(d){d[d.None=0]="None",d[d.AsOld=1]="AsOld",d[d.AsNew=2]="AsNew"})(R=e.Touch||(e.Touch={}));class m{constructor(){this[W]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(r){return this._map.has(r)}get(r,s=0){const l=this._map.get(r);if(!!l)return s!==0&&this.touch(l,s),l.value}set(r,s,l=0){let t=this._map.get(r);if(t)t.value=s,l!==0&&this.touch(t,l);else{switch(t={key:r,value:s,next:void 0,previous:void 0},l){case 0:this.addItemLast(t);break;case 1:this.addItemFirst(t);break;case 2:this.addItemLast(t);break;default:this.addItemLast(t);break}this._map.set(r,t),this._size++}return this}delete(r){return!!this.remove(r)}remove(r){const s=this._map.get(r);if(!!s)return this._map.delete(r),this.removeItem(s),this._size--,s.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const r=this._head;return this._map.delete(r.key),this.removeItem(r),this._size--,r.value}forEach(r,s){const l=this._state;let t=this._head;for(;t;){if(s?r.bind(s)(t.value,t.key,this):r(t.value,t.key,this),this._state!==l)throw new Error("LinkedMap got modified during iteration.");t=t.next}}keys(){const r=this,s=this._state;let l=this._head;const t={[Symbol.iterator](){return t},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:l.key,done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return t}values(){const r=this,s=this._state;let l=this._head;const t={[Symbol.iterator](){return t},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:l.value,done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return t}entries(){const r=this,s=this._state;let l=this._head;const t={[Symbol.iterator](){return t},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:[l.key,l.value],done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return t}[(W=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(r){if(r>=this.size)return;if(r===0){this.clear();return}let s=this._head,l=this.size;for(;s&&l>r;)this._map.delete(s.key),s=s.next,l--;this._head=s,this._size=l,s&&(s.previous=void 0),this._state++}addItemFirst(r){if(!this._head&&!this._tail)this._tail=r;else if(this._head)r.next=this._head,this._head.previous=r;else throw new Error("Invalid list");this._head=r,this._state++}addItemLast(r){if(!this._head&&!this._tail)this._head=r;else if(this._tail)r.previous=this._tail,this._tail.next=r;else throw new Error("Invalid list");this._tail=r,this._state++}removeItem(r){if(r===this._head&&r===this._tail)this._head=void 0,this._tail=void 0;else if(r===this._head){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this._head=r.next}else if(r===this._tail){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this._tail=r.previous}else{const s=r.next,l=r.previous;if(!s||!l)throw new Error("Invalid list");s.previous=l,l.next=s}r.next=void 0,r.previous=void 0,this._state++}touch(r,s){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(s!==1&&s!==2)){if(s===1){if(r===this._head)return;const l=r.next,t=r.previous;r===this._tail?(t.next=void 0,this._tail=t):(l.previous=t,t.next=l),r.previous=void 0,r.next=this._head,this._head.previous=r,this._head=r,this._state++}else if(s===2){if(r===this._tail)return;const l=r.next,t=r.previous;r===this._head?(l.previous=void 0,this._head=l):(l.previous=t,t.next=l),r.next=void 0,r.previous=this._tail,this._tail.next=r,this._tail=r,this._state++}}}toJSON(){const r=[];return this.forEach((s,l)=>{r.push([l,s])}),r}fromJSON(r){this.clear();for(const[s,l]of r)this.set(s,l)}}e.LinkedMap=m;class S extends m{constructor(r,s=1){super(),this._limit=r,this._ratio=Math.min(Math.max(0,s),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,s=2){return super.get(r,s)}peek(r){return super.get(r,0)}set(r,s){return super.set(r,s,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=S}),define(ne[13],ie([0,1,14,6]),function(te,e,D,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function W(n){const o=n;return o?typeof o.read=="function":!1}e.isReadable=W;function y(n){const o=n;return o?[o.on,o.pause,o.resume,o.destroy].every(f=>typeof f=="function"):!1}e.isReadableStream=y;function A(n){const o=n;return o?y(o.stream)&&Array.isArray(o.buffer)&&typeof o.ended=="boolean":!1}e.isReadableBufferedStream=A;function j(n,o){return new P(n,o)}e.newWriteableStream=j;class P{constructor(o,f){this.reducer=o,this.options=f,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(o){if(!this.state.destroyed){if(this.state.flowing)this.emitData(o);else if(this.buffer.data.push(o),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(f=>this.pendingWritePromises.push(f))}}error(o){this.state.destroyed||(this.state.flowing?this.emitError(o):this.buffer.error.push(o))}end(o){this.state.destroyed||(typeof o<"u"&&this.write(o),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(o){this.listeners.data.slice(0).forEach(f=>f(o))}emitError(o){this.listeners.error.length===0?(0,D.onUnexpectedError)(o):this.listeners.error.slice(0).forEach(f=>f(o))}emitEnd(){this.listeners.end.slice(0).forEach(o=>o())}on(o,f){if(!this.state.destroyed)switch(o){case"data":this.listeners.data.push(f),this.resume();break;case"end":this.listeners.end.push(f),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(f),this.state.flowing&&this.flowErrors();break}}removeListener(o,f){if(this.state.destroyed)return;let p;switch(o){case"data":p=this.listeners.data;break;case"end":p=this.listeners.end;break;case"error":p=this.listeners.error;break}if(p){const I=p.indexOf(f);I>=0&&p.splice(I,1)}}flowData(){if(this.buffer.data.length>0){const o=this.reducer(this.buffer.data);this.emitData(o),this.buffer.data.length=0;const f=[...this.pendingWritePromises];this.pendingWritePromises.length=0,f.forEach(p=>p())}}flowErrors(){if(this.listeners.error.length>0){for(const o of this.buffer.error)this.emitError(o);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function _(n,o){const f=[];let p;for(;(p=n.read())!==null;)f.push(p);return o(f)}e.consumeReadable=_;function w(n,o,f){const p=[];let I;for(;(I=n.read())!==null&&p.length<f;)p.push(I);return I===null&&p.length>0?o(p):{read:()=>{if(p.length>0)return p.shift();if(typeof I<"u"){const N=I;return I=void 0,N}return n.read()}}}e.peekReadable=w;function R(n,o){return new Promise((f,p)=>{const I=[];m(n,{onData:N=>{o&&I.push(N)},onError:N=>{o?p(N):f(void 0)},onEnd:()=>{f(o?o(I):void 0)}})})}e.consumeStream=R;function m(n,o){let f=!1;return n.on("error",p=>{f||o.onError(p)}),n.on("end",()=>{f||o.onEnd()}),n.on("data",p=>{f||o.onData(p)}),(0,z.toDisposable)(()=>f=!0)}e.listenStream=m;function S(n,o){return new Promise((f,p)=>{const I=new z.DisposableStore,N=[],g=h=>{if(N.push(h),N.length>o)return I.dispose(),n.pause(),f({stream:n,buffer:N,ended:!1})},E=h=>p(h),L=()=>f({stream:n,buffer:N,ended:!0});I.add((0,z.toDisposable)(()=>n.removeListener("error",E))),n.on("error",E),I.add((0,z.toDisposable)(()=>n.removeListener("end",L))),n.on("end",L),I.add((0,z.toDisposable)(()=>n.removeListener("data",g))),n.on("data",g)})}e.peekStream=S;function d(n,o){const f=j(o);return f.end(n),f}e.toStream=d;function r(){const n=j(()=>{throw new Error("not supported")});return n.end(),n}e.emptyStream=r;function s(n){let o=!1;return{read:()=>o?null:(o=!0,n)}}e.toReadable=s;function l(n,o,f){const p=j(f);return m(n,{onData:I=>p.write(o.data(I)),onError:I=>p.error(o.error?o.error(I):I),onEnd:()=>p.end()}),p}e.transform=l;function t(n,o,f){let p=!1;return{read:()=>{const I=o.read();return p?I:(p=!0,I!==null?f([n,I]):n)}}}e.prefixedReadable=t;function a(n,o,f){let p=!1;const I=j(f);return m(o,{onData:N=>p?I.write(N):(p=!0,I.write(f([n,N]))),onError:N=>I.error(N),onEnd:()=>{p||(p=!0,I.write(n)),I.end()}}),I}e.prefixedStream=a}),define(ne[5],ie([0,1,13]),function(te,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const z=typeof Buffer<"u";let W,y;class A{static alloc(h){return z?new A(Buffer.allocUnsafe(h)):new A(new Uint8Array(h))}static wrap(h){return z&&!Buffer.isBuffer(h)&&(h=Buffer.from(h.buffer,h.byteOffset,h.byteLength)),new A(h)}static fromString(h,v){return!(v?.dontUseNodeBuffer||!1)&&z?new A(Buffer.from(h)):(W||(W=new TextEncoder),new A(W.encode(h)))}static fromByteArray(h){const v=A.alloc(h.length);for(let $=0,x=h.length;$<x;$++)v.buffer[$]=h[$];return v}static concat(h,v){if(typeof v>"u"){v=0;for(let Y=0,Z=h.length;Y<Z;Y++)v+=h[Y].byteLength}const $=A.alloc(v);let x=0;for(let Y=0,Z=h.length;Y<Z;Y++){const B=h[Y];$.set(B,x),x+=B.byteLength}return $}constructor(h){this.buffer=h,this.byteLength=this.buffer.byteLength}clone(){const h=A.alloc(this.byteLength);return h.set(this),h}toString(){return z?this.buffer.toString():(y||(y=new TextDecoder),y.decode(this.buffer))}slice(h,v){return new A(this.buffer.subarray(h,v))}set(h,v){if(h instanceof A)this.buffer.set(h.buffer,v);else if(h instanceof Uint8Array)this.buffer.set(h,v);else if(h instanceof ArrayBuffer)this.buffer.set(new Uint8Array(h),v);else if(ArrayBuffer.isView(h))this.buffer.set(new Uint8Array(h.buffer,h.byteOffset,h.byteLength),v);else throw new Error("Unknown argument 'array'")}readUInt32BE(h){return _(this.buffer,h)}writeUInt32BE(h,v){w(this.buffer,h,v)}readUInt32LE(h){return R(this.buffer,h)}writeUInt32LE(h,v){m(this.buffer,h,v)}readUInt8(h){return S(this.buffer,h)}writeUInt8(h,v){d(this.buffer,h,v)}}e.VSBuffer=A;function j(L,h){return L[h+0]<<0>>>0|L[h+1]<<8>>>0}e.readUInt16LE=j;function P(L,h,v){L[v+0]=h&255,h=h>>>8,L[v+1]=h&255}e.writeUInt16LE=P;function _(L,h){return L[h]*2**24+L[h+1]*2**16+L[h+2]*2**8+L[h+3]}e.readUInt32BE=_;function w(L,h,v){L[v+3]=h,h=h>>>8,L[v+2]=h,h=h>>>8,L[v+1]=h,h=h>>>8,L[v]=h}e.writeUInt32BE=w;function R(L,h){return L[h+0]<<0>>>0|L[h+1]<<8>>>0|L[h+2]<<16>>>0|L[h+3]<<24>>>0}e.readUInt32LE=R;function m(L,h,v){L[v+0]=h&255,h=h>>>8,L[v+1]=h&255,h=h>>>8,L[v+2]=h&255,h=h>>>8,L[v+3]=h&255}e.writeUInt32LE=m;function S(L,h){return L[h]}e.readUInt8=S;function d(L,h,v){L[v]=h}e.writeUInt8=d;function r(L){return D.consumeReadable(L,h=>A.concat(h))}e.readableToBuffer=r;function s(L){return D.toReadable(L)}e.bufferToReadable=s;function l(L){return D.consumeStream(L,h=>A.concat(h))}e.streamToBuffer=l;async function t(L){return L.ended?A.concat(L.buffer):A.concat([...L.buffer,await l(L.stream)])}e.bufferedStreamToBuffer=t;function a(L){return D.toStream(L,h=>A.concat(h))}e.bufferToStream=a;function n(L){return D.transform(L,{data:h=>typeof h=="string"?A.fromString(h):A.wrap(h)},h=>A.concat(h))}e.streamToBufferReadableStream=n;function o(L){return D.newWriteableStream(h=>A.concat(h),L)}e.newWriteableBufferStream=o;function f(L,h){return D.prefixedReadable(L,h,v=>A.concat(v))}e.prefixedBufferReadable=f;function p(L,h){return D.prefixedStream(L,h,v=>A.concat(v))}e.prefixedBufferStream=p;function I(L){let h=0,v=0,$=0;const x=new Uint8Array(Math.floor(L.length/4*3)),Y=B=>{switch(v){case 3:x[$++]=h|B,v=0;break;case 2:x[$++]=h|B>>>2,h=B<<6,v=3;break;case 1:x[$++]=h|B>>>4,h=B<<4,v=2;break;default:h=B<<2,v=1}};for(let B=0;B<L.length;B++){const i=L.charCodeAt(B);if(i>=65&&i<=90)Y(i-65);else if(i>=97&&i<=122)Y(i-97+26);else if(i>=48&&i<=57)Y(i-48+52);else if(i===43||i===45)Y(62);else if(i===47||i===95)Y(63);else{if(i===61)break;throw new SyntaxError(`Unexpected base64 character ${L[B]}`)}}const Z=$;for(;v>0;)Y(0);return A.wrap(x).slice(0,Z)}e.decodeBase64=I;const N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function E({buffer:L},h=!0,v=!1){const $=v?g:N;let x="";const Y=L.byteLength%3;let Z=0;for(;Z<L.byteLength-Y;Z+=3){const B=L[Z+0],i=L[Z+1],b=L[Z+2];x+=$[B>>>2],x+=$[(B<<4|i>>>4)&63],x+=$[(i<<2|b>>>6)&63],x+=$[b&63]}if(Y===1){const B=L[Z+0];x+=$[B>>>2],x+=$[B<<4&63],h&&(x+="==")}else if(Y===2){const B=L[Z+0],i=L[Z+1];x+=$[B>>>2],x+=$[(B<<4|i>>>4)&63],x+=$[i<<2&63],h&&(x+="=")}return x}e.encodeBase64=E}),define(ne[15],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var D;(function(W){W[W.Unknown=0]="Unknown",W[W.Invalid=3]="Invalid",W[W.LF=1]="LF",W[W.CRLF=2]="CRLF"})(D=e.StringEOL||(e.StringEOL={}));function z(W){let y=0,A=0,j=0,P=0;for(let _=0,w=W.length;_<w;_++){const R=W.charCodeAt(_);R===13?(y===0&&(A=_),y++,_+1<w&&W.charCodeAt(_+1)===10?(P|=2,_++):P|=3,j=_+1):R===10&&(P|=1,y===0&&(A=_),y++,j=_+1)}return y===0&&(A=W.length),[y,A,W.length-j,P]}e.countEOL=z}),define(ne[16],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class D{constructor(s,l){this.piece=s,this.color=l,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return W(this.right);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}prev(){if(this.left!==e.SENTINEL)return y(this.left);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=D;var z;(function(r){r[r.Black=0]="Black",r[r.Red=1]="Red"})(z=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new D(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function W(r){for(;r.left!==e.SENTINEL;)r=r.left;return r}e.leftest=W;function y(r){for(;r.right!==e.SENTINEL;)r=r.right;return r}e.righttest=y;function A(r){return r===e.SENTINEL?0:r.size_left+r.piece.length+A(r.right)}function j(r){return r===e.SENTINEL?0:r.lf_left+r.piece.lineFeedCnt+j(r.right)}function P(){e.SENTINEL.parent=e.SENTINEL}function _(r,s){const l=s.right;l.size_left+=s.size_left+(s.piece?s.piece.length:0),l.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=l.left,l.left!==e.SENTINEL&&(l.left.parent=s),l.parent=s.parent,s.parent===e.SENTINEL?r.root=l:s.parent.left===s?s.parent.left=l:s.parent.right=l,l.left=s,s.parent=l}e.leftRotate=_;function w(r,s){const l=s.left;s.left=l.right,l.right!==e.SENTINEL&&(l.right.parent=s),l.parent=s.parent,s.size_left-=l.size_left+(l.piece?l.piece.length:0),s.lf_left-=l.lf_left+(l.piece?l.piece.lineFeedCnt:0),s.parent===e.SENTINEL?r.root=l:s===s.parent.right?s.parent.right=l:s.parent.left=l,l.right=s,s.parent=l}e.rightRotate=w;function R(r,s){let l,t;if(s.left===e.SENTINEL?(t=s,l=t.right):s.right===e.SENTINEL?(t=s,l=t.left):(t=W(s.right),l=t.right),t===r.root){r.root=l,l.color=0,s.detach(),P(),r.root.parent=e.SENTINEL;return}const a=t.color===1;if(t===t.parent.left?t.parent.left=l:t.parent.right=l,t===s?(l.parent=t.parent,d(r,l)):(t.parent===s?l.parent=t:l.parent=t.parent,d(r,l),t.left=s.left,t.right=s.right,t.parent=s.parent,t.color=s.color,s===r.root?r.root=t:s===s.parent.left?s.parent.left=t:s.parent.right=t,t.left!==e.SENTINEL&&(t.left.parent=t),t.right!==e.SENTINEL&&(t.right.parent=t),t.size_left=s.size_left,t.lf_left=s.lf_left,d(r,t)),s.detach(),l.parent.left===l){const o=A(l),f=j(l);if(o!==l.parent.size_left||f!==l.parent.lf_left){const p=o-l.parent.size_left,I=f-l.parent.lf_left;l.parent.size_left=o,l.parent.lf_left=f,S(r,l.parent,p,I)}}if(d(r,l.parent),a){P();return}let n;for(;l!==r.root&&l.color===0;)l===l.parent.left?(n=l.parent.right,n.color===1&&(n.color=0,l.parent.color=1,_(r,l.parent),n=l.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,l=l.parent):(n.right.color===0&&(n.left.color=0,n.color=1,w(r,n),n=l.parent.right),n.color=l.parent.color,l.parent.color=0,n.right.color=0,_(r,l.parent),l=r.root)):(n=l.parent.left,n.color===1&&(n.color=0,l.parent.color=1,w(r,l.parent),n=l.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,l=l.parent):(n.left.color===0&&(n.right.color=0,n.color=1,_(r,n),n=l.parent.left),n.color=l.parent.color,l.parent.color=0,n.left.color=0,w(r,l.parent),l=r.root));l.color=0,P()}e.rbDelete=R;function m(r,s){for(d(r,s);s!==r.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const l=s.parent.parent.right;l.color===1?(s.parent.color=0,l.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,_(r,s)),s.parent.color=0,s.parent.parent.color=1,w(r,s.parent.parent))}else{const l=s.parent.parent.left;l.color===1?(s.parent.color=0,l.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,w(r,s)),s.parent.color=0,s.parent.parent.color=1,_(r,s.parent.parent))}r.root.color=0}e.fixInsert=m;function S(r,s,l,t){for(;s!==r.root&&s!==e.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=l,s.parent.lf_left+=t),s=s.parent}e.updateTreeMetadata=S;function d(r,s){let l=0,t=0;if(s!==r.root){for(;s!==r.root&&s===s.parent.right;)s=s.parent;if(s!==r.root)for(s=s.parent,l=A(s.left)-s.size_left,t=j(s.left)-s.lf_left,s.size_left+=l,s.lf_left+=t;s!==r.root&&(l!==0||t!==0);)s.parent.left===s&&(s.parent.size_left+=l,s.parent.lf_left+=t),s=s.parent}}e.recomputeTreeMetadata=d}),define(ne[17],ie([0,1,4]),function(te,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const z={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},W={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function y(w){const R=(0,D.extname)(w),m=z[R.toLowerCase()];return m!==void 0?m:A(w)}e.getMediaOrTextMime=y;function A(w){const R=(0,D.extname)(w);return W[R.toLowerCase()]}e.getMediaMime=A;function j(w){for(const R in W)if(W[R]===w)return R}e.getExtensionForMimeType=j;const P=/^(.+)\/(.+?)(;.+)?$/;function _(w,R){const m=P.exec(w);return m?`${m[1].toLowerCase()}/${m[2].toLowerCase()}${m[3]??""}`:R?void 0:w}e.normalizeMimeType=_}),define(ne[7],ie([0,1,4,2,3,30]),function(te,e,D,z,W,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function A(g){return g===47||g===92}e.isPathSeparator=A;function j(g){return g.replace(/[\\/]/g,D.posix.sep)}e.toSlashes=j;function P(g){return g.indexOf("/")===-1&&(g=j(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}e.toPosixPath=P;function _(g,E=D.posix.sep){if(!g)return"";const L=g.length,h=g.charCodeAt(0);if(A(h)){if(A(g.charCodeAt(1))&&!A(g.charCodeAt(2))){let $=3;const x=$;for(;$<L&&!A(g.charCodeAt($));$++);if(x!==$&&!A(g.charCodeAt($+1))){for($+=1;$<L;$++)if(A(g.charCodeAt($)))return g.slice(0,$+1).replace(/[\\/]/g,E)}}return E}else if(l(h)&&g.charCodeAt(1)===58)return A(g.charCodeAt(2))?g.slice(0,2)+E:g.slice(0,2);let v=g.indexOf("://");if(v!==-1){for(v+=3;v<L;v++)if(A(g.charCodeAt(v)))return g.slice(0,v+1)}return""}e.getRoot=_;function w(g){if(!z.isWindows||!g||g.length<5)return!1;let E=g.charCodeAt(0);if(E!==92||(E=g.charCodeAt(1),E!==92))return!1;let L=2;const h=L;for(;L<g.length&&(E=g.charCodeAt(L),E!==92);L++);return!(h===L||(E=g.charCodeAt(L+1),isNaN(E)||E===92))}e.isUNC=w;const R=/[\\/:\*\?"<>\|]/g,m=/[\\/]/g,S=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function d(g,E=z.isWindows){const L=E?R:m;return!(!g||g.length===0||/^\s+$/.test(g)||(L.lastIndex=0,L.test(g))||E&&S.test(g)||g==="."||g===".."||E&&g[g.length-1]==="."||E&&g.length!==g.trim().length||g.length>255)}e.isValidBasename=d;function r(g,E,L){const h=g===E;return!L||h?h:!g||!E?!1:(0,W.equalsIgnoreCase)(g,E)}e.isEqual=r;function s(g,E,L,h=D.sep){if(g===E)return!0;if(!g||!E||E.length>g.length)return!1;if(L){if(!(0,W.startsWithIgnoreCase)(g,E))return!1;if(E.length===g.length)return!0;let $=E.length;return E.charAt(E.length-1)===h&&$--,g.charAt($)===h}return E.charAt(E.length-1)!==h&&(E+=h),g.indexOf(E)===0}e.isEqualOrParent=s;function l(g){return g>=65&&g<=90||g>=97&&g<=122}e.isWindowsDriveLetter=l;function t(g,E){return z.isWindows&&g.endsWith(":")&&(g+=D.sep),(0,D.isAbsolute)(g)||(g=(0,D.join)(E,g)),g=(0,D.normalize)(g),z.isWindows?(g=(0,W.rtrim)(g,D.sep),g.endsWith(":")&&(g+=D.sep)):(g=(0,W.rtrim)(g,D.sep),g||(g=D.sep)),g}e.sanitizeFilePath=t;function a(g){const E=(0,D.normalize)(g);return z.isWindows?g.length>3?!1:n(E)&&(g.length===2||E.charCodeAt(2)===92):E===D.posix.sep}e.isRootOrDriveLetter=a;function n(g,E=z.isWindows){return E?l(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}e.hasDriveLetter=n;function o(g){return n(g)?g[0]:void 0}e.getDriveLetter=o;function f(g,E,L){return E.length>g.length?-1:g===E?0:(L&&(g=g.toLowerCase(),E=E.toLowerCase()),g.indexOf(E))}e.indexOfPath=f;function p(g){const E=g.split(":");let L,h,v;for(const $ of E){const x=Number($);(0,y.isNumber)(x)?h===void 0?h=x:v===void 0&&(v=x):L=L?[L,$].join(":"):$}if(!L)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:L,line:h!==void 0?h:void 0,column:v!==void 0?v:h!==void 0?1:void 0}}e.parseLineAndColumnAware=p;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function N(g,E,L=8){let h="";for(let $=0;$<L;$++)h+=I.charAt(Math.floor(Math.random()*I.length));let v;return E?v=`${E}-${h}`:v=h,g?(0,D.join)(g,v):v}e.randomPath=N}),define(ne[8],ie([0,1,2,9]),function(te,e,D,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var W;(function(P){P.inMemory="inmemory",P.vscode="vscode",P.internal="private",P.walkThrough="walkThrough",P.walkThroughSnippet="walkThroughSnippet",P.http="http",P.https="https",P.file="file",P.mailto="mailto",P.untitled="untitled",P.data="data",P.command="command",P.vscodeRemote="vscode-remote",P.vscodeRemoteResource="vscode-remote-resource",P.vscodeUserData="vscode-userdata",P.vscodeCustomEditor="vscode-custom-editor",P.vscodeNotebook="vscode-notebook",P.vscodeNotebookCell="vscode-notebook-cell",P.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",P.vscodeNotebookCellOutput="vscode-notebook-cell-output",P.vscodeInteractive="vscode-interactive",P.vscodeInteractiveInput="vscode-interactive-input",P.vscodeSettings="vscode-settings",P.vscodeWorkspaceTrust="vscode-workspace-trust",P.vscodeTerminal="vscode-terminal",P.webviewPanel="webview-panel",P.vscodeWebview="vscode-webview",P.extension="extension",P.vscodeFileResource="vscode-file",P.tmp="tmp",P.vsls="vsls",P.vscodeSourceControl="vscode-scm"})(W=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class y{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${W.vscodeRemoteResource}`}setPreferredWebSchema(_){this._preferredWebSchema=_}setDelegate(_){this._delegate=_}setServerRootPath(_){this._remoteResourcesPath=`${_}/${W.vscodeRemoteResource}`}set(_,w,R){this._hosts[_]=w,this._ports[_]=R}setConnectionToken(_,w){this._connectionTokens[_]=w}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(_){if(this._delegate)return this._delegate(_);const w=_.authority;let R=this._hosts[w];R&&R.indexOf(":")!==-1&&R.indexOf("[")===-1&&(R=`[${R}]`);const m=this._ports[w],S=this._connectionTokens[w];let d=`path=${encodeURIComponent(_.path)}`;return typeof S=="string"&&(d+=`&${e.connectionTokenQueryName}=${encodeURIComponent(S)}`),z.URI.from({scheme:D.isWeb?this._preferredWebSchema:W.vscodeRemoteResource,authority:`${R}:${m}`,path:this._remoteResourcesPath,query:d})}}e.RemoteAuthorities=new y,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class A{asBrowserUri(_){const w=this.toUri(_,te);return this.uriToBrowserUri(w)}uriToBrowserUri(_){return _.scheme===W.vscodeRemote?e.RemoteAuthorities.rewrite(_):_.scheme===W.file&&(D.isNative||D.isWebWorker&&D.globals.origin===`${W.vscodeFileResource}://${A.FALLBACK_AUTHORITY}`)?_.with({scheme:W.vscodeFileResource,authority:_.authority||A.FALLBACK_AUTHORITY,query:null,fragment:null}):_}asFileUri(_){const w=this.toUri(_,te);return this.uriToFileUri(w)}uriToFileUri(_){return _.scheme===W.vscodeFileResource?_.with({scheme:W.file,authority:_.authority!==A.FALLBACK_AUTHORITY?_.authority:null,query:null,fragment:null}):_}toUri(_,w){return z.URI.isUri(_)?_:z.URI.parse(w.toUrl(_))}}A.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new A;var j;(function(P){const _=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);P.CoopAndCoep=Object.freeze(_.get("3"));const w="vscode-coi";function R(S){let d;typeof S=="string"?d=new URL(S).searchParams:S instanceof URL?d=S.searchParams:z.URI.isUri(S)&&(d=new URL(S.toString(!0)).searchParams);const r=d?.get(w);if(!!r)return _.get(r)}P.getHeadersFromQuery=R;function m(S,d,r){if(!globalThis.crossOriginIsolated)return;const s=d&&r?"3":r?"2":"1";S instanceof URLSearchParams?S.set(w,s):S[w]=s}P.addSearchParam=m})(j=e.COI||(e.COI={}))}),define(ne[18],ie([0,1,7,8,4,2,3,9]),function(te,e,D,z,W,y,A,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function P(S){return(0,j.uriToFsPath)(S,!0)}e.originalFSPath=P;class _{constructor(d){this._ignorePathCasing=d}compare(d,r,s=!1){return d===r?0:(0,A.compare)(this.getComparisonKey(d,s),this.getComparisonKey(r,s))}isEqual(d,r,s=!1){return d===r?!0:!d||!r?!1:this.getComparisonKey(d,s)===this.getComparisonKey(r,s)}getComparisonKey(d,r=!1){return d.with({path:this._ignorePathCasing(d)?d.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(d){return this._ignorePathCasing(d)}isEqualOrParent(d,r,s=!1){if(d.scheme===r.scheme){if(d.scheme===z.Schemas.file)return D.isEqualOrParent(P(d),P(r),this._ignorePathCasing(d))&&d.query===r.query&&(s||d.fragment===r.fragment);if((0,e.isEqualAuthority)(d.authority,r.authority))return D.isEqualOrParent(d.path,r.path,this._ignorePathCasing(d),"/")&&d.query===r.query&&(s||d.fragment===r.fragment)}return!1}joinPath(d,...r){return j.URI.joinPath(d,...r)}basenameOrAuthority(d){return(0,e.basename)(d)||d.authority}basename(d){return W.posix.basename(d.path)}extname(d){return W.posix.extname(d.path)}dirname(d){if(d.path.length===0)return d;let r;return d.scheme===z.Schemas.file?r=j.URI.file(W.dirname(P(d))).path:(r=W.posix.dirname(d.path),d.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${d.toString})) resulted in a relative path`),r="/")),d.with({path:r})}normalizePath(d){if(!d.path.length)return d;let r;return d.scheme===z.Schemas.file?r=j.URI.file(W.normalize(P(d))).path:r=W.posix.normalize(d.path),d.with({path:r})}relativePath(d,r){if(d.scheme!==r.scheme||!(0,e.isEqualAuthority)(d.authority,r.authority))return;if(d.scheme===z.Schemas.file){const t=W.relative(P(d),P(r));return y.isWindows?D.toSlashes(t):t}let s=d.path||"/";const l=r.path||"/";if(this._ignorePathCasing(d)){let t=0;for(const a=Math.min(s.length,l.length);t<a&&!(s.charCodeAt(t)!==l.charCodeAt(t)&&s.charAt(t).toLowerCase()!==l.charAt(t).toLowerCase());t++);s=l.substr(0,t)+s.substr(t)}return W.posix.relative(s,l)}resolvePath(d,r){if(d.scheme===z.Schemas.file){const s=j.URI.file(W.resolve(P(d),r));return d.with({authority:s.authority,path:s.path})}return r=D.toPosixPath(r),d.with({path:W.posix.resolve(d.path,r)})}isAbsolutePath(d){return!!d.path&&d.path[0]==="/"}isEqualAuthority(d,r){return d===r||d!==void 0&&r!==void 0&&(0,A.equalsIgnoreCase)(d,r)}hasTrailingPathSeparator(d,r=W.sep){if(d.scheme===z.Schemas.file){const s=P(d);return s.length>D.getRoot(s).length&&s[s.length-1]===r}else{const s=d.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(d.fsPath)}}removeTrailingPathSeparator(d,r=W.sep){return(0,e.hasTrailingPathSeparator)(d,r)?d.with({path:d.path.substr(0,d.path.length-1)}):d}addTrailingPathSeparator(d,r=W.sep){let s=!1;if(d.scheme===z.Schemas.file){const l=P(d);s=l!==void 0&&l.length===D.getRoot(l).length&&l[l.length-1]===r}else{r="/";const l=d.path;s=l.length===1&&l.charCodeAt(l.length-1)===47}return!s&&!(0,e.hasTrailingPathSeparator)(d,r)?d.with({path:d.path+"/"}):d}}e.ExtUri=_,e.extUri=new _(()=>!1),e.extUriBiasedIgnorePathCase=new _(S=>S.scheme===z.Schemas.file?!y.isLinux:!0),e.extUriIgnorePathCase=new _(S=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function w(S,d){const r=[];for(let s=0;s<S.length;s++){const l=d(S[s]);S.some((t,a)=>a===s?!1:(0,e.isEqualOrParent)(l,d(t)))||r.push(S[s])}return r}e.distinctParents=w;var R;(function(S){S.META_DATA_LABEL="label",S.META_DATA_DESCRIPTION="description",S.META_DATA_SIZE="size",S.META_DATA_MIME="mime";function d(r){const s=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(a=>{const[n,o]=a.split(":");n&&o&&s.set(n,o)});const t=r.path.substring(0,r.path.indexOf(";"));return t&&s.set(S.META_DATA_MIME,t),s}S.parseMetaData=d})(R=e.DataUri||(e.DataUri={}));function m(S,d,r){if(d){let s=S.path;return s&&s[0]!==W.posix.sep&&(s=W.posix.sep+s),S.with({scheme:r,authority:d,path:s})}return S.with({scheme:r})}e.toLocalResource=m}),define(ne[19],ie([0,1,31,14,20,6,18,2]),function(te,e,D,z,W,y,A,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function P(F){return!!F&&typeof F.then=="function"}e.isThenable=P;function _(F){const u=new D.CancellationTokenSource,C=F(u.token),O=new Promise((U,G)=>{const J=u.token.onCancellationRequested(()=>{J.dispose(),u.dispose(),G(new z.CancellationError)});Promise.resolve(C).then(ee=>{J.dispose(),u.dispose(),U(ee)},ee=>{J.dispose(),u.dispose(),G(ee)})});return new class{cancel(){u.cancel()}then(U,G){return O.then(U,G)}catch(U){return this.then(void 0,U)}finally(U){return O.finally(U)}}}e.createCancelablePromise=_;function w(F,u,C){return new Promise((O,U)=>{const G=u.onCancellationRequested(()=>{G.dispose(),O(C)});F.then(O,U).finally(()=>G.dispose())})}e.raceCancellation=w;function R(F,u){return new Promise((C,O)=>{const U=u.onCancellationRequested(()=>{U.dispose(),O(new z.CancellationError)});F.then(C,O).finally(()=>U.dispose())})}e.raceCancellationError=R;async function m(F){let u=-1;const C=F.map((U,G)=>U.then(J=>(u=G,J))),O=await Promise.race(C);return F.forEach((U,G)=>{G!==u&&U.cancel()}),O}e.raceCancellablePromises=m;function S(F,u,C){let O;const U=setTimeout(()=>{O?.(void 0),C?.()},u);return Promise.race([F.finally(()=>clearTimeout(U)),new Promise(G=>O=G)])}e.raceTimeout=S;function d(F){return new Promise((u,C)=>{const O=F();P(O)?O.then(u,C):u(O)})}e.asPromise=d;class r{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(u){if(this.activePromise){if(this.queuedPromiseFactory=u,!this.queuedPromise){const C=()=>{this.queuedPromise=null;const O=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,O};this.queuedPromise=new Promise(O=>{this.activePromise.then(C,C).then(O)})}return new Promise((C,O)=>{this.queuedPromise.then(C,O)})}return this.activePromise=u(),new Promise((C,O)=>{this.activePromise.then(U=>{this.activePromise=null,C(U)},U=>{this.activePromise=null,O(U)})})}}e.Throttler=r;class s{constructor(){this.current=Promise.resolve(null)}queue(u){return this.current=this.current.then(()=>u(),()=>u())}}e.Sequencer=s;class l{constructor(){this.promiseMap=new Map}queue(u,C){const U=(this.promiseMap.get(u)??Promise.resolve()).catch(()=>{}).then(C).finally(()=>{this.promiseMap.get(u)===U&&this.promiseMap.delete(u)});return this.promiseMap.set(u,U),U}}e.SequencerByKey=l;const t=(F,u)=>{let C=!0;const O=setTimeout(()=>{C=!1,u()},F);return{isTriggered:()=>C,dispose:()=>{clearTimeout(O),C=!1}}},a=F=>{let u=!0;return queueMicrotask(()=>{u&&(u=!1,F())}),{isTriggered:()=>u,dispose:()=>{u=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class n{constructor(u){this.defaultDelay=u,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(u,C=this.defaultDelay){this.task=u,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((U,G)=>{this.doResolve=U,this.doReject=G}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const U=this.task;return this.task=null,U()}}));const O=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=C===e.MicrotaskDelay?a(O):t(C,O),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new z.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=n;class o{constructor(u){this.delayer=new n(u),this.throttler=new r}trigger(u,C){return this.delayer.trigger(()=>this.throttler.queue(u),C)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=o;class f{constructor(){this._isOpen=!1,this._promise=new Promise((u,C)=>{this._completePromise=u})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=f;class p extends f{constructor(u){super(),this._timeout=setTimeout(()=>this.open(),u)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=p;function I(F,u){return u?new Promise((C,O)=>{const U=setTimeout(()=>{G.dispose(),C()},F),G=u.onCancellationRequested(()=>{clearTimeout(U),G.dispose(),O(new z.CancellationError)})}):_(C=>I(F,C))}e.timeout=I;function N(F,u=0){const C=setTimeout(F,u);return(0,y.toDisposable)(()=>clearTimeout(C))}e.disposableTimeout=N;function g(F){const u=[];let C=0;const O=F.length;function U(){return C<O?F[C++]():null}function G(J){J!=null&&u.push(J);const ee=U();return ee?ee.then(G):Promise.resolve(u)}return Promise.resolve(null).then(G)}e.sequence=g;function E(F,u=O=>!!O,C=null){let O=0;const U=F.length,G=()=>{if(O>=U)return Promise.resolve(C);const J=F[O++];return Promise.resolve(J()).then(re=>u(re)?Promise.resolve(re):G())};return G()}e.first=E;function L(F,u=O=>!!O,C=null){if(F.length===0)return Promise.resolve(C);let O=F.length;const U=()=>{O=-1;for(const G of F)G.cancel?.()};return new Promise((G,J)=>{for(const ee of F)ee.then(re=>{--O>=0&&u(re)?(U(),G(re)):O===0&&G(C)}).catch(re=>{--O>=0&&(U(),J(re))})})}e.firstParallel=L;class h{constructor(u){this._size=0,this.maxDegreeOfParalellism=u,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new W.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(u){return this._size++,new Promise((C,O)=>{this.outstandingPromises.push({factory:u,c:C,e:O}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const u=this.outstandingPromises.shift();this.runningPromises++;const C=u.factory();C.then(u.c,u.e),C.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=h;class v extends h{constructor(){super(1)}}e.Queue=v;class ${constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const u=new k;return this.drainers.add(u),u.p}isDrained(){for(const[,u]of this.queues)if(u.size>0)return!1;return!0}queueFor(u,C=A.extUri){const O=C.getComparisonKey(u);let U=this.queues.get(O);return U||(U=new v,W.Event.once(U.onDrained)(()=>{U?.dispose(),this.queues.delete(O),this.onDidQueueDrain()}),this.queues.set(O,U)),U}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const u of this.drainers)u.complete();this.drainers.clear()}dispose(){for(const[,u]of this.queues)u.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=$;class x{constructor(u,C){this._token=-1,typeof u=="function"&&typeof C=="number"&&this.setIfNotSet(u,C)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(u,C){this.cancel(),this._token=setTimeout(()=>{this._token=-1,u()},C)}setIfNotSet(u,C){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,u()},C))}}e.TimeoutTimer=x;class Y{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(u,C){this.cancel(),this._token=setInterval(()=>{u()},C)}}e.IntervalTimer=Y;class Z{constructor(u,C){this.timeoutToken=-1,this.runner=u,this.timeout=C,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(u=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,u)}get delay(){return this.timeout}set delay(u){this.timeout=u}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=Z;class B{constructor(u,C){C%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${C}ms is not a multiple of 1000ms.`),this.runner=u,this.timeout=C,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(u=this.timeout){u%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${u}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(u/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=B;class i extends Z{constructor(u,C){super(u,C),this.units=[]}work(u){this.units.push(u),this.isScheduled()||this.schedule()}doRun(){const u=this.units;this.units=[],this.runner?.(u)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=i;class b extends y.Disposable{constructor(u,C){super(),this.options=u,this.handler=C,this.pendingWork=[],this.throttler=this._register(new y.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(u){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+u.length>this.options.maxBufferedWork)return!1}else if(this.pending+u.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...u),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new Z(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=b,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=F=>{(0,j.setTimeout0)(()=>{if(u)return;const C=Date.now()+15;F(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,C-Date.now())}}))});let u=!1;return{dispose(){u||(u=!0)}}}:e.runWhenIdle=(F,u)=>{const C=requestIdleCallback(F,typeof u=="number"?{timeout:u}:void 0);let O=!1;return{dispose(){O||(O=!0,cancelIdleCallback(C))}}}}();class T{constructor(u){this._didRun=!1,this._executor=()=>{try{this._value=u()}catch(C){this._error=C}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=T;async function c(F,u,C){let O;for(let U=0;U<C;U++)try{return await F()}catch(G){O=G,await I(u)}throw O}e.retry=c;class H{hasPending(u){return this._pending?typeof u=="number"?this._pending.taskId===u:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(u,C,O){return this._pending={taskId:u,cancel:()=>O?.(),promise:C},C.then(()=>this.donePending(u),()=>this.donePending(u)),C}donePending(u){this._pending&&u===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const u=this._next;this._next=void 0,u.run().then(u.promiseResolve,u.promiseReject)}}setNext(u){if(this._next)this._next.run=u;else{let C,O;const U=new Promise((G,J)=>{C=G,O=J});this._next={run:u,promise:U,promiseResolve:C,promiseReject:O}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=H;class K{constructor(u,C=()=>Date.now()){this.interval=u,this.nowFn=C,this.lastIncrementTime=0,this.value=0}increment(){const u=this.nowFn();return u-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=u,this.value=0),this.value++,this.value}}e.IntervalCounter=K;class k{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((u,C)=>{this.completeCallback=u,this.errorCallback=C})}complete(u){return new Promise(C=>{this.completeCallback(u),this.resolved=!0,C()})}error(u){return new Promise(C=>{this.errorCallback(u),this.rejected=!0,C()})}cancel(){new Promise(u=>{this.errorCallback(new z.CancellationError),this.rejected=!0,u()})}}e.DeferredPromise=k;var q;(function(F){async function u(O){let U;const G=await Promise.all(O.map(J=>J.then(ee=>ee,ee=>{U||(U=ee)})));if(typeof U<"u")throw U;return G}F.settled=u;function C(O){return new Promise(async(U,G)=>{try{await O(U,G)}catch(J){G(J)}})}F.withAsyncBody=C})(q=e.Promises||(e.Promises={}));var M;(function(F){F[F.Initial=0]="Initial",F[F.DoneOK=1]="DoneOK",F[F.DoneError=2]="DoneError"})(M||(M={}));class V{static fromArray(u){return new V(C=>{C.emitMany(u)})}static fromPromise(u){return new V(async C=>{C.emitMany(await u)})}static fromPromises(u){return new V(async C=>{await Promise.all(u.map(async O=>C.emitOne(await O)))})}static merge(u){return new V(async C=>{await Promise.all(u.map(async O=>{for await(const U of O)C.emitOne(U)}))})}constructor(u){this._state=0,this._results=[],this._error=null,this._onStateChanged=new W.Emitter,queueMicrotask(async()=>{const C={emitOne:O=>this.emitOne(O),emitMany:O=>this.emitMany(O),reject:O=>this.reject(O)};try{await Promise.resolve(u(C)),this.resolve()}catch(O){this.reject(O)}finally{C.emitOne=void 0,C.emitMany=void 0,C.reject=void 0}})}[Symbol.asyncIterator](){let u=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(u<this._results.length)return{done:!1,value:this._results[u++]};if(this._state===1)return{done:!0,value:void 0};await W.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(u,C){return new V(async O=>{for await(const U of u)O.emitOne(C(U))})}map(u){return V.map(this,u)}static filter(u,C){return new V(async O=>{for await(const U of u)C(U)&&O.emitOne(U)})}filter(u){return V.filter(this,u)}static coalesce(u){return V.filter(u,C=>!!C)}coalesce(){return V.coalesce(this)}static async toPromise(u){const C=[];for await(const O of u)C.push(O);return C}toPromise(){return V.toPromise(this)}emitOne(u){this._state===0&&(this._results.push(u),this._onStateChanged.fire())}emitMany(u){this._state===0&&(this._results=this._results.concat(u),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(u){this._state===0&&(this._state=2,this._error=u,this._onStateChanged.fire())}}e.AsyncIterableObject=V,V.EMPTY=V.fromArray([]);class Q extends V{constructor(u,C){super(C),this._source=u}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=Q;function X(F){const u=new D.CancellationTokenSource,C=F(u.token);return new Q(u,async O=>{const U=u.token.onCancellationRequested(()=>{U.dispose(),u.dispose(),O.reject(new z.CancellationError)});try{for await(const G of C){if(u.token.isCancellationRequested)return;O.emitOne(G)}U.dispose(),u.dispose()}catch(G){U.dispose(),u.dispose(),O.reject(G)}})}e.createCancelableAsyncIterable=X}),define(ne[21],ie([0,1,32,19,7,12,4,2,3]),function(te,e,D,z,W,y,A,j,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function _(){return Object.create(null)}e.getEmptyExpression=_,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const w="[/\\\\]",R="[^/\\\\]",m=/\//g;function S(k,q){switch(k){case 0:return"";case 1:return`${R}*?`;default:return`(?:${w}|${R}+${w}${q?`|${w}${R}+`:""})*?`}}function d(k,q){if(!k)return[];const M=[];let V=!1,Q=!1,X="";for(const F of k){switch(F){case q:if(!V&&!Q){M.push(X),X="";continue}break;case"{":V=!0;break;case"}":V=!1;break;case"[":Q=!0;break;case"]":Q=!1;break}X+=F}return X&&M.push(X),M}e.splitGlobAware=d;function r(k){if(!k)return"";let q="";const M=d(k,e.GLOB_SPLIT);if(M.every(V=>V===e.GLOBSTAR))q=".*";else{let V=!1;M.forEach((Q,X)=>{if(Q===e.GLOBSTAR){if(V)return;q+=S(2,X===M.length-1)}else{let F=!1,u="",C=!1,O="";for(const U of Q){if(U!=="}"&&F){u+=U;continue}if(C&&(U!=="]"||!O)){let G;U==="-"?G=U:(U==="^"||U==="!")&&!O?G="^":U===e.GLOB_SPLIT?G="":G=(0,P.escapeRegExpCharacters)(U),O+=G;continue}switch(U){case"{":F=!0;continue;case"[":C=!0;continue;case"}":{q+=`(?:${d(u,",").map(ee=>r(ee)).join("|")})`,F=!1,u="";break}case"]":{q+="["+O+"]",C=!1,O="";break}case"?":q+=R;continue;case"*":q+=S(1);continue;default:q+=(0,P.escapeRegExpCharacters)(U)}}X<M.length-1&&(M[X+1]!==e.GLOBSTAR||X+2<M.length)&&(q+=w)}V=Q===e.GLOBSTAR})}return q}const s=/^\*\*\/\*\.[\w\.-]+$/,l=/^\*\*\/([\w\.-]+)\/?$/,t=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,n=/^\*\*((\/[\w\.-]+)+)\/?$/,o=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,f=new y.LRUCache(1e4),p=function(){return!1},I=function(){return null};function N(k,q){if(!k)return I;let M;typeof k!="string"?M=k.pattern:M=k,M=M.trim();const V=`${M}_${!!q.trimForExclusions}`;let Q=f.get(V);if(Q)return g(Q,k);let X;return s.test(M)?Q=L(M.substr(4),M):(X=l.exec(E(M,q)))?Q=h(X[1],M):(q.trimForExclusions?a:t).test(M)?Q=v(M,q):(X=n.exec(E(M,q)))?Q=$(X[1].substr(1),M,!0):(X=o.exec(E(M,q)))?Q=$(X[1],M,!1):Q=x(M),f.set(V,Q),g(Q,k)}function g(k,q){if(typeof q=="string")return k;const M=function(V,Q){return(0,W.isEqualOrParent)(V,q.base,!j.isLinux)?k((0,P.ltrim)(V.substr(q.base.length),A.sep),Q):null};return M.allBasenames=k.allBasenames,M.allPaths=k.allPaths,M.basenames=k.basenames,M.patterns=k.patterns,M}function E(k,q){return q.trimForExclusions&&k.endsWith("/**")?k.substr(0,k.length-2):k}function L(k,q){return function(M,V){return typeof M=="string"&&M.endsWith(k)?q:null}}function h(k,q){const M=`/${k}`,V=`\\${k}`,Q=function(F,u){return typeof F!="string"?null:u?u===k?q:null:F===k||F.endsWith(M)||F.endsWith(V)?q:null},X=[k];return Q.basenames=X,Q.patterns=[q],Q.allBasenames=X,Q}function v(k,q){const M=H(k.slice(1,-1).split(",").map(u=>N(u,q)).filter(u=>u!==I),k),V=M.length;if(!V)return I;if(V===1)return M[0];const Q=function(u,C){for(let O=0,U=M.length;O<U;O++)if(M[O](u,C))return k;return null},X=M.find(u=>!!u.allBasenames);X&&(Q.allBasenames=X.allBasenames);const F=M.reduce((u,C)=>C.allPaths?u.concat(C.allPaths):u,[]);return F.length&&(Q.allPaths=F),Q}function $(k,q,M){const V=A.sep===A.posix.sep,Q=V?k:k.replace(m,A.sep),X=A.sep+Q,F=A.posix.sep+k;let u;return M?u=function(C,O){return typeof C=="string"&&(C===Q||C.endsWith(X)||!V&&(C===k||C.endsWith(F)))?q:null}:u=function(C,O){return typeof C=="string"&&(C===Q||!V&&C===k)?q:null},u.allPaths=[(M?"*/":"./")+k],u}function x(k){try{const q=new RegExp(`^${r(k)}$`);return function(M){return q.lastIndex=0,typeof M=="string"&&q.test(M)?k:null}}catch{return I}}function Y(k,q,M){return!k||typeof q!="string"?!1:Z(k)(q,void 0,M)}e.match=Y;function Z(k,q={}){if(!k)return p;if(typeof k=="string"||B(k)){const M=N(k,q);if(M===I)return p;const V=function(Q,X){return!!M(Q,X)};return M.allBasenames&&(V.allBasenames=M.allBasenames),M.allPaths&&(V.allPaths=M.allPaths),V}return T(k,q)}e.parse=Z;function B(k){const q=k;return q?typeof q.base=="string"&&typeof q.pattern=="string":!1}e.isRelativePattern=B;function i(k){return k.allBasenames||[]}e.getBasenameTerms=i;function b(k){return k.allPaths||[]}e.getPathTerms=b;function T(k,q){const M=H(Object.getOwnPropertyNames(k).map(u=>c(u,k[u],q)).filter(u=>u!==I)),V=M.length;if(!V)return I;if(!M.some(u=>!!u.requiresSiblings)){if(V===1)return M[0];const u=function(U,G){let J;for(let ee=0,re=M.length;ee<re;ee++){const se=M[ee](U,G);if(typeof se=="string")return se;(0,z.isThenable)(se)&&(J||(J=[]),J.push(se))}return J?(async()=>{for(const ee of J){const re=await ee;if(typeof re=="string")return re}return null})():null},C=M.find(U=>!!U.allBasenames);C&&(u.allBasenames=C.allBasenames);const O=M.reduce((U,G)=>G.allPaths?U.concat(G.allPaths):U,[]);return O.length&&(u.allPaths=O),u}const Q=function(u,C,O){let U,G;for(let J=0,ee=M.length;J<ee;J++){const re=M[J];re.requiresSiblings&&O&&(C||(C=(0,A.basename)(u)),U||(U=C.substr(0,C.length-(0,A.extname)(u).length)));const se=re(u,C,U,O);if(typeof se=="string")return se;(0,z.isThenable)(se)&&(G||(G=[]),G.push(se))}return G?(async()=>{for(const J of G){const ee=await J;if(typeof ee=="string")return ee}return null})():null},X=M.find(u=>!!u.allBasenames);X&&(Q.allBasenames=X.allBasenames);const F=M.reduce((u,C)=>C.allPaths?u.concat(C.allPaths):u,[]);return F.length&&(Q.allPaths=F),Q}function c(k,q,M){if(q===!1)return I;const V=N(k,M);if(V===I)return I;if(typeof q=="boolean")return V;if(q){const Q=q.when;if(typeof Q=="string"){const X=(F,u,C,O)=>{if(!O||!V(F,u))return null;const U=Q.replace("$(basename)",C),G=O(U);return(0,z.isThenable)(G)?G.then(J=>J?k:null):G?k:null};return X.requiresSiblings=!0,X}}return V}function H(k,q){const M=k.filter(u=>!!u.basenames);if(M.length<2)return k;const V=M.reduce((u,C)=>{const O=C.basenames;return O?u.concat(O):u},[]);let Q;if(q){Q=[];for(let u=0,C=V.length;u<C;u++)Q.push(q)}else Q=M.reduce((u,C)=>{const O=C.patterns;return O?u.concat(O):u},[]);const X=function(u,C){if(typeof u!="string")return null;if(!C){let U;for(U=u.length;U>0;U--){const G=u.charCodeAt(U-1);if(G===47||G===92)break}C=u.substr(U)}const O=V.indexOf(C);return O!==-1?Q[O]:null};X.basenames=V,X.patterns=Q,X.allBasenames=V;const F=k.filter(u=>!u.basenames);return F.push(X),F}function K(k,q){return(0,D.equals)(k,q,(M,V)=>typeof M=="string"&&typeof V=="string"?M===V:typeof M!="string"&&typeof V!="string"?M.base===V.base&&M.pattern===V.pattern:!1)}e.patternsEquals=K}),define(ne[22],ie([0,1,3,2,5]),function(te,e,D,z,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let y;function A(){return y||(y=new TextDecoder("UTF-16LE")),y}let j;function P(){return j||(j=new TextDecoder("UTF-16BE")),j}let _;function w(){return _||(_=z.isLittleEndian()?A():P()),_}e.getPlatformTextDecoder=w;function R(d,r,s){const l=new Uint16Array(d.buffer,r,s);return s>0&&(l[0]===65279||l[0]===65534)?m(d,r,s):A().decode(l)}e.decodeUTF16LE=R;function m(d,r,s){const l=[];let t=0;for(let a=0;a<s;a++){const n=W.readUInt16LE(d,r);r+=2,l[t++]=String.fromCharCode(n)}return l.join("")}class S{constructor(r){this._capacity=r|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const r=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return w().decode(r)}_flushBuffer(){const r=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[r]:this._completedStrings[this._completedStrings.length]=r}appendCharCode(r){const s=this._capacity-this._bufferLength;s<=1&&(s===0||D.isHighSurrogate(r))&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendASCIICharCode(r){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendString(r){const s=r.length;if(this._bufferLength+s>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=r;return}for(let l=0;l<s;l++)this._buffer[this._bufferLength++]=r.charCodeAt(l)}}e.StringBuilder=S}),define(ne[23],ie([0,1,5,22]),function(te,e,D,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function W(P){return P.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class y{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(_,w,R,m){this.oldPosition=_,this.oldText=w,this.newPosition=R,this.newText=m}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${W(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${W(this.oldText)}")`:`(replace@${this.oldPosition} "${W(this.oldText)}" with "${W(this.newText)}")`}static _writeStringSize(_){return 4+2*_.length}static _writeString(_,w,R){const m=w.length;D.writeUInt32BE(_,m,R),R+=4;for(let S=0;S<m;S++)D.writeUInt16LE(_,w.charCodeAt(S),R),R+=2;return R}static _readString(_,w){const R=D.readUInt32BE(_,w);return w+=4,(0,z.decodeUTF16LE)(_,w,R)}writeSize(){return 4+4+y._writeStringSize(this.oldText)+y._writeStringSize(this.newText)}write(_,w){return D.writeUInt32BE(_,this.oldPosition,w),w+=4,D.writeUInt32BE(_,this.newPosition,w),w+=4,w=y._writeString(_,this.oldText,w),w=y._writeString(_,this.newText,w),w}static read(_,w,R){const m=D.readUInt32BE(_,w);w+=4;const S=D.readUInt32BE(_,w);w+=4;const d=y._readString(_,w);w+=y._writeStringSize(d);const r=y._readString(_,w);return w+=y._writeStringSize(r),R.push(new y(m,d,S,r)),w}}e.TextChange=y;function A(P,_){return P===null||P.length===0?_:new j(P,_).compress()}e.compressConsecutiveTextChanges=A;class j{constructor(_,w){this._prevEdits=_,this._currEdits=w,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let _=0,w=0,R=this._getPrev(_),m=this._getCurr(w);for(;_<this._prevLen||w<this._currLen;){if(R===null){this._acceptCurr(m),m=this._getCurr(++w);continue}if(m===null){this._acceptPrev(R),R=this._getPrev(++_);continue}if(m.oldEnd<=R.newPosition){this._acceptCurr(m),m=this._getCurr(++w);continue}if(R.newEnd<=m.oldPosition){this._acceptPrev(R),R=this._getPrev(++_);continue}if(m.oldPosition<R.newPosition){const[l,t]=j._splitCurr(m,R.newPosition-m.oldPosition);this._acceptCurr(l),m=t;continue}if(R.newPosition<m.oldPosition){const[l,t]=j._splitPrev(R,m.oldPosition-R.newPosition);this._acceptPrev(l),R=t;continue}let r,s;if(m.oldEnd===R.newEnd)r=R,s=m,R=this._getPrev(++_),m=this._getCurr(++w);else if(m.oldEnd<R.newEnd){const[l,t]=j._splitPrev(R,m.oldLength);r=l,s=m,R=t,m=this._getCurr(++w)}else{const[l,t]=j._splitCurr(m,R.newLength);r=R,s=l,R=this._getPrev(++_),m=t}this._result[this._resultLen++]=new y(r.oldPosition,r.oldText,s.newPosition,s.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=s.newLength-s.oldLength}const S=j._merge(this._result);return j._removeNoOps(S)}_acceptCurr(_){this._result[this._resultLen++]=j._rebaseCurr(this._prevDeltaOffset,_),this._currDeltaOffset+=_.newLength-_.oldLength}_getCurr(_){return _<this._currLen?this._currEdits[_]:null}_acceptPrev(_){this._result[this._resultLen++]=j._rebasePrev(this._currDeltaOffset,_),this._prevDeltaOffset+=_.newLength-_.oldLength}_getPrev(_){return _<this._prevLen?this._prevEdits[_]:null}static _rebaseCurr(_,w){return new y(w.oldPosition-_,w.oldText,w.newPosition,w.newText)}static _rebasePrev(_,w){return new y(w.oldPosition,w.oldText,w.newPosition+_,w.newText)}static _splitPrev(_,w){const R=_.newText.substr(0,w),m=_.newText.substr(w);return[new y(_.oldPosition,_.oldText,_.newPosition,R),new y(_.oldEnd,"",_.newPosition+w,m)]}static _splitCurr(_,w){const R=_.oldText.substr(0,w),m=_.oldText.substr(w);return[new y(_.oldPosition,R,_.newPosition,_.newText),new y(_.oldPosition+w,m,_.newEnd,"")]}static _merge(_){if(_.length===0)return _;const w=[];let R=0,m=_[0];for(let S=1;S<_.length;S++){const d=_[S];m.oldEnd===d.oldPosition?m=new y(m.oldPosition,m.oldText+d.oldText,m.newPosition,m.newText+d.newText):(w[R++]=m,m=d)}return w[R++]=m,w}static _removeNoOps(_){if(_.length===0)return _;const w=[];let R=0;for(let m=0;m<_.length;m++){const S=_[m];S.oldText!==S.newText&&(w[R++]=S)}return w}}}),define(ne[10],ie([0,1,33,11,24,16,34]),function(te,e,D,z,W,y,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=void 0;const j=65535;function P(l){let t;return l[l.length-1]<65536?t=new Uint16Array(l.length):t=new Uint32Array(l.length),t.set(l,0),t}class _{constructor(t,a,n,o,f){this.lineStarts=t,this.cr=a,this.lf=n,this.crlf=o,this.isBasicASCII=f}}function w(l,t=!0){const a=[0];let n=1;for(let o=0,f=l.length;o<f;o++){const p=l.charCodeAt(o);p===13?o+1<f&&l.charCodeAt(o+1)===10?(a[n++]=o+2,o++):a[n++]=o+1:p===10&&(a[n++]=o+1)}return t?P(a):a}e.createLineStartsFast=w;function R(l,t){l.length=0,l[0]=0;let a=1,n=0,o=0,f=0,p=!0;for(let N=0,g=t.length;N<g;N++){const E=t.charCodeAt(N);E===13?N+1<g&&t.charCodeAt(N+1)===10?(f++,l[a++]=N+2,N++):(n++,l[a++]=N+1):E===10?(o++,l[a++]=N+1):p&&E!==9&&(E<32||E>126)&&(p=!1)}const I=new _(P(l),n,o,f,p);return l.length=0,I}e.createLineStarts=R;class m{constructor(t,a,n,o,f){this.bufferIndex=t,this.start=a,this.end=n,this.lineFeedCnt=o,this.length=f}}e.Piece=m;class S{constructor(t,a){this.buffer=t,this.lineStarts=a}}e.StringBuffer=S;class d{constructor(t,a){this._pieces=[],this._tree=t,this._BOM=a,this._index=0,t.root!==y.SENTINEL&&t.iterate(t.root,n=>(n!==y.SENTINEL&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class r{constructor(t){this._limit=t,this._cache=[]}get(t){for(let a=this._cache.length-1;a>=0;a--){const n=this._cache[a];if(n.nodeStartOffset<=t&&n.nodeStartOffset+n.node.piece.length>=t)return n}return null}get2(t){for(let a=this._cache.length-1;a>=0;a--){const n=this._cache[a];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<t&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=t)return n}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let a=!1;const n=this._cache;for(let o=0;o<n.length;o++){const f=n[o];if(f.node.parent===null||f.nodeStartOffset>=t){n[o]=null,a=!0;continue}}if(a){const o=[];for(const f of n)f!==null&&o.push(f);this._cache=o}}}class s{constructor(t,a,n){this.create(t,a,n)}create(t,a,n){this._buffers=[new S("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=y.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=a,this._EOLLength=a.length,this._EOLNormalized=n;let o=null;for(let f=0,p=t.length;f<p;f++)if(t[f].buffer.length>0){t[f].lineStarts||(t[f].lineStarts=w(t[f].buffer));const I=new m(f+1,{line:0,column:0},{line:t[f].lineStarts.length-1,column:t[f].buffer.length-t[f].lineStarts[t[f].lineStarts.length-1]},t[f].lineStarts.length-1,t[f].buffer.length);this._buffers.push(t[f]),o=this.rbInsertRight(o,I)}this._searchCache=new r(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const a=j,n=a-Math.floor(a/3),o=n*2;let f="",p=0;const I=[];if(this.iterate(this.root,N=>{const g=this.getNodeContent(N),E=g.length;if(p<=n||p+E<o)return f+=g,p+=E,!0;const L=f.replace(/\r\n|\r|\n/g,t);return I.push(new S(L,w(L))),f=g,p=E,!0}),p>0){const N=f.replace(/\r\n|\r|\n/g,t);I.push(new S(N,w(N)))}this.create(I,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new d(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const a=0;return this.iterate(this.root,o=>{if(o===y.SENTINEL)return!0;const f=this.getNodeContent(o),p=f.length,I=t.nodeAt(a),N=t.nodeAt(a+p),g=t.getValueInRange2(I,N);return f===g})}getOffsetAt(t,a){let n=0,o=this.root;for(;o!==y.SENTINEL;)if(o.left!==y.SENTINEL&&o.lf_left+1>=t)o=o.left;else{if(o.lf_left+o.piece.lineFeedCnt+1>=t)return n+=o.size_left,n+=this.getAccumulatedValue(o,t-o.lf_left-2)+a-1;t-=o.lf_left+o.piece.lineFeedCnt,n+=o.size_left+o.piece.length,o=o.right}return n}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let a=this.root,n=0;const o=t;for(;a!==y.SENTINEL;)if(a.size_left!==0&&a.size_left>=t)a=a.left;else if(a.size_left+a.piece.length>=t){const f=this.getIndexOf(a,t-a.size_left);if(n+=a.lf_left+f.index,f.index===0){const p=this.getOffsetAt(n+1,1),I=o-p;return new D.Position(n+1,I+1)}return new D.Position(n+1,f.remainder+1)}else if(t-=a.size_left+a.piece.length,n+=a.lf_left+a.piece.lineFeedCnt,a.right===y.SENTINEL){const f=this.getOffsetAt(n+1,1),p=o-t-f;return new D.Position(n+1,p+1)}else a=a.right;return new D.Position(1,1)}getValueInRange(t,a){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const n=this.nodeAt2(t.startLineNumber,t.startColumn),o=this.nodeAt2(t.endLineNumber,t.endColumn),f=this.getValueInRange2(n,o);return a?a!==this._EOL||!this._EOLNormalized?f.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this._EOLNormalized?f:f.replace(/\r\n|\r|\n/g,a):f}getValueInRange2(t,a){if(t.node===a.node){const I=t.node,N=this._buffers[I.piece.bufferIndex].buffer,g=this.offsetInBuffer(I.piece.bufferIndex,I.piece.start);return N.substring(g+t.remainder,g+a.remainder)}let n=t.node;const o=this._buffers[n.piece.bufferIndex].buffer,f=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let p=o.substring(f+t.remainder,f+n.piece.length);for(n=n.next();n!==y.SENTINEL;){const I=this._buffers[n.piece.bufferIndex].buffer,N=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===a.node){p+=I.substring(N,N+a.remainder);break}else p+=I.substr(N,n.piece.length);n=n.next()}return p}getLinesContent(){const t=[];let a=0,n="",o=!1;return this.iterate(this.root,f=>{if(f===y.SENTINEL)return!0;const p=f.piece;let I=p.length;if(I===0)return!0;const N=this._buffers[p.bufferIndex].buffer,g=this._buffers[p.bufferIndex].lineStarts,E=p.start.line,L=p.end.line;let h=g[E]+p.start.column;if(o&&(N.charCodeAt(h)===10&&(h++,I--),t[a++]=n,n="",o=!1,I===0))return!0;if(E===L)return!this._EOLNormalized&&N.charCodeAt(h+I-1)===13?(o=!0,n+=N.substr(h,I-1)):n+=N.substr(h,I),!0;n+=this._EOLNormalized?N.substring(h,Math.max(h,g[E+1]-this._EOLLength)):N.substring(h,g[E+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;for(let v=E+1;v<L;v++)n=this._EOLNormalized?N.substring(g[v],g[v+1]-this._EOLLength):N.substring(g[v],g[v+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;return!this._EOLNormalized&&N.charCodeAt(g[L]+p.end.column-1)===13?(o=!0,p.end.column===0?a--:n=N.substr(g[L],p.end.column-1)):n=N.substr(g[L],p.end.column),!0}),o&&(t[a++]=n,n=""),t[a++]=n,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const a=t.node.next();if(!a)return 0;const n=this._buffers[a.piece.bufferIndex],o=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return n.buffer.charCodeAt(o)}else{const a=this._buffers[t.node.piece.bufferIndex],o=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return a.buffer.charCodeAt(o)}}getLineCharCode(t,a){const n=this.nodeAt2(t,a+1);return this._getCharCode(n)}getLineLength(t){if(t===this.getLineCount()){const a=this.getOffsetAt(t,1);return this.getLength()-a}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const a=this.nodeAt(t);return this._getCharCode(a)}findMatchesInNode(t,a,n,o,f,p,I,N,g,E,L){const h=this._buffers[t.piece.bufferIndex],v=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),$=this.offsetInBuffer(t.piece.bufferIndex,f),x=this.offsetInBuffer(t.piece.bufferIndex,p);let Y;const Z={line:0,column:0};let B,i;a._wordSeparators?(B=h.buffer.substring($,x),i=b=>b+$,a.reset(0)):(B=h.buffer,i=b=>b,a.reset($));do if(Y=a.next(B),Y){if(i(Y.index)>=x)return E;this.positionInBuffer(t,i(Y.index)-v,Z);const b=this.getLineFeedCnt(t.piece.bufferIndex,f,Z),T=Z.line===f.line?Z.column-f.column+o:Z.column+1,c=T+Y[0].length;if(L[E++]=(0,A.createFindMatch)(new z.Range(n+b,T,n+b,c),Y,N),i(Y.index)+Y[0].length>=x||E>=g)return E}while(Y);return E}findMatchesLineByLine(t,a,n,o){const f=[];let p=0;const I=new A.Searcher(a.wordSeparators,a.regex);let N=this.nodeAt2(t.startLineNumber,t.startColumn);if(N===null)return[];const g=this.nodeAt2(t.endLineNumber,t.endColumn);if(g===null)return[];let E=this.positionInBuffer(N.node,N.remainder);const L=this.positionInBuffer(g.node,g.remainder);if(N.node===g.node)return this.findMatchesInNode(N.node,I,t.startLineNumber,t.startColumn,E,L,a,n,o,p,f),f;let h=t.startLineNumber,v=N.node;for(;v!==g.node;){const x=this.getLineFeedCnt(v.piece.bufferIndex,E,v.piece.end);if(x>=1){const Z=this._buffers[v.piece.bufferIndex].lineStarts,B=this.offsetInBuffer(v.piece.bufferIndex,v.piece.start),i=Z[E.line+x],b=h===t.startLineNumber?t.startColumn:1;if(p=this.findMatchesInNode(v,I,h,b,E,this.positionInBuffer(v,i-B),a,n,o,p,f),p>=o)return f;h+=x}const Y=h===t.startLineNumber?t.startColumn-1:0;if(h===t.endLineNumber){const Z=this.getLineContent(h).substring(Y,t.endColumn-1);return p=this._findMatchesInLine(a,I,Z,t.endLineNumber,Y,p,f,n,o),f}if(p=this._findMatchesInLine(a,I,this.getLineContent(h).substr(Y),h,Y,p,f,n,o),p>=o)return f;h++,N=this.nodeAt2(h,1),v=N.node,E=this.positionInBuffer(N.node,N.remainder)}if(h===t.endLineNumber){const x=h===t.startLineNumber?t.startColumn-1:0,Y=this.getLineContent(h).substring(x,t.endColumn-1);return p=this._findMatchesInLine(a,I,Y,t.endLineNumber,x,p,f,n,o),f}const $=h===t.startLineNumber?t.startColumn:1;return p=this.findMatchesInNode(g.node,I,h,$,E,L,a,n,o,p,f),f}_findMatchesInLine(t,a,n,o,f,p,I,N,g){const E=t.wordSeparators;if(!N&&t.simpleSearch){const h=t.simpleSearch,v=h.length,$=n.length;let x=-v;for(;(x=n.indexOf(h,x+v))!==-1;)if((!E||(0,A.isValidMatch)(E,n,$,x,v))&&(I[p++]=new W.FindMatch(new z.Range(o,x+1+f,o,x+1+v+f),null),p>=g))return p;return p}let L;a.reset(0);do if(L=a.next(n),L&&(I[p++]=(0,A.createFindMatch)(new z.Range(o,L.index+1+f,o,L.index+1+L[0].length+f),L,N),p>=g))return p;while(L);return p}insert(t,a,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==y.SENTINEL){const{node:o,remainder:f,nodeStartOffset:p}=this.nodeAt(t),I=o.piece,N=I.bufferIndex,g=this.positionInBuffer(o,f);if(o.piece.bufferIndex===0&&I.end.line===this._lastChangeBufferPos.line&&I.end.column===this._lastChangeBufferPos.column&&p+I.length===t&&a.length<j){this.appendToNode(o,a),this.computeBufferMetadata();return}if(p===t)this.insertContentToNodeLeft(a,o),this._searchCache.validate(t);else if(p+o.piece.length>t){const E=[];let L=new m(I.bufferIndex,g,I.end,this.getLineFeedCnt(I.bufferIndex,g,I.end),this.offsetInBuffer(N,I.end)-this.offsetInBuffer(N,g));if(this.shouldCheckCRLF()&&this.endWithCR(a)&&this.nodeCharCodeAt(o,f)===10){const x={line:L.start.line+1,column:0};L=new m(L.bufferIndex,x,L.end,this.getLineFeedCnt(L.bufferIndex,x,L.end),L.length-1),a+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(a))if(this.nodeCharCodeAt(o,f-1)===13){const x=this.positionInBuffer(o,f-1);this.deleteNodeTail(o,x),a="\r"+a,o.piece.length===0&&E.push(o)}else this.deleteNodeTail(o,g);else this.deleteNodeTail(o,g);const h=this.createNewPieces(a);L.length>0&&this.rbInsertRight(o,L);let v=o;for(let $=0;$<h.length;$++)v=this.rbInsertRight(v,h[$]);this.deleteNodes(E)}else this.insertContentToNodeRight(a,o)}else{const o=this.createNewPieces(a);let f=this.rbInsertLeft(null,o[0]);for(let p=1;p<o.length;p++)f=this.rbInsertRight(f,o[p])}this.computeBufferMetadata()}delete(t,a){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",a<=0||this.root===y.SENTINEL)return;const n=this.nodeAt(t),o=this.nodeAt(t+a),f=n.node,p=o.node;if(f===p){const h=this.positionInBuffer(f,n.remainder),v=this.positionInBuffer(f,o.remainder);if(n.nodeStartOffset===t){if(a===f.piece.length){const $=f.next();(0,y.rbDelete)(this,f),this.validateCRLFWithPrevNode($),this.computeBufferMetadata();return}this.deleteNodeHead(f,v),this._searchCache.validate(t),this.validateCRLFWithPrevNode(f),this.computeBufferMetadata();return}if(n.nodeStartOffset+f.piece.length===t+a){this.deleteNodeTail(f,h),this.validateCRLFWithNextNode(f),this.computeBufferMetadata();return}this.shrinkNode(f,h,v),this.computeBufferMetadata();return}const I=[],N=this.positionInBuffer(f,n.remainder);this.deleteNodeTail(f,N),this._searchCache.validate(t),f.piece.length===0&&I.push(f);const g=this.positionInBuffer(p,o.remainder);this.deleteNodeHead(p,g),p.piece.length===0&&I.push(p);const E=f.next();for(let h=E;h!==y.SENTINEL&&h!==p;h=h.next())I.push(h);const L=f.piece.length===0?f.prev():f;this.deleteNodes(I),this.validateCRLFWithNextNode(L),this.computeBufferMetadata()}insertContentToNodeLeft(t,a){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(a)){const p=a.piece,I={line:p.start.line+1,column:0},N=new m(p.bufferIndex,I,p.end,this.getLineFeedCnt(p.bufferIndex,I,p.end),p.length-1);a.piece=N,t+=`
`,(0,y.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a)}const o=this.createNewPieces(t);let f=this.rbInsertLeft(a,o[o.length-1]);for(let p=o.length-2;p>=0;p--)f=this.rbInsertLeft(f,o[p]);this.validateCRLFWithPrevNode(f),this.deleteNodes(n)}insertContentToNodeRight(t,a){this.adjustCarriageReturnFromNext(t,a)&&(t+=`
`);const n=this.createNewPieces(t),o=this.rbInsertRight(a,n[0]);let f=o;for(let p=1;p<n.length;p++)f=this.rbInsertRight(f,n[p]);this.validateCRLFWithPrevNode(o)}positionInBuffer(t,a,n){const o=t.piece,f=t.piece.bufferIndex,p=this._buffers[f].lineStarts,N=p[o.start.line]+o.start.column+a;let g=o.start.line,E=o.end.line,L=0,h=0,v=0;for(;g<=E&&(L=g+(E-g)/2|0,v=p[L],L!==E);)if(h=p[L+1],N<v)E=L-1;else if(N>=h)g=L+1;else break;return n?(n.line=L,n.column=N-v,null):{line:L,column:N-v}}getLineFeedCnt(t,a,n){if(n.column===0)return n.line-a.line;const o=this._buffers[t].lineStarts;if(n.line===o.length-1)return n.line-a.line;const f=o[n.line+1],p=o[n.line]+n.column;if(f>p+1)return n.line-a.line;const I=p-1;return this._buffers[t].buffer.charCodeAt(I)===13?n.line-a.line+1:n.line-a.line}offsetInBuffer(t,a){return this._buffers[t].lineStarts[a.line]+a.column}deleteNodes(t){for(let a=0;a<t.length;a++)(0,y.rbDelete)(this,t[a])}createNewPieces(t){if(t.length>j){const E=[];for(;t.length>j;){const h=t.charCodeAt(j-1);let v;h===13||h>=55296&&h<=56319?(v=t.substring(0,j-1),t=t.substring(j-1)):(v=t.substring(0,j),t=t.substring(j));const $=w(v);E.push(new m(this._buffers.length,{line:0,column:0},{line:$.length-1,column:v.length-$[$.length-1]},$.length-1,v.length)),this._buffers.push(new S(v,$))}const L=w(t);return E.push(new m(this._buffers.length,{line:0,column:0},{line:L.length-1,column:t.length-L[L.length-1]},L.length-1,t.length)),this._buffers.push(new S(t,L)),E}let a=this._buffers[0].buffer.length;const n=w(t,!1);let o=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===a&&a!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},o=this._lastChangeBufferPos;for(let E=0;E<n.length;E++)n[E]+=a+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+t,a+=1}else{if(a!==0)for(let E=0;E<n.length;E++)n[E]+=a;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=t}const f=this._buffers[0].buffer.length,p=this._buffers[0].lineStarts.length-1,I=f-this._buffers[0].lineStarts[p],N={line:p,column:I},g=new m(0,o,N,this.getLineFeedCnt(0,o,N),f-a);return this._lastChangeBufferPos=N,[g]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,a=0){let n=this.root,o="";const f=this._searchCache.get2(t);if(f){n=f.node;const p=this.getAccumulatedValue(n,t-f.nodeStartLineNumber-1),I=this._buffers[n.piece.bufferIndex].buffer,N=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(f.nodeStartLineNumber+n.piece.lineFeedCnt===t)o=I.substring(N+p,N+n.piece.length);else{const g=this.getAccumulatedValue(n,t-f.nodeStartLineNumber);return I.substring(N+p,N+g-a)}}else{let p=0;const I=t;for(;n!==y.SENTINEL;)if(n.left!==y.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const N=this.getAccumulatedValue(n,t-n.lf_left-2),g=this.getAccumulatedValue(n,t-n.lf_left-1),E=this._buffers[n.piece.bufferIndex].buffer,L=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return p+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:p,nodeStartLineNumber:I-(t-1-n.lf_left)}),E.substring(L+N,L+g-a)}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const N=this.getAccumulatedValue(n,t-n.lf_left-2),g=this._buffers[n.piece.bufferIndex].buffer,E=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o=g.substring(E+N,E+n.piece.length);break}else t-=n.lf_left+n.piece.lineFeedCnt,p+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==y.SENTINEL;){const p=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const I=this.getAccumulatedValue(n,0),N=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=p.substring(N,N+I-a),o}else{const I=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o+=p.substr(I,n.piece.length)}n=n.next()}return o}computeBufferMetadata(){let t=this.root,a=1,n=0;for(;t!==y.SENTINEL;)a+=t.lf_left+t.piece.lineFeedCnt,n+=t.size_left+t.piece.length,t=t.right;this._lineCnt=a,this._length=n,this._searchCache.validate(this._length)}getIndexOf(t,a){const n=t.piece,o=this.positionInBuffer(t,a),f=o.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===a){const p=this.getLineFeedCnt(t.piece.bufferIndex,n.start,o);if(p!==f)return{index:p,remainder:0}}return{index:f,remainder:o.column}}getAccumulatedValue(t,a){if(a<0)return 0;const n=t.piece,o=this._buffers[n.bufferIndex].lineStarts,f=n.start.line+a+1;return f>n.end.line?o[n.end.line]+n.end.column-o[n.start.line]-n.start.column:o[f]-o[n.start.line]-n.start.column}deleteNodeTail(t,a){const n=t.piece,o=n.lineFeedCnt,f=this.offsetInBuffer(n.bufferIndex,n.end),p=a,I=this.offsetInBuffer(n.bufferIndex,p),N=this.getLineFeedCnt(n.bufferIndex,n.start,p),g=N-o,E=I-f,L=n.length+E;t.piece=new m(n.bufferIndex,n.start,p,N,L),(0,y.updateTreeMetadata)(this,t,E,g)}deleteNodeHead(t,a){const n=t.piece,o=n.lineFeedCnt,f=this.offsetInBuffer(n.bufferIndex,n.start),p=a,I=this.getLineFeedCnt(n.bufferIndex,p,n.end),N=this.offsetInBuffer(n.bufferIndex,p),g=I-o,E=f-N,L=n.length+E;t.piece=new m(n.bufferIndex,p,n.end,I,L),(0,y.updateTreeMetadata)(this,t,E,g)}shrinkNode(t,a,n){const o=t.piece,f=o.start,p=o.end,I=o.length,N=o.lineFeedCnt,g=a,E=this.getLineFeedCnt(o.bufferIndex,o.start,g),L=this.offsetInBuffer(o.bufferIndex,a)-this.offsetInBuffer(o.bufferIndex,f);t.piece=new m(o.bufferIndex,o.start,g,E,L),(0,y.updateTreeMetadata)(this,t,L-I,E-N);const h=new m(o.bufferIndex,n,p,this.getLineFeedCnt(o.bufferIndex,n,p),this.offsetInBuffer(o.bufferIndex,p)-this.offsetInBuffer(o.bufferIndex,n)),v=this.rbInsertRight(t,h);this.validateCRLFWithPrevNode(v)}appendToNode(t,a){this.adjustCarriageReturnFromNext(a,t)&&(a+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(a)&&this.endWithCR(t),o=this._buffers[0].buffer.length;this._buffers[0].buffer+=a;const f=w(a,!1);for(let v=0;v<f.length;v++)f[v]+=o;if(n){const v=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:o-v}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(f.slice(1));const p=this._buffers[0].lineStarts.length-1,I=this._buffers[0].buffer.length-this._buffers[0].lineStarts[p],N={line:p,column:I},g=t.piece.length+a.length,E=t.piece.lineFeedCnt,L=this.getLineFeedCnt(0,t.piece.start,N),h=L-E;t.piece=new m(t.piece.bufferIndex,t.piece.start,N,L,g),this._lastChangeBufferPos=N,(0,y.updateTreeMetadata)(this,t,a.length,h)}nodeAt(t){let a=this.root;const n=this._searchCache.get(t);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:t-n.nodeStartOffset};let o=0;for(;a!==y.SENTINEL;)if(a.size_left>t)a=a.left;else if(a.size_left+a.piece.length>=t){o+=a.size_left;const f={node:a,remainder:t-a.size_left,nodeStartOffset:o};return this._searchCache.set(f),f}else t-=a.size_left+a.piece.length,o+=a.size_left+a.piece.length,a=a.right;return null}nodeAt2(t,a){let n=this.root,o=0;for(;n!==y.SENTINEL;)if(n.left!==y.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const f=this.getAccumulatedValue(n,t-n.lf_left-2),p=this.getAccumulatedValue(n,t-n.lf_left-1);return o+=n.size_left,{node:n,remainder:Math.min(f+a-1,p),nodeStartOffset:o}}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const f=this.getAccumulatedValue(n,t-n.lf_left-2);if(f+a-1<=n.piece.length)return{node:n,remainder:f+a-1,nodeStartOffset:o};a-=n.piece.length-f;break}else t-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==y.SENTINEL;){if(n.piece.lineFeedCnt>0){const f=this.getAccumulatedValue(n,0),p=this.offsetOfNode(n);return{node:n,remainder:Math.min(a-1,f),nodeStartOffset:p}}else if(n.piece.length>=a-1){const f=this.offsetOfNode(n);return{node:n,remainder:a-1,nodeStartOffset:f}}else a-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(t,a){if(t.piece.lineFeedCnt<1)return-1;const n=this._buffers[t.piece.bufferIndex],o=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+a;return n.buffer.charCodeAt(o)}offsetOfNode(t){if(!t)return 0;let a=t.size_left;for(;t!==this.root;)t.parent.right===t&&(a+=t.parent.size_left+t.parent.piece.length),t=t.parent;return a}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===y.SENTINEL||t.piece.lineFeedCnt===0)return!1;const a=t.piece,n=this._buffers[a.bufferIndex].lineStarts,o=a.start.line,f=n[o]+a.start.column;return o===n.length-1||n[o+1]>f+1?!1:this._buffers[a.bufferIndex].buffer.charCodeAt(f)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===y.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const a=t.prev();this.endWithCR(a)&&this.fixCRLF(a,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const a=t.next();this.startWithLF(a)&&this.fixCRLF(t,a)}}fixCRLF(t,a){const n=[],o=this._buffers[t.piece.bufferIndex].lineStarts;let f;t.piece.end.column===0?f={line:t.piece.end.line-1,column:o[t.piece.end.line]-o[t.piece.end.line-1]-1}:f={line:t.piece.end.line,column:t.piece.end.column-1};const p=t.piece.length-1,I=t.piece.lineFeedCnt-1;t.piece=new m(t.piece.bufferIndex,t.piece.start,f,I,p),(0,y.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&n.push(t);const N={line:a.piece.start.line+1,column:0},g=a.piece.length-1,E=this.getLineFeedCnt(a.piece.bufferIndex,N,a.piece.end);a.piece=new m(a.piece.bufferIndex,N,a.piece.end,E,g),(0,y.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a);const L=this.createNewPieces(`\r
`);this.rbInsertRight(t,L[0]);for(let h=0;h<n.length;h++)(0,y.rbDelete)(this,n[h])}adjustCarriageReturnFromNext(t,a){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const n=a.next();if(this.startWithLF(n)){if(t+=`
`,n.piece.length===1)(0,y.rbDelete)(this,n);else{const o=n.piece,f={line:o.start.line+1,column:0},p=o.length-1,I=this.getLineFeedCnt(o.bufferIndex,f,o.end);n.piece=new m(o.bufferIndex,f,o.end,I,p),(0,y.updateTreeMetadata)(this,n,-1,-1)}return!0}}return!1}iterate(t,a){if(t===y.SENTINEL)return a(y.SENTINEL);const n=this.iterate(t.left,a);return n&&a(t)&&this.iterate(t.right,a)}getNodeContent(t){if(t===y.SENTINEL)return"";const a=this._buffers[t.piece.bufferIndex],n=t.piece,o=this.offsetInBuffer(n.bufferIndex,n.start),f=this.offsetInBuffer(n.bufferIndex,n.end);return a.buffer.substring(o,f)}getPieceContent(t){const a=this._buffers[t.bufferIndex],n=this.offsetInBuffer(t.bufferIndex,t.start),o=this.offsetInBuffer(t.bufferIndex,t.end);return a.buffer.substring(n,o)}rbInsertRight(t,a){const n=new y.TreeNode(a,1);if(n.left=y.SENTINEL,n.right=y.SENTINEL,n.parent=y.SENTINEL,n.size_left=0,n.lf_left=0,this.root===y.SENTINEL)this.root=n,n.color=0;else if(t.right===y.SENTINEL)t.right=n,n.parent=t;else{const f=(0,y.leftest)(t.right);f.left=n,n.parent=f}return(0,y.fixInsert)(this,n),n}rbInsertLeft(t,a){const n=new y.TreeNode(a,1);if(n.left=y.SENTINEL,n.right=y.SENTINEL,n.parent=y.SENTINEL,n.size_left=0,n.lf_left=0,this.root===y.SENTINEL)this.root=n,n.color=0;else if(t.left===y.SENTINEL)t.left=n,n.parent=t;else{const o=(0,y.righttest)(t.left);o.right=n,n.parent=o}return(0,y.fixInsert)(this,n),n}getContentOfSubTree(t){let a="";return this.iterate(t,n=>(a+=this.getNodeContent(n),!0)),a}}e.PieceTreeBase=s}),define(ne[25],ie([0,1,20,3,11,24,10,15,23,6]),function(te,e,D,z,W,y,A,j,P,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class w extends _.Disposable{constructor(m,S,d,r,s,l,t){super(),this._onDidChangeContent=this._register(new D.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=S,this._mightContainNonBasicASCII=!l,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new A.PieceTreeBase(m,d,t)}equals(m){return!(m instanceof w)||this._BOM!==m._BOM||this.getEOL()!==m.getEOL()?!1:this._pieceTree.equal(m._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(m){return this._pieceTree.createSnapshot(m?this._BOM:"")}getOffsetAt(m,S){return this._pieceTree.getOffsetAt(m,S)}getPositionAt(m){return this._pieceTree.getPositionAt(m)}getRangeAt(m,S){const d=m+S,r=this.getPositionAt(m),s=this.getPositionAt(d);return new W.Range(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(m,S=0){if(m.isEmpty())return"";const d=this._getEndOfLine(S);return this._pieceTree.getValueInRange(m,d)}getValueLengthInRange(m,S=0){if(m.isEmpty())return 0;if(m.startLineNumber===m.endLineNumber)return m.endColumn-m.startColumn;const d=this.getOffsetAt(m.startLineNumber,m.startColumn),r=this.getOffsetAt(m.endLineNumber,m.endColumn);let s=0;const l=this._getEndOfLine(S),t=this.getEOL();if(l.length!==t.length){const a=l.length-t.length,n=m.endLineNumber-m.startLineNumber;s=a*n}return r-d+s}getCharacterCountInRange(m,S=0){if(this._mightContainNonBasicASCII){let d=0;const r=m.startLineNumber,s=m.endLineNumber;for(let l=r;l<=s;l++){const t=this.getLineContent(l),a=l===r?m.startColumn-1:0,n=l===s?m.endColumn-1:t.length;for(let o=a;o<n;o++)z.isHighSurrogate(t.charCodeAt(o))?(d=d+1,o=o+1):d=d+1}return d+=this._getEndOfLine(S).length*(s-r),d}return this.getValueLengthInRange(m,S)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(m){return this._pieceTree.getLineContent(m)}getLineCharCode(m,S){return this._pieceTree.getLineCharCode(m,S)}getCharCode(m){return this._pieceTree.getCharCode(m)}getLineLength(m){return this._pieceTree.getLineLength(m)}getLineMinColumn(m){return 1}getLineMaxColumn(m){return this.getLineLength(m)+1}getLineFirstNonWhitespaceColumn(m){const S=z.firstNonWhitespaceIndex(this.getLineContent(m));return S===-1?0:S+1}getLineLastNonWhitespaceColumn(m){const S=z.lastNonWhitespaceIndex(this.getLineContent(m));return S===-1?0:S+2}_getEndOfLine(m){switch(m){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(m){this._pieceTree.setEOL(m)}applyEdits(m,S,d){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,l=this._mightContainNonBasicASCII,t=!0,a=[];for(let g=0;g<m.length;g++){const E=m[g];t&&E._isTracked&&(t=!1);const L=E.range;if(E.text){let Y=!0;l||(Y=!z.isBasicASCII(E.text),l=Y),!r&&Y&&(r=z.containsRTL(E.text)),!s&&Y&&(s=z.containsUnusualLineTerminators(E.text))}let h="",v=0,$=0,x=0;if(E.text){let Y;[v,$,x,Y]=(0,j.countEOL)(E.text);const Z=this.getEOL();Y===0||Y===(Z===`\r
`?2:1)?h=E.text:h=E.text.replace(/\r\n|\r|\n/g,Z)}a[g]={sortIndex:g,identifier:E.identifier||null,range:L,rangeOffset:this.getOffsetAt(L.startLineNumber,L.startColumn),rangeLength:this.getValueLengthInRange(L),text:h,eolCount:v,firstLineLength:$,lastLineLength:x,forceMoveMarkers:Boolean(E.forceMoveMarkers),isAutoWhitespaceEdit:E.isAutoWhitespaceEdit||!1}}a.sort(w._sortOpsAscending);let n=!1;for(let g=0,E=a.length-1;g<E;g++){const L=a[g].range.getEndPosition(),h=a[g+1].range.getStartPosition();if(h.isBeforeOrEqual(L)){if(h.isBefore(L))throw new Error("Overlapping ranges are not allowed!");n=!0}}t&&(a=this._reduceOperations(a));const o=d||S?w._getInverseEditRanges(a):[],f=[];if(S)for(let g=0;g<a.length;g++){const E=a[g],L=o[g];if(E.isAutoWhitespaceEdit&&E.range.isEmpty())for(let h=L.startLineNumber;h<=L.endLineNumber;h++){let v="";h===L.startLineNumber&&(v=this.getLineContent(E.range.startLineNumber),z.firstNonWhitespaceIndex(v)!==-1)||f.push({lineNumber:h,oldContent:v})}}let p=null;if(d){let g=0;p=[];for(let E=0;E<a.length;E++){const L=a[E],h=o[E],v=this.getValueInRange(L.range),$=L.rangeOffset+g;g+=L.text.length-v.length,p[E]={sortIndex:L.sortIndex,identifier:L.identifier,range:h,text:v,textChange:new P.TextChange(L.rangeOffset,v,$,L.text)}}n||p.sort((E,L)=>E.sortIndex-L.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=l;const I=this._doApplyEdits(a);let N=null;if(S&&f.length>0){f.sort((g,E)=>E.lineNumber-g.lineNumber),N=[];for(let g=0,E=f.length;g<E;g++){const L=f[g].lineNumber;if(g>0&&f[g-1].lineNumber===L)continue;const h=f[g].oldContent,v=this.getLineContent(L);v.length===0||v===h||z.firstNonWhitespaceIndex(v)!==-1||N.push(L)}}return this._onDidChangeContent.fire(),new y.ApplyEditsResult(p,I,N)}_reduceOperations(m){return m.length<1e3?m:[this._toSingleEditOperation(m)]}_toSingleEditOperation(m){let S=!1;const d=m[0].range,r=m[m.length-1].range,s=new W.Range(d.startLineNumber,d.startColumn,r.endLineNumber,r.endColumn);let l=d.startLineNumber,t=d.startColumn;const a=[];for(let I=0,N=m.length;I<N;I++){const g=m[I],E=g.range;S=S||g.forceMoveMarkers,a.push(this.getValueInRange(new W.Range(l,t,E.startLineNumber,E.startColumn))),g.text.length>0&&a.push(g.text),l=E.endLineNumber,t=E.endColumn}const n=a.join(""),[o,f,p]=(0,j.countEOL)(n);return{sortIndex:0,identifier:m[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:n,eolCount:o,firstLineLength:f,lastLineLength:p,forceMoveMarkers:S,isAutoWhitespaceEdit:!1}}_doApplyEdits(m){m.sort(w._sortOpsDescending);const S=[];for(let d=0;d<m.length;d++){const r=m[d],s=r.range.startLineNumber,l=r.range.startColumn,t=r.range.endLineNumber,a=r.range.endColumn;if(s===t&&l===a&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const n=new W.Range(s,l,t,a);S.push({range:n,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return S}findMatchesLineByLine(m,S,d,r){return this._pieceTree.findMatchesLineByLine(m,S,d,r)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(m,S){const d=m.startLineNumber,r=m.startColumn,[s,l,t]=(0,j.countEOL)(S);let a;if(S.length>0){const n=s+1;n===1?a=new W.Range(d,r,d,r+l):a=new W.Range(d,r,d+n-1,t+1)}else a=new W.Range(d,r,d,r);return a}static _getInverseEditRanges(m){const S=[];let d=0,r=0,s=null;for(let l=0,t=m.length;l<t;l++){const a=m[l];let n,o;s?s.range.endLineNumber===a.range.startLineNumber?(n=d,o=r+(a.range.startColumn-s.range.endColumn)):(n=d+(a.range.startLineNumber-s.range.endLineNumber),o=a.range.startColumn):(n=a.range.startLineNumber,o=a.range.startColumn);let f;if(a.text.length>0){const p=a.eolCount+1;p===1?f=new W.Range(n,o,n,o+a.firstLineLength):f=new W.Range(n,o,n+p-1,a.lastLineLength+1)}else f=new W.Range(n,o,n,o);d=f.endLineNumber,r=f.endColumn,S.push(f),s=a}return S}static _sortOpsAscending(m,S){const d=W.Range.compareRangesUsingEnds(m.range,S.range);return d===0?m.sortIndex-S.sortIndex:d}static _sortOpsDescending(m,S){const d=W.Range.compareRangesUsingEnds(m.range,S.range);return d===0?S.sortIndex-m.sortIndex:-d}}e.PieceTreeTextBuffer=w}),define(ne[26],ie([0,1,3,10,25]),function(te,e,D,z,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=void 0;class y{constructor(P,_,w,R,m,S,d,r,s){this._chunks=P,this._bom=_,this._cr=w,this._lf=R,this._crlf=m,this._containsRTL=S,this._containsUnusualLineTerminators=d,this._isBasicASCII=r,this._normalizeEOL=s}_getEOL(P){const _=this._cr+this._lf+this._crlf,w=this._cr+this._crlf;return _===0?P===1?`
`:`\r
`:w>_/2?`\r
`:`
`}create(P){const _=this._getEOL(P),w=this._chunks;if(this._normalizeEOL&&(_===`\r
`&&(this._cr>0||this._lf>0)||_===`
`&&(this._cr>0||this._crlf>0)))for(let m=0,S=w.length;m<S;m++){const d=w[m].buffer.replace(/\r\n|\r|\n/g,_),r=(0,z.createLineStartsFast)(d);w[m]=new z.StringBuffer(d,r)}const R=new W.PieceTreeTextBuffer(w,this._bom,_,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:R,disposable:R}}getFirstLineText(P){return this._chunks[0].buffer.substr(0,P).split(/\r\n|\r|\n/)[0]}}class A{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(P){if(P.length===0)return;this.chunks.length===0&&D.startsWithUTF8BOM(P)&&(this.BOM=D.UTF8_BOM_CHARACTER,P=P.substr(1));const _=P.charCodeAt(P.length-1);_===13||_>=55296&&_<=56319?(this._acceptChunk1(P.substr(0,P.length-1),!1),this._hasPreviousChar=!0,this._previousChar=_):(this._acceptChunk1(P,!1),this._hasPreviousChar=!1,this._previousChar=_)}_acceptChunk1(P,_){!_&&P.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+P):this._acceptChunk2(P))}_acceptChunk2(P){const _=(0,z.createLineStarts)(this._tmpLineStarts,P);this.chunks.push(new z.StringBuffer(P,_.lineStarts)),this.cr+=_.cr,this.lf+=_.lf,this.crlf+=_.crlf,this.isBasicASCII&&(this.isBasicASCII=_.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=D.containsRTL(P)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=D.containsUnusualLineTerminators(P))}finish(P=!0){return this._finish(),new y(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,P)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const P=this.chunks[this.chunks.length-1];P.buffer+=String.fromCharCode(this._previousChar);const _=(0,z.createLineStartsFast)(P.buffer);P.lineStarts=_,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=A}),define(ne[27],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var D;(function(A){A.serviceIds=new Map,A.DI_TARGET="$di$target",A.DI_DEPENDENCIES="$di$dependencies";function j(P){return P[A.DI_DEPENDENCIES]||[]}A.getServiceDependencies=j})(D=e._util||(e._util={})),e.IInstantiationService=W("instantiationService");function z(A,j,P){j[D.DI_TARGET]===j?j[D.DI_DEPENDENCIES].push({id:A,index:P}):(j[D.DI_DEPENDENCIES]=[{id:A,index:P}],j[D.DI_TARGET]=j)}function W(A){if(D.serviceIds.has(A))return D.serviceIds.get(A);const j=function(P,_,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");z(j,P,w)};return j.toString=()=>A,D.serviceIds.set(A,j),j}e.createDecorator=W;function y(A){return A}e.refineServiceDecorator=y}),define(ne[28],ie([0,1,2,3,27]),function(te,e,D,z,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const y=new Map;y.set("false",!1),y.set("true",!0),y.set("isMac",D.isMacintosh),y.set("isLinux",D.isLinux),y.set("isWindows",D.isWindows),y.set("isWeb",D.isWeb),y.set("isMacNative",D.isMacintosh&&!D.isWeb),y.set("isEdge",D.isEdge),y.set("isFirefox",D.isFirefox),y.set("isChrome",D.isChrome),y.set("isSafari",D.isSafari);const A=Object.prototype.hasOwnProperty;var j;(function(B){B[B.False=0]="False",B[B.True=1]="True",B[B.Defined=2]="Defined",B[B.Not=3]="Not",B[B.Equals=4]="Equals",B[B.NotEquals=5]="NotEquals",B[B.And=6]="And",B[B.Regex=7]="Regex",B[B.NotRegex=8]="NotRegex",B[B.Or=9]="Or",B[B.In=10]="In",B[B.NotIn=11]="NotIn",B[B.Greater=12]="Greater",B[B.GreaterEquals=13]="GreaterEquals",B[B.Smaller=14]="Smaller",B[B.SmallerEquals=15]="SmallerEquals"})(j=e.ContextKeyExprType||(e.ContextKeyExprType={}));class P{static false(){return R.INSTANCE}static true(){return m.INSTANCE}static has(i){return S.create(i)}static equals(i,b){return d.create(i,b)}static notEquals(i,b){return l.create(i,b)}static regex(i,b){return I.create(i,b)}static in(i,b){return r.create(i,b)}static notIn(i,b){return s.create(i,b)}static not(i){return t.create(i)}static and(...i){return E.create(i,null,!0)}static or(...i){return L.create(i,null,!0)}static greater(i,b){return n.create(i,b)}static greaterEquals(i,b){return o.create(i,b)}static smaller(i,b){return f.create(i,b)}static smallerEquals(i,b){return p.create(i,b)}static deserialize(i,b=!1){if(!!i)return this._deserializeOrExpression(i,b)}static _deserializeOrExpression(i,b){const T=i.split("||");return L.create(T.map(c=>this._deserializeAndExpression(c,b)),null,!0)}static _deserializeAndExpression(i,b){const T=i.split("&&");return E.create(T.map(c=>this._deserializeOne(c,b)),null,!0)}static _deserializeOne(i,b){if(i=i.trim(),i.indexOf("!=")>=0){const T=i.split("!=");return l.create(T[0].trim(),this._deserializeValue(T[1],b))}if(i.indexOf("==")>=0){const T=i.split("==");return d.create(T[0].trim(),this._deserializeValue(T[1],b))}if(i.indexOf("=~")>=0){const T=i.split("=~");return I.create(T[0].trim(),this._deserializeRegexValue(T[1],b))}if(i.indexOf(" not in ")>=0){const T=i.split(" not in ");return s.create(T[0].trim(),this._deserializeValue(T[1],b))}if(i.indexOf(" in ")>=0){const T=i.split(" in ");return r.create(T[0].trim(),this._deserializeValue(T[1],b))}if(/^[^<=>]+>=[^<=>]+$/.test(i)){const T=i.split(">=");return o.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(i)){const T=i.split(">");return n.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(i)){const T=i.split("<=");return p.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(i)){const T=i.split("<");return f.create(T[0].trim(),T[1].trim())}return/^\!\s*/.test(i)?t.create(i.substr(1).trim()):S.create(i)}static _deserializeValue(i,b){if(i=i.trim(),i==="true")return!0;if(i==="false")return!1;const T=/^'([^']*)'$/.exec(i);return T?T[1].trim():i}static _deserializeRegexValue(i,b){if((0,z.isFalsyOrWhitespace)(i)){if(b)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const T=i.indexOf("/"),c=i.lastIndexOf("/");if(T===c||T<0){if(b)throw new Error(`bad regexp-value '${i}', missing /-enclosure`);return console.warn(`bad regexp-value '${i}', missing /-enclosure`),null}const H=i.slice(T+1,c),K=i[c+1]==="i"?"i":"";try{return new RegExp(H,K)}catch(k){if(b)throw new Error(`bad regexp-value '${i}', parse error: ${k}`);return console.warn(`bad regexp-value '${i}', parse error: ${k}`),null}}}e.ContextKeyExpr=P;function _(B,i){const b=B?B.substituteConstants():void 0,T=i?i.substituteConstants():void 0;return!b&&!T?!0:!b||!T?!1:b.equals(T)}e.expressionsAreEqualWithConstantSubstitution=_;function w(B,i){return B.cmp(i)}class R{constructor(){this.type=0}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!1}serialize(){return"false"}keys(){return[]}map(i){return this}negate(){return m.INSTANCE}}e.ContextKeyFalseExpr=R,R.INSTANCE=new R;class m{constructor(){this.type=1}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!0}serialize(){return"true"}keys(){return[]}map(i){return this}negate(){return R.INSTANCE}}e.ContextKeyTrueExpr=m,m.INSTANCE=new m;class S{static create(i,b=null){const T=y.get(i);return typeof T=="boolean"?T?m.INSTANCE:R.INSTANCE:new S(i,b)}constructor(i,b){this.key=i,this.negated=b,this.type=2}cmp(i){return i.type!==this.type?this.type-i.type:v(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){const i=y.get(this.key);return typeof i=="boolean"?i?m.INSTANCE:R.INSTANCE:this}evaluate(i){return!!i.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(i){return i.mapDefined(this.key)}negate(){return this.negated||(this.negated=t.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=S;class d{static create(i,b,T=null){if(typeof b=="boolean")return b?S.create(i,T):t.create(i,T);const c=y.get(i);return typeof c=="boolean"?b===(c?"true":"false")?m.INSTANCE:R.INSTANCE:new d(i,b,T)}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=4}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){const i=y.get(this.key);if(typeof i=="boolean"){const b=i?"true":"false";return this.value===b?m.INSTANCE:R.INSTANCE}return this}evaluate(i){return i.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(i){return i.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=l.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=d;class r{static create(i,b){return new r(i,b)}constructor(i,b){this.key=i,this.valueKey=b,this.type=10,this.negated=null}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.valueKey,i.key,i.valueKey)}equals(i){return i.type===this.type?this.key===i.key&&this.valueKey===i.valueKey:!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.valueKey),T=i.getValue(this.key);return Array.isArray(b)?b.includes(T):typeof T=="string"&&typeof b=="object"&&b!==null?A.call(b,T):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(i){return i.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=s.create(this.key,this.valueKey)),this.negated}}e.ContextKeyInExpr=r;class s{static create(i,b){return new s(i,b)}constructor(i,b){this.key=i,this.valueKey=b,this.type=11,this._negated=r.create(i,b)}cmp(i){return i.type!==this.type?this.type-i.type:this._negated.cmp(i._negated)}equals(i){return i.type===this.type?this._negated.equals(i._negated):!1}substituteConstants(){return this}evaluate(i){return!this._negated.evaluate(i)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(i){return i.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}e.ContextKeyNotInExpr=s;class l{static create(i,b,T=null){if(typeof b=="boolean")return b?t.create(i,T):S.create(i,T);const c=y.get(i);return typeof c=="boolean"?b===(c?"true":"false")?R.INSTANCE:m.INSTANCE:new l(i,b,T)}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=5}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){const i=y.get(this.key);if(typeof i=="boolean"){const b=i?"true":"false";return this.value===b?R.INSTANCE:m.INSTANCE}return this}evaluate(i){return i.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(i){return i.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=d.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=l;class t{static create(i,b=null){const T=y.get(i);return typeof T=="boolean"?T?R.INSTANCE:m.INSTANCE:new t(i,b)}constructor(i,b){this.key=i,this.negated=b,this.type=3}cmp(i){return i.type!==this.type?this.type-i.type:v(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){const i=y.get(this.key);return typeof i=="boolean"?i?R.INSTANCE:m.INSTANCE:this}evaluate(i){return!i.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(i){return i.mapNot(this.key)}negate(){return this.negated||(this.negated=S.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=t;function a(B,i){if(typeof B=="string"){const b=parseFloat(B);isNaN(b)||(B=b)}return typeof B=="string"||typeof B=="number"?i(B):R.INSTANCE}class n{static create(i,b,T=null){return a(b,c=>new n(i,c,T))}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=12}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){return this}evaluate(i){return typeof this.value=="string"?!1:parseFloat(i.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(i){return i.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=p.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=n;class o{static create(i,b,T=null){return a(b,c=>new o(i,c,T))}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=13}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){return this}evaluate(i){return typeof this.value=="string"?!1:parseFloat(i.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(i){return i.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=f.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=o;class f{static create(i,b,T=null){return a(b,c=>new f(i,c,T))}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=14}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){return this}evaluate(i){return typeof this.value=="string"?!1:parseFloat(i.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(i){return i.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=o.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=f;class p{static create(i,b,T=null){return a(b,c=>new p(i,c,T))}constructor(i,b,T){this.key=i,this.value=b,this.negated=T,this.type=15}cmp(i){return i.type!==this.type?this.type-i.type:$(this.key,this.value,i.key,i.value)}equals(i){return i.type===this.type?this.key===i.key&&this.value===i.value:!1}substituteConstants(){return this}evaluate(i){return typeof this.value=="string"?!1:parseFloat(i.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(i){return i.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=n.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=p;class I{static create(i,b){return new I(i,b)}constructor(i,b){this.key=i,this.regexp=b,this.type=7,this.negated=null}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.key<i.key)return-1;if(this.key>i.key)return 1;const b=this.regexp?this.regexp.source:"",T=i.regexp?i.regexp.source:"";return b<T?-1:b>T?1:0}equals(i){if(i.type===this.type){const b=this.regexp?this.regexp.source:"",T=i.regexp?i.regexp.source:"";return this.key===i.key&&b===T}return!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.key);return this.regexp?this.regexp.test(b):!1}serialize(){const i=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${i}`}keys(){return[this.key]}map(i){return i.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=N.create(this)),this.negated}}e.ContextKeyRegexExpr=I;class N{static create(i){return new N(i)}constructor(i){this._actual=i,this.type=8}cmp(i){return i.type!==this.type?this.type-i.type:this._actual.cmp(i._actual)}equals(i){return i.type===this.type?this._actual.equals(i._actual):!1}substituteConstants(){return this}evaluate(i){return!this._actual.evaluate(i)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(i){return new N(this._actual.map(i))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=N;function g(B){let i=null;for(let b=0,T=B.length;b<T;b++){const c=B[b].substituteConstants();if(B[b]!==c&&i===null){i=[];for(let H=0;H<b;H++)i[H]=B[H]}i!==null&&(i[b]=c)}return i===null?B:i}class E{static create(i,b,T){return E._normalizeArr(i,b,T)}constructor(i,b){this.expr=i,this.negated=b,this.type=6}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,T=this.expr.length;b<T;b++){const c=w(this.expr[b],i.expr[b]);if(c!==0)return c}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,T=this.expr.length;b<T;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:E.create(i,this.negated,!1)}evaluate(i){for(let b=0,T=this.expr.length;b<T;b++)if(!this.expr[b].evaluate(i))return!1;return!0}static _normalizeArr(i,b,T){const c=[];let H=!1;for(const K of i)if(!!K){if(K.type===1){H=!0;continue}if(K.type===0)return R.INSTANCE;if(K.type===6){c.push(...K.expr);continue}c.push(K)}if(c.length===0&&H)return m.INSTANCE;if(c.length!==0){if(c.length===1)return c[0];c.sort(w);for(let K=1;K<c.length;K++)c[K-1].equals(c[K])&&(c.splice(K,1),K--);if(c.length===1)return c[0];for(;c.length>1;){const K=c[c.length-1];if(K.type!==9)break;c.pop();const k=c.pop(),q=c.length===0,M=L.create(K.expr.map(V=>E.create([V,k],null,T)),null,q);M&&(c.push(M),c.sort(w))}if(c.length===1)return c[0];if(T){for(let K=0;K<c.length;K++)for(let k=K+1;k<c.length;k++)if(c[K].negate().equals(c[k]))return R.INSTANCE;if(c.length===1)return c[0]}return new E(c,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" && ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new E(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.negated){const i=[];for(const b of this.expr)i.push(b.negate());this.negated=L.create(i,this,!0)}return this.negated}}class L{static create(i,b,T){return L._normalizeArr(i,b,T)}constructor(i,b){this.expr=i,this.negated=b,this.type=9}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,T=this.expr.length;b<T;b++){const c=w(this.expr[b],i.expr[b]);if(c!==0)return c}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,T=this.expr.length;b<T;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:L.create(i,this.negated,!1)}evaluate(i){for(let b=0,T=this.expr.length;b<T;b++)if(this.expr[b].evaluate(i))return!0;return!1}static _normalizeArr(i,b,T){let c=[],H=!1;if(i){for(let K=0,k=i.length;K<k;K++){const q=i[K];if(!!q){if(q.type===0){H=!0;continue}if(q.type===1)return m.INSTANCE;if(q.type===9){c=c.concat(q.expr);continue}c.push(q)}}if(c.length===0&&H)return R.INSTANCE;c.sort(w)}if(c.length!==0){if(c.length===1)return c[0];for(let K=1;K<c.length;K++)c[K-1].equals(c[K])&&(c.splice(K,1),K--);if(c.length===1)return c[0];if(T){for(let K=0;K<c.length;K++)for(let k=K+1;k<c.length;k++)if(c[K].negate().equals(c[k]))return m.INSTANCE;if(c.length===1)return c[0]}return new L(c,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" || ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new L(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.negated){const i=[];for(const b of this.expr)i.push(b.negate());for(;i.length>1;){const b=i.shift(),T=i.shift(),c=[];for(const H of Z(b))for(const K of Z(T))c.push(E.create([H,K],null,!1));i.unshift(L.create(c,null,!1))}this.negated=L.create(i,this,!0)}return this.negated}}class h extends S{static all(){return h._info.values()}constructor(i,b,T){super(i,null),this._defaultValue=b,typeof T=="object"?h._info.push({...T,key:i}):T!==!0&&h._info.push({key:i,description:T,type:b!=null?typeof b:void 0})}bindTo(i){return i.createKey(this.key,this._defaultValue)}getValue(i){return i.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(i){return d.create(this.key,i)}notEqualsTo(i){return l.create(this.key,i)}}e.RawContextKey=h,h._info=[],e.IContextKeyService=(0,W.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function v(B,i){return B<i?-1:B>i?1:0}function $(B,i,b,T){return B<b?-1:B>b?1:i<T?-1:i>T?1:0}function x(B,i){if(B.type===0||i.type===1)return!0;if(B.type===9)return i.type===9?Y(B.expr,i.expr):!1;if(i.type===9){for(const b of i.expr)if(x(B,b))return!0;return!1}if(B.type===6){if(i.type===6)return Y(i.expr,B.expr);for(const b of B.expr)if(x(b,i))return!0;return!1}return B.equals(i)}e.implies=x;function Y(B,i){let b=0,T=0;for(;b<B.length&&T<i.length;){const c=B[b].cmp(i[T]);if(c<0)return!1;c===0&&b++,T++}return b===B.length}function Z(B){return B.type===9?B.expr:[B]}}),define(ne[29],ie([0,1,5,21,35,17,8,4,2,28]),function(te,e,D,z,W,y,A,j,P,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressOutputItemStreams=e.isTextStreamMime=e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.INTERACTIVE_WINDOW_EDITOR_ID=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",e.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var w;(function(c){c[c.Markup=1]="Markup",c[c.Code=2]="Code"})(w=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",y.Mimes.latex,y.Mimes.markdown,"image/png","image/jpeg",y.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[y.Mimes.latex,y.Mimes.markdown,"application/json",y.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var R;(function(c){c[c.Running=1]="Running",c[c.Idle=2]="Idle"})(R=e.NotebookRunState||(e.NotebookRunState={}));var m;(function(c){c[c.Unconfirmed=1]="Unconfirmed",c[c.Pending=2]="Pending",c[c.Executing=3]="Executing"})(m=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var S;(function(c){c[c.WithHardKernelDependency=0]="WithHardKernelDependency",c[c.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",c[c.Pure=2]="Pure",c[c.Never=3]="Never"})(S=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var d;(function(c){c.Always="always",c.Never="never",c.Optional="optional"})(d=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var r;(function(c){c[c.ModelChange=1]="ModelChange",c[c.Move=2]="Move",c[c.ChangeCellLanguage=5]="ChangeCellLanguage",c[c.Initialize=6]="Initialize",c[c.ChangeCellMetadata=7]="ChangeCellMetadata",c[c.Output=8]="Output",c[c.OutputItem=9]="OutputItem",c[c.ChangeCellContent=10]="ChangeCellContent",c[c.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",c[c.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",c[c.ChangeCellMime=13]="ChangeCellMime",c[c.Unknown=100]="Unknown"})(r=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var s;(function(c){c[c.Handle=0]="Handle",c[c.Index=1]="Index"})(s=e.SelectionStateType||(e.SelectionStateType={}));var l;(function(c){c[c.Replace=1]="Replace",c[c.Output=2]="Output",c[c.Metadata=3]="Metadata",c[c.CellLanguage=4]="CellLanguage",c[c.DocumentMetadata=5]="DocumentMetadata",c[c.Move=6]="Move",c[c.OutputItems=7]="OutputItems",c[c.PartialMetadata=8]="PartialMetadata",c[c.PartialInternalMetadata=9]="PartialInternalMetadata"})(l=e.CellEditType||(e.CellEditType={}));var t;(function(c){c.scheme=A.Schemas.vscodeNotebookCell;const H=["W","X","Y","Z","a","b","c","d","e","f"],K=new RegExp(`^[${H.join("")}]+`),k=7;function q(u,C){const O=C.toString(k),G=`${O.length<H.length?H[O.length-1]:"z"}${O}s${(0,D.encodeBase64)(D.VSBuffer.fromString(u.scheme),!0,!0)}`;return u.with({scheme:c.scheme,fragment:G})}c.generate=q;function M(u){if(u.scheme!==c.scheme)return;const C=u.fragment.indexOf("s");if(C<0)return;const O=parseInt(u.fragment.substring(0,C).replace(K,""),k),U=(0,D.decodeBase64)(u.fragment.substring(C+1)).toString();if(!isNaN(O))return{handle:O,notebook:u.with({scheme:U,fragment:null})}}c.parse=M;function V(u,C){return u.with({scheme:A.Schemas.vscodeNotebookCellOutput,fragment:`op${C??""},${u.scheme!==A.Schemas.file?u.scheme:""}`})}c.generateCellOutputUri=V;function Q(u){if(u.scheme!==A.Schemas.vscodeNotebookCellOutput)return;const C=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(u.fragment);if(!C)return;const O=C[1]&&C[1]!==""?C[1]:void 0,U=C[2];return{outputId:O,notebook:u.with({scheme:U||A.Schemas.file,fragment:null})}}c.parseCellOutputUri=Q;function X(u,C,O){return c.generate(u,C).with({scheme:O})}c.generateCellPropertyUri=X;function F(u,C){if(u.scheme===C)return c.parse(u.with({scheme:c.scheme}))}c.parseCellPropertyUri=F})(t=e.CellUri||(e.CellUri={}));const a=c=>P.isWindows?c.replace(/\//g,"\\"):c;class n{constructor(H=[],K=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=K,this.order=[...new Set(H)].map(k=>({pattern:k,matches:z.parse(a(k))}))}sort(H){const K=new Map(W.Iterable.map(H,q=>[q,a(q)]));let k=[];for(const{matches:q}of this.order)for(const[M,V]of K)if(q(V)){k.push(M),K.delete(M);break}return K.size&&(k=k.concat([...K.keys()].sort((q,M)=>this.defaultOrder.indexOf(q)-this.defaultOrder.indexOf(M)))),k}prioritize(H,K){const k=this.findIndex(H);if(k===-1){this.order.unshift({pattern:H,matches:z.parse(a(H))});return}const q=new Set(K.map(V=>this.findIndex(V,k)));q.delete(-1);const M=Array.from(q).sort();this.order.splice(k+1,0,...M.map(V=>this.order[V]));for(let V=M.length-1;V>=0;V--)this.order.splice(M[V],1)}toArray(){return this.order.map(H=>H.pattern)}findIndex(H,K=this.order.length){const k=a(H);for(let q=0;q<K;q++)if(this.order[q].matches(k))return q;return-1}}e.MimeTypeDisplayOrder=n;function o(c,H,K,k=(q,M)=>q===M){const q=[];function M(X,F,u){if(F===0&&u.length===0)return;const C=q[q.length-1];C&&C.start+C.deleteCount===X?(C.deleteCount+=F,C.toInsert.push(...u)):q.push({start:X,deleteCount:F,toInsert:u})}let V=0,Q=0;for(;;){if(V===c.length){M(V,0,H.slice(Q));break}if(Q===H.length){M(V,c.length-V,[]);break}const X=c[V],F=H[Q];if(k(X,F)){V+=1,Q+=1;continue}K(F)?(M(V,1,[]),V+=1):(M(V,0,[F]),Q+=1)}return q}e.diff=o,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new _.RawContextKey("notebookEditorCursorAtBoundary","none");var f;(function(c){c.default="default",c.option="option"})(f=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function p(c){const H=c;return!!((typeof H.include=="string"||z.isRelativePattern(H.include))&&(typeof H.exclude=="string"||z.isRelativePattern(H.exclude)))}e.isDocumentExcludePattern=p;function I(c,H,K){if(Array.isArray(c.viewType)&&c.viewType.indexOf(H)>=0||c.viewType===H)return!0;if(c.filenamePattern){const k=p(c.filenamePattern)?c.filenamePattern.include:c.filenamePattern,q=p(c.filenamePattern)?c.filenamePattern.exclude:void 0;if(z.match(k,(0,j.basename)(K.fsPath).toLowerCase()))return!(q&&z.match(q,(0,j.basename)(K.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=I,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",kernelPickerType:"notebook.kernelPicker.type",outputScrolling:"notebook.experimental.outputScrolling"};var N;(function(c){c[c.Left=1]="Left",c[c.Right=2]="Right"})(N=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class g{static create(H){return`${g._prefix}${H}`}static parse(H){if(H.startsWith(g._prefix))return H.substring(g._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=g,g._prefix="notebook/";function E(c){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(c)}e.isTextStreamMime=E;const L=new TextDecoder;function h(c){const H=[];let K=!1;for(const k of c)(H.length===0||K)&&(H.push(k),K=!0);return Y(H),T(D.VSBuffer.concat(H.map(k=>D.VSBuffer.wrap(k))))}e.compressOutputItemStreams=h;const v=`${String.fromCharCode(27)}[A`,$=v.split("").map(c=>c.charCodeAt(0)),x=10;function Y(c){c.forEach((H,K)=>{if(K===0||H.length<v.length)return;const k=c[K-1],q=H.subarray(0,v.length);if(q[0]===$[0]&&q[1]===$[1]&&q[2]===$[2]){const M=k.lastIndexOf(x);if(M===-1)return;c[K-1]=k.subarray(0,M),c[K]=H.subarray(v.length)}})}function Z(c){let H=c;do c=H,H=c.replace(/[^\n]\x08/gm,"");while(H.length<c.length);return c}function B(c){for(c=c.replace(/\r+\n/gm,`
`);c.search(/\r[^$]/g)>-1;){const H=c.match(/^(.*)\r+/m)[1];let K=c.match(/\r+(.*)$/m)[1];K=K+H.slice(K.length,H.length),c=c.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,K)}return c}const i="\b".charCodeAt(0),b="\r".charCodeAt(0);function T(c){return!c.buffer.includes(i)&&!c.buffer.includes(b)?c:D.VSBuffer.fromString(B(Z(L.decode(c.buffer))))}}),define(ne[36],ie([0,1,37,38,9,26,29,11]),function(te,e,D,z,W,y,A,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=void 0;function P(d){let r=(0,z.numberHash)(104579,0);for(let s=0;s<d.buffer.length;s++)r=(0,z.doHash)(d.buffer[s],r);return r}class _{get textBuffer(){if(this._textBuffer)return this._textBuffer;const r=new y.PieceTreeTextBufferBuilder;r.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const s=r.finish(!0);return this._textBuffer=s.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,z.hash)(this.getValue())),this._primaryKey}constructor(r,s,l,t,a,n,o){this.handle=r,this._source=s,this.language=l,this.cellKind=t,this.outputs=a,this.metadata=n,this.internalMetadata=o,this._primaryKey=null,this._hash=null}getFullModelRange(){const r=this.textBuffer.getLineCount();return new j.Range(1,1,r,this.textBuffer.getLineLength(r)+1)}getValue(){const r=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(r,1):this.textBuffer.getValueInRange(r,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,z.hash)([(0,z.hash)(this.language),(0,z.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(r=>({outputs:r.outputs.map(s=>({mime:s.mime,data:P(s.data)})),metadata:r.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,z.hash)([(0,z.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class w{constructor(r,s,l){this.uri=r,this.cells=s,this.metadata=l}acceptModelChanged(r){r.rawEvents.forEach(s=>{if(s.kind===A.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===A.NotebookCellsChangeType.Move){const l=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...l)}else if(s.kind===A.NotebookCellsChangeType.Output){const l=this.cells[s.index];l.outputs=s.outputs}else if(s.kind===A.NotebookCellsChangeType.ChangeCellLanguage){const l=this.cells[s.index];l.language=s.language}else if(s.kind===A.NotebookCellsChangeType.ChangeCellMetadata){const l=this.cells[s.index];l.metadata=s.metadata}else if(s.kind===A.NotebookCellsChangeType.ChangeCellInternalMetadata){const l=this.cells[s.index];l.internalMetadata=s.internalMetadata}})}_spliceNotebookCells(r){r.reverse().forEach(s=>{const t=s[2].map(a=>new _(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(s[0],s[1],...t)})}}class R{constructor(r){this.textModel=r}getElements(){const r=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)r[s]=this.textModel.cells[s].getComparisonValue();return r}getCellHash(r){const s=Array.isArray(r.source)?r.source.join(`
`):r.source;return(0,z.hash)([(0,z.hash)(s),r.metadata])}}class m{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(r,s){this._models[r]=new w(W.URI.parse(r),s.cells.map(l=>new _(l.handle,l.source,l.language,l.cellKind,l.outputs,l.metadata)),s.metadata)}acceptModelChanged(r,s){this._models[r]?.acceptModelChanged(s)}acceptRemovedModel(r){!this._models[r]||delete this._models[r]}computeDiff(r,s){const l=this._getModel(r),t=this._getModel(s);return{cellsDiff:new D.LcsDiff(new R(l),new R(t)).ComputeDiff(!1)}}_getModel(r){return this._models[r]}}e.NotebookEditorSimpleWorker=m;function S(d){return new m}e.create=S})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/d2c422ca15f1fbc976eed3e02e3392bbb39c5824/core/vs\workbench\contrib\notebook\common\services\notebookSimpleWorker.js.map
