/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ee=["require","exports","vs/base/common/lifecycle","vs/base/common/event","vs/base/common/platform","vs/platform/instantiation/common/instantiation","vs/platform/log/common/log","vs/base/common/uri","vs/base/common/async","vs/base/common/path","vs/nls!vs/code/electron-main/main","vs/nls","vs/base/common/types","electron","vs/base/common/network","vs/base/common/errors","vs/platform/files/common/files","vs/base/common/buffer","vs/platform/configuration/common/configuration","vs/platform/product/common/productService","vs/base/common/resources","vs/platform/lifecycle/electron-main/lifecycleMainService","vs/base/common/cancellation","vs/base/node/pfs","vs/base/common/arrays","os","vs/base/common/strings","vs/platform/environment/electron-main/environmentMainService","vs/platform/workspace/common/workspace","vs/base/common/uuid","vs/base/common/extpath","vs/platform/telemetry/common/telemetry","vs/platform/windows/electron-main/windows","vs/base/common/process","vs/base/common/labels","vs/platform/environment/common/environment","vs/platform/state/electron-main/state","vs/platform/policy/common/policy","vs/platform/userDataProfile/common/userDataProfile","vs/base/common/map","fs","vs/base/parts/ipc/electron-main/ipcMain","vs/platform/uriIdentity/common/uriIdentity","vs/base/common/json","vs/base/common/objects","vs/base/common/errorMessage","child_process","vs/base/parts/ipc/common/ipc","vs/platform/registry/common/platform","vs/platform/update/common/update","vs/base/common/functional","vs/platform/userDataProfile/electron-main/userDataProfile","vs/platform/workspaces/electron-main/workspacesManagementMainService","vs/base/common/decorators","vs/platform/remote/common/remoteHosts","vs/platform/request/common/request","vs/platform/telemetry/common/telemetryUtils","vs/platform/dialogs/electron-main/dialogMainService","vs/platform/native/electron-main/nativeHostMainService","vs/base/common/stream","vs/base/common/ternarySearchTree","vs/platform/environment/node/argvHelper","vs/platform/backup/electron-main/backup","vs/platform/product/common/product","vs/platform/protocol/electron-main/protocol","vs/platform/configuration/common/configurationRegistry","vs/platform/theme/electron-main/themeMainService","vs/base/common/iterator","vs/base/common/hash","vs/base/common/marshalling","vs/platform/instantiation/common/descriptors","vs/platform/credentials/common/credentials","vs/platform/files/common/watcher","vs/base/common/performance","vs/platform/window/common/window","vs/platform/workspaces/electron-main/workspacesHistoryMainService","vs/base/common/normalization","crypto","net","vs/base/common/processes","vs/base/common/stopwatch","vs/base/node/id","vs/base/node/processes","vs/base/parts/ipc/node/ipc.net","vs/platform/diagnostics/common/diagnostics","vs/platform/instantiation/common/serviceCollection","vs/platform/files/node/diskFileSystemProvider","vs/platform/extensions/common/extensions","vs/platform/sign/common/sign","vs/platform/telemetry/common/commonProperties","vs/platform/update/electron-main/abstractUpdateService","vs/platform/extensionManagement/common/extensionsProfileScannerService","vs/platform/storage/common/storage","vs/platform/storage/electron-main/storageMainService","vs/platform/workspaces/common/workspaces","vs/platform/workspaces/node/workspaces","vs/base/common/linkedList","vs/base/node/ports","vs/base/common/severity","vs/base/common/glob","vs/base/node/extpath","vs/base/node/ps","vs/base/parts/ipc/common/ipc.net","vs/base/parts/ipc/electron-main/ipc.mp","vs/base/parts/storage/common/storage","vs/platform/environment/node/argv","vs/platform/environment/node/userDataPath","vs/platform/encryption/common/encryptionService","vs/platform/externalTerminal/common/externalTerminal","vs/platform/files/common/io","vs/platform/configuration/common/configurationModels","vs/platform/extensionManagement/common/extensionManagementUtil","vs/platform/shell/node/shellEnv","vs/platform/telemetry/common/telemetryService","vs/platform/telemetry/electron-main/telemetryUtils","vs/platform/tunnel/common/tunnel","vs/platform/url/common/url","vs/platform/window/electron-main/window","vs/platform/extensionManagement/common/extensionsScannerService","vs/platform/windows/electron-main/windowsFinder","vs/platform/diagnostics/electron-main/diagnosticsMainService","vs/base/common/codicons","vs/base/common/color","vs/base/common/assert","vs/base/common/jsonFormatter","vs/base/common/jsonEdit","vs/base/common/lazy","vs/base/common/skipList","vs/base/node/crypto","vs/base/node/macAddress","vs/base/parts/contextmenu/common/contextmenu","vs/base/parts/ipc/common/ipc.electron","vs/base/parts/contextmenu/electron-main/contextmenu","vs/nls!vs/base/common/date","vs/base/common/date","vs/nls!vs/base/common/errorMessage","vs/nls!vs/base/common/jsonErrorMessages","vs/base/common/jsonErrorMessages","vs/nls!vs/base/common/platform","vs/base/common/cache","vs/base/common/console","vs/base/common/uriIpc","util","vs/base/node/powershell","vs/base/node/shell","vs/base/parts/ipc/common/ipc.mp","vs/base/parts/ipc/electron-main/ipc.electron","vs/base/parts/ipc/node/ipc.cp","vs/base/parts/storage/node/storage","vs/nls!vs/code/electron-main/app","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/dialogs/electron-main/dialogMainService","vs/nls!vs/platform/environment/node/argv","vs/nls!vs/platform/environment/node/argvHelper","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensionManagement/common/extensionNls","vs/nls!vs/platform/extensionManagement/common/extensionsScannerService","vs/nls!vs/platform/extensions/common/extensionValidator","vs/nls!vs/platform/externalTerminal/node/externalTerminalService","vs/nls!vs/platform/files/common/fileService","vs/nls!vs/platform/files/common/files","vs/nls!vs/platform/files/common/io","vs/nls!vs/platform/files/electron-main/diskFileSystemProviderServer","vs/nls!vs/platform/files/node/diskFileSystemProvider","vs/nls!vs/platform/issue/electron-main/issueMainService","vs/nls!vs/platform/menubar/electron-main/menubar","vs/nls!vs/platform/native/electron-main/nativeHostMainService","vs/nls!vs/platform/request/common/request","vs/nls!vs/platform/shell/node/shellEnv","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/update/common/update.config.contribution","vs/nls!vs/platform/userDataProfile/common/userDataProfile","vs/nls!vs/platform/windows/electron-main/windowImpl","vs/nls!vs/platform/windows/electron-main/windowsMainService","vs/nls!vs/platform/workspace/common/workspace","vs/nls!vs/platform/workspaces/electron-main/workspacesHistoryMainService","vs/nls!vs/platform/workspaces/electron-main/workspacesManagementMainService","vs/platform/backup/common/backup","vs/platform/backup/node/backup","vs/platform/debug/common/extensionHostDebugIpc","vs/platform/environment/common/environmentService","vs/platform/debug/electron-main/extensionHostDebugIpc","path","vs/platform/environment/node/environmentService","vs/platform/environment/node/wait","vs/platform/extensionManagement/common/extensionNls","vs/platform/extensionManagement/common/implicitActivationEvents","vs/platform/extensions/common/extensionValidator","vs/base/common/semver/semver","vs/platform/externalServices/common/serviceMachineId","vs/platform/instantiation/common/extensions","vs/platform/instantiation/common/graph","vs/platform/extensionManagement/common/extensionManagement","vs/platform/extensionManagement/common/extensionUrlTrust","vs/platform/extensions/common/extensionHostStarter","vs/platform/externalTerminal/node/externalTerminalService","vs/platform/files/common/diskFileSystemProviderClient","vs/platform/files/node/watcher/nodejs/nodejsWatcherLib","vs/platform/files/node/watcher/nodejs/nodejsWatcher","vs/platform/files/node/watcher/nodejs/nodejsClient","vs/platform/files/node/watcher/watcherClient","vs/platform/instantiation/common/instantiationService","vs/platform/credentials/common/credentialsMainService","vs/platform/encryption/node/encryptionMainService","vs/platform/files/common/diskFileSystemProvider","vs/platform/files/common/fileService","vs/platform/files/node/diskFileSystemProviderServer","vs/platform/files/electron-main/diskFileSystemProviderServer","vs/platform/log/common/bufferLog","vs/platform/log/common/logIpc","vs/platform/log/node/spdlogLog","vs/platform/log/node/loggerService","vs/platform/menubar/common/menubar","vs/platform/policy/common/filePolicyService","vs/platform/policy/common/policyIpc","vs/platform/extensionManagement/node/extensionUrlTrustService","vs/platform/profiling/electron-main/windowProfiling","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/configuration/common/configurations","vs/platform/configuration/common/configurationService","vs/platform/remote/common/remoteAuthorityResolver","vs/platform/remote/common/remoteAgentConnection","vs/platform/remote/node/nodeSocketFactory","vs/platform/remote/node/wsl","vs/platform/request/common/requestIpc","vs/platform/request/node/proxy","url","vs/platform/sign/node/signService","vs/platform/keyboardLayout/electron-main/keyboardLayoutMainService","vs/platform/state/node/state","vs/platform/state/node/stateService","vs/platform/state/electron-main/stateMainService","vs/platform/diagnostics/node/diagnosticsService","vs/platform/telemetry/common/telemetryIpc","vs/platform/externalServices/common/marketplace","vs/platform/telemetry/common/1dsAppender","vs/platform/telemetry/node/1dsAppender","vs/platform/telemetry/node/telemetryUtils","vs/platform/theme/common/theme","vs/platform/theme/common/themeService","vs/platform/tunnel/node/tunnelService","vs/platform/update/common/update.config.contribution","vs/platform/update/common/updateIpc","vs/platform/update/electron-main/updateService.darwin","vs/platform/update/electron-main/updateService.snap","vs/platform/uriIdentity/common/uriIdentityService","vs/platform/url/common/urlIpc","vs/platform/url/common/urlService","vs/platform/url/electron-main/electronUrlListener","vs/platform/webview/common/webviewManagerService","vs/platform/webview/electron-main/webviewProtocolProvider","vs/code/electron-main/auth","vs/platform/credentials/electron-main/credentialsMainService","vs/platform/extensions/electron-main/extensionHostStarter","vs/platform/launch/electron-main/launchMainService","vs/platform/webview/electron-main/webviewMainService","vs/platform/windows/node/windowTracker","vs/platform/storage/electron-main/storageIpc","vs/platform/extensionManagement/node/extensionsScannerService","vs/platform/protocol/electron-main/protocolMainService","vs/platform/sharedProcess/electron-main/sharedProcess","vs/platform/storage/electron-main/storageMain","vs/platform/userDataProfile/electron-main/userDataProfileStorageIpc","vs/platform/userDataProfile/node/userDataProfile","vs/platform/userDataProfile/electron-main/userDataTransientProfilesHandler","vs/platform/windows/electron-main/windowsStateHandler","vs/platform/backup/electron-main/backupMainService","vs/platform/issue/electron-main/issueMainService","vs/platform/update/electron-main/updateService.linux","vs/platform/update/electron-main/updateService.win32","vs/platform/windows/electron-main/windowImpl","vs/platform/menubar/electron-main/menubar","vs/platform/menubar/electron-main/menubarMainService","vs/platform/windows/electron-main/windowsMainService","vs/platform/workspaces/electron-main/workspacesMainService","vs/code/electron-main/app","vs/platform/policy/node/nativePolicyService","vs/platform/request/node/requestService","vs/platform/request/electron-main/requestMainService","minimist","assert","graceful-fs","https","string_decoder","vscode-policy-watcher","zlib","vs/code/electron-main/main"],te=function(j){for(var e=[],C=0,t=j.length;C<t;C++)e[C]=ee[j[C]];return e};define(ee[121],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSSIcon=e.Codicon=e.getCodiconAriaLabel=void 0;function C(L){return L?L.replace(/\$\((.*?)\)/g,(R,P)=>` ${P} `).trim():""}e.getCodiconAriaLabel=C;class t{constructor(R,P,p){this.id=R,this.definition=P,this.description=p,t._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return t._allCodicons}}e.Codicon=t,t._allCodicons=[],t.add=new t("add",{fontCharacter:"\\ea60"}),t.plus=new t("plus",t.add.definition),t.gistNew=new t("gist-new",t.add.definition),t.repoCreate=new t("repo-create",t.add.definition),t.lightbulb=new t("lightbulb",{fontCharacter:"\\ea61"}),t.lightBulb=new t("light-bulb",{fontCharacter:"\\ea61"}),t.repo=new t("repo",{fontCharacter:"\\ea62"}),t.repoDelete=new t("repo-delete",{fontCharacter:"\\ea62"}),t.gistFork=new t("gist-fork",{fontCharacter:"\\ea63"}),t.repoForked=new t("repo-forked",{fontCharacter:"\\ea63"}),t.gitPullRequest=new t("git-pull-request",{fontCharacter:"\\ea64"}),t.gitPullRequestAbandoned=new t("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),t.recordKeys=new t("record-keys",{fontCharacter:"\\ea65"}),t.keyboard=new t("keyboard",{fontCharacter:"\\ea65"}),t.tag=new t("tag",{fontCharacter:"\\ea66"}),t.tagAdd=new t("tag-add",{fontCharacter:"\\ea66"}),t.tagRemove=new t("tag-remove",{fontCharacter:"\\ea66"}),t.person=new t("person",{fontCharacter:"\\ea67"}),t.personFollow=new t("person-follow",{fontCharacter:"\\ea67"}),t.personOutline=new t("person-outline",{fontCharacter:"\\ea67"}),t.personFilled=new t("person-filled",{fontCharacter:"\\ea67"}),t.gitBranch=new t("git-branch",{fontCharacter:"\\ea68"}),t.gitBranchCreate=new t("git-branch-create",{fontCharacter:"\\ea68"}),t.gitBranchDelete=new t("git-branch-delete",{fontCharacter:"\\ea68"}),t.sourceControl=new t("source-control",{fontCharacter:"\\ea68"}),t.mirror=new t("mirror",{fontCharacter:"\\ea69"}),t.mirrorPublic=new t("mirror-public",{fontCharacter:"\\ea69"}),t.star=new t("star",{fontCharacter:"\\ea6a"}),t.starAdd=new t("star-add",{fontCharacter:"\\ea6a"}),t.starDelete=new t("star-delete",{fontCharacter:"\\ea6a"}),t.starEmpty=new t("star-empty",{fontCharacter:"\\ea6a"}),t.comment=new t("comment",{fontCharacter:"\\ea6b"}),t.commentAdd=new t("comment-add",{fontCharacter:"\\ea6b"}),t.alert=new t("alert",{fontCharacter:"\\ea6c"}),t.warning=new t("warning",{fontCharacter:"\\ea6c"}),t.search=new t("search",{fontCharacter:"\\ea6d"}),t.searchSave=new t("search-save",{fontCharacter:"\\ea6d"}),t.logOut=new t("log-out",{fontCharacter:"\\ea6e"}),t.signOut=new t("sign-out",{fontCharacter:"\\ea6e"}),t.logIn=new t("log-in",{fontCharacter:"\\ea6f"}),t.signIn=new t("sign-in",{fontCharacter:"\\ea6f"}),t.eye=new t("eye",{fontCharacter:"\\ea70"}),t.eyeUnwatch=new t("eye-unwatch",{fontCharacter:"\\ea70"}),t.eyeWatch=new t("eye-watch",{fontCharacter:"\\ea70"}),t.circleFilled=new t("circle-filled",{fontCharacter:"\\ea71"}),t.primitiveDot=new t("primitive-dot",t.circleFilled.definition),t.closeDirty=new t("close-dirty",t.circleFilled.definition),t.debugBreakpoint=new t("debug-breakpoint",t.circleFilled.definition),t.debugBreakpointDisabled=new t("debug-breakpoint-disabled",t.circleFilled.definition),t.debugHint=new t("debug-hint",t.circleFilled.definition),t.primitiveSquare=new t("primitive-square",{fontCharacter:"\\ea72"}),t.edit=new t("edit",{fontCharacter:"\\ea73"}),t.pencil=new t("pencil",{fontCharacter:"\\ea73"}),t.info=new t("info",{fontCharacter:"\\ea74"}),t.issueOpened=new t("issue-opened",{fontCharacter:"\\ea74"}),t.gistPrivate=new t("gist-private",{fontCharacter:"\\ea75"}),t.gitForkPrivate=new t("git-fork-private",{fontCharacter:"\\ea75"}),t.lock=new t("lock",{fontCharacter:"\\ea75"}),t.mirrorPrivate=new t("mirror-private",{fontCharacter:"\\ea75"}),t.close=new t("close",{fontCharacter:"\\ea76"}),t.removeClose=new t("remove-close",{fontCharacter:"\\ea76"}),t.x=new t("x",{fontCharacter:"\\ea76"}),t.repoSync=new t("repo-sync",{fontCharacter:"\\ea77"}),t.sync=new t("sync",{fontCharacter:"\\ea77"}),t.clone=new t("clone",{fontCharacter:"\\ea78"}),t.desktopDownload=new t("desktop-download",{fontCharacter:"\\ea78"}),t.beaker=new t("beaker",{fontCharacter:"\\ea79"}),t.microscope=new t("microscope",{fontCharacter:"\\ea79"}),t.vm=new t("vm",{fontCharacter:"\\ea7a"}),t.deviceDesktop=new t("device-desktop",{fontCharacter:"\\ea7a"}),t.file=new t("file",{fontCharacter:"\\ea7b"}),t.fileText=new t("file-text",{fontCharacter:"\\ea7b"}),t.more=new t("more",{fontCharacter:"\\ea7c"}),t.ellipsis=new t("ellipsis",{fontCharacter:"\\ea7c"}),t.kebabHorizontal=new t("kebab-horizontal",{fontCharacter:"\\ea7c"}),t.mailReply=new t("mail-reply",{fontCharacter:"\\ea7d"}),t.reply=new t("reply",{fontCharacter:"\\ea7d"}),t.organization=new t("organization",{fontCharacter:"\\ea7e"}),t.organizationFilled=new t("organization-filled",{fontCharacter:"\\ea7e"}),t.organizationOutline=new t("organization-outline",{fontCharacter:"\\ea7e"}),t.newFile=new t("new-file",{fontCharacter:"\\ea7f"}),t.fileAdd=new t("file-add",{fontCharacter:"\\ea7f"}),t.newFolder=new t("new-folder",{fontCharacter:"\\ea80"}),t.fileDirectoryCreate=new t("file-directory-create",{fontCharacter:"\\ea80"}),t.trash=new t("trash",{fontCharacter:"\\ea81"}),t.trashcan=new t("trashcan",{fontCharacter:"\\ea81"}),t.history=new t("history",{fontCharacter:"\\ea82"}),t.clock=new t("clock",{fontCharacter:"\\ea82"}),t.folder=new t("folder",{fontCharacter:"\\ea83"}),t.fileDirectory=new t("file-directory",{fontCharacter:"\\ea83"}),t.symbolFolder=new t("symbol-folder",{fontCharacter:"\\ea83"}),t.logoGithub=new t("logo-github",{fontCharacter:"\\ea84"}),t.markGithub=new t("mark-github",{fontCharacter:"\\ea84"}),t.github=new t("github",{fontCharacter:"\\ea84"}),t.terminal=new t("terminal",{fontCharacter:"\\ea85"}),t.console=new t("console",{fontCharacter:"\\ea85"}),t.repl=new t("repl",{fontCharacter:"\\ea85"}),t.zap=new t("zap",{fontCharacter:"\\ea86"}),t.symbolEvent=new t("symbol-event",{fontCharacter:"\\ea86"}),t.error=new t("error",{fontCharacter:"\\ea87"}),t.stop=new t("stop",{fontCharacter:"\\ea87"}),t.variable=new t("variable",{fontCharacter:"\\ea88"}),t.symbolVariable=new t("symbol-variable",{fontCharacter:"\\ea88"}),t.array=new t("array",{fontCharacter:"\\ea8a"}),t.symbolArray=new t("symbol-array",{fontCharacter:"\\ea8a"}),t.symbolModule=new t("symbol-module",{fontCharacter:"\\ea8b"}),t.symbolPackage=new t("symbol-package",{fontCharacter:"\\ea8b"}),t.symbolNamespace=new t("symbol-namespace",{fontCharacter:"\\ea8b"}),t.symbolObject=new t("symbol-object",{fontCharacter:"\\ea8b"}),t.symbolMethod=new t("symbol-method",{fontCharacter:"\\ea8c"}),t.symbolFunction=new t("symbol-function",{fontCharacter:"\\ea8c"}),t.symbolConstructor=new t("symbol-constructor",{fontCharacter:"\\ea8c"}),t.symbolBoolean=new t("symbol-boolean",{fontCharacter:"\\ea8f"}),t.symbolNull=new t("symbol-null",{fontCharacter:"\\ea8f"}),t.symbolNumeric=new t("symbol-numeric",{fontCharacter:"\\ea90"}),t.symbolNumber=new t("symbol-number",{fontCharacter:"\\ea90"}),t.symbolStructure=new t("symbol-structure",{fontCharacter:"\\ea91"}),t.symbolStruct=new t("symbol-struct",{fontCharacter:"\\ea91"}),t.symbolParameter=new t("symbol-parameter",{fontCharacter:"\\ea92"}),t.symbolTypeParameter=new t("symbol-type-parameter",{fontCharacter:"\\ea92"}),t.symbolKey=new t("symbol-key",{fontCharacter:"\\ea93"}),t.symbolText=new t("symbol-text",{fontCharacter:"\\ea93"}),t.symbolReference=new t("symbol-reference",{fontCharacter:"\\ea94"}),t.goToFile=new t("go-to-file",{fontCharacter:"\\ea94"}),t.symbolEnum=new t("symbol-enum",{fontCharacter:"\\ea95"}),t.symbolValue=new t("symbol-value",{fontCharacter:"\\ea95"}),t.symbolRuler=new t("symbol-ruler",{fontCharacter:"\\ea96"}),t.symbolUnit=new t("symbol-unit",{fontCharacter:"\\ea96"}),t.activateBreakpoints=new t("activate-breakpoints",{fontCharacter:"\\ea97"}),t.archive=new t("archive",{fontCharacter:"\\ea98"}),t.arrowBoth=new t("arrow-both",{fontCharacter:"\\ea99"}),t.arrowDown=new t("arrow-down",{fontCharacter:"\\ea9a"}),t.arrowLeft=new t("arrow-left",{fontCharacter:"\\ea9b"}),t.arrowRight=new t("arrow-right",{fontCharacter:"\\ea9c"}),t.arrowSmallDown=new t("arrow-small-down",{fontCharacter:"\\ea9d"}),t.arrowSmallLeft=new t("arrow-small-left",{fontCharacter:"\\ea9e"}),t.arrowSmallRight=new t("arrow-small-right",{fontCharacter:"\\ea9f"}),t.arrowSmallUp=new t("arrow-small-up",{fontCharacter:"\\eaa0"}),t.arrowUp=new t("arrow-up",{fontCharacter:"\\eaa1"}),t.bell=new t("bell",{fontCharacter:"\\eaa2"}),t.bold=new t("bold",{fontCharacter:"\\eaa3"}),t.book=new t("book",{fontCharacter:"\\eaa4"}),t.bookmark=new t("bookmark",{fontCharacter:"\\eaa5"}),t.debugBreakpointConditionalUnverified=new t("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),t.debugBreakpointConditional=new t("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),t.debugBreakpointConditionalDisabled=new t("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),t.debugBreakpointDataUnverified=new t("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),t.debugBreakpointData=new t("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),t.debugBreakpointDataDisabled=new t("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),t.debugBreakpointLogUnverified=new t("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),t.debugBreakpointLog=new t("debug-breakpoint-log",{fontCharacter:"\\eaab"}),t.debugBreakpointLogDisabled=new t("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),t.briefcase=new t("briefcase",{fontCharacter:"\\eaac"}),t.broadcast=new t("broadcast",{fontCharacter:"\\eaad"}),t.browser=new t("browser",{fontCharacter:"\\eaae"}),t.bug=new t("bug",{fontCharacter:"\\eaaf"}),t.calendar=new t("calendar",{fontCharacter:"\\eab0"}),t.caseSensitive=new t("case-sensitive",{fontCharacter:"\\eab1"}),t.check=new t("check",{fontCharacter:"\\eab2"}),t.checklist=new t("checklist",{fontCharacter:"\\eab3"}),t.chevronDown=new t("chevron-down",{fontCharacter:"\\eab4"}),t.dropDownButton=new t("drop-down-button",t.chevronDown.definition),t.chevronLeft=new t("chevron-left",{fontCharacter:"\\eab5"}),t.chevronRight=new t("chevron-right",{fontCharacter:"\\eab6"}),t.chevronUp=new t("chevron-up",{fontCharacter:"\\eab7"}),t.chromeClose=new t("chrome-close",{fontCharacter:"\\eab8"}),t.chromeMaximize=new t("chrome-maximize",{fontCharacter:"\\eab9"}),t.chromeMinimize=new t("chrome-minimize",{fontCharacter:"\\eaba"}),t.chromeRestore=new t("chrome-restore",{fontCharacter:"\\eabb"}),t.circle=new t("circle",{fontCharacter:"\\eabc"}),t.circleOutline=new t("circle-outline",t.circle.definition),t.debugBreakpointUnverified=new t("debug-breakpoint-unverified",t.circle.definition),t.circleSlash=new t("circle-slash",{fontCharacter:"\\eabd"}),t.circuitBoard=new t("circuit-board",{fontCharacter:"\\eabe"}),t.clearAll=new t("clear-all",{fontCharacter:"\\eabf"}),t.clippy=new t("clippy",{fontCharacter:"\\eac0"}),t.closeAll=new t("close-all",{fontCharacter:"\\eac1"}),t.cloudDownload=new t("cloud-download",{fontCharacter:"\\eac2"}),t.cloudUpload=new t("cloud-upload",{fontCharacter:"\\eac3"}),t.code=new t("code",{fontCharacter:"\\eac4"}),t.collapseAll=new t("collapse-all",{fontCharacter:"\\eac5"}),t.colorMode=new t("color-mode",{fontCharacter:"\\eac6"}),t.commentDiscussion=new t("comment-discussion",{fontCharacter:"\\eac7"}),t.compareChanges=new t("compare-changes",{fontCharacter:"\\eafd"}),t.creditCard=new t("credit-card",{fontCharacter:"\\eac9"}),t.dash=new t("dash",{fontCharacter:"\\eacc"}),t.dashboard=new t("dashboard",{fontCharacter:"\\eacd"}),t.database=new t("database",{fontCharacter:"\\eace"}),t.debugContinue=new t("debug-continue",{fontCharacter:"\\eacf"}),t.debugDisconnect=new t("debug-disconnect",{fontCharacter:"\\ead0"}),t.debugPause=new t("debug-pause",{fontCharacter:"\\ead1"}),t.debugRestart=new t("debug-restart",{fontCharacter:"\\ead2"}),t.debugStart=new t("debug-start",{fontCharacter:"\\ead3"}),t.debugStepInto=new t("debug-step-into",{fontCharacter:"\\ead4"}),t.debugStepOut=new t("debug-step-out",{fontCharacter:"\\ead5"}),t.debugStepOver=new t("debug-step-over",{fontCharacter:"\\ead6"}),t.debugStop=new t("debug-stop",{fontCharacter:"\\ead7"}),t.debug=new t("debug",{fontCharacter:"\\ead8"}),t.deviceCameraVideo=new t("device-camera-video",{fontCharacter:"\\ead9"}),t.deviceCamera=new t("device-camera",{fontCharacter:"\\eada"}),t.deviceMobile=new t("device-mobile",{fontCharacter:"\\eadb"}),t.diffAdded=new t("diff-added",{fontCharacter:"\\eadc"}),t.diffIgnored=new t("diff-ignored",{fontCharacter:"\\eadd"}),t.diffModified=new t("diff-modified",{fontCharacter:"\\eade"}),t.diffRemoved=new t("diff-removed",{fontCharacter:"\\eadf"}),t.diffRenamed=new t("diff-renamed",{fontCharacter:"\\eae0"}),t.diff=new t("diff",{fontCharacter:"\\eae1"}),t.discard=new t("discard",{fontCharacter:"\\eae2"}),t.editorLayout=new t("editor-layout",{fontCharacter:"\\eae3"}),t.emptyWindow=new t("empty-window",{fontCharacter:"\\eae4"}),t.exclude=new t("exclude",{fontCharacter:"\\eae5"}),t.extensions=new t("extensions",{fontCharacter:"\\eae6"}),t.eyeClosed=new t("eye-closed",{fontCharacter:"\\eae7"}),t.fileBinary=new t("file-binary",{fontCharacter:"\\eae8"}),t.fileCode=new t("file-code",{fontCharacter:"\\eae9"}),t.fileMedia=new t("file-media",{fontCharacter:"\\eaea"}),t.filePdf=new t("file-pdf",{fontCharacter:"\\eaeb"}),t.fileSubmodule=new t("file-submodule",{fontCharacter:"\\eaec"}),t.fileSymlinkDirectory=new t("file-symlink-directory",{fontCharacter:"\\eaed"}),t.fileSymlinkFile=new t("file-symlink-file",{fontCharacter:"\\eaee"}),t.fileZip=new t("file-zip",{fontCharacter:"\\eaef"}),t.files=new t("files",{fontCharacter:"\\eaf0"}),t.filter=new t("filter",{fontCharacter:"\\eaf1"}),t.flame=new t("flame",{fontCharacter:"\\eaf2"}),t.foldDown=new t("fold-down",{fontCharacter:"\\eaf3"}),t.foldUp=new t("fold-up",{fontCharacter:"\\eaf4"}),t.fold=new t("fold",{fontCharacter:"\\eaf5"}),t.folderActive=new t("folder-active",{fontCharacter:"\\eaf6"}),t.folderOpened=new t("folder-opened",{fontCharacter:"\\eaf7"}),t.gear=new t("gear",{fontCharacter:"\\eaf8"}),t.gift=new t("gift",{fontCharacter:"\\eaf9"}),t.gistSecret=new t("gist-secret",{fontCharacter:"\\eafa"}),t.gist=new t("gist",{fontCharacter:"\\eafb"}),t.gitCommit=new t("git-commit",{fontCharacter:"\\eafc"}),t.gitCompare=new t("git-compare",{fontCharacter:"\\eafd"}),t.gitMerge=new t("git-merge",{fontCharacter:"\\eafe"}),t.githubAction=new t("github-action",{fontCharacter:"\\eaff"}),t.githubAlt=new t("github-alt",{fontCharacter:"\\eb00"}),t.globe=new t("globe",{fontCharacter:"\\eb01"}),t.grabber=new t("grabber",{fontCharacter:"\\eb02"}),t.graph=new t("graph",{fontCharacter:"\\eb03"}),t.gripper=new t("gripper",{fontCharacter:"\\eb04"}),t.heart=new t("heart",{fontCharacter:"\\eb05"}),t.home=new t("home",{fontCharacter:"\\eb06"}),t.horizontalRule=new t("horizontal-rule",{fontCharacter:"\\eb07"}),t.hubot=new t("hubot",{fontCharacter:"\\eb08"}),t.inbox=new t("inbox",{fontCharacter:"\\eb09"}),t.issueClosed=new t("issue-closed",{fontCharacter:"\\eba4"}),t.issueReopened=new t("issue-reopened",{fontCharacter:"\\eb0b"}),t.issues=new t("issues",{fontCharacter:"\\eb0c"}),t.italic=new t("italic",{fontCharacter:"\\eb0d"}),t.jersey=new t("jersey",{fontCharacter:"\\eb0e"}),t.json=new t("json",{fontCharacter:"\\eb0f"}),t.kebabVertical=new t("kebab-vertical",{fontCharacter:"\\eb10"}),t.key=new t("key",{fontCharacter:"\\eb11"}),t.law=new t("law",{fontCharacter:"\\eb12"}),t.lightbulbAutofix=new t("lightbulb-autofix",{fontCharacter:"\\eb13"}),t.linkExternal=new t("link-external",{fontCharacter:"\\eb14"}),t.link=new t("link",{fontCharacter:"\\eb15"}),t.listOrdered=new t("list-ordered",{fontCharacter:"\\eb16"}),t.listUnordered=new t("list-unordered",{fontCharacter:"\\eb17"}),t.liveShare=new t("live-share",{fontCharacter:"\\eb18"}),t.loading=new t("loading",{fontCharacter:"\\eb19"}),t.location=new t("location",{fontCharacter:"\\eb1a"}),t.mailRead=new t("mail-read",{fontCharacter:"\\eb1b"}),t.mail=new t("mail",{fontCharacter:"\\eb1c"}),t.markdown=new t("markdown",{fontCharacter:"\\eb1d"}),t.megaphone=new t("megaphone",{fontCharacter:"\\eb1e"}),t.mention=new t("mention",{fontCharacter:"\\eb1f"}),t.milestone=new t("milestone",{fontCharacter:"\\eb20"}),t.mortarBoard=new t("mortar-board",{fontCharacter:"\\eb21"}),t.move=new t("move",{fontCharacter:"\\eb22"}),t.multipleWindows=new t("multiple-windows",{fontCharacter:"\\eb23"}),t.mute=new t("mute",{fontCharacter:"\\eb24"}),t.noNewline=new t("no-newline",{fontCharacter:"\\eb25"}),t.note=new t("note",{fontCharacter:"\\eb26"}),t.octoface=new t("octoface",{fontCharacter:"\\eb27"}),t.openPreview=new t("open-preview",{fontCharacter:"\\eb28"}),t.package_=new t("package",{fontCharacter:"\\eb29"}),t.paintcan=new t("paintcan",{fontCharacter:"\\eb2a"}),t.pin=new t("pin",{fontCharacter:"\\eb2b"}),t.play=new t("play",{fontCharacter:"\\eb2c"}),t.run=new t("run",{fontCharacter:"\\eb2c"}),t.plug=new t("plug",{fontCharacter:"\\eb2d"}),t.preserveCase=new t("preserve-case",{fontCharacter:"\\eb2e"}),t.preview=new t("preview",{fontCharacter:"\\eb2f"}),t.project=new t("project",{fontCharacter:"\\eb30"}),t.pulse=new t("pulse",{fontCharacter:"\\eb31"}),t.question=new t("question",{fontCharacter:"\\eb32"}),t.quote=new t("quote",{fontCharacter:"\\eb33"}),t.radioTower=new t("radio-tower",{fontCharacter:"\\eb34"}),t.reactions=new t("reactions",{fontCharacter:"\\eb35"}),t.references=new t("references",{fontCharacter:"\\eb36"}),t.refresh=new t("refresh",{fontCharacter:"\\eb37"}),t.regex=new t("regex",{fontCharacter:"\\eb38"}),t.remoteExplorer=new t("remote-explorer",{fontCharacter:"\\eb39"}),t.remote=new t("remote",{fontCharacter:"\\eb3a"}),t.remove=new t("remove",{fontCharacter:"\\eb3b"}),t.replaceAll=new t("replace-all",{fontCharacter:"\\eb3c"}),t.replace=new t("replace",{fontCharacter:"\\eb3d"}),t.repoClone=new t("repo-clone",{fontCharacter:"\\eb3e"}),t.repoForcePush=new t("repo-force-push",{fontCharacter:"\\eb3f"}),t.repoPull=new t("repo-pull",{fontCharacter:"\\eb40"}),t.repoPush=new t("repo-push",{fontCharacter:"\\eb41"}),t.report=new t("report",{fontCharacter:"\\eb42"}),t.requestChanges=new t("request-changes",{fontCharacter:"\\eb43"}),t.rocket=new t("rocket",{fontCharacter:"\\eb44"}),t.rootFolderOpened=new t("root-folder-opened",{fontCharacter:"\\eb45"}),t.rootFolder=new t("root-folder",{fontCharacter:"\\eb46"}),t.rss=new t("rss",{fontCharacter:"\\eb47"}),t.ruby=new t("ruby",{fontCharacter:"\\eb48"}),t.saveAll=new t("save-all",{fontCharacter:"\\eb49"}),t.saveAs=new t("save-as",{fontCharacter:"\\eb4a"}),t.save=new t("save",{fontCharacter:"\\eb4b"}),t.screenFull=new t("screen-full",{fontCharacter:"\\eb4c"}),t.screenNormal=new t("screen-normal",{fontCharacter:"\\eb4d"}),t.searchStop=new t("search-stop",{fontCharacter:"\\eb4e"}),t.server=new t("server",{fontCharacter:"\\eb50"}),t.settingsGear=new t("settings-gear",{fontCharacter:"\\eb51"}),t.settings=new t("settings",{fontCharacter:"\\eb52"}),t.shield=new t("shield",{fontCharacter:"\\eb53"}),t.smiley=new t("smiley",{fontCharacter:"\\eb54"}),t.sortPrecedence=new t("sort-precedence",{fontCharacter:"\\eb55"}),t.splitHorizontal=new t("split-horizontal",{fontCharacter:"\\eb56"}),t.splitVertical=new t("split-vertical",{fontCharacter:"\\eb57"}),t.squirrel=new t("squirrel",{fontCharacter:"\\eb58"}),t.starFull=new t("star-full",{fontCharacter:"\\eb59"}),t.starHalf=new t("star-half",{fontCharacter:"\\eb5a"}),t.symbolClass=new t("symbol-class",{fontCharacter:"\\eb5b"}),t.symbolColor=new t("symbol-color",{fontCharacter:"\\eb5c"}),t.symbolCustomColor=new t("symbol-customcolor",{fontCharacter:"\\eb5c"}),t.symbolConstant=new t("symbol-constant",{fontCharacter:"\\eb5d"}),t.symbolEnumMember=new t("symbol-enum-member",{fontCharacter:"\\eb5e"}),t.symbolField=new t("symbol-field",{fontCharacter:"\\eb5f"}),t.symbolFile=new t("symbol-file",{fontCharacter:"\\eb60"}),t.symbolInterface=new t("symbol-interface",{fontCharacter:"\\eb61"}),t.symbolKeyword=new t("symbol-keyword",{fontCharacter:"\\eb62"}),t.symbolMisc=new t("symbol-misc",{fontCharacter:"\\eb63"}),t.symbolOperator=new t("symbol-operator",{fontCharacter:"\\eb64"}),t.symbolProperty=new t("symbol-property",{fontCharacter:"\\eb65"}),t.wrench=new t("wrench",{fontCharacter:"\\eb65"}),t.wrenchSubaction=new t("wrench-subaction",{fontCharacter:"\\eb65"}),t.symbolSnippet=new t("symbol-snippet",{fontCharacter:"\\eb66"}),t.tasklist=new t("tasklist",{fontCharacter:"\\eb67"}),t.telescope=new t("telescope",{fontCharacter:"\\eb68"}),t.textSize=new t("text-size",{fontCharacter:"\\eb69"}),t.threeBars=new t("three-bars",{fontCharacter:"\\eb6a"}),t.thumbsdown=new t("thumbsdown",{fontCharacter:"\\eb6b"}),t.thumbsup=new t("thumbsup",{fontCharacter:"\\eb6c"}),t.tools=new t("tools",{fontCharacter:"\\eb6d"}),t.triangleDown=new t("triangle-down",{fontCharacter:"\\eb6e"}),t.triangleLeft=new t("triangle-left",{fontCharacter:"\\eb6f"}),t.triangleRight=new t("triangle-right",{fontCharacter:"\\eb70"}),t.triangleUp=new t("triangle-up",{fontCharacter:"\\eb71"}),t.twitter=new t("twitter",{fontCharacter:"\\eb72"}),t.unfold=new t("unfold",{fontCharacter:"\\eb73"}),t.unlock=new t("unlock",{fontCharacter:"\\eb74"}),t.unmute=new t("unmute",{fontCharacter:"\\eb75"}),t.unverified=new t("unverified",{fontCharacter:"\\eb76"}),t.verified=new t("verified",{fontCharacter:"\\eb77"}),t.versions=new t("versions",{fontCharacter:"\\eb78"}),t.vmActive=new t("vm-active",{fontCharacter:"\\eb79"}),t.vmOutline=new t("vm-outline",{fontCharacter:"\\eb7a"}),t.vmRunning=new t("vm-running",{fontCharacter:"\\eb7b"}),t.watch=new t("watch",{fontCharacter:"\\eb7c"}),t.whitespace=new t("whitespace",{fontCharacter:"\\eb7d"}),t.wholeWord=new t("whole-word",{fontCharacter:"\\eb7e"}),t.window=new t("window",{fontCharacter:"\\eb7f"}),t.wordWrap=new t("word-wrap",{fontCharacter:"\\eb80"}),t.zoomIn=new t("zoom-in",{fontCharacter:"\\eb81"}),t.zoomOut=new t("zoom-out",{fontCharacter:"\\eb82"}),t.listFilter=new t("list-filter",{fontCharacter:"\\eb83"}),t.listFlat=new t("list-flat",{fontCharacter:"\\eb84"}),t.listSelection=new t("list-selection",{fontCharacter:"\\eb85"}),t.selection=new t("selection",{fontCharacter:"\\eb85"}),t.listTree=new t("list-tree",{fontCharacter:"\\eb86"}),t.debugBreakpointFunctionUnverified=new t("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),t.debugBreakpointFunction=new t("debug-breakpoint-function",{fontCharacter:"\\eb88"}),t.debugBreakpointFunctionDisabled=new t("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),t.debugStackframeActive=new t("debug-stackframe-active",{fontCharacter:"\\eb89"}),t.circleSmallFilled=new t("circle-small-filled",{fontCharacter:"\\eb8a"}),t.debugStackframeDot=new t("debug-stackframe-dot",t.circleSmallFilled.definition),t.debugStackframe=new t("debug-stackframe",{fontCharacter:"\\eb8b"}),t.debugStackframeFocused=new t("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),t.debugBreakpointUnsupported=new t("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),t.symbolString=new t("symbol-string",{fontCharacter:"\\eb8d"}),t.debugReverseContinue=new t("debug-reverse-continue",{fontCharacter:"\\eb8e"}),t.debugStepBack=new t("debug-step-back",{fontCharacter:"\\eb8f"}),t.debugRestartFrame=new t("debug-restart-frame",{fontCharacter:"\\eb90"}),t.callIncoming=new t("call-incoming",{fontCharacter:"\\eb92"}),t.callOutgoing=new t("call-outgoing",{fontCharacter:"\\eb93"}),t.menu=new t("menu",{fontCharacter:"\\eb94"}),t.expandAll=new t("expand-all",{fontCharacter:"\\eb95"}),t.feedback=new t("feedback",{fontCharacter:"\\eb96"}),t.groupByRefType=new t("group-by-ref-type",{fontCharacter:"\\eb97"}),t.ungroupByRefType=new t("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),t.account=new t("account",{fontCharacter:"\\eb99"}),t.bellDot=new t("bell-dot",{fontCharacter:"\\eb9a"}),t.debugConsole=new t("debug-console",{fontCharacter:"\\eb9b"}),t.library=new t("library",{fontCharacter:"\\eb9c"}),t.output=new t("output",{fontCharacter:"\\eb9d"}),t.runAll=new t("run-all",{fontCharacter:"\\eb9e"}),t.syncIgnored=new t("sync-ignored",{fontCharacter:"\\eb9f"}),t.pinned=new t("pinned",{fontCharacter:"\\eba0"}),t.githubInverted=new t("github-inverted",{fontCharacter:"\\eba1"}),t.debugAlt=new t("debug-alt",{fontCharacter:"\\eb91"}),t.serverProcess=new t("server-process",{fontCharacter:"\\eba2"}),t.serverEnvironment=new t("server-environment",{fontCharacter:"\\eba3"}),t.pass=new t("pass",{fontCharacter:"\\eba4"}),t.stopCircle=new t("stop-circle",{fontCharacter:"\\eba5"}),t.playCircle=new t("play-circle",{fontCharacter:"\\eba6"}),t.record=new t("record",{fontCharacter:"\\eba7"}),t.debugAltSmall=new t("debug-alt-small",{fontCharacter:"\\eba8"}),t.vmConnect=new t("vm-connect",{fontCharacter:"\\eba9"}),t.cloud=new t("cloud",{fontCharacter:"\\ebaa"}),t.merge=new t("merge",{fontCharacter:"\\ebab"}),t.exportIcon=new t("export",{fontCharacter:"\\ebac"}),t.graphLeft=new t("graph-left",{fontCharacter:"\\ebad"}),t.magnet=new t("magnet",{fontCharacter:"\\ebae"}),t.notebook=new t("notebook",{fontCharacter:"\\ebaf"}),t.redo=new t("redo",{fontCharacter:"\\ebb0"}),t.checkAll=new t("check-all",{fontCharacter:"\\ebb1"}),t.pinnedDirty=new t("pinned-dirty",{fontCharacter:"\\ebb2"}),t.passFilled=new t("pass-filled",{fontCharacter:"\\ebb3"}),t.circleLargeFilled=new t("circle-large-filled",{fontCharacter:"\\ebb4"}),t.circleLarge=new t("circle-large",{fontCharacter:"\\ebb5"}),t.circleLargeOutline=new t("circle-large-outline",t.circleLarge.definition),t.combine=new t("combine",{fontCharacter:"\\ebb6"}),t.gather=new t("gather",{fontCharacter:"\\ebb6"}),t.table=new t("table",{fontCharacter:"\\ebb7"}),t.variableGroup=new t("variable-group",{fontCharacter:"\\ebb8"}),t.typeHierarchy=new t("type-hierarchy",{fontCharacter:"\\ebb9"}),t.typeHierarchySub=new t("type-hierarchy-sub",{fontCharacter:"\\ebba"}),t.typeHierarchySuper=new t("type-hierarchy-super",{fontCharacter:"\\ebbb"}),t.gitPullRequestCreate=new t("git-pull-request-create",{fontCharacter:"\\ebbc"}),t.runAbove=new t("run-above",{fontCharacter:"\\ebbd"}),t.runBelow=new t("run-below",{fontCharacter:"\\ebbe"}),t.notebookTemplate=new t("notebook-template",{fontCharacter:"\\ebbf"}),t.debugRerun=new t("debug-rerun",{fontCharacter:"\\ebc0"}),t.workspaceTrusted=new t("workspace-trusted",{fontCharacter:"\\ebc1"}),t.workspaceUntrusted=new t("workspace-untrusted",{fontCharacter:"\\ebc2"}),t.workspaceUnspecified=new t("workspace-unspecified",{fontCharacter:"\\ebc3"}),t.terminalCmd=new t("terminal-cmd",{fontCharacter:"\\ebc4"}),t.terminalDebian=new t("terminal-debian",{fontCharacter:"\\ebc5"}),t.terminalLinux=new t("terminal-linux",{fontCharacter:"\\ebc6"}),t.terminalPowershell=new t("terminal-powershell",{fontCharacter:"\\ebc7"}),t.terminalTmux=new t("terminal-tmux",{fontCharacter:"\\ebc8"}),t.terminalUbuntu=new t("terminal-ubuntu",{fontCharacter:"\\ebc9"}),t.terminalBash=new t("terminal-bash",{fontCharacter:"\\ebca"}),t.arrowSwap=new t("arrow-swap",{fontCharacter:"\\ebcb"}),t.copy=new t("copy",{fontCharacter:"\\ebcc"}),t.personAdd=new t("person-add",{fontCharacter:"\\ebcd"}),t.filterFilled=new t("filter-filled",{fontCharacter:"\\ebce"}),t.wand=new t("wand",{fontCharacter:"\\ebcf"}),t.debugLineByLine=new t("debug-line-by-line",{fontCharacter:"\\ebd0"}),t.inspect=new t("inspect",{fontCharacter:"\\ebd1"}),t.layers=new t("layers",{fontCharacter:"\\ebd2"}),t.layersDot=new t("layers-dot",{fontCharacter:"\\ebd3"}),t.layersActive=new t("layers-active",{fontCharacter:"\\ebd4"}),t.compass=new t("compass",{fontCharacter:"\\ebd5"}),t.compassDot=new t("compass-dot",{fontCharacter:"\\ebd6"}),t.compassActive=new t("compass-active",{fontCharacter:"\\ebd7"}),t.azure=new t("azure",{fontCharacter:"\\ebd8"}),t.issueDraft=new t("issue-draft",{fontCharacter:"\\ebd9"}),t.gitPullRequestClosed=new t("git-pull-request-closed",{fontCharacter:"\\ebda"}),t.gitPullRequestDraft=new t("git-pull-request-draft",{fontCharacter:"\\ebdb"}),t.debugAll=new t("debug-all",{fontCharacter:"\\ebdc"}),t.debugCoverage=new t("debug-coverage",{fontCharacter:"\\ebdd"}),t.runErrors=new t("run-errors",{fontCharacter:"\\ebde"}),t.folderLibrary=new t("folder-library",{fontCharacter:"\\ebdf"}),t.debugContinueSmall=new t("debug-continue-small",{fontCharacter:"\\ebe0"}),t.beakerStop=new t("beaker-stop",{fontCharacter:"\\ebe1"}),t.graphLine=new t("graph-line",{fontCharacter:"\\ebe2"}),t.graphScatter=new t("graph-scatter",{fontCharacter:"\\ebe3"}),t.pieChart=new t("pie-chart",{fontCharacter:"\\ebe4"}),t.bracket=new t("bracket",t.json.definition),t.bracketDot=new t("bracket-dot",{fontCharacter:"\\ebe5"}),t.bracketError=new t("bracket-error",{fontCharacter:"\\ebe6"}),t.lockSmall=new t("lock-small",{fontCharacter:"\\ebe7"}),t.azureDevops=new t("azure-devops",{fontCharacter:"\\ebe8"}),t.verifiedFilled=new t("verified-filled",{fontCharacter:"\\ebe9"}),t.newLine=new t("newline",{fontCharacter:"\\ebea"}),t.layout=new t("layout",{fontCharacter:"\\ebeb"}),t.layoutActivitybarLeft=new t("layout-activitybar-left",{fontCharacter:"\\ebec"}),t.layoutActivitybarRight=new t("layout-activitybar-right",{fontCharacter:"\\ebed"}),t.layoutPanelLeft=new t("layout-panel-left",{fontCharacter:"\\ebee"}),t.layoutPanelCenter=new t("layout-panel-center",{fontCharacter:"\\ebef"}),t.layoutPanelJustify=new t("layout-panel-justify",{fontCharacter:"\\ebf0"}),t.layoutPanelRight=new t("layout-panel-right",{fontCharacter:"\\ebf1"}),t.layoutPanel=new t("layout-panel",{fontCharacter:"\\ebf2"}),t.layoutSidebarLeft=new t("layout-sidebar-left",{fontCharacter:"\\ebf3"}),t.layoutSidebarRight=new t("layout-sidebar-right",{fontCharacter:"\\ebf4"}),t.layoutStatusbar=new t("layout-statusbar",{fontCharacter:"\\ebf5"}),t.layoutMenubar=new t("layout-menubar",{fontCharacter:"\\ebf6"}),t.layoutCentered=new t("layout-centered",{fontCharacter:"\\ebf7"}),t.layoutSidebarRightOff=new t("layout-sidebar-right-off",{fontCharacter:"\\ec00"}),t.layoutPanelOff=new t("layout-panel-off",{fontCharacter:"\\ec01"}),t.layoutSidebarLeftOff=new t("layout-sidebar-left-off",{fontCharacter:"\\ec02"}),t.target=new t("target",{fontCharacter:"\\ebf8"}),t.indent=new t("indent",{fontCharacter:"\\ebf9"}),t.recordSmall=new t("record-small",{fontCharacter:"\\ebfa"}),t.errorSmall=new t("error-small",{fontCharacter:"\\ebfb"}),t.arrowCircleDown=new t("arrow-circle-down",{fontCharacter:"\\ebfc"}),t.arrowCircleLeft=new t("arrow-circle-left",{fontCharacter:"\\ebfd"}),t.arrowCircleRight=new t("arrow-circle-right",{fontCharacter:"\\ebfe"}),t.arrowCircleUp=new t("arrow-circle-up",{fontCharacter:"\\ebff"}),t.heartFilled=new t("heart-filled",{fontCharacter:"\\ec04"}),t.map=new t("map",{fontCharacter:"\\ec05"}),t.mapFilled=new t("map-filled",{fontCharacter:"\\ec06"}),t.circleSmall=new t("circle-small",{fontCharacter:"\\ec07"}),t.bellSlash=new t("bell-slash",{fontCharacter:"\\ec08"}),t.bellSlashDot=new t("bell-slash-dot",{fontCharacter:"\\ec09"}),t.commentUnresolved=new t("comment-unresolved",{fontCharacter:"\\ec0a"}),t.gitPullRequestGoToChanges=new t("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"}),t.gitPullRequestNewChanges=new t("git-pull-request-new-changes",{fontCharacter:"\\ec0c"}),t.searchFuzzy=new t("search-fuzzy",{fontCharacter:"\\ec0d"}),t.commentDraft=new t("comment-draft",{fontCharacter:"\\ec0e"}),t.dialogError=new t("dialog-error",t.error.definition),t.dialogWarning=new t("dialog-warning",t.warning.definition),t.dialogInfo=new t("dialog-info",t.info.definition),t.dialogClose=new t("dialog-close",t.close.definition),t.treeItemExpanded=new t("tree-item-expanded",t.chevronDown.definition),t.treeFilterOnTypeOn=new t("tree-filter-on-type-on",t.listFilter.definition),t.treeFilterOnTypeOff=new t("tree-filter-on-type-off",t.listSelection.definition),t.treeFilterClear=new t("tree-filter-clear",t.close.definition),t.treeItemLoading=new t("tree-item-loading",t.loading.definition),t.menuSelection=new t("menu-selection",t.check.definition),t.menuSubmenu=new t("menu-submenu",t.chevronRight.definition),t.menuBarMore=new t("menubar-more",t.more.definition),t.scrollbarButtonLeft=new t("scrollbar-button-left",t.triangleLeft.definition),t.scrollbarButtonRight=new t("scrollbar-button-right",t.triangleRight.definition),t.scrollbarButtonUp=new t("scrollbar-button-up",t.triangleUp.definition),t.scrollbarButtonDown=new t("scrollbar-button-down",t.triangleDown.definition),t.toolBarMore=new t("toolbar-more",t.more.definition),t.quickInputBack=new t("quick-input-back",t.arrowLeft.definition);var k;(function(L){L.iconNameSegment="[A-Za-z0-9]+",L.iconNameExpression="[A-Za-z0-9-]+",L.iconModifierExpression="~[A-Za-z]+",L.iconNameCharacter="[A-Za-z0-9~-]";const R=new RegExp(`^(${L.iconNameExpression})(${L.iconModifierExpression})?$`);function P(y){if(y instanceof t)return["codicon","codicon-"+y.id];const I=R.exec(y.id);if(!I)return P(t.error);const[,E,d]=I,w=["codicon","codicon-"+E];return d&&w.push("codicon-modifier-"+d.substring(1)),w}L.asClassNameArray=P;function p(y){return P(y).join(" ")}L.asClassName=p;function m(y){return"."+P(y).join(".")}L.asCSSSelector=m})(k=e.CSSIcon||(e.CSSIcon={}))}),define(ee[122],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=e.HSVA=e.HSLA=e.RGBA=void 0;function C(P,p){const m=Math.pow(10,p);return Math.round(P*m)/m}class t{constructor(p,m,y,I=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,p))|0,this.g=Math.min(255,Math.max(0,m))|0,this.b=Math.min(255,Math.max(0,y))|0,this.a=C(Math.max(Math.min(1,I),0),3)}static equals(p,m){return p.r===m.r&&p.g===m.g&&p.b===m.b&&p.a===m.a}}e.RGBA=t;class k{constructor(p,m,y,I){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,p),0)|0,this.s=C(Math.max(Math.min(1,m),0),3),this.l=C(Math.max(Math.min(1,y),0),3),this.a=C(Math.max(Math.min(1,I),0),3)}static equals(p,m){return p.h===m.h&&p.s===m.s&&p.l===m.l&&p.a===m.a}static fromRGBA(p){const m=p.r/255,y=p.g/255,I=p.b/255,E=p.a,d=Math.max(m,y,I),w=Math.min(m,y,I);let f=0,v=0;const u=(w+d)/2,S=d-w;if(S>0){switch(v=Math.min(u<=.5?S/(2*u):S/(2-2*u),1),d){case m:f=(y-I)/S+(y<I?6:0);break;case y:f=(I-m)/S+2;break;case I:f=(m-y)/S+4;break}f*=60,f=Math.round(f)}return new k(f,v,u,E)}static _hue2rgb(p,m,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?p+(m-p)*6*y:y<1/2?m:y<2/3?p+(m-p)*(2/3-y)*6:p}static toRGBA(p){const m=p.h/360,{s:y,l:I,a:E}=p;let d,w,f;if(y===0)d=w=f=I;else{const v=I<.5?I*(1+y):I+y-I*y,u=2*I-v;d=k._hue2rgb(u,v,m+1/3),w=k._hue2rgb(u,v,m),f=k._hue2rgb(u,v,m-1/3)}return new t(Math.round(d*255),Math.round(w*255),Math.round(f*255),E)}}e.HSLA=k;class L{constructor(p,m,y,I){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,p),0)|0,this.s=C(Math.max(Math.min(1,m),0),3),this.v=C(Math.max(Math.min(1,y),0),3),this.a=C(Math.max(Math.min(1,I),0),3)}static equals(p,m){return p.h===m.h&&p.s===m.s&&p.v===m.v&&p.a===m.a}static fromRGBA(p){const m=p.r/255,y=p.g/255,I=p.b/255,E=Math.max(m,y,I),d=Math.min(m,y,I),w=E-d,f=E===0?0:w/E;let v;return w===0?v=0:E===m?v=((y-I)/w%6+6)%6:E===y?v=(I-m)/w+2:v=(m-y)/w+4,new L(Math.round(v*60),f,E,p.a)}static toRGBA(p){const{h:m,s:y,v:I,a:E}=p,d=I*y,w=d*(1-Math.abs(m/60%2-1)),f=I-d;let[v,u,S]=[0,0,0];return m<60?(v=d,u=w):m<120?(v=w,u=d):m<180?(u=d,S=w):m<240?(u=w,S=d):m<300?(v=w,S=d):m<=360&&(v=d,S=w),v=Math.round((v+f)*255),u=Math.round((u+f)*255),S=Math.round((S+f)*255),new t(v,u,S,E)}}e.HSVA=L;class R{static fromHex(p){return R.Format.CSS.parseHex(p)||R.red}static equals(p,m){return!p&&!m?!0:!p||!m?!1:p.equals(m)}get hsla(){return this._hsla?this._hsla:k.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:L.fromRGBA(this.rgba)}constructor(p){if(p)if(p instanceof t)this.rgba=p;else if(p instanceof k)this._hsla=p,this.rgba=k.toRGBA(p);else if(p instanceof L)this._hsva=p,this.rgba=L.toRGBA(p);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(p){return!!p&&t.equals(this.rgba,p.rgba)&&k.equals(this.hsla,p.hsla)&&L.equals(this.hsva,p.hsva)}getRelativeLuminance(){const p=R._relativeLuminanceForComponent(this.rgba.r),m=R._relativeLuminanceForComponent(this.rgba.g),y=R._relativeLuminanceForComponent(this.rgba.b),I=.2126*p+.7152*m+.0722*y;return C(I,4)}static _relativeLuminanceForComponent(p){const m=p/255;return m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)}getContrastRatio(p){const m=this.getRelativeLuminance(),y=p.getRelativeLuminance();return m>y?(m+.05)/(y+.05):(y+.05)/(m+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(p){const m=this.getRelativeLuminance(),y=p.getRelativeLuminance();return m>y}isDarkerThan(p){const m=this.getRelativeLuminance(),y=p.getRelativeLuminance();return m<y}lighten(p){return new R(new k(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*p,this.hsla.a))}darken(p){return new R(new k(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*p,this.hsla.a))}transparent(p){const{r:m,g:y,b:I,a:E}=this.rgba;return new R(new t(m,y,I,E*p))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new R(new t(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(p){const m=p.rgba,y=this.rgba.a,I=m.a,E=y+I*(1-y);if(E<1e-6)return R.transparent;const d=this.rgba.r*y/E+m.r*I*(1-y)/E,w=this.rgba.g*y/E+m.g*I*(1-y)/E,f=this.rgba.b*y/E+m.b*I*(1-y)/E;return new R(new t(d,w,f,E))}makeOpaque(p){if(this.isOpaque()||p.rgba.a!==1)return this;const{r:m,g:y,b:I,a:E}=this.rgba;return new R(new t(p.rgba.r-E*(p.rgba.r-m),p.rgba.g-E*(p.rgba.g-y),p.rgba.b-E*(p.rgba.b-I),1))}flatten(...p){const m=p.reduceRight((y,I)=>R._flatten(I,y));return R._flatten(this,m)}static _flatten(p,m){const y=1-p.rgba.a;return new R(new t(y*m.rgba.r+p.rgba.a*p.rgba.r,y*m.rgba.g+p.rgba.a*p.rgba.g,y*m.rgba.b+p.rgba.a*p.rgba.b))}toString(){return this._toString||(this._toString=R.Format.CSS.format(this)),this._toString}static getLighterColor(p,m,y){if(p.isLighterThan(m))return p;y=y||.5;const I=p.getRelativeLuminance(),E=m.getRelativeLuminance();return y=y*(E-I)/E,p.lighten(y)}static getDarkerColor(p,m,y){if(p.isDarkerThan(m))return p;y=y||.5;const I=p.getRelativeLuminance(),E=m.getRelativeLuminance();return y=y*(I-E)/I,p.darken(y)}}e.Color=R,R.white=new R(new t(255,255,255,1)),R.black=new R(new t(0,0,0,1)),R.red=new R(new t(255,0,0,1)),R.blue=new R(new t(0,0,255,1)),R.green=new R(new t(0,255,0,1)),R.cyan=new R(new t(0,255,255,1)),R.lightgrey=new R(new t(211,211,211,1)),R.transparent=new R(new t(0,0,0,0)),function(P){let p;(function(m){let y;(function(I){function E(i){return i.rgba.a===1?`rgb(${i.rgba.r}, ${i.rgba.g}, ${i.rgba.b})`:P.Format.CSS.formatRGBA(i)}I.formatRGB=E;function d(i){return`rgba(${i.rgba.r}, ${i.rgba.g}, ${i.rgba.b}, ${+i.rgba.a.toFixed(2)})`}I.formatRGBA=d;function w(i){return i.hsla.a===1?`hsl(${i.hsla.h}, ${(i.hsla.s*100).toFixed(2)}%, ${(i.hsla.l*100).toFixed(2)}%)`:P.Format.CSS.formatHSLA(i)}I.formatHSL=w;function f(i){return`hsla(${i.hsla.h}, ${(i.hsla.s*100).toFixed(2)}%, ${(i.hsla.l*100).toFixed(2)}%, ${i.hsla.a.toFixed(2)})`}I.formatHSLA=f;function v(i){const s=i.toString(16);return s.length!==2?"0"+s:s}function u(i){return`#${v(i.rgba.r)}${v(i.rgba.g)}${v(i.rgba.b)}`}I.formatHex=u;function S(i,s=!1){return s&&i.rgba.a===1?P.Format.CSS.formatHex(i):`#${v(i.rgba.r)}${v(i.rgba.g)}${v(i.rgba.b)}${v(Math.round(i.rgba.a*255))}`}I.formatHexA=S;function g(i){return i.isOpaque()?P.Format.CSS.formatHex(i):P.Format.CSS.formatRGBA(i)}I.format=g;function h(i){const s=i.length;if(s===0||i.charCodeAt(0)!==35)return null;if(s===7){const n=16*l(i.charCodeAt(1))+l(i.charCodeAt(2)),a=16*l(i.charCodeAt(3))+l(i.charCodeAt(4)),r=16*l(i.charCodeAt(5))+l(i.charCodeAt(6));return new P(new t(n,a,r,1))}if(s===9){const n=16*l(i.charCodeAt(1))+l(i.charCodeAt(2)),a=16*l(i.charCodeAt(3))+l(i.charCodeAt(4)),r=16*l(i.charCodeAt(5))+l(i.charCodeAt(6)),c=16*l(i.charCodeAt(7))+l(i.charCodeAt(8));return new P(new t(n,a,r,c/255))}if(s===4){const n=l(i.charCodeAt(1)),a=l(i.charCodeAt(2)),r=l(i.charCodeAt(3));return new P(new t(16*n+n,16*a+a,16*r+r))}if(s===5){const n=l(i.charCodeAt(1)),a=l(i.charCodeAt(2)),r=l(i.charCodeAt(3)),c=l(i.charCodeAt(4));return new P(new t(16*n+n,16*a+a,16*r+r,(16*c+c)/255))}return null}I.parseHex=h;function l(i){switch(i){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(y=m.CSS||(m.CSS={}))})(p=P.Format||(P.Format={}))}(R=e.Color||(e.Color={}))}),define(ee[53],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=e.debounce=e.memoize=void 0;function C(R){return(P,p,m)=>{let y=null,I=null;if(typeof m.value=="function"?(y="value",I=m.value):typeof m.get=="function"&&(y="get",I=m.get),!I)throw new Error("not supported");m[y]=R(I,p)}}function t(R,P,p){let m=null,y=null;if(typeof p.value=="function"?(m="value",y=p.value,y.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof p.get=="function"&&(m="get",y=p.get),!y)throw new Error("not supported");const I=`$memoize$${P}`;p[m]=function(...E){return this.hasOwnProperty(I)||Object.defineProperty(this,I,{configurable:!1,enumerable:!1,writable:!1,value:y.apply(this,E)}),this[I]}}e.memoize=t;function k(R,P,p){return C((m,y)=>{const I=`$debounce$${y}`,E=`$debounce$result$${y}`;return function(...d){this[E]||(this[E]=p?p():void 0),clearTimeout(this[I]),P&&(this[E]=P(this[E],...d),d=[this[E]]),this[I]=setTimeout(()=>{m.apply(this,d),this[E]=p?p():void 0},R)}})}e.debounce=k;function L(R,P,p){return C((m,y)=>{const I=`$throttle$timer$${y}`,E=`$throttle$result$${y}`,d=`$throttle$lastRun$${y}`,w=`$throttle$pending$${y}`;return function(...f){if(this[E]||(this[E]=p?p():void 0),(this[d]===null||this[d]===void 0)&&(this[d]=-Number.MAX_VALUE),P&&(this[E]=P(this[E],...f)),this[w])return;const v=this[d]+R;v<=Date.now()?(this[d]=Date.now(),m.apply(this,[this[E]]),this[E]=p?p():void 0):(this[w]=!0,this[I]=setTimeout(()=>{this[w]=!1,this[d]=Date.now(),m.apply(this,[this[E]]),this[E]=p?p():void 0},v-Date.now()))}})}e.throttle=L}),define(ee[15],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BugIndicatingError=e.ErrorNoTelemetry=e.ExpectedError=e.NotSupportedError=e.NotImplementedError=e.getErrorMessage=e.disposed=e.readonly=e.illegalState=e.illegalArgument=e.canceled=e.CancellationError=e.isCancellationError=e.transformErrorForSerialization=e.onUnexpectedExternalError=e.onUnexpectedError=e.setUnexpectedErrorHandler=e.errorHandler=e.ErrorHandler=void 0;class C{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(i){setTimeout(()=>{throw i.stack?g.isErrorNoTelemetry(i)?new g(i.message+`

`+i.stack):new Error(i.message+`

`+i.stack):i},0)}}addListener(i){return this.listeners.push(i),()=>{this._removeListener(i)}}emit(i){this.listeners.forEach(s=>{s(i)})}_removeListener(i){this.listeners.splice(this.listeners.indexOf(i),1)}setUnexpectedErrorHandler(i){this.unexpectedErrorHandler=i}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(i){this.unexpectedErrorHandler(i),this.emit(i)}onUnexpectedExternalError(i){this.unexpectedErrorHandler(i)}}e.ErrorHandler=C,e.errorHandler=new C;function t(l){e.errorHandler.setUnexpectedErrorHandler(l)}e.setUnexpectedErrorHandler=t;function k(l){p(l)||e.errorHandler.onUnexpectedError(l)}e.onUnexpectedError=k;function L(l){p(l)||e.errorHandler.onUnexpectedExternalError(l)}e.onUnexpectedExternalError=L;function R(l){if(l instanceof Error){const{name:i,message:s}=l,n=l.stacktrace||l.stack;return{$isError:!0,name:i,message:s,stack:n,noTelemetry:g.isErrorNoTelemetry(l)}}return l}e.transformErrorForSerialization=R;const P="Canceled";function p(l){return l instanceof m?!0:l instanceof Error&&l.name===P&&l.message===P}e.isCancellationError=p;class m extends Error{constructor(){super(P),this.name=this.message}}e.CancellationError=m;function y(){const l=new Error(P);return l.name=l.message,l}e.canceled=y;function I(l){return l?new Error(`Illegal argument: ${l}`):new Error("Illegal argument")}e.illegalArgument=I;function E(l){return l?new Error(`Illegal state: ${l}`):new Error("Illegal state")}e.illegalState=E;function d(l){return l?new Error(`readonly property '${l} cannot be changed'`):new Error("readonly property cannot be changed")}e.readonly=d;function w(l){const i=new Error(`${l} has been disposed`);return i.name="DISPOSED",i}e.disposed=w;function f(l){return l?l.message?l.message:l.stack?l.stack.split(`
`)[0]:String(l):"Error"}e.getErrorMessage=f;class v extends Error{constructor(i){super("NotImplemented"),i&&(this.message=i)}}e.NotImplementedError=v;class u extends Error{constructor(i){super("NotSupported"),i&&(this.message=i)}}e.NotSupportedError=u;class S extends Error{constructor(){super(...arguments),this.isExpected=!0}}e.ExpectedError=S;class g extends Error{constructor(i){super(i),this.name="CodeExpectedError"}static fromError(i){if(i instanceof g)return i;const s=new g;return s.message=i.message,s.stack=i.stack,s}static isErrorNoTelemetry(i){return i.name==="CodeExpectedError"}}e.ErrorNoTelemetry=g;class h extends Error{constructor(i){super(i||"An unexpected bug occurred."),Object.setPrototypeOf(this,h.prototype);debugger}}e.BugIndicatingError=h}),define(ee[24],te([0,1,15]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CallbackIterable=e.ArrayQueue=e.findMinBy=e.findLastMaxBy=e.findMaxBy=e.numberComparator=e.tieBreakComparators=e.compareBy=e.CompareResult=e.splice=e.insertInto=e.mapFind=e.getRandomElement=e.asArray=e.mapArrayOrNot=e.pushMany=e.pushToEnd=e.pushToStart=e.shuffle=e.arrayInsert=e.remove=e.insert=e.index=e.range=e.flatten=e.commonPrefixLength=e.lastOrDefault=e.firstOrDefault=e.lastIndex=e.findLast=e.uniqueFilter=e.distinct=e.isNonEmptyArray=e.isFalsyOrEmpty=e.move=e.coalesceInPlace=e.coalesce=e.topAsync=e.top=e.delta=e.sortedDiff=e.groupBy=e.quickSelect=e.findFirstInSorted=e.binarySearch2=e.binarySearch=e.removeFastWithoutKeepingOrder=e.equals=e.tail2=e.tail=void 0;function t(B,X=0){return B[B.length-(1+X)]}e.tail=t;function k(B){if(B.length===0)throw new Error("Invalid tail call");return[B.slice(0,B.length-1),B[B.length-1]]}e.tail2=k;function L(B,X,J=(oe,ge)=>oe===ge){if(B===X)return!0;if(!B||!X||B.length!==X.length)return!1;for(let oe=0,ge=B.length;oe<ge;oe++)if(!J(B[oe],X[oe]))return!1;return!0}e.equals=L;function R(B,X){const J=B.length-1;X<J&&(B[X]=B[J]),B.pop()}e.removeFastWithoutKeepingOrder=R;function P(B,X,J){return p(B.length,oe=>J(B[oe],X))}e.binarySearch=P;function p(B,X){let J=0,oe=B-1;for(;J<=oe;){const ge=(J+oe)/2|0,De=X(ge);if(De<0)J=ge+1;else if(De>0)oe=ge-1;else return ge}return-(J+1)}e.binarySearch2=p;function m(B,X){let J=0,oe=B.length;if(oe===0)return 0;for(;J<oe;){const ge=Math.floor((J+oe)/2);X(B[ge])?oe=ge:J=ge+1}return J}e.findFirstInSorted=m;function y(B,X,J){if(B=B|0,B>=X.length)throw new TypeError("invalid index");const oe=X[Math.floor(X.length*Math.random())],ge=[],De=[],Te=[];for(const ke of X){const Ae=J(ke,oe);Ae<0?ge.push(ke):Ae>0?De.push(ke):Te.push(ke)}return B<ge.length?y(B,ge,J):B<ge.length+Te.length?Te[0]:y(B-(ge.length+Te.length),De,J)}e.quickSelect=y;function I(B,X){const J=[];let oe;for(const ge of B.slice(0).sort(X))!oe||X(oe[0],ge)!==0?(oe=[ge],J.push(oe)):oe.push(ge);return J}e.groupBy=I;function E(B,X,J){const oe=[];function ge(ke,Ae,ve){if(Ae===0&&ve.length===0)return;const pe=oe[oe.length-1];pe&&pe.start+pe.deleteCount===ke?(pe.deleteCount+=Ae,pe.toInsert.push(...ve)):oe.push({start:ke,deleteCount:Ae,toInsert:ve})}let De=0,Te=0;for(;;){if(De===B.length){ge(De,0,X.slice(Te));break}if(Te===X.length){ge(De,B.length-De,[]);break}const ke=B[De],Ae=X[Te],ve=J(ke,Ae);ve===0?(De+=1,Te+=1):ve<0?(ge(De,1,[]),De+=1):ve>0&&(ge(De,0,[Ae]),Te+=1)}return oe}e.sortedDiff=E;function d(B,X,J){const oe=E(B,X,J),ge=[],De=[];for(const Te of oe)ge.push(...B.slice(Te.start,Te.start+Te.deleteCount)),De.push(...Te.toInsert);return{removed:ge,added:De}}e.delta=d;function w(B,X,J){if(J===0)return[];const oe=B.slice(0,J).sort(X);return v(B,X,oe,J,B.length),oe}e.top=w;function f(B,X,J,oe,ge){return J===0?Promise.resolve([]):new Promise((De,Te)=>{(async()=>{const ke=B.length,Ae=B.slice(0,J).sort(X);for(let ve=J,pe=Math.min(J+oe,ke);ve<ke;ve=pe,pe=Math.min(pe+oe,ke)){if(ve>J&&await new Promise(ye=>setTimeout(ye)),ge&&ge.isCancellationRequested)throw new C.CancellationError;v(B,X,Ae,ve,pe)}return Ae})().then(De,Te)})}e.topAsync=f;function v(B,X,J,oe,ge){for(const De=J.length;oe<ge;oe++){const Te=B[oe];if(X(Te,J[De-1])<0){J.pop();const ke=m(J,Ae=>X(Te,Ae)<0);J.splice(ke,0,Te)}}}function u(B){return B.filter(X=>!!X)}e.coalesce=u;function S(B){let X=0;for(let J=0;J<B.length;J++)B[J]&&(B[X]=B[J],X+=1);B.length=X}e.coalesceInPlace=S;function g(B,X,J){B.splice(J,0,B.splice(X,1)[0])}e.move=g;function h(B){return!Array.isArray(B)||B.length===0}e.isFalsyOrEmpty=h;function l(B){return Array.isArray(B)&&B.length>0}e.isNonEmptyArray=l;function i(B,X=J=>J){const J=new Set;return B.filter(oe=>{const ge=X(oe);return J.has(ge)?!1:(J.add(ge),!0)})}e.distinct=i;function s(B){const X=new Set;return J=>{const oe=B(J);return X.has(oe)?!1:(X.add(oe),!0)}}e.uniqueFilter=s;function n(B,X){const J=a(B,X);if(J!==-1)return B[J]}e.findLast=n;function a(B,X){for(let J=B.length-1;J>=0;J--){const oe=B[J];if(X(oe))return J}return-1}e.lastIndex=a;function r(B,X){return B.length>0?B[0]:X}e.firstOrDefault=r;function c(B,X){return B.length>0?B[B.length-1]:X}e.lastOrDefault=c;function o(B,X,J=(oe,ge)=>oe===ge){let oe=0;for(let ge=0,De=Math.min(B.length,X.length);ge<De&&J(B[ge],X[ge]);ge++)oe++;return oe}e.commonPrefixLength=o;function b(B){return[].concat(...B)}e.flatten=b;function D(B,X){let J=typeof X=="number"?B:0;typeof X=="number"?J=B:(J=0,X=B);const oe=[];if(J<=X)for(let ge=J;ge<X;ge++)oe.push(ge);else for(let ge=J;ge>X;ge--)oe.push(ge);return oe}e.range=D;function A(B,X,J){return B.reduce((oe,ge)=>(oe[X(ge)]=J?J(ge):ge,oe),Object.create(null))}e.index=A;function N(B,X){return B.push(X),()=>G(B,X)}e.insert=N;function G(B,X){const J=B.indexOf(X);if(J>-1)return B.splice(J,1),X}e.remove=G;function ae(B,X,J){const oe=B.slice(0,X),ge=B.slice(X);return oe.concat(J,ge)}e.arrayInsert=ae;function x(B,X){let J;if(typeof X=="number"){let oe=X;J=()=>{const ge=Math.sin(oe++)*179426549;return ge-Math.floor(ge)}}else J=Math.random;for(let oe=B.length-1;oe>0;oe-=1){const ge=Math.floor(J()*(oe+1)),De=B[oe];B[oe]=B[ge],B[ge]=De}}e.shuffle=x;function Q(B,X){const J=B.indexOf(X);J>-1&&(B.splice(J,1),B.unshift(X))}e.pushToStart=Q;function re(B,X){const J=B.indexOf(X);J>-1&&(B.splice(J,1),B.push(X))}e.pushToEnd=re;function ne(B,X){for(const J of X)B.push(J)}e.pushMany=ne;function fe(B,X){return Array.isArray(B)?B.map(X):X(B)}e.mapArrayOrNot=fe;function K(B){return Array.isArray(B)?B:[B]}e.asArray=K;function le(B){return B[Math.floor(Math.random()*B.length)]}e.getRandomElement=le;function W(B,X){for(const J of B){const oe=X(J);if(oe!==void 0)return oe}}e.mapFind=W;function O(B,X,J){const oe=H(B,X),ge=B.length,De=J.length;B.length=ge+De;for(let Te=ge-1;Te>=oe;Te--)B[Te+De]=B[Te];for(let Te=0;Te<De;Te++)B[Te+oe]=J[Te]}e.insertInto=O;function U(B,X,J,oe){const ge=H(B,X),De=B.splice(ge,J);return O(B,ge,oe),De}e.splice=U;function H(B,X){return X<0?Math.max(X+B.length,0):Math.min(X,B.length)}var se;(function(B){function X(ge){return ge<0}B.isLessThan=X;function J(ge){return ge>0}B.isGreaterThan=J;function oe(ge){return ge===0}B.isNeitherLessOrGreaterThan=oe,B.greaterThan=1,B.lessThan=-1,B.neitherLessOrGreaterThan=0})(se=e.CompareResult||(e.CompareResult={}));function $(B,X){return(J,oe)=>X(B(J),B(oe))}e.compareBy=$;function z(...B){return(X,J)=>{for(const oe of B){const ge=oe(X,J);if(!se.isNeitherLessOrGreaterThan(ge))return ge}return se.neitherLessOrGreaterThan}}e.tieBreakComparators=z;const M=(B,X)=>B-X;e.numberComparator=M;function T(B,X){if(B.length===0)return;let J=B[0];for(let oe=1;oe<B.length;oe++){const ge=B[oe];X(ge,J)>0&&(J=ge)}return J}e.findMaxBy=T;function F(B,X){if(B.length===0)return;let J=B[0];for(let oe=1;oe<B.length;oe++){const ge=B[oe];X(ge,J)>=0&&(J=ge)}return J}e.findLastMaxBy=F;function _(B,X){return T(B,(J,oe)=>-X(J,oe))}e.findMinBy=_;class q{constructor(X){this.items=X,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(X){let J=this.firstIdx;for(;J<this.items.length&&X(this.items[J]);)J++;const oe=J===this.firstIdx?null:this.items.slice(this.firstIdx,J);return this.firstIdx=J,oe}takeFromEndWhile(X){let J=this.lastIdx;for(;J>=0&&X(this.items[J]);)J--;const oe=J===this.lastIdx?null:this.items.slice(J+1,this.lastIdx+1);return this.lastIdx=J,oe}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){const X=this.items[this.firstIdx];return this.firstIdx++,X}removeLast(){const X=this.items[this.lastIdx];return this.lastIdx--,X}takeCount(X){const J=this.items.slice(this.firstIdx,this.firstIdx+X);return this.firstIdx+=X,J}}e.ArrayQueue=q;class Y{constructor(X){this.iterate=X}forEach(X){this.iterate(J=>(X(J),!0))}toArray(){const X=[];return this.iterate(J=>(X.push(J),!0)),X}filter(X){return new Y(J=>this.iterate(oe=>X(oe)?J(oe):!0))}map(X){return new Y(J=>this.iterate(oe=>J(X(oe))))}some(X){let J=!1;return this.iterate(oe=>(J=X(oe),!J)),J}findFirst(X){let J;return this.iterate(oe=>X(oe)?(J=oe,!1):!0),J}findLast(X){let J;return this.iterate(oe=>(X(oe)&&(J=oe),!0)),J}findLastMaxBy(X){let J,oe=!0;return this.iterate(ge=>((oe||se.isGreaterThan(X(ge,J)))&&(oe=!1,J=ge),!0)),J}}e.CallbackIterable=Y,Y.empty=new Y(B=>{})}),define(ee[123],te([0,1,15]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkAdjacentItems=e.assertFn=e.assert=e.assertNever=e.ok=void 0;function t(p,m){if(!p)throw new Error(m?`Assertion failed (${m})`:"Assertion Failed")}e.ok=t;function k(p,m="Unreachable"){throw new Error(m)}e.assertNever=k;function L(p){if(!p)throw new C.BugIndicatingError("Assertion Failed")}e.assert=L;function R(p){if(!p()){debugger;p(),(0,C.onUnexpectedError)(new C.BugIndicatingError("Assertion Failed"))}}e.assertFn=R;function P(p,m){let y=0;for(;y<p.length-1;){const I=p[y],E=p[y+1];if(!m(I,E))return!1;y++}return!0}e.checkAdjacentItems=P}),define(ee[50],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.once=void 0;function C(t){const k=this;let L=!1,R;return function(){return L||(L=!0,R=t.apply(k,arguments)),R}}e.once=C}),define(ee[67],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Iterable=void 0;var C;(function(t){function k(h){return h&&typeof h=="object"&&typeof h[Symbol.iterator]=="function"}t.is=k;const L=Object.freeze([]);function R(){return L}t.empty=R;function*P(h){yield h}t.single=P;function p(h){return k(h)?h:P(h)}t.wrap=p;function m(h){return h||L}t.from=m;function y(h){return!h||h[Symbol.iterator]().next().done===!0}t.isEmpty=y;function I(h){return h[Symbol.iterator]().next().value}t.first=I;function E(h,l){for(const i of h)if(l(i))return!0;return!1}t.some=E;function d(h,l){for(const i of h)if(l(i))return i}t.find=d;function*w(h,l){for(const i of h)l(i)&&(yield i)}t.filter=w;function*f(h,l){let i=0;for(const s of h)yield l(s,i++)}t.map=f;function*v(...h){for(const l of h)for(const i of l)yield i}t.concat=v;function u(h,l,i){let s=i;for(const n of h)s=l(s,n);return s}t.reduce=u;function*S(h,l,i=h.length){for(l<0&&(l+=h.length),i<0?i+=h.length:i>h.length&&(i=h.length);l<i;l++)yield h[l]}t.slice=S;function g(h,l=Number.POSITIVE_INFINITY){const i=[];if(l===0)return[i,h];const s=h[Symbol.iterator]();for(let n=0;n<l;n++){const a=s.next();if(a.done)return[i,t.empty()];i.push(a.value)}return[i,{[Symbol.iterator](){return s}}]}t.consume=g})(C=e.Iterable||(e.Iterable={}))}),define(ee[43],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNodeType=e.stripComments=e.visit=e.findNodeAtOffset=e.contains=e.getNodeValue=e.getNodePath=e.findNodeAtLocation=e.parseTree=e.parse=e.getLocation=e.createScanner=e.ParseOptions=e.ParseErrorCode=e.SyntaxKind=e.ScanError=void 0;var C;(function(i){i[i.None=0]="None",i[i.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=2]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",i[i.InvalidUnicode=4]="InvalidUnicode",i[i.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",i[i.InvalidCharacter=6]="InvalidCharacter"})(C=e.ScanError||(e.ScanError={}));var t;(function(i){i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF"})(t=e.SyntaxKind||(e.SyntaxKind={}));var k;(function(i){i[i.InvalidSymbol=1]="InvalidSymbol",i[i.InvalidNumberFormat=2]="InvalidNumberFormat",i[i.PropertyNameExpected=3]="PropertyNameExpected",i[i.ValueExpected=4]="ValueExpected",i[i.ColonExpected=5]="ColonExpected",i[i.CommaExpected=6]="CommaExpected",i[i.CloseBraceExpected=7]="CloseBraceExpected",i[i.CloseBracketExpected=8]="CloseBracketExpected",i[i.EndOfFileExpected=9]="EndOfFileExpected",i[i.InvalidCommentToken=10]="InvalidCommentToken",i[i.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=12]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",i[i.InvalidUnicode=14]="InvalidUnicode",i[i.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",i[i.InvalidCharacter=16]="InvalidCharacter"})(k=e.ParseErrorCode||(e.ParseErrorCode={}));var L;(function(i){i.DEFAULT={allowTrailingComma:!0}})(L=e.ParseOptions||(e.ParseOptions={}));function R(i,s=!1){let n=0;const a=i.length;let r="",c=0,o=16,b=0;function D(re){let ne=0,fe=0;for(;ne<re;){const K=i.charCodeAt(n);if(K>=48&&K<=57)fe=fe*16+K-48;else if(K>=65&&K<=70)fe=fe*16+K-65+10;else if(K>=97&&K<=102)fe=fe*16+K-97+10;else break;n++,ne++}return ne<re&&(fe=-1),fe}function A(re){n=re,r="",c=0,o=16,b=0}function N(){const re=n;if(i.charCodeAt(n)===48)n++;else for(n++;n<i.length&&m(i.charCodeAt(n));)n++;if(n<i.length&&i.charCodeAt(n)===46)if(n++,n<i.length&&m(i.charCodeAt(n)))for(n++;n<i.length&&m(i.charCodeAt(n));)n++;else return b=3,i.substring(re,n);let ne=n;if(n<i.length&&(i.charCodeAt(n)===69||i.charCodeAt(n)===101))if(n++,(n<i.length&&i.charCodeAt(n)===43||i.charCodeAt(n)===45)&&n++,n<i.length&&m(i.charCodeAt(n))){for(n++;n<i.length&&m(i.charCodeAt(n));)n++;ne=n}else b=3;return i.substring(re,ne)}function G(){let re="",ne=n;for(;;){if(n>=a){re+=i.substring(ne,n),b=2;break}const fe=i.charCodeAt(n);if(fe===34){re+=i.substring(ne,n),n++;break}if(fe===92){if(re+=i.substring(ne,n),n++,n>=a){b=2;break}switch(i.charCodeAt(n++)){case 34:re+='"';break;case 92:re+="\\";break;case 47:re+="/";break;case 98:re+="\b";break;case 102:re+="\f";break;case 110:re+=`
`;break;case 114:re+="\r";break;case 116:re+="	";break;case 117:{const le=D(4);le>=0?re+=String.fromCharCode(le):b=4;break}default:b=5}ne=n;continue}if(fe>=0&&fe<=31)if(p(fe)){re+=i.substring(ne,n),b=2;break}else b=6;n++}return re}function ae(){if(r="",b=0,c=n,n>=a)return c=a,o=17;let re=i.charCodeAt(n);if(P(re)){do n++,r+=String.fromCharCode(re),re=i.charCodeAt(n);while(P(re));return o=15}if(p(re))return n++,r+=String.fromCharCode(re),re===13&&i.charCodeAt(n)===10&&(n++,r+=`
`),o=14;switch(re){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,r=G(),o=10;case 47:{const ne=n-1;if(i.charCodeAt(n+1)===47){for(n+=2;n<a&&!p(i.charCodeAt(n));)n++;return r=i.substring(ne,n),o=12}if(i.charCodeAt(n+1)===42){n+=2;const fe=a-1;let K=!1;for(;n<fe;){if(i.charCodeAt(n)===42&&i.charCodeAt(n+1)===47){n+=2,K=!0;break}n++}return K||(n++,b=1),r=i.substring(ne,n),o=13}return r+=String.fromCharCode(re),n++,o=16}case 45:if(r+=String.fromCharCode(re),n++,n===a||!m(i.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r+=N(),o=11;default:for(;n<a&&x(re);)n++,re=i.charCodeAt(n);if(c!==n){switch(r=i.substring(c,n),r){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return r+=String.fromCharCode(re),n++,o=16}}function x(re){if(P(re)||p(re))return!1;switch(re){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function Q(){let re;do re=ae();while(re>=12&&re<=15);return re}return{setPosition:A,getPosition:()=>n,scan:s?Q:ae,getToken:()=>o,getTokenValue:()=>r,getTokenOffset:()=>c,getTokenLength:()=>n-c,getTokenError:()=>b}}e.createScanner=R;function P(i){return i===32||i===9||i===11||i===12||i===160||i===5760||i>=8192&&i<=8203||i===8239||i===8287||i===12288||i===65279}function p(i){return i===10||i===13||i===8232||i===8233}function m(i){return i>=48&&i<=57}var y;(function(i){i[i.nullCharacter=0]="nullCharacter",i[i.maxAsciiCharacter=127]="maxAsciiCharacter",i[i.lineFeed=10]="lineFeed",i[i.carriageReturn=13]="carriageReturn",i[i.lineSeparator=8232]="lineSeparator",i[i.paragraphSeparator=8233]="paragraphSeparator",i[i.nextLine=133]="nextLine",i[i.space=32]="space",i[i.nonBreakingSpace=160]="nonBreakingSpace",i[i.enQuad=8192]="enQuad",i[i.emQuad=8193]="emQuad",i[i.enSpace=8194]="enSpace",i[i.emSpace=8195]="emSpace",i[i.threePerEmSpace=8196]="threePerEmSpace",i[i.fourPerEmSpace=8197]="fourPerEmSpace",i[i.sixPerEmSpace=8198]="sixPerEmSpace",i[i.figureSpace=8199]="figureSpace",i[i.punctuationSpace=8200]="punctuationSpace",i[i.thinSpace=8201]="thinSpace",i[i.hairSpace=8202]="hairSpace",i[i.zeroWidthSpace=8203]="zeroWidthSpace",i[i.narrowNoBreakSpace=8239]="narrowNoBreakSpace",i[i.ideographicSpace=12288]="ideographicSpace",i[i.mathematicalSpace=8287]="mathematicalSpace",i[i.ogham=5760]="ogham",i[i._=95]="_",i[i.$=36]="$",i[i._0=48]="_0",i[i._1=49]="_1",i[i._2=50]="_2",i[i._3=51]="_3",i[i._4=52]="_4",i[i._5=53]="_5",i[i._6=54]="_6",i[i._7=55]="_7",i[i._8=56]="_8",i[i._9=57]="_9",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.ampersand=38]="ampersand",i[i.asterisk=42]="asterisk",i[i.at=64]="at",i[i.backslash=92]="backslash",i[i.bar=124]="bar",i[i.caret=94]="caret",i[i.closeBrace=125]="closeBrace",i[i.closeBracket=93]="closeBracket",i[i.closeParen=41]="closeParen",i[i.colon=58]="colon",i[i.comma=44]="comma",i[i.dot=46]="dot",i[i.doubleQuote=34]="doubleQuote",i[i.equals=61]="equals",i[i.exclamation=33]="exclamation",i[i.greaterThan=62]="greaterThan",i[i.lessThan=60]="lessThan",i[i.minus=45]="minus",i[i.openBrace=123]="openBrace",i[i.openBracket=91]="openBracket",i[i.openParen=40]="openParen",i[i.percent=37]="percent",i[i.plus=43]="plus",i[i.question=63]="question",i[i.semicolon=59]="semicolon",i[i.singleQuote=39]="singleQuote",i[i.slash=47]="slash",i[i.tilde=126]="tilde",i[i.backspace=8]="backspace",i[i.formFeed=12]="formFeed",i[i.byteOrderMark=65279]="byteOrderMark",i[i.tab=9]="tab",i[i.verticalTab=11]="verticalTab"})(y||(y={}));function I(i,s){const n=[],a=new Object;let r;const c={value:{},offset:0,length:0,type:"object",parent:void 0};let o=!1;function b(D,A,N,G){c.value=D,c.offset=A,c.length=N,c.type=G,c.colonOffset=void 0,r=c}try{g(i,{onObjectBegin:(D,A)=>{if(s<=D)throw a;r=void 0,o=s>D,n.push("")},onObjectProperty:(D,A,N)=>{if(s<A||(b(D,A,N,"property"),n[n.length-1]=D,s<=A+N))throw a},onObjectEnd:(D,A)=>{if(s<=D)throw a;r=void 0,n.pop()},onArrayBegin:(D,A)=>{if(s<=D)throw a;r=void 0,n.push(0)},onArrayEnd:(D,A)=>{if(s<=D)throw a;r=void 0,n.pop()},onLiteralValue:(D,A,N)=>{if(s<A||(b(D,A,N,l(D)),s<=A+N))throw a},onSeparator:(D,A,N)=>{if(s<=A)throw a;if(D===":"&&r&&r.type==="property")r.colonOffset=A,o=!1,r=void 0;else if(D===","){const G=n[n.length-1];typeof G=="number"?n[n.length-1]=G+1:(o=!0,n[n.length-1]=""),r=void 0}}})}catch(D){if(D!==a)throw D}return{path:n,previousNode:r,isAtPropertyKey:o,matches:D=>{let A=0;for(let N=0;A<D.length&&N<n.length;N++)if(D[A]===n[N]||D[A]==="*")A++;else if(D[A]!=="**")return!1;return A===D.length}}}e.getLocation=I;function E(i,s=[],n=L.DEFAULT){let a=null,r=[];const c=[];function o(D){Array.isArray(r)?r.push(D):a!==null&&(r[a]=D)}return g(i,{onObjectBegin:()=>{const D={};o(D),c.push(r),r=D,a=null},onObjectProperty:D=>{a=D},onObjectEnd:()=>{r=c.pop()},onArrayBegin:()=>{const D=[];o(D),c.push(r),r=D,a=null},onArrayEnd:()=>{r=c.pop()},onLiteralValue:o,onError:(D,A,N)=>{s.push({error:D,offset:A,length:N})}},n),r[0]}e.parse=E;function d(i,s=[],n=L.DEFAULT){let a={type:"array",offset:-1,length:-1,children:[],parent:void 0};function r(D){a.type==="property"&&(a.length=D-a.offset,a=a.parent)}function c(D){return a.children.push(D),D}g(i,{onObjectBegin:D=>{a=c({type:"object",offset:D,length:-1,parent:a,children:[]})},onObjectProperty:(D,A,N)=>{a=c({type:"property",offset:A,length:-1,parent:a,children:[]}),a.children.push({type:"string",value:D,offset:A,length:N,parent:a})},onObjectEnd:(D,A)=>{a.length=D+A-a.offset,a=a.parent,r(D+A)},onArrayBegin:(D,A)=>{a=c({type:"array",offset:D,length:-1,parent:a,children:[]})},onArrayEnd:(D,A)=>{a.length=D+A-a.offset,a=a.parent,r(D+A)},onLiteralValue:(D,A,N)=>{c({type:l(D),offset:A,length:N,parent:a,value:D}),r(A+N)},onSeparator:(D,A,N)=>{a.type==="property"&&(D===":"?a.colonOffset=A:D===","&&r(A))},onError:(D,A,N)=>{s.push({error:D,offset:A,length:N})}},n);const b=a.children[0];return b&&delete b.parent,b}e.parseTree=d;function w(i,s){if(!i)return;let n=i;for(const a of s)if(typeof a=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let r=!1;for(const c of n.children)if(Array.isArray(c.children)&&c.children[0].value===a){n=c.children[1],r=!0;break}if(!r)return}else{const r=a;if(n.type!=="array"||r<0||!Array.isArray(n.children)||r>=n.children.length)return;n=n.children[r]}return n}e.findNodeAtLocation=w;function f(i){if(!i.parent||!i.parent.children)return[];const s=f(i.parent);if(i.parent.type==="property"){const n=i.parent.children[0].value;s.push(n)}else if(i.parent.type==="array"){const n=i.parent.children.indexOf(i);n!==-1&&s.push(n)}return s}e.getNodePath=f;function v(i){switch(i.type){case"array":return i.children.map(v);case"object":{const s=Object.create(null);for(const n of i.children){const a=n.children[1];a&&(s[n.children[0].value]=v(a))}return s}case"null":case"string":case"number":case"boolean":return i.value;default:return}}e.getNodeValue=v;function u(i,s,n=!1){return s>=i.offset&&s<i.offset+i.length||n&&s===i.offset+i.length}e.contains=u;function S(i,s,n=!1){if(u(i,s,n)){const a=i.children;if(Array.isArray(a))for(let r=0;r<a.length&&a[r].offset<=s;r++){const c=S(a[r],s,n);if(c)return c}return i}}e.findNodeAtOffset=S;function g(i,s,n=L.DEFAULT){const a=R(i,!1);function r($){return $?()=>$(a.getTokenOffset(),a.getTokenLength()):()=>!0}function c($){return $?z=>$(z,a.getTokenOffset(),a.getTokenLength()):()=>!0}const o=r(s.onObjectBegin),b=c(s.onObjectProperty),D=r(s.onObjectEnd),A=r(s.onArrayBegin),N=r(s.onArrayEnd),G=c(s.onLiteralValue),ae=c(s.onSeparator),x=r(s.onComment),Q=c(s.onError),re=n&&n.disallowComments,ne=n&&n.allowTrailingComma;function fe(){for(;;){const $=a.scan();switch(a.getTokenError()){case 4:K(14);break;case 5:K(15);break;case 3:K(13);break;case 1:re||K(11);break;case 2:K(12);break;case 6:K(16);break}switch($){case 12:case 13:re?K(10):x();break;case 16:K(1);break;case 15:case 14:break;default:return $}}}function K($,z=[],M=[]){if(Q($),z.length+M.length>0){let T=a.getToken();for(;T!==17;){if(z.indexOf(T)!==-1){fe();break}else if(M.indexOf(T)!==-1)break;T=fe()}}}function le($){const z=a.getTokenValue();return $?G(z):b(z),fe(),!0}function W(){switch(a.getToken()){case 11:{let $=0;try{$=JSON.parse(a.getTokenValue()),typeof $!="number"&&(K(2),$=0)}catch{K(2)}G($);break}case 7:G(null);break;case 8:G(!0);break;case 9:G(!1);break;default:return!1}return fe(),!0}function O(){return a.getToken()!==10?(K(3,[],[2,5]),!1):(le(!1),a.getToken()===6?(ae(":"),fe(),se()||K(4,[],[2,5])):K(5,[],[2,5]),!0)}function U(){o(),fe();let $=!1;for(;a.getToken()!==2&&a.getToken()!==17;){if(a.getToken()===5){if($||K(4,[],[]),ae(","),fe(),a.getToken()===2&&ne)break}else $&&K(6,[],[]);O()||K(4,[],[2,5]),$=!0}return D(),a.getToken()!==2?K(7,[2],[]):fe(),!0}function H(){A(),fe();let $=!1;for(;a.getToken()!==4&&a.getToken()!==17;){if(a.getToken()===5){if($||K(4,[],[]),ae(","),fe(),a.getToken()===4&&ne)break}else $&&K(6,[],[]);se()||K(4,[],[4,5]),$=!0}return N(),a.getToken()!==4?K(8,[4],[]):fe(),!0}function se(){switch(a.getToken()){case 3:return H();case 1:return U();case 10:return le(!0);default:return W()}}return fe(),a.getToken()===17?n.allowEmptyContent?!0:(K(4,[],[]),!1):se()?(a.getToken()!==17&&K(9,[],[]),!0):(K(4,[],[]),!1)}e.visit=g;function h(i,s){const n=R(i),a=[];let r,c=0,o;do switch(o=n.getPosition(),r=n.scan(),r){case 12:case 13:case 17:c!==o&&a.push(i.substring(c,o)),s!==void 0&&a.push(n.getTokenValue().replace(/[^\r\n]/g,s)),c=n.getPosition();break}while(r!==17);return a.join("")}e.stripComments=h;function l(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(i){if(Array.isArray(i))return"array"}else return"null";return"object"}default:return"null"}}e.getNodeType=l}),define(ee[124],te([0,1,43]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEOL=e.getEOL=e.toFormattedString=e.format=void 0;function t(m,y,I){let E,d,w,f,v;if(y){for(f=y.offset,v=f+y.length,w=f;w>0&&!p(m,w-1);)w--;let o=v;for(;o<m.length&&!p(m,o);)o++;d=m.substring(w,o),E=R(d,I)}else d=m,E=0,w=0,f=0,v=m.length;const u=P(I,m);let S=!1,g=0,h;I.insertSpaces?h=L(" ",I.tabSize||4):h="	";const l=(0,C.createScanner)(d,!1);let i=!1;function s(){return u+L(h,E+g)}function n(){let o=l.scan();for(S=!1;o===15||o===14;)S=S||o===14,o=l.scan();return i=o===16||l.getTokenError()!==0,o}const a=[];function r(o,b,D){!i&&b<v&&D>f&&m.substring(b,D)!==o&&a.push({offset:b,length:D-b,content:o})}let c=n();if(c!==17){const o=l.getTokenOffset()+w,b=L(h,E);r(b,w,o)}for(;c!==17;){let o=l.getTokenOffset()+l.getTokenLength()+w,b=n(),D="";for(;!S&&(b===12||b===13);){const N=l.getTokenOffset()+w;r(" ",o,N),o=l.getTokenOffset()+l.getTokenLength()+w,D=b===12?s():"",b=n()}if(b===2)c!==1&&(g--,D=s());else if(b===4)c!==3&&(g--,D=s());else{switch(c){case 3:case 1:g++,D=s();break;case 5:case 12:D=s();break;case 13:S?D=s():D=" ";break;case 6:D=" ";break;case 10:if(b===6){D="";break}case 7:case 8:case 9:case 11:case 2:case 4:b===12||b===13?D=" ":b!==5&&b!==17&&(i=!0);break;case 16:i=!0;break}S&&(b===12||b===13)&&(D=s())}const A=l.getTokenOffset()+w;r(D,o,A),c=b}return a}e.format=t;function k(m,y){const I=JSON.stringify(m,void 0,y.insertSpaces?y.tabSize||4:"	");return y.eol!==void 0?I.replace(/\r\n|\r|\n/g,y.eol):I}e.toFormattedString=k;function L(m,y){let I="";for(let E=0;E<y;E++)I+=m;return I}function R(m,y){let I=0,E=0;const d=y.tabSize||4;for(;I<m.length;){const w=m.charAt(I);if(w===" ")E++;else if(w==="	")E+=d;else break;I++}return Math.floor(E/d)}function P(m,y){for(let I=0;I<y.length;I++){const E=y.charAt(I);if(E==="\r")return I+1<y.length&&y.charAt(I+1)===`
`?`\r
`:"\r";if(E===`
`)return`
`}return m&&m.eol||`
`}e.getEOL=P;function p(m,y){return`\r
`.indexOf(m.charAt(y))!==-1}e.isEOL=p}),define(ee[125],te([0,1,43,124]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyEdits=e.applyEdit=e.withFormatting=e.setProperty=e.removeProperty=void 0;function k(m,y,I){return L(m,y,void 0,I)}e.removeProperty=k;function L(m,y,I,E,d){const w=y.slice(),f=[],v=(0,C.parseTree)(m,f);let u,S;for(;w.length>0&&(S=w.pop(),u=(0,C.findNodeAtLocation)(v,w),u===void 0&&I!==void 0);)typeof S=="string"?I={[S]:I}:I=[I];if(u)if(u.type==="object"&&typeof S=="string"&&Array.isArray(u.children)){const g=(0,C.findNodeAtLocation)(u,[S]);if(g!==void 0)if(I===void 0){if(!g.parent)throw new Error("Malformed AST");const h=u.children.indexOf(g.parent);let l,i=g.parent.offset+g.parent.length;if(h>0){const s=u.children[h-1];l=s.offset+s.length}else l=u.offset+1,u.children.length>1&&(i=u.children[1].offset);return R(m,{offset:l,length:i-l,content:""},E)}else return R(m,{offset:g.offset,length:g.length,content:JSON.stringify(I)},E);else{if(I===void 0)return[];const h=`${JSON.stringify(S)}: ${JSON.stringify(I)}`,l=d?d(u.children.map(s=>s.children[0].value)):u.children.length;let i;if(l>0){const s=u.children[l-1];i={offset:s.offset+s.length,length:0,content:","+h}}else u.children.length===0?i={offset:u.offset+1,length:0,content:h}:i={offset:u.offset+1,length:0,content:h+","};return R(m,i,E)}}else if(u.type==="array"&&typeof S=="number"&&Array.isArray(u.children))if(I!==void 0){const g=`${JSON.stringify(I)}`;let h;if(u.children.length===0||S===0)h={offset:u.offset+1,length:0,content:u.children.length===0?g:g+","};else{const l=S===-1||S>u.children.length?u.children.length:S,i=u.children[l-1];h={offset:i.offset+i.length,length:0,content:","+g}}return R(m,h,E)}else{const g=S,h=u.children[g];let l;if(u.children.length===1)l={offset:u.offset+1,length:u.length-2,content:""};else if(u.children.length-1===g){const i=u.children[g-1],s=i.offset+i.length,n=u.offset+u.length;l={offset:s,length:n-2-s,content:""}}else l={offset:h.offset,length:u.children[g+1].offset-h.offset,content:""};return R(m,l,E)}else throw new Error(`Can not add ${typeof S!="number"?"index":"property"} to parent of type ${u.type}`);else{if(I===void 0)throw new Error("Can not delete in empty document");return R(m,{offset:v?v.offset:0,length:v?v.length:0,content:JSON.stringify(I)},E)}}e.setProperty=L;function R(m,y,I){let E=P(m,y),d=y.offset,w=y.offset+y.content.length;if(y.length===0||y.content.length===0){for(;d>0&&!(0,t.isEOL)(E,d-1);)d--;for(;w<E.length&&!(0,t.isEOL)(E,w);)w++}const f=(0,t.format)(E,{offset:d,length:w-d},I);for(let u=f.length-1;u>=0;u--){const S=f[u];E=P(E,S),d=Math.min(d,S.offset),w=Math.max(w,S.offset+S.length),w+=S.content.length-S.length}const v=m.length-(E.length-w)-d;return[{offset:d,length:v,content:E.substring(d,w)}]}e.withFormatting=R;function P(m,y){return m.substring(0,y.offset)+y.content+m.substring(y.offset+y.length)}e.applyEdit=P;function p(m,y){const I=y.slice(0).sort((d,w)=>{const f=d.offset-w.offset;return f===0?d.length-w.length:f});let E=m.length;for(let d=I.length-1;d>=0;d--){const w=I[d];if(w.offset+w.length<=E)m=P(m,w);else throw new Error("Overlapping edit");E=w.offset}return m}e.applyEdits=p}),define(ee[126],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lazy=void 0;class C{constructor(k){this.executor=k,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(k){this._error=k}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(k){return new C(()=>k(this.getValue()))}}e.Lazy=C}),define(ee[2],te([0,1,50,67]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableMap=e.disposeOnReturn=e.ImmortalReference=e.AsyncReferenceCollection=e.ReferenceCollection=e.SafeDisposable=e.RefCountedDisposable=e.MutableDisposable=e.Disposable=e.DisposableStore=e.toDisposable=e.combinedDisposable=e.disposeIfDisposable=e.dispose=e.isDisposable=e.markAsSingleton=e.setDisposableTracker=void 0;const k=!1;let L=null;function R(c){L=c}if(e.setDisposableTracker=R,k){const c="__is_disposable_tracked__";R(new class{trackDisposable(o){const b=new Error("Potentially leaked disposable").stack;setTimeout(()=>{o[c]||console.log(b)},3e3)}setParent(o,b){if(o&&o!==S.None)try{o[c]=!0}catch{}}markAsDisposed(o){if(o&&o!==S.None)try{o[c]=!0}catch{}}markAsSingleton(o){}})}function P(c){return L?.trackDisposable(c),c}function p(c){L?.markAsDisposed(c)}function m(c,o){L?.setParent(c,o)}function y(c,o){if(!!L)for(const b of c)L.setParent(b,o)}function I(c){return L?.markAsSingleton(c),c}e.markAsSingleton=I;function E(c){return typeof c.dispose=="function"&&c.dispose.length===0}e.isDisposable=E;function d(c){if(t.Iterable.is(c)){const o=[];for(const b of c)if(b)try{b.dispose()}catch(D){o.push(D)}if(o.length===1)throw o[0];if(o.length>1)throw new AggregateError(o,"Encountered errors while disposing of store");return Array.isArray(c)?[]:c}else if(c)return c.dispose(),c}e.dispose=d;function w(c){for(const o of c)E(o)&&o.dispose();return[]}e.disposeIfDisposable=w;function f(...c){const o=v(()=>d(c));return y(c,o),o}e.combinedDisposable=f;function v(c){const o=P({dispose:(0,C.once)(()=>{p(o),c()})});return o}e.toDisposable=v;class u{constructor(){this._toDispose=new Set,this._isDisposed=!1,P(this)}dispose(){this._isDisposed||(p(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{d(this._toDispose)}finally{this._toDispose.clear()}}add(o){if(!o)return o;if(o===this)throw new Error("Cannot register a disposable on itself!");return m(o,this),this._isDisposed?u.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(o),o}}e.DisposableStore=u,u.DISABLE_DISPOSED_WARNING=!1;class S{constructor(){this._store=new u,P(this),m(this._store,this)}dispose(){p(this),this._store.dispose()}_register(o){if(o===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(o)}}e.Disposable=S,S.None=Object.freeze({dispose(){}});class g{constructor(){this._isDisposed=!1,P(this)}get value(){return this._isDisposed?void 0:this._value}set value(o){this._isDisposed||o===this._value||(this._value?.dispose(),o&&m(o,this),this._value=o)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,p(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){const o=this._value;return this._value=void 0,o&&m(o,null),o}}e.MutableDisposable=g;class h{constructor(o){this._disposable=o,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}e.RefCountedDisposable=h;class l{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,P(this)}set(o){let b=o;return this.unset=()=>b=void 0,this.isset=()=>b!==void 0,this.dispose=()=>{b&&(b(),b=void 0,p(this))},this}}e.SafeDisposable=l;class i{constructor(){this.references=new Map}acquire(o,...b){let D=this.references.get(o);D||(D={counter:0,object:this.createReferencedObject(o,...b)},this.references.set(o,D));const{object:A}=D,N=(0,C.once)(()=>{--D.counter===0&&(this.destroyReferencedObject(o,D.object),this.references.delete(o))});return D.counter++,{object:A,dispose:N}}}e.ReferenceCollection=i;class s{constructor(o){this.referenceCollection=o}async acquire(o,...b){const D=this.referenceCollection.acquire(o,...b);try{return{object:await D.object,dispose:()=>D.dispose()}}catch(A){throw D.dispose(),A}}}e.AsyncReferenceCollection=s;class n{constructor(o){this.object=o}dispose(){}}e.ImmortalReference=n;function a(c){const o=new u;try{c(o)}finally{o.dispose()}}e.disposeOnReturn=a;class r{constructor(){this._store=new Map,this._isDisposed=!1,P(this)}dispose(){p(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(!!this._store.size)try{d(this._store.values())}finally{this._store.clear()}}has(o){return this._store.has(o)}get(o){return this._store.get(o)}set(o,b,D=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),D||this._store.get(o)?.dispose(),this._store.set(o,b)}deleteAndDispose(o){this._store.get(o)?.dispose(),this._store.delete(o)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}e.DisposableMap=r}),define(ee[96],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedList=void 0;class C{constructor(L){this.element=L,this.next=C.Undefined,this.prev=C.Undefined}}C.Undefined=new C(void 0);class t{constructor(){this._first=C.Undefined,this._last=C.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===C.Undefined}clear(){let L=this._first;for(;L!==C.Undefined;){const R=L.next;L.prev=C.Undefined,L.next=C.Undefined,L=R}this._first=C.Undefined,this._last=C.Undefined,this._size=0}unshift(L){return this._insert(L,!1)}push(L){return this._insert(L,!0)}_insert(L,R){const P=new C(L);if(this._first===C.Undefined)this._first=P,this._last=P;else if(R){const m=this._last;this._last=P,P.prev=m,m.next=P}else{const m=this._first;this._first=P,P.next=m,m.prev=P}this._size+=1;let p=!1;return()=>{p||(p=!0,this._remove(P))}}shift(){if(this._first!==C.Undefined){const L=this._first.element;return this._remove(this._first),L}}pop(){if(this._last!==C.Undefined){const L=this._last.element;return this._remove(this._last),L}}_remove(L){if(L.prev!==C.Undefined&&L.next!==C.Undefined){const R=L.prev;R.next=L.next,L.next.prev=R}else L.prev===C.Undefined&&L.next===C.Undefined?(this._first=C.Undefined,this._last=C.Undefined):L.next===C.Undefined?(this._last=this._last.prev,this._last.next=C.Undefined):L.prev===C.Undefined&&(this._first=this._first.next,this._first.prev=C.Undefined);this._size-=1}*[Symbol.iterator](){let L=this._first;for(;L!==C.Undefined;)yield L.element,L=L.next}}e.LinkedList=t}),define(ee[39],te([0,1]),function(j,e){"use strict";var C,t,k;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function L(w,f,v){let u=w.get(f);return u===void 0&&(u=v,w.set(f,u)),u}e.getOrSet=L;function R(w){const f=[];return w.forEach((v,u)=>{f.push(`${u} => ${v}`)}),`Map(${w.size}) {${f.join(", ")}}`}e.mapToString=R;function P(w){const f=[];return w.forEach(v=>{f.push(v)}),`Set(${w.size}) {${f.join(", ")}}`}e.setToString=P;class p{constructor(f,v){this.uri=f,this.value=v}}class m{constructor(f,v){this[C]="ResourceMap",f instanceof m?(this.map=new Map(f.map),this.toKey=v??m.defaultToKey):(this.map=new Map,this.toKey=f??m.defaultToKey)}set(f,v){return this.map.set(this.toKey(f),new p(f,v)),this}get(f){return this.map.get(this.toKey(f))?.value}has(f){return this.map.has(this.toKey(f))}get size(){return this.map.size}clear(){this.map.clear()}delete(f){return this.map.delete(this.toKey(f))}forEach(f,v){typeof v<"u"&&(f=f.bind(v));for(const[u,S]of this.map)f(S.value,S.uri,this)}*values(){for(const f of this.map.values())yield f.value}*keys(){for(const f of this.map.values())yield f.uri}*entries(){for(const f of this.map.values())yield[f.uri,f.value]}*[(C=Symbol.toStringTag,Symbol.iterator)](){for(const[,f]of this.map)yield[f.uri,f.value]}}e.ResourceMap=m,m.defaultToKey=w=>w.toString();class y{constructor(f,v){this[t]="ResourceSet",!f||typeof f=="function"?this._map=new m(f):(this._map=new m(v),f.forEach(this.add,this))}get size(){return this._map.size}add(f){return this._map.set(f,f),this}clear(){this._map.clear()}delete(f){return this._map.delete(f)}forEach(f,v){this._map.forEach((u,S)=>f.call(v,S,S,this))}has(f){return this._map.has(f)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=y;var I;(function(w){w[w.None=0]="None",w[w.AsOld=1]="AsOld",w[w.AsNew=2]="AsNew"})(I=e.Touch||(e.Touch={}));class E{constructor(){this[k]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(f){return this._map.has(f)}get(f,v=0){const u=this._map.get(f);if(!!u)return v!==0&&this.touch(u,v),u.value}set(f,v,u=0){let S=this._map.get(f);if(S)S.value=v,u!==0&&this.touch(S,u);else{switch(S={key:f,value:v,next:void 0,previous:void 0},u){case 0:this.addItemLast(S);break;case 1:this.addItemFirst(S);break;case 2:this.addItemLast(S);break;default:this.addItemLast(S);break}this._map.set(f,S),this._size++}return this}delete(f){return!!this.remove(f)}remove(f){const v=this._map.get(f);if(!!v)return this._map.delete(f),this.removeItem(v),this._size--,v.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const f=this._head;return this._map.delete(f.key),this.removeItem(f),this._size--,f.value}forEach(f,v){const u=this._state;let S=this._head;for(;S;){if(v?f.bind(v)(S.value,S.key,this):f(S.value,S.key,this),this._state!==u)throw new Error("LinkedMap got modified during iteration.");S=S.next}}keys(){const f=this,v=this._state;let u=this._head;const S={[Symbol.iterator](){return S},next(){if(f._state!==v)throw new Error("LinkedMap got modified during iteration.");if(u){const g={value:u.key,done:!1};return u=u.next,g}else return{value:void 0,done:!0}}};return S}values(){const f=this,v=this._state;let u=this._head;const S={[Symbol.iterator](){return S},next(){if(f._state!==v)throw new Error("LinkedMap got modified during iteration.");if(u){const g={value:u.value,done:!1};return u=u.next,g}else return{value:void 0,done:!0}}};return S}entries(){const f=this,v=this._state;let u=this._head;const S={[Symbol.iterator](){return S},next(){if(f._state!==v)throw new Error("LinkedMap got modified during iteration.");if(u){const g={value:[u.key,u.value],done:!1};return u=u.next,g}else return{value:void 0,done:!0}}};return S}[(k=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(f){if(f>=this.size)return;if(f===0){this.clear();return}let v=this._head,u=this.size;for(;v&&u>f;)this._map.delete(v.key),v=v.next,u--;this._head=v,this._size=u,v&&(v.previous=void 0),this._state++}addItemFirst(f){if(!this._head&&!this._tail)this._tail=f;else if(this._head)f.next=this._head,this._head.previous=f;else throw new Error("Invalid list");this._head=f,this._state++}addItemLast(f){if(!this._head&&!this._tail)this._head=f;else if(this._tail)f.previous=this._tail,this._tail.next=f;else throw new Error("Invalid list");this._tail=f,this._state++}removeItem(f){if(f===this._head&&f===this._tail)this._head=void 0,this._tail=void 0;else if(f===this._head){if(!f.next)throw new Error("Invalid list");f.next.previous=void 0,this._head=f.next}else if(f===this._tail){if(!f.previous)throw new Error("Invalid list");f.previous.next=void 0,this._tail=f.previous}else{const v=f.next,u=f.previous;if(!v||!u)throw new Error("Invalid list");v.previous=u,u.next=v}f.next=void 0,f.previous=void 0,this._state++}touch(f,v){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(v!==1&&v!==2)){if(v===1){if(f===this._head)return;const u=f.next,S=f.previous;f===this._tail?(S.next=void 0,this._tail=S):(u.previous=S,S.next=u),f.previous=void 0,f.next=this._head,this._head.previous=f,this._head=f,this._state++}else if(v===2){if(f===this._tail)return;const u=f.next,S=f.previous;f===this._head?(u.previous=void 0,this._head=u):(u.previous=S,S.next=u),f.next=void 0,f.previous=this._tail,this._tail.next=f,this._tail=f,this._state++}}}toJSON(){const f=[];return this.forEach((v,u)=>{f.push([u,v])}),f}fromJSON(f){this.clear();for(const[v,u]of f)this.set(v,u)}}e.LinkedMap=E;class d extends E{constructor(f,v=1){super(),this._limit=f,this._ratio=Math.min(Math.max(0,v),1)}get limit(){return this._limit}set limit(f){this._limit=f,this.checkTrim()}get ratio(){return this._ratio}set ratio(f){this._ratio=Math.min(Math.max(0,f),1),this.checkTrim()}get(f,v=2){return super.get(f,v)}peek(f){return super.get(f,0)}set(f,v){return super.set(f,v,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=d}),define(ee[76],te([0,1,39]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeAccents=e.normalizeNFD=e.normalizeNFC=void 0;const t=new C.LRUCache(1e4);function k(m){return p(m,"NFC",t)}e.normalizeNFC=k;const L=new C.LRUCache(1e4);function R(m){return p(m,"NFD",L)}e.normalizeNFD=R;const P=/[^\u0000-\u0080]/;function p(m,y,I){if(!m)return m;const E=I.get(m);if(E)return E;let d;return P.test(m)?d=m.normalize(y):d=m,I.set(m,d),d}e.removeAccents=function(){const m=/[\u0300-\u036f]/g;return function(y){return R(y).replace(m,"")}}()}),function(){function j(k){const L=[];typeof k=="number"&&L.push("code/timeOrigin",k);function R(p){L.push(p,Date.now())}function P(){const p=[];for(let m=0;m<L.length;m+=2)p.push({name:L[m],startTime:L[m+1]});return p}return{mark:R,getMarks:P}}function e(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?j():{mark(k){performance.mark(k)},getMarks(){let k=performance.timeOrigin;typeof k!="number"&&(k=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const L=[{name:"code/timeOrigin",startTime:Math.round(k)}];for(const R of performance.getEntriesByType("mark"))L.push({name:R.name,startTime:Math.round(k+R.startTime)});return L}};if(typeof process=="object"){const k=Math.round((require.__$__nodeRequire||require)("perf_hooks").performance.timeOrigin);return j(k)}else return console.trace("perf-util loaded in UNKNOWN environment"),j()}function C(k){return k.MonacoPerformanceMarks||(k.MonacoPerformanceMarks=e()),k.MonacoPerformanceMarks}var t;typeof global=="object"?t=global:typeof self=="object"?t=self:t={},typeof define=="function"?define("vs/base/common/performance",[],function(){return C(t)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=C(t):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),t.perf=C(t))}(),function(j,e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("vs/base/common/semver/semver",[],e);else{var C=e();for(var t in C)(typeof exports=="object"?exports:j)[t]=C[t]}}(typeof self<"u"?self:this,function(){return function(j){var e={};function C(t){if(e[t])return e[t].exports;var k=e[t]={i:t,l:!1,exports:{}};return j[t].call(k.exports,k,k.exports,C),k.l=!0,k.exports}return C.m=j,C.c=e,C.d=function(t,k,L){C.o(t,k)||Object.defineProperty(t,k,{enumerable:!0,get:L})},C.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},C.t=function(t,k){if(1&k&&(t=C(t)),8&k||4&k&&typeof t=="object"&&t&&t.__esModule)return t;var L=Object.create(null);if(C.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:t}),2&k&&typeof t!="string")for(var R in t)C.d(L,R,function(P){return t[P]}.bind(null,R));return L},C.n=function(t){var k=t&&t.__esModule?function(){return t.default}:function(){return t};return C.d(k,"a",k),k},C.o=function(t,k){return Object.prototype.hasOwnProperty.call(t,k)},C.p="",C(C.s=0)}([function(j,e,C){(function(t){var k;e=j.exports=M,k=typeof t=="object"&&t.env&&t.env.NODE_DEBUG&&/\bsemver\b/i.test(t.env.NODE_DEBUG)?function(){var Z=Array.prototype.slice.call(arguments,0);Z.unshift("SEMVER"),console.log.apply(console,Z)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var L=256,R=Number.MAX_SAFE_INTEGER||9007199254740991,P=e.re=[],p=e.src=[],m=0,y=m++;p[y]="0|[1-9]\\d*";var I=m++;p[I]="[0-9]+";var E=m++;p[E]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=m++;p[d]="("+p[y]+")\\.("+p[y]+")\\.("+p[y]+")";var w=m++;p[w]="("+p[I]+")\\.("+p[I]+")\\.("+p[I]+")";var f=m++;p[f]="(?:"+p[y]+"|"+p[E]+")";var v=m++;p[v]="(?:"+p[I]+"|"+p[E]+")";var u=m++;p[u]="(?:-("+p[f]+"(?:\\."+p[f]+")*))";var S=m++;p[S]="(?:-?("+p[v]+"(?:\\."+p[v]+")*))";var g=m++;p[g]="[0-9A-Za-z-]+";var h=m++;p[h]="(?:\\+("+p[g]+"(?:\\."+p[g]+")*))";var l=m++,i="v?"+p[d]+p[u]+"?"+p[h]+"?";p[l]="^"+i+"$";var s="[v=\\s]*"+p[w]+p[S]+"?"+p[h]+"?",n=m++;p[n]="^"+s+"$";var a=m++;p[a]="((?:<|>)?=?)";var r=m++;p[r]=p[I]+"|x|X|\\*";var c=m++;p[c]=p[y]+"|x|X|\\*";var o=m++;p[o]="[v=\\s]*("+p[c]+")(?:\\.("+p[c]+")(?:\\.("+p[c]+")(?:"+p[u]+")?"+p[h]+"?)?)?";var b=m++;p[b]="[v=\\s]*("+p[r]+")(?:\\.("+p[r]+")(?:\\.("+p[r]+")(?:"+p[S]+")?"+p[h]+"?)?)?";var D=m++;p[D]="^"+p[a]+"\\s*"+p[o]+"$";var A=m++;p[A]="^"+p[a]+"\\s*"+p[b]+"$";var N=m++;p[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var G=m++;p[G]="(?:~>?)";var ae=m++;p[ae]="(\\s*)"+p[G]+"\\s+",P[ae]=new RegExp(p[ae],"g");var x=m++;p[x]="^"+p[G]+p[o]+"$";var Q=m++;p[Q]="^"+p[G]+p[b]+"$";var re=m++;p[re]="(?:\\^)";var ne=m++;p[ne]="(\\s*)"+p[re]+"\\s+",P[ne]=new RegExp(p[ne],"g");var fe=m++;p[fe]="^"+p[re]+p[o]+"$";var K=m++;p[K]="^"+p[re]+p[b]+"$";var le=m++;p[le]="^"+p[a]+"\\s*("+s+")$|^$";var W=m++;p[W]="^"+p[a]+"\\s*("+i+")$|^$";var O=m++;p[O]="(\\s*)"+p[a]+"\\s*("+s+"|"+p[o]+")",P[O]=new RegExp(p[O],"g");var U=m++;p[U]="^\\s*("+p[o]+")\\s+-\\s+("+p[o]+")\\s*$";var H=m++;p[H]="^\\s*("+p[b]+")\\s+-\\s+("+p[b]+")\\s*$";var se=m++;p[se]="(<|>)?=?\\s*\\*";for(var $=0;$<35;$++)k($,p[$]),P[$]||(P[$]=new RegExp(p[$]));function z(Z,he){if(Z instanceof M)return Z;if(typeof Z!="string"||Z.length>L||!(he?P[n]:P[l]).test(Z))return null;try{return new M(Z,he)}catch{return null}}function M(Z,he){if(Z instanceof M){if(Z.loose===he)return Z;Z=Z.version}else if(typeof Z!="string")throw new TypeError("Invalid Version: "+Z);if(Z.length>L)throw new TypeError("version is longer than "+L+" characters");if(!(this instanceof M))return new M(Z,he);k("SemVer",Z,he),this.loose=he;var de=Z.trim().match(he?P[n]:P[l]);if(!de)throw new TypeError("Invalid Version: "+Z);if(this.raw=Z,this.major=+de[1],this.minor=+de[2],this.patch=+de[3],this.major>R||this.major<0)throw new TypeError("Invalid major version");if(this.minor>R||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>R||this.patch<0)throw new TypeError("Invalid patch version");de[4]?this.prerelease=de[4].split(".").map(function(Se){if(/^[0-9]+$/.test(Se)){var Ie=+Se;if(Ie>=0&&Ie<R)return Ie}return Se}):this.prerelease=[],this.build=de[5]?de[5].split("."):[],this.format()}e.parse=z,e.valid=function(Z,he){var de=z(Z,he);return de?de.version:null},e.clean=function(Z,he){var de=z(Z.trim().replace(/^[=v]+/,""),he);return de?de.version:null},e.SemVer=M,M.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},M.prototype.toString=function(){return this.version},M.prototype.compare=function(Z){return k("SemVer.compare",this.version,this.loose,Z),Z instanceof M||(Z=new M(Z,this.loose)),this.compareMain(Z)||this.comparePre(Z)},M.prototype.compareMain=function(Z){return Z instanceof M||(Z=new M(Z,this.loose)),F(this.major,Z.major)||F(this.minor,Z.minor)||F(this.patch,Z.patch)},M.prototype.comparePre=function(Z){if(Z instanceof M||(Z=new M(Z,this.loose)),this.prerelease.length&&!Z.prerelease.length)return-1;if(!this.prerelease.length&&Z.prerelease.length)return 1;if(!this.prerelease.length&&!Z.prerelease.length)return 0;var he=0;do{var de=this.prerelease[he],Se=Z.prerelease[he];if(k("prerelease compare",he,de,Se),de===void 0&&Se===void 0)return 0;if(Se===void 0)return 1;if(de===void 0)return-1;if(de!==Se)return F(de,Se)}while(++he)},M.prototype.inc=function(Z,he){switch(Z){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",he);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",he);break;case"prepatch":this.prerelease.length=0,this.inc("patch",he),this.inc("pre",he);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",he),this.inc("pre",he);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var de=this.prerelease.length;--de>=0;)typeof this.prerelease[de]=="number"&&(this.prerelease[de]++,de=-2);de===-1&&this.prerelease.push(0)}he&&(this.prerelease[0]===he?isNaN(this.prerelease[1])&&(this.prerelease=[he,0]):this.prerelease=[he,0]);break;default:throw new Error("invalid increment argument: "+Z)}return this.format(),this.raw=this.version,this},e.inc=function(Z,he,de,Se){typeof de=="string"&&(Se=de,de=void 0);try{return new M(Z,de).inc(he,Se).version}catch{return null}},e.diff=function(Z,he){if(B(Z,he))return null;var de=z(Z),Se=z(he);if(de.prerelease.length||Se.prerelease.length){for(var Ie in de)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&de[Ie]!==Se[Ie])return"pre"+Ie;return"prerelease"}for(var Ie in de)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&de[Ie]!==Se[Ie])return Ie},e.compareIdentifiers=F;var T=/^[0-9]+$/;function F(Z,he){var de=T.test(Z),Se=T.test(he);return de&&Se&&(Z=+Z,he=+he),de&&!Se?-1:Se&&!de?1:Z<he?-1:Z>he?1:0}function _(Z,he,de){return new M(Z,de).compare(new M(he,de))}function q(Z,he,de){return _(Z,he,de)>0}function Y(Z,he,de){return _(Z,he,de)<0}function B(Z,he,de){return _(Z,he,de)===0}function X(Z,he,de){return _(Z,he,de)!==0}function J(Z,he,de){return _(Z,he,de)>=0}function oe(Z,he,de){return _(Z,he,de)<=0}function ge(Z,he,de,Se){var Ie;switch(he){case"===":typeof Z=="object"&&(Z=Z.version),typeof de=="object"&&(de=de.version),Ie=Z===de;break;case"!==":typeof Z=="object"&&(Z=Z.version),typeof de=="object"&&(de=de.version),Ie=Z!==de;break;case"":case"=":case"==":Ie=B(Z,de,Se);break;case"!=":Ie=X(Z,de,Se);break;case">":Ie=q(Z,de,Se);break;case">=":Ie=J(Z,de,Se);break;case"<":Ie=Y(Z,de,Se);break;case"<=":Ie=oe(Z,de,Se);break;default:throw new TypeError("Invalid operator: "+he)}return Ie}function De(Z,he){if(Z instanceof De){if(Z.loose===he)return Z;Z=Z.value}if(!(this instanceof De))return new De(Z,he);k("comparator",Z,he),this.loose=he,this.parse(Z),this.semver===Te?this.value="":this.value=this.operator+this.semver.version,k("comp",this)}e.rcompareIdentifiers=function(Z,he){return F(he,Z)},e.major=function(Z,he){return new M(Z,he).major},e.minor=function(Z,he){return new M(Z,he).minor},e.patch=function(Z,he){return new M(Z,he).patch},e.compare=_,e.compareLoose=function(Z,he){return _(Z,he,!0)},e.rcompare=function(Z,he,de){return _(he,Z,de)},e.sort=function(Z,he){return Z.sort(function(de,Se){return e.compare(de,Se,he)})},e.rsort=function(Z,he){return Z.sort(function(de,Se){return e.rcompare(de,Se,he)})},e.gt=q,e.lt=Y,e.eq=B,e.neq=X,e.gte=J,e.lte=oe,e.cmp=ge,e.Comparator=De;var Te={};function ke(Z,he){if(Z instanceof ke)return Z.loose===he?Z:new ke(Z.raw,he);if(Z instanceof De)return new ke(Z.value,he);if(!(this instanceof ke))return new ke(Z,he);if(this.loose=he,this.raw=Z,this.set=Z.split(/\s*\|\|\s*/).map(function(de){return this.parseRange(de.trim())},this).filter(function(de){return de.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+Z);this.format()}function Ae(Z){return!Z||Z.toLowerCase()==="x"||Z==="*"}function ve(Z,he,de,Se,Ie,Fe,Oe,qe,_e,Ne,xe,ze,Ke){return((he=Ae(de)?"":Ae(Se)?">="+de+".0.0":Ae(Ie)?">="+de+"."+Se+".0":">="+he)+" "+(qe=Ae(_e)?"":Ae(Ne)?"<"+(+_e+1)+".0.0":Ae(xe)?"<"+_e+"."+(+Ne+1)+".0":ze?"<="+_e+"."+Ne+"."+xe+"-"+ze:"<="+qe)).trim()}function pe(Z,he){for(var de=0;de<Z.length;de++)if(!Z[de].test(he))return!1;if(he.prerelease.length){for(de=0;de<Z.length;de++)if(k(Z[de].semver),Z[de].semver!==Te&&Z[de].semver.prerelease.length>0){var Se=Z[de].semver;if(Se.major===he.major&&Se.minor===he.minor&&Se.patch===he.patch)return!0}return!1}return!0}function ye(Z,he,de){try{he=new ke(he,de)}catch{return!1}return he.test(Z)}function Me(Z,he,de,Se){var Ie,Fe,Oe,qe,_e;switch(Z=new M(Z,Se),he=new ke(he,Se),de){case">":Ie=q,Fe=oe,Oe=Y,qe=">",_e=">=";break;case"<":Ie=Y,Fe=J,Oe=q,qe="<",_e="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ye(Z,he,Se))return!1;for(var Ne=0;Ne<he.set.length;++Ne){var xe=he.set[Ne],ze=null,Ke=null;if(xe.forEach(function(V){V.semver===Te&&(V=new De(">=0.0.0")),ze=ze||V,Ke=Ke||V,Ie(V.semver,ze.semver,Se)?ze=V:Oe(V.semver,Ke.semver,Se)&&(Ke=V)}),ze.operator===qe||ze.operator===_e||(!Ke.operator||Ke.operator===qe)&&Fe(Z,Ke.semver)||Ke.operator===_e&&Oe(Z,Ke.semver))return!1}return!0}De.prototype.parse=function(Z){var he=this.loose?P[le]:P[W],de=Z.match(he);if(!de)throw new TypeError("Invalid comparator: "+Z);this.operator=de[1],this.operator==="="&&(this.operator=""),de[2]?this.semver=new M(de[2],this.loose):this.semver=Te},De.prototype.toString=function(){return this.value},De.prototype.test=function(Z){return k("Comparator.test",Z,this.loose),this.semver===Te||(typeof Z=="string"&&(Z=new M(Z,this.loose)),ge(Z,this.operator,this.semver,this.loose))},De.prototype.intersects=function(Z,he){if(!(Z instanceof De))throw new TypeError("a Comparator is required");var de;if(this.operator==="")return de=new ke(Z.value,he),ye(this.value,de,he);if(Z.operator==="")return de=new ke(this.value,he),ye(Z.semver,de,he);var Se=!(this.operator!==">="&&this.operator!==">"||Z.operator!==">="&&Z.operator!==">"),Ie=!(this.operator!=="<="&&this.operator!=="<"||Z.operator!=="<="&&Z.operator!=="<"),Fe=this.semver.version===Z.semver.version,Oe=!(this.operator!==">="&&this.operator!=="<="||Z.operator!==">="&&Z.operator!=="<="),qe=ge(this.semver,"<",Z.semver,he)&&(this.operator===">="||this.operator===">")&&(Z.operator==="<="||Z.operator==="<"),_e=ge(this.semver,">",Z.semver,he)&&(this.operator==="<="||this.operator==="<")&&(Z.operator===">="||Z.operator===">");return Se||Ie||Fe&&Oe||qe||_e},e.Range=ke,ke.prototype.format=function(){return this.range=this.set.map(function(Z){return Z.join(" ").trim()}).join("||").trim(),this.range},ke.prototype.toString=function(){return this.range},ke.prototype.parseRange=function(Z){var he=this.loose;Z=Z.trim(),k("range",Z,he);var de=he?P[H]:P[U];Z=Z.replace(de,ve),k("hyphen replace",Z),Z=Z.replace(P[O],"$1$2$3"),k("comparator trim",Z,P[O]),Z=(Z=(Z=Z.replace(P[ae],"$1~")).replace(P[ne],"$1^")).split(/\s+/).join(" ");var Se=he?P[le]:P[W],Ie=Z.split(" ").map(function(Fe){return function(Oe,qe){return k("comp",Oe),Oe=function(_e,Ne){return _e.trim().split(/\s+/).map(function(xe){return function(ze,Ke){k("caret",ze,Ke);var V=Ke?P[K]:P[fe];return ze.replace(V,function(ce,ue,me,be,Le){var Be;return k("caret",ze,ce,ue,me,be,Le),Ae(ue)?Be="":Ae(me)?Be=">="+ue+".0.0 <"+(+ue+1)+".0.0":Ae(be)?Be=ue==="0"?">="+ue+"."+me+".0 <"+ue+"."+(+me+1)+".0":">="+ue+"."+me+".0 <"+(+ue+1)+".0.0":Le?(k("replaceCaret pr",Le),Le.charAt(0)!=="-"&&(Le="-"+Le),Be=ue==="0"?me==="0"?">="+ue+"."+me+"."+be+Le+" <"+ue+"."+me+"."+(+be+1):">="+ue+"."+me+"."+be+Le+" <"+ue+"."+(+me+1)+".0":">="+ue+"."+me+"."+be+Le+" <"+(+ue+1)+".0.0"):(k("no pr"),Be=ue==="0"?me==="0"?">="+ue+"."+me+"."+be+" <"+ue+"."+me+"."+(+be+1):">="+ue+"."+me+"."+be+" <"+ue+"."+(+me+1)+".0":">="+ue+"."+me+"."+be+" <"+(+ue+1)+".0.0"),k("caret return",Be),Be})}(xe,Ne)}).join(" ")}(Oe,qe),k("caret",Oe),Oe=function(_e,Ne){return _e.trim().split(/\s+/).map(function(xe){return function(ze,Ke){var V=Ke?P[Q]:P[x];return ze.replace(V,function(ce,ue,me,be,Le){var Be;return k("tilde",ze,ce,ue,me,be,Le),Ae(ue)?Be="":Ae(me)?Be=">="+ue+".0.0 <"+(+ue+1)+".0.0":Ae(be)?Be=">="+ue+"."+me+".0 <"+ue+"."+(+me+1)+".0":Le?(k("replaceTilde pr",Le),Le.charAt(0)!=="-"&&(Le="-"+Le),Be=">="+ue+"."+me+"."+be+Le+" <"+ue+"."+(+me+1)+".0"):Be=">="+ue+"."+me+"."+be+" <"+ue+"."+(+me+1)+".0",k("tilde return",Be),Be})}(xe,Ne)}).join(" ")}(Oe,qe),k("tildes",Oe),Oe=function(_e,Ne){return k("replaceXRanges",_e,Ne),_e.split(/\s+/).map(function(xe){return function(ze,Ke){ze=ze.trim();var V=Ke?P[A]:P[D];return ze.replace(V,function(ce,ue,me,be,Le,Be){k("xRange",ze,ce,ue,me,be,Le,Be);var it=Ae(me),Je=it||Ae(be),je=Je||Ae(Le);return ue==="="&&je&&(ue=""),it?ce=ue===">"||ue==="<"?"<0.0.0":"*":ue&&je?(Je&&(be=0),je&&(Le=0),ue===">"?(ue=">=",Je?(me=+me+1,be=0,Le=0):je&&(be=+be+1,Le=0)):ue==="<="&&(ue="<",Je?me=+me+1:be=+be+1),ce=ue+me+"."+be+"."+Le):Je?ce=">="+me+".0.0 <"+(+me+1)+".0.0":je&&(ce=">="+me+"."+be+".0 <"+me+"."+(+be+1)+".0"),k("xRange return",ce),ce})}(xe,Ne)}).join(" ")}(Oe,qe),k("xrange",Oe),Oe=function(_e,Ne){return k("replaceStars",_e,Ne),_e.trim().replace(P[se],"")}(Oe,qe),k("stars",Oe),Oe}(Fe,he)}).join(" ").split(/\s+/);return this.loose&&(Ie=Ie.filter(function(Fe){return!!Fe.match(Se)})),Ie=Ie.map(function(Fe){return new De(Fe,he)})},ke.prototype.intersects=function(Z,he){if(!(Z instanceof ke))throw new TypeError("a Range is required");return this.set.some(function(de){return de.every(function(Se){return Z.set.some(function(Ie){return Ie.every(function(Fe){return Se.intersects(Fe,he)})})})})},e.toComparators=function(Z,he){return new ke(Z,he).set.map(function(de){return de.map(function(Se){return Se.value}).join(" ").trim().split(" ")})},ke.prototype.test=function(Z){if(!Z)return!1;typeof Z=="string"&&(Z=new M(Z,this.loose));for(var he=0;he<this.set.length;he++)if(pe(this.set[he],Z))return!0;return!1},e.satisfies=ye,e.maxSatisfying=function(Z,he,de){var Se=null,Ie=null;try{var Fe=new ke(he,de)}catch{return null}return Z.forEach(function(Oe){Fe.test(Oe)&&(Se&&Ie.compare(Oe)!==-1||(Ie=new M(Se=Oe,de)))}),Se},e.minSatisfying=function(Z,he,de){var Se=null,Ie=null;try{var Fe=new ke(he,de)}catch{return null}return Z.forEach(function(Oe){Fe.test(Oe)&&(Se&&Ie.compare(Oe)!==1||(Ie=new M(Se=Oe,de)))}),Se},e.validRange=function(Z,he){try{return new ke(Z,he).range||"*"}catch{return null}},e.ltr=function(Z,he,de){return Me(Z,he,"<",de)},e.gtr=function(Z,he,de){return Me(Z,he,">",de)},e.outside=Me,e.prerelease=function(Z,he){var de=z(Z,he);return de&&de.prerelease.length?de.prerelease:null},e.intersects=function(Z,he,de){return Z=new ke(Z,de),he=new ke(he,de),Z.intersects(he)},e.coerce=function(Z){if(Z instanceof M)return Z;if(typeof Z!="string")return null;var he=Z.match(P[N]);return he==null?null:z((he[1]||"0")+"."+(he[2]||"0")+"."+(he[3]||"0"))}}).call(this,C(1))},function(j,e){var C,t,k=j.exports={};function L(){throw new Error("setTimeout has not been defined")}function R(){throw new Error("clearTimeout has not been defined")}function P(v){if(C===setTimeout)return setTimeout(v,0);if((C===L||!C)&&setTimeout)return C=setTimeout,setTimeout(v,0);try{return C(v,0)}catch{try{return C.call(null,v,0)}catch{return C.call(this,v,0)}}}(function(){try{C=typeof setTimeout=="function"?setTimeout:L}catch{C=L}try{t=typeof clearTimeout=="function"?clearTimeout:R}catch{t=R}})();var p,m=[],y=!1,I=-1;function E(){y&&p&&(y=!1,p.length?m=p.concat(m):I=-1,m.length&&d())}function d(){if(!y){var v=P(E);y=!0;for(var u=m.length;u;){for(p=m,m=[];++I<u;)p&&p[I].run();I=-1,u=m.length}p=null,y=!1,function(S){if(t===clearTimeout)return clearTimeout(S);if((t===R||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(S);try{t(S)}catch{try{return t.call(null,S)}catch{return t.call(this,S)}}}(v)}}function w(v,u){this.fun=v,this.array=u}function f(){}k.nextTick=function(v){var u=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)u[S-1]=arguments[S];m.push(new w(v,u)),m.length!==1||y||P(d)},w.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=f,k.addListener=f,k.once=f,k.off=f,k.removeListener=f,k.removeAllListeners=f,k.emit=f,k.prependListener=f,k.prependOnceListener=f,k.listeners=function(v){return[]},k.binding=function(v){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(v){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}}])}),define(ee[127],te([0,1]),function(j,e){"use strict";var C;Object.defineProperty(e,"__esModule",{value:!0}),e.SkipList=void 0;class t{constructor(P,p,m){this.level=P,this.key=p,this.value=m,this.forward=[]}}const k=void 0;class L{constructor(P,p=2**16){this.comparator=P,this[C]="SkipList",this._level=0,this._size=0,this._maxLevel=Math.max(1,Math.log2(p)|0),this._header=new t(this._maxLevel,k,k)}get size(){return this._size}clear(){this._header=new t(this._maxLevel,k,k)}has(P){return Boolean(L._search(this,P,this.comparator))}get(P){return L._search(this,P,this.comparator)?.value}set(P,p){return L._insert(this,P,p,this.comparator)&&(this._size+=1),this}delete(P){const p=L._delete(this,P,this.comparator);return p&&(this._size-=1),p}forEach(P,p){let m=this._header.forward[0];for(;m;)P.call(p,m.value,m.key,this),m=m.forward[0]}[(C=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*entries(){let P=this._header.forward[0];for(;P;)yield[P.key,P.value],P=P.forward[0]}*keys(){let P=this._header.forward[0];for(;P;)yield P.key,P=P.forward[0]}*values(){let P=this._header.forward[0];for(;P;)yield P.value,P=P.forward[0]}toString(){let P="[SkipList]:",p=this._header.forward[0];for(;p;)P+=`node(${p.key}, ${p.value}, lvl:${p.level})`,p=p.forward[0];return P}static _search(P,p,m){let y=P._header;for(let I=P._level-1;I>=0;I--)for(;y.forward[I]&&m(y.forward[I].key,p)<0;)y=y.forward[I];if(y=y.forward[0],y&&m(y.key,p)===0)return y}static _insert(P,p,m,y){const I=[];let E=P._header;for(let d=P._level-1;d>=0;d--){for(;E.forward[d]&&y(E.forward[d].key,p)<0;)E=E.forward[d];I[d]=E}if(E=E.forward[0],E&&y(E.key,p)===0)return E.value=m,!1;{const d=L._randomLevel(P);if(d>P._level){for(let w=P._level;w<d;w++)I[w]=P._header;P._level=d}E=new t(d,p,m);for(let w=0;w<d;w++)E.forward[w]=I[w].forward[w],I[w].forward[w]=E;return!0}}static _randomLevel(P,p=.5){let m=1;for(;Math.random()<p&&m<P._maxLevel;)m+=1;return m}static _delete(P,p,m){const y=[];let I=P._header;for(let E=P._level-1;E>=0;E--){for(;I.forward[E]&&m(I.forward[E].key,p)<0;)I=I.forward[E];y[E]=I}if(I=I.forward[0],!I||m(I.key,p)!==0)return!1;for(let E=0;E<P._level&&y[E].forward[E]===I;E++)y[E].forward[E]=I.forward[E];for(;P._level>0&&P._header.forward[P._level-1]===k;)P._level-=1;return!0}}e.SkipList=L}),define(ee[59],te([0,1,15,2]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function k(h){const l=h;return l?typeof l.read=="function":!1}e.isReadable=k;function L(h){const l=h;return l?[l.on,l.pause,l.resume,l.destroy].every(i=>typeof i=="function"):!1}e.isReadableStream=L;function R(h){const l=h;return l?L(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}e.isReadableBufferedStream=R;function P(h,l){return new p(h,l)}e.newWriteableStream=P;class p{constructor(l,i){this.reducer=l,this.options=i,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(l){if(!this.state.destroyed){if(this.state.flowing)this.emitData(l);else if(this.buffer.data.push(l),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(i=>this.pendingWritePromises.push(i))}}error(l){this.state.destroyed||(this.state.flowing?this.emitError(l):this.buffer.error.push(l))}end(l){this.state.destroyed||(typeof l<"u"&&this.write(l),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(l){this.listeners.data.slice(0).forEach(i=>i(l))}emitError(l){this.listeners.error.length===0?(0,C.onUnexpectedError)(l):this.listeners.error.slice(0).forEach(i=>i(l))}emitEnd(){this.listeners.end.slice(0).forEach(l=>l())}on(l,i){if(!this.state.destroyed)switch(l){case"data":this.listeners.data.push(i),this.resume();break;case"end":this.listeners.end.push(i),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(i),this.state.flowing&&this.flowErrors();break}}removeListener(l,i){if(this.state.destroyed)return;let s;switch(l){case"data":s=this.listeners.data;break;case"end":s=this.listeners.end;break;case"error":s=this.listeners.error;break}if(s){const n=s.indexOf(i);n>=0&&s.splice(n,1)}}flowData(){if(this.buffer.data.length>0){const l=this.reducer(this.buffer.data);this.emitData(l),this.buffer.data.length=0;const i=[...this.pendingWritePromises];this.pendingWritePromises.length=0,i.forEach(s=>s())}}flowErrors(){if(this.listeners.error.length>0){for(const l of this.buffer.error)this.emitError(l);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function m(h,l){const i=[];let s;for(;(s=h.read())!==null;)i.push(s);return l(i)}e.consumeReadable=m;function y(h,l,i){const s=[];let n;for(;(n=h.read())!==null&&s.length<i;)s.push(n);return n===null&&s.length>0?l(s):{read:()=>{if(s.length>0)return s.shift();if(typeof n<"u"){const a=n;return n=void 0,a}return h.read()}}}e.peekReadable=y;function I(h,l){return new Promise((i,s)=>{const n=[];E(h,{onData:a=>{l&&n.push(a)},onError:a=>{l?s(a):i(void 0)},onEnd:()=>{i(l?l(n):void 0)}})})}e.consumeStream=I;function E(h,l){let i=!1;return h.on("error",s=>{i||l.onError(s)}),h.on("end",()=>{i||l.onEnd()}),h.on("data",s=>{i||l.onData(s)}),(0,t.toDisposable)(()=>i=!0)}e.listenStream=E;function d(h,l){return new Promise((i,s)=>{const n=new t.DisposableStore,a=[],r=b=>{if(a.push(b),a.length>l)return n.dispose(),h.pause(),i({stream:h,buffer:a,ended:!1})},c=b=>s(b),o=()=>i({stream:h,buffer:a,ended:!0});n.add((0,t.toDisposable)(()=>h.removeListener("error",c))),h.on("error",c),n.add((0,t.toDisposable)(()=>h.removeListener("end",o))),h.on("end",o),n.add((0,t.toDisposable)(()=>h.removeListener("data",r))),h.on("data",r)})}e.peekStream=d;function w(h,l){const i=P(l);return i.end(h),i}e.toStream=w;function f(){const h=P(()=>{throw new Error("not supported")});return h.end(),h}e.emptyStream=f;function v(h){let l=!1;return{read:()=>l?null:(l=!0,h)}}e.toReadable=v;function u(h,l,i){const s=P(i);return E(h,{onData:n=>s.write(l.data(n)),onError:n=>s.error(l.error?l.error(n):n),onEnd:()=>s.end()}),s}e.transform=u;function S(h,l,i){let s=!1;return{read:()=>{const n=l.read();return s?n:(s=!0,n!==null?i([h,n]):h)}}}e.prefixedReadable=S;function g(h,l,i){let s=!1;const n=P(i);return E(l,{onData:a=>s?n.write(a):(s=!0,n.write(i([h,a]))),onError:a=>n.error(a),onEnd:()=>{s||(s=!0,n.write(h)),n.end()}}),n}e.prefixedStream=g}),define(ee[17],te([0,1,59]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const t=typeof Buffer<"u";let k,L;class R{static alloc(b){return t?new R(Buffer.allocUnsafe(b)):new R(new Uint8Array(b))}static wrap(b){return t&&!Buffer.isBuffer(b)&&(b=Buffer.from(b.buffer,b.byteOffset,b.byteLength)),new R(b)}static fromString(b,D){return!(D?.dontUseNodeBuffer||!1)&&t?new R(Buffer.from(b)):(k||(k=new TextEncoder),new R(k.encode(b)))}static fromByteArray(b){const D=R.alloc(b.length);for(let A=0,N=b.length;A<N;A++)D.buffer[A]=b[A];return D}static concat(b,D){if(typeof D>"u"){D=0;for(let G=0,ae=b.length;G<ae;G++)D+=b[G].byteLength}const A=R.alloc(D);let N=0;for(let G=0,ae=b.length;G<ae;G++){const x=b[G];A.set(x,N),N+=x.byteLength}return A}constructor(b){this.buffer=b,this.byteLength=this.buffer.byteLength}clone(){const b=R.alloc(this.byteLength);return b.set(this),b}toString(){return t?this.buffer.toString():(L||(L=new TextDecoder),L.decode(this.buffer))}slice(b,D){return new R(this.buffer.subarray(b,D))}set(b,D){if(b instanceof R)this.buffer.set(b.buffer,D);else if(b instanceof Uint8Array)this.buffer.set(b,D);else if(b instanceof ArrayBuffer)this.buffer.set(new Uint8Array(b),D);else if(ArrayBuffer.isView(b))this.buffer.set(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),D);else throw new Error("Unknown argument 'array'")}readUInt32BE(b){return m(this.buffer,b)}writeUInt32BE(b,D){y(this.buffer,b,D)}readUInt32LE(b){return I(this.buffer,b)}writeUInt32LE(b,D){E(this.buffer,b,D)}readUInt8(b){return d(this.buffer,b)}writeUInt8(b,D){w(this.buffer,b,D)}}e.VSBuffer=R;function P(o,b){return o[b+0]<<0>>>0|o[b+1]<<8>>>0}e.readUInt16LE=P;function p(o,b,D){o[D+0]=b&255,b=b>>>8,o[D+1]=b&255}e.writeUInt16LE=p;function m(o,b){return o[b]*2**24+o[b+1]*2**16+o[b+2]*2**8+o[b+3]}e.readUInt32BE=m;function y(o,b,D){o[D+3]=b,b=b>>>8,o[D+2]=b,b=b>>>8,o[D+1]=b,b=b>>>8,o[D]=b}e.writeUInt32BE=y;function I(o,b){return o[b+0]<<0>>>0|o[b+1]<<8>>>0|o[b+2]<<16>>>0|o[b+3]<<24>>>0}e.readUInt32LE=I;function E(o,b,D){o[D+0]=b&255,b=b>>>8,o[D+1]=b&255,b=b>>>8,o[D+2]=b&255,b=b>>>8,o[D+3]=b&255}e.writeUInt32LE=E;function d(o,b){return o[b]}e.readUInt8=d;function w(o,b,D){o[D]=b}e.writeUInt8=w;function f(o){return C.consumeReadable(o,b=>R.concat(b))}e.readableToBuffer=f;function v(o){return C.toReadable(o)}e.bufferToReadable=v;function u(o){return C.consumeStream(o,b=>R.concat(b))}e.streamToBuffer=u;async function S(o){return o.ended?R.concat(o.buffer):R.concat([...o.buffer,await u(o.stream)])}e.bufferedStreamToBuffer=S;function g(o){return C.toStream(o,b=>R.concat(b))}e.bufferToStream=g;function h(o){return C.transform(o,{data:b=>typeof b=="string"?R.fromString(b):R.wrap(b)},b=>R.concat(b))}e.streamToBufferReadableStream=h;function l(o){return C.newWriteableStream(b=>R.concat(b),o)}e.newWriteableBufferStream=l;function i(o,b){return C.prefixedReadable(o,b,D=>R.concat(D))}e.prefixedBufferReadable=i;function s(o,b){return C.prefixedStream(o,b,D=>R.concat(D))}e.prefixedBufferStream=s;function n(o){let b=0,D=0,A=0;const N=new Uint8Array(Math.floor(o.length/4*3)),G=x=>{switch(D){case 3:N[A++]=b|x,D=0;break;case 2:N[A++]=b|x>>>2,b=x<<6,D=3;break;case 1:N[A++]=b|x>>>4,b=x<<4,D=2;break;default:b=x<<2,D=1}};for(let x=0;x<o.length;x++){const Q=o.charCodeAt(x);if(Q>=65&&Q<=90)G(Q-65);else if(Q>=97&&Q<=122)G(Q-97+26);else if(Q>=48&&Q<=57)G(Q-48+52);else if(Q===43||Q===45)G(62);else if(Q===47||Q===95)G(63);else{if(Q===61)break;throw new SyntaxError(`Unexpected base64 character ${o[x]}`)}}const ae=A;for(;D>0;)G(0);return R.wrap(N).slice(0,ae)}e.decodeBase64=n;const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function c({buffer:o},b=!0,D=!1){const A=D?r:a;let N="";const G=o.byteLength%3;let ae=0;for(;ae<o.byteLength-G;ae+=3){const x=o[ae+0],Q=o[ae+1],re=o[ae+2];N+=A[x>>>2],N+=A[(x<<4|Q>>>4)&63],N+=A[(Q<<2|re>>>6)&63],N+=A[re&63]}if(G===1){const x=o[ae+0];N+=A[x>>>2],N+=A[x<<4&63],b&&(N+="==")}else if(G===2){const x=o[ae+0],Q=o[ae+1];N+=A[x>>>2],N+=A[(x<<4|Q>>>4)&63],N+=A[Q<<2&63],b&&(N+="=")}return N}e.encodeBase64=c}),define(ee[12],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withUndefinedAsNull=e.withNullAsUndefined=e.validateConstraint=e.validateConstraints=e.areFunctions=e.isFunction=e.isEmptyObject=e.assertAllDefined=e.assertIsDefined=e.assertType=e.isUndefinedOrNull=e.isDefined=e.isUndefined=e.isBoolean=e.isIterable=e.isNumber=e.isTypedArray=e.isObject=e.isStringArray=e.isString=void 0;function C(s){return typeof s=="string"}e.isString=C;function t(s){return Array.isArray(s)&&s.every(n=>C(n))}e.isStringArray=t;function k(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}e.isObject=k;function L(s){const n=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof n}e.isTypedArray=L;function R(s){return typeof s=="number"&&!isNaN(s)}e.isNumber=R;function P(s){return!!s&&typeof s[Symbol.iterator]=="function"}e.isIterable=P;function p(s){return s===!0||s===!1}e.isBoolean=p;function m(s){return typeof s>"u"}e.isUndefined=m;function y(s){return!I(s)}e.isDefined=y;function I(s){return m(s)||s===null}e.isUndefinedOrNull=I;function E(s,n){if(!s)throw new Error(n?`Unexpected type, expected '${n}'`:"Unexpected type")}e.assertType=E;function d(s){if(I(s))throw new Error("Assertion Failed: argument is undefined or null");return s}e.assertIsDefined=d;function w(...s){const n=[];for(let a=0;a<s.length;a++){const r=s[a];if(I(r))throw new Error(`Assertion Failed: argument at index ${a} is undefined or null`);n.push(r)}return n}e.assertAllDefined=w;const f=Object.prototype.hasOwnProperty;function v(s){if(!k(s))return!1;for(const n in s)if(f.call(s,n))return!1;return!0}e.isEmptyObject=v;function u(s){return typeof s=="function"}e.isFunction=u;function S(...s){return s.length>0&&s.every(u)}e.areFunctions=S;function g(s,n){const a=Math.min(s.length,n.length);for(let r=0;r<a;r++)h(s[r],n[r])}e.validateConstraints=g;function h(s,n){if(C(n)){if(typeof s!==n)throw new Error(`argument does not match constraint: typeof ${n}`)}else if(u(n)){try{if(s instanceof n)return}catch{}if(!I(s)&&s.constructor===n||n.length===1&&n.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}e.validateConstraint=h;function l(s){return s===null?void 0:s}e.withNullAsUndefined=l;function i(s){return typeof s>"u"?null:s}e.withUndefinedAsNull=i}),define(ee[44],te([0,1,12]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createProxyObject=e.getAllMethodNames=e.getAllPropertyNames=e.filter=e.getCaseInsensitive=e.distinct=e.safeStringify=e.equals=e.mixin=e.cloneAndChange=e.deepFreeze=e.deepClone=void 0;function t(u){if(!u||typeof u!="object"||u instanceof RegExp)return u;const S=Array.isArray(u)?[]:{};return Object.entries(u).forEach(([g,h])=>{S[g]=h&&typeof h=="object"?t(h):h}),S}e.deepClone=t;function k(u){if(!u||typeof u!="object")return u;const S=[u];for(;S.length>0;){const g=S.shift();Object.freeze(g);for(const h in g)if(L.call(g,h)){const l=g[h];typeof l=="object"&&!Object.isFrozen(l)&&!(0,C.isTypedArray)(l)&&S.push(l)}}return u}e.deepFreeze=k;const L=Object.prototype.hasOwnProperty;function R(u,S){return P(u,S,new Set)}e.cloneAndChange=R;function P(u,S,g){if((0,C.isUndefinedOrNull)(u))return u;const h=S(u);if(typeof h<"u")return h;if(Array.isArray(u)){const l=[];for(const i of u)l.push(P(i,S,g));return l}if((0,C.isObject)(u)){if(g.has(u))throw new Error("Cannot clone recursive data-structure");g.add(u);const l={};for(const i in u)L.call(u,i)&&(l[i]=P(u[i],S,g));return g.delete(u),l}return u}function p(u,S,g=!0){return(0,C.isObject)(u)?((0,C.isObject)(S)&&Object.keys(S).forEach(h=>{h in u?g&&((0,C.isObject)(u[h])&&(0,C.isObject)(S[h])?p(u[h],S[h],g):u[h]=S[h]):u[h]=S[h]}),u):S}e.mixin=p;function m(u,S){if(u===S)return!0;if(u==null||S===null||S===void 0||typeof u!=typeof S||typeof u!="object"||Array.isArray(u)!==Array.isArray(S))return!1;let g,h;if(Array.isArray(u)){if(u.length!==S.length)return!1;for(g=0;g<u.length;g++)if(!m(u[g],S[g]))return!1}else{const l=[];for(h in u)l.push(h);l.sort();const i=[];for(h in S)i.push(h);if(i.sort(),!m(l,i))return!1;for(g=0;g<l.length;g++)if(!m(u[l[g]],S[l[g]]))return!1}return!0}e.equals=m;function y(u){const S=new Set;return JSON.stringify(u,(g,h)=>{if((0,C.isObject)(h)||Array.isArray(h)){if(S.has(h))return"[Circular]";S.add(h)}return h})}e.safeStringify=y;function I(u,S){const g=Object.create(null);return!u||!S||Object.keys(S).forEach(l=>{const i=u[l],s=S[l];m(i,s)||(g[l]=s)}),g}e.distinct=I;function E(u,S){const g=S.toLowerCase(),h=Object.keys(u).find(l=>l.toLowerCase()===g);return h?u[h]:u[S]}e.getCaseInsensitive=E;function d(u,S){const g=Object.create(null);for(const[h,l]of Object.entries(u))S(h,l)&&(g[h]=l);return g}e.filter=d;function w(u){let S=[],g=Object.getPrototypeOf(u);for(;Object.prototype!==g;)S=S.concat(Object.getOwnPropertyNames(g)),g=Object.getPrototypeOf(g);return S}e.getAllPropertyNames=w;function f(u){const S=[];for(const g of w(u))typeof u[g]=="function"&&S.push(g);return S}e.getAllMethodNames=f;function v(u,S){const g=l=>function(){const i=Array.prototype.slice.call(arguments,0);return S(l,i)},h={};for(const l of u)h[l]=g(l);return h}e.createProxyObject=v}),define(ee[29],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=e.isUUID=void 0;const C=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function t(k){return C.test(k)}e.isUUID=t,e.generateUuid=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let k;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?k=crypto.getRandomValues.bind(crypto):k=function(P){for(let p=0;p<P.length;p++)P[p]=Math.floor(Math.random()*256);return P};const L=new Uint8Array(16),R=[];for(let P=0;P<256;P++)R.push(P.toString(16).padStart(2,"0"));return function(){k(L),L[6]=L[6]&15|64,L[8]=L[8]&63|128;let p=0,m="";return m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m+="-",m+=R[L[p++]],m+=R[L[p++]],m+="-",m+=R[L[p++]],m+=R[L[p++]],m+="-",m+=R[L[p++]],m+=R[L[p++]],m+="-",m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m+=R[L[p++]],m}}()}),define(ee[128],te([0,1,77,40,50]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checksum=void 0;async function L(R,P){if(await new Promise((y,I)=>{const E=t.createReadStream(R),d=C.createHash("sha1");E.pipe(d);const w=(0,k.once)((f,v)=>{E.removeAllListeners(),d.removeAllListeners(),f?I(f):y(v)});E.once("error",w),E.once("end",w),d.once("error",w),d.once("data",f=>w(void 0,f.toString("hex")))})!==P)throw new Error("Hash mismatch")}e.checksum=L}),define(ee[129],te([0,1,25]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMac=void 0;const t=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function k(R){const P=R.replace(/\-/g,":").toLowerCase();return!t.has(P)}function L(){const R=(0,C.networkInterfaces)();for(const P in R){const p=R[P];if(p){for(const{mac:m}of p)if(k(m))return m}}throw new Error("Unable to retrieve mac address (unexpected format)")}e.getMac=L}),define(ee[97],te([0,1,78]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findFreePortFaster=e.BROWSER_RESTRICTED_PORTS=e.findFreePort=void 0;function t(P,p,m,y=1){let I=!1;return new Promise(E=>{const d=setTimeout(()=>{if(!I)return I=!0,E(0)},m);k(P,p,y,w=>{if(!I)return I=!0,clearTimeout(d),E(w)})})}e.findFreePort=t;function k(P,p,m,y){if(p===0)return y(0);const I=new C.Socket;I.once("connect",()=>(R(I),k(P+m,p-1,m,y))),I.once("data",()=>{}),I.once("error",E=>(R(I),E.code!=="ECONNREFUSED"?k(P+m,p-1,m,y):y(P))),I.connect(P,"127.0.0.1")}e.BROWSER_RESTRICTED_PORTS={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function L(P,p,m,y="127.0.0.1"){let I=!1,E,d=1;const w=C.createServer({pauseOnConnect:!0});function f(v,u){I||(I=!0,w.removeAllListeners(),w.close(),E&&clearTimeout(E),u(v))}return new Promise(v=>{E=setTimeout(()=>{f(0,v)},m),w.on("listening",()=>{f(P,v)}),w.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&d<p?(P++,d++,w.listen(P,y)):f(0,v)}),w.on("close",()=>{f(0,v)}),w.listen(P,y)})}e.findFreePortFaster=L;function R(P){try{P.removeAllListeners("connect"),P.removeAllListeners("error"),P.end(),P.destroy(),P.unref()}catch(p){console.error(p)}}}),define(ee[130],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_MENU_CLOSE_CHANNEL=e.CONTEXT_MENU_CHANNEL=void 0,e.CONTEXT_MENU_CHANNEL="vscode:contextmenu",e.CONTEXT_MENU_CLOSE_CHANNEL="vscode:onCloseContextMenu"}),define(ee[131],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Protocol=void 0;class C{constructor(k,L){this.sender=k,this.onMessage=L}send(k){try{this.sender.send("vscode:message",k.buffer)}catch{}}disconnect(){this.sender.send("vscode:disconnect",null)}}e.Protocol=C}),define(ee[41],te([0,1,13,15]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validatedIpcMain=void 0;class k{constructor(){this.mapListenerToWrapper=new WeakMap}on(R,P){const p=(m,...y)=>{this.validateEvent(R,m)&&P(m,...y)};return this.mapListenerToWrapper.set(P,p),C.ipcMain.on(R,p),this}once(R,P){return C.ipcMain.once(R,(p,...m)=>{this.validateEvent(R,p)&&P(p,...m)}),this}handle(R,P){return C.ipcMain.handle(R,(p,...m)=>this.validateEvent(R,p)?P(p,...m):Promise.reject(`Invalid channel '${R}' or sender for ipcMain.handle() usage.`)),this}removeHandler(R){return C.ipcMain.removeHandler(R),this}removeListener(R,P){const p=this.mapListenerToWrapper.get(P);return p&&(C.ipcMain.removeListener(R,p),this.mapListenerToWrapper.delete(P)),this}validateEvent(R,P){if(!R||!R.startsWith("vscode:"))return(0,t.onUnexpectedError)(`Refused to handle ipcMain event for channel '${R}' because the channel is unknown.`),!1;const p=P.senderFrame,m=p.url;if(!m)return!0;let y="unknown";try{y=new URL(m).host}catch{return(0,t.onUnexpectedError)(`Refused to handle ipcMain event for channel '${R}' because of a malformed URL '${m}'.`),!1}return y!=="vscode-app"?((0,t.onUnexpectedError)(`Refused to handle ipcMain event for channel '${R}' because of a bad origin of '${y}'.`),!1):p.parent!==null?((0,t.onUnexpectedError)(`Refused to handle ipcMain event for channel '${R}' because sender of origin '${y}' is not a main frame.`),!1):!0}}e.validatedIpcMain=new k}),define(ee[132],te([0,1,13,41,12,130]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextMenuListener=void 0;function R(){t.validatedIpcMain.on(L.CONTEXT_MENU_CHANNEL,(p,m,y,I,E)=>{const d=P(p,I,y);d.popup({window:(0,k.withNullAsUndefined)(C.BrowserWindow.fromWebContents(p.sender)),x:E?E.x:void 0,y:E?E.y:void 0,positioningItem:E?E.positioningItem:void 0,callback:()=>{d&&p.sender.send(L.CONTEXT_MENU_CLOSE_CHANNEL,m)}})})}e.registerContextMenuListener=R;function P(p,m,y){const I=new C.Menu;return y.forEach(E=>{let d;E.type==="separator"?d=new C.MenuItem({type:E.type}):Array.isArray(E.submenu)?d=new C.MenuItem({submenu:P(p,m,E.submenu),label:E.label}):d=new C.MenuItem({label:E.label,type:E.type,accelerator:E.accelerator,checked:E.checked,enabled:E.enabled,visible:E.visible,click:(w,f,v)=>p.sender.send(m,E.id,v)}),I.append(d)}),I}}),define(ee[133],te([11,10]),function(j,e){return j.create("vs/base/common/date",e)}),define(ee[134],te([0,1,133]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalISOString=e.fromNow=void 0;const t=60,k=t*60,L=k*24,R=L*7,P=L*30,p=L*365;function m(I,E,d){typeof I!="number"&&(I=I.getTime());const w=Math.round((new Date().getTime()-I)/1e3);if(w<-30)return(0,C.localize)(0,null,m(new Date().getTime()+w*1e3,!1));if(w<30)return(0,C.localize)(1,null);let f;return w<t?(f=w,E?f===1?d?(0,C.localize)(2,null,f):(0,C.localize)(3,null,f):d?(0,C.localize)(4,null,f):(0,C.localize)(5,null,f):f===1?d?(0,C.localize)(6,null,f):(0,C.localize)(7,null,f):d?(0,C.localize)(8,null,f):(0,C.localize)(9,null,f)):w<k?(f=Math.floor(w/t),E?f===1?d?(0,C.localize)(10,null,f):(0,C.localize)(11,null,f):d?(0,C.localize)(12,null,f):(0,C.localize)(13,null,f):f===1?d?(0,C.localize)(14,null,f):(0,C.localize)(15,null,f):d?(0,C.localize)(16,null,f):(0,C.localize)(17,null,f)):w<L?(f=Math.floor(w/k),E?f===1?d?(0,C.localize)(18,null,f):(0,C.localize)(19,null,f):d?(0,C.localize)(20,null,f):(0,C.localize)(21,null,f):f===1?d?(0,C.localize)(22,null,f):(0,C.localize)(23,null,f):d?(0,C.localize)(24,null,f):(0,C.localize)(25,null,f)):w<R?(f=Math.floor(w/L),E?f===1?(0,C.localize)(26,null,f):(0,C.localize)(27,null,f):f===1?(0,C.localize)(28,null,f):(0,C.localize)(29,null,f)):w<P?(f=Math.floor(w/R),E?f===1?d?(0,C.localize)(30,null,f):(0,C.localize)(31,null,f):d?(0,C.localize)(32,null,f):(0,C.localize)(33,null,f):f===1?d?(0,C.localize)(34,null,f):(0,C.localize)(35,null,f):d?(0,C.localize)(36,null,f):(0,C.localize)(37,null,f)):w<p?(f=Math.floor(w/P),E?f===1?d?(0,C.localize)(38,null,f):(0,C.localize)(39,null,f):d?(0,C.localize)(40,null,f):(0,C.localize)(41,null,f):f===1?d?(0,C.localize)(42,null,f):(0,C.localize)(43,null,f):d?(0,C.localize)(44,null,f):(0,C.localize)(45,null,f)):(f=Math.floor(w/p),E?f===1?d?(0,C.localize)(46,null,f):(0,C.localize)(47,null,f):d?(0,C.localize)(48,null,f):(0,C.localize)(49,null,f):f===1?d?(0,C.localize)(50,null,f):(0,C.localize)(51,null,f):d?(0,C.localize)(52,null,f):(0,C.localize)(53,null,f))}e.fromNow=m;function y(I){return I.getFullYear()+"-"+String(I.getMonth()+1).padStart(2,"0")+"-"+String(I.getDate()).padStart(2,"0")+"T"+String(I.getHours()).padStart(2,"0")+":"+String(I.getMinutes()).padStart(2,"0")+":"+String(I.getSeconds()).padStart(2,"0")+"."+(I.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}e.toLocalISOString=y}),define(ee[135],te([11,10]),function(j,e){return j.create("vs/base/common/errorMessage",e)}),define(ee[45],te([0,1,24,12,135]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorWithActions=e.isErrorWithActions=e.toErrorMessage=void 0;function L(I,E){return E&&(I.stack||I.stacktrace)?k.localize(0,null,P(I),R(I.stack)||R(I.stacktrace)):P(I)}function R(I){return Array.isArray(I)?I.join(`
`):I}function P(I){return typeof I.code=="string"&&typeof I.errno=="number"&&typeof I.syscall=="string"?k.localize(1,null,I.message):I.message||k.localize(2,null)}function p(I=null,E=!1){if(!I)return k.localize(3,null);if(Array.isArray(I)){const d=C.coalesce(I),w=p(d[0],E);return d.length>1?k.localize(4,null,w,d.length):w}if(t.isString(I))return I;if(I.detail){const d=I.detail;if(d.error)return L(d.error,E);if(d.exception)return L(d.exception,E)}return I.stack?L(I,E):I.message?I.message:k.localize(5,null)}e.toErrorMessage=p;function m(I){const E=I;return E instanceof Error&&Array.isArray(E.actions)}e.isErrorWithActions=m;function y(I,E){let d;return typeof I=="string"?d=new Error(I):d=I,d.actions=E,d}e.createErrorWithActions=y}),define(ee[136],te([11,10]),function(j,e){return j.create("vs/base/common/jsonErrorMessages",e)}),define(ee[137],te([0,1,136]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getParseErrorMessage=void 0;function t(k){switch(k){case 1:return(0,C.localize)(0,null);case 2:return(0,C.localize)(1,null);case 3:return(0,C.localize)(2,null);case 4:return(0,C.localize)(3,null);case 5:return(0,C.localize)(4,null);case 6:return(0,C.localize)(5,null);case 7:return(0,C.localize)(6,null);case 8:return(0,C.localize)(7,null);case 9:return(0,C.localize)(8,null);default:return""}}e.getParseErrorMessage=t}),define(ee[138],te([11,10]),function(j,e){return j.create("vs/base/common/platform",e)}),define(ee[4],te([0,1,138]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAndroid=e.isEdge=e.isSafari=e.isFirefox=e.isChrome=e.isLittleEndian=e.OS=e.OperatingSystem=e.setTimeout0=e.setTimeout0IsFaster=e.translationsConfigFile=e.locale=e.Language=e.language=e.userAgent=e.platform=e.isCI=e.isMobile=e.isIOS=e.isWebWorker=e.isWeb=e.isElectron=e.isNative=e.isLinuxSnap=e.isLinux=e.isMacintosh=e.isWindows=e.PlatformToString=e.Platform=e.globals=e.LANGUAGE_DEFAULT=void 0,e.LANGUAGE_DEFAULT="en";let t=!1,k=!1,L=!1,R=!1,P=!1,p=!1,m=!1,y=!1,I=!1,E=!1,d,w=e.LANGUAGE_DEFAULT,f,v;e.globals=typeof self=="object"?self:typeof global=="object"?global:{};let u;typeof e.globals.vscode<"u"&&typeof e.globals.vscode.process<"u"?u=e.globals.vscode.process:typeof process<"u"&&(u=process);const S=typeof u?.versions?.electron=="string",g=S&&u?.type==="renderer";if(typeof navigator=="object"&&!g)v=navigator.userAgent,t=v.indexOf("Windows")>=0,k=v.indexOf("Macintosh")>=0,y=(v.indexOf("Macintosh")>=0||v.indexOf("iPad")>=0||v.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,L=v.indexOf("Linux")>=0,E=v?.indexOf("Mobi")>=0,p=!0,d=C.getConfiguredDefaultLocale(C.localize(0,null))||e.LANGUAGE_DEFAULT,w=d;else if(typeof u=="object"){t=u.platform==="win32",k=u.platform==="darwin",L=u.platform==="linux",R=L&&!!u.env.SNAP&&!!u.env.SNAP_REVISION,m=S,I=!!u.env.CI||!!u.env.BUILD_ARTIFACTSTAGINGDIRECTORY,d=e.LANGUAGE_DEFAULT,w=e.LANGUAGE_DEFAULT;const o=u.env.VSCODE_NLS_CONFIG;if(o)try{const b=JSON.parse(o),D=b.availableLanguages["*"];d=b.locale,w=D||e.LANGUAGE_DEFAULT,f=b._translationsConfigFile}catch{}P=!0}else console.error("Unable to resolve platform.");var h;(function(o){o[o.Web=0]="Web",o[o.Mac=1]="Mac",o[o.Linux=2]="Linux",o[o.Windows=3]="Windows"})(h=e.Platform||(e.Platform={}));function l(o){switch(o){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}e.PlatformToString=l;let i=0;k?i=1:t?i=3:L&&(i=2),e.isWindows=t,e.isMacintosh=k,e.isLinux=L,e.isLinuxSnap=R,e.isNative=P,e.isElectron=m,e.isWeb=p,e.isWebWorker=p&&typeof e.globals.importScripts=="function",e.isIOS=y,e.isMobile=E,e.isCI=I,e.platform=i,e.userAgent=v,e.language=w;var s;(function(o){function b(){return e.language}o.value=b;function D(){return e.language.length===2?e.language==="en":e.language.length>=3?e.language[0]==="e"&&e.language[1]==="n"&&e.language[2]==="-":!1}o.isDefaultVariant=D;function A(){return e.language==="en"}o.isDefault=A})(s=e.Language||(e.Language={})),e.locale=d,e.translationsConfigFile=f,e.setTimeout0IsFaster=typeof e.globals.postMessage=="function"&&!e.globals.importScripts,e.setTimeout0=(()=>{if(e.setTimeout0IsFaster){const o=[];e.globals.addEventListener("message",D=>{if(D.data&&D.data.vscodeScheduleAsyncWork)for(let A=0,N=o.length;A<N;A++){const G=o[A];if(G.id===D.data.vscodeScheduleAsyncWork){o.splice(A,1),G.callback();return}}});let b=0;return D=>{const A=++b;o.push({id:A,callback:D}),e.globals.postMessage({vscodeScheduleAsyncWork:A},"*")}}return o=>setTimeout(o)})();var n;(function(o){o[o.Windows=1]="Windows",o[o.Macintosh=2]="Macintosh",o[o.Linux=3]="Linux"})(n=e.OperatingSystem||(e.OperatingSystem={})),e.OS=k||y?2:t?1:3;let a=!0,r=!1;function c(){if(!r){r=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,a=new Uint16Array(o.buffer)[0]===(2<<8)+1}return a}e.isLittleEndian=c,e.isChrome=!!(e.userAgent&&e.userAgent.indexOf("Chrome")>=0),e.isFirefox=!!(e.userAgent&&e.userAgent.indexOf("Firefox")>=0),e.isSafari=!!(!e.isChrome&&e.userAgent&&e.userAgent.indexOf("Safari")>=0),e.isEdge=!!(e.userAgent&&e.userAgent.indexOf("Edg/")>=0),e.isAndroid=!!(e.userAgent&&e.userAgent.indexOf("Android")>=0)}),define(ee[33],te([0,1,4]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arch=e.platform=e.env=e.cwd=void 0;let t;if(typeof C.globals.vscode<"u"&&typeof C.globals.vscode.process<"u"){const k=C.globals.vscode.process;t={get platform(){return k.platform},get arch(){return k.arch},get env(){return k.env},cwd(){return k.cwd()}}}else typeof process<"u"?t={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:t={get platform(){return C.isWindows?"win32":C.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};e.cwd=t.cwd,e.env=t.env,e.platform=t.platform,e.arch=t.arch}),define(ee[9],te([0,1,33]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delimiter=e.sep=e.toNamespacedPath=e.parse=e.format=e.extname=e.basename=e.dirname=e.relative=e.resolve=e.join=e.isAbsolute=e.normalize=e.posix=e.win32=void 0;const t=65,k=97,L=90,R=122,P=46,p=47,m=92,y=58,I=63;class E extends Error{constructor(h,l,i){let s;typeof l=="string"&&l.indexOf("not ")===0?(s="must not be",l=l.replace(/^not /,"")):s="must be";const n=h.indexOf(".")!==-1?"property":"argument";let a=`The "${h}" ${n} ${s} of type ${l}`;a+=`. Received type ${typeof i}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}}function d(g,h){if(typeof g!="string")throw new E(h,"string",g)}function w(g){return g===p||g===m}function f(g){return g===p}function v(g){return g>=t&&g<=L||g>=k&&g<=R}function u(g,h,l,i){let s="",n=0,a=-1,r=0,c=0;for(let o=0;o<=g.length;++o){if(o<g.length)c=g.charCodeAt(o);else{if(i(c))break;c=p}if(i(c)){if(!(a===o-1||r===1))if(r===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==P||s.charCodeAt(s.length-2)!==P){if(s.length>2){const b=s.lastIndexOf(l);b===-1?(s="",n=0):(s=s.slice(0,b),n=s.length-1-s.lastIndexOf(l)),a=o,r=0;continue}else if(s.length!==0){s="",n=0,a=o,r=0;continue}}h&&(s+=s.length>0?`${l}..`:"..",n=2)}else s.length>0?s+=`${l}${g.slice(a+1,o)}`:s=g.slice(a+1,o),n=o-a-1;a=o,r=0}else c===P&&r!==-1?++r:r=-1}return s}function S(g,h){if(h===null||typeof h!="object")throw new E("pathObject","Object",h);const l=h.dir||h.root,i=h.base||`${h.name||""}${h.ext||""}`;return l?l===h.root?`${l}${i}`:`${l}${g}${i}`:i}e.win32={resolve(...g){let h="",l="",i=!1;for(let s=g.length-1;s>=-1;s--){let n;if(s>=0){if(n=g[s],d(n,"path"),n.length===0)continue}else h.length===0?n=C.cwd():(n=C.env[`=${h}`]||C.cwd(),(n===void 0||n.slice(0,2).toLowerCase()!==h.toLowerCase()&&n.charCodeAt(2)===m)&&(n=`${h}\\`));const a=n.length;let r=0,c="",o=!1;const b=n.charCodeAt(0);if(a===1)w(b)&&(r=1,o=!0);else if(w(b))if(o=!0,w(n.charCodeAt(1))){let D=2,A=D;for(;D<a&&!w(n.charCodeAt(D));)D++;if(D<a&&D!==A){const N=n.slice(A,D);for(A=D;D<a&&w(n.charCodeAt(D));)D++;if(D<a&&D!==A){for(A=D;D<a&&!w(n.charCodeAt(D));)D++;(D===a||D!==A)&&(c=`\\\\${N}\\${n.slice(A,D)}`,r=D)}}}else r=1;else v(b)&&n.charCodeAt(1)===y&&(c=n.slice(0,2),r=2,a>2&&w(n.charCodeAt(2))&&(o=!0,r=3));if(c.length>0)if(h.length>0){if(c.toLowerCase()!==h.toLowerCase())continue}else h=c;if(i){if(h.length>0)break}else if(l=`${n.slice(r)}\\${l}`,i=o,o&&h.length>0)break}return l=u(l,!i,"\\",w),i?`${h}\\${l}`:`${h}${l}`||"."},normalize(g){d(g,"path");const h=g.length;if(h===0)return".";let l=0,i,s=!1;const n=g.charCodeAt(0);if(h===1)return f(n)?"\\":g;if(w(n))if(s=!0,w(g.charCodeAt(1))){let r=2,c=r;for(;r<h&&!w(g.charCodeAt(r));)r++;if(r<h&&r!==c){const o=g.slice(c,r);for(c=r;r<h&&w(g.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&!w(g.charCodeAt(r));)r++;if(r===h)return`\\\\${o}\\${g.slice(c)}\\`;r!==c&&(i=`\\\\${o}\\${g.slice(c,r)}`,l=r)}}}else l=1;else v(n)&&g.charCodeAt(1)===y&&(i=g.slice(0,2),l=2,h>2&&w(g.charCodeAt(2))&&(s=!0,l=3));let a=l<h?u(g.slice(l),!s,"\\",w):"";return a.length===0&&!s&&(a="."),a.length>0&&w(g.charCodeAt(h-1))&&(a+="\\"),i===void 0?s?`\\${a}`:a:s?`${i}\\${a}`:`${i}${a}`},isAbsolute(g){d(g,"path");const h=g.length;if(h===0)return!1;const l=g.charCodeAt(0);return w(l)||h>2&&v(l)&&g.charCodeAt(1)===y&&w(g.charCodeAt(2))},join(...g){if(g.length===0)return".";let h,l;for(let n=0;n<g.length;++n){const a=g[n];d(a,"path"),a.length>0&&(h===void 0?h=l=a:h+=`\\${a}`)}if(h===void 0)return".";let i=!0,s=0;if(typeof l=="string"&&w(l.charCodeAt(0))){++s;const n=l.length;n>1&&w(l.charCodeAt(1))&&(++s,n>2&&(w(l.charCodeAt(2))?++s:i=!1))}if(i){for(;s<h.length&&w(h.charCodeAt(s));)s++;s>=2&&(h=`\\${h.slice(s)}`)}return e.win32.normalize(h)},relative(g,h){if(d(g,"from"),d(h,"to"),g===h)return"";const l=e.win32.resolve(g),i=e.win32.resolve(h);if(l===i||(g=l.toLowerCase(),h=i.toLowerCase(),g===h))return"";let s=0;for(;s<g.length&&g.charCodeAt(s)===m;)s++;let n=g.length;for(;n-1>s&&g.charCodeAt(n-1)===m;)n--;const a=n-s;let r=0;for(;r<h.length&&h.charCodeAt(r)===m;)r++;let c=h.length;for(;c-1>r&&h.charCodeAt(c-1)===m;)c--;const o=c-r,b=a<o?a:o;let D=-1,A=0;for(;A<b;A++){const G=g.charCodeAt(s+A);if(G!==h.charCodeAt(r+A))break;G===m&&(D=A)}if(A!==b){if(D===-1)return i}else{if(o>b){if(h.charCodeAt(r+A)===m)return i.slice(r+A+1);if(A===2)return i.slice(r+A)}a>b&&(g.charCodeAt(s+A)===m?D=A:A===2&&(D=3)),D===-1&&(D=0)}let N="";for(A=s+D+1;A<=n;++A)(A===n||g.charCodeAt(A)===m)&&(N+=N.length===0?"..":"\\..");return r+=D,N.length>0?`${N}${i.slice(r,c)}`:(i.charCodeAt(r)===m&&++r,i.slice(r,c))},toNamespacedPath(g){if(typeof g!="string")return g;if(g.length===0)return"";const h=e.win32.resolve(g);if(h.length<=2)return g;if(h.charCodeAt(0)===m){if(h.charCodeAt(1)===m){const l=h.charCodeAt(2);if(l!==I&&l!==P)return`\\\\?\\UNC\\${h.slice(2)}`}}else if(v(h.charCodeAt(0))&&h.charCodeAt(1)===y&&h.charCodeAt(2)===m)return`\\\\?\\${h}`;return g},dirname(g){d(g,"path");const h=g.length;if(h===0)return".";let l=-1,i=0;const s=g.charCodeAt(0);if(h===1)return w(s)?g:".";if(w(s)){if(l=i=1,w(g.charCodeAt(1))){let r=2,c=r;for(;r<h&&!w(g.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&w(g.charCodeAt(r));)r++;if(r<h&&r!==c){for(c=r;r<h&&!w(g.charCodeAt(r));)r++;if(r===h)return g;r!==c&&(l=i=r+1)}}}}else v(s)&&g.charCodeAt(1)===y&&(l=h>2&&w(g.charCodeAt(2))?3:2,i=l);let n=-1,a=!0;for(let r=h-1;r>=i;--r)if(w(g.charCodeAt(r))){if(!a){n=r;break}}else a=!1;if(n===-1){if(l===-1)return".";n=l}return g.slice(0,n)},basename(g,h){h!==void 0&&d(h,"ext"),d(g,"path");let l=0,i=-1,s=!0,n;if(g.length>=2&&v(g.charCodeAt(0))&&g.charCodeAt(1)===y&&(l=2),h!==void 0&&h.length>0&&h.length<=g.length){if(h===g)return"";let a=h.length-1,r=-1;for(n=g.length-1;n>=l;--n){const c=g.charCodeAt(n);if(w(c)){if(!s){l=n+1;break}}else r===-1&&(s=!1,r=n+1),a>=0&&(c===h.charCodeAt(a)?--a===-1&&(i=n):(a=-1,i=r))}return l===i?i=r:i===-1&&(i=g.length),g.slice(l,i)}for(n=g.length-1;n>=l;--n)if(w(g.charCodeAt(n))){if(!s){l=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":g.slice(l,i)},extname(g){d(g,"path");let h=0,l=-1,i=0,s=-1,n=!0,a=0;g.length>=2&&g.charCodeAt(1)===y&&v(g.charCodeAt(0))&&(h=i=2);for(let r=g.length-1;r>=h;--r){const c=g.charCodeAt(r);if(w(c)){if(!n){i=r+1;break}continue}s===-1&&(n=!1,s=r+1),c===P?l===-1?l=r:a!==1&&(a=1):l!==-1&&(a=-1)}return l===-1||s===-1||a===0||a===1&&l===s-1&&l===i+1?"":g.slice(l,s)},format:S.bind(null,"\\"),parse(g){d(g,"path");const h={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return h;const l=g.length;let i=0,s=g.charCodeAt(0);if(l===1)return w(s)?(h.root=h.dir=g,h):(h.base=h.name=g,h);if(w(s)){if(i=1,w(g.charCodeAt(1))){let D=2,A=D;for(;D<l&&!w(g.charCodeAt(D));)D++;if(D<l&&D!==A){for(A=D;D<l&&w(g.charCodeAt(D));)D++;if(D<l&&D!==A){for(A=D;D<l&&!w(g.charCodeAt(D));)D++;D===l?i=D:D!==A&&(i=D+1)}}}}else if(v(s)&&g.charCodeAt(1)===y){if(l<=2)return h.root=h.dir=g,h;if(i=2,w(g.charCodeAt(2))){if(l===3)return h.root=h.dir=g,h;i=3}}i>0&&(h.root=g.slice(0,i));let n=-1,a=i,r=-1,c=!0,o=g.length-1,b=0;for(;o>=i;--o){if(s=g.charCodeAt(o),w(s)){if(!c){a=o+1;break}continue}r===-1&&(c=!1,r=o+1),s===P?n===-1?n=o:b!==1&&(b=1):n!==-1&&(b=-1)}return r!==-1&&(n===-1||b===0||b===1&&n===r-1&&n===a+1?h.base=h.name=g.slice(a,r):(h.name=g.slice(a,n),h.base=g.slice(a,r),h.ext=g.slice(n,r))),a>0&&a!==i?h.dir=g.slice(0,a-1):h.dir=h.root,h},sep:"\\",delimiter:";",win32:null,posix:null},e.posix={resolve(...g){let h="",l=!1;for(let i=g.length-1;i>=-1&&!l;i--){const s=i>=0?g[i]:C.cwd();d(s,"path"),s.length!==0&&(h=`${s}/${h}`,l=s.charCodeAt(0)===p)}return h=u(h,!l,"/",f),l?`/${h}`:h.length>0?h:"."},normalize(g){if(d(g,"path"),g.length===0)return".";const h=g.charCodeAt(0)===p,l=g.charCodeAt(g.length-1)===p;return g=u(g,!h,"/",f),g.length===0?h?"/":l?"./":".":(l&&(g+="/"),h?`/${g}`:g)},isAbsolute(g){return d(g,"path"),g.length>0&&g.charCodeAt(0)===p},join(...g){if(g.length===0)return".";let h;for(let l=0;l<g.length;++l){const i=g[l];d(i,"path"),i.length>0&&(h===void 0?h=i:h+=`/${i}`)}return h===void 0?".":e.posix.normalize(h)},relative(g,h){if(d(g,"from"),d(h,"to"),g===h||(g=e.posix.resolve(g),h=e.posix.resolve(h),g===h))return"";const l=1,i=g.length,s=i-l,n=1,a=h.length-n,r=s<a?s:a;let c=-1,o=0;for(;o<r;o++){const D=g.charCodeAt(l+o);if(D!==h.charCodeAt(n+o))break;D===p&&(c=o)}if(o===r)if(a>r){if(h.charCodeAt(n+o)===p)return h.slice(n+o+1);if(o===0)return h.slice(n+o)}else s>r&&(g.charCodeAt(l+o)===p?c=o:o===0&&(c=0));let b="";for(o=l+c+1;o<=i;++o)(o===i||g.charCodeAt(o)===p)&&(b+=b.length===0?"..":"/..");return`${b}${h.slice(n+c)}`},toNamespacedPath(g){return g},dirname(g){if(d(g,"path"),g.length===0)return".";const h=g.charCodeAt(0)===p;let l=-1,i=!0;for(let s=g.length-1;s>=1;--s)if(g.charCodeAt(s)===p){if(!i){l=s;break}}else i=!1;return l===-1?h?"/":".":h&&l===1?"//":g.slice(0,l)},basename(g,h){h!==void 0&&d(h,"ext"),d(g,"path");let l=0,i=-1,s=!0,n;if(h!==void 0&&h.length>0&&h.length<=g.length){if(h===g)return"";let a=h.length-1,r=-1;for(n=g.length-1;n>=0;--n){const c=g.charCodeAt(n);if(c===p){if(!s){l=n+1;break}}else r===-1&&(s=!1,r=n+1),a>=0&&(c===h.charCodeAt(a)?--a===-1&&(i=n):(a=-1,i=r))}return l===i?i=r:i===-1&&(i=g.length),g.slice(l,i)}for(n=g.length-1;n>=0;--n)if(g.charCodeAt(n)===p){if(!s){l=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":g.slice(l,i)},extname(g){d(g,"path");let h=-1,l=0,i=-1,s=!0,n=0;for(let a=g.length-1;a>=0;--a){const r=g.charCodeAt(a);if(r===p){if(!s){l=a+1;break}continue}i===-1&&(s=!1,i=a+1),r===P?h===-1?h=a:n!==1&&(n=1):h!==-1&&(n=-1)}return h===-1||i===-1||n===0||n===1&&h===i-1&&h===l+1?"":g.slice(h,i)},format:S.bind(null,"/"),parse(g){d(g,"path");const h={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return h;const l=g.charCodeAt(0)===p;let i;l?(h.root="/",i=1):i=0;let s=-1,n=0,a=-1,r=!0,c=g.length-1,o=0;for(;c>=i;--c){const b=g.charCodeAt(c);if(b===p){if(!r){n=c+1;break}continue}a===-1&&(r=!1,a=c+1),b===P?s===-1?s=c:o!==1&&(o=1):s!==-1&&(o=-1)}if(a!==-1){const b=n===0&&l?1:n;s===-1||o===0||o===1&&s===a-1&&s===n+1?h.base=h.name=g.slice(b,a):(h.name=g.slice(b,s),h.base=g.slice(b,a),h.ext=g.slice(s,a))}return n>0?h.dir=g.slice(0,n-1):l&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null},e.posix.win32=e.win32.win32=e.win32,e.posix.posix=e.win32.posix=e.posix,e.normalize=C.platform==="win32"?e.win32.normalize:e.posix.normalize,e.isAbsolute=C.platform==="win32"?e.win32.isAbsolute:e.posix.isAbsolute,e.join=C.platform==="win32"?e.win32.join:e.posix.join,e.resolve=C.platform==="win32"?e.win32.resolve:e.posix.resolve,e.relative=C.platform==="win32"?e.win32.relative:e.posix.relative,e.dirname=C.platform==="win32"?e.win32.dirname:e.posix.dirname,e.basename=C.platform==="win32"?e.win32.basename:e.posix.basename,e.extname=C.platform==="win32"?e.win32.extname:e.posix.extname,e.format=C.platform==="win32"?e.win32.format:e.posix.format,e.parse=C.platform==="win32"?e.win32.parse:e.posix.parse,e.toNamespacedPath=C.platform==="win32"?e.win32.toNamespacedPath:e.posix.toNamespacedPath,e.sep=C.platform==="win32"?e.win32.sep:e.posix.sep,e.delimiter=C.platform==="win32"?e.win32.delimiter:e.posix.delimiter}),define(ee[79],te([0,1,4]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeDangerousEnvVariables=e.sanitizeProcessEnvironment=e.TerminateResponseCode=e.Source=void 0;var t;(function(P){P[P.stdout=0]="stdout",P[P.stderr=1]="stderr"})(t=e.Source||(e.Source={}));var k;(function(P){P[P.Success=0]="Success",P[P.Unknown=1]="Unknown",P[P.AccessDenied=2]="AccessDenied",P[P.ProcessNotFound=3]="ProcessNotFound"})(k=e.TerminateResponseCode||(e.TerminateResponseCode={}));function L(P,...p){const m=p.reduce((E,d)=>(E[d]=!0,E),{}),y=[/^ELECTRON_.+$/,/^VSCODE_(?!SHELL_LOGIN).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(P).filter(E=>!m[E]).forEach(E=>{for(let d=0;d<y.length;d++)if(E.search(y[d])!==-1){delete P[E];break}})}e.sanitizeProcessEnvironment=L;function R(P){!P||(delete P.DEBUG,C.isMacintosh&&delete P.DYLD_LIBRARY_PATH,C.isLinux&&delete P.LD_PRELOAD)}e.removeDangerousEnvVariables=R}),define(ee[80],te([0,1,4]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StopWatch=void 0;const t=C.globals.performance&&typeof C.globals.performance.now=="function";class k{static create(R=!0){return new k(R)}constructor(R){this._highResolution=t&&R,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?C.globals.performance.now():Date.now()}}e.StopWatch=k}),define(ee[3],te([0,1,15,50,2,96,80]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Relay=e.EventBufferer=e.EventMultiplexer=e.MicrotaskEmitter=e.DebounceEmitter=e.PauseableEmitter=e.AsyncEmitter=e.EventDeliveryQueue=e.Emitter=e.setGlobalLeakWarningThreshold=e.EventProfiling=e.Event=void 0;const P=!1,p=!1;var m;(function(c){c.None=()=>k.Disposable.None;function o(_){if(p){const{onDidAddListener:q}=_,Y=w.create();let B=0;_.onDidAddListener=()=>{++B===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),q?.()}}}function b(_,q){return ne(_,()=>{},0,void 0,void 0,q)}c.defer=b;function D(_){return(q,Y=null,B)=>{let X=!1,J;return J=_(oe=>{if(!X)return J?J.dispose():X=!0,q.call(Y,oe)},null,B),X&&J.dispose(),J}}c.once=D;function A(_,q,Y){return re((B,X=null,J)=>_(oe=>B.call(X,q(oe)),null,J),Y)}c.map=A;function N(_,q,Y){return re((B,X=null,J)=>_(oe=>{q(oe),B.call(X,oe)},null,J),Y)}c.forEach=N;function G(_,q,Y){return re((B,X=null,J)=>_(oe=>q(oe)&&B.call(X,oe),null,J),Y)}c.filter=G;function ae(_){return _}c.signal=ae;function x(..._){return(q,Y=null,B)=>(0,k.combinedDisposable)(..._.map(X=>X(J=>q.call(Y,J),null,B)))}c.any=x;function Q(_,q,Y,B){let X=Y;return A(_,J=>(X=q(X,J),X),B)}c.reduce=Q;function re(_,q){let Y;const B={onWillAddFirstListener(){Y=_(X.fire,X)},onDidRemoveLastListener(){Y?.dispose()}};q||o(B);const X=new v(B);return q?.add(X),X.event}function ne(_,q,Y=100,B=!1,X,J){let oe,ge,De,Te=0;const ke={leakWarningThreshold:X,onWillAddFirstListener(){oe=_(ve=>{Te++,ge=q(ge,ve),B&&!De&&(Ae.fire(ge),ge=void 0),clearTimeout(De),De=setTimeout(()=>{const pe=ge;ge=void 0,De=void 0,(!B||Te>1)&&Ae.fire(pe),Te=0},Y)})},onDidRemoveLastListener(){oe.dispose()}};J||o(ke);const Ae=new v(ke);return J?.add(Ae),Ae.event}c.debounce=ne;function fe(_,q=0,Y){return c.debounce(_,(B,X)=>B?(B.push(X),B):[X],q,void 0,void 0,Y)}c.accumulate=fe;function K(_,q=(B,X)=>B===X,Y){let B=!0,X;return G(_,J=>{const oe=B||!q(J,X);return B=!1,X=J,oe},Y)}c.latch=K;function le(_,q,Y){return[c.filter(_,q,Y),c.filter(_,B=>!q(B),Y)]}c.split=le;function W(_,q=!1,Y=[]){let B=Y.slice(),X=_(ge=>{B?B.push(ge):oe.fire(ge)});const J=()=>{B?.forEach(ge=>oe.fire(ge)),B=null},oe=new v({onWillAddFirstListener(){X||(X=_(ge=>oe.fire(ge)))},onDidAddFirstListener(){B&&(q?setTimeout(J):J())},onDidRemoveLastListener(){X&&X.dispose(),X=null}});return oe.event}c.buffer=W;class O{constructor(q){this.event=q,this.disposables=new k.DisposableStore}map(q){return new O(A(this.event,q,this.disposables))}forEach(q){return new O(N(this.event,q,this.disposables))}filter(q){return new O(G(this.event,q,this.disposables))}reduce(q,Y){return new O(Q(this.event,q,Y,this.disposables))}latch(){return new O(K(this.event,void 0,this.disposables))}debounce(q,Y=100,B=!1,X){return new O(ne(this.event,q,Y,B,X,this.disposables))}on(q,Y,B){return this.event(q,Y,B)}once(q,Y,B){return D(this.event)(q,Y,B)}dispose(){this.disposables.dispose()}}function U(_){return new O(_)}c.chain=U;function H(_,q,Y=B=>B){const B=(...ge)=>oe.fire(Y(...ge)),X=()=>_.on(q,B),J=()=>_.removeListener(q,B),oe=new v({onWillAddFirstListener:X,onDidRemoveLastListener:J});return oe.event}c.fromNodeEventEmitter=H;function se(_,q,Y=B=>B){const B=(...ge)=>oe.fire(Y(...ge)),X=()=>_.addEventListener(q,B),J=()=>_.removeEventListener(q,B),oe=new v({onWillAddFirstListener:X,onDidRemoveLastListener:J});return oe.event}c.fromDOMEventEmitter=se;function $(_){return new Promise(q=>D(_)(q))}c.toPromise=$;function z(_,q){return q(void 0),_(Y=>q(Y))}c.runAndSubscribe=z;function M(_,q){let Y=null;function B(J){Y?.dispose(),Y=new k.DisposableStore,q(J,Y)}B(void 0);const X=_(J=>B(J));return(0,k.toDisposable)(()=>{X.dispose(),Y?.dispose()})}c.runAndSubscribeWithStore=M;class T{constructor(q,Y){this.obs=q,this._counter=0,this._hasChanged=!1;const B={onWillAddFirstListener:()=>{q.addObserver(this)},onDidRemoveLastListener:()=>{q.removeObserver(this)}};Y||o(B),this.emitter=new v(B),Y&&Y.add(this.emitter)}beginUpdate(q){this._counter++}handleChange(q,Y){this._hasChanged=!0}endUpdate(q){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function F(_,q){return new T(_,q).emitter.event}c.fromObservable=F})(m=e.Event||(e.Event={}));class y{constructor(o){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${o}_${y._idPool++}`,y.all.add(this)}start(o){this._stopWatch=new R.StopWatch(!0),this.listenerCount=o}stop(){if(this._stopWatch){const o=this._stopWatch.elapsed();this.durations.push(o),this.elapsedOverall+=o,this.invocationCount+=1,this._stopWatch=void 0}}}e.EventProfiling=y,y.all=new Set,y._idPool=0;let I=-1;function E(c){const o=I;return I=c,{dispose(){I=o}}}e.setGlobalLeakWarningThreshold=E;class d{constructor(o,b=Math.random().toString(18).slice(2,5)){this.threshold=o,this.name=b,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(o,b){const D=this.threshold;if(D<=0||b<D)return;this._stacks||(this._stacks=new Map);const A=this._stacks.get(o.value)||0;if(this._stacks.set(o.value,A+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=D*.5;let N,G=0;for(const[ae,x]of this._stacks)(!N||G<x)&&(N=ae,G=x);console.warn(`[${this.name}] potential listener LEAK detected, having ${b} listeners already. MOST frequent listener (${G}):`),console.warn(N)}return()=>{const N=this._stacks.get(o.value)||0;this._stacks.set(o.value,N-1)}}}class w{static create(){return new w(new Error().stack??"")}constructor(o){this.value=o}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class f{constructor(o,b,D){this.callback=o,this.callbackThis=b,this.stack=D,this.subscription=new k.SafeDisposable}invoke(o){this.callback.call(this.callbackThis,o)}}class v{constructor(o){this._disposed=!1,this._options=o,this._leakageMon=I>0||this._options?.leakWarningThreshold?new d(this._options?.leakWarningThreshold??I):void 0,this._perfMon=this._options?._profName?new y(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._listeners){if(P){const o=Array.from(this._listeners);queueMicrotask(()=>{for(const b of o)b.subscription.isset()&&(b.subscription.unset(),b.stack?.print())})}this._listeners.clear()}this._deliveryQueue?.clear(this),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event||(this._event=(o,b,D)=>{if(this._listeners||(this._listeners=new L.LinkedList),this._leakageMon&&this._listeners.size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),k.Disposable.None;const A=this._listeners.isEmpty();A&&this._options?.onWillAddFirstListener&&this._options.onWillAddFirstListener(this);let N,G;this._leakageMon&&this._listeners.size>=Math.ceil(this._leakageMon.threshold*.2)&&(G=w.create(),N=this._leakageMon.check(G,this._listeners.size+1)),P&&(G=G??w.create());const ae=new f(o,b,G),x=this._listeners.push(ae);A&&this._options?.onDidAddFirstListener&&this._options.onDidAddFirstListener(this),this._options?.onDidAddListener&&this._options.onDidAddListener(this,o,b);const Q=ae.subscription.set(()=>{N?.(),this._disposed||(x(),this._options&&this._options.onDidRemoveLastListener&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this)))});return D instanceof k.DisposableStore?D.add(Q):Array.isArray(D)&&D.push(Q),Q}),this._event}fire(o){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new S);for(const b of this._listeners)this._deliveryQueue.push(this,b,o);this._perfMon?.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),this._perfMon?.stop()}}hasListeners(){return this._listeners?!this._listeners.isEmpty():!1}}e.Emitter=v;class u{constructor(){this._queue=new L.LinkedList}get size(){return this._queue.size}push(o,b,D){this._queue.push(new g(o,b,D))}clear(o){const b=new L.LinkedList;for(const D of this._queue)D.emitter!==o&&b.push(D);this._queue=b}deliver(){for(;this._queue.size>0;){const o=this._queue.shift();try{o.listener.invoke(o.event)}catch(b){(0,C.onUnexpectedError)(b)}}}}e.EventDeliveryQueue=u;class S extends u{clear(o){this._queue.clear()}}class g{constructor(o,b,D){this.emitter=o,this.listener=b,this.event=D}}class h extends v{async fireAsync(o,b,D){if(!!this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new L.LinkedList);for(const A of this._listeners)this._asyncDeliveryQueue.push([A,o]);for(;this._asyncDeliveryQueue.size>0&&!b.isCancellationRequested;){const[A,N]=this._asyncDeliveryQueue.shift(),G=[],ae={...N,token:b,waitUntil:x=>{if(Object.isFrozen(G))throw new Error("waitUntil can NOT be called asynchronous");D&&(x=D(x,A.callback)),G.push(x)}};try{A.invoke(ae)}catch(x){(0,C.onUnexpectedError)(x);continue}Object.freeze(G),await Promise.allSettled(G).then(x=>{for(const Q of x)Q.status==="rejected"&&(0,C.onUnexpectedError)(Q.reason)})}}}}e.AsyncEmitter=h;class l extends v{constructor(o){super(o),this._isPaused=0,this._eventQueue=new L.LinkedList,this._mergeFn=o?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const o=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(o))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(o){this._listeners&&(this._isPaused!==0?this._eventQueue.push(o):super.fire(o))}}e.PauseableEmitter=l;class i extends l{constructor(o){super(o),this._delay=o.delay??100}fire(o){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(o)}}e.DebounceEmitter=i;class s extends v{constructor(o){super(o),this._queuedEvents=[],this._mergeFn=o?.merge}fire(o){!this.hasListeners()||(this._queuedEvents.push(o),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(b=>super.fire(b)),this._queuedEvents=[]}))}}e.MicrotaskEmitter=s;class n{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new v({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(o){const b={event:o,listener:null};this.events.push(b),this.hasListeners&&this.hook(b);const D=()=>{this.hasListeners&&this.unhook(b);const A=this.events.indexOf(b);this.events.splice(A,1)};return(0,k.toDisposable)((0,t.once)(D))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(o=>this.hook(o))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(o=>this.unhook(o))}hook(o){o.listener=o.event(b=>this.emitter.fire(b))}unhook(o){o.listener&&o.listener.dispose(),o.listener=null}dispose(){this.emitter.dispose()}}e.EventMultiplexer=n;class a{constructor(){this.buffers=[]}wrapEvent(o){return(b,D,A)=>o(N=>{const G=this.buffers[this.buffers.length-1];G?G.push(()=>b.call(D,N)):b.call(D,N)},void 0,A)}bufferEvents(o){const b=[];this.buffers.push(b);const D=o();return this.buffers.pop(),b.forEach(A=>A()),D}}e.EventBufferer=a;class r{constructor(){this.listening=!1,this.inputEvent=m.None,this.inputEventListener=k.Disposable.None,this.emitter=new v({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(o){this.inputEvent=o,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=o(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}e.Relay=r}),define(ee[22],te([0,1,3]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=Object.freeze(function(P,p){const m=setTimeout(P.bind(p),0);return{dispose(){clearTimeout(m)}}});var k;(function(P){function p(m){return m===P.None||m===P.Cancelled||m instanceof L?!0:!m||typeof m!="object"?!1:typeof m.isCancellationRequested=="boolean"&&typeof m.onCancellationRequested=="function"}P.isCancellationToken=p,P.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:C.Event.None}),P.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:t})})(k=e.CancellationToken||(e.CancellationToken={}));class L{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?t:(this._emitter||(this._emitter=new C.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class R{constructor(p){this._token=void 0,this._parentListener=void 0,this._parentListener=p&&p.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new L),this._token}cancel(){this._token?this._token instanceof L&&this._token.cancel():this._token=k.Cancelled}dispose(p=!1){p&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof L&&this._token.dispose():this._token=k.None}}e.CancellationTokenSource=R}),define(ee[139],te([0,1,22]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CachedFunction=e.LRUCachedFunction=e.Cache=void 0;class t{constructor(P){this.task=P,this.result=null}get(){if(this.result)return this.result;const P=new C.CancellationTokenSource,p=this.task(P.token);return this.result={promise:p,dispose:()=>{this.result=null,P.cancel(),P.dispose()}},this.result}}e.Cache=t;class k{constructor(P){this.fn=P,this.lastCache=void 0,this.lastArgKey=void 0}get(P){const p=JSON.stringify(P);return this.lastArgKey!==p&&(this.lastArgKey=p,this.lastCache=this.fn(P)),this.lastCache}}e.LRUCachedFunction=k;class L{get cachedValues(){return this._map}constructor(P){this.fn=P,this._map=new Map}get(P){if(this._map.has(P))return this._map.get(P);const p=this.fn(P);return this._map.set(P,p),p}}e.CachedFunction=L}),define(ee[26],te([0,1,139,126]),function(j,e,C,t){"use strict";var k;Object.defineProperty(e,"__esModule",{value:!0}),e.InvisibleCharacters=e.AmbiguousCharacters=e.noBreakWhitespace=e.getLeftDeleteOffset=e.GraphemeBreakType=e.getGraphemeBreakType=e.singleLetterHash=e.getNLines=e.uppercaseFirstLetter=e.containsUppercaseCharacter=e.fuzzyContains=e.stripUTF8BOM=e.startsWithUTF8BOM=e.UTF8_BOM_CHARACTER=e.removeAnsiEscapeCodes=e.lcut=e.isEmojiImprecise=e.isFullWidthCharacter=e.containsUnusualLineTerminators=e.UNUSUAL_LINE_TERMINATORS=e.isBasicASCII=e.containsRTL=e.charCount=e.getCharContainingOffset=e.prevCharLength=e.nextCharLength=e.GraphemeIterator=e.CodePointIterator=e.getNextCodePoint=e.computeCodePoint=e.isLowSurrogate=e.isHighSurrogate=e.commonSuffixLength=e.commonPrefixLength=e.startsWithIgnoreCase=e.equalsIgnoreCase=e.isUpperAsciiLetter=e.isLowerAsciiLetter=e.isAsciiDigit=e.compareSubstringIgnoreCase=e.compareIgnoreCase=e.compareSubstring=e.compare=e.replaceAsync=e.lastNonWhitespaceIndex=e.getLeadingWhitespace=e.firstNonWhitespaceIndex=e.splitLines=e.regExpFlags=e.regExpContainsBackreference=e.regExpLeadsToEndlessLoop=e.createRegExp=e.stripWildcards=e.convertSimple2RegExpPattern=e.rtrim=e.ltrim=e.trim=e.truncate=e.count=e.escapeRegExpCharacters=e.escape=e.format2=e.format=e.isFalsyOrWhitespace=void 0;function L(V){return!V||typeof V!="string"?!0:V.trim().length===0}e.isFalsyOrWhitespace=L;const R=/{(\d+)}/g;function P(V,...ce){return ce.length===0?V:V.replace(R,function(ue,me){const be=parseInt(me,10);return isNaN(be)||be<0||be>=ce.length?ue:ce[be]})}e.format=P;const p=/{([^}]+)}/g;function m(V,ce){return V.replace(p,(ue,me)=>ce[me]??ue)}e.format2=m;function y(V){return V.replace(/[<>&]/g,function(ce){switch(ce){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return ce}})}e.escape=y;function I(V){return V.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}e.escapeRegExpCharacters=I;function E(V,ce){let ue=0;const me=ce.charCodeAt(0);for(let be=V.length-1;be>=0;be--)V.charCodeAt(be)===me&&ue++;return ue}e.count=E;function d(V,ce,ue="\u2026"){return V.length<=ce?V:`${V.substr(0,ce)}${ue}`}e.truncate=d;function w(V,ce=" "){const ue=f(V,ce);return v(ue,ce)}e.trim=w;function f(V,ce){if(!V||!ce)return V;const ue=ce.length;if(ue===0||V.length===0)return V;let me=0;for(;V.indexOf(ce,me)===me;)me=me+ue;return V.substring(me)}e.ltrim=f;function v(V,ce){if(!V||!ce)return V;const ue=ce.length,me=V.length;if(ue===0||me===0)return V;let be=me,Le=-1;for(;Le=V.lastIndexOf(ce,be-1),!(Le===-1||Le+ue!==be);){if(Le===0)return"";be=Le}return V.substring(0,be)}e.rtrim=v;function u(V){return V.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}e.convertSimple2RegExpPattern=u;function S(V){return V.replace(/\*/g,"")}e.stripWildcards=S;function g(V,ce,ue={}){if(!V)throw new Error("Cannot create regex from empty string");ce||(V=I(V)),ue.wholeWord&&(/\B/.test(V.charAt(0))||(V="\\b"+V),/\B/.test(V.charAt(V.length-1))||(V=V+"\\b"));let me="";return ue.global&&(me+="g"),ue.matchCase||(me+="i"),ue.multiline&&(me+="m"),ue.unicode&&(me+="u"),new RegExp(V,me)}e.createRegExp=g;function h(V){return V.source==="^"||V.source==="^$"||V.source==="$"||V.source==="^\\s*$"?!1:!!(V.exec("")&&V.lastIndex===0)}e.regExpLeadsToEndlessLoop=h;function l(V){return!!V.match(/([^\\]|^)(\\\\)*\\\d+/)}e.regExpContainsBackreference=l;function i(V){return(V.global?"g":"")+(V.ignoreCase?"i":"")+(V.multiline?"m":"")+(V.unicode?"u":"")}e.regExpFlags=i;function s(V){return V.split(/\r\n|\r|\n/)}e.splitLines=s;function n(V){for(let ce=0,ue=V.length;ce<ue;ce++){const me=V.charCodeAt(ce);if(me!==32&&me!==9)return ce}return-1}e.firstNonWhitespaceIndex=n;function a(V,ce=0,ue=V.length){for(let me=ce;me<ue;me++){const be=V.charCodeAt(me);if(be!==32&&be!==9)return V.substring(ce,me)}return V.substring(ce,ue)}e.getLeadingWhitespace=a;function r(V,ce=V.length-1){for(let ue=ce;ue>=0;ue--){const me=V.charCodeAt(ue);if(me!==32&&me!==9)return ue}return-1}e.lastNonWhitespaceIndex=r;function c(V,ce,ue){const me=[];let be=0;for(const Le of V.matchAll(ce)){if(me.push(V.slice(be,Le.index)),Le.index===void 0)throw new Error("match.index should be defined");be=Le.index+Le[0].length,me.push(ue(Le[0],...Le.slice(1),Le.index,V,Le.groups))}return me.push(V.slice(be)),Promise.all(me).then(Le=>Le.join(""))}e.replaceAsync=c;function o(V,ce){return V<ce?-1:V>ce?1:0}e.compare=o;function b(V,ce,ue=0,me=V.length,be=0,Le=ce.length){for(;ue<me&&be<Le;ue++,be++){const Je=V.charCodeAt(ue),je=ce.charCodeAt(be);if(Je<je)return-1;if(Je>je)return 1}const Be=me-ue,it=Le-be;return Be<it?-1:Be>it?1:0}e.compareSubstring=b;function D(V,ce){return A(V,ce,0,V.length,0,ce.length)}e.compareIgnoreCase=D;function A(V,ce,ue=0,me=V.length,be=0,Le=ce.length){for(;ue<me&&be<Le;ue++,be++){let Je=V.charCodeAt(ue),je=ce.charCodeAt(be);if(Je===je)continue;if(Je>=128||je>=128)return b(V.toLowerCase(),ce.toLowerCase(),ue,me,be,Le);G(Je)&&(Je-=32),G(je)&&(je-=32);const tt=Je-je;if(tt!==0)return tt}const Be=me-ue,it=Le-be;return Be<it?-1:Be>it?1:0}e.compareSubstringIgnoreCase=A;function N(V){return V>=48&&V<=57}e.isAsciiDigit=N;function G(V){return V>=97&&V<=122}e.isLowerAsciiLetter=G;function ae(V){return V>=65&&V<=90}e.isUpperAsciiLetter=ae;function x(V,ce){return V.length===ce.length&&A(V,ce)===0}e.equalsIgnoreCase=x;function Q(V,ce){const ue=ce.length;return ce.length>V.length?!1:A(V,ce,0,ue)===0}e.startsWithIgnoreCase=Q;function re(V,ce){const ue=Math.min(V.length,ce.length);let me;for(me=0;me<ue;me++)if(V.charCodeAt(me)!==ce.charCodeAt(me))return me;return ue}e.commonPrefixLength=re;function ne(V,ce){const ue=Math.min(V.length,ce.length);let me;const be=V.length-1,Le=ce.length-1;for(me=0;me<ue;me++)if(V.charCodeAt(be-me)!==ce.charCodeAt(Le-me))return me;return ue}e.commonSuffixLength=ne;function fe(V){return 55296<=V&&V<=56319}e.isHighSurrogate=fe;function K(V){return 56320<=V&&V<=57343}e.isLowSurrogate=K;function le(V,ce){return(V-55296<<10)+(ce-56320)+65536}e.computeCodePoint=le;function W(V,ce,ue){const me=V.charCodeAt(ue);if(fe(me)&&ue+1<ce){const be=V.charCodeAt(ue+1);if(K(be))return le(me,be)}return me}e.getNextCodePoint=W;function O(V,ce){const ue=V.charCodeAt(ce-1);if(K(ue)&&ce>1){const me=V.charCodeAt(ce-2);if(fe(me))return le(me,ue)}return ue}class U{get offset(){return this._offset}constructor(ce,ue=0){this._str=ce,this._len=ce.length,this._offset=ue}setOffset(ce){this._offset=ce}prevCodePoint(){const ce=O(this._str,this._offset);return this._offset-=ce>=65536?2:1,ce}nextCodePoint(){const ce=W(this._str,this._len,this._offset);return this._offset+=ce>=65536?2:1,ce}eol(){return this._offset>=this._len}}e.CodePointIterator=U;class H{get offset(){return this._iterator.offset}constructor(ce,ue=0){this._iterator=new U(ce,ue)}nextGraphemeLength(){const ce=Fe.getInstance(),ue=this._iterator,me=ue.offset;let be=ce.getGraphemeBreakType(ue.nextCodePoint());for(;!ue.eol();){const Le=ue.offset,Be=ce.getGraphemeBreakType(ue.nextCodePoint());if(Se(be,Be)){ue.setOffset(Le);break}be=Be}return ue.offset-me}prevGraphemeLength(){const ce=Fe.getInstance(),ue=this._iterator,me=ue.offset;let be=ce.getGraphemeBreakType(ue.prevCodePoint());for(;ue.offset>0;){const Le=ue.offset,Be=ce.getGraphemeBreakType(ue.prevCodePoint());if(Se(Be,be)){ue.setOffset(Le);break}be=Be}return me-ue.offset}eol(){return this._iterator.eol()}}e.GraphemeIterator=H;function se(V,ce){return new H(V,ce).nextGraphemeLength()}e.nextCharLength=se;function $(V,ce){return new H(V,ce).prevGraphemeLength()}e.prevCharLength=$;function z(V,ce){ce>0&&K(V.charCodeAt(ce))&&ce--;const ue=ce+se(V,ce);return[ue-$(V,ue),ue]}e.getCharContainingOffset=z;function M(V){const ce=new H(V);let ue=0;for(;!ce.eol();)ue++,ce.nextGraphemeLength();return ue}e.charCount=M;let T;function F(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function _(V){return T||(T=F()),T.test(V)}e.containsRTL=_;const q=/^[\t\n\r\x20-\x7E]*$/;function Y(V){return q.test(V)}e.isBasicASCII=Y,e.UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function B(V){return e.UNUSUAL_LINE_TERMINATORS.test(V)}e.containsUnusualLineTerminators=B;function X(V){return V>=11904&&V<=55215||V>=63744&&V<=64255||V>=65281&&V<=65374}e.isFullWidthCharacter=X;function J(V){return V>=127462&&V<=127487||V===8986||V===8987||V===9200||V===9203||V>=9728&&V<=10175||V===11088||V===11093||V>=127744&&V<=128591||V>=128640&&V<=128764||V>=128992&&V<=129008||V>=129280&&V<=129535||V>=129648&&V<=129782}e.isEmojiImprecise=J;function oe(V,ce){if(V.length<ce)return V;const ue=/\b/g;let me=0;for(;ue.test(V)&&!(V.length-ue.lastIndex<ce);)me=ue.lastIndex,ue.lastIndex+=1;return V.substring(me).replace(/^\s/,"")}e.lcut=oe;const ge=/\x1B\x5B[12]?K/g,De=/\x1b\[\d+m/g,Te=/\x1b\[0?m/g;function ke(V){return V&&(V=V.replace(ge,""),V=V.replace(De,""),V=V.replace(Te,"")),V}e.removeAnsiEscapeCodes=ke,e.UTF8_BOM_CHARACTER=String.fromCharCode(65279);function Ae(V){return!!(V&&V.length>0&&V.charCodeAt(0)===65279)}e.startsWithUTF8BOM=Ae;function ve(V){return Ae(V)?V.substr(1):V}e.stripUTF8BOM=ve;function pe(V,ce){if(!V||!ce||V.length<ce.length)return!1;const ue=ce.length,me=V.toLowerCase();let be=0,Le=-1;for(;be<ue;){const Be=me.indexOf(ce[be],Le+1);if(Be<0)return!1;Le=Be,be++}return!0}e.fuzzyContains=pe;function ye(V,ce=!1){return V?(ce&&(V=V.replace(/\\./g,"")),V.toLowerCase()!==V):!1}e.containsUppercaseCharacter=ye;function Me(V){return V.charAt(0).toUpperCase()+V.slice(1)}e.uppercaseFirstLetter=Me;function Z(V,ce=1){if(ce===0)return"";let ue=-1;do ue=V.indexOf(`
`,ue+1),ce--;while(ce>0&&ue>=0);return ue===-1?V:(V[ue-1]==="\r"&&ue--,V.substr(0,ue))}e.getNLines=Z;function he(V){return V=V%(2*26),V<26?String.fromCharCode(97+V):String.fromCharCode(65+V-26)}e.singleLetterHash=he;function de(V){return Fe.getInstance().getGraphemeBreakType(V)}e.getGraphemeBreakType=de;function Se(V,ce){return V===0?ce!==5&&ce!==7:V===2&&ce===3?!1:V===4||V===2||V===3||ce===4||ce===2||ce===3?!0:!(V===8&&(ce===8||ce===9||ce===11||ce===12)||(V===11||V===9)&&(ce===9||ce===10)||(V===12||V===10)&&ce===10||ce===5||ce===13||ce===7||V===1||V===13&&ce===14||V===6&&ce===6)}var Ie;(function(V){V[V.Other=0]="Other",V[V.Prepend=1]="Prepend",V[V.CR=2]="CR",V[V.LF=3]="LF",V[V.Control=4]="Control",V[V.Extend=5]="Extend",V[V.Regional_Indicator=6]="Regional_Indicator",V[V.SpacingMark=7]="SpacingMark",V[V.L=8]="L",V[V.V=9]="V",V[V.T=10]="T",V[V.LV=11]="LV",V[V.LVT=12]="LVT",V[V.ZWJ=13]="ZWJ",V[V.Extended_Pictographic=14]="Extended_Pictographic"})(Ie=e.GraphemeBreakType||(e.GraphemeBreakType={}));class Fe{static getInstance(){return Fe._INSTANCE||(Fe._INSTANCE=new Fe),Fe._INSTANCE}constructor(){this._data=Oe()}getGraphemeBreakType(ce){if(ce<32)return ce===10?3:ce===13?2:4;if(ce<127)return 0;const ue=this._data,me=ue.length/3;let be=1;for(;be<=me;)if(ce<ue[3*be])be=2*be;else if(ce>ue[3*be+1])be=2*be+1;else return ue[3*be+2];return 0}}Fe._INSTANCE=null;function Oe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function qe(V,ce){if(V===0)return 0;const ue=_e(V,ce);if(ue!==void 0)return ue;const me=new U(ce,V);return me.prevCodePoint(),me.offset}e.getLeftDeleteOffset=qe;function _e(V,ce){const ue=new U(ce,V);let me=ue.prevCodePoint();for(;Ne(me)||me===65039||me===8419;){if(ue.offset===0)return;me=ue.prevCodePoint()}if(!J(me))return;let be=ue.offset;return be>0&&ue.prevCodePoint()===8205&&(be=ue.offset),be}function Ne(V){return 127995<=V&&V<=127999}var xe;(function(V){V[V.zwj=8205]="zwj",V[V.emojiVariantSelector=65039]="emojiVariantSelector",V[V.enclosingKeyCap=8419]="enclosingKeyCap"})(xe||(xe={})),e.noBreakWhitespace="\xA0";class ze{static getInstance(ce){return ze.cache.get(Array.from(ce))}static getLocales(){return ze._locales.getValue()}constructor(ce){this.confusableDictionary=ce}isAmbiguous(ce){return this.confusableDictionary.has(ce)}getPrimaryConfusable(ce){return this.confusableDictionary.get(ce)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}e.AmbiguousCharacters=ze,k=ze,ze.ambiguousCharacterData=new t.Lazy(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),ze.cache=new C.LRUCachedFunction(V=>{function ce(je){const tt=new Map;for(let nt=0;nt<je.length;nt+=2)tt.set(je[nt],je[nt+1]);return tt}function ue(je,tt){const nt=new Map(je);for(const[lt,at]of tt)nt.set(lt,at);return nt}function me(je,tt){if(!je)return tt;const nt=new Map;for(const[lt,at]of je)tt.has(lt)&&nt.set(lt,at);return nt}const be=k.ambiguousCharacterData.getValue();let Le=V.filter(je=>!je.startsWith("_")&&je in be);Le.length===0&&(Le=["_default"]);let Be;for(const je of Le){const tt=ce(be[je]);Be=me(Be,tt)}const it=ce(be._common),Je=ue(it,Be);return new ze(Je)}),ze._locales=new t.Lazy(()=>Object.keys(ze.ambiguousCharacterData.getValue()).filter(V=>!V.startsWith("_")));class Ke{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Ke.getRawData())),this._data}static isInvisibleCharacter(ce){return Ke.getData().has(ce)}static get codePoints(){return Ke.getData()}}e.InvisibleCharacters=Ke,Ke._data=void 0}),define(ee[30],te([0,1,9,4,26,12]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function R(r){return r===47||r===92}e.isPathSeparator=R;function P(r){return r.replace(/[\\/]/g,C.posix.sep)}e.toSlashes=P;function p(r){return r.indexOf("/")===-1&&(r=P(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}e.toPosixPath=p;function m(r,c=C.posix.sep){if(!r)return"";const o=r.length,b=r.charCodeAt(0);if(R(b)){if(R(r.charCodeAt(1))&&!R(r.charCodeAt(2))){let A=3;const N=A;for(;A<o&&!R(r.charCodeAt(A));A++);if(N!==A&&!R(r.charCodeAt(A+1))){for(A+=1;A<o;A++)if(R(r.charCodeAt(A)))return r.slice(0,A+1).replace(/[\\/]/g,c)}}return c}else if(u(b)&&r.charCodeAt(1)===58)return R(r.charCodeAt(2))?r.slice(0,2)+c:r.slice(0,2);let D=r.indexOf("://");if(D!==-1){for(D+=3;D<o;D++)if(R(r.charCodeAt(D)))return r.slice(0,D+1)}return""}e.getRoot=m;function y(r){if(!t.isWindows||!r||r.length<5)return!1;let c=r.charCodeAt(0);if(c!==92||(c=r.charCodeAt(1),c!==92))return!1;let o=2;const b=o;for(;o<r.length&&(c=r.charCodeAt(o),c!==92);o++);return!(b===o||(c=r.charCodeAt(o+1),isNaN(c)||c===92))}e.isUNC=y;const I=/[\\/:\*\?"<>\|]/g,E=/[\\/]/g,d=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function w(r,c=t.isWindows){const o=c?I:E;return!(!r||r.length===0||/^\s+$/.test(r)||(o.lastIndex=0,o.test(r))||c&&d.test(r)||r==="."||r===".."||c&&r[r.length-1]==="."||c&&r.length!==r.trim().length||r.length>255)}e.isValidBasename=w;function f(r,c,o){const b=r===c;return!o||b?b:!r||!c?!1:(0,k.equalsIgnoreCase)(r,c)}e.isEqual=f;function v(r,c,o,b=C.sep){if(r===c)return!0;if(!r||!c||c.length>r.length)return!1;if(o){if(!(0,k.startsWithIgnoreCase)(r,c))return!1;if(c.length===r.length)return!0;let A=c.length;return c.charAt(c.length-1)===b&&A--,r.charAt(A)===b}return c.charAt(c.length-1)!==b&&(c+=b),r.indexOf(c)===0}e.isEqualOrParent=v;function u(r){return r>=65&&r<=90||r>=97&&r<=122}e.isWindowsDriveLetter=u;function S(r,c){return t.isWindows&&r.endsWith(":")&&(r+=C.sep),(0,C.isAbsolute)(r)||(r=(0,C.join)(c,r)),r=(0,C.normalize)(r),t.isWindows?(r=(0,k.rtrim)(r,C.sep),r.endsWith(":")&&(r+=C.sep)):(r=(0,k.rtrim)(r,C.sep),r||(r=C.sep)),r}e.sanitizeFilePath=S;function g(r){const c=(0,C.normalize)(r);return t.isWindows?r.length>3?!1:h(c)&&(r.length===2||c.charCodeAt(2)===92):c===C.posix.sep}e.isRootOrDriveLetter=g;function h(r,c=t.isWindows){return c?u(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}e.hasDriveLetter=h;function l(r){return h(r)?r[0]:void 0}e.getDriveLetter=l;function i(r,c,o){return c.length>r.length?-1:r===c?0:(o&&(r=r.toLowerCase(),c=c.toLowerCase()),r.indexOf(c))}e.indexOfPath=i;function s(r){const c=r.split(":");let o,b,D;for(const A of c){const N=Number(A);(0,L.isNumber)(N)?b===void 0?b=N:D===void 0&&(D=N):o=o?[o,A].join(":"):A}if(!o)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:o,line:b!==void 0?b:void 0,column:D!==void 0?D:b!==void 0?1:void 0}}e.parseLineAndColumnAware=s;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function a(r,c,o=8){let b="";for(let A=0;A<o;A++)b+=n.charAt(Math.floor(Math.random()*n.length));let D;return c?D=`${c}-${b}`:D=b,r?(0,C.join)(r,D):D}e.randomPath=a}),define(ee[68],te([0,1,26]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringSHA1=e.toHexString=e.Hasher=e.stringHash=e.numberHash=e.doHash=e.hash=void 0;function t(u){return k(u,0)}e.hash=t;function k(u,S){switch(typeof u){case"object":return u===null?L(349,S):Array.isArray(u)?p(u,S):m(u,S);case"string":return P(u,S);case"boolean":return R(u,S);case"number":return L(u,S);case"undefined":return L(937,S);default:return L(617,S)}}e.doHash=k;function L(u,S){return(S<<5)-S+u|0}e.numberHash=L;function R(u,S){return L(u?433:863,S)}function P(u,S){S=L(149417,S);for(let g=0,h=u.length;g<h;g++)S=L(u.charCodeAt(g),S);return S}e.stringHash=P;function p(u,S){return S=L(104579,S),u.reduce((g,h)=>k(h,g),S)}function m(u,S){return S=L(181387,S),Object.keys(u).sort().reduce((g,h)=>(g=P(h,g),k(u[h],g)),S)}class y{constructor(){this._value=0}get value(){return this._value}hash(S){return this._value=k(S,this._value),this._value}}e.Hasher=y;var I;(function(u){u[u.BLOCK_SIZE=64]="BLOCK_SIZE",u[u.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(I||(I={}));function E(u,S,g=32){const h=g-S,l=~((1<<h)-1);return(u<<S|(l&u)>>>h)>>>0}function d(u,S=0,g=u.byteLength,h=0){for(let l=0;l<g;l++)u[S+l]=h}function w(u,S,g="0"){for(;u.length<S;)u=g+u;return u}function f(u,S=32){return u instanceof ArrayBuffer?Array.from(new Uint8Array(u)).map(g=>g.toString(16).padStart(2,"0")).join(""):w((u>>>0).toString(16),S/4)}e.toHexString=f;class v{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(S){const g=S.length;if(g===0)return;const h=this._buff;let l=this._buffLen,i=this._leftoverHighSurrogate,s,n;for(i!==0?(s=i,n=-1,i=0):(s=S.charCodeAt(0),n=0);;){let a=s;if(C.isHighSurrogate(s))if(n+1<g){const r=S.charCodeAt(n+1);C.isLowSurrogate(r)?(n++,a=C.computeCodePoint(s,r)):a=65533}else{i=s;break}else C.isLowSurrogate(s)&&(a=65533);if(l=this._push(h,l,a),n++,n<g)s=S.charCodeAt(n);else break}this._buffLen=l,this._leftoverHighSurrogate=i}_push(S,g,h){return h<128?S[g++]=h:h<2048?(S[g++]=192|(h&1984)>>>6,S[g++]=128|(h&63)>>>0):h<65536?(S[g++]=224|(h&61440)>>>12,S[g++]=128|(h&4032)>>>6,S[g++]=128|(h&63)>>>0):(S[g++]=240|(h&1835008)>>>18,S[g++]=128|(h&258048)>>>12,S[g++]=128|(h&4032)>>>6,S[g++]=128|(h&63)>>>0),g>=64&&(this._step(),g-=64,this._totalLen+=64,S[0]=S[64+0],S[1]=S[64+1],S[2]=S[64+2]),g}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),f(this._h0)+f(this._h1)+f(this._h2)+f(this._h3)+f(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,d(this._buff,this._buffLen),this._buffLen>56&&(this._step(),d(this._buff));const S=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(S/4294967296),!1),this._buffDV.setUint32(60,S%4294967296,!1),this._step()}_step(){const S=v._bigBlock32,g=this._buffDV;for(let o=0;o<64;o+=4)S.setUint32(o,g.getUint32(o,!1),!1);for(let o=64;o<320;o+=4)S.setUint32(o,E(S.getUint32(o-12,!1)^S.getUint32(o-32,!1)^S.getUint32(o-56,!1)^S.getUint32(o-64,!1),1),!1);let h=this._h0,l=this._h1,i=this._h2,s=this._h3,n=this._h4,a,r,c;for(let o=0;o<80;o++)o<20?(a=l&i|~l&s,r=1518500249):o<40?(a=l^i^s,r=1859775393):o<60?(a=l&i|l&s|i&s,r=2400959708):(a=l^i^s,r=3395469782),c=E(h,5)+a+n+r+S.getUint32(o*4,!1)&4294967295,n=s,s=i,i=E(l,30),l=h,h=c;this._h0=this._h0+h&4294967295,this._h1=this._h1+l&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+n&4294967295}}e.StringSHA1=v,v._bigBlock32=new DataView(new ArrayBuffer(320))}),define(ee[98],te([0,1,26]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t;(function(k){k[k.Ignore=0]="Ignore",k[k.Info=1]="Info",k[k.Warning=2]="Warning",k[k.Error=3]="Error"})(t||(t={})),function(k){const L="error",R="warning",P="warn",p="info",m="ignore";function y(E){return E?C.equalsIgnoreCase(L,E)?k.Error:C.equalsIgnoreCase(R,E)||C.equalsIgnoreCase(P,E)?k.Warning:C.equalsIgnoreCase(p,E)?k.Info:k.Ignore:k.Ignore}k.fromValue=y;function I(E){switch(E){case k.Error:return L;case k.Warning:return R;case k.Info:return p;default:return m}}k.toString=I}(t||(t={})),e.default=t}),define(ee[60],te([0,1,24,26]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=void 0;class k{constructor(){this._value="",this._pos=0}reset(d){return this._value=d,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(d){const w=d.charCodeAt(0),f=this._value.charCodeAt(this._pos);return w-f}value(){return this._value[this._pos]}}e.StringIterator=k;class L{constructor(d=!0){this._caseSensitive=d}reset(d){return this._value=d,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let d=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(d)this._from++;else break;else d=!1;return this}cmp(d){return this._caseSensitive?(0,t.compareSubstring)(d,this._value,0,d.length,this._from,this._to):(0,t.compareSubstringIgnoreCase)(d,this._value,0,d.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=L;class R{constructor(d=!0,w=!0){this._splitOnBackslash=d,this._caseSensitive=w}reset(d){this._from=0,this._to=0,this._value=d,this._valueLen=d.length;for(let w=d.length-1;w>=0;w--,this._valueLen--){const f=this._value.charCodeAt(w);if(!(f===47||this._splitOnBackslash&&f===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let d=!0;for(;this._to<this._valueLen;this._to++){const w=this._value.charCodeAt(this._to);if(w===47||this._splitOnBackslash&&w===92)if(d)this._from++;else break;else d=!1}return this}cmp(d){return this._caseSensitive?(0,t.compareSubstring)(d,this._value,0,d.length,this._from,this._to):(0,t.compareSubstringIgnoreCase)(d,this._value,0,d.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=R;var P;(function(E){E[E.Scheme=1]="Scheme",E[E.Authority=2]="Authority",E[E.Path=3]="Path",E[E.Query=4]="Query",E[E.Fragment=5]="Fragment"})(P||(P={}));class p{constructor(d,w){this._ignorePathCasing=d,this._ignoreQueryAndFragment=w,this._states=[],this._stateIdx=0}reset(d){return this._value=d,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new R(!1,!this._ignorePathCasing(d)),this._pathIterator.reset(d.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(d)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(d){if(this._states[this._stateIdx]===1)return(0,t.compareIgnoreCase)(d,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,t.compareIgnoreCase)(d,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(d);if(this._states[this._stateIdx]===4)return(0,t.compare)(d,this._value.query);if(this._states[this._stateIdx]===5)return(0,t.compare)(d,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=p;class m{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const d=this.right;return this.right=d.left,d.left=this,this.updateHeight(),d.updateHeight(),d}rotateRight(){const d=this.left;return this.left=d.right,d.right=this,this.updateHeight(),d.updateHeight(),d}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var y;(function(E){E[E.Left=-1]="Left",E[E.Mid=0]="Mid",E[E.Right=1]="Right"})(y||(y={}));class I{static forUris(d=()=>!1,w=()=>!1){return new I(new p(d,w))}static forPaths(d=!1){return new I(new R(void 0,!d))}static forStrings(){return new I(new k)}static forConfigKeys(){return new I(new L)}constructor(d){this._iter=d}clear(){this._root=void 0}fill(d,w){if(w){const f=w.slice(0);(0,C.shuffle)(f);for(const v of f)this.set(v,d)}else{const f=d.slice(0);(0,C.shuffle)(f);for(const v of f)this.set(v[0],v[1])}}set(d,w){const f=this._iter.reset(d);let v;this._root||(this._root=new m,this._root.segment=f.value());const u=[];for(v=this._root;;){const g=f.cmp(v.segment);if(g>0)v.left||(v.left=new m,v.left.segment=f.value()),u.push([-1,v]),v=v.left;else if(g<0)v.right||(v.right=new m,v.right.segment=f.value()),u.push([1,v]),v=v.right;else if(f.hasNext())f.next(),v.mid||(v.mid=new m,v.mid.segment=f.value()),u.push([0,v]),v=v.mid;else break}const S=v.value;v.value=w,v.key=d;for(let g=u.length-1;g>=0;g--){const h=u[g][1];h.updateHeight();const l=h.balanceFactor();if(l<-1||l>1){const i=u[g][0],s=u[g+1][0];if(i===1&&s===1)u[g][1]=h.rotateLeft();else if(i===-1&&s===-1)u[g][1]=h.rotateRight();else if(i===1&&s===-1)h.right=u[g+1][1]=u[g+1][1].rotateRight(),u[g][1]=h.rotateLeft();else if(i===-1&&s===1)h.left=u[g+1][1]=u[g+1][1].rotateLeft(),u[g][1]=h.rotateRight();else throw new Error;if(g>0)switch(u[g-1][0]){case-1:u[g-1][1].left=u[g][1];break;case 1:u[g-1][1].right=u[g][1];break;case 0:u[g-1][1].mid=u[g][1];break}else this._root=u[0][1]}}return S}get(d){return this._getNode(d)?.value}_getNode(d){const w=this._iter.reset(d);let f=this._root;for(;f;){const v=w.cmp(f.segment);if(v>0)f=f.left;else if(v<0)f=f.right;else if(w.hasNext())w.next(),f=f.mid;else break}return f}has(d){const w=this._getNode(d);return!(w?.value===void 0&&w?.mid===void 0)}delete(d){return this._delete(d,!1)}deleteSuperstr(d){return this._delete(d,!0)}_delete(d,w){const f=this._iter.reset(d),v=[];let u=this._root;for(;u;){const S=f.cmp(u.segment);if(S>0)v.push([-1,u]),u=u.left;else if(S<0)v.push([1,u]),u=u.right;else if(f.hasNext())f.next(),v.push([0,u]),u=u.mid;else break}if(!!u){if(w?(u.left=void 0,u.mid=void 0,u.right=void 0,u.height=1):(u.key=void 0,u.value=void 0),!u.mid&&!u.value)if(u.left&&u.right){const S=this._min(u.right);if(S.key){const{key:g,value:h,segment:l}=S;this._delete(S.key,!1),u.key=g,u.value=h,u.segment=l}}else{const S=u.left??u.right;if(v.length>0){const[g,h]=v[v.length-1];switch(g){case-1:h.left=S;break;case 0:h.mid=S;break;case 1:h.right=S;break}}else this._root=S}for(let S=v.length-1;S>=0;S--){const g=v[S][1];g.updateHeight();const h=g.balanceFactor();if(h>1?(g.right.balanceFactor()>=0||(g.right=g.right.rotateRight()),v[S][1]=g.rotateLeft()):h<-1&&(g.left.balanceFactor()<=0||(g.left=g.left.rotateLeft()),v[S][1]=g.rotateRight()),S>0)switch(v[S-1][0]){case-1:v[S-1][1].left=v[S][1];break;case 1:v[S-1][1].right=v[S][1];break;case 0:v[S-1][1].mid=v[S][1];break}else this._root=v[0][1]}}}_min(d){for(;d.left;)d=d.left;return d}findSubstr(d){const w=this._iter.reset(d);let f=this._root,v;for(;f;){const u=w.cmp(f.segment);if(u>0)f=f.left;else if(u<0)f=f.right;else if(w.hasNext())w.next(),v=f.value||v,f=f.mid;else break}return f&&f.value||v}findSuperstr(d){const w=this._iter.reset(d);let f=this._root;for(;f;){const v=w.cmp(f.segment);if(v>0)f=f.left;else if(v<0)f=f.right;else if(w.hasNext())w.next(),f=f.mid;else return f.mid?this._entries(f.mid):void 0}}forEach(d){for(const[w,f]of this)d(f,w)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(d){const w=[];return this._dfsEntries(d,w),w[Symbol.iterator]()}_dfsEntries(d,w){!d||(d.left&&this._dfsEntries(d.left,w),d.value&&w.push([d.key,d.value]),d.mid&&this._dfsEntries(d.mid,w),d.right&&this._dfsEntries(d.right,w))}_isBalanced(){const d=w=>{if(!w)return!0;const f=w.balanceFactor();return f<-1||f>1?!1:d(w.left)&&d(w.right)};return d(this._root)}}e.TernarySearchTree=I}),define(ee[7],te([0,1,9,4]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uriToFsPath=e.URI=void 0;const k=/^\w[\w\d+.-]*$/,L=/^\//,R=/^\/\//;function P(n,a){if(!n.scheme&&a)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!k.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!L.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(R.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function p(n,a){return!n&&!a?"file":n}function m(n,a){switch(n){case"https":case"http":case"file":a?a[0]!==I&&(a=I+a):a=I;break}return a}const y="",I="/",E=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class d{static isUri(a){return a instanceof d?!0:a?typeof a.authority=="string"&&typeof a.fragment=="string"&&typeof a.path=="string"&&typeof a.query=="string"&&typeof a.scheme=="string"&&typeof a.fsPath=="string"&&typeof a.with=="function"&&typeof a.toString=="function":!1}constructor(a,r,c,o,b,D=!1){typeof a=="object"?(this.scheme=a.scheme||y,this.authority=a.authority||y,this.path=a.path||y,this.query=a.query||y,this.fragment=a.fragment||y):(this.scheme=p(a,D),this.authority=r||y,this.path=m(this.scheme,c||y),this.query=o||y,this.fragment=b||y,P(this,D))}get fsPath(){return g(this,!1)}with(a){if(!a)return this;let{scheme:r,authority:c,path:o,query:b,fragment:D}=a;return r===void 0?r=this.scheme:r===null&&(r=y),c===void 0?c=this.authority:c===null&&(c=y),o===void 0?o=this.path:o===null&&(o=y),b===void 0?b=this.query:b===null&&(b=y),D===void 0?D=this.fragment:D===null&&(D=y),r===this.scheme&&c===this.authority&&o===this.path&&b===this.query&&D===this.fragment?this:new f(r,c,o,b,D)}static parse(a,r=!1){const c=E.exec(a);return c?new f(c[2]||y,s(c[4]||y),s(c[5]||y),s(c[7]||y),s(c[9]||y),r):new f(y,y,y,y,y)}static file(a){let r=y;if(t.isWindows&&(a=a.replace(/\\/g,I)),a[0]===I&&a[1]===I){const c=a.indexOf(I,2);c===-1?(r=a.substring(2),a=I):(r=a.substring(2,c),a=a.substring(c)||I)}return new f("file",r,a,y,y)}static from(a){const r=new f(a.scheme,a.authority,a.path,a.query,a.fragment);return P(r,!0),r}static joinPath(a,...r){if(!a.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let c;return t.isWindows&&a.scheme==="file"?c=d.file(C.win32.join(g(a,!0),...r)).path:c=C.posix.join(a.path,...r),a.with({path:c})}toString(a=!1){return h(this,a)}toJSON(){return this}static revive(a){if(a){if(a instanceof d)return a;{const r=new f(a);return r._formatted=a.external,r._fsPath=a._sep===w?a.fsPath:null,r}}else return a}}e.URI=d;const w=t.isWindows?1:void 0;class f extends d{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=g(this,!1)),this._fsPath}toString(a=!1){return a?h(this,!0):(this._formatted||(this._formatted=h(this,!1)),this._formatted)}toJSON(){const a={$mid:1};return this._fsPath&&(a.fsPath=this._fsPath,a._sep=w),this._formatted&&(a.external=this._formatted),this.path&&(a.path=this.path),this.scheme&&(a.scheme=this.scheme),this.authority&&(a.authority=this.authority),this.query&&(a.query=this.query),this.fragment&&(a.fragment=this.fragment),a}}const v={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function u(n,a){let r,c=-1;for(let o=0;o<n.length;o++){const b=n.charCodeAt(o);if(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||b===45||b===46||b===95||b===126||a&&b===47)c!==-1&&(r+=encodeURIComponent(n.substring(c,o)),c=-1),r!==void 0&&(r+=n.charAt(o));else{r===void 0&&(r=n.substr(0,o));const D=v[b];D!==void 0?(c!==-1&&(r+=encodeURIComponent(n.substring(c,o)),c=-1),r+=D):c===-1&&(c=o)}}return c!==-1&&(r+=encodeURIComponent(n.substring(c))),r!==void 0?r:n}function S(n){let a;for(let r=0;r<n.length;r++){const c=n.charCodeAt(r);c===35||c===63?(a===void 0&&(a=n.substr(0,r)),a+=v[c]):a!==void 0&&(a+=n[r])}return a!==void 0?a:n}function g(n,a){let r;return n.authority&&n.path.length>1&&n.scheme==="file"?r=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?a?r=n.path.substr(1):r=n.path[1].toLowerCase()+n.path.substr(2):r=n.path,t.isWindows&&(r=r.replace(/\//g,"\\")),r}e.uriToFsPath=g;function h(n,a){const r=a?S:u;let c="",{scheme:o,authority:b,path:D,query:A,fragment:N}=n;if(o&&(c+=o,c+=":"),(b||o==="file")&&(c+=I,c+=I),b){let G=b.indexOf("@");if(G!==-1){const ae=b.substr(0,G);b=b.substr(G+1),G=ae.indexOf(":"),G===-1?c+=r(ae,!1):(c+=r(ae.substr(0,G),!1),c+=":",c+=r(ae.substr(G+1),!1)),c+="@"}b=b.toLowerCase(),G=b.indexOf(":"),G===-1?c+=r(b,!1):(c+=r(b.substr(0,G),!1),c+=b.substr(G))}if(D){if(D.length>=3&&D.charCodeAt(0)===47&&D.charCodeAt(2)===58){const G=D.charCodeAt(1);G>=65&&G<=90&&(D=`/${String.fromCharCode(G+32)}:${D.substr(3)}`)}else if(D.length>=2&&D.charCodeAt(1)===58){const G=D.charCodeAt(0);G>=65&&G<=90&&(D=`${String.fromCharCode(G+32)}:${D.substr(2)}`)}c+=r(D,!0)}return A&&(c+="?",c+=r(A,!1)),N&&(c+="#",c+=a?N:u(N,!1)),c}function l(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+l(n.substr(3)):n}}const i=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function s(n){return n.match(i)?n.replace(i,a=>l(a)):n}}),define(ee[140],te([0,1,7]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.getFirstFrame=e.parse=e.isRemoteConsoleLog=void 0;function t(m){const y=m;return y&&typeof y.type=="string"&&typeof y.severity=="string"}e.isRemoteConsoleLog=t;function k(m){const y=[];let I;try{const E=JSON.parse(m.arguments),d=E[E.length-1];d&&d.__$stack&&(E.pop(),I=d.__$stack),y.push(...E)}catch{y.push("Unable to log remote console arguments",m.arguments)}return{args:y,stack:I}}e.parse=k;function L(m){if(typeof m!="string")return L(k(m).stack);const y=m;if(y){const I=R(y),E=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(I||"");if(E&&E.length===4)return{uri:C.URI.file(E[1]),line:Number(E[2]),column:Number(E[3])}}}e.getFirstFrame=L;function R(m){if(!m)return m;const y=m.indexOf(`
`);return y===-1?m:m.substring(0,y)}function P(m,y){const{args:I,stack:E}=k(m),d=typeof I[0]=="string"&&I.length===1;let w=R(E);w&&(w=`(${w.trim()})`);let f=[];if(typeof I[0]=="string"?w&&d?f=[`%c[${y}] %c${I[0]} %c${w}`,p("blue"),p(""),p("grey")]:f=[`%c[${y}] %c${I[0]}`,p("blue"),p(""),...I.slice(1)]:f=[`%c[${y}]%`,p("blue"),...I],w&&!d&&f.push(w),typeof console[m.severity]!="function")throw new Error("Unknown console method");console[m.severity].apply(console,f)}e.log=P;function p(m){return`color: ${m}`}}),define(ee[69],te([0,1,17,26,7]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.revive=e.parse=e.stringify=void 0;function L(m){return JSON.stringify(m,P)}e.stringify=L;function R(m){let y=JSON.parse(m);return y=p(y),y}e.parse=R;function P(m,y){return y instanceof RegExp?{$mid:2,source:y.source,flags:(0,t.regExpFlags)(y)}:y}function p(m,y=0){if(!m||y>200)return m;if(typeof m=="object"){switch(m.$mid){case 1:return k.URI.revive(m);case 2:return new RegExp(m.source,m.flags);case 16:return new Date(m.source)}if(m instanceof C.VSBuffer||m instanceof Uint8Array)return m;if(Array.isArray(m))for(let I=0;I<m.length;++I)m[I]=p(m[I],y+1);else for(const I in m)Object.hasOwnProperty.call(m,I)&&(m[I]=p(m[I],y+1))}return m}e.revive=p}),define(ee[14],te([0,1,4,7]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var k;(function(p){p.inMemory="inmemory",p.vscode="vscode",p.internal="private",p.walkThrough="walkThrough",p.walkThroughSnippet="walkThroughSnippet",p.http="http",p.https="https",p.file="file",p.mailto="mailto",p.untitled="untitled",p.data="data",p.command="command",p.vscodeRemote="vscode-remote",p.vscodeRemoteResource="vscode-remote-resource",p.vscodeUserData="vscode-userdata",p.vscodeCustomEditor="vscode-custom-editor",p.vscodeNotebook="vscode-notebook",p.vscodeNotebookCell="vscode-notebook-cell",p.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",p.vscodeNotebookCellOutput="vscode-notebook-cell-output",p.vscodeInteractive="vscode-interactive",p.vscodeInteractiveInput="vscode-interactive-input",p.vscodeSettings="vscode-settings",p.vscodeWorkspaceTrust="vscode-workspace-trust",p.vscodeTerminal="vscode-terminal",p.webviewPanel="webview-panel",p.vscodeWebview="vscode-webview",p.extension="extension",p.vscodeFileResource="vscode-file",p.tmp="tmp",p.vsls="vsls",p.vscodeSourceControl="vscode-scm"})(k=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class L{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${k.vscodeRemoteResource}`}setPreferredWebSchema(m){this._preferredWebSchema=m}setDelegate(m){this._delegate=m}setServerRootPath(m){this._remoteResourcesPath=`${m}/${k.vscodeRemoteResource}`}set(m,y,I){this._hosts[m]=y,this._ports[m]=I}setConnectionToken(m,y){this._connectionTokens[m]=y}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(m){if(this._delegate)return this._delegate(m);const y=m.authority;let I=this._hosts[y];I&&I.indexOf(":")!==-1&&I.indexOf("[")===-1&&(I=`[${I}]`);const E=this._ports[y],d=this._connectionTokens[y];let w=`path=${encodeURIComponent(m.path)}`;return typeof d=="string"&&(w+=`&${e.connectionTokenQueryName}=${encodeURIComponent(d)}`),t.URI.from({scheme:C.isWeb?this._preferredWebSchema:k.vscodeRemoteResource,authority:`${I}:${E}`,path:this._remoteResourcesPath,query:w})}}e.RemoteAuthorities=new L,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class R{asBrowserUri(m){const y=this.toUri(m,j);return this.uriToBrowserUri(y)}uriToBrowserUri(m){return m.scheme===k.vscodeRemote?e.RemoteAuthorities.rewrite(m):m.scheme===k.file&&(C.isNative||C.isWebWorker&&C.globals.origin===`${k.vscodeFileResource}://${R.FALLBACK_AUTHORITY}`)?m.with({scheme:k.vscodeFileResource,authority:m.authority||R.FALLBACK_AUTHORITY,query:null,fragment:null}):m}asFileUri(m){const y=this.toUri(m,j);return this.uriToFileUri(y)}uriToFileUri(m){return m.scheme===k.vscodeFileResource?m.with({scheme:k.file,authority:m.authority!==R.FALLBACK_AUTHORITY?m.authority:null,query:null,fragment:null}):m}toUri(m,y){return t.URI.isUri(m)?m:t.URI.parse(y.toUrl(m))}}R.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new R;var P;(function(p){const m=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);p.CoopAndCoep=Object.freeze(m.get("3"));const y="vscode-coi";function I(d){let w;typeof d=="string"?w=new URL(d).searchParams:d instanceof URL?w=d.searchParams:t.URI.isUri(d)&&(w=new URL(d.toString(!0)).searchParams);const f=w?.get(y);if(!!f)return m.get(f)}p.getHeadersFromQuery=I;function E(d,w,f){if(!globalThis.crossOriginIsolated)return;const v=w&&f?"3":f?"2":"1";d instanceof URLSearchParams?d.set(y,v):d[y]=v}p.addSearchParam=E})(P=e.COI||(e.COI={}))}),define(ee[20],te([0,1,30,14,9,4,26,7]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function p(d){return(0,P.uriToFsPath)(d,!0)}e.originalFSPath=p;class m{constructor(w){this._ignorePathCasing=w}compare(w,f,v=!1){return w===f?0:(0,R.compare)(this.getComparisonKey(w,v),this.getComparisonKey(f,v))}isEqual(w,f,v=!1){return w===f?!0:!w||!f?!1:this.getComparisonKey(w,v)===this.getComparisonKey(f,v)}getComparisonKey(w,f=!1){return w.with({path:this._ignorePathCasing(w)?w.path.toLowerCase():void 0,fragment:f?null:void 0}).toString()}ignorePathCasing(w){return this._ignorePathCasing(w)}isEqualOrParent(w,f,v=!1){if(w.scheme===f.scheme){if(w.scheme===t.Schemas.file)return C.isEqualOrParent(p(w),p(f),this._ignorePathCasing(w))&&w.query===f.query&&(v||w.fragment===f.fragment);if((0,e.isEqualAuthority)(w.authority,f.authority))return C.isEqualOrParent(w.path,f.path,this._ignorePathCasing(w),"/")&&w.query===f.query&&(v||w.fragment===f.fragment)}return!1}joinPath(w,...f){return P.URI.joinPath(w,...f)}basenameOrAuthority(w){return(0,e.basename)(w)||w.authority}basename(w){return k.posix.basename(w.path)}extname(w){return k.posix.extname(w.path)}dirname(w){if(w.path.length===0)return w;let f;return w.scheme===t.Schemas.file?f=P.URI.file(k.dirname(p(w))).path:(f=k.posix.dirname(w.path),w.authority&&f.length&&f.charCodeAt(0)!==47&&(console.error(`dirname("${w.toString})) resulted in a relative path`),f="/")),w.with({path:f})}normalizePath(w){if(!w.path.length)return w;let f;return w.scheme===t.Schemas.file?f=P.URI.file(k.normalize(p(w))).path:f=k.posix.normalize(w.path),w.with({path:f})}relativePath(w,f){if(w.scheme!==f.scheme||!(0,e.isEqualAuthority)(w.authority,f.authority))return;if(w.scheme===t.Schemas.file){const S=k.relative(p(w),p(f));return L.isWindows?C.toSlashes(S):S}let v=w.path||"/";const u=f.path||"/";if(this._ignorePathCasing(w)){let S=0;for(const g=Math.min(v.length,u.length);S<g&&!(v.charCodeAt(S)!==u.charCodeAt(S)&&v.charAt(S).toLowerCase()!==u.charAt(S).toLowerCase());S++);v=u.substr(0,S)+v.substr(S)}return k.posix.relative(v,u)}resolvePath(w,f){if(w.scheme===t.Schemas.file){const v=P.URI.file(k.resolve(p(w),f));return w.with({authority:v.authority,path:v.path})}return f=C.toPosixPath(f),w.with({path:k.posix.resolve(w.path,f)})}isAbsolutePath(w){return!!w.path&&w.path[0]==="/"}isEqualAuthority(w,f){return w===f||w!==void 0&&f!==void 0&&(0,R.equalsIgnoreCase)(w,f)}hasTrailingPathSeparator(w,f=k.sep){if(w.scheme===t.Schemas.file){const v=p(w);return v.length>C.getRoot(v).length&&v[v.length-1]===f}else{const v=w.path;return v.length>1&&v.charCodeAt(v.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(w.fsPath)}}removeTrailingPathSeparator(w,f=k.sep){return(0,e.hasTrailingPathSeparator)(w,f)?w.with({path:w.path.substr(0,w.path.length-1)}):w}addTrailingPathSeparator(w,f=k.sep){let v=!1;if(w.scheme===t.Schemas.file){const u=p(w);v=u!==void 0&&u.length===C.getRoot(u).length&&u[u.length-1]===f}else{f="/";const u=w.path;v=u.length===1&&u.charCodeAt(u.length-1)===47}return!v&&!(0,e.hasTrailingPathSeparator)(w,f)?w.with({path:w.path+"/"}):w}}e.ExtUri=m,e.extUri=new m(()=>!1),e.extUriBiasedIgnorePathCase=new m(d=>d.scheme===t.Schemas.file?!L.isLinux:!0),e.extUriIgnorePathCase=new m(d=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function y(d,w){const f=[];for(let v=0;v<d.length;v++){const u=w(d[v]);d.some((S,g)=>g===v?!1:(0,e.isEqualOrParent)(u,w(S)))||f.push(d[v])}return f}e.distinctParents=y;var I;(function(d){d.META_DATA_LABEL="label",d.META_DATA_DESCRIPTION="description",d.META_DATA_SIZE="size",d.META_DATA_MIME="mime";function w(f){const v=new Map;f.path.substring(f.path.indexOf(";")+1,f.path.lastIndexOf(";")).split(";").forEach(g=>{const[h,l]=g.split(":");h&&l&&v.set(h,l)});const S=f.path.substring(0,f.path.indexOf(";"));return S&&v.set(d.META_DATA_MIME,S),v}d.parseMetaData=w})(I=e.DataUri||(e.DataUri={}));function E(d,w,f){if(w){let v=d.path;return v&&v[0]!==k.posix.sep&&(v=k.posix.sep+v),d.with({scheme:f,authority:w,path:v})}return d.with({scheme:f})}e.toLocalResource=E}),define(ee[8],te([0,1,22,15,3,2,20,4]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function p(z){return!!z&&typeof z.then=="function"}e.isThenable=p;function m(z){const M=new C.CancellationTokenSource,T=z(M.token),F=new Promise((_,q)=>{const Y=M.token.onCancellationRequested(()=>{Y.dispose(),M.dispose(),q(new t.CancellationError)});Promise.resolve(T).then(B=>{Y.dispose(),M.dispose(),_(B)},B=>{Y.dispose(),M.dispose(),q(B)})});return new class{cancel(){M.cancel()}then(_,q){return F.then(_,q)}catch(_){return this.then(void 0,_)}finally(_){return F.finally(_)}}}e.createCancelablePromise=m;function y(z,M,T){return new Promise((F,_)=>{const q=M.onCancellationRequested(()=>{q.dispose(),F(T)});z.then(F,_).finally(()=>q.dispose())})}e.raceCancellation=y;function I(z,M){return new Promise((T,F)=>{const _=M.onCancellationRequested(()=>{_.dispose(),F(new t.CancellationError)});z.then(T,F).finally(()=>_.dispose())})}e.raceCancellationError=I;async function E(z){let M=-1;const T=z.map((_,q)=>_.then(Y=>(M=q,Y))),F=await Promise.race(T);return z.forEach((_,q)=>{q!==M&&_.cancel()}),F}e.raceCancellablePromises=E;function d(z,M,T){let F;const _=setTimeout(()=>{F?.(void 0),T?.()},M);return Promise.race([z.finally(()=>clearTimeout(_)),new Promise(q=>F=q)])}e.raceTimeout=d;function w(z){return new Promise((M,T)=>{const F=z();p(F)?F.then(M,T):M(F)})}e.asPromise=w;class f{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(M){if(this.activePromise){if(this.queuedPromiseFactory=M,!this.queuedPromise){const T=()=>{this.queuedPromise=null;const F=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,F};this.queuedPromise=new Promise(F=>{this.activePromise.then(T,T).then(F)})}return new Promise((T,F)=>{this.queuedPromise.then(T,F)})}return this.activePromise=M(),new Promise((T,F)=>{this.activePromise.then(_=>{this.activePromise=null,T(_)},_=>{this.activePromise=null,F(_)})})}}e.Throttler=f;class v{constructor(){this.current=Promise.resolve(null)}queue(M){return this.current=this.current.then(()=>M(),()=>M())}}e.Sequencer=v;class u{constructor(){this.promiseMap=new Map}queue(M,T){const _=(this.promiseMap.get(M)??Promise.resolve()).catch(()=>{}).then(T).finally(()=>{this.promiseMap.get(M)===_&&this.promiseMap.delete(M)});return this.promiseMap.set(M,_),_}}e.SequencerByKey=u;const S=(z,M)=>{let T=!0;const F=setTimeout(()=>{T=!1,M()},z);return{isTriggered:()=>T,dispose:()=>{clearTimeout(F),T=!1}}},g=z=>{let M=!0;return queueMicrotask(()=>{M&&(M=!1,z())}),{isTriggered:()=>M,dispose:()=>{M=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class h{constructor(M){this.defaultDelay=M,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(M,T=this.defaultDelay){this.task=M,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((_,q)=>{this.doResolve=_,this.doReject=q}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const _=this.task;return this.task=null,_()}}));const F=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=T===e.MicrotaskDelay?g(F):S(T,F),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new t.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=h;class l{constructor(M){this.delayer=new h(M),this.throttler=new f}trigger(M,T){return this.delayer.trigger(()=>this.throttler.queue(M),T)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=l;class i{constructor(){this._isOpen=!1,this._promise=new Promise((M,T)=>{this._completePromise=M})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=i;class s extends i{constructor(M){super(),this._timeout=setTimeout(()=>this.open(),M)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=s;function n(z,M){return M?new Promise((T,F)=>{const _=setTimeout(()=>{q.dispose(),T()},z),q=M.onCancellationRequested(()=>{clearTimeout(_),q.dispose(),F(new t.CancellationError)})}):m(T=>n(z,T))}e.timeout=n;function a(z,M=0){const T=setTimeout(z,M);return(0,L.toDisposable)(()=>clearTimeout(T))}e.disposableTimeout=a;function r(z){const M=[];let T=0;const F=z.length;function _(){return T<F?z[T++]():null}function q(Y){Y!=null&&M.push(Y);const B=_();return B?B.then(q):Promise.resolve(M)}return Promise.resolve(null).then(q)}e.sequence=r;function c(z,M=F=>!!F,T=null){let F=0;const _=z.length,q=()=>{if(F>=_)return Promise.resolve(T);const Y=z[F++];return Promise.resolve(Y()).then(X=>M(X)?Promise.resolve(X):q())};return q()}e.first=c;function o(z,M=F=>!!F,T=null){if(z.length===0)return Promise.resolve(T);let F=z.length;const _=()=>{F=-1;for(const q of z)q.cancel?.()};return new Promise((q,Y)=>{for(const B of z)B.then(X=>{--F>=0&&M(X)?(_(),q(X)):F===0&&q(T)}).catch(X=>{--F>=0&&(_(),Y(X))})})}e.firstParallel=o;class b{constructor(M){this._size=0,this.maxDegreeOfParalellism=M,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new k.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(M){return this._size++,new Promise((T,F)=>{this.outstandingPromises.push({factory:M,c:T,e:F}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const M=this.outstandingPromises.shift();this.runningPromises++;const T=M.factory();T.then(M.c,M.e),T.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=b;class D extends b{constructor(){super(1)}}e.Queue=D;class A{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const M=new W;return this.drainers.add(M),M.p}isDrained(){for(const[,M]of this.queues)if(M.size>0)return!1;return!0}queueFor(M,T=R.extUri){const F=T.getComparisonKey(M);let _=this.queues.get(F);return _||(_=new D,k.Event.once(_.onDrained)(()=>{_?.dispose(),this.queues.delete(F),this.onDidQueueDrain()}),this.queues.set(F,_)),_}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const M of this.drainers)M.complete();this.drainers.clear()}dispose(){for(const[,M]of this.queues)M.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=A;class N{constructor(M,T){this._token=-1,typeof M=="function"&&typeof T=="number"&&this.setIfNotSet(M,T)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(M,T){this.cancel(),this._token=setTimeout(()=>{this._token=-1,M()},T)}setIfNotSet(M,T){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,M()},T))}}e.TimeoutTimer=N;class G{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(M,T){this.cancel(),this._token=setInterval(()=>{M()},T)}}e.IntervalTimer=G;class ae{constructor(M,T){this.timeoutToken=-1,this.runner=M,this.timeout=T,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(M=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,M)}get delay(){return this.timeout}set delay(M){this.timeout=M}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=ae;class x{constructor(M,T){T%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${T}ms is not a multiple of 1000ms.`),this.runner=M,this.timeout=T,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(M=this.timeout){M%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${M}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(M/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=x;class Q extends ae{constructor(M,T){super(M,T),this.units=[]}work(M){this.units.push(M),this.isScheduled()||this.schedule()}doRun(){const M=this.units;this.units=[],this.runner?.(M)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=Q;class re extends L.Disposable{constructor(M,T){super(),this.options=M,this.handler=T,this.pendingWork=[],this.throttler=this._register(new L.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(M){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+M.length>this.options.maxBufferedWork)return!1}else if(this.pending+M.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...M),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new ae(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=re,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=z=>{(0,P.setTimeout0)(()=>{if(M)return;const T=Date.now()+15;z(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,T-Date.now())}}))});let M=!1;return{dispose(){M||(M=!0)}}}:e.runWhenIdle=(z,M)=>{const T=requestIdleCallback(z,typeof M=="number"?{timeout:M}:void 0);let F=!1;return{dispose(){F||(F=!0,cancelIdleCallback(T))}}}}();class ne{constructor(M){this._didRun=!1,this._executor=()=>{try{this._value=M()}catch(T){this._error=T}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=ne;async function fe(z,M,T){let F;for(let _=0;_<T;_++)try{return await z()}catch(q){F=q,await n(M)}throw F}e.retry=fe;class K{hasPending(M){return this._pending?typeof M=="number"?this._pending.taskId===M:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(M,T,F){return this._pending={taskId:M,cancel:()=>F?.(),promise:T},T.then(()=>this.donePending(M),()=>this.donePending(M)),T}donePending(M){this._pending&&M===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const M=this._next;this._next=void 0,M.run().then(M.promiseResolve,M.promiseReject)}}setNext(M){if(this._next)this._next.run=M;else{let T,F;const _=new Promise((q,Y)=>{T=q,F=Y});this._next={run:M,promise:_,promiseResolve:T,promiseReject:F}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=K;class le{constructor(M,T=()=>Date.now()){this.interval=M,this.nowFn=T,this.lastIncrementTime=0,this.value=0}increment(){const M=this.nowFn();return M-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=M,this.value=0),this.value++,this.value}}e.IntervalCounter=le;class W{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((M,T)=>{this.completeCallback=M,this.errorCallback=T})}complete(M){return new Promise(T=>{this.completeCallback(M),this.resolved=!0,T()})}error(M){return new Promise(T=>{this.errorCallback(M),this.rejected=!0,T()})}cancel(){new Promise(M=>{this.errorCallback(new t.CancellationError),this.rejected=!0,M()})}}e.DeferredPromise=W;var O;(function(z){async function M(F){let _;const q=await Promise.all(F.map(Y=>Y.then(B=>B,B=>{_||(_=B)})));if(typeof _<"u")throw _;return q}z.settled=M;function T(F){return new Promise(async(_,q)=>{try{await F(_,q)}catch(Y){q(Y)}})}z.withAsyncBody=T})(O=e.Promises||(e.Promises={}));var U;(function(z){z[z.Initial=0]="Initial",z[z.DoneOK=1]="DoneOK",z[z.DoneError=2]="DoneError"})(U||(U={}));class H{static fromArray(M){return new H(T=>{T.emitMany(M)})}static fromPromise(M){return new H(async T=>{T.emitMany(await M)})}static fromPromises(M){return new H(async T=>{await Promise.all(M.map(async F=>T.emitOne(await F)))})}static merge(M){return new H(async T=>{await Promise.all(M.map(async F=>{for await(const _ of F)T.emitOne(_)}))})}constructor(M){this._state=0,this._results=[],this._error=null,this._onStateChanged=new k.Emitter,queueMicrotask(async()=>{const T={emitOne:F=>this.emitOne(F),emitMany:F=>this.emitMany(F),reject:F=>this.reject(F)};try{await Promise.resolve(M(T)),this.resolve()}catch(F){this.reject(F)}finally{T.emitOne=void 0,T.emitMany=void 0,T.reject=void 0}})}[Symbol.asyncIterator](){let M=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(M<this._results.length)return{done:!1,value:this._results[M++]};if(this._state===1)return{done:!0,value:void 0};await k.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(M,T){return new H(async F=>{for await(const _ of M)F.emitOne(T(_))})}map(M){return H.map(this,M)}static filter(M,T){return new H(async F=>{for await(const _ of M)T(_)&&F.emitOne(_)})}filter(M){return H.filter(this,M)}static coalesce(M){return H.filter(M,T=>!!T)}coalesce(){return H.coalesce(this)}static async toPromise(M){const T=[];for await(const F of M)T.push(F);return T}toPromise(){return H.toPromise(this)}emitOne(M){this._state===0&&(this._results.push(M),this._onStateChanged.fire())}emitMany(M){this._state===0&&(this._results=this._results.concat(M),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(M){this._state===0&&(this._state=2,this._error=M,this._onStateChanged.fire())}}e.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class se extends H{constructor(M,T){super(T),this._source=M}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=se;function $(z){const M=new C.CancellationTokenSource,T=z(M.token);return new se(M,async F=>{const _=M.token.onCancellationRequested(()=>{_.dispose(),M.dispose(),F.reject(new t.CancellationError)});try{for await(const q of T){if(M.token.isCancellationRequested)return;F.emitOne(q)}_.dispose(),M.dispose()}catch(q){_.dispose(),M.dispose(),F.reject(q)}})}e.createCancelableAsyncIterable=$}),define(ee[99],te([0,1,24,8,30,39,9,4,26]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function m(){return Object.create(null)}e.getEmptyExpression=m,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const y="[/\\\\]",I="[^/\\\\]",E=/\//g;function d(W,O){switch(W){case 0:return"";case 1:return`${I}*?`;default:return`(?:${y}|${I}+${y}${O?`|${y}${I}+`:""})*?`}}function w(W,O){if(!W)return[];const U=[];let H=!1,se=!1,$="";for(const z of W){switch(z){case O:if(!H&&!se){U.push($),$="";continue}break;case"{":H=!0;break;case"}":H=!1;break;case"[":se=!0;break;case"]":se=!1;break}$+=z}return $&&U.push($),U}e.splitGlobAware=w;function f(W){if(!W)return"";let O="";const U=w(W,e.GLOB_SPLIT);if(U.every(H=>H===e.GLOBSTAR))O=".*";else{let H=!1;U.forEach((se,$)=>{if(se===e.GLOBSTAR){if(H)return;O+=d(2,$===U.length-1)}else{let z=!1,M="",T=!1,F="";for(const _ of se){if(_!=="}"&&z){M+=_;continue}if(T&&(_!=="]"||!F)){let q;_==="-"?q=_:(_==="^"||_==="!")&&!F?q="^":_===e.GLOB_SPLIT?q="":q=(0,p.escapeRegExpCharacters)(_),F+=q;continue}switch(_){case"{":z=!0;continue;case"[":T=!0;continue;case"}":{O+=`(?:${w(M,",").map(B=>f(B)).join("|")})`,z=!1,M="";break}case"]":{O+="["+F+"]",T=!1,F="";break}case"?":O+=I;continue;case"*":O+=d(1);continue;default:O+=(0,p.escapeRegExpCharacters)(_)}}$<U.length-1&&(U[$+1]!==e.GLOBSTAR||$+2<U.length)&&(O+=y)}H=se===e.GLOBSTAR})}return O}const v=/^\*\*\/\*\.[\w\.-]+$/,u=/^\*\*\/([\w\.-]+)\/?$/,S=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,g=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,h=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,i=new L.LRUCache(1e4),s=function(){return!1},n=function(){return null};function a(W,O){if(!W)return n;let U;typeof W!="string"?U=W.pattern:U=W,U=U.trim();const H=`${U}_${!!O.trimForExclusions}`;let se=i.get(H);if(se)return r(se,W);let $;return v.test(U)?se=o(U.substr(4),U):($=u.exec(c(U,O)))?se=b($[1],U):(O.trimForExclusions?g:S).test(U)?se=D(U,O):($=h.exec(c(U,O)))?se=A($[1].substr(1),U,!0):($=l.exec(c(U,O)))?se=A($[1],U,!1):se=N(U),i.set(H,se),r(se,W)}function r(W,O){if(typeof O=="string")return W;const U=function(H,se){return(0,k.isEqualOrParent)(H,O.base,!P.isLinux)?W((0,p.ltrim)(H.substr(O.base.length),R.sep),se):null};return U.allBasenames=W.allBasenames,U.allPaths=W.allPaths,U.basenames=W.basenames,U.patterns=W.patterns,U}function c(W,O){return O.trimForExclusions&&W.endsWith("/**")?W.substr(0,W.length-2):W}function o(W,O){return function(U,H){return typeof U=="string"&&U.endsWith(W)?O:null}}function b(W,O){const U=`/${W}`,H=`\\${W}`,se=function(z,M){return typeof z!="string"?null:M?M===W?O:null:z===W||z.endsWith(U)||z.endsWith(H)?O:null},$=[W];return se.basenames=$,se.patterns=[O],se.allBasenames=$,se}function D(W,O){const U=K(W.slice(1,-1).split(",").map(M=>a(M,O)).filter(M=>M!==n),W),H=U.length;if(!H)return n;if(H===1)return U[0];const se=function(M,T){for(let F=0,_=U.length;F<_;F++)if(U[F](M,T))return W;return null},$=U.find(M=>!!M.allBasenames);$&&(se.allBasenames=$.allBasenames);const z=U.reduce((M,T)=>T.allPaths?M.concat(T.allPaths):M,[]);return z.length&&(se.allPaths=z),se}function A(W,O,U){const H=R.sep===R.posix.sep,se=H?W:W.replace(E,R.sep),$=R.sep+se,z=R.posix.sep+W;let M;return U?M=function(T,F){return typeof T=="string"&&(T===se||T.endsWith($)||!H&&(T===W||T.endsWith(z)))?O:null}:M=function(T,F){return typeof T=="string"&&(T===se||!H&&T===W)?O:null},M.allPaths=[(U?"*/":"./")+W],M}function N(W){try{const O=new RegExp(`^${f(W)}$`);return function(U){return O.lastIndex=0,typeof U=="string"&&O.test(U)?W:null}}catch{return n}}function G(W,O,U){return!W||typeof O!="string"?!1:ae(W)(O,void 0,U)}e.match=G;function ae(W,O={}){if(!W)return s;if(typeof W=="string"||x(W)){const U=a(W,O);if(U===n)return s;const H=function(se,$){return!!U(se,$)};return U.allBasenames&&(H.allBasenames=U.allBasenames),U.allPaths&&(H.allPaths=U.allPaths),H}return ne(W,O)}e.parse=ae;function x(W){const O=W;return O?typeof O.base=="string"&&typeof O.pattern=="string":!1}e.isRelativePattern=x;function Q(W){return W.allBasenames||[]}e.getBasenameTerms=Q;function re(W){return W.allPaths||[]}e.getPathTerms=re;function ne(W,O){const U=K(Object.getOwnPropertyNames(W).map(M=>fe(M,W[M],O)).filter(M=>M!==n)),H=U.length;if(!H)return n;if(!U.some(M=>!!M.requiresSiblings)){if(H===1)return U[0];const M=function(_,q){let Y;for(let B=0,X=U.length;B<X;B++){const J=U[B](_,q);if(typeof J=="string")return J;(0,t.isThenable)(J)&&(Y||(Y=[]),Y.push(J))}return Y?(async()=>{for(const B of Y){const X=await B;if(typeof X=="string")return X}return null})():null},T=U.find(_=>!!_.allBasenames);T&&(M.allBasenames=T.allBasenames);const F=U.reduce((_,q)=>q.allPaths?_.concat(q.allPaths):_,[]);return F.length&&(M.allPaths=F),M}const se=function(M,T,F){let _,q;for(let Y=0,B=U.length;Y<B;Y++){const X=U[Y];X.requiresSiblings&&F&&(T||(T=(0,R.basename)(M)),_||(_=T.substr(0,T.length-(0,R.extname)(M).length)));const J=X(M,T,_,F);if(typeof J=="string")return J;(0,t.isThenable)(J)&&(q||(q=[]),q.push(J))}return q?(async()=>{for(const Y of q){const B=await Y;if(typeof B=="string")return B}return null})():null},$=U.find(M=>!!M.allBasenames);$&&(se.allBasenames=$.allBasenames);const z=U.reduce((M,T)=>T.allPaths?M.concat(T.allPaths):M,[]);return z.length&&(se.allPaths=z),se}function fe(W,O,U){if(O===!1)return n;const H=a(W,U);if(H===n)return n;if(typeof O=="boolean")return H;if(O){const se=O.when;if(typeof se=="string"){const $=(z,M,T,F)=>{if(!F||!H(z,M))return null;const _=se.replace("$(basename)",T),q=F(_);return(0,t.isThenable)(q)?q.then(Y=>Y?W:null):q?W:null};return $.requiresSiblings=!0,$}}return H}function K(W,O){const U=W.filter(M=>!!M.basenames);if(U.length<2)return W;const H=U.reduce((M,T)=>{const F=T.basenames;return F?M.concat(F):M},[]);let se;if(O){se=[];for(let M=0,T=H.length;M<T;M++)se.push(O)}else se=U.reduce((M,T)=>{const F=T.patterns;return F?M.concat(F):M},[]);const $=function(M,T){if(typeof M!="string")return null;if(!T){let _;for(_=M.length;_>0;_--){const q=M.charCodeAt(_-1);if(q===47||q===92)break}T=M.substr(_)}const F=H.indexOf(T);return F!==-1?se[F]:null};$.basenames=H,$.patterns=se,$.allBasenames=H;const z=W.filter(M=>!M.basenames);return z.push($),z}function le(W,O){return(0,C.equals)(W,O,(U,H)=>typeof U=="string"&&typeof H=="string"?U===H:typeof U!="string"&&typeof H!="string"?U.base===H.base&&U.pattern===H.pattern:!1)}e.patternsEquals=le}),define(ee[34],te([0,1,24,30,9,4,20,26]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitName=e.unmnemonicLabel=e.mnemonicButtonLabel=e.mnemonicMenuLabel=e.template=e.shorten=e.untildify=e.tildify=e.normalizeDriveLetter=e.getPathLabel=void 0;function p(n,a){const{os:r,tildify:c,relative:o}=a;if(o){const A=m(n,o,r);if(typeof A=="string")return A}let b=n.fsPath;if(r===1&&!L.isWindows?b=b.replace(/\//g,"\\"):r!==1&&L.isWindows&&(b=b.replace(/\\/g,"/")),r!==1&&c?.userHome){const A=c.userHome.fsPath;let N;n.scheme!==c.userHome.scheme&&n.path.startsWith(k.posix.sep)?N=c.userHome.with({path:n.path}).fsPath:N=n.fsPath,b=E(N,A,r)}return(r===1?k.win32:k.posix).normalize(y(b,r===1))}e.getPathLabel=p;function m(n,a,r){const c=r===1?k.win32:k.posix,o=r===3?R.extUri:R.extUriIgnorePathCase,b=a.getWorkspace(),D=(0,C.firstOrDefault)(b.folders);if(!D)return;n.scheme!==D.uri.scheme&&n.path.startsWith(k.posix.sep)&&(n=D.uri.with({path:n.path}));const A=a.getWorkspaceFolder(n);if(!A)return;let N;if(o.isEqual(A.uri,n)?N="":N=o.relativePath(A.uri,n)??"",N&&(N=c.normalize(N)),b.folders.length>1&&!a.noPrefix){const G=A.name?A.name:o.basenameOrAuthority(A.uri);N=N?`${G} \u2022 ${N}`:G}return N}function y(n,a=L.isWindows){return(0,t.hasDriveLetter)(n,a)?n.charAt(0).toUpperCase()+n.slice(1):n}e.normalizeDriveLetter=y;let I=Object.create(null);function E(n,a,r=L.OS){if(r===1||!n||!a)return n;let c=I.original===a?I.normalized:void 0;c||(c=a,L.isWindows&&(c=(0,t.toSlashes)(c)),c=`${(0,P.rtrim)(c,k.posix.sep)}${k.posix.sep}`,I={original:a,normalized:c});let o=n;return L.isWindows&&(o=(0,t.toSlashes)(o)),(r===3?o.startsWith(c):(0,P.startsWithIgnoreCase)(o,c))?`~/${o.substr(c.length)}`:n}e.tildify=E;function d(n,a){return n.replace(/^~($|\/|\\)/,`${a}$1`)}e.untildify=d;const w="\u2026",f="\\\\",v="~";function u(n,a=k.sep){const r=new Array(n.length);let c=!1;for(let o=0;o<n.length;o++){const b=n[o];if(b===""){r[o]=`.${a}`;continue}if(!b){r[o]=b;continue}c=!0;let D="",A=b;A.indexOf(f)===0?(D=A.substr(0,A.indexOf(f)+f.length),A=A.substr(A.indexOf(f)+f.length)):A.indexOf(a)===0?(D=A.substr(0,A.indexOf(a)+a.length),A=A.substr(A.indexOf(a)+a.length)):A.indexOf(v)===0&&(D=A.substr(0,A.indexOf(v)+v.length),A=A.substr(A.indexOf(v)+v.length));const N=A.split(a);for(let G=1;c&&G<=N.length;G++)for(let ae=N.length-G;c&&ae>=0;ae--){c=!1;let x=N.slice(ae,ae+G).join(a);for(let Q=0;!c&&Q<n.length;Q++)if(Q!==o&&n[Q]&&n[Q].indexOf(x)>-1){const re=ae+G===N.length,ne=ae>0&&n[Q].indexOf(a)>-1?a+x:x,fe=n[Q].endsWith(ne);c=!re||fe}if(!c){let Q="";(N[0].endsWith(":")||D!=="")&&(ae===1&&(ae=0,G++,x=N[0]+a+x),ae>0&&(Q=N[0]+a),Q=D+Q),ae>0&&(Q=Q+w+a),Q=Q+x,ae+G<N.length&&(Q=Q+a+w),r[o]=Q}}c&&(r[o]=b)}return r}e.shorten=u;var S;(function(n){n[n.TEXT=0]="TEXT",n[n.VARIABLE=1]="VARIABLE",n[n.SEPARATOR=2]="SEPARATOR"})(S||(S={}));function g(n,a=Object.create(null)){const r=[];let c=!1,o="";for(const b of n)if(b==="$"||c&&b==="{")o&&r.push({value:o,type:S.TEXT}),o="",c=!0;else if(b==="}"&&c){const D=a[o];if(typeof D=="string")D.length&&r.push({value:D,type:S.VARIABLE});else if(D){const A=r[r.length-1];(!A||A.type!==S.SEPARATOR)&&r.push({value:D.label,type:S.SEPARATOR})}o="",c=!1}else o+=b;return o&&!c&&r.push({value:o,type:S.TEXT}),r.filter((b,D)=>{if(b.type===S.SEPARATOR){const A=r[D-1],N=r[D+1];return[A,N].every(G=>G&&(G.type===S.VARIABLE||G.type===S.TEXT)&&G.value.length>0)}return!0}).map(b=>b.value).join("")}e.template=g;function h(n,a){return L.isMacintosh||a?n.replace(/\(&&\w\)|&&/g,"").replace(/&/g,L.isMacintosh?"&":"&&"):n.replace(/&&|&/g,r=>r==="&"?"&&":"&")}e.mnemonicMenuLabel=h;function l(n,a){return L.isMacintosh||a?n.replace(/\(&&\w\)|&&/g,""):L.isWindows?n.replace(/&&|&/g,r=>r==="&"?"&&":"&"):n.replace(/&&/g,"_")}e.mnemonicButtonLabel=l;function i(n){return n.replace(/&/g,"&&")}e.unmnemonicLabel=i;function s(n){const a=n.indexOf("/")!==-1?k.posix:k.win32,r=a.basename(n),c=a.dirname(n);return r.length?{name:r,parentPath:c}:{name:c,parentPath:""}}e.splitName=s}),define(ee[141],te([0,1,7]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformAndReviveIncomingURIs=e.transformIncomingURIs=e.transformOutgoingURIs=e.DefaultURITransformer=e.URITransformer=void 0;function t(y){return y.toJSON()}class k{constructor(I){this._uriTransformer=I}transformIncoming(I){const E=this._uriTransformer.transformIncoming(I);return E===I?I:t(C.URI.from(E))}transformOutgoing(I){const E=this._uriTransformer.transformOutgoing(I);return E===I?I:t(C.URI.from(E))}transformOutgoingURI(I){const E=this._uriTransformer.transformOutgoing(I);return E===I?I:C.URI.from(E)}transformOutgoingScheme(I){return this._uriTransformer.transformOutgoingScheme(I)}}e.URITransformer=k,e.DefaultURITransformer=new class{transformIncoming(y){return y}transformOutgoing(y){return y}transformOutgoingURI(y){return y}transformOutgoingScheme(y){return y}};function L(y,I,E){if(!y||E>200)return null;if(typeof y=="object"){if(y instanceof C.URI)return I.transformOutgoing(y);for(const d in y)if(Object.hasOwnProperty.call(y,d)){const w=L(y[d],I,E+1);w!==null&&(y[d]=w)}}return null}function R(y,I){const E=L(y,I,0);return E===null?y:E}e.transformOutgoingURIs=R;function P(y,I,E,d){if(!y||d>200)return null;if(typeof y=="object"){if(y.$mid===1)return E?C.URI.revive(I.transformIncoming(y)):I.transformIncoming(y);for(const w in y)if(Object.hasOwnProperty.call(y,w)){const f=P(y[w],I,E,d+1);f!==null&&(y[w]=f)}}return null}function p(y,I){const E=P(y,I,!1,0);return E===null?y:E}e.transformIncomingURIs=p;function m(y,I){const E=P(y,I,!0,0);return E===null?y:E}e.transformAndReviveIncomingURIs=m}),define(ee[81],te([0,1,25,15,60,29,129]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMachineId=e.virtualMachineHint=void 0,e.virtualMachineHint=new class{_isVirtualMachineMacAddress(y){return this._virtualMachineOUIs||(this._virtualMachineOUIs=k.TernarySearchTree.forStrings(),this._virtualMachineOUIs.set("00-50-56",!0),this._virtualMachineOUIs.set("00-0C-29",!0),this._virtualMachineOUIs.set("00-05-69",!0),this._virtualMachineOUIs.set("00-03-FF",!0),this._virtualMachineOUIs.set("00-1C-42",!0),this._virtualMachineOUIs.set("00-16-3E",!0),this._virtualMachineOUIs.set("08-00-27",!0),this._virtualMachineOUIs.set("00:50:56",!0),this._virtualMachineOUIs.set("00:0C:29",!0),this._virtualMachineOUIs.set("00:05:69",!0),this._virtualMachineOUIs.set("00:03:FF",!0),this._virtualMachineOUIs.set("00:1C:42",!0),this._virtualMachineOUIs.set("00:16:3E",!0),this._virtualMachineOUIs.set("08:00:27",!0)),!!this._virtualMachineOUIs.findSubstr(y)}value(){if(this._value===void 0){let y=0,I=0;const E=(0,C.networkInterfaces)();for(const d in E){const w=E[d];if(w)for(const{mac:f,internal:v}of w)v||(I+=1,this._isVirtualMachineMacAddress(f.toUpperCase())&&(y+=1))}this._value=I>0?y/I:0}return this._value}};let P;async function p(){return P||(P=(async()=>await m()||L.generateUuid())()),P}e.getMachineId=p;async function m(){try{const y=await new Promise((E,d)=>{j(["crypto"],E,d)}),I=(0,R.getMac)();return y.createHash("sha256").update(I,"utf8").digest("hex")}catch(y){t.onUnexpectedError(y);return}}}),define(ee[23],te([0,1,40,25,142,8,30,76,9,4,20,7]),function(j,e,C,t,k,L,R,P,p,m,y,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Promises=e.writeFileSync=e.configureFlushOnWrite=e.SymlinkSupport=e.whenDeleted=e.readdirSync=e.rimrafSync=e.RimRafMode=void 0;var E;(function(ne){ne[ne.UNLINK=0]="UNLINK",ne[ne.MOVE=1]="MOVE"})(E=e.RimRafMode||(e.RimRafMode={}));async function d(ne,fe=E.UNLINK){if((0,R.isRootOrDriveLetter)(ne))throw new Error("rimraf - will refuse to recursively delete root");return fe===E.UNLINK?f(ne):w(ne)}async function w(ne){try{const fe=(0,R.randomPath)((0,t.tmpdir)());try{await C.promises.rename(ne,fe)}catch(K){return K.code==="ENOENT"?void 0:f(ne)}f(fe).catch(K=>{})}catch(fe){if(fe.code!=="ENOENT")throw fe}}async function f(ne){return(0,k.promisify)(C.rm)(ne,{recursive:!0,force:!0,maxRetries:3})}function v(ne){if((0,R.isRootOrDriveLetter)(ne))throw new Error("rimraf - will refuse to recursively delete root");C.rmSync(ne,{recursive:!0,force:!0,maxRetries:3})}e.rimrafSync=v;async function u(ne,fe){return h(await(fe?S(ne):(0,k.promisify)(C.readdir)(ne)))}async function S(ne){try{return await(0,k.promisify)(C.readdir)(ne,{withFileTypes:!0})}catch(le){console.warn("[node.js fs] readdir with filetypes failed with error: ",le)}const fe=[],K=await u(ne);for(const le of K){let W=!1,O=!1,U=!1;try{const H=await e.Promises.lstat((0,p.join)(ne,le));W=H.isFile(),O=H.isDirectory(),U=H.isSymbolicLink()}catch(H){console.warn("[node.js fs] unexpected error from lstat after readdir: ",H)}fe.push({name:le,isFile:()=>W,isDirectory:()=>O,isSymbolicLink:()=>U})}return fe}function g(ne){return h(C.readdirSync(ne))}e.readdirSync=g;function h(ne){return ne.map(fe=>typeof fe=="string"?m.isMacintosh?(0,P.normalizeNFC)(fe):fe:(fe.name=m.isMacintosh?(0,P.normalizeNFC)(fe.name):fe.name,fe))}async function l(ne){const fe=await u(ne),K=[];for(const le of fe)await s.existsDirectory((0,p.join)(ne,le))&&K.push(le);return K}function i(ne,fe=1e3){return new Promise(K=>{let le=!1;const W=setInterval(()=>{le||(le=!0,C.access(ne,O=>{le=!1,O&&(clearInterval(W),K(void 0))}))},fe)})}e.whenDeleted=i;var s;(function(ne){async function fe(W){let O;try{if(O=await e.Promises.lstat(W),!O.isSymbolicLink())return{stat:O}}catch{}try{return{stat:await e.Promises.stat(W),symbolicLink:O?.isSymbolicLink()?{dangling:!1}:void 0}}catch(U){if(U.code==="ENOENT"&&O)return{stat:O,symbolicLink:{dangling:!0}};if(m.isWindows&&U.code==="EACCES")try{return{stat:await e.Promises.stat(await e.Promises.readlink(W)),symbolicLink:{dangling:!1}}}catch(H){if(H.code==="ENOENT"&&O)return{stat:O,symbolicLink:{dangling:!0}};throw H}throw U}}ne.stat=fe;async function K(W){try{const{stat:O,symbolicLink:U}=await ne.stat(W);return O.isFile()&&U?.dangling!==!0}catch{}return!1}ne.existsFile=K;async function le(W){try{const{stat:O,symbolicLink:U}=await ne.stat(W);return O.isDirectory()&&U?.dangling!==!0}catch{}return!1}ne.existsDirectory=le})(s=e.SymlinkSupport||(e.SymlinkSupport={}));const n=new L.ResourceQueue;function a(ne,fe,K){return n.queueFor(I.URI.file(ne),y.extUriBiasedIgnorePathCase).queue(()=>{const le=D(K);return new Promise((W,O)=>o(ne,fe,le,U=>U?O(U):W()))})}let r=!0;function c(ne){r=ne}e.configureFlushOnWrite=c;function o(ne,fe,K,le){if(!r)return C.writeFile(ne,fe,{mode:K.mode,flag:K.flag},le);C.open(ne,K.flag,K.mode,(W,O)=>{if(W)return le(W);C.writeFile(O,fe,U=>{if(U)return C.close(O,()=>le(U));C.fdatasync(O,H=>(H&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",H),c(!1)),C.close(O,se=>le(se))))})})}function b(ne,fe,K){const le=D(K);if(!r)return C.writeFileSync(ne,fe,{mode:le.mode,flag:le.flag});const W=C.openSync(ne,le.flag,le.mode);try{C.writeFileSync(W,fe);try{C.fdatasyncSync(W)}catch(O){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",O),c(!1)}}finally{C.closeSync(W)}}e.writeFileSync=b;function D(ne){return ne?{mode:typeof ne.mode=="number"?ne.mode:438,flag:typeof ne.flag=="string"?ne.flag:"w"}:{mode:438,flag:"w"}}async function A(ne,fe){if(ne!==fe)try{await e.Promises.rename(ne,fe)}catch(K){if(ne.toLowerCase()!==fe.toLowerCase()&&K.code==="EXDEV"||ne.endsWith("."))await N(ne,fe,{preserveSymlinks:!1}),await d(ne,E.MOVE);else throw K}}async function N(ne,fe,K){return ae(ne,fe,{root:{source:ne,target:fe},options:K,handledSourcePaths:new Set})}const G=511;async function ae(ne,fe,K){if(K.handledSourcePaths.has(ne))return;K.handledSourcePaths.add(ne);const{stat:le,symbolicLink:W}=await s.stat(ne);if(W){if(K.options.preserveSymlinks)try{return await re(ne,fe,K)}catch(O){console.warn("[node.js fs] copy of symlink failed: ",O)}if(W.dangling)return}return le.isDirectory()?x(ne,fe,le.mode&G,K):Q(ne,fe,le.mode&G)}async function x(ne,fe,K,le){await e.Promises.mkdir(fe,{recursive:!0,mode:K});const W=await u(ne);for(const O of W)await ae((0,p.join)(ne,O),(0,p.join)(fe,O),le)}async function Q(ne,fe,K){await e.Promises.copyFile(ne,fe),await e.Promises.chmod(fe,K)}async function re(ne,fe,K){let le=await e.Promises.readlink(ne);(0,R.isEqualOrParent)(le,K.root.source,!m.isLinux)&&(le=(0,p.join)(K.root.target,le.substr(K.root.source.length+1))),await e.Promises.symlink(le,fe)}e.Promises=new class{get access(){return(0,k.promisify)(C.access)}get stat(){return(0,k.promisify)(C.stat)}get lstat(){return(0,k.promisify)(C.lstat)}get utimes(){return(0,k.promisify)(C.utimes)}get read(){return(ne,fe,K,le,W)=>new Promise((O,U)=>{C.read(ne,fe,K,le,W,(H,se,$)=>H?U(H):O({bytesRead:se,buffer:$}))})}get readFile(){return(0,k.promisify)(C.readFile)}get write(){return(ne,fe,K,le,W)=>new Promise((O,U)=>{C.write(ne,fe,K,le,W,(H,se,$)=>H?U(H):O({bytesWritten:se,buffer:$}))})}get appendFile(){return(0,k.promisify)(C.appendFile)}get fdatasync(){return(0,k.promisify)(C.fdatasync)}get truncate(){return(0,k.promisify)(C.truncate)}get rename(){return(0,k.promisify)(C.rename)}get copyFile(){return(0,k.promisify)(C.copyFile)}get open(){return(0,k.promisify)(C.open)}get close(){return(0,k.promisify)(C.close)}get symlink(){return(0,k.promisify)(C.symlink)}get readlink(){return(0,k.promisify)(C.readlink)}get chmod(){return(0,k.promisify)(C.chmod)}get mkdir(){return(0,k.promisify)(C.mkdir)}get unlink(){return(0,k.promisify)(C.unlink)}get rmdir(){return(0,k.promisify)(C.rmdir)}get realpath(){return(0,k.promisify)(C.realpath)}async exists(ne){try{return await e.Promises.access(ne),!0}catch{return!1}}get readdir(){return u}get readDirsInDir(){return l}get writeFile(){return a}get rm(){return d}get move(){return A}get copy(){return N}}}),define(ee[100],te([0,1,40,9,4,26,23]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.realpathSync=e.realpath=e.realcase=e.realcaseSync=void 0;function P(E){if(k.isLinux)return E;const d=(0,t.dirname)(E);if(E===d)return E;const w=((0,t.basename)(E)||E).toLowerCase();try{const v=(0,R.readdirSync)(d).filter(u=>u.toLowerCase()===w);if(v.length===1){const u=P(d);if(u)return(0,t.join)(u,v[0])}else if(v.length>1){const u=v.indexOf(w);if(u>=0){const S=P(d);if(S)return(0,t.join)(S,v[u])}}}catch{}return null}e.realcaseSync=P;async function p(E){if(k.isLinux)return E;const d=(0,t.dirname)(E);if(E===d)return E;const w=((0,t.basename)(E)||E).toLowerCase();try{const v=(await R.Promises.readdir(d)).filter(u=>u.toLowerCase()===w);if(v.length===1){const u=await p(d);if(u)return(0,t.join)(u,v[0])}else if(v.length>1){const u=v.indexOf(w);if(u>=0){const S=await p(d);if(S)return(0,t.join)(S,v[u])}}}catch{}return null}e.realcase=p;async function m(E){try{return await R.Promises.realpath(E)}catch{const w=I(E);return await R.Promises.access(w,C.constants.R_OK),w}}e.realpath=m;function y(E){try{return C.realpathSync(E)}catch{const w=I(E);return C.accessSync(w,C.constants.R_OK),w}}e.realpathSync=y;function I(E){return(0,L.rtrim)((0,t.normalize)(E),t.sep)}}),define(ee[143],te([0,1,25,9,23]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFirstAvailablePowerShellInstallation=e.enumeratePowerShellInstallations=void 0;const L=/^\d+$/,R=/^Microsoft.PowerShell_.*/,P=/^Microsoft.PowerShellPreview_.*/;var p;(function(h){h[h.x64=0]="x64",h[h.x86=1]="x86",h[h.ARM=2]="ARM"})(p||(p={}));let m;switch(process.arch){case"ia32":case"x32":m=1;break;case"arm":case"arm64":m=2;break;default:m=0;break}let y;process.env.PROCESSOR_ARCHITEW6432?y=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?y=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?y=1:y=0;class I{constructor(l,i,s){this.exePath=l,this.displayName=i,this.knownToExist=s}async exists(){return this.knownToExist===void 0&&(this.knownToExist=await k.SymlinkSupport.existsFile(this.exePath)),this.knownToExist}}function E({useAlternateBitness:h=!1}={}){return h?m===0?process.env["ProgramFiles(x86)"]||null:y===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function d({useAlternateBitness:h=!1,findPreview:l=!1}={}){const i=E({useAlternateBitness:h});if(!i)return null;const s=t.join(i,"PowerShell");if(!await k.SymlinkSupport.existsDirectory(s))return null;let n=-1,a=null;for(const o of await k.Promises.readdir(s)){let b=-1;if(l){const A=o.indexOf("-");if(A<0)continue;const N=o.substring(0,A);if(!L.test(N)||o.substring(A+1)!=="preview")continue;b=parseInt(N,10)}else{if(!L.test(o))continue;b=parseInt(o,10)}if(b<=n)continue;const D=t.join(s,o,"pwsh.exe");!await k.SymlinkSupport.existsFile(D)||(a=D,n=b)}if(!a)return null;const r=i.includes("x86")?" (x86)":"",c=l?" Preview":"";return new I(a,`PowerShell${c}${r}`,!0)}async function w({findPreview:h}={}){if(!process.env.LOCALAPPDATA)return null;const l=t.join(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await k.SymlinkSupport.existsDirectory(l))return null;const{pwshMsixDirRegex:i,pwshMsixName:s}=h?{pwshMsixDirRegex:P,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:R,pwshMsixName:"PowerShell (Store)"};for(const n of await k.Promises.readdir(l))if(i.test(n)){const a=t.join(l,n,"pwsh.exe");return new I(a,s)}return null}function f(){const h=t.join(C.homedir(),".dotnet","tools","pwsh.exe");return new I(h,".NET Core PowerShell Global Tool")}function v(){const h=t.join(process.env.windir,m===1&&y!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new I(h,"Windows PowerShell",!0)}async function*u(){let h=await d();h&&(yield h),h=await d({useAlternateBitness:!0}),h&&(yield h),h=await w(),h&&(yield h),h=f(),h&&(yield h),h=await d({findPreview:!0}),h&&(yield h),h=await w({findPreview:!0}),h&&(yield h),h=await d({useAlternateBitness:!0,findPreview:!0}),h&&(yield h),h=v(),h&&(yield h)}async function*S(){for await(const h of u())await h.exists()&&(yield h)}e.enumeratePowerShellInstallations=S;async function g(){for await(const h of S())return h;return null}e.getFirstAvailablePowerShellInstallation=g}),define(ee[82],te([0,1,9,4,33,79,12,23]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.win32=e.createQueuedSender=e.getWindowsShell=e.TerminateResponseCode=e.Source=void 0,Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return L.Source}}),Object.defineProperty(e,"TerminateResponseCode",{enumerable:!0,get:function(){return L.TerminateResponseCode}});function p(I=k.env){return I.comspec||"cmd.exe"}e.getWindowsShell=p;function m(I){let E=[],d=!1;const w=function(f){if(d){E.push(f);return}(!I.send(f,u=>{if(u&&console.error(u),d=!1,E.length>0){const S=E.slice(0);E=[],S.forEach(g=>w(g))}})||t.isWindows)&&(d=!0)};return{send:w}}e.createQueuedSender=m;var y;(function(I){async function E(d,w,f){if(C.isAbsolute(d))return d;if(w===void 0&&(w=k.cwd()),C.dirname(d)!=="."||(f===void 0&&R.isString(k.env.PATH)&&(f=k.env.PATH.split(C.delimiter)),f===void 0||f.length===0))return C.join(w,d);async function u(S){if(await P.Promises.exists(S)){let g;try{g=await P.Promises.stat(S)}catch(h){h.message.startsWith("EACCES")&&(g=await P.Promises.lstat(S))}return g?!g.isDirectory():!1}return!1}for(const S of f){let g;if(C.isAbsolute(S)?g=C.join(S,d):g=C.join(w,S,d),await u(g))return g;let h=g+".com";if(await u(h)||(h=g+".exe",await u(h)))return h}return C.join(w,d)}I.findExecutable=E})(y=e.win32||(e.win32={}))}),define(ee[101],te([0,1,46,14]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listProcesses=void 0;function k(R){return new Promise((P,p)=>{let m;const y=new Map;function I(d,w,f,v,u){const S=y.get(w);if(d===R||S){const g={name:E(f),cmd:f,pid:d,ppid:w,load:v,mem:u};y.set(d,g),d===R&&(m=g),S&&(S.children||(S.children=[]),S.children.push(g),S.children.length>1&&(S.children=S.children.sort((h,l)=>h.pid-l.pid)))}}function E(d){const w=/--vscode-window-kind=shared-process/,f=/--vscode-window-kind=issue-reporter/,v=/--vscode-window-kind=process-explorer/,u=/--utility-sub-type=network/,S=/--utility-sub-type=node.mojom.NodeService/,g=/--crashes-directory/,h=/\\pipe\\winpty-control/,l=/conhost\.exe/,i=/--type=([a-zA-Z-]+)/;if(g.exec(d))return"electron-crash-reporter";if(h.exec(d))return"winpty-process";if(l.exec(d))return"console-window-host (Windows internal process)";let s=i.exec(d);if(s&&s.length===2){if(s[1]==="renderer")return w.exec(d)?"shared-process":f.exec(d)?"issue-reporter":v.exec(d)?"process-explorer":"window";if(s[1]==="utility"){if(u.exec(d))return"utility-network-service";if(S.exec(d))return"extension-host"}return s[1]}const n=/[a-zA-Z-]+\.js/g;let a="";do s=n.exec(d),s&&(a+=s+" ");while(s);return a&&d.indexOf("node ")<0&&d.indexOf("node.exe")<0?`electron_node ${a}`:d}if(process.platform==="win32"){const d=w=>w.indexOf("\\\\?\\")===0||w.indexOf("\\??\\")===0?w.substr(4):w.indexOf('"\\\\?\\')===0||w.indexOf('"\\??\\')===0?'"'+w.substr(5):w;new Promise((w,f)=>{j(["windows-process-tree"],w,f)}).then(w=>{w.getProcessList(R,f=>{if(!f){p(new Error(`Root process ${R} not found`));return}w.getProcessCpuUsage(f,v=>{const u=new Map;v.forEach(S=>{const g=d(S.commandLine||"");u.set(S.pid,{name:E(g),cmd:g,pid:S.pid,ppid:S.ppid,load:S.cpu||0,mem:S.memory||0})}),m=u.get(R),m?(u.forEach(S=>{const g=u.get(S.ppid);g&&(g.children||(g.children=[]),g.children.push(S))}),u.forEach(S=>{S.children&&(S.children=S.children.sort((g,h)=>g.pid-h.pid))}),P(m)):p(new Error(`Root process ${R} not found`))})},w.ProcessDataFlag.CommandLine|w.ProcessDataFlag.Memory)})}else{let d=function(){let w=[m];const f=[];for(;w.length;){const u=w.shift();u&&(f.push(u.pid),u.children&&(w=w.concat(u.children)))}let v=JSON.stringify(t.FileAccess.asFileUri("vs/base/node/cpuUsage.sh").fsPath);v+=" "+f.join(" "),(0,C.exec)(v,{},(u,S,g)=>{if(u||g)p(u||new Error(g.toString()));else{const h=S.toString().split(`
`);for(let l=0;l<f.length;l++){const i=y.get(f[l]);i.load=parseFloat(h[l])}if(!m){p(new Error(`Root process ${R} not found`));return}P(m)}})};(0,C.exec)("which ps",{},(w,f,v)=>{if(w||v)if(process.platform!=="linux")p(w||new Error(v.toString()));else{const u=JSON.stringify(t.FileAccess.asFileUri("vs/base/node/ps.sh").fsPath);(0,C.exec)(u,{},(S,g,h)=>{S||h?p(S||new Error(h.toString())):(L(g,I),d())})}else{const u=f.toString().trim(),S="-ax -o pid=,ppid=,pcpu=,pmem=,command=";(0,C.exec)(`${u} ${S}`,{maxBuffer:1e3*1024,env:{LC_NUMERIC:"en_US.UTF-8"}},(g,h,l)=>{g||l&&!l.includes("screen size is bogus")?p(g||new Error(l.toString())):(L(h,I),process.platform==="linux"?d():m?P(m):p(new Error(`Root process ${R} not found`)))})}})}})}e.listProcesses=k;function L(R,P){const p=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/,m=R.toString().split(`
`);for(const y of m){const I=p.exec(y.trim());I&&I.length===6&&P(parseInt(I[1]),parseInt(I[2]),I[5],parseFloat(I[3]),parseFloat(I[4]))}}}),define(ee[144],te([0,1,25,4,143,82]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSystemShellSync=e.getSystemShell=void 0;async function R(d,w){return d===1?t.isWindows?I():L.getWindowsShell(w):m(d,w)}e.getSystemShell=R;function P(d,w){return d===1?t.isWindows?E(w):L.getWindowsShell(w):m(d,w)}e.getSystemShellSync=P;let p=null;function m(d,w){if(t.isLinux&&d===2||t.isMacintosh&&d===3)return"/bin/bash";if(!p){let f;if(t.isWindows)f="/bin/bash";else{if(f=w.SHELL,!f)try{f=(0,C.userInfo)().shell}catch{}f||(f="sh"),f==="/bin/false"&&(f="/bin/bash")}p=f}return p}let y=null;async function I(){return y||(y=(await(0,k.getFirstAvailablePowerShellInstallation)()).exePath),y}function E(d){if(y)return y;const w=t.isWindows&&parseFloat((0,C.release)())>=10,f=d.hasOwnProperty("PROCESSOR_ARCHITEW6432"),v=`${d.windir}\\${f?"Sysnative":"System32"}\\WindowsPowerShell\\v1.0\\powershell.exe`;return w?v:L.getWindowsShell(d)}});var we=this&&this.__decorate||function(j,e,C,t){var k=arguments.length,L=k<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,C):t,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(j,e,C,t);else for(var P=j.length-1;P>=0;P--)(R=j[P])&&(L=(k<3?R(L):k>3?R(e,C,L):R(e,C))||L);return k>3&&L&&Object.defineProperty(e,C,L),L};define(ee[47],te([0,1,24,8,17,22,53,15,3,2,69,26,12]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IPCLogger=e.ProxyChannel=e.StaticRouter=e.getNextTickChannel=e.getDelayedChannel=e.IPCClient=e.IPCServer=e.ChannelClient=e.RequestInitiator=e.ChannelServer=void 0;var d;(function(W){W[W.Promise=100]="Promise",W[W.PromiseCancel=101]="PromiseCancel",W[W.EventListen=102]="EventListen",W[W.EventDispose=103]="EventDispose"})(d||(d={}));function w(W){switch(W){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var f;(function(W){W[W.Initialize=200]="Initialize",W[W.PromiseSuccess=201]="PromiseSuccess",W[W.PromiseError=202]="PromiseError",W[W.PromiseErrorObj=203]="PromiseErrorObj",W[W.EventFire=204]="EventFire"})(f||(f={}));function v(W){switch(W){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var u;(function(W){W[W.Uninitialized=0]="Uninitialized",W[W.Idle=1]="Idle"})(u||(u={}));class S{constructor(O){this.buffer=O,this.pos=0}read(O){const U=this.buffer.slice(this.pos,this.pos+O);return this.pos+=U.byteLength,U}}class g{constructor(){this.buffers=[]}get buffer(){return k.VSBuffer.concat(this.buffers)}write(O){this.buffers.push(O)}}var h;(function(W){W[W.Undefined=0]="Undefined",W[W.String=1]="String",W[W.Buffer=2]="Buffer",W[W.VSBuffer=3]="VSBuffer",W[W.Array=4]="Array",W[W.Object=5]="Object"})(h||(h={}));function l(W){const O=k.VSBuffer.alloc(4);return O.writeUInt32BE(W,0),O}function i(W){return W.read(4).readUInt32BE(0)}function s(W){const O=k.VSBuffer.alloc(1);return O.writeUInt8(W,0),O}const n={Undefined:s(h.Undefined),String:s(h.String),Buffer:s(h.Buffer),VSBuffer:s(h.VSBuffer),Array:s(h.Array),Object:s(h.Object)},a=typeof Buffer<"u";function r(W,O){if(typeof O>"u")W.write(n.Undefined);else if(typeof O=="string"){const U=k.VSBuffer.fromString(O);W.write(n.String),W.write(l(U.byteLength)),W.write(U)}else if(a&&Buffer.isBuffer(O)){const U=k.VSBuffer.wrap(O);W.write(n.Buffer),W.write(l(U.byteLength)),W.write(U)}else if(O instanceof k.VSBuffer)W.write(n.VSBuffer),W.write(l(O.byteLength)),W.write(O);else if(Array.isArray(O)){W.write(n.Array),W.write(l(O.length));for(const U of O)r(W,U)}else{const U=k.VSBuffer.fromString(JSON.stringify(O));W.write(n.Object),W.write(l(U.byteLength)),W.write(U)}}function c(W){switch(W.read(1).readUInt8(0)){case h.Undefined:return;case h.String:return W.read(i(W)).toString();case h.Buffer:return W.read(i(W)).buffer;case h.VSBuffer:return W.read(i(W));case h.Array:{const U=i(W),H=[];for(let se=0;se<U;se++)H.push(c(W));return H}case h.Object:return JSON.parse(W.read(i(W)).toString())}}class o{constructor(O,U,H=null,se=1e3){this.protocol=O,this.ctx=U,this.logger=H,this.timeoutDelay=se,this.channels=new Map,this.activeRequests=new Map,this.pendingRequests=new Map,this.protocolListener=this.protocol.onMessage($=>this.onRawMessage($)),this.sendResponse({type:200})}registerChannel(O,U){this.channels.set(O,U),setTimeout(()=>this.flushPendingRequests(O),0)}sendResponse(O){switch(O.type){case 200:{const U=this.send([O.type]);this.logger?.logOutgoing(U,0,1,v(O.type));return}case 201:case 202:case 204:case 203:{const U=this.send([O.type,O.id],O.data);this.logger?.logOutgoing(U,O.id,1,v(O.type),O.data);return}}}send(O,U=void 0){const H=new g;return r(H,O),r(H,U),this.sendBuffer(H.buffer)}sendBuffer(O){try{return this.protocol.send(O),O.byteLength}catch{return 0}}onRawMessage(O){const U=new S(O),H=c(U),se=c(U),$=H[0];switch($){case 100:return this.logger?.logIncoming(O.byteLength,H[1],1,`${w($)}: ${H[2]}.${H[3]}`,se),this.onPromise({type:$,id:H[1],channelName:H[2],name:H[3],arg:se});case 102:return this.logger?.logIncoming(O.byteLength,H[1],1,`${w($)}: ${H[2]}.${H[3]}`,se),this.onEventListen({type:$,id:H[1],channelName:H[2],name:H[3],arg:se});case 101:return this.logger?.logIncoming(O.byteLength,H[1],1,`${w($)}`),this.disposeActiveRequest({type:$,id:H[1]});case 103:return this.logger?.logIncoming(O.byteLength,H[1],1,`${w($)}`),this.disposeActiveRequest({type:$,id:H[1]})}}onPromise(O){const U=this.channels.get(O.channelName);if(!U){this.collectPendingRequest(O);return}const H=new L.CancellationTokenSource;let se;try{se=U.call(this.ctx,O.name,O.arg,H.token)}catch(M){se=Promise.reject(M)}const $=O.id;se.then(M=>{this.sendResponse({id:$,data:M,type:201}),this.activeRequests.delete(O.id)},M=>{M instanceof Error?this.sendResponse({id:$,data:{message:M.message,name:M.name,stack:M.stack?M.stack.split?M.stack.split(`
`):M.stack:void 0},type:202}):this.sendResponse({id:$,data:M,type:203}),this.activeRequests.delete(O.id)});const z=(0,m.toDisposable)(()=>H.cancel());this.activeRequests.set(O.id,z)}onEventListen(O){const U=this.channels.get(O.channelName);if(!U){this.collectPendingRequest(O);return}const H=O.id,$=U.listen(this.ctx,O.name,O.arg)(z=>this.sendResponse({id:H,data:z,type:204}));this.activeRequests.set(O.id,$)}disposeActiveRequest(O){const U=this.activeRequests.get(O.id);U&&(U.dispose(),this.activeRequests.delete(O.id))}collectPendingRequest(O){let U=this.pendingRequests.get(O.channelName);U||(U=[],this.pendingRequests.set(O.channelName,U));const H=setTimeout(()=>{console.error(`Unknown channel: ${O.channelName}`),O.type===100&&this.sendResponse({id:O.id,data:{name:"Unknown channel",message:`Channel name '${O.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);U.push({request:O,timeoutTimer:H})}flushPendingRequests(O){const U=this.pendingRequests.get(O);if(U){for(const H of U)switch(clearTimeout(H.timeoutTimer),H.request.type){case 100:this.onPromise(H.request);break;case 102:this.onEventListen(H.request);break}this.pendingRequests.delete(O)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),(0,m.dispose)(this.activeRequests.values()),this.activeRequests.clear()}}e.ChannelServer=o;var b;(function(W){W[W.LocalSide=0]="LocalSide",W[W.OtherSide=1]="OtherSide"})(b=e.RequestInitiator||(e.RequestInitiator={}));class D{constructor(O,U=null){this.protocol=O,this.isDisposed=!1,this.state=u.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new p.Emitter,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(H=>this.onBuffer(H)),this.logger=U}getChannel(O){const U=this;return{call(H,se,$){return U.isDisposed?Promise.reject(new P.CancellationError):U.requestPromise(O,H,se,$)},listen(H,se){return U.isDisposed?p.Event.None:U.requestEvent(O,H,se)}}}requestPromise(O,U,H,se=L.CancellationToken.None){const $=this.lastRequestId++,M={id:$,type:100,channelName:O,name:U,arg:H};if(se.isCancellationRequested)return Promise.reject(new P.CancellationError);let T;return new Promise((_,q)=>{if(se.isCancellationRequested)return q(new P.CancellationError);const Y=()=>{const oe=ge=>{switch(ge.type){case 201:this.handlers.delete($),_(ge.data);break;case 202:{this.handlers.delete($);const De=new Error(ge.data.message);De.stack=Array.isArray(ge.data.stack)?ge.data.stack.join(`
`):ge.data.stack,De.name=ge.data.name,q(De);break}case 203:this.handlers.delete($),q(ge.data);break}};this.handlers.set($,oe),this.sendRequest(M)};let B=null;this.state===u.Idle?Y():(B=(0,t.createCancelablePromise)(oe=>this.whenInitialized()),B.then(()=>{B=null,Y()}));const X=()=>{B?(B.cancel(),B=null):this.sendRequest({id:$,type:101}),q(new P.CancellationError)},J=se.onCancellationRequested(X);T=(0,m.combinedDisposable)((0,m.toDisposable)(X),J),this.activeRequests.add(T)}).finally(()=>{this.activeRequests.delete(T)})}requestEvent(O,U,H){const se=this.lastRequestId++,z={id:se,type:102,channelName:O,name:U,arg:H};let M=null;const T=new p.Emitter({onWillAddFirstListener:()=>{M=(0,t.createCancelablePromise)(_=>this.whenInitialized()),M.then(()=>{M=null,this.activeRequests.add(T),this.sendRequest(z)})},onDidRemoveLastListener:()=>{M?(M.cancel(),M=null):(this.activeRequests.delete(T),this.sendRequest({id:se,type:103}))}}),F=_=>T.fire(_.data);return this.handlers.set(se,F),T.event}sendRequest(O){switch(O.type){case 100:case 102:{const U=this.send([O.type,O.id,O.channelName,O.name],O.arg);this.logger?.logOutgoing(U,O.id,0,`${w(O.type)}: ${O.channelName}.${O.name}`,O.arg);return}case 101:case 103:{const U=this.send([O.type,O.id]);this.logger?.logOutgoing(U,O.id,0,w(O.type));return}}}send(O,U=void 0){const H=new g;return r(H,O),r(H,U),this.sendBuffer(H.buffer)}sendBuffer(O){try{return this.protocol.send(O),O.byteLength}catch{return 0}}onBuffer(O){const U=new S(O),H=c(U),se=c(U),$=H[0];switch($){case 200:return this.logger?.logIncoming(O.byteLength,0,0,v($)),this.onResponse({type:H[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(O.byteLength,H[1],0,v($),se),this.onResponse({type:H[0],id:H[1],data:se})}}onResponse(O){if(O.type===200){this.state=u.Idle,this._onDidInitialize.fire();return}this.handlers.get(O.id)?.(O)}get onDidInitializePromise(){return p.Event.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===u.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),(0,m.dispose)(this.activeRequests.values()),this.activeRequests.clear()}}we([R.memoize],D.prototype,"onDidInitializePromise",null),e.ChannelClient=D;class A{get connections(){const O=[];return this._connections.forEach(U=>O.push(U)),O}constructor(O){this.channels=new Map,this._connections=new Set,this._onDidAddConnection=new p.Emitter,this.onDidAddConnection=this._onDidAddConnection.event,this._onDidRemoveConnection=new p.Emitter,this.onDidRemoveConnection=this._onDidRemoveConnection.event,O(({protocol:U,onDidClientDisconnect:H})=>{p.Event.once(U.onMessage)($=>{const z=new S($),M=c(z),T=new o(U,M),F=new D(U);this.channels.forEach((q,Y)=>T.registerChannel(Y,q));const _={channelServer:T,channelClient:F,ctx:M};this._connections.add(_),this._onDidAddConnection.fire(_),H(()=>{T.dispose(),F.dispose(),this._connections.delete(_),this._onDidRemoveConnection.fire(_)})})})}getChannel(O,U){const H=this;return{call(se,$,z){let M;if((0,E.isFunction)(U)){const F=(0,C.getRandomElement)(H.connections.filter(U));M=F?Promise.resolve(F):p.Event.toPromise(p.Event.filter(H.onDidAddConnection,U))}else M=U.routeCall(H,se,$);const T=M.then(F=>F.channelClient.getChannel(O));return G(T).call(se,$,z)},listen(se,$){if((0,E.isFunction)(U))return H.getMulticastEvent(O,U,se,$);const z=U.routeEvent(H,se,$).then(M=>M.channelClient.getChannel(O));return G(z).listen(se,$)}}}getMulticastEvent(O,U,H,se){const $=this;let z=new m.DisposableStore;const M=new p.Emitter({onWillAddFirstListener:()=>{z=new m.DisposableStore;const T=new p.EventMultiplexer,F=new Map,_=Y=>{const X=Y.channelClient.getChannel(O).listen(H,se),J=T.add(X);F.set(Y,J)},q=Y=>{const B=F.get(Y);!B||(B.dispose(),F.delete(Y))};$.connections.filter(U).forEach(_),p.Event.filter($.onDidAddConnection,U)(_,void 0,z),$.onDidRemoveConnection(q,void 0,z),T.event(M.fire,M,z),z.add(T)},onDidRemoveLastListener:()=>{z.dispose()}});return M.event}registerChannel(O,U){this.channels.set(O,U),this._connections.forEach(H=>{H.channelServer.registerChannel(O,U)})}dispose(){this.channels.clear(),this._connections.clear(),this._onDidAddConnection.dispose(),this._onDidRemoveConnection.dispose()}}e.IPCServer=A;class N{constructor(O,U,H=null){const se=new g;r(se,U),O.send(se.buffer),this.channelClient=new D(O,H),this.channelServer=new o(O,U,H)}getChannel(O){return this.channelClient.getChannel(O)}registerChannel(O,U){this.channelServer.registerChannel(O,U)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}e.IPCClient=N;function G(W){return{call(O,U,H){return W.then(se=>se.call(O,U,H))},listen(O,U){const H=new p.Relay;return W.then(se=>H.input=se.listen(O,U)),H.event}}}e.getDelayedChannel=G;function ae(W){let O=!1;return{call(U,H,se){return O?W.call(U,H,se):(0,t.timeout)(0).then(()=>O=!0).then(()=>W.call(U,H,se))},listen(U,H){if(O)return W.listen(U,H);const se=new p.Relay;return(0,t.timeout)(0).then(()=>O=!0).then(()=>se.input=W.listen(U,H)),se.event}}}e.getNextTickChannel=ae;class x{constructor(O){this.fn=O}routeCall(O){return this.route(O)}routeEvent(O){return this.route(O)}async route(O){for(const U of O.connections)if(await Promise.resolve(this.fn(U.ctx)))return Promise.resolve(U);return await p.Event.toPromise(O.onDidAddConnection),await this.route(O)}}e.StaticRouter=x;var Q;(function(W){function O($,z){const M=$,T=z&&z.disableMarshalling,F=new Map;for(const _ in M)H(_)&&F.set(_,p.Event.buffer(M[_],!0));return new class{listen(_,q,Y){const B=F.get(q);if(B)return B;if(se(q)){const X=M[q];if(typeof X=="function")return X.call(M,Y)}throw new Error(`Event not found: ${q}`)}call(_,q,Y){const B=M[q];if(typeof B=="function"){if(!T&&Array.isArray(Y))for(let X=0;X<Y.length;X++)Y[X]=(0,y.revive)(Y[X]);return B.apply(M,Y)}throw new Error(`Method not found: ${q}`)}}}W.fromService=O;function U($,z){const M=z&&z.disableMarshalling;return new Proxy({},{get(T,F){if(typeof F=="string")return z?.properties?.has(F)?z.properties.get(F):se(F)?function(_){return $.listen(F,_)}:H(F)?$.listen(F):async function(..._){let q;z&&!(0,E.isUndefinedOrNull)(z.context)?q=[z.context,..._]:q=_;const Y=await $.call(F,q);return M?Y:(0,y.revive)(Y)};throw new Error(`Property not found: ${String(F)}`)}})}W.toService=U;function H($){return $[0]==="o"&&$[1]==="n"&&I.isUpperAsciiLetter($.charCodeAt(2))}function se($){return/^onDynamic/.test($)&&I.isUpperAsciiLetter($.charCodeAt(9))}})(Q=e.ProxyChannel||(e.ProxyChannel={}));const re=[["#2977B1","#FC802D","#34A13A","#D3282F","#9366BA"],["#8B564C","#E177C0","#7F7F7F","#BBBE3D","#2EBECD"]];function ne(W){if(Array.isArray(W))return W;if(W&&typeof W=="object"&&typeof W.toString=="function"){const O=W.toString();if(O!=="[object Object]")return O}return W}function fe(W){return Array.isArray(W)?W.map(ne):ne(W)}function K(W,O,U,H,se,$,z){z=fe(z);const M=re[se],T=M[H%M.length];let F=[`%c[${W}]%c[${String(O).padStart(7," ")}]%c[len: ${String(U).padStart(5," ")}]%c${String(H).padStart(5," ")} - ${$}`,"color: darkgreen","color: grey","color: grey",`color: ${T}`];/\($/.test($)?(F=F.concat(z),F.push(")")):F.push(z),console.log.apply(console,F)}class le{constructor(O,U){this._outgoingPrefix=O,this._incomingPrefix=U,this._totalIncoming=0,this._totalOutgoing=0}logOutgoing(O,U,H,se,$){this._totalOutgoing+=O,K(this._outgoingPrefix,this._totalOutgoing,O,U,H,se,$)}logIncoming(O,U,H,se,$){this._totalIncoming+=O,K(this._incomingPrefix,this._totalIncoming,O,U,H,se,$)}}e.IPCLogger=le}),define(ee[145],te([0,1,17,3,47]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Client=e.Protocol=void 0;class L{constructor(p){this.port=p,this.onMessage=t.Event.fromDOMEventEmitter(this.port,"message",m=>C.VSBuffer.wrap(m.data)),p.start()}send(p){this.port.postMessage(p.buffer)}disconnect(){this.port.close()}}e.Protocol=L;class R extends k.IPCClient{constructor(p,m){const y=new L(p);super(y,m),this.protocol=y}dispose(){this.protocol.disconnect()}}e.Client=R}),define(ee[102],te([0,1,17,3,2,47]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PersistentProtocol=e.BufferedEmitter=e.Client=e.Protocol=e.ProtocolConstants=e.ChunkStream=e.SocketCloseEventType=e.SocketDiagnostics=e.SocketDiagnosticsEventType=void 0;var R;(function(a){a.Created="created",a.Read="read",a.Write="write",a.Open="open",a.Error="error",a.Close="close",a.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",a.NodeEndReceived="nodeEndReceived",a.NodeEndSent="nodeEndSent",a.NodeDrainBegin="nodeDrainBegin",a.NodeDrainEnd="nodeDrainEnd",a.zlibInflateError="zlibInflateError",a.zlibInflateData="zlibInflateData",a.zlibInflateInitialWrite="zlibInflateInitialWrite",a.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",a.zlibInflateWrite="zlibInflateWrite",a.zlibInflateFlushFired="zlibInflateFlushFired",a.zlibDeflateError="zlibDeflateError",a.zlibDeflateData="zlibDeflateData",a.zlibDeflateWrite="zlibDeflateWrite",a.zlibDeflateFlushFired="zlibDeflateFlushFired",a.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",a.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",a.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",a.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",a.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",a.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",a.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",a.ProtocolHeaderRead="protocolHeaderRead",a.ProtocolMessageRead="protocolMessageRead",a.ProtocolHeaderWrite="protocolHeaderWrite",a.ProtocolMessageWrite="protocolMessageWrite",a.ProtocolWrite="protocolWrite"})(R=e.SocketDiagnosticsEventType||(e.SocketDiagnosticsEventType={}));var P;(function(a){a.enableDiagnostics=!1,a.records=[];const r=new WeakMap;let c=0;function o(D,A){if(!r.has(D)){const N=String(++c);r.set(D,N)}return r.get(D)}function b(D,A,N,G){if(!a.enableDiagnostics)return;const ae=o(D,A);if(G instanceof C.VSBuffer||G instanceof Uint8Array||G instanceof ArrayBuffer||ArrayBuffer.isView(G)){const x=C.VSBuffer.alloc(G.byteLength);x.set(G),a.records.push({timestamp:Date.now(),id:ae,label:A,type:N,buff:x})}else a.records.push({timestamp:Date.now(),id:ae,label:A,type:N,data:G})}a.traceSocketEvent=b})(P=e.SocketDiagnostics||(e.SocketDiagnostics={}));var p;(function(a){a[a.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",a[a.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(p=e.SocketCloseEventType||(e.SocketCloseEventType={}));let m=null;function y(){return m||(m=C.VSBuffer.alloc(0)),m}class I{get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(r){this._chunks.push(r),this._totalLength+=r.byteLength}read(r){return this._read(r,!0)}peek(r){return this._read(r,!1)}_read(r,c){if(r===0)return y();if(r>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===r){const A=this._chunks[0];return c&&(this._chunks.shift(),this._totalLength-=r),A}if(this._chunks[0].byteLength>r){const A=this._chunks[0].slice(0,r);return c&&(this._chunks[0]=this._chunks[0].slice(r),this._totalLength-=r),A}const o=C.VSBuffer.alloc(r);let b=0,D=0;for(;r>0;){const A=this._chunks[D];if(A.byteLength>r){const N=A.slice(0,r);o.set(N,b),b+=r,c&&(this._chunks[D]=A.slice(r),this._totalLength-=r),r-=r}else o.set(A,b),b+=A.byteLength,c?(this._chunks.shift(),this._totalLength-=A.byteLength):D++,r-=A.byteLength}return o}}e.ChunkStream=I;var E;(function(a){a[a.None=0]="None",a[a.Regular=1]="Regular",a[a.Control=2]="Control",a[a.Ack=3]="Ack",a[a.Disconnect=5]="Disconnect",a[a.ReplayRequest=6]="ReplayRequest",a[a.Pause=7]="Pause",a[a.Resume=8]="Resume",a[a.KeepAlive=9]="KeepAlive"})(E||(E={}));function d(a){switch(a){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var w;(function(a){a[a.HeaderLength=13]="HeaderLength",a[a.AcknowledgeTime=2e3]="AcknowledgeTime",a[a.TimeoutTime=2e4]="TimeoutTime",a[a.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",a[a.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime"})(w=e.ProtocolConstants||(e.ProtocolConstants={}));class f{constructor(r,c,o,b){this.type=r,this.id=c,this.ack=o,this.data=b,this.writtenTime=0}get size(){return this.data.byteLength}}class v extends k.Disposable{constructor(r){super(),this._onMessage=this._register(new t.Emitter),this.onMessage=this._onMessage.event,this._state={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this._socket=r,this._isDisposed=!1,this._incomingData=new I,this._register(this._socket.onData(c=>this.acceptChunk(c))),this.lastReadTime=Date.now()}acceptChunk(r){if(!(!r||r.byteLength===0))for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(r);this._incomingData.byteLength>=this._state.readLen;){const c=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=c.readUInt32BE(9),this._state.messageType=c.readUInt8(0),this._state.id=c.readUInt32BE(1),this._state.ack=c.readUInt32BE(5),this._socket.traceSocketEvent("protocolHeaderRead",{messageType:d(this._state.messageType),id:this._state.id,ack:this._state.ack,messageSize:this._state.readLen});else{const o=this._state.messageType,b=this._state.id,D=this._state.ack;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._socket.traceSocketEvent("protocolMessageRead",c),this._onMessage.fire(new f(o,b,D,c)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class u{constructor(r){this._writeNowTimeout=null,this._isDisposed=!1,this._isPaused=!1,this._socket=r,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this._isDisposed=!0}drain(){return this.flush(),this._socket.drain()}flush(){this._writeNow()}pause(){this._isPaused=!0}resume(){this._isPaused=!1,this._scheduleWriting()}write(r){if(this._isDisposed)return;r.writtenTime=Date.now(),this.lastWriteTime=Date.now();const c=C.VSBuffer.alloc(13);c.writeUInt8(r.type,0),c.writeUInt32BE(r.id,1),c.writeUInt32BE(r.ack,5),c.writeUInt32BE(r.data.byteLength,9),this._socket.traceSocketEvent("protocolHeaderWrite",{messageType:d(r.type),id:r.id,ack:r.ack,messageSize:r.data.byteLength}),this._socket.traceSocketEvent("protocolMessageWrite",r.data),this._writeSoon(c,r.data)}_bufferAdd(r,c){const o=this._totalLength===0;return this._data.push(r,c),this._totalLength+=r.byteLength+c.byteLength,o}_bufferTake(){const r=C.VSBuffer.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,r}_writeSoon(r,c){this._bufferAdd(r,c)&&this._scheduleWriting()}_scheduleWriting(){this._writeNowTimeout||(this._writeNowTimeout=setTimeout(()=>{this._writeNowTimeout=null,this._writeNow()}))}_writeNow(){if(this._totalLength===0||this._isPaused)return;const r=this._bufferTake();this._socket.traceSocketEvent("protocolWrite",{byteLength:r.byteLength}),this._socket.write(r)}}class S extends k.Disposable{constructor(r){super(),this._onMessage=new t.Emitter,this.onMessage=this._onMessage.event,this._onDidDispose=new t.Emitter,this.onDidDispose=this._onDidDispose.event,this._socket=r,this._socketWriter=this._register(new u(this._socket)),this._socketReader=this._register(new v(this._socket)),this._register(this._socketReader.onMessage(c=>{c.type===1&&this._onMessage.fire(c.data)})),this._register(this._socket.onClose(()=>this._onDidDispose.fire()))}drain(){return this._socketWriter.drain()}getSocket(){return this._socket}sendDisconnect(){}send(r){this._socketWriter.write(new f(1,0,0,r))}}e.Protocol=S;class g extends L.IPCClient{static fromSocket(r,c){return new g(new S(r),c)}get onDidDispose(){return this.protocol.onDidDispose}constructor(r,c,o=null){super(r,c,o),this.protocol=r}dispose(){super.dispose();const r=this.protocol.getSocket();this.protocol.sendDisconnect(),this.protocol.dispose(),r.end()}}e.Client=g;class h{constructor(){this._hasListeners=!1,this._isDeliveringMessages=!1,this._bufferedMessages=[],this._emitter=new t.Emitter({onWillAddFirstListener:()=>{this._hasListeners=!0,queueMicrotask(()=>this._deliverMessages())},onDidRemoveLastListener:()=>{this._hasListeners=!1}}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(r){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(r):this._emitter.fire(r):this._bufferedMessages.push(r)}flushBuffer(){this._bufferedMessages=[]}}e.BufferedEmitter=h;class l{constructor(r){this.data=r,this.next=null}}class i{constructor(){this._first=null,this._last=null}length(){let r=0,c=this._first;for(;c;)c=c.next,r++;return r}peek(){return this._first?this._first.data:null}toArray(){const r=[];let c=0,o=this._first;for(;o;)r[c++]=o.data,o=o.next;return r}pop(){if(!!this._first){if(this._first===this._last){this._first=null,this._last=null;return}this._first=this._first.next}}push(r){const c=new l(r);if(!this._first){this._first=c,this._last=c;return}this._last.next=c,this._last=c}}class s{static getInstance(){return s._INSTANCE||(s._INSTANCE=new s),s._INSTANCE}constructor(){this.lastRuns=[];const r=Date.now();for(let c=0;c<s._HISTORY_LENGTH;c++)this.lastRuns[c]=r-1e3*c;setInterval(()=>{for(let c=s._HISTORY_LENGTH;c>=1;c--)this.lastRuns[c]=this.lastRuns[c-1];this.lastRuns[0]=Date.now()},1e3)}load(){const r=Date.now(),c=(1+s._HISTORY_LENGTH)*1e3;let o=0;for(let b=0;b<s._HISTORY_LENGTH;b++)r-this.lastRuns[b]<=c&&o++;return 1-o/s._HISTORY_LENGTH}hasHighLoad(){return this.load()>=.5}}s._HISTORY_LENGTH=10,s._INSTANCE=null;class n{get unacknowledgedCount(){return this._outgoingMsgId-this._outgoingAckId}constructor(r,c=null,o=s.getInstance()){this._onControlMessage=new h,this.onControlMessage=this._onControlMessage.event,this._onMessage=new h,this.onMessage=this._onMessage.event,this._onDidDispose=new h,this.onDidDispose=this._onDidDispose.event,this._onSocketClose=new h,this.onSocketClose=this._onSocketClose.event,this._onSocketTimeout=new h,this.onSocketTimeout=this._onSocketTimeout.event,this._loadEstimator=o,this._isReconnecting=!1,this._outgoingUnackMsg=new i,this._outgoingMsgId=0,this._outgoingAckId=0,this._outgoingAckTimeout=null,this._incomingMsgId=0,this._incomingAckId=0,this._incomingMsgLastTime=0,this._incomingAckTimeout=null,this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socketDisposables=[],this._socket=r,this._socketWriter=new u(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new v(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(b=>this._receiveMessage(b))),this._socketDisposables.push(this._socket.onClose(b=>this._onSocketClose.fire(b))),c&&this._socketReader.acceptChunk(c),this._keepAliveInterval=setInterval(()=>{this._sendKeepAlive()},5e3)}dispose(){this._outgoingAckTimeout&&(clearTimeout(this._outgoingAckTimeout),this._outgoingAckTimeout=null),this._incomingAckTimeout&&(clearTimeout(this._incomingAckTimeout),this._incomingAckTimeout=null),this._keepAliveInterval&&(clearInterval(this._keepAliveInterval),this._keepAliveInterval=null),this._socketDisposables=(0,k.dispose)(this._socketDisposables)}drain(){return this._socketWriter.drain()}sendDisconnect(){const r=new f(5,0,0,y());this._socketWriter.write(r),this._socketWriter.flush()}sendPause(){const r=new f(7,0,0,y());this._socketWriter.write(r)}sendResume(){const r=new f(8,0,0,y());this._socketWriter.write(r)}pauseSocketWriting(){this._socketWriter.pause()}getSocket(){return this._socket}getMillisSinceLastIncomingData(){return Date.now()-this._socketReader.lastReadTime}beginAcceptReconnection(r,c){this._isReconnecting=!0,this._socketDisposables=(0,k.dispose)(this._socketDisposables),this._onControlMessage.flushBuffer(),this._onSocketClose.flushBuffer(),this._onSocketTimeout.flushBuffer(),this._socket.dispose(),this._lastReplayRequestTime=0,this._lastSocketTimeoutTime=Date.now(),this._socket=r,this._socketWriter=new u(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new v(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(o=>this._receiveMessage(o))),this._socketDisposables.push(this._socket.onClose(o=>this._onSocketClose.fire(o))),this._socketReader.acceptChunk(c)}endAcceptReconnection(){this._isReconnecting=!1,this._incomingAckId=this._incomingMsgId;const r=new f(3,0,this._incomingAckId,y());this._socketWriter.write(r);const c=this._outgoingUnackMsg.toArray();for(let o=0,b=c.length;o<b;o++)this._socketWriter.write(c[o]);this._recvAckCheck()}acceptDisconnect(){this._onDidDispose.fire()}_receiveMessage(r){if(r.ack>this._outgoingAckId){this._outgoingAckId=r.ack;do{const c=this._outgoingUnackMsg.peek();if(c&&c.id<=r.ack)this._outgoingUnackMsg.pop();else break}while(!0)}switch(r.type){case 0:break;case 1:{if(r.id>this._incomingMsgId)if(r.id!==this._incomingMsgId+1){const c=Date.now();c-this._lastReplayRequestTime>1e4&&(this._lastReplayRequestTime=c,this._socketWriter.write(new f(6,0,0,y())))}else this._incomingMsgId=r.id,this._incomingMsgLastTime=Date.now(),this._sendAckCheck(),this._onMessage.fire(r.data);break}case 2:{this._onControlMessage.fire(r.data);break}case 3:break;case 5:{this._onDidDispose.fire();break}case 6:{const c=this._outgoingUnackMsg.toArray();for(let o=0,b=c.length;o<b;o++)this._socketWriter.write(c[o]);this._recvAckCheck();break}case 7:{this._socketWriter.pause();break}case 8:{this._socketWriter.resume();break}case 9:break}}readEntireBuffer(){return this._socketReader.readEntireBuffer()}flush(){this._socketWriter.flush()}send(r){const c=++this._outgoingMsgId;this._incomingAckId=this._incomingMsgId;const o=new f(1,c,this._incomingAckId,r);this._outgoingUnackMsg.push(o),this._isReconnecting||(this._socketWriter.write(o),this._recvAckCheck())}sendControl(r){const c=new f(2,0,0,r);this._socketWriter.write(c)}_sendAckCheck(){if(this._incomingMsgId<=this._incomingAckId||this._incomingAckTimeout)return;const r=Date.now()-this._incomingMsgLastTime;if(r>=2e3){this._sendAck();return}this._incomingAckTimeout=setTimeout(()=>{this._incomingAckTimeout=null,this._sendAckCheck()},2e3-r+5)}_recvAckCheck(){if(this._outgoingMsgId<=this._outgoingAckId||this._outgoingAckTimeout||this._isReconnecting)return;const r=this._outgoingUnackMsg.peek(),c=Date.now()-r.writtenTime,o=Date.now()-this._socketReader.lastReadTime,b=Date.now()-this._lastSocketTimeoutTime;if(c>=2e4&&o>=2e4&&b>=2e4&&!this._loadEstimator.hasHighLoad()){this._lastSocketTimeoutTime=Date.now(),this._onSocketTimeout.fire({unacknowledgedMsgCount:this._outgoingUnackMsg.length(),timeSinceOldestUnacknowledgedMsg:c,timeSinceLastReceivedSomeData:o});return}const D=Math.max(2e4-c,2e4-o,2e4-b,500);this._outgoingAckTimeout=setTimeout(()=>{this._outgoingAckTimeout=null,this._recvAckCheck()},D)}_sendAck(){if(this._incomingMsgId<=this._incomingAckId)return;this._incomingAckId=this._incomingMsgId;const r=new f(3,0,this._incomingAckId,y());this._socketWriter.write(r)}_sendKeepAlive(){const r=new f(9,0,0,y());this._socketWriter.write(r)}}e.PersistentProtocol=n}),define(ee[146],te([0,1,41,17,3,2,47,131]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Server=void 0;function p(y,I){const E=k.Event.fromNodeEventEmitter(C.validatedIpcMain,I,(w,f)=>({event:w,message:f})),d=k.Event.filter(E,({event:w})=>w.sender.id===y);return k.Event.map(d,({message:w})=>w&&t.VSBuffer.wrap(w))}class m extends R.IPCServer{static getOnDidClientConnect(){const I=k.Event.fromNodeEventEmitter(C.validatedIpcMain,"vscode:hello",({sender:E})=>E);return k.Event.map(I,E=>{const d=E.id;m.Clients.get(d)?.dispose();const f=new k.Emitter;m.Clients.set(d,(0,L.toDisposable)(()=>f.fire()));const v=p(d,"vscode:message"),u=k.Event.any(k.Event.signal(p(d,"vscode:disconnect")),f.event);return{protocol:new P.Protocol(E,v),onDidClientDisconnect:u}})}constructor(){super(m.getOnDidClientConnect())}}e.Server=m,m.Clients=new Map}),define(ee[103],te([0,1,41,3,29,145]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.Client=void 0;class R extends L.Client{constructor(m,y){super({addEventListener:(I,E)=>m.addListener(I,E),removeEventListener:(I,E)=>m.removeListener(I,E),postMessage:I=>m.postMessage(I),start:()=>m.start(),close:()=>m.close()},y)}}e.Client=R;async function P(p){if(p.isDestroyed()||p.webContents.isDestroyed())throw new Error("ipc.mp#connect: Cannot talk to window because it is closed or destroyed");const m=(0,k.generateUuid)();p.webContents.send("vscode:createMessageChannel",m);const y=t.Event.fromNodeEventEmitter(C.validatedIpcMain,"vscode:createMessageChannelResult",(E,d)=>({nonce:d,port:E.ports[0]})),{port:I}=await t.Event.toPromise(t.Event.once(t.Event.filter(y,E=>E.nonce===m)));return I}e.connect=P}),define(ee[147],te([0,1,46,8,17,22,140,15,3,2,44,82,79,47]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Client=e.Server=void 0;class w extends d.ChannelServer{constructor(u){super({send:S=>{try{process.send?.(S.buffer.toString("base64"))}catch{}},onMessage:p.Event.fromNodeEventEmitter(process,"message",S=>k.VSBuffer.wrap(Buffer.from(S,"base64")))},u),process.once("disconnect",()=>this.dispose())}}e.Server=w;class f{constructor(u,S){this.modulePath=u,this.options=S,this.activeRequests=new Set,this.channels=new Map,this._onDidProcessExit=new p.Emitter,this.onDidProcessExit=this._onDidProcessExit.event;const g=S&&S.timeout?S.timeout:6e4;this.disposeDelayer=new t.Delayer(g),this.child=null,this._client=null}getChannel(u){const S=this;return{call(g,h,l){return S.requestPromise(u,g,h,l)},listen(g,h){return S.requestEvent(u,g,h)}}}requestPromise(u,S,g,h=L.CancellationToken.None){if(!this.disposeDelayer)return Promise.reject(new Error("disposed"));if(h.isCancellationRequested)return Promise.reject(P.canceled());this.disposeDelayer.cancel();const l=this.getCachedChannel(u),i=(0,t.createCancelablePromise)(a=>l.call(S,g,a)),s=h.onCancellationRequested(()=>i.cancel()),n=(0,m.toDisposable)(()=>i.cancel());return this.activeRequests.add(n),i.finally(()=>{s.dispose(),this.activeRequests.delete(n),this.activeRequests.size===0&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}),i}requestEvent(u,S,g){if(!this.disposeDelayer)return p.Event.None;this.disposeDelayer.cancel();let h;const l=new p.Emitter({onWillAddFirstListener:()=>{h=this.getCachedChannel(u).listen(S,g)(l.fire,l),this.activeRequests.add(h)},onDidRemoveLastListener:()=>{this.activeRequests.delete(h),h.dispose(),this.activeRequests.size===0&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}});return l.event}get client(){if(!this._client){const u=this.options&&this.options.args?this.options.args:[],S=Object.create(null);S.env={...(0,y.deepClone)(process.env),VSCODE_PARENT_PID:String(process.pid)},this.options&&this.options.env&&(S.env={...S.env,...this.options.env}),this.options&&this.options.freshExecArgv&&(S.execArgv=[]),this.options&&typeof this.options.debug=="number"&&(S.execArgv=["--nolazy","--inspect="+this.options.debug]),this.options&&typeof this.options.debugBrk=="number"&&(S.execArgv=["--nolazy","--inspect-brk="+this.options.debugBrk]),S.execArgv===void 0&&(S.execArgv=process.execArgv.filter(r=>!/^--inspect(-brk)?=/.test(r))),(0,E.removeDangerousEnvVariables)(S.env),this.child=(0,C.fork)(this.modulePath,u,S);const g=new p.Emitter;p.Event.fromNodeEventEmitter(this.child,"message",r=>r)(r=>{if((0,R.isRemoteConsoleLog)(r)){(0,R.log)(r,`IPC Library: ${this.options.serverName}`);return}g.fire(k.VSBuffer.wrap(Buffer.from(r,"base64")))});const l=this.options.useQueue?(0,I.createQueuedSender)(this.child):this.child,i=r=>this.child&&this.child.connected&&l.send(r.buffer.toString("base64")),s=g.event,n={send:i,onMessage:s};this._client=new d.ChannelClient(n);const a=()=>this.disposeClient();process.once("exit",a),this.child.on("error",r=>console.warn('IPC "'+this.options.serverName+'" errored with '+r)),this.child.on("exit",(r,c)=>{process.removeListener("exit",a),this.activeRequests.forEach(o=>(0,m.dispose)(o)),this.activeRequests.clear(),r!==0&&c!=="SIGTERM"&&console.warn('IPC "'+this.options.serverName+'" crashed with exit code '+r+" and signal "+c),this.disposeDelayer?.cancel(),this.disposeClient(),this._onDidProcessExit.fire({code:r,signal:c})})}return this._client}getCachedChannel(u){let S=this.channels.get(u);return S||(S=this.client.getChannel(u),this.channels.set(u,S)),S}disposeClient(){this._client&&(this.child&&(this.child.kill(),this.child=null),this._client=null,this.channels.clear())}dispose(){this._onDidProcessExit.dispose(),this.disposeDelayer?.cancel(),this.disposeDelayer=void 0,this.disposeClient(),this.activeRequests.clear()}}e.Client=f}),define(ee[83],te([0,1,17,15,3,2,9,4,29,47,102]),function(j,e,C,t,k,L,R,P,p,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.serve=e.Server=e.createStaticIPCHandle=e.createRandomIPCHandle=e.XDG_RUNTIME_DIR=e.WebSocketNodeSocket=e.NodeSocket=void 0;function I(){return{crypto:globalThis._VSCODE_NODE_MODULES.crypto,zlib:globalThis._VSCODE_NODE_MODULES.zlib,net:globalThis._VSCODE_NODE_MODULES.net,os:globalThis._VSCODE_NODE_MODULES.os}}class E{traceSocketEvent(o,b){y.SocketDiagnostics.traceSocketEvent(this.socket,this.debugLabel,o,b)}constructor(o,b=""){this._canWrite=!0,this.debugLabel=b,this.socket=o,this.traceSocketEvent("created",{type:"NodeSocket"}),this._errorListener=D=>{if(this.traceSocketEvent("error",{code:D?.code,message:D?.message}),D){if(D.code==="EPIPE")return;(0,t.onUnexpectedError)(D)}},this.socket.on("error",this._errorListener),this._closeListener=D=>{this.traceSocketEvent("close",{hadError:D}),this._canWrite=!1},this.socket.on("close",this._closeListener),this._endListener=()=>{this.traceSocketEvent("nodeEndReceived"),this._canWrite=!1},this.socket.on("end",this._endListener)}dispose(){this.socket.off("error",this._errorListener),this.socket.off("close",this._closeListener),this.socket.off("end",this._endListener),this.socket.destroy()}onData(o){const b=D=>{this.traceSocketEvent("read",D),o(C.VSBuffer.wrap(D))};return this.socket.on("data",b),{dispose:()=>this.socket.off("data",b)}}onClose(o){const b=D=>{o({type:0,hadError:D,error:void 0})};return this.socket.on("close",b),{dispose:()=>this.socket.off("close",b)}}onEnd(o){const b=()=>{o()};return this.socket.on("end",b),{dispose:()=>this.socket.off("end",b)}}write(o){if(!(this.socket.destroyed||!this._canWrite))try{this.traceSocketEvent("write",o),this.socket.write(o.buffer,b=>{if(b){if(b.code==="EPIPE")return;(0,t.onUnexpectedError)(b)}})}catch(b){if(b.code==="EPIPE")return;(0,t.onUnexpectedError)(b)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((o,b)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),o();return}const D=()=>{this.socket.off("close",D),this.socket.off("end",D),this.socket.off("error",D),this.socket.off("timeout",D),this.socket.off("drain",D),this.traceSocketEvent("nodeDrainEnd"),o()};this.socket.on("close",D),this.socket.on("end",D),this.socket.on("error",D),this.socket.on("timeout",D),this.socket.on("drain",D)})}}e.NodeSocket=E;var d;(function(c){c[c.MinHeaderByteSize=2]="MinHeaderByteSize"})(d||(d={}));var w;(function(c){c[c.PeekHeader=1]="PeekHeader",c[c.ReadHeader=2]="ReadHeader",c[c.ReadBody=3]="ReadBody",c[c.Fin=4]="Fin"})(w||(w={}));class f extends L.Disposable{get permessageDeflate(){return this._flowManager.permessageDeflate}get recordedInflateBytes(){return this._flowManager.recordedInflateBytes}traceSocketEvent(o,b){this.socket.traceSocketEvent(o,b)}constructor(o,b,D,A){super(),this._onData=this._register(new k.Emitter),this._onClose=this._register(new k.Emitter),this._isEnded=!1,this._state={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0},this.socket=o,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:b,inflateBytesLength:D?.byteLength||0,recordInflateBytes:A}),this._flowManager=this._register(new v(this,b,D,A,this._onData,(N,G)=>this._write(N,G))),this._register(this._flowManager.onError(N=>{console.error(N),(0,t.onUnexpectedError)(N),this._onClose.fire({type:0,hadError:!0,error:N})})),this._incomingData=new y.ChunkStream,this._register(this.socket.onData(N=>this._acceptChunk(N))),this._register(this.socket.onClose(N=>this._onClose.fire(N)))}dispose(){this._flowManager.isProcessingWriteQueue()?this._register(this._flowManager.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(o){return this._onData.event(o)}onClose(o){return this._onClose.event(o)}onEnd(o){return this.socket.onEnd(o)}write(o){this._flowManager.writeMessage(o)}_write(o,b){if(this._isEnded)return;this.traceSocketEvent("webSocketNodeSocketWrite",o);let D=2;o.byteLength<126?D+=0:o.byteLength<2**16?D+=2:D+=8;const A=C.VSBuffer.alloc(D);if(b?A.writeUInt8(194,0):A.writeUInt8(130,0),o.byteLength<126)A.writeUInt8(o.byteLength,1);else if(o.byteLength<2**16){A.writeUInt8(126,1);let N=1;A.writeUInt8(o.byteLength>>>8&255,++N),A.writeUInt8(o.byteLength>>>0&255,++N)}else{A.writeUInt8(127,1);let N=1;A.writeUInt8(0,++N),A.writeUInt8(0,++N),A.writeUInt8(0,++N),A.writeUInt8(0,++N),A.writeUInt8(o.byteLength>>>24&255,++N),A.writeUInt8(o.byteLength>>>16&255,++N),A.writeUInt8(o.byteLength>>>8&255,++N),A.writeUInt8(o.byteLength>>>0&255,++N)}this.socket.write(C.VSBuffer.concat([A,o]))}end(){this._isEnded=!0,this.socket.end()}_acceptChunk(o){if(o.byteLength!==0){for(this._incomingData.acceptChunk(o);this._incomingData.byteLength>=this._state.readLen;)if(this._state.state===1){const b=this._incomingData.peek(this._state.readLen),D=b.readUInt8(0),A=(D&128)>>>7,N=(D&64)>>>6,G=b.readUInt8(1),ae=(G&128)>>>7,x=G&127;this._state.state=2,this._state.readLen=2+(ae?4:0)+(x===126?2:0)+(x===127?8:0),this._state.fin=A,this._state.firstFrameOfMessage&&(this._state.compressed=Boolean(N)),this._state.firstFrameOfMessage=Boolean(A),this._state.mask=0,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this._state.readLen,compressed:this._state.compressed,fin:this._state.fin})}else if(this._state.state===2){const b=this._incomingData.read(this._state.readLen),D=b.readUInt8(1),A=(D&128)>>>7;let N=D&127,G=1;N===126?N=b.readUInt8(++G)*2**8+b.readUInt8(++G):N===127&&(N=b.readUInt8(++G)*0+b.readUInt8(++G)*0+b.readUInt8(++G)*0+b.readUInt8(++G)*0+b.readUInt8(++G)*2**24+b.readUInt8(++G)*2**16+b.readUInt8(++G)*2**8+b.readUInt8(++G));let ae=0;A&&(ae=b.readUInt8(++G)*2**24+b.readUInt8(++G)*2**16+b.readUInt8(++G)*2**8+b.readUInt8(++G)),this._state.state=3,this._state.readLen=N,this._state.mask=ae,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this._state.readLen,compressed:this._state.compressed,fin:this._state.fin,mask:this._state.mask})}else if(this._state.state===3){const b=this._incomingData.read(this._state.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",b),g(b,this._state.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",b),this._state.state=1,this._state.readLen=2,this._state.mask=0,this._flowManager.acceptFrame(b,this._state.compressed,!!this._state.fin)}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this._flowManager.isProcessingWriteQueue()&&await k.Event.toPromise(this._flowManager.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}}e.WebSocketNodeSocket=f;class v extends L.Disposable{get permessageDeflate(){return Boolean(this._zlibInflateStream&&this._zlibDeflateStream)}get recordedInflateBytes(){return this._zlibInflateStream?this._zlibInflateStream.recordedInflateBytes:C.VSBuffer.alloc(0)}constructor(o,b,D,A,N,G){super(),this._tracer=o,this._onData=N,this._writeFn=G,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._writeQueue=[],this._readQueue=[],this._onDidFinishProcessingWriteQueue=this._register(new k.Emitter),this.onDidFinishProcessingWriteQueue=this._onDidFinishProcessingWriteQueue.event,this._isProcessingWriteQueue=!1,this._isProcessingReadQueue=!1,b?(this._zlibInflateStream=this._register(new u(this._tracer,A,D,{windowBits:15})),this._zlibDeflateStream=this._register(new S(this._tracer,{windowBits:15})),this._register(this._zlibInflateStream.onError(ae=>this._onError.fire(ae))),this._register(this._zlibDeflateStream.onError(ae=>this._onError.fire(ae)))):(this._zlibInflateStream=null,this._zlibDeflateStream=null)}writeMessage(o){this._writeQueue.push(o),this._processWriteQueue()}async _processWriteQueue(){if(!this._isProcessingWriteQueue){for(this._isProcessingWriteQueue=!0;this._writeQueue.length>0;){const o=this._writeQueue.shift();if(this._zlibDeflateStream){const b=await this._deflateMessage(this._zlibDeflateStream,o);this._writeFn(b,!0)}else this._writeFn(o,!1)}this._isProcessingWriteQueue=!1,this._onDidFinishProcessingWriteQueue.fire()}}isProcessingWriteQueue(){return this._isProcessingWriteQueue}_deflateMessage(o,b){return new Promise((D,A)=>{o.write(b),o.flush(N=>D(N))})}acceptFrame(o,b,D){this._readQueue.push({data:o,isCompressed:b,isLastFrameOfMessage:D}),this._processReadQueue()}async _processReadQueue(){if(!this._isProcessingReadQueue){for(this._isProcessingReadQueue=!0;this._readQueue.length>0;){const o=this._readQueue.shift();if(this._zlibInflateStream&&o.isCompressed){const b=await this._inflateFrame(this._zlibInflateStream,o.data,o.isLastFrameOfMessage);this._onData.fire(b)}else this._onData.fire(o.data)}this._isProcessingReadQueue=!1}}_inflateFrame(o,b,D){return new Promise((A,N)=>{o.write(b),D&&o.write(C.VSBuffer.fromByteArray([0,0,255,255])),o.flush(G=>A(G))})}}class u extends L.Disposable{get recordedInflateBytes(){return this._recordInflateBytes?C.VSBuffer.concat(this._recordedInflateBytes):C.VSBuffer.alloc(0)}constructor(o,b,D,A){super(),this._tracer=o,this._recordInflateBytes=b,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._recordedInflateBytes=[],this._pendingInflateData=[],this._zlibInflate=I().zlib.createInflateRaw(A),this._zlibInflate.on("error",N=>{this._tracer.traceSocketEvent("zlibInflateError",{message:N?.message,code:N?.code}),this._onError.fire(N)}),this._zlibInflate.on("data",N=>{this._tracer.traceSocketEvent("zlibInflateData",N),this._pendingInflateData.push(C.VSBuffer.wrap(N))}),D&&(this._tracer.traceSocketEvent("zlibInflateInitialWrite",D.buffer),this._zlibInflate.write(D.buffer),this._zlibInflate.flush(()=>{this._tracer.traceSocketEvent("zlibInflateInitialFlushFired"),this._pendingInflateData.length=0}))}write(o){this._recordInflateBytes&&this._recordedInflateBytes.push(o.clone()),this._tracer.traceSocketEvent("zlibInflateWrite",o),this._zlibInflate.write(o.buffer)}flush(o){this._zlibInflate.flush(()=>{this._tracer.traceSocketEvent("zlibInflateFlushFired");const b=C.VSBuffer.concat(this._pendingInflateData);this._pendingInflateData.length=0,o(b)})}}class S extends L.Disposable{constructor(o,b){super(),this._tracer=o,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._pendingDeflateData=[],this._zlibDeflate=I().zlib.createDeflateRaw({windowBits:15}),this._zlibDeflate.on("error",D=>{this._tracer.traceSocketEvent("zlibDeflateError",{message:D?.message,code:D?.code}),this._onError.fire(D)}),this._zlibDeflate.on("data",D=>{this._tracer.traceSocketEvent("zlibDeflateData",D),this._pendingDeflateData.push(C.VSBuffer.wrap(D))})}write(o){this._tracer.traceSocketEvent("zlibDeflateWrite",o.buffer),this._zlibDeflate.write(o.buffer)}flush(o){this._zlibDeflate.flush(2,()=>{this._tracer.traceSocketEvent("zlibDeflateFlushFired");let b=C.VSBuffer.concat(this._pendingDeflateData);this._pendingDeflateData.length=0,b=b.slice(0,b.byteLength-4),o(b)})}}function g(c,o){if(o===0)return;const b=c.byteLength>>>2;for(let x=0;x<b;x++){const Q=c.readUInt32BE(x*4);c.writeUInt32BE(Q^o,x*4)}const D=b*4,A=c.byteLength-D,N=o>>>24&255,G=o>>>16&255,ae=o>>>8&255;A>=1&&c.writeUInt8(c.readUInt8(D)^N,D),A>=2&&c.writeUInt8(c.readUInt8(D+1)^G,D+1),A>=3&&c.writeUInt8(c.readUInt8(D+2)^ae,D+2)}e.XDG_RUNTIME_DIR=typeof process<"u"?process.env.XDG_RUNTIME_DIR:void 0;const h={[2]:107,[1]:103};function l(){const c=(0,p.generateUuid)();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${c}-sock`;let o;return e.XDG_RUNTIME_DIR?o=(0,R.join)(e.XDG_RUNTIME_DIR,`vscode-ipc-${c}.sock`):o=(0,R.join)(I().os.tmpdir(),`vscode-ipc-${c}.sock`),s(o),o}e.createRandomIPCHandle=l;function i(c,o,b){const D=I().crypto.createHash("md5").update(c).digest("hex");if(process.platform==="win32")return`\\\\.\\pipe\\${D}-${b}-${o}-sock`;let A;return e.XDG_RUNTIME_DIR&&!process.env.VSCODE_PORTABLE?A=(0,R.join)(e.XDG_RUNTIME_DIR,`vscode-${D.substr(0,8)}-${b}-${o}.sock`):A=(0,R.join)(c,`${b}-${o}.sock`),s(A),A}e.createStaticIPCHandle=i;function s(c){const o=h[P.platform];typeof o=="number"&&c.length>=o&&console.warn(`WARNING: IPC handle "${c}" is longer than ${o} chars, try a shorter --user-data-dir`)}class n extends m.IPCServer{static toClientConnectionEvent(o){const b=k.Event.fromNodeEventEmitter(o,"connection");return k.Event.map(b,D=>({protocol:new y.Protocol(new E(D,"ipc-server-connection")),onDidClientDisconnect:k.Event.once(k.Event.fromNodeEventEmitter(D,"close"))}))}constructor(o){super(n.toClientConnectionEvent(o)),this.server=o}dispose(){super.dispose(),this.server&&(this.server.close(),this.server=null)}}e.Server=n;function a(c){return new Promise((o,b)=>{const D=I().net.createServer();D.on("error",b),D.listen(c,()=>{D.removeListener("error",b),o(new n(D))})})}e.serve=a;function r(c,o){return new Promise((b,D)=>{const A=I().net.createConnection(c,()=>{A.removeListener("error",D),b(y.Client.fromSocket(new E(A,`ipc-client${o}`),o))});A.once("error",D)})}e.connect=r}),define(ee[104],te([0,1,8,3,2,12]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorageDatabase=e.Storage=e.StorageState=e.isStorageItemsChangeEvent=e.StorageHint=void 0;var R;(function(I){I[I.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",I[I.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(R=e.StorageHint||(e.StorageHint={}));function P(I){const E=I;return E?.changed instanceof Map||E?.deleted instanceof Set}e.isStorageItemsChangeEvent=P;var p;(function(I){I[I.None=0]="None",I[I.Initialized=1]="Initialized",I[I.Closed=2]="Closed"})(p=e.StorageState||(e.StorageState={}));class m extends k.Disposable{constructor(E,d=Object.create(null)){super(),this.database=E,this.options=d,this._onDidChangeStorage=this._register(new t.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=p.None,this.cache=new Map,this.flushDelayer=new C.ThrottledDelayer(m.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(E=>this.onDidChangeItemsExternal(E)))}onDidChangeItemsExternal(E){E.changed?.forEach((d,w)=>this.accept(w,d)),E.deleted?.forEach(d=>this.accept(d,void 0))}accept(E,d){if(this.state===p.Closed)return;let w=!1;(0,L.isUndefinedOrNull)(d)?w=this.cache.delete(E):this.cache.get(E)!==d&&(this.cache.set(E,d),w=!0),w&&this._onDidChangeStorage.fire(E)}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===p.None&&(this.state=p.Initialized,this.options.hint!==R.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(E,d){const w=this.cache.get(E);return(0,L.isUndefinedOrNull)(w)?d:w}getBoolean(E,d){const w=this.get(E);return(0,L.isUndefinedOrNull)(w)?d:w==="true"}getNumber(E,d){const w=this.get(E);return(0,L.isUndefinedOrNull)(w)?d:parseInt(w,10)}async set(E,d){if(this.state===p.Closed)return;if((0,L.isUndefinedOrNull)(d))return this.delete(E);const w=String(d);if(this.cache.get(E)!==w)return this.cache.set(E,w),this.pendingInserts.set(E,w),this.pendingDeletes.delete(E),this._onDidChangeStorage.fire(E),this.doFlush()}async delete(E){if(!(this.state===p.Closed||!this.cache.delete(E)))return this.pendingDeletes.has(E)||this.pendingDeletes.add(E),this.pendingInserts.delete(E),this._onDidChangeStorage.fire(E),this.doFlush()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=p.Closed;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const E={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(E).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(E){if(!!this.hasPending)return this.doFlush(E)}async doFlush(E){return this.flushDelayer.trigger(()=>this.flushPending(),E)}async whenFlushed(){if(!!this.hasPending)return new Promise(E=>this.whenFlushedCallbacks.push(E))}isInMemory(){return this.options.hint===R.STORAGE_IN_MEMORY}dispose(){this.flushDelayer.dispose(),super.dispose()}}e.Storage=m,m.DEFAULT_FLUSH_DELAY=100;class y{constructor(){this.onDidChangeItemsExternal=t.Event.None,this.items=new Map}async getItems(){return this.items}async updateItems(E){E.insert?.forEach((d,w)=>this.items.set(w,d)),E.delete?.forEach(d=>this.items.delete(d))}async close(){}}e.InMemoryStorageDatabase=y}),define(ee[148],te([0,1,8,3,39,9,23]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SQLiteStorageDatabase=void 0;class P{get onDidChangeItemsExternal(){return t.Event.None}constructor(y,I=Object.create(null)){this.path=y,this.options=I,this.name=(0,L.basename)(this.path),this.logger=new p(this.options.logging),this.whenConnected=this.connect(this.path)}async getItems(){const y=await this.whenConnected,I=new Map;return(await this.all(y,"SELECT * FROM ItemTable")).forEach(d=>I.set(d.key,d.value)),this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] getItems(): ${I.size} rows`),I}async updateItems(y){const I=await this.whenConnected;return this.doUpdateItems(I,y)}doUpdateItems(y,I){return this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] updateItems(): insert(${I.insert?(0,k.mapToString)(I.insert):"0"}), delete(${I.delete?(0,k.setToString)(I.delete):"0"})`),this.transaction(y,()=>{const E=I.insert,d=I.delete;if(E&&E.size>0){const w=[];w.push([]);let f=0;E.forEach((v,u)=>{let S=w[f];S.length>P.MAX_HOST_PARAMETERS&&(f++,S=[],w.push(S)),S.push(u,v)}),w.forEach(v=>{this.prepare(y,`INSERT INTO ItemTable VALUES ${new Array(v.length/2).fill("(?,?)").join(",")}`,u=>u.run(v),()=>{const u=[];let S=0;return E.forEach((g,h)=>{u.push(h),S+=g.length}),`Keys: ${u.join(", ")} Length: ${S}`})})}if(d&&d.size){const w=[];w.push([]);let f=0;d.forEach(v=>{let u=w[f];u.length>P.MAX_HOST_PARAMETERS&&(f++,u=[],w.push(u)),u.push(v)}),w.forEach(v=>{this.prepare(y,`DELETE FROM ItemTable WHERE key IN (${new Array(v.length).fill("?").join(",")})`,u=>u.run(v),()=>{const u=[];return d.forEach(S=>{u.push(S)}),`Keys: ${u.join(", ")}`})})}})}async close(y){this.logger.trace(`[storage ${this.name}] close()`);const I=await this.whenConnected;return this.doClose(I,y)}doClose(y,I){return new Promise((E,d)=>{y.db.close(w=>(w&&this.handleSQLiteError(y,`[storage ${this.name}] close(): ${w}`),this.path===P.IN_MEMORY_PATH?E():!y.isErroneous&&!y.isInMemory?this.backup().then(E,f=>(this.logger.error(`[storage ${this.name}] backup(): ${f}`),E())):typeof I=="function"?R.Promises.unlink(this.path).then(()=>this.doConnect(this.path).then(f=>{const v=()=>this.doClose(f,void 0);return this.doUpdateItems(f,{insert:I()}).then(()=>v(),u=>(v(),Promise.reject(u)))})).then(E,d):d(w||new Error("Database has errors or is in-memory without recovery option"))))})}backup(){const y=this.toBackupPath(this.path);return R.Promises.copy(this.path,y,{preserveSymlinks:!1})}toBackupPath(y){return`${y}.backup`}async checkIntegrity(y){this.logger.trace(`[storage ${this.name}] checkIntegrity(full: ${y})`);const I=await this.whenConnected,E=await this.get(I,y?"PRAGMA integrity_check":"PRAGMA quick_check"),d=y?E.integrity_check:E.quick_check;return I.isErroneous?`${d} (last error: ${I.lastError})`:I.isInMemory?`${d} (in-memory!)`:d}async connect(y,I=!0){this.logger.trace(`[storage ${this.name}] open(${y}, retryOnBusy: ${I})`);try{return await this.doConnect(y)}catch(E){if(this.logger.error(`[storage ${this.name}] open(): Unable to open DB due to ${E}`),E.code==="SQLITE_BUSY"&&I)return await(0,C.timeout)(P.BUSY_OPEN_TIMEOUT),this.connect(y,!1);try{await R.Promises.unlink(y);try{await R.Promises.rename(this.toBackupPath(y),y)}catch{}return await this.doConnect(y)}catch(d){return this.logger.error(`[storage ${this.name}] open(): Unable to use backup due to ${d}`),this.doConnect(P.IN_MEMORY_PATH)}}}handleSQLiteError(y,I){y.isErroneous=!0,y.lastError=I,this.logger.error(I)}doConnect(y){return new Promise((I,E)=>{new Promise((d,w)=>{j(["@vscode/sqlite3"],d,w)}).then(d=>{const w={db:new(this.logger.isTracing?d.verbose().Database:d.Database)(y,f=>f?w.db&&f.code!=="SQLITE_CANTOPEN"?w.db.close(()=>E(f)):E(f):this.exec(w,["PRAGMA user_version = 1;","CREATE TABLE IF NOT EXISTS ItemTable (key TEXT UNIQUE ON CONFLICT REPLACE, value BLOB)"].join("")).then(()=>I(w),v=>w.db.close(()=>E(v)))),isInMemory:y===P.IN_MEMORY_PATH};w.db.on("error",f=>this.handleSQLiteError(w,`[storage ${this.name}] Error (event): ${f}`)),this.logger.isTracing&&w.db.on("trace",f=>this.logger.trace(`[storage ${this.name}] Trace (event): ${f}`))},E)})}exec(y,I){return new Promise((E,d)=>{y.db.exec(I,w=>w?(this.handleSQLiteError(y,`[storage ${this.name}] exec(): ${w}`),d(w)):E())})}get(y,I){return new Promise((E,d)=>{y.db.get(I,(w,f)=>w?(this.handleSQLiteError(y,`[storage ${this.name}] get(): ${w}`),d(w)):E(f))})}all(y,I){return new Promise((E,d)=>{y.db.all(I,(w,f)=>w?(this.handleSQLiteError(y,`[storage ${this.name}] all(): ${w}`),d(w)):E(f))})}transaction(y,I){return new Promise((E,d)=>{y.db.serialize(()=>{y.db.run("BEGIN TRANSACTION"),I(),y.db.run("END TRANSACTION",w=>w?(this.handleSQLiteError(y,`[storage ${this.name}] transaction(): ${w}`),d(w)):E())})})}prepare(y,I,E,d){const w=y.db.prepare(I),f=v=>{this.handleSQLiteError(y,`[storage ${this.name}] prepare(): ${v} (${I}). Details: ${d()}`)};w.on("error",f),E(w),w.finalize(v=>{v&&f(v),w.removeListener("error",f)})}}e.SQLiteStorageDatabase=P,P.IN_MEMORY_PATH=":memory:",P.BUSY_OPEN_TIMEOUT=2e3,P.MAX_HOST_PARAMETERS=256;class p{constructor(y){y&&typeof y.logTrace=="function"&&process.env[p.VSCODE_TRACE_STORAGE]&&(this.logTrace=y.logTrace),y&&typeof y.logError=="function"&&(this.logError=y.logError)}get isTracing(){return!!this.logTrace}trace(y){this.logTrace?.(y)}error(y){this.logError?.(y)}}p.VSCODE_TRACE_STORAGE="VSCODE_TRACE_STORAGE"}),define(ee[149],te([11,10]),function(j,e){return j.create("vs/code/electron-main/app",e)}),define(ee[150],te([11,10]),function(j,e){return j.create("vs/platform/configuration/common/configurationRegistry",e)}),define(ee[151],te([11,10]),function(j,e){return j.create("vs/platform/dialogs/electron-main/dialogMainService",e)}),define(ee[152],te([11,10]),function(j,e){return j.create("vs/platform/environment/node/argv",e)}),define(ee[153],te([11,10]),function(j,e){return j.create("vs/platform/environment/node/argvHelper",e)}),define(ee[154],te([11,10]),function(j,e){return j.create("vs/platform/extensionManagement/common/extensionManagement",e)}),define(ee[155],te([11,10]),function(j,e){return j.create("vs/platform/extensionManagement/common/extensionNls",e)}),define(ee[156],te([11,10]),function(j,e){return j.create("vs/platform/extensionManagement/common/extensionsScannerService",e)}),define(ee[157],te([11,10]),function(j,e){return j.create("vs/platform/extensions/common/extensionValidator",e)}),define(ee[158],te([11,10]),function(j,e){return j.create("vs/platform/externalTerminal/node/externalTerminalService",e)}),define(ee[159],te([11,10]),function(j,e){return j.create("vs/platform/files/common/fileService",e)}),define(ee[160],te([11,10]),function(j,e){return j.create("vs/platform/files/common/files",e)}),define(ee[161],te([11,10]),function(j,e){return j.create("vs/platform/files/common/io",e)}),define(ee[162],te([11,10]),function(j,e){return j.create("vs/platform/files/electron-main/diskFileSystemProviderServer",e)}),define(ee[163],te([11,10]),function(j,e){return j.create("vs/platform/files/node/diskFileSystemProvider",e)}),define(ee[164],te([11,10]),function(j,e){return j.create("vs/platform/issue/electron-main/issueMainService",e)}),define(ee[165],te([11,10]),function(j,e){return j.create("vs/platform/menubar/electron-main/menubar",e)}),define(ee[166],te([11,10]),function(j,e){return j.create("vs/platform/native/electron-main/nativeHostMainService",e)}),define(ee[167],te([11,10]),function(j,e){return j.create("vs/platform/request/common/request",e)}),define(ee[168],te([11,10]),function(j,e){return j.create("vs/platform/shell/node/shellEnv",e)}),define(ee[169],te([11,10]),function(j,e){return j.create("vs/platform/telemetry/common/telemetryService",e)}),define(ee[170],te([11,10]),function(j,e){return j.create("vs/platform/update/common/update.config.contribution",e)}),define(ee[171],te([11,10]),function(j,e){return j.create("vs/platform/userDataProfile/common/userDataProfile",e)}),define(ee[172],te([11,10]),function(j,e){return j.create("vs/platform/windows/electron-main/windowImpl",e)}),define(ee[173],te([11,10]),function(j,e){return j.create("vs/platform/windows/electron-main/windowsMainService",e)}),define(ee[174],te([11,10]),function(j,e){return j.create("vs/platform/workspace/common/workspace",e)}),define(ee[175],te([11,10]),function(j,e){return j.create("vs/platform/workspaces/electron-main/workspacesHistoryMainService",e)}),define(ee[176],te([11,10]),function(j,e){return j.create("vs/platform/workspaces/electron-main/workspacesManagementMainService",e)}),define(ee[177],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWorkspaceBackupInfo=e.isFolderBackupInfo=void 0;function C(k){return k&&k.hasOwnProperty("folderUri")}e.isFolderBackupInfo=C;function t(k){return k&&k.hasOwnProperty("workspace")}e.isWorkspaceBackupInfo=t}),define(ee[178],te([0,1,7]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeFolderInfos=e.deserializeWorkspaceInfos=e.isEmptyWindowBackupInfo=void 0;function t(R){return typeof R?.backupFolder=="string"}e.isEmptyWindowBackupInfo=t;function k(R){let P=[];try{Array.isArray(R.workspaces)&&(P=R.workspaces.map(p=>({workspace:{id:p.id,configPath:C.URI.parse(p.configURIPath)},remoteAuthority:p.remoteAuthority})))}catch{}return P}e.deserializeWorkspaceInfos=k;function L(R){let P=[];try{Array.isArray(R.folders)&&(P=R.folders.map(p=>({folderUri:C.URI.parse(p.folderUri),remoteAuthority:p.remoteAuthority})))}catch{}return P}e.deserializeFolderInfos=L}),define(ee[179],te([0,1,3,2]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionHostDebugChannelClient=e.ExtensionHostDebugBroadcastChannel=void 0;class k{constructor(){this._onCloseEmitter=new C.Emitter,this._onReloadEmitter=new C.Emitter,this._onTerminateEmitter=new C.Emitter,this._onAttachEmitter=new C.Emitter}call(P,p,m){switch(p){case"close":return Promise.resolve(this._onCloseEmitter.fire({sessionId:m[0]}));case"reload":return Promise.resolve(this._onReloadEmitter.fire({sessionId:m[0]}));case"terminate":return Promise.resolve(this._onTerminateEmitter.fire({sessionId:m[0]}));case"attach":return Promise.resolve(this._onAttachEmitter.fire({sessionId:m[0],port:m[1],subId:m[2]}))}throw new Error("Method not implemented.")}listen(P,p,m){switch(p){case"close":return this._onCloseEmitter.event;case"reload":return this._onReloadEmitter.event;case"terminate":return this._onTerminateEmitter.event;case"attach":return this._onAttachEmitter.event}throw new Error("Method not implemented.")}}e.ExtensionHostDebugBroadcastChannel=k,k.ChannelName="extensionhostdebugservice";class L extends t.Disposable{constructor(P){super(),this.channel=P}reload(P){this.channel.call("reload",[P])}get onReload(){return this.channel.listen("reload")}close(P){this.channel.call("close",[P])}get onClose(){return this.channel.listen("close")}attachSession(P,p,m){this.channel.call("attach",[P,p,m])}get onAttachSession(){return this.channel.listen("attach")}terminateSession(P,p){this.channel.call("terminate",[P,p])}get onTerminateSession(){return this.channel.listen("terminate")}openExtensionDevelopmentHostWindow(P,p){return this.channel.call("openExtensionDevelopmentHostWindow",[P,p])}}e.ExtensionHostDebugChannelClient=L}),define(ee[180],te([0,1,134,53,14,9,33,20,7]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePtyHostPort=e.parseSearchPort=e.parseExtensionHostPort=e.AbstractNativeEnvironmentService=e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX=void 0,e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX=/^([^.]+\..+):(.+)$/;class m{get appRoot(){return(0,L.dirname)(k.FileAccess.asFileUri("").fsPath)}get userHome(){return p.URI.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return p.URI.file((0,L.join)(this.userDataPath,"User"))}get tmpDir(){return p.URI.file(this.paths.tmpDir)}get cacheHome(){return p.URI.file(this.userDataPath)}get stateResource(){return(0,P.joinPath)(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome}get userDataSyncHome(){return(0,P.joinPath)(this.userRoamingDataHome,"sync")}get logsPath(){if(!this.args.logsPath){const f=(0,C.toLocalISOString)(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=(0,L.join)(this.userDataPath,"logs",f)}return this.args.logsPath}get userDataSyncLogResource(){return p.URI.file((0,L.join)(this.logsPath,"userDataSync.log"))}get editSessionsLogResource(){return p.URI.file((0,L.join)(this.logsPath,"editSessions.log"))}get sync(){return this.args.sync}get machineSettingsResource(){return(0,P.joinPath)(p.URI.file((0,L.join)(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return(0,P.joinPath)(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return(0,P.joinPath)(this.appSettingsHome,"History")}get keyboardLayoutResource(){return(0,P.joinPath)(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const f=R.env.VSCODE_PORTABLE;return f?p.URI.file((0,L.join)(f,"argv.json")):(0,P.joinPath)(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return p.URI.file((0,L.join)(this.userDataPath,"Workspaces"))}get installSourcePath(){return(0,L.join)(this.userDataPath,"installSource")}get builtinExtensionsPath(){const f=this.args["builtin-extensions-dir"];return f?(0,L.resolve)(f):(0,L.normalize)((0,L.join)(k.FileAccess.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){const f=this.args["extensions-download-dir"];return f?p.URI.file((0,L.resolve)(f)):p.URI.file((0,L.join)(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){const f=this.args["extensions-dir"];if(f)return(0,L.resolve)(f);const v=R.env.VSCODE_EXTENSIONS;if(v)return v;const u=R.env.VSCODE_PORTABLE;return u?(0,L.join)(u,"extensions"):(0,P.joinPath)(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const f=this.args.extensionDevelopmentPath;if(Array.isArray(f))return f.map(v=>/^[^:/?#]+?:\/\//.test(v)?p.URI.parse(v):p.URI.file((0,L.normalize)(v)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(f=>f==="ui"||f==="workspace"||f==="web"?f:"workspace")}get extensionTestsLocationURI(){const f=this.args.extensionTestsPath;if(f)return/^[^:/?#]+?:\/\//.test(f)?p.URI.parse(f):p.URI.file((0,L.normalize)(f))}get disableExtensions(){if(this.args["disable-extensions"])return!0;const f=this.args["disable-extension"];if(f){if(typeof f=="string")return[f];if(Array.isArray(f)&&f.length>0)return f}return!1}get debugExtensionHost(){return y(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!R.env.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(f=>!e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX.test(f))}get extensionLogLevel(){const f=[];for(const v of this.args.log||[]){const u=e.EXTENSION_IDENTIFIER_WITH_LOG_REGEX.exec(v);u&&u[1]&&u[2]&&f.push([u[1],u[2]])}return f.length?f:void 0}get serviceMachineIdResource(){return(0,P.joinPath)(p.URI.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get telemetryLogResource(){return p.URI.file((0,L.join)(this.logsPath,"telemetry.log"))}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get policyFile(){if(this.args["__enable-file-policy"]){const f=R.env.VSCODE_PORTABLE;return f?p.URI.file((0,L.join)(f,"policy.json")):(0,P.joinPath)(this.userHome,this.productService.dataFolderName,"policy.json")}}get continueOn(){return this.args.continueOn}set continueOn(f){this.args.continueOn=f}get args(){return this._args}constructor(f,v,u){this._args=f,this.paths=v,this.productService=u,this.editSessionId=this.args.editSessionId}}we([t.memoize],m.prototype,"appRoot",null),we([t.memoize],m.prototype,"userHome",null),we([t.memoize],m.prototype,"userDataPath",null),we([t.memoize],m.prototype,"appSettingsHome",null),we([t.memoize],m.prototype,"tmpDir",null),we([t.memoize],m.prototype,"cacheHome",null),we([t.memoize],m.prototype,"stateResource",null),we([t.memoize],m.prototype,"userRoamingDataHome",null),we([t.memoize],m.prototype,"userDataSyncHome",null),we([t.memoize],m.prototype,"userDataSyncLogResource",null),we([t.memoize],m.prototype,"editSessionsLogResource",null),we([t.memoize],m.prototype,"sync",null),we([t.memoize],m.prototype,"machineSettingsResource",null),we([t.memoize],m.prototype,"workspaceStorageHome",null),we([t.memoize],m.prototype,"localHistoryHome",null),we([t.memoize],m.prototype,"keyboardLayoutResource",null),we([t.memoize],m.prototype,"argvResource",null),we([t.memoize],m.prototype,"isExtensionDevelopment",null),we([t.memoize],m.prototype,"untitledWorkspacesHome",null),we([t.memoize],m.prototype,"installSourcePath",null),we([t.memoize],m.prototype,"builtinExtensionsPath",null),we([t.memoize],m.prototype,"extensionsPath",null),we([t.memoize],m.prototype,"extensionDevelopmentLocationURI",null),we([t.memoize],m.prototype,"extensionDevelopmentKind",null),we([t.memoize],m.prototype,"extensionTestsLocationURI",null),we([t.memoize],m.prototype,"debugExtensionHost",null),we([t.memoize],m.prototype,"logLevel",null),we([t.memoize],m.prototype,"extensionLogLevel",null),we([t.memoize],m.prototype,"serviceMachineIdResource",null),we([t.memoize],m.prototype,"telemetryLogResource",null),we([t.memoize],m.prototype,"disableWorkspaceTrust",null),we([t.memoize],m.prototype,"policyFile",null),e.AbstractNativeEnvironmentService=m;function y(w,f){return d(w["inspect-extensions"],w["inspect-brk-extensions"],5870,f,w.debugId,w.extensionEnvironment)}e.parseExtensionHostPort=y;function I(w,f){return d(w["inspect-search"],w["inspect-brk-search"],5876,f,w.extensionEnvironment)}e.parseSearchPort=I;function E(w,f){return d(w["inspect-ptyhost"],w["inspect-brk-ptyhost"],5877,f,w.extensionEnvironment)}e.parsePtyHostPort=E;function d(w,f,v,u,S,g){const l=Number(f||w)||(u?null:v),i=l?Boolean(!!f):!1;let s;if(g)try{s=JSON.parse(g)}catch{}return{port:l,break:i,debugId:S,env:s}}}),define(ee[105],te([0,1,279,4,152]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildVersionMessage=e.buildHelpMessage=e.formatOptions=e.parseArgs=e.OPTIONS=void 0;const L={o:(0,k.localize)(0,null),e:(0,k.localize)(1,null),t:(0,k.localize)(2,null)};e.OPTIONS={tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel",options:{"cli-data-dir":{type:"string",args:"dir",description:(0,k.localize)(3,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:(0,k.localize)(4,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:(0,k.localize)(5,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:(0,k.localize)(6,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:(0,k.localize)(7,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:(0,k.localize)(8,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:(0,k.localize)(9,null)},wait:{type:"boolean",cat:"o",alias:"w",description:(0,k.localize)(10,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:(0,k.localize)(11,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:(0,k.localize)(12,null)},profile:{type:"string",cat:"o",args:"profileName",description:(0,k.localize)(13,null)},help:{type:"boolean",cat:"o",alias:"h",description:(0,k.localize)(14,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:(0,k.localize)(15,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:(0,k.localize)(16,null)},"show-versions":{type:"boolean",cat:"e",description:(0,k.localize)(17,null)},category:{type:"string",cat:"e",description:(0,k.localize)(18,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:(0,k.localize)(19,null)},"pre-release":{type:"boolean",cat:"e",description:(0,k.localize)(20,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:(0,k.localize)(21,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:(0,k.localize)(22,null)},version:{type:"boolean",cat:"t",alias:"v",description:(0,k.localize)(23,null)},verbose:{type:"boolean",cat:"t",global:!0,description:(0,k.localize)(24,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:(0,k.localize)(25,null)},status:{type:"boolean",alias:"s",cat:"t",description:(0,k.localize)(26,null)},"prof-startup":{type:"boolean",cat:"t",description:(0,k.localize)(27,null)},"prof-append-timers":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:(0,k.localize)(28,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:(0,k.localize)(29,null)},sync:{type:"string",cat:"t",description:(0,k.localize)(30,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:(0,k.localize)(31,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:(0,k.localize)(32,null)},"disable-gpu":{type:"boolean",cat:"t",description:(0,k.localize)(33,null)},"ms-enable-electron-run-as-node":{type:"boolean",global:!0},"max-memory":{type:"string",cat:"t",description:(0,k.localize)(34,null),args:"memory"},telemetry:{type:"boolean",cat:"t",description:(0,k.localize)(35,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"disable-keytar":{type:"boolean"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"unity-launch":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},trace:{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"locate-shell-integration-path":{type:"string",args:["bash","pwsh","zsh","fish"]},"enable-coi":{type:"boolean"},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},_:{type:"string[]"}};const R={onUnknownOption:()=>{},onMultipleValues:()=>{},onEmptyValue:()=>{},onDeprecatedOption:()=>{}};function P(f,v,u=R){const S=f.find(c=>c.length>0&&c[0]!=="-"),g={},h=["_"],l=[],i={};let s;for(const c in v){const o=v[c];o.type==="subcommand"?c===S&&(s=o):(o.alias&&(g[c]=o.alias),o.type==="string"||o.type==="string[]"?(h.push(c),o.deprecates&&h.push(...o.deprecates)):o.type==="boolean"&&(l.push(c),o.deprecates&&l.push(...o.deprecates)),o.global&&(i[c]=o))}if(s&&S){const c=i;for(const A in s.options)c[A]=s.options[A];const o=f.filter(A=>A!==S),b=u.getSubcommandReporter?u.getSubcommandReporter(S):void 0,D=P(o,c,b);return{[S]:D,_:[]}}const n=C(f,{string:h,boolean:l,alias:g}),a={},r=n;a._=n._.map(c=>String(c)).filter(c=>c.length>0),delete r._;for(const c in v){const o=v[c];if(o.type==="subcommand")continue;o.alias&&delete r[o.alias];let b=r[c];if(o.deprecates)for(const D of o.deprecates)r.hasOwnProperty(D)&&(b||(b=r[D],b&&u.onDeprecatedOption(D,o.deprecationMessage||(0,k.localize)(36,null,c))),delete r[D]);if(typeof b<"u"){if(o.type==="string[]"){if(Array.isArray(b)||(b=[b]),!o.allowEmptyValue){const D=b.filter(A=>A.length>0);D.length!==b.length&&(u.onEmptyValue(c),b=D.length>0?D:void 0)}}else o.type==="string"&&(Array.isArray(b)?(b=b.pop(),u.onMultipleValues(c,b)):!b&&!o.allowEmptyValue&&(u.onEmptyValue(c),b=void 0));a[c]=b,o.deprecationMessage&&u.onDeprecatedOption(c,o.deprecationMessage)}delete r[c]}for(const c in r)u.onUnknownOption(c);return a}e.parseArgs=P;function p(f,v){let u="";return v.args&&(Array.isArray(v.args)?u=` <${v.args.join("> <")}>`:u=` <${v.args}>`),v.alias?`-${v.alias} --${f}${u}`:`--${f}${u}`}function m(f,v){const u=[];for(const S in f){const g=f[S],h=p(S,g);u.push([h,g.description])}return y(u,v)}e.formatOptions=m;function y(f,v){const S=f.reduce((l,i)=>Math.max(l,i[0].length),12)+2+1;if(v-S<25)return f.reduce((l,i)=>l.concat([`  ${i[0]}`,`      ${i[1]}`]),[]);const g=v-S-1,h=[];for(const l of f){const i=l[0],s=E(l[1],g),n=I(S-i.length-2);h.push("  "+i+n+s[0]);for(let a=1;a<s.length;a++)h.push(I(S)+s[a])}return h}function I(f){return" ".repeat(f)}function E(f,v){const u=[];for(;f.length;){const S=f.length<v?f.length:f.lastIndexOf(" ",v),g=f.slice(0,S).trim();f=f.slice(S),u.push(g)}return u}function d(f,v,u,S,g){const h=process.stdout.isTTY&&process.stdout.columns||80,l=g?.noInputFiles!==!0?`[${(0,k.localize)(37,null)}...]`:"",i=[`${f} ${u}`];i.push(""),i.push(`${(0,k.localize)(38,null)}: ${v} [${(0,k.localize)(39,null)}]${l}`),i.push(""),g?.noPipe!==!0&&(t.isWindows?i.push((0,k.localize)(40,null,v)):i.push((0,k.localize)(41,null,v)),i.push(""));const s={},n=[];for(const a in S){const r=S[a];if(r.type==="subcommand")r.description&&n.push({command:a,description:r.description});else if(r.description&&r.cat){let c=s[r.cat];c||(s[r.cat]=c={}),c[a]=r}}for(const a in s){const r=a,c=s[r];c&&(i.push(L[r]),i.push(...m(c,h)),i.push(""))}return n.length&&(i.push((0,k.localize)(42,null)),i.push(...y(n.map(a=>[a.command,a.description]),h)),i.push("")),i.join(`
`)}e.buildHelpMessage=d;function w(f,v){return`${f||(0,k.localize)(43,null)}
${v||(0,k.localize)(44,null)}
${process.arch}`}e.buildVersionMessage=w}),define(ee[181],te([0,1,78,179,105]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronExtensionHostDebugBroadcastChannel=void 0;class L extends t.ExtensionHostDebugBroadcastChannel{constructor(P){super(),this.windowsMainService=P}call(P,p,m){return p==="openExtensionDevelopmentHostWindow"?this.openExtensionDevelopmentHostWindow(m[0],m[1]):super.call(P,p,m)}async openExtensionDevelopmentHostWindow(P,p){const m=(0,k.parseArgs)(P,k.OPTIONS);m.debugRenderer=p;const y=m.extensionDevelopmentPath;if(!y)return{success:!1};const[I]=await this.windowsMainService.openExtensionDevelopmentHostWindow(y,{context:5,cli:m,forceProfile:m.profile,forceTempProfile:m["profile-temp"]});if(!p)return{success:!0};const E=I.win;if(!E)return{success:!0};const d=E.webContents.debugger;let w=d.isAttached()?1/0:0;const f=(0,C.createServer)(v=>{w++===0&&d.attach();let u=!1;const S=l=>{u||v.write(JSON.stringify(l)+"\0")},g=(l,i,s,n)=>S({method:i,params:s,sessionId:n});E.on("close",()=>{d.removeListener("message",g),v.end(),u=!0}),d.addListener("message",g);let h=Buffer.alloc(0);v.on("data",l=>{h=Buffer.concat([h,l]);for(let i=h.indexOf(0);i!==-1;i=h.indexOf(0)){let s;try{const n=h.slice(0,i).toString("utf8");h=h.slice(i+1),s=JSON.parse(n)}catch(n){console.error("error reading cdp line",n)}d.sendCommand(s.method,s.params,s.sessionId).then(n=>S({id:s.id,sessionId:s.sessionId,result:n})).catch(n=>S({id:s.id,sessionId:s.sessionId,error:{code:0,message:n.message}}))}}),v.on("error",l=>{console.error("error on cdp pipe:",l)}),v.on("close",()=>{u=!0,--w===0&&d.detach()})});return await new Promise(v=>f.listen(0,v)),E.on("close",()=>f.close()),{rendererDebugPort:f.address().port,success:!0}}}e.ElectronExtensionHostDebugBroadcastChannel=L}),define(ee[61],te([0,1,280,153,105]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLaunchedFromCli=e.addArg=e.parseCLIProcessArgv=e.parseMainProcessArgv=void 0;const L=2048;function R(E,d){const w=(h,l)=>{console.warn((0,t.localize)(0,null,h,l))},f=h=>{console.warn((0,t.localize)(1,null,h))},v=(h,l)=>{console.warn((0,t.localize)(2,null,h,l))},u=h=>({onUnknownOption:l=>{h!=="tunnel"&&console.warn((0,t.localize)(3,null,l,h))},onMultipleValues:w,onEmptyValue:f,onDeprecatedOption:v,getSubcommandReporter:h!=="tunnel"?u:void 0}),S={onUnknownOption:h=>{console.warn((0,t.localize)(4,null,h))},onMultipleValues:w,onEmptyValue:f,onDeprecatedOption:v,getSubcommandReporter:u},g=(0,k.parseArgs)(E,k.OPTIONS,d?S:void 0);return g.goto&&g._.forEach(h=>C(/^(\w:)?[^:]+(:\d*){0,2}$/.test(h),(0,t.localize)(5,null))),g["max-memory"]&&C(parseInt(g["max-memory"])>=L,`The max-memory argument cannot be specified lower than ${L} MB.`),g}function P(E){const d=E.findIndex(w=>!/^-/.test(w));if(d>-1)return[...E.slice(0,d),...E.slice(d+1)]}function p(E){let[,...d]=E;process.env.VSCODE_DEV&&(d=P(d)||[]);const w=!I(process.env);return R(d,w)}e.parseMainProcessArgv=p;function m(E){let[,,...d]=E;return process.env.VSCODE_DEV&&(d=P(d)||[]),R(d,!0)}e.parseCLIProcessArgv=m;function y(E,...d){const w=E.indexOf("--");return w===-1?E.push(...d):E.splice(w,0,...d),E}e.addArg=y;function I(E){return E.VSCODE_CLI==="1"}e.isLaunchedFromCli=I}),function(){"use strict";function j(e,C,t){function k(R,P){const p=L(R,P),m=[p];return e.isAbsolute(p)||m.unshift(t),e.resolve(...m)}function L(R,P){process.env.VSCODE_DEV&&(P="code-oss-dev");const p=process.env.VSCODE_PORTABLE;if(p)return e.join(p,"user-data");let m=process.env.VSCODE_APPDATA;if(m)return e.join(m,P);const y=R["user-data-dir"];if(y)return y;switch(process.platform){case"win32":if(m=process.env.APPDATA,!m){const I=process.env.USERPROFILE;if(typeof I!="string")throw new Error("Windows: Unexpected undefined %USERPROFILE% environment variable");m=e.join(I,"AppData","Roaming")}break;case"darwin":m=e.join(C.homedir(),"Library","Application Support");break;case"linux":m=process.env.XDG_CONFIG_HOME||e.join(C.homedir(),".config");break;default:throw new Error("Platform not supported")}return e.join(m,P)}return{getUserDataPath:k}}if(typeof define=="function")define(ee[106],te([182,25,33]),function(e,C,t){return j(e,C,t.cwd())});else if(typeof module=="object"&&typeof module.exports=="object"){const e=require("path"),C=require("os");module.exports=j(e,C,process.env.VSCODE_CWD||process.cwd())}else throw new Error("Unknown context")}(),define(ee[183],te([0,1,25,180,106]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeEnvironmentService=void 0;class L extends t.AbstractNativeEnvironmentService{constructor(P,p){super(P,{homeDir:(0,C.homedir)(),tmpDir:(0,C.tmpdir)(),userDataDir:(0,k.getUserDataPath)(P,p.nameShort)},p)}}e.NativeEnvironmentService=L}),define(ee[184],te([0,1,40,25,30]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWaitMarkerFileSync=void 0;function L(R){const P=(0,k.randomPath)((0,t.tmpdir)());try{return(0,C.writeFileSync)(P,""),R&&console.log(`Marker file for --wait created: ${P}`),P}catch(p){R&&console.error(`Failed to create marker file for --wait: ${p}`);return}}e.createWaitMarkerFileSync=L}),define(ee[185],te([0,1,12,155]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localizeManifest=void 0;function k(R,P,p){try{L(R,P,p)}catch(m){console.error(m?.message??m)}return R}e.localizeManifest=k;function L(R,P,p){const m=(y,I,E)=>{const d=y[I];if((0,C.isString)(d)){const w=d,f=w.length;if(f>1&&w[0]==="%"&&w[f-1]==="%"){const v=w.substr(1,f-2);let u=P[v];u===void 0&&p&&(u=p[v]);const S=typeof u=="string"?u:u?.message,g=p?.[v],h=typeof g=="string"?g:g?.message;if(!S){h||console.warn(`[${R.name}]: ${(0,t.localize)(0,null,v)}`);return}if(E&&(I==="title"||I==="category")&&h&&h!==S){const l={value:S,original:h};y[I]=l}else y[I]=S}}else if((0,C.isObject)(d))for(const w in d)d.hasOwnProperty(w)&&(w==="commands"?m(d,w,!0):m(d,w,E));else if(Array.isArray(d))for(let w=0;w<d.length;w++)m(d,w,E)};for(const y in R)R.hasOwnProperty(y)&&m(R,y)}}),define(ee[186],te([0,1,15]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImplicitActivationEvents=e.ImplicitActivationEventsImpl=void 0;class t{constructor(){this._generators=new Map}register(L,R){this._generators.set(L,R)}updateManifest(L){if(!(typeof L.main>"u"&&typeof L.browser>"u")&&(L.activationEvents===void 0&&Object.assign(L,{activationEvents:[]}),!(!Array.isArray(L.activationEvents)||!L.contributes)))for(const R in L.contributes){const P=this._generators.get(R);if(!P)continue;const p=L.contributes[R],m=Array.isArray(p)?p:[p];try{P(m,L.activationEvents)}catch(y){(0,C.onUnexpectedError)(y)}}}}e.ImplicitActivationEventsImpl=t,e.ImplicitActivationEvents=new t}),define(ee[187],te([0,1,20,98,157,188]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEngineValid=e.isValidExtensionVersion=e.validateExtensionManifest=e.isValidVersion=e.normalizeVersion=e.parseVersion=e.isValidVersionStr=void 0;const R=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,P=/^-(\d{4})(\d{2})(\d{2})$/;function p(u){return u=u.trim(),u==="*"||R.test(u)}e.isValidVersionStr=p;function m(u){if(!p(u))return null;if(u=u.trim(),u==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const S=u.match(R);return S?{hasCaret:S[1]==="^",hasGreaterEquals:S[1]===">=",majorBase:S[2]==="x"?0:parseInt(S[2],10),majorMustEqual:S[2]!=="x",minorBase:S[4]==="x"?0:parseInt(S[4],10),minorMustEqual:S[4]!=="x",patchBase:S[6]==="x"?0:parseInt(S[6],10),patchMustEqual:S[6]!=="x",preRelease:S[8]||null}:null}e.parseVersion=m;function y(u){if(!u)return null;const S=u.majorBase,g=u.majorMustEqual,h=u.minorBase;let l=u.minorMustEqual;const i=u.patchBase;let s=u.patchMustEqual;u.hasCaret&&(S===0||(l=!1),s=!1);let n=0;if(u.preRelease){const a=P.exec(u.preRelease);if(a){const[,r,c,o]=a;n=Date.UTC(Number(r),Number(c)-1,Number(o))}}return{majorBase:S,majorMustEqual:g,minorBase:h,minorMustEqual:l,patchBase:i,patchMustEqual:s,isMinimum:u.hasGreaterEquals,notBefore:n}}e.normalizeVersion=y;function I(u,S,g){let h;typeof u=="string"?h=y(m(u)):h=u;let l;S instanceof Date?l=S.getTime():typeof S=="string"&&(l=new Date(S).getTime());let i;if(typeof g=="string"?i=y(m(g)):i=g,!h||!i)return!1;const s=h.majorBase,n=h.minorBase,a=h.patchBase;let r=i.majorBase,c=i.minorBase,o=i.patchBase;const b=i.notBefore;let D=i.majorMustEqual,A=i.minorMustEqual,N=i.patchMustEqual;return i.isMinimum?s>r?!0:s<r?!1:n>c?!0:n<c||l&&l<b?!1:a>=o:(s===1&&r===0&&(!D||!A||!N)&&(r=1,c=0,o=0,D=!0,A=!1,N=!1),s<r?!1:s>r?!D:n<c?!1:n>c?!A:a<o?!1:a>o?!N:!(l&&l<b))}e.isValidVersion=I;function E(u,S,g,h,l){const i=[];if(typeof h.publisher<"u"&&typeof h.publisher!="string")return i.push([t.default.Error,k.localize(0,null)]),i;if(typeof h.name!="string")return i.push([t.default.Error,k.localize(1,null,"name")]),i;if(typeof h.version!="string")return i.push([t.default.Error,k.localize(2,null,"version")]),i;if(!h.engines)return i.push([t.default.Error,k.localize(3,null,"engines")]),i;if(typeof h.engines.vscode!="string")return i.push([t.default.Error,k.localize(4,null,"engines.vscode")]),i;if(typeof h.extensionDependencies<"u"&&!v(h.extensionDependencies))return i.push([t.default.Error,k.localize(5,null,"extensionDependencies")]),i;if(typeof h.activationEvents<"u"){if(!v(h.activationEvents))return i.push([t.default.Error,k.localize(6,null,"activationEvents")]),i;if(typeof h.main>"u"&&typeof h.browser>"u")return i.push([t.default.Error,k.localize(7,null,"activationEvents","main")]),i}if(typeof h.extensionKind<"u"&&typeof h.main>"u"&&i.push([t.default.Warning,k.localize(8,null,"extensionKind")]),typeof h.main<"u"){if(typeof h.main!="string")return i.push([t.default.Error,k.localize(9,null,"main")]),i;{const a=(0,C.joinPath)(g,h.main);(0,C.isEqualOrParent)(a,g)||i.push([t.default.Warning,k.localize(10,null,a.path,g.path)])}if(typeof h.activationEvents>"u")return i.push([t.default.Error,k.localize(11,null,"activationEvents","main")]),i}if(typeof h.browser<"u"){if(typeof h.browser!="string")return i.push([t.default.Error,k.localize(12,null,"browser")]),i;{const a=(0,C.joinPath)(g,h.browser);(0,C.isEqualOrParent)(a,g)||i.push([t.default.Warning,k.localize(13,null,a.path,g.path)])}if(typeof h.activationEvents>"u")return i.push([t.default.Error,k.localize(14,null,"activationEvents","browser")]),i}if(!L.valid(h.version))return i.push([t.default.Error,k.localize(15,null)]),i;const s=[];if(!d(u,S,h,l,s))for(const a of s)i.push([t.default.Error,a]);return i}e.validateExtensionManifest=E;function d(u,S,g,h,l){return h||typeof g.main>"u"&&typeof g.browser>"u"?!0:f(u,S,g.engines.vscode,l)}e.isValidExtensionVersion=d;function w(u,S,g){return u==="*"||f(S,g,u)}e.isEngineValid=w;function f(u,S,g,h=[]){const l=y(m(g));if(!l)return h.push(k.localize(16,null,g)),!1;if(l.majorBase===0){if(!l.majorMustEqual||!l.minorMustEqual)return h.push(k.localize(17,null,g)),!1}else if(!l.majorMustEqual)return h.push(k.localize(18,null,g)),!1;return I(u,S,l)?!0:(h.push(k.localize(19,null,u,g)),!1)}function v(u){if(!Array.isArray(u))return!1;for(let S=0,g=u.length;S<g;S++)if(typeof u[S]!="string")return!1;return!0}}),define(ee[189],te([0,1,17,29]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getServiceMachineId=void 0;async function k(L,R,P){let p=P&&P.get("storage.serviceMachineId",-1)||null;if(p)return p;try{const y=(await R.readFile(L.serviceMachineIdResource)).value.toString();p=(0,t.isUUID)(y)?y:null}catch{p=null}if(!p){p=(0,t.generateUuid)();try{await R.writeFile(L.serviceMachineIdResource,C.VSBuffer.fromString(p))}catch{}}return P?.store("storage.serviceMachineId",p,-1,1),p}e.getServiceMachineId=k}),define(ee[70],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyncDescriptor=void 0;class C{constructor(k,L=[],R=!1){this.ctor=k,this.staticArguments=L,this.supportsDelayedInstantiation=R}}e.SyncDescriptor=C}),define(ee[190],te([0,1,70]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSingletonServiceDescriptors=e.registerSingleton=e.InstantiationType=void 0;const t=[];var k;(function(P){P[P.Eager=0]="Eager",P[P.Delayed=1]="Delayed"})(k=e.InstantiationType||(e.InstantiationType={}));function L(P,p,m){p instanceof C.SyncDescriptor||(p=new C.SyncDescriptor(p,[],Boolean(m))),t.push([P,p])}e.registerSingleton=L;function R(){return t}e.getSingletonServiceDescriptors=R}),define(ee[191],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Node=void 0;class C{constructor(L,R){this.key=L,this.data=R,this.incoming=new Map,this.outgoing=new Map}}e.Node=C;class t{constructor(L){this._hashFn=L,this._nodes=new Map}roots(){const L=[];for(const R of this._nodes.values())R.outgoing.size===0&&L.push(R);return L}insertEdge(L,R){const P=this.lookupOrInsertNode(L),p=this.lookupOrInsertNode(R);P.outgoing.set(p.key,p),p.incoming.set(P.key,P)}removeNode(L){const R=this._hashFn(L);this._nodes.delete(R);for(const P of this._nodes.values())P.outgoing.delete(R),P.incoming.delete(R)}lookupOrInsertNode(L){const R=this._hashFn(L);let P=this._nodes.get(R);return P||(P=new C(R,L),this._nodes.set(R,P)),P}lookup(L){return this._nodes.get(this._hashFn(L))}isEmpty(){return this._nodes.size===0}toString(){const L=[];for(const[R,P]of this._nodes)L.push(`${R}
	(-> incoming)[${[...P.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...P.outgoing.keys()].join(",")}]
`);return L.join(`
`)}findCycleSlow(){for(const[L,R]of this._nodes){const P=new Set([L]),p=this._findCycle(R,P);if(p)return p}}_findCycle(L,R){for(const[P,p]of L.outgoing){if(R.has(P))return[...R,P].join(" -> ");R.add(P);const m=this._findCycle(p,R);if(m)return m;R.delete(P)}}}e.Graph=t}),define(ee[5],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var C;(function(R){R.serviceIds=new Map,R.DI_TARGET="$di$target",R.DI_DEPENDENCIES="$di$dependencies";function P(p){return p[R.DI_DEPENDENCIES]||[]}R.getServiceDependencies=P})(C=e._util||(e._util={})),e.IInstantiationService=k("instantiationService");function t(R,P,p){P[C.DI_TARGET]===P?P[C.DI_DEPENDENCIES].push({id:R,index:p}):(P[C.DI_DEPENDENCIES]=[{id:R,index:p}],P[C.DI_TARGET]=P)}function k(R){if(C.serviceIds.has(R))return C.serviceIds.get(R);const P=function(p,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");t(P,p,y)};return P.toString=()=>R,C.serviceIds.set(R,P),P}e.createDecorator=k;function L(R){return R}e.refineServiceDecorator=L}),define(ee[62],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IBackupMainService=void 0,e.IBackupMainService=(0,C.createDecorator)("backupMainService")}),define(ee[18],te([0,1,12,7,5]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLanguageTagSettingPlainKey=e.getMigratedSettingValue=e.merge=e.getConfigurationValue=e.removeFromValueTree=e.addToValueTree=e.toValuesTree=e.ConfigurationTargetToString=e.ConfigurationTarget=e.isConfigurationUpdateOverrides=e.isConfigurationOverrides=e.IConfigurationService=void 0,e.IConfigurationService=(0,k.createDecorator)("configurationService");function L(u){return u&&typeof u=="object"&&(!u.overrideIdentifier||typeof u.overrideIdentifier=="string")&&(!u.resource||u.resource instanceof t.URI)}e.isConfigurationOverrides=L;function R(u){return u&&typeof u=="object"&&(!u.overrideIdentifiers||Array.isArray(u.overrideIdentifiers))&&!u.overrideIdentifier&&(!u.resource||u.resource instanceof t.URI)}e.isConfigurationUpdateOverrides=R;var P;(function(u){u[u.APPLICATION=1]="APPLICATION",u[u.USER=2]="USER",u[u.USER_LOCAL=3]="USER_LOCAL",u[u.USER_REMOTE=4]="USER_REMOTE",u[u.WORKSPACE=5]="WORKSPACE",u[u.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",u[u.DEFAULT=7]="DEFAULT",u[u.MEMORY=8]="MEMORY"})(P=e.ConfigurationTarget||(e.ConfigurationTarget={}));function p(u){switch(u){case 1:return"APPLICATION";case 2:return"USER";case 3:return"USER_LOCAL";case 4:return"USER_REMOTE";case 5:return"WORKSPACE";case 6:return"WORKSPACE_FOLDER";case 7:return"DEFAULT";case 8:return"MEMORY"}}e.ConfigurationTargetToString=p;function m(u,S){const g=Object.create(null);for(const h in u)y(g,h,u[h],S);return g}e.toValuesTree=m;function y(u,S,g,h){const l=S.split("."),i=l.pop();let s=u;for(let n=0;n<l.length;n++){const a=l[n];let r=s[a];switch(typeof r){case"undefined":r=s[a]=Object.create(null);break;case"object":break;default:h(`Ignoring ${S} as ${l.slice(0,n+1).join(".")} is ${JSON.stringify(r)}`);return}s=r}if(typeof s=="object"&&s!==null)try{s[i]=g}catch{h(`Ignoring ${S} as ${l.join(".")} is ${JSON.stringify(s)}`)}else h(`Ignoring ${S} as ${l.join(".")} is ${JSON.stringify(s)}`)}e.addToValueTree=y;function I(u,S){const g=S.split(".");E(u,g)}e.removeFromValueTree=I;function E(u,S){const g=S.shift();if(S.length===0){delete u[g];return}if(Object.keys(u).indexOf(g)!==-1){const h=u[g];typeof h=="object"&&!Array.isArray(h)&&(E(h,S),Object.keys(h).length===0&&delete u[g])}}function d(u,S,g){function h(s,n){let a=s;for(const r of n){if(typeof a!="object"||a===null)return;a=a[r]}return a}const l=S.split("."),i=h(u,l);return typeof i>"u"?g:i}e.getConfigurationValue=d;function w(u,S,g){Object.keys(S).forEach(h=>{h!=="__proto__"&&(h in u?C.isObject(u[h])&&C.isObject(S[h])?w(u[h],S[h],g):g&&(u[h]=S[h]):u[h]=S[h])})}e.merge=w;function f(u,S,g){const h=u.inspect(S),l=u.inspect(g);return typeof h.userValue<"u"||typeof h.workspaceValue<"u"||typeof h.workspaceFolderValue<"u"?h.value:typeof l.userValue<"u"||typeof l.workspaceValue<"u"||typeof l.workspaceFolderValue<"u"?l.value:h.defaultValue}e.getMigratedSettingValue=f;function v(u){return u.replace(/[\[\]]/g,"")}e.getLanguageTagSettingPlainKey=v}),define(ee[71],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryCredentialsProvider=e.ICredentialsMainService=e.ICredentialsService=void 0,e.ICredentialsService=(0,C.createDecorator)("credentialsService"),e.ICredentialsMainService=(0,C.createDecorator)("credentialsMainService");class t{constructor(){this.secretVault={}}async getPassword(L,R){return this.secretVault[L]?.[R]??null}async setPassword(L,R,P){this.secretVault[L]=this.secretVault[L]??{},this.secretVault[L][R]=P}async deletePassword(L,R){return this.secretVault[L]?.[R]?(delete this.secretVault[L][R],Object.keys(this.secretVault[L]).length===0&&delete this.secretVault[L],!0):!1}async findPassword(L){return JSON.stringify(this.secretVault[L])??null}async findCredentials(L){const R=[];for(const P of Object.keys(this.secretVault[L]||{}))R.push({account:P,password:this.secretVault[L][P]});return R}async clear(){this.secretVault={}}}e.InMemoryCredentialsProvider=t}),define(ee[84],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullDiagnosticsService=e.isRemoteDiagnosticError=e.IDiagnosticsService=e.ID=void 0,e.ID="diagnosticsService",e.IDiagnosticsService=(0,C.createDecorator)(e.ID);function t(L){return!!L.hostName&&!!L.errorMessage}e.isRemoteDiagnosticError=t;class k{async getPerformanceInfo(R,P){return{}}async getSystemInfo(R,P){return{processArgs:"nullProcessArgs",gpuStatus:"nullGpuStatus",screenReader:"nullScreenReader",remoteData:[],os:"nullOs",memory:"nullMemory",vmHint:"nullVmHint"}}async getDiagnostics(R,P){return""}async getWorkspaceFileExtensions(R){return{extensions:[]}}async reportWorkspaceStats(R){}}e.NullDiagnosticsService=k}),define(ee[107],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IEncryptionMainService=void 0,e.IEncryptionMainService=(0,C.createDecorator)("encryptionMainService")}),define(ee[35],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INativeEnvironmentService=e.IEnvironmentService=void 0,e.IEnvironmentService=(0,C.createDecorator)("environmentService"),e.INativeEnvironmentService=(0,C.refineServiceDecorator)(e.IEnvironmentService)}),define(ee[27],te([0,1,53,9,83,35,183,5]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EnvironmentMainService=e.IEnvironmentMainService=void 0,e.IEnvironmentMainService=(0,P.refineServiceDecorator)(L.IEnvironmentService);class p extends R.NativeEnvironmentService{get cachedLanguagesPath(){return(0,t.join)(this.userDataPath,"clp")}get backupHome(){return(0,t.join)(this.userDataPath,"Backups")}get mainIPCHandle(){return(0,k.createStaticIPCHandle)(this.userDataPath,"main",this.productService.version)}get mainLockfile(){return(0,t.join)(this.userDataPath,"code.lock")}get disableUpdates(){return!!this.args["disable-updates"]}get disableKeytar(){return!!this.args["disable-keytar"]}get crossOriginIsolated(){return!!this.args["enable-coi"]}get codeCachePath(){return process.env.VSCODE_CODE_CACHE_PATH||void 0}get useCodeCache(){return!!this.codeCachePath}}we([C.memoize],p.prototype,"cachedLanguagesPath",null),we([C.memoize],p.prototype,"backupHome",null),we([C.memoize],p.prototype,"mainIPCHandle",null),we([C.memoize],p.prototype,"mainLockfile",null),we([C.memoize],p.prototype,"disableUpdates",null),we([C.memoize],p.prototype,"disableKeytar",null),we([C.memoize],p.prototype,"crossOriginIsolated",null),we([C.memoize],p.prototype,"codeCachePath",null),we([C.memoize],p.prototype,"useCodeCache",null),e.EnvironmentMainService=p}),define(ee[192],te([0,1,154,5]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreferencesLocalizedLabel=e.PreferencesLabel=e.ExtensionsLocalizedLabel=e.ExtensionsLabel=e.IExtensionTipsService=e.IGlobalExtensionEnablementService=e.ENABLED_EXTENSIONS_STORAGE_PATH=e.DISABLED_EXTENSIONS_STORAGE_PATH=e.IExtensionManagementService=e.ExtensionManagementError=e.ExtensionManagementErrorCode=e.IExtensionGalleryService=e.InstallOperation=e.StatisticType=e.SortOrder=e.SortBy=e.isIExtensionIdentifier=e.getFallbackTargetPlarforms=e.isTargetPlatformCompatible=e.isNotWebExtensionInWebTargetPlatform=e.getTargetPlatform=e.toTargetPlatform=e.TargetPlatformToString=e.WEB_EXTENSION_TAG=e.EXTENSION_IDENTIFIER_REGEX=e.EXTENSION_IDENTIFIER_PATTERN=void 0,e.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",e.EXTENSION_IDENTIFIER_REGEX=new RegExp(e.EXTENSION_IDENTIFIER_PATTERN),e.WEB_EXTENSION_TAG="__web_extension";function k(u){switch(u){case"win32-x64":return"Windows 64 bit";case"win32-ia32":return"Windows 32 bit";case"win32-arm64":return"Windows ARM";case"linux-x64":return"Linux 64 bit";case"linux-arm64":return"Linux ARM 64";case"linux-armhf":return"Linux ARM";case"alpine-x64":return"Alpine Linux 64 bit";case"alpine-arm64":return"Alpine ARM 64";case"darwin-x64":return"Mac";case"darwin-arm64":return"Mac Silicon";case"web":return"Web";case"universal":return"universal";case"unknown":return"unknown";case"undefined":return"undefined"}}e.TargetPlatformToString=k;function L(u){switch(u){case"win32-x64":return"win32-x64";case"win32-ia32":return"win32-ia32";case"win32-arm64":return"win32-arm64";case"linux-x64":return"linux-x64";case"linux-arm64":return"linux-arm64";case"linux-armhf":return"linux-armhf";case"alpine-x64":return"alpine-x64";case"alpine-arm64":return"alpine-arm64";case"darwin-x64":return"darwin-x64";case"darwin-arm64":return"darwin-arm64";case"web":return"web";case"universal":return"universal";default:return"unknown"}}e.toTargetPlatform=L;function R(u,S){switch(u){case 3:return S==="x64"?"win32-x64":S==="ia32"?"win32-ia32":S==="arm64"?"win32-arm64":"unknown";case 2:return S==="x64"?"linux-x64":S==="arm64"?"linux-arm64":S==="arm"?"linux-armhf":"unknown";case"alpine":return S==="x64"?"alpine-x64":S==="arm64"?"alpine-arm64":"unknown";case 1:return S==="x64"?"darwin-x64":S==="arm64"?"darwin-arm64":"unknown";case 0:return"web"}}e.getTargetPlatform=R;function P(u,S){return S==="web"&&!u.includes("web")}e.isNotWebExtensionInWebTargetPlatform=P;function p(u,S,g){return P(S,g)?!1:u==="undefined"||u==="universal"?!0:u==="unknown"?!1:u===g?!0:m(g).includes(u)}e.isTargetPlatformCompatible=p;function m(u){switch(u){case"win32-x64":return["win32-ia32"];case"win32-arm64":return["win32-ia32"]}return[]}e.getFallbackTargetPlarforms=m;function y(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(!u.uuid||typeof u.uuid=="string")}e.isIExtensionIdentifier=y;var I;(function(u){u[u.NoneOrRelevance=0]="NoneOrRelevance",u[u.LastUpdatedDate=1]="LastUpdatedDate",u[u.Title=2]="Title",u[u.PublisherName=3]="PublisherName",u[u.InstallCount=4]="InstallCount",u[u.PublishedDate=10]="PublishedDate",u[u.AverageRating=6]="AverageRating",u[u.WeightedRating=12]="WeightedRating"})(I=e.SortBy||(e.SortBy={}));var E;(function(u){u[u.Default=0]="Default",u[u.Ascending=1]="Ascending",u[u.Descending=2]="Descending"})(E=e.SortOrder||(e.SortOrder={}));var d;(function(u){u.Install="install",u.Uninstall="uninstall"})(d=e.StatisticType||(e.StatisticType={}));var w;(function(u){u[u.None=1]="None",u[u.Install=2]="Install",u[u.Update=3]="Update",u[u.Migrate=4]="Migrate"})(w=e.InstallOperation||(e.InstallOperation={})),e.IExtensionGalleryService=(0,t.createDecorator)("extensionGalleryService");var f;(function(u){u.Unsupported="Unsupported",u.Deprecated="Deprecated",u.Malicious="Malicious",u.Incompatible="Incompatible",u.IncompatiblePreRelease="IncompatiblePreRelease",u.IncompatibleTargetPlatform="IncompatibleTargetPlatform",u.ReleaseVersionNotFound="ReleaseVersionNotFound",u.Invalid="Invalid",u.Download="Download",u.Extract="Extract",u.Delete="Delete",u.Rename="Rename",u.CorruptZip="CorruptZip",u.IncompleteZip="IncompleteZip",u.Internal="Internal",u.Signature="Signature"})(f=e.ExtensionManagementErrorCode||(e.ExtensionManagementErrorCode={}));class v extends Error{constructor(S,g){super(S),this.code=g,this.name=g}}e.ExtensionManagementError=v,e.IExtensionManagementService=(0,t.createDecorator)("extensionManagementService"),e.DISABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/disabled",e.ENABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/enabled",e.IGlobalExtensionEnablementService=(0,t.createDecorator)("IGlobalExtensionEnablementService"),e.IExtensionTipsService=(0,t.createDecorator)("IExtensionTipsService"),e.ExtensionsLabel=(0,C.localize)(0,null),e.ExtensionsLocalizedLabel={value:e.ExtensionsLabel,original:"Extensions"},e.PreferencesLabel=(0,C.localize)(1,null),e.PreferencesLocalizedLabel={value:e.PreferencesLabel,original:"Preferences"}}),define(ee[193],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IExtensionUrlTrustService=void 0,e.IExtensionUrlTrustService=(0,C.createDecorator)("extensionUrlTrustService")}),define(ee[194],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipcExtensionHostStarterChannelName=e.IExtensionHostStarter=void 0,e.IExtensionHostStarter=(0,C.createDecorator)("extensionHostStarter"),e.ipcExtensionHostStarterChannelName="extensionHostStarter"}),define(ee[108],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IExternalTerminalMainService=e.DEFAULT_TERMINAL_OSX=e.IExternalTerminalService=void 0,e.IExternalTerminalService=(0,C.createDecorator)("externalTerminal"),e.DEFAULT_TERMINAL_OSX="Terminal.app",e.IExternalTerminalMainService=(0,C.createDecorator)("externalTerminal")}),define(ee[195],te([0,1,46,14,9,4,79,23,82,158,108]),function(j,e,C,t,k,L,R,P,p,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinuxExternalTerminalService=e.MacExternalTerminalService=e.WindowsExternalTerminalService=void 0;const I=m.localize(0,null);class E{async getDefaultTerminalForPlatforms(){return{windows:d.getDefaultTerminalWindows(),linux:await f.getDefaultTerminalLinuxReady(),osx:"xterm"}}}class d extends E{openTerminal(h,l){return this.spawnTerminal(C,h,p.getWindowsShell(),l)}spawnTerminal(h,l,i,s){const n=l.windowsExec||d.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const a=k.basename(n).toLowerCase();if(a==="cmder"||a==="cmder.exe")return h.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const r=["/c","start","/wait"];return n.indexOf(" ")>=0&&r.push('""'),r.push(n),(a==="wt"||a==="wt.exe")&&r.push("-d ."),new Promise((c,o)=>{const b=v(process),D=h.spawn(i,r,{cwd:s,env:b});D.on("error",o),D.on("exit",()=>c())})}runInTerminal(h,l,i,s,n){const a="windowsExec"in n&&n.windowsExec?n.windowsExec:d.getDefaultTerminalWindows();return new Promise((r,c)=>{const o=`"${l} - ${I}"`,b=`""${i.join('" "')}" & pause"`,D=["/c","start",o,"/wait",a,"/c",b],A=Object.assign({},v(process),s);Object.keys(A).filter(ae=>A[ae]===null).forEach(ae=>delete A[ae]);const N={cwd:l,env:A,windowsVerbatimArguments:!0};C.spawn(d.CMD,D,N).on("error",ae=>{c(u(ae))}),r(void 0)})}static getDefaultTerminalWindows(){if(!d._DEFAULT_TERMINAL_WINDOWS){const h=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");d._DEFAULT_TERMINAL_WINDOWS=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${h?"Sysnative":"System32"}\\cmd.exe`}return d._DEFAULT_TERMINAL_WINDOWS}}e.WindowsExternalTerminalService=d,d.CMD="cmd.exe";class w extends E{openTerminal(h,l){return this.spawnTerminal(C,h,l)}runInTerminal(h,l,i,s,n){const a=n.osxExec||y.DEFAULT_TERMINAL_OSX;return new Promise((r,c)=>{if(a===y.DEFAULT_TERMINAL_OSX||a==="iTerm.app"){const o=a===y.DEFAULT_TERMINAL_OSX?"TerminalHelper":"iTermHelper",D=[t.FileAccess.asFileUri(`vs/workbench/contrib/externalTerminal/node/${o}.scpt`).fsPath,"-t",h||I,"-w",l];for(const G of i)D.push("-a"),D.push(G);if(s){const G=Object.assign({},v(process),s);for(const ae in G){const x=G[ae];x===null?(D.push("-u"),D.push(ae)):(D.push("-e"),D.push(`${ae}=${x}`))}}let A="";const N=C.spawn(w.OSASCRIPT,D);N.on("error",G=>{c(u(G))}),N.stderr.on("data",G=>{A+=G.toString()}),N.on("exit",G=>{if(G===0)r(void 0);else if(A){const ae=A.split(`
`,1);c(new Error(ae[0]))}else c(new Error(m.localize(1,null,o,G)))})}else c(new Error(m.localize(2,null,a)))})}spawnTerminal(h,l,i){const s=l.osxExec||y.DEFAULT_TERMINAL_OSX;return new Promise((n,a)=>{const r=["-a",s];i&&r.push(i);const c=v(process),o=h.spawn("/usr/bin/open",r,{cwd:i,env:c});o.on("error",a),o.on("exit",()=>n())})}}e.MacExternalTerminalService=w,w.OSASCRIPT="/usr/bin/osascript";class f extends E{openTerminal(h,l){return this.spawnTerminal(C,h,l)}runInTerminal(h,l,i,s,n){const a=n.linuxExec?Promise.resolve(n.linuxExec):f.getDefaultTerminalLinuxReady();return new Promise((r,c)=>{const o=[];a.then(b=>{b.indexOf("gnome-terminal")>=0?o.push("-x"):o.push("-e"),o.push("bash"),o.push("-c");const D=`${S(i)}; echo; read -p "${f.WAIT_MESSAGE}" -n1;`;o.push(`''${D}''`);const A=Object.assign({},v(process),s);Object.keys(A).filter(x=>A[x]===null).forEach(x=>delete A[x]);const N={cwd:l,env:A};let G="";const ae=C.spawn(b,o,N);ae.on("error",x=>{c(u(x))}),ae.stderr.on("data",x=>{G+=x.toString()}),ae.on("exit",x=>{if(x===0)r(void 0);else if(G){const Q=G.split(`
`,1);c(new Error(Q[0]))}else c(new Error(m.localize(4,null,b,x)))})})})}static async getDefaultTerminalLinuxReady(){if(!f._DEFAULT_TERMINAL_LINUX_READY)if(!L.isLinux)f._DEFAULT_TERMINAL_LINUX_READY=Promise.resolve("xterm");else{const h=await P.Promises.exists("/etc/debian_version");f._DEFAULT_TERMINAL_LINUX_READY=new Promise(l=>{h?l("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?l("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?l("konsole"):process.env.COLORTERM?l(process.env.COLORTERM):process.env.TERM?l(process.env.TERM):l("xterm")})}return f._DEFAULT_TERMINAL_LINUX_READY}spawnTerminal(h,l,i){const s=l.linuxExec?Promise.resolve(l.linuxExec):f.getDefaultTerminalLinuxReady();return new Promise((n,a)=>{s.then(r=>{const c=v(process),o=h.spawn(r,[],{cwd:i,env:c});o.on("error",a),o.on("exit",()=>n())})})}}e.LinuxExternalTerminalService=f,f.WAIT_MESSAGE=m.localize(3,null);function v(g){const h={...g.env};return(0,R.sanitizeProcessEnvironment)(h),h}function u(g){return"errno"in g&&g.errno==="ENOENT"&&"path"in g&&typeof g.path=="string"?new Error(m.localize(5,null,g.path)):g}function S(g){let h="";for(const l of g)l.indexOf(" ")>=0?h+='"'+l+'"':h+=l,h+=" ";return h}}),define(ee[16],te([0,1,60,9,26,12,7,160,5]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPlatformLimits=e.Arch=e.ByteSize=e.FALLBACK_MAX_MEMORY_SIZE_MB=e.MIN_MAX_MEMORY_SIZE_MB=e.whenProviderRegistered=e.etag=e.ETAG_DISABLED=e.FileKind=e.FILES_EXCLUDE_CONFIG=e.FILES_ASSOCIATIONS_CONFIG=e.HotExitConfiguration=e.AutoSaveConfiguration=e.FileOperationResult=e.NotModifiedSinceFileOperationError=e.FileOperationError=e.isParent=e.FileChangesEvent=e.FileChangeType=e.FileOperationEvent=e.FileOperation=e.toFileOperationResult=e.toFileSystemProviderErrorCode=e.markAsFileSystemProviderError=e.ensureFileSystemProviderError=e.createFileSystemProviderError=e.FileSystemProviderError=e.FileSystemProviderErrorCode=e.hasFileAtomicReadCapability=e.hasFileReadStreamCapability=e.hasOpenReadWriteCloseCapability=e.hasFileCloneCapability=e.hasFileFolderCopyCapability=e.hasReadWriteCapability=e.FileSystemProviderCapabilities=e.FilePermission=e.FileType=e.isFileOpenForWriteOptions=e.IFileService=void 0,e.IFileService=(0,p.createDecorator)("fileService");function m(K){return K.create===!0}e.isFileOpenForWriteOptions=m;var y;(function(K){K[K.Unknown=0]="Unknown",K[K.File=1]="File",K[K.Directory=2]="Directory",K[K.SymbolicLink=64]="SymbolicLink"})(y=e.FileType||(e.FileType={}));var I;(function(K){K[K.Readonly=1]="Readonly"})(I=e.FilePermission||(e.FilePermission={}));var E;(function(K){K[K.FileReadWrite=2]="FileReadWrite",K[K.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",K[K.FileReadStream=16]="FileReadStream",K[K.FileFolderCopy=8]="FileFolderCopy",K[K.PathCaseSensitive=1024]="PathCaseSensitive",K[K.Readonly=2048]="Readonly",K[K.Trash=4096]="Trash",K[K.FileWriteUnlock=8192]="FileWriteUnlock",K[K.FileAtomicRead=16384]="FileAtomicRead",K[K.FileClone=32768]="FileClone"})(E=e.FileSystemProviderCapabilities||(e.FileSystemProviderCapabilities={}));function d(K){return!!(K.capabilities&2)}e.hasReadWriteCapability=d;function w(K){return!!(K.capabilities&8)}e.hasFileFolderCopyCapability=w;function f(K){return!!(K.capabilities&32768)}e.hasFileCloneCapability=f;function v(K){return!!(K.capabilities&4)}e.hasOpenReadWriteCloseCapability=v;function u(K){return!!(K.capabilities&16)}e.hasFileReadStreamCapability=u;function S(K){return d(K)?!!(K.capabilities&16384):!1}e.hasFileAtomicReadCapability=S;var g;(function(K){K.FileExists="EntryExists",K.FileNotFound="EntryNotFound",K.FileNotADirectory="EntryNotADirectory",K.FileIsADirectory="EntryIsADirectory",K.FileExceedsMemoryLimit="EntryExceedsMemoryLimit",K.FileTooLarge="EntryTooLarge",K.FileWriteLocked="EntryWriteLocked",K.NoPermissions="NoPermissions",K.Unavailable="Unavailable",K.Unknown="Unknown"})(g=e.FileSystemProviderErrorCode||(e.FileSystemProviderErrorCode={}));class h extends Error{constructor(le,W){super(le),this.code=W}}e.FileSystemProviderError=h;function l(K,le){const W=new h(K.toString(),le);return s(W,le),W}e.createFileSystemProviderError=l;function i(K){return K||l((0,P.localize)(0,null),g.Unknown)}e.ensureFileSystemProviderError=i;function s(K,le){return K.name=le?`${le} (FileSystemError)`:"FileSystemError",K}e.markAsFileSystemProviderError=s;function n(K){if(!K)return g.Unknown;if(K instanceof h)return K.code;const le=/^(.+) \(FileSystemError\)$/.exec(K.name);if(!le)return g.Unknown;switch(le[1]){case g.FileExists:return g.FileExists;case g.FileIsADirectory:return g.FileIsADirectory;case g.FileNotADirectory:return g.FileNotADirectory;case g.FileNotFound:return g.FileNotFound;case g.FileExceedsMemoryLimit:return g.FileExceedsMemoryLimit;case g.FileTooLarge:return g.FileTooLarge;case g.FileWriteLocked:return g.FileWriteLocked;case g.NoPermissions:return g.NoPermissions;case g.Unavailable:return g.Unavailable}return g.Unknown}e.toFileSystemProviderErrorCode=n;function a(K){if(K instanceof A)return K.fileOperationResult;switch(n(K)){case g.FileNotFound:return 1;case g.FileIsADirectory:return 0;case g.FileNotADirectory:return 10;case g.FileWriteLocked:return 5;case g.NoPermissions:return 6;case g.FileExists:return 4;case g.FileExceedsMemoryLimit:return 9;case g.FileTooLarge:return 7;default:return 11}}e.toFileOperationResult=a;var r;(function(K){K[K.CREATE=0]="CREATE",K[K.DELETE=1]="DELETE",K[K.MOVE=2]="MOVE",K[K.COPY=3]="COPY",K[K.WRITE=4]="WRITE"})(r=e.FileOperation||(e.FileOperation={}));class c{constructor(le,W,O){this.resource=le,this.operation=W,this.target=O}isOperation(le){return this.operation===le}}e.FileOperationEvent=c;var o;(function(K){K[K.UPDATED=0]="UPDATED",K[K.ADDED=1]="ADDED",K[K.DELETED=2]="DELETED"})(o=e.FileChangeType||(e.FileChangeType={}));class b{constructor(le,W){this.added=void 0,this.updated=void 0,this.deleted=void 0,this.rawChanges=[],this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[],this.rawChanges=le;const O=new Map;for(const U of le){const H=O.get(U.type);switch(H?H.push([U.resource,U]):O.set(U.type,[[U.resource,U]]),U.type){case 1:this.rawAdded.push(U.resource);break;case 0:this.rawUpdated.push(U.resource);break;case 2:this.rawDeleted.push(U.resource);break}}for(const[U,H]of O)switch(U){case 1:this.added=C.TernarySearchTree.forUris(()=>W),this.added.fill(H);break;case 0:this.updated=C.TernarySearchTree.forUris(()=>W),this.updated.fill(H);break;case 2:this.deleted=C.TernarySearchTree.forUris(()=>W),this.deleted.fill(H);break}}contains(le,...W){return this.doContains(le,{includeChildren:!1},...W)}affects(le,...W){return this.doContains(le,{includeChildren:!0},...W)}doContains(le,W,...O){if(!le)return!1;const U=O.length>0;return!!((!U||O.includes(1))&&(this.added?.get(le)||W.includeChildren&&this.added?.findSuperstr(le))||(!U||O.includes(0))&&(this.updated?.get(le)||W.includeChildren&&this.updated?.findSuperstr(le))||(!U||O.includes(2))&&(this.deleted?.findSubstr(le)||W.includeChildren&&this.deleted?.findSuperstr(le)))}gotAdded(){return!!this.added}gotDeleted(){return!!this.deleted}gotUpdated(){return!!this.updated}}e.FileChangesEvent=b;function D(K,le,W){return!K||!le||K===le||le.length>K.length?!1:(le.charAt(le.length-1)!==t.sep&&(le+=t.sep),W?(0,k.startsWithIgnoreCase)(K,le):K.indexOf(le)===0)}e.isParent=D;class A extends Error{constructor(le,W,O){super(le),this.fileOperationResult=W,this.options=O}}e.FileOperationError=A;class N extends A{constructor(le,W,O){super(le,2,O),this.stat=W}}e.NotModifiedSinceFileOperationError=N;var G;(function(K){K[K.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",K[K.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",K[K.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",K[K.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",K[K.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",K[K.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",K[K.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",K[K.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",K[K.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",K[K.FILE_EXCEEDS_MEMORY_LIMIT=9]="FILE_EXCEEDS_MEMORY_LIMIT",K[K.FILE_NOT_DIRECTORY=10]="FILE_NOT_DIRECTORY",K[K.FILE_OTHER_ERROR=11]="FILE_OTHER_ERROR"})(G=e.FileOperationResult||(e.FileOperationResult={})),e.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},e.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},e.FILES_ASSOCIATIONS_CONFIG="files.associations",e.FILES_EXCLUDE_CONFIG="files.exclude";var ae;(function(K){K[K.FILE=0]="FILE",K[K.FOLDER=1]="FOLDER",K[K.ROOT_FOLDER=2]="ROOT_FOLDER"})(ae=e.FileKind||(e.FileKind={})),e.ETAG_DISABLED="";function x(K){if(!(typeof K.size!="number"||typeof K.mtime!="number"))return K.mtime.toString(29)+K.size.toString(31)}e.etag=x;async function Q(K,le){if(!le.hasProvider(R.URI.from({scheme:K.scheme})))return new Promise(W=>{const O=le.onDidChangeFileSystemProviderRegistrations(U=>{U.scheme===K.scheme&&U.added&&(O.dispose(),W())})})}e.whenProviderRegistered=Q,e.MIN_MAX_MEMORY_SIZE_MB=2048,e.FALLBACK_MAX_MEMORY_SIZE_MB=4096;class re{static formatSize(le){return(0,L.isNumber)(le)||(le=0),le<re.KB?(0,P.localize)(1,null,le.toFixed(0)):le<re.MB?(0,P.localize)(2,null,(le/re.KB).toFixed(2)):le<re.GB?(0,P.localize)(3,null,(le/re.MB).toFixed(2)):le<re.TB?(0,P.localize)(4,null,(le/re.GB).toFixed(2)):(0,P.localize)(5,null,(le/re.TB).toFixed(2))}}e.ByteSize=re,re.KB=1024,re.MB=re.KB*re.KB,re.GB=re.MB*re.KB,re.TB=re.GB*re.KB;var ne;(function(K){K[K.IA32=0]="IA32",K[K.OTHER=1]="OTHER"})(ne=e.Arch||(e.Arch={}));function fe(K){return{maxFileSize:K===0?300*re.MB:16*re.GB,maxHeapSize:K===0?700*re.MB:2*700*re.MB}}e.getPlatformLimits=fe}),define(ee[196],te([0,1,17,45,15,3,2,59,7,29,16]),function(j,e,C,t,k,L,R,P,p,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiskFileSystemProviderClient=e.LOCAL_FILE_SYSTEM_CHANNEL_NAME=void 0,e.LOCAL_FILE_SYSTEM_CHANNEL_NAME="localFilesystem";class I extends R.Disposable{constructor(d,w){super(),this.channel=d,this.extraCapabilities=w,this.onDidChangeCapabilities=L.Event.None,this._onDidChange=this._register(new L.Emitter),this.onDidChangeFile=this._onDidChange.event,this._onDidWatchError=this._register(new L.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.sessionId=(0,m.generateUuid)(),this.registerFileChangeListeners()}get capabilities(){return this._capabilities||(this._capabilities=57374,this.extraCapabilities.pathCaseSensitive&&(this._capabilities|=1024),this.extraCapabilities.trash&&(this._capabilities|=4096)),this._capabilities}stat(d){return this.channel.call("stat",[d])}readdir(d){return this.channel.call("readdir",[d])}async readFile(d,w){const{buffer:f}=await this.channel.call("readFile",[d,w]);return f}readFileStream(d,w,f){const v=(0,P.newWriteableStream)(S=>C.VSBuffer.concat(S.map(g=>C.VSBuffer.wrap(g))).buffer),u=this.channel.listen("readFileStream",[d,w])(S=>{if(S instanceof C.VSBuffer)v.write(S.buffer);else{if(S==="end")v.end();else{let g=S;g instanceof Error||(g=(0,y.createFileSystemProviderError)((0,t.toErrorMessage)(g),y.FileSystemProviderErrorCode.Unknown)),v.error(g),v.end()}u.dispose()}});return f.onCancellationRequested(()=>{v.error((0,k.canceled)()),v.end(),u.dispose()}),v}writeFile(d,w,f){return this.channel.call("writeFile",[d,C.VSBuffer.wrap(w),f])}open(d,w){return this.channel.call("open",[d,w])}close(d){return this.channel.call("close",[d])}async read(d,w,f,v,u){const[S,g]=await this.channel.call("read",[d,w,u]);return f.set(S.buffer.slice(0,g),v),g}write(d,w,f,v,u){return this.channel.call("write",[d,w,C.VSBuffer.wrap(f),v,u])}mkdir(d){return this.channel.call("mkdir",[d])}delete(d,w){return this.channel.call("delete",[d,w])}rename(d,w,f){return this.channel.call("rename",[d,w,f])}copy(d,w,f){return this.channel.call("copy",[d,w,f])}cloneFile(d,w){return this.channel.call("cloneFile",[d,w])}registerFileChangeListeners(){this._register(this.channel.listen("fileChange",[this.sessionId])(d=>{if(Array.isArray(d)){const w=d;this._onDidChange.fire(w.map(f=>({resource:p.URI.revive(f.resource),type:f.type})))}else{const w=d;this._onDidWatchError.fire(w)}}))}watch(d,w){const f=(0,m.generateUuid)();return this.channel.call("watch",[this.sessionId,f,d,w]),(0,R.toDisposable)(()=>this.channel.call("unwatch",[this.sessionId,f]))}}e.DiskFileSystemProviderClient=I}),define(ee[109],te([0,1,17,15,161,16]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readFileIntoStream=void 0;async function R(y,I,E,d,w,f){let v;try{await P(y,I,E,d,w,f)}catch(u){v=u}finally{v&&w.errorTransformer&&(v=w.errorTransformer(v)),typeof v<"u"&&E.error(v),E.end()}}e.readFileIntoStream=R;async function P(y,I,E,d,w,f){p(f);const v=await y.open(I,{create:!1});try{p(f);let u=0,S=0,g=w&&typeof w.length=="number"?w.length:void 0,h=C.VSBuffer.alloc(Math.min(w.bufferSize,typeof g=="number"?g:w.bufferSize)),l=w&&typeof w.position=="number"?w.position:0,i=0;do S=await y.read(v,l,h.buffer,i,h.byteLength-i),l+=S,i+=S,u+=S,typeof g=="number"&&(g-=S),i===h.byteLength&&(await E.write(d(h)),h=C.VSBuffer.alloc(Math.min(w.bufferSize,typeof g=="number"?g:w.bufferSize)),i=0);while(S>0&&(typeof g!="number"||g>0)&&p(f)&&m(u,w));if(i>0){let s=i;typeof g=="number"&&(s=Math.min(i,g)),E.write(d(h.slice(0,s)))}}catch(u){throw(0,L.ensureFileSystemProviderError)(u)}finally{await y.close(v)}}function p(y){if(y.isCancellationRequested)throw(0,t.canceled)();return!0}function m(y,I){if(I?.limits){if(typeof I.limits.memory=="number"&&y>I.limits.memory)throw(0,L.createFileSystemProviderError)((0,k.localize)(0,null),L.FileSystemProviderErrorCode.FileExceedsMemoryLimit);if(typeof I.limits.size=="number"&&y>I.limits.size)throw(0,L.createFileSystemProviderError)((0,k.localize)(1,null),L.FileSystemProviderErrorCode.FileTooLarge)}return!0}}),define(ee[72],te([0,1,99,2,9,4,7,16]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseWatcherPatterns=e.normalizeWatcherPattern=e.coalesceEvents=e.toFileChanges=e.AbstractUniversalWatcherClient=e.AbstractNonRecursiveWatcherClient=e.AbstractWatcherClient=e.isRecursiveWatchRequest=void 0;function p(u){return u.recursive===!0}e.isRecursiveWatchRequest=p;class m extends t.Disposable{constructor(S,g,h,l){super(),this.onFileChanges=S,this.onLogMessage=g,this.verboseLogging=h,this.options=l,this.watcherDisposables=this._register(new t.MutableDisposable),this.requests=void 0,this.restartCounter=0}init(){const S=new t.DisposableStore;this.watcherDisposables.value=S,this.watcher=this.createWatcher(S),this.watcher.setVerboseLogging(this.verboseLogging),S.add(this.watcher.onDidChangeFile(g=>this.onFileChanges(g))),S.add(this.watcher.onDidLogMessage(g=>this.onLogMessage(g))),S.add(this.watcher.onDidError(g=>this.onError(g)))}onError(S){this.options.restartOnError?this.restartCounter<m.MAX_RESTARTS&&this.requests?(this.error(`restarting watcher after error: ${S}`),this.restart(this.requests)):this.error(`gave up attempting to restart watcher after error: ${S}`):this.error(S)}restart(S){this.restartCounter++,this.init(),this.watch(S)}async watch(S){this.requests=S,await this.watcher?.watch(S)}async setVerboseLogging(S){this.verboseLogging=S,await this.watcher?.setVerboseLogging(S)}error(S){this.onLogMessage({type:"error",message:`[File Watcher (${this.options.type})] ${S}`})}dispose(){return this.watcher=void 0,super.dispose()}}e.AbstractWatcherClient=m,m.MAX_RESTARTS=5;class y extends m{constructor(S,g,h){super(S,g,h,{type:"node.js",restartOnError:!1})}}e.AbstractNonRecursiveWatcherClient=y;class I extends m{constructor(S,g,h){super(S,g,h,{type:"universal",restartOnError:!0})}}e.AbstractUniversalWatcherClient=I;function E(u){return u.map(S=>({type:S.type,resource:R.URI.file(S.path)}))}e.toFileChanges=E;function d(u){const S=new v;for(const g of u)S.processEvent(g);return S.coalesce()}e.coalesceEvents=d;function w(u,S){return typeof S=="string"&&!S.startsWith(C.GLOBSTAR)&&!(0,k.isAbsolute)(S)?{base:u,pattern:S}:S}e.normalizeWatcherPattern=w;function f(u,S){const g=[];for(const h of S)g.push((0,C.parse)(w(u,h)));return g}e.parseWatcherPatterns=f;class v{constructor(){this.coalesced=new Set,this.mapPathToChange=new Map}toKey(S){return L.isLinux?S.path:S.path.toLowerCase()}processEvent(S){const g=this.mapPathToChange.get(this.toKey(S));let h=!1;if(g){const l=g.type,i=S.type;g.path!==S.path&&(S.type===2||S.type===1)?h=!0:l===1&&i===2?(this.mapPathToChange.delete(this.toKey(S)),this.coalesced.delete(g)):l===2&&i===1?g.type=0:l===1&&i===0||(g.type=i)}else h=!0;h&&(this.coalesced.add(S),this.mapPathToChange.set(this.toKey(S),S))}coalesce(){const S=[],g=[];return Array.from(this.coalesced).filter(h=>h.type!==2?(S.push(h),!1):!0).sort((h,l)=>h.path.length-l.path.length).filter(h=>g.some(l=>(0,P.isParent)(h.path,l,!L.isLinux))?!1:(g.push(h.path),!0)).concat(S)}}}),define(ee[197],te([0,1,40,8,22,30,2,76,9,4,100,23,72]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.watchFileContents=e.NodeJSFileWatcherLibrary=void 0;class d extends R.Disposable{constructor(v,u,S,g){super(),this.request=v,this.onDidFilesChange=u,this.onLogMessage=S,this.verboseLogging=g,this.throttledFileChangesWorker=new t.ThrottledWorker({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},h=>this.onDidFilesChange(h)),this.fileChangesDelayer=this._register(new t.ThrottledDelayer(d.FILE_CHANGES_HANDLER_DELAY)),this.fileChangesBuffer=[],this.excludes=(0,E.parseWatcherPatterns)(this.request.path,this.request.excludes),this.includes=this.request.includes?(0,E.parseWatcherPatterns)(this.request.path,this.request.includes):void 0,this.cts=new k.CancellationTokenSource,this.ready=this.watch()}async watch(){try{const v=await this.normalizePath(this.request);if(this.cts.token.isCancellationRequested)return;const u=await I.Promises.stat(v);this._register(await this.doWatch(v,u.isDirectory()))}catch(v){v.code!=="ENOENT"?this.error(v):this.trace(v)}}async normalizePath(v){let u=v.path;try{u=await I.Promises.realpath(v.path),v.path===u&&(u=await(0,y.realcase)(v.path)??v.path),v.path!==u&&this.trace(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${v.path}, real: ${u})`)}catch{}return u}async doWatch(v,u){if(m.isMacintosh&&(0,L.isEqualOrParent)(v,"/Volumes/",!0))return this.error(`Refusing to watch ${v} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`),R.Disposable.None;const S=new k.CancellationTokenSource(this.cts.token),g=new R.DisposableStore;try{const h=(0,p.basename)(v),l=(0,C.watch)(v);g.add((0,R.toDisposable)(()=>{l.removeAllListeners(),l.close()})),this.trace(`Started watching: '${v}'`);const i=new Set;if(u)try{for(const n of await I.Promises.readdir(v))i.add(n)}catch(n){this.error(n)}const s=new Map;g.add((0,R.toDisposable)(()=>{for(const[,n]of s)n.dispose();s.clear()})),l.on("error",(n,a)=>{this.error(`Failed to watch ${v} for changes using fs.watch() (${n}, ${a})`),this.dispose()}),l.on("change",(n,a)=>{if(S.token.isCancellationRequested)return;this.trace(`[raw] ["${n}"] ${a}`);let r="";if(a&&(r=a.toString(),m.isMacintosh&&(r=(0,P.normalizeNFC)(r))),!(!r||n!=="change"&&n!=="rename"))if(u)if(n==="rename"){s.get(r)?.dispose();const c=setTimeout(async()=>{if(s.delete(r),r===h&&!await I.Promises.exists(v)){this.warn("Watcher shutdown because watched path got deleted"),this.dispose();return}const o=await this.existsChildStrictCase((0,p.join)(v,r));if(S.token.isCancellationRequested)return;let b;o?i.has(r)?b=0:(b=1,i.add(r)):(i.delete(r),b=2),this.onFileChange({path:(0,p.join)(this.request.path,r),type:b})},d.FILE_DELETE_HANDLER_DELAY);s.set(r,(0,R.toDisposable)(()=>clearTimeout(c)))}else{let c;i.has(r)?c=0:(c=1,i.add(r)),this.onFileChange({path:(0,p.join)(this.request.path,r),type:c})}else if(n==="rename"||r!==h){const c=setTimeout(async()=>{const o=await I.Promises.exists(v);S.token.isCancellationRequested||(o?(this.onFileChange({path:this.request.path,type:0},!0),g.add(await this.doWatch(v,!1))):(await this.onFileChange({path:this.request.path,type:2},!0),this.dispose()))},d.FILE_DELETE_HANDLER_DELAY);g.clear(),g.add((0,R.toDisposable)(()=>clearTimeout(c)))}else this.onFileChange({path:this.request.path,type:0},!0)})}catch(h){await I.Promises.exists(v)&&!S.token.isCancellationRequested&&this.error(`Failed to watch ${v} for changes using fs.watch() (${h.toString()})`)}return(0,R.toDisposable)(()=>{S.dispose(!0),g.dispose()})}async onFileChange(v,u=!1){if(!this.cts.token.isCancellationRequested){this.verboseLogging&&this.trace(`${v.type===1?"[ADDED]":v.type===2?"[DELETED]":"[CHANGED]"} ${v.path}`),!u&&this.excludes.some(S=>S(v.path))?this.verboseLogging&&this.trace(` >> ignored (excluded) ${v.path}`):!u&&this.includes&&this.includes.length>0&&!this.includes.some(S=>S(v.path))?this.verboseLogging&&this.trace(` >> ignored (not included) ${v.path}`):this.fileChangesBuffer.push(v);try{await this.fileChangesDelayer.trigger(async()=>{const S=this.fileChangesBuffer;this.fileChangesBuffer=[];const g=(0,E.coalesceEvents)(S);if(g.length>0){if(this.verboseLogging)for(const l of g)this.trace(`>> normalized ${l.type===1?"[ADDED]":l.type===2?"[DELETED]":"[CHANGED]"} ${l.path}`);this.throttledFileChangesWorker.work(g)?this.throttledFileChangesWorker.pending>0&&this.trace(`started throttling events due to large amount of file change events at once (pending: ${this.throttledFileChangesWorker.pending}, most recent change: ${g[0].path}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.warn(`started ignoring events due to too many file change events at once (incoming: ${g.length}, most recent change: ${g[0].path}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}})}catch{}}}async existsChildStrictCase(v){if(m.isLinux)return I.Promises.exists(v);try{const u=(0,p.basename)(v);return(await I.Promises.readdir((0,p.dirname)(v))).some(g=>g===u)}catch(u){return this.trace(u),!1}}setVerboseLogging(v){this.verboseLogging=v}error(v){this.cts.token.isCancellationRequested||this.onLogMessage?.({type:"error",message:`[File Watcher (node.js)] ${v}`})}warn(v){this.cts.token.isCancellationRequested||this.onLogMessage?.({type:"warn",message:`[File Watcher (node.js)] ${v}`})}trace(v){!this.cts.token.isCancellationRequested&&this.verboseLogging&&this.onLogMessage?.({type:"trace",message:`[File Watcher (node.js)] ${v}`})}dispose(){this.trace(`stopping file watcher on ${this.request.path}`),this.cts.dispose(!0),super.dispose()}}e.NodeJSFileWatcherLibrary=d,d.FILE_DELETE_HANDLER_DELAY=100,d.FILE_CHANGES_HANDLER_DELAY=50;async function w(f,v,u,S,g=512){const h=await I.Promises.open(f,"r"),l=Buffer.allocUnsafe(g),i=new k.CancellationTokenSource(S);let s,n=!1;const a={path:f,excludes:[],recursive:!1},r=new d(a,c=>{(async()=>{for(const{type:o}of c)if(o===0){if(n)return;n=!0;try{for(;!i.token.isCancellationRequested;){const{bytesRead:b}=await I.Promises.read(h,l,0,g,null);if(!b||i.token.isCancellationRequested)break;v(l.slice(0,b))}}catch(b){s=new Error(b),i.dispose(!0)}finally{n=!1}}})()});return await r.ready,u(),new Promise((c,o)=>{i.token.onCancellationRequested(async()=>{r.dispose();try{await I.Promises.close(h)}catch(b){s=new Error(b)}s?o(s):c()})})}e.watchFileContents=w}),define(ee[198],te([0,1,3,99,2,4,197]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeJSWatcher=void 0;class P extends k.Disposable{constructor(){super(...arguments),this._onDidChangeFile=this._register(new C.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this._onDidLogMessage=this._register(new C.Emitter),this.onDidLogMessage=this._onDidLogMessage.event,this.onDidError=C.Event.None,this.watchers=new Map,this.verboseLogging=!1}async watch(m){const y=this.normalizeRequests(m),I=y.filter(d=>{const w=this.watchers.get(d.path);return w?!(0,t.patternsEquals)(w.request.excludes,d.excludes)||!(0,t.patternsEquals)(w.request.includes,d.includes):!0}),E=Array.from(this.watchers.values()).filter(({request:d})=>!y.find(w=>w.path===d.path&&(0,t.patternsEquals)(w.excludes,d.excludes)&&(0,t.patternsEquals)(w.includes,d.includes))).map(({request:d})=>d.path);I.length&&this.trace(`Request to start watching: ${I.map(d=>`${d.path} (excludes: ${d.excludes.length>0?d.excludes:"<none>"}, includes: ${d.includes&&d.includes.length>0?JSON.stringify(d.includes):"<all>"})`).join(",")}`),E.length&&this.trace(`Request to stop watching: ${E.join(",")}`);for(const d of E)this.stopWatching(d);for(const d of I)this.startWatching(d)}startWatching(m){const y=new R.NodeJSFileWatcherLibrary(m,E=>this._onDidChangeFile.fire(E),E=>this._onDidLogMessage.fire(E),this.verboseLogging),I={request:m,instance:y};this.watchers.set(m.path,I)}async stop(){for(const[m]of this.watchers)this.stopWatching(m);this.watchers.clear()}stopWatching(m){const y=this.watchers.get(m);y&&(this.watchers.delete(m),y.instance.dispose())}normalizeRequests(m){const y=new Map;for(const I of m){const E=L.isLinux?I.path:I.path.toLowerCase();y.set(E,I)}return Array.from(y.values())}async setVerboseLogging(m){this.verboseLogging=m;for(const[,y]of this.watchers)y.instance.setVerboseLogging(m)}trace(m){this.verboseLogging&&this._onDidLogMessage.fire({type:"trace",message:this.toMessage(m)})}toMessage(m,y){return y?`[File Watcher (node.js)] ${m} (path: ${y.request.path})`:`[File Watcher (node.js)] ${m}`}}e.NodeJSWatcher=P}),define(ee[199],te([0,1,72,198]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeJSWatcherClient=void 0;class k extends C.AbstractNonRecursiveWatcherClient{constructor(R,P,p){super(R,P,p),this.init()}createWatcher(){return new t.NodeJSWatcher}}e.NodeJSWatcherClient=k}),define(ee[200],te([0,1,14,47,147,72]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniversalWatcherClient=void 0;class R extends L.AbstractUniversalWatcherClient{constructor(p,m,y){super(p,m,y),this.init()}createWatcher(p){const m=p.add(new k.Client(C.FileAccess.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return p.add(m.onDidProcessExit(({code:y,signal:I})=>this.onError(`terminated by itself with code ${y}, signal: ${I}`))),t.ProxyChannel.toService((0,t.getNextTickChannel)(m.getChannel("watcher")))}}e.UniversalWatcherClient=R}),define(ee[85],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceCollection=void 0;class C{constructor(...k){this._entries=new Map;for(const[L,R]of k)this.set(L,R)}set(k,L){const R=this._entries.get(k);return this._entries.set(k,L),R}has(k){return this._entries.has(k)}get(k){return this._entries.get(k)}}e.ServiceCollection=C}),define(ee[201],te([0,1,8,15,2,70,191,5,85,96]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trace=e.InstantiationService=void 0;const y=!1;class I extends Error{constructor(v){super("cyclic dependency between services"),this.message=v.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${v.toString()}`}}class E{constructor(v=new p.ServiceCollection,u=!1,S,g=y){this._services=v,this._strict=u,this._parent=S,this._enableTracing=g,this._activeInstantiations=new Set,this._services.set(P.IInstantiationService,this),this._globalGraph=g?S?._globalGraph??new R.Graph(h=>h):void 0}createChild(v){return new E(v,this._strict,this,this._enableTracing)}invokeFunction(v,...u){const S=w.traceInvocation(this._enableTracing,v);let g=!1;try{return v({get:l=>{if(g)throw(0,t.illegalState)("service accessor is only valid during the invocation of its target method");const i=this._getOrCreateServiceInstance(l,S);if(!i)throw new Error(`[invokeFunction] unknown service '${l}'`);return i}},...u)}finally{g=!0,S.stop()}}createInstance(v,...u){let S,g;return v instanceof L.SyncDescriptor?(S=w.traceCreation(this._enableTracing,v.ctor),g=this._createInstance(v.ctor,v.staticArguments.concat(u),S)):(S=w.traceCreation(this._enableTracing,v),g=this._createInstance(v,u,S)),S.stop(),g}_createInstance(v,u=[],S){const g=P._util.getServiceDependencies(v).sort((i,s)=>i.index-s.index),h=[];for(const i of g){const s=this._getOrCreateServiceInstance(i.id,S);s||this._throwIfStrict(`[createInstance] ${v.name} depends on UNKNOWN service ${i.id}.`,!1),h.push(s)}const l=g.length>0?g[0].index:u.length;if(u.length!==l){console.trace(`[createInstance] First service dependency of ${v.name} at position ${l+1} conflicts with ${u.length} static arguments`);const i=l-u.length;i>0?u=u.concat(new Array(i)):u=u.slice(0,l)}return Reflect.construct(v,u.concat(h))}_setServiceInstance(v,u){if(this._services.get(v)instanceof L.SyncDescriptor)this._services.set(v,u);else if(this._parent)this._parent._setServiceInstance(v,u);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(v){const u=this._services.get(v);return!u&&this._parent?this._parent._getServiceInstanceOrDescriptor(v):u}_getOrCreateServiceInstance(v,u){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(v));const S=this._getServiceInstanceOrDescriptor(v);return S instanceof L.SyncDescriptor?this._safeCreateAndCacheServiceInstance(v,S,u.branch(v,!0)):(u.branch(v,!1),S)}_safeCreateAndCacheServiceInstance(v,u,S){if(this._activeInstantiations.has(v))throw new Error(`illegal state - RECURSIVELY instantiating service '${v}'`);this._activeInstantiations.add(v);try{return this._createAndCacheServiceInstance(v,u,S)}finally{this._activeInstantiations.delete(v)}}_createAndCacheServiceInstance(v,u,S){const g=new R.Graph(i=>i.id.toString());let h=0;const l=[{id:v,desc:u,_trace:S}];for(;l.length;){const i=l.pop();if(g.lookupOrInsertNode(i),h++>1e3)throw new I(g);for(const s of P._util.getServiceDependencies(i.desc.ctor)){const n=this._getServiceInstanceOrDescriptor(s.id);if(n||this._throwIfStrict(`[createInstance] ${v} depends on ${s.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(i.id),String(s.id)),n instanceof L.SyncDescriptor){const a={id:s.id,desc:n,_trace:i._trace.branch(s.id,!0)};g.insertEdge(i,a),l.push(a)}}}for(;;){const i=g.roots();if(i.length===0){if(!g.isEmpty())throw new I(g);break}for(const{data:s}of i){if(this._getServiceInstanceOrDescriptor(s.id)instanceof L.SyncDescriptor){const a=this._createServiceInstanceWithOwner(s.id,s.desc.ctor,s.desc.staticArguments,s.desc.supportsDelayedInstantiation,s._trace);this._setServiceInstance(s.id,a)}g.removeNode(s)}}return this._getServiceInstanceOrDescriptor(v)}_createServiceInstanceWithOwner(v,u,S=[],g,h){if(this._services.get(v)instanceof L.SyncDescriptor)return this._createServiceInstance(v,u,S,g,h);if(this._parent)return this._parent._createServiceInstanceWithOwner(v,u,S,g,h);throw new Error(`illegalState - creating UNKNOWN service instance ${u.name}`)}_createServiceInstance(v,u,S=[],g,h){if(g){const l=new E(void 0,this._strict,this,this._enableTracing);l._globalGraphImplicitDependency=String(v);const i=new Map,s=new C.IdleValue(()=>{const n=l._createInstance(u,S,h);for(const[a,r]of i){const c=n[a];if(typeof c=="function")for(const o of r)c.apply(n,o)}return i.clear(),n});return new Proxy(Object.create(null),{get(n,a){if(!s.isInitialized&&typeof a=="string"&&(a.startsWith("onDid")||a.startsWith("onWill"))){let o=i.get(a);return o||(o=new m.LinkedList,i.set(a,o)),(D,A,N)=>{const G=o.push([D,A,N]);return(0,k.toDisposable)(G)}}if(a in n)return n[a];const r=s.value;let c=r[a];return typeof c!="function"||(c=c.bind(r),n[a]=c),c},set(n,a,r){return s.value[a]=r,!0},getPrototypeOf(n){return u.prototype}})}else return this._createInstance(u,S,h)}_throwIfStrict(v,u){if(u&&console.warn(v),this._strict)throw new Error(v)}}e.InstantiationService=E;var d;(function(f){f[f.Creation=0]="Creation",f[f.Invocation=1]="Invocation",f[f.Branch=2]="Branch"})(d||(d={}));class w{static traceInvocation(v,u){return v?new w(1,u.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):w._None}static traceCreation(v,u){return v?new w(0,u.name):w._None}constructor(v,u){this.type=v,this.name=u,this._start=Date.now(),this._dep=[]}branch(v,u){const S=new w(2,v.toString());return this._dep.push([v,u,S]),S}stop(){const v=Date.now()-this._start;w._totals+=v;let u=!1;function S(h,l){const i=[],s=new Array(h+1).join("	");for(const[n,a,r]of l._dep)if(a&&r){u=!0,i.push(`${s}CREATES -> ${n}`);const c=S(h+1,r);c&&i.push(c)}else i.push(`${s}uses -> ${n}`);return i.join(`
`)}const g=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${S(1,this)}`,`DONE, took ${v.toFixed(2)}ms (grand total ${w._totals.toFixed(2)}ms)`];(v>2||u)&&w.all.add(g.join(`
`))}}e.Trace=w,w.all=new Set,w._None=new class extends w{constructor(){super(-1,null)}stop(){}branch(){return this}},w._totals=0}),define(ee[6],te([0,1,45,3,2,39,4,7,5]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseLogLevel=e.LogLevelToString=e.getLogLevel=e.NullLoggerService=e.NullLogService=e.NullLogger=e.AbstractLoggerService=e.LogService=e.MultiplexLogService=e.AdapterLogger=e.ConsoleLogger=e.ConsoleMainLogger=e.AbstractMessageLogger=e.AbstractLogger=e.format=e.log=e.DEFAULT_LOG_LEVEL=e.LogLevel=e.ILoggerService=e.ILogService=void 0,e.ILogService=(0,p.createDecorator)("logService"),e.ILoggerService=(0,p.createDecorator)("loggerService");function m(){return new Date().toISOString()}var y;(function(c){c[c.Off=0]="Off",c[c.Trace=1]="Trace",c[c.Debug=2]="Debug",c[c.Info=3]="Info",c[c.Warning=4]="Warning",c[c.Error=5]="Error"})(y=e.LogLevel||(e.LogLevel={})),e.DEFAULT_LOG_LEVEL=y.Info;function I(c,o,b){switch(o){case y.Trace:c.trace(b);break;case y.Debug:c.debug(b);break;case y.Info:c.info(b);break;case y.Warning:c.warn(b);break;case y.Error:c.error(b);break;case y.Off:break;default:throw new Error(`Invalid log level ${o}`)}}e.log=I;function E(c){let o="";for(let b=0;b<c.length;b++){let D=c[b];if(typeof D=="object")try{D=JSON.stringify(D)}catch{}o+=(b>0?" ":"")+D}return o}e.format=E;class d extends k.Disposable{constructor(){super(...arguments),this.level=e.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new t.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(o){this.level!==o&&(this.level=o,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(o){return this.level!==y.Off&&this.level<=o}}e.AbstractLogger=d;class w extends d{constructor(o){super(),this.logAlways=o}checkLogLevel(o){return this.logAlways||super.checkLogLevel(o)}trace(o,...b){this.checkLogLevel(y.Trace)&&this.log(y.Trace,E([o,...b]))}debug(o,...b){this.checkLogLevel(y.Debug)&&this.log(y.Debug,E([o,...b]))}info(o,...b){this.checkLogLevel(y.Info)&&this.log(y.Info,E([o,...b]))}warn(o,...b){this.checkLogLevel(y.Warning)&&this.log(y.Warning,E([o,...b]))}error(o,...b){if(this.checkLogLevel(y.Error))if(o instanceof Error){const D=Array.prototype.slice.call(arguments);D[0]=o.stack,this.log(y.Error,E(D))}else this.log(y.Error,E([o,...b]))}flush(){}}e.AbstractMessageLogger=w;class f extends d{constructor(o=e.DEFAULT_LOG_LEVEL){super(),this.setLevel(o),this.useColors=!R.isWindows}trace(o,...b){this.checkLogLevel(y.Trace)&&(this.useColors?console.log(`\x1B[90m[main ${m()}]\x1B[0m`,o,...b):console.log(`[main ${m()}]`,o,...b))}debug(o,...b){this.checkLogLevel(y.Debug)&&(this.useColors?console.log(`\x1B[90m[main ${m()}]\x1B[0m`,o,...b):console.log(`[main ${m()}]`,o,...b))}info(o,...b){this.checkLogLevel(y.Info)&&(this.useColors?console.log(`\x1B[90m[main ${m()}]\x1B[0m`,o,...b):console.log(`[main ${m()}]`,o,...b))}warn(o,...b){this.checkLogLevel(y.Warning)&&(this.useColors?console.warn(`\x1B[93m[main ${m()}]\x1B[0m`,o,...b):console.warn(`[main ${m()}]`,o,...b))}error(o,...b){this.checkLogLevel(y.Error)&&(this.useColors?console.error(`\x1B[91m[main ${m()}]\x1B[0m`,o,...b):console.error(`[main ${m()}]`,o,...b))}dispose(){}flush(){}}e.ConsoleMainLogger=f;class v extends d{constructor(o=e.DEFAULT_LOG_LEVEL){super(),this.setLevel(o)}trace(o,...b){this.checkLogLevel(y.Trace)&&console.log("%cTRACE","color: #888",o,...b)}debug(o,...b){this.checkLogLevel(y.Debug)&&console.log("%cDEBUG","background: #eee; color: #888",o,...b)}info(o,...b){this.checkLogLevel(y.Info)&&console.log("%c INFO","color: #33f",o,...b)}warn(o,...b){this.checkLogLevel(y.Warning)&&console.log("%c WARN","color: #993",o,...b)}error(o,...b){this.checkLogLevel(y.Error)&&console.log("%c  ERR","color: #f33",o,...b)}dispose(){}flush(){}}e.ConsoleLogger=v;class u extends d{constructor(o,b=e.DEFAULT_LOG_LEVEL){super(),this.adapter=o,this.setLevel(b)}trace(o,...b){this.checkLogLevel(y.Trace)&&this.adapter.log(y.Trace,[this.extractMessage(o),...b])}debug(o,...b){this.checkLogLevel(y.Debug)&&this.adapter.log(y.Debug,[this.extractMessage(o),...b])}info(o,...b){this.checkLogLevel(y.Info)&&this.adapter.log(y.Info,[this.extractMessage(o),...b])}warn(o,...b){this.checkLogLevel(y.Warning)&&this.adapter.log(y.Warning,[this.extractMessage(o),...b])}error(o,...b){this.checkLogLevel(y.Error)&&this.adapter.log(y.Error,[this.extractMessage(o),...b])}extractMessage(o){return typeof o=="string"?o:(0,C.toErrorMessage)(o,this.checkLogLevel(y.Trace))}dispose(){}flush(){}}e.AdapterLogger=u;class S extends d{constructor(o){super(),this.logServices=o,o.length&&this.setLevel(o[0].getLevel())}setLevel(o){for(const b of this.logServices)b.setLevel(o);super.setLevel(o)}trace(o,...b){for(const D of this.logServices)D.trace(o,...b)}debug(o,...b){for(const D of this.logServices)D.debug(o,...b)}info(o,...b){for(const D of this.logServices)D.info(o,...b)}warn(o,...b){for(const D of this.logServices)D.warn(o,...b)}error(o,...b){for(const D of this.logServices)D.error(o,...b)}flush(){for(const o of this.logServices)o.flush()}dispose(){for(const o of this.logServices)o.dispose()}}e.MultiplexLogService=S;class g extends k.Disposable{constructor(o){super(),this.logger=o,this._register(o)}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(o){this.logger.setLevel(o)}getLevel(){return this.logger.getLevel()}trace(o,...b){this.logger.trace(o,...b)}debug(o,...b){this.logger.debug(o,...b)}info(o,...b){this.logger.info(o,...b)}warn(o,...b){this.logger.warn(o,...b)}error(o,...b){this.logger.error(o,...b)}flush(){this.logger.flush()}}e.LogService=g;class h extends k.Disposable{constructor(o,b){super(),this.logLevel=o,this.loggerItems=new L.ResourceMap,this._register(b(D=>this.setLevel(D)))}getLoggers(){return[...this.loggerItems.values()].map(({logger:o})=>o)}getLogger(o){return this.loggerItems.get(o)?.logger}createLogger(o,b,D){let A=this.loggerItems.get(o)?.logger;return A||(D=b?.always?y.Trace:D,A=this.doCreateLogger(o,D??this.logLevel,b),this.loggerItems.set(o,{logger:A,logLevel:D})),A}setLevel(o,b){const D=P.URI.isUri(o)?o:void 0,A=D?b:o;if(D){const N=this.loggerItems.get(D);N&&N.logLevel!==A&&(N.logLevel=A,N.logger.setLevel(A))}else this.logLevel=A,this.loggerItems.forEach(({logLevel:N,logger:G})=>{N===void 0&&G.setLevel(this.logLevel)})}getLogLevel(o){return this.loggerItems.get(o)?.logLevel}dispose(){this.loggerItems.forEach(({logger:o})=>o.dispose()),this.loggerItems.clear(),super.dispose()}}e.AbstractLoggerService=h;class l{constructor(){this.onDidChangeLogLevel=new t.Emitter().event}setLevel(o){}getLevel(){return y.Info}trace(o,...b){}debug(o,...b){}info(o,...b){}warn(o,...b){}error(o,...b){}critical(o,...b){}dispose(){}flush(){}}e.NullLogger=l;class i extends l{}e.NullLogService=i;class s extends h{constructor(){super(y.Info,t.Event.None)}doCreateLogger(o,b,D){return new l}}e.NullLoggerService=s;function n(c){if(c.verbose)return y.Trace;if(typeof c.logLevel=="string"){const o=r(c.logLevel.toLowerCase());if(o!==void 0)return o}return e.DEFAULT_LOG_LEVEL}e.getLogLevel=n;function a(c){switch(c){case y.Trace:return"trace";case y.Debug:return"debug";case y.Info:return"info";case y.Warning:return"warn";case y.Error:return"error";case y.Off:return"off"}}e.LogLevelToString=a;function r(c){switch(c){case"trace":return y.Trace;case"debug":return y.Debug;case"info":return y.Info;case"warn":return y.Warning;case"error":return y.Error;case"critical":return y.Error;case"off":return y.Off}}e.parseLogLevel=r});var ie=this&&this.__param||function(j,e){return function(C,t){e(C,t,j)}};define(ee[202],te([0,1,71,3,2,6,4,8]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCredentialsMainService=void 0;let p=class Et extends k.Disposable{constructor(y){super(),this.logService=y,this._onDidChangePassword=this._register(new t.Emitter),this.onDidChangePassword=this._onDidChangePassword.event}async getPassword(y,I){this.logService.trace("Getting password from keytar:",y,I);let E;try{E=await this.withKeytar()}catch{return null}const d=await(0,P.retry)(()=>E.getPassword(y,I),50,3);if(!d)return this.logService.trace("Did not get a password from keytar for account:",I),d;let w,f;try{const v=JSON.parse(d);w=v.content,f=v.hasNextChunk}catch{}if(!w||!f)return this.logService.trace("Got password from keytar for account:",I),d;try{let v=1;for(;f;){const u=await(0,P.retry)(()=>E.getPassword(y,`${I}-${v}`),50,3),S=JSON.parse(u);w+=S.content,f=S.hasNextChunk,v++}return this.logService.trace(`Got ${v}-chunked password from keytar for account:`,I),w}catch(v){return this.logService.error(v),d}}async setPassword(y,I,E){this.logService.trace("Setting password using keytar:",y,I);let d;try{d=await this.withKeytar()}catch(w){throw this.surfaceKeytarLoadError?.(w),w}if(R.isWindows&&E.length>Et.MAX_PASSWORD_LENGTH){let w=0,f=0,v=!0;for(;v;){const u=E.substring(w,w+Et.PASSWORD_CHUNK_SIZE);w+=Et.PASSWORD_CHUNK_SIZE,v=E.length-w>0;const S={content:u,hasNextChunk:v};await(0,P.retry)(()=>d.setPassword(y,f?`${I}-${f}`:I,JSON.stringify(S)),50,3),f++}this.logService.trace(`Got${f?` ${f}-chunked`:""} password from keytar for account:`,I)}else await(0,P.retry)(()=>d.setPassword(y,I,E),50,3),this.logService.trace("Got password from keytar for account:",I);this._onDidChangePassword.fire({service:y,account:I})}async deletePassword(y,I){this.logService.trace("Deleting password using keytar:",y,I);let E;try{E=await this.withKeytar()}catch(u){throw this.surfaceKeytarLoadError?.(u),u}const d=await E.getPassword(y,I);if(!d)return this.logService.trace("Did not get a password to delete from keytar for account:",I),!1;let w,f;try{const u=JSON.parse(d);w=u.content,f=u.hasNextChunk}catch{}let v=0;if(w&&f)try{for(v++;f;){const u=`${I}-${v}`,S=await E.getPassword(y,u);await E.deletePassword(y,u),f=JSON.parse(S).hasNextChunk,v++}}catch(u){this.logService.error(u)}return await E.deletePassword(y,I)?(this._onDidChangePassword.fire({service:y,account:I}),this.logService.trace(`Deleted${v?` ${v}-chunked`:""} password from keytar for account:`,I),!0):(this.logService.trace(`Keytar failed to delete${v?` ${v}-chunked`:""} password for account:`,I),!1)}async findPassword(y){let I;try{I=await this.withKeytar()}catch{return null}return await I.findPassword(y)}async findCredentials(y){let I;try{I=await this.withKeytar()}catch{return[]}return await I.findCredentials(y)}clear(){return this._keytarCache instanceof C.InMemoryCredentialsProvider?this._keytarCache.clear():Promise.resolve()}};p.MAX_PASSWORD_LENGTH=2500,p.PASSWORD_CHUNK_SIZE=p.MAX_PASSWORD_LENGTH-100,p=we([ie(0,L.ILogService)],p),e.BaseCredentialsMainService=p}),define(ee[203],te([0,1,6]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncryptionMainService=void 0;let t=class{constructor(L,R){this.machineId=L,this.logService=R}encryption(){return new Promise((L,R)=>j(["vscode-encrypt"],L,R))}async encrypt(L){let R;try{R=await this.encryption()}catch{return L}try{return R.encrypt(this.machineId,L)}catch(P){return this.logService.error(P),L}}async decrypt(L){let R;try{R=await this.encryption()}catch{return L}try{return R.decrypt(this.machineId,L)}catch(P){return this.logService.error(P),L}}};t=we([ie(1,C.ILogService)],t),e.EncryptionMainService=t}),define(ee[204],te([0,1,24,8,15,3,2,9,72,6]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractDiskFileSystemProvider=void 0;class y extends R.Disposable{constructor(E,d){super(),this.logService=E,this.options=d,this._onDidChangeFile=this._register(new L.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this._onDidWatchError=this._register(new L.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.universalPathsToWatch=[],this.universalWatchRequestDelayer=this._register(new t.ThrottledDelayer(0)),this.nonRecursivePathsToWatch=[],this.nonRecursiveWatchRequestDelayer=this._register(new t.ThrottledDelayer(0))}watch(E,d){return d.recursive||this.options?.watcher?.forceUniversal?this.watchUniversal(E,d):this.watchNonRecursive(E,d)}watchUniversal(E,d){const w={path:this.toFilePath(E),excludes:d.excludes,includes:d.includes,recursive:d.recursive},f=(0,C.insert)(this.universalPathsToWatch,w);return this.refreshUniversalWatchers(),(0,R.toDisposable)(()=>{f(),this.refreshUniversalWatchers()})}refreshUniversalWatchers(){this.universalWatchRequestDelayer.trigger(()=>this.doRefreshUniversalWatchers()).catch(E=>(0,k.onUnexpectedError)(E))}doRefreshUniversalWatchers(){this.universalWatcher||(this.universalWatcher=this._register(this.createUniversalWatcher(d=>this._onDidChangeFile.fire((0,p.toFileChanges)(d)),d=>this.onWatcherLogMessage(d),this.logService.getLevel()===m.LogLevel.Trace)),this._register(this.logService.onDidChangeLogLevel(()=>{this.universalWatcher?.setVerboseLogging(this.logService.getLevel()===m.LogLevel.Trace)})));const E=this.options?.watcher?.recursive?.usePolling;if(E===!0)for(const d of this.universalPathsToWatch)(0,p.isRecursiveWatchRequest)(d)&&(d.pollingInterval=this.options?.watcher?.recursive?.pollingInterval??5e3);else if(Array.isArray(E))for(const d of this.universalPathsToWatch)(0,p.isRecursiveWatchRequest)(d)&&E.includes(d.path)&&(d.pollingInterval=this.options?.watcher?.recursive?.pollingInterval??5e3);return this.universalWatcher.watch(this.universalPathsToWatch)}watchNonRecursive(E,d){const w={path:this.toFilePath(E),excludes:d.excludes,includes:d.includes,recursive:!1},f=(0,C.insert)(this.nonRecursivePathsToWatch,w);return this.refreshNonRecursiveWatchers(),(0,R.toDisposable)(()=>{f(),this.refreshNonRecursiveWatchers()})}refreshNonRecursiveWatchers(){this.nonRecursiveWatchRequestDelayer.trigger(()=>this.doRefreshNonRecursiveWatchers()).catch(E=>(0,k.onUnexpectedError)(E))}doRefreshNonRecursiveWatchers(){return this.nonRecursiveWatcher||(this.nonRecursiveWatcher=this._register(this.createNonRecursiveWatcher(E=>this._onDidChangeFile.fire((0,p.toFileChanges)(E)),E=>this.onWatcherLogMessage(E),this.logService.getLevel()===m.LogLevel.Trace)),this._register(this.logService.onDidChangeLogLevel(()=>{this.nonRecursiveWatcher?.setVerboseLogging(this.logService.getLevel()===m.LogLevel.Trace)}))),this.nonRecursiveWatcher.watch(this.nonRecursivePathsToWatch)}onWatcherLogMessage(E){E.type==="error"&&this._onDidWatchError.fire(E.message),this.logService[E.type](E.message)}toFilePath(E){return(0,P.normalize)(E.fsPath)}}e.AbstractDiskFileSystemProvider=y}),define(ee[205],te([0,1,24,8,17,22,3,68,67,2,60,14,73,20,59,159,16,109,6]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileService=void 0;let g=class extends m.Disposable{constructor(l){super(),this.logService=l,this.BUFFER_SIZE=256*1024,this._onDidChangeFileSystemProviderRegistrations=this._register(new R.Emitter),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new R.Emitter),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this._onDidChangeFileSystemProviderCapabilities=this._register(new R.Emitter),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new R.Emitter),this.onDidRunOperation=this._onDidRunOperation.event,this._onDidFilesChange=this._register(new R.Emitter),this.onDidFilesChange=this._onDidFilesChange.event,this._onDidWatchError=this._register(new R.Emitter),this.onDidWatchError=this._onDidWatchError.event,this.activeWatchers=new Map,this.writeQueue=this._register(new t.ResourceQueue)}registerProvider(l,i){if(this.provider.has(l))throw new Error(`A filesystem provider for the scheme '${l}' is already registered.`);(0,E.mark)(`code/registerFilesystem/${l}`);const s=new m.DisposableStore;return this.provider.set(l,i),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:l,provider:i}),s.add(i.onDidChangeFile(n=>this._onDidFilesChange.fire(new v.FileChangesEvent(n,!this.isPathCaseSensitive(i))))),typeof i.onDidWatchError=="function"&&s.add(i.onDidWatchError(n=>this._onDidWatchError.fire(new Error(n)))),s.add(i.onDidChangeCapabilities(()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:i,scheme:l}))),(0,m.toDisposable)(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:l,provider:i}),this.provider.delete(l),(0,m.dispose)(s)})}getProvider(l){return this.provider.get(l)}async activateProvider(l){const i=[];this._onWillActivateFileSystemProvider.fire({scheme:l,join(s){i.push(s)}}),!this.provider.has(l)&&await t.Promises.settled(i)}async canHandleResource(l){return await this.activateProvider(l.scheme),this.hasProvider(l)}hasProvider(l){return this.provider.has(l.scheme)}hasCapability(l,i){const s=this.provider.get(l.scheme);return!!(s&&s.capabilities&i)}listCapabilities(){return p.Iterable.map(this.provider,([l,i])=>({scheme:l,capabilities:i.capabilities}))}async withProvider(l){if(!(0,d.isAbsolutePath)(l))throw new v.FileOperationError((0,f.localize)(0,null,this.resourceForError(l)),8);await this.activateProvider(l.scheme);const i=this.provider.get(l.scheme);if(!i){const s=new Error;throw s.name="ENOPRO",s.message=(0,f.localize)(1,null,l.toString()),s}return i}async withReadProvider(l){const i=await this.withProvider(l);if((0,v.hasOpenReadWriteCloseCapability)(i)||(0,v.hasReadWriteCapability)(i)||(0,v.hasFileReadStreamCapability)(i))return i;throw new Error(`Filesystem provider for scheme '${l.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async withWriteProvider(l){const i=await this.withProvider(l);if((0,v.hasOpenReadWriteCloseCapability)(i)||(0,v.hasReadWriteCapability)(i))return i;throw new Error(`Filesystem provider for scheme '${l.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(l,i){try{return await this.doResolveFile(l,i)}catch(s){throw(0,v.toFileSystemProviderErrorCode)(s)===v.FileSystemProviderErrorCode.FileNotFound?new v.FileOperationError((0,f.localize)(2,null,this.resourceForError(l)),1):(0,v.ensureFileSystemProviderError)(s)}}async doResolveFile(l,i){const s=await this.withProvider(l),n=this.isPathCaseSensitive(s),a=i?.resolveTo,r=i?.resolveSingleChildDescendants,c=i?.resolveMetadata,o=await s.stat(l);let b;return this.toFileStat(s,l,o,void 0,!!c,(D,A)=>(b||(b=y.TernarySearchTree.forUris(()=>!n),b.set(l,!0),a&&b.fill(!0,a)),b.get(D.resource)||b.findSuperstr(D.resource.with({query:null,fragment:null}))?!0:D.isDirectory&&r?A===1:!1))}async toFileStat(l,i,s,n,a,r){const{providerExtUri:c}=this.getExtUri(l),o={resource:i,name:c.basename(i),isFile:(s.type&v.FileType.File)!==0,isDirectory:(s.type&v.FileType.Directory)!==0,isSymbolicLink:(s.type&v.FileType.SymbolicLink)!==0,mtime:s.mtime,ctime:s.ctime,size:s.size,readonly:Boolean((s.permissions??0)&v.FilePermission.Readonly)||Boolean(l.capabilities&2048),etag:(0,v.etag)({mtime:s.mtime,size:s.size}),children:void 0};if(o.isDirectory&&r(o,n)){try{const b=await l.readdir(i),D=await t.Promises.settled(b.map(async([A,N])=>{try{const G=c.joinPath(i,A),ae=a?await l.stat(G):{type:N};return await this.toFileStat(l,G,ae,b.length,a,r)}catch(G){return this.logService.trace(G),null}}));o.children=(0,C.coalesce)(D)}catch(b){this.logService.trace(b),o.children=[]}return o}return o}async resolveAll(l){return t.Promises.settled(l.map(async i=>{try{return{stat:await this.doResolveFile(i.resource,i.options),success:!0}}catch(s){return this.logService.trace(s),{stat:void 0,success:!1}}}))}async stat(l){const i=await this.withProvider(l),s=await i.stat(l);return this.toFileStat(i,l,s,void 0,!0,()=>!1)}async exists(l){const i=await this.withProvider(l);try{return!!await i.stat(l)}catch{return!1}}async canCreateFile(l,i){try{await this.doValidateCreateFile(l,i)}catch(s){return s}return!0}async doValidateCreateFile(l,i){if(!i?.overwrite&&await this.exists(l))throw new v.FileOperationError((0,f.localize)(3,null,this.resourceForError(l)),3,i)}async createFile(l,i=k.VSBuffer.fromString(""),s){await this.doValidateCreateFile(l,s);const n=await this.writeFile(l,i);return this._onDidRunOperation.fire(new v.FileOperationEvent(l,0,n)),n}async writeFile(l,i,s){const n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(l),l),{providerExtUri:a}=this.getExtUri(n);try{await this.validateWriteFile(n,l,s)||await this.mkdirp(n,a.dirname(l));let c;if((0,v.hasReadWriteCapability)(n)&&!(i instanceof k.VSBuffer))if((0,w.isReadableStream)(i)){const o=await(0,w.peekStream)(i,3);o.ended?c=k.VSBuffer.concat(o.buffer):c=o}else c=(0,w.peekReadable)(i,o=>k.VSBuffer.concat(o),3);else c=i;!(0,v.hasOpenReadWriteCloseCapability)(n)||(0,v.hasReadWriteCapability)(n)&&c instanceof k.VSBuffer?await this.doWriteUnbuffered(n,l,s,c):await this.doWriteBuffered(n,l,s,c instanceof k.VSBuffer?(0,k.bufferToReadable)(c):c),this._onDidRunOperation.fire(new v.FileOperationEvent(l,4))}catch(r){throw new v.FileOperationError((0,f.localize)(4,null,this.resourceForError(l),(0,v.ensureFileSystemProviderError)(r).toString()),(0,v.toFileOperationResult)(r),s)}return this.resolve(l,{resolveMetadata:!0})}async validateWriteFile(l,i,s){if(!!s?.unlock&&!(l.capabilities&8192))throw new Error((0,f.localize)(5,null,this.resourceForError(i)));let a;try{a=await l.stat(i)}catch{return}if((a.type&v.FileType.Directory)!==0)throw new v.FileOperationError((0,f.localize)(6,null,this.resourceForError(i)),0,s);if(this.throwIfFileIsReadonly(i,a),typeof s?.mtime=="number"&&typeof s.etag=="string"&&s.etag!==v.ETAG_DISABLED&&typeof a.mtime=="number"&&typeof a.size=="number"&&s.mtime<a.mtime&&s.etag!==(0,v.etag)({mtime:s.mtime,size:a.size}))throw new v.FileOperationError((0,f.localize)(7,null),3,s);return a}async readFile(l,i,s){const n=await this.withReadProvider(l);return i?.atomic?this.doReadFileAtomic(n,l,i,s):this.doReadFile(n,l,i,s)}async doReadFileAtomic(l,i,s,n){return new Promise((a,r)=>{this.writeQueue.queueFor(i,this.getExtUri(l).providerExtUri).queue(async()=>{try{const c=await this.doReadFile(l,i,s,n);a(c)}catch(c){r(c)}})})}async doReadFile(l,i,s,n){const a=await this.doReadFileStream(l,i,{...s,preferUnbuffered:!0},n);return{...a,value:await(0,k.streamToBuffer)(a.value)}}async readFileStream(l,i,s){const n=await this.withReadProvider(l);return this.doReadFileStream(n,l,i,s)}async doReadFileStream(l,i,s,n){const a=new L.CancellationTokenSource(n),r=this.validateReadFile(i,s).then(o=>o,o=>{throw a.cancel(),o});let c;try{return typeof s?.etag=="string"&&s.etag!==v.ETAG_DISABLED&&await r,s?.atomic&&(0,v.hasFileAtomicReadCapability)(l)||!((0,v.hasOpenReadWriteCloseCapability)(l)||(0,v.hasFileReadStreamCapability)(l))||(0,v.hasReadWriteCapability)(l)&&s?.preferUnbuffered?c=this.readFileUnbuffered(l,i,s):(0,v.hasFileReadStreamCapability)(l)?c=this.readFileStreamed(l,i,a.token,s):c=this.readFileBuffered(l,i,a.token,s),{...await r,value:c}}catch(o){c&&await(0,w.consumeStream)(c);const b=(0,f.localize)(8,null,this.resourceForError(i),(0,v.ensureFileSystemProviderError)(o).toString());throw o instanceof v.NotModifiedSinceFileOperationError?new v.NotModifiedSinceFileOperationError(b,o.stat,s):new v.FileOperationError(b,(0,v.toFileOperationResult)(o),s)}}readFileStreamed(l,i,s,n=Object.create(null)){const a=l.readFileStream(i,n,s);return(0,w.transform)(a,{data:r=>r instanceof k.VSBuffer?r:k.VSBuffer.wrap(r),error:r=>new v.FileOperationError((0,f.localize)(9,null,this.resourceForError(i),(0,v.ensureFileSystemProviderError)(r).toString()),(0,v.toFileOperationResult)(r),n)},r=>k.VSBuffer.concat(r))}readFileBuffered(l,i,s,n=Object.create(null)){const a=(0,k.newWriteableBufferStream)();return(0,u.readFileIntoStream)(l,i,a,r=>r,{...n,bufferSize:this.BUFFER_SIZE,errorTransformer:r=>new v.FileOperationError((0,f.localize)(10,null,this.resourceForError(i),(0,v.ensureFileSystemProviderError)(r).toString()),(0,v.toFileOperationResult)(r),n)},s),a}readFileUnbuffered(l,i,s){const n=(0,w.newWriteableStream)(a=>k.VSBuffer.concat(a));return(async()=>{try{let a;s?.atomic&&(0,v.hasFileAtomicReadCapability)(l)?a=await l.readFile(i,{atomic:!0}):a=await l.readFile(i),typeof s?.position=="number"&&(a=a.slice(s.position)),typeof s?.length=="number"&&(a=a.slice(0,s.length)),this.validateReadFileLimits(i,a.byteLength,s),n.end(k.VSBuffer.wrap(a))}catch(a){n.error(a),n.end()}})(),n}async validateReadFile(l,i){const s=await this.resolve(l,{resolveMetadata:!0});if(s.isDirectory)throw new v.FileOperationError((0,f.localize)(11,null,this.resourceForError(l)),0,i);if(typeof i?.etag=="string"&&i.etag!==v.ETAG_DISABLED&&i.etag===s.etag)throw new v.NotModifiedSinceFileOperationError((0,f.localize)(12,null),s,i);return this.validateReadFileLimits(l,s.size,i),s}validateReadFileLimits(l,i,s){if(s?.limits){let n;if(typeof s.limits.memory=="number"&&i>s.limits.memory&&(n=9),typeof s.limits.size=="number"&&i>s.limits.size&&(n=7),typeof n=="number")throw new v.FileOperationError((0,f.localize)(13,null,this.resourceForError(l)),n)}}async canMove(l,i,s){return this.doCanMoveCopy(l,i,"move",s)}async canCopy(l,i,s){return this.doCanMoveCopy(l,i,"copy",s)}async doCanMoveCopy(l,i,s,n){if(l.toString()!==i.toString())try{const a=s==="move"?this.throwIfFileSystemIsReadonly(await this.withWriteProvider(l),l):await this.withReadProvider(l),r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(i),i);await this.doValidateMoveCopy(a,l,r,i,s,n)}catch(a){return a}return!0}async move(l,i,s){const n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(l),l),a=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(i),i),r=await this.doMoveCopy(n,l,a,i,"move",!!s),c=await this.resolve(i,{resolveMetadata:!0});return this._onDidRunOperation.fire(new v.FileOperationEvent(l,r==="move"?2:3,c)),c}async copy(l,i,s){const n=await this.withReadProvider(l),a=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(i),i),r=await this.doMoveCopy(n,l,a,i,"copy",!!s),c=await this.resolve(i,{resolveMetadata:!0});return this._onDidRunOperation.fire(new v.FileOperationEvent(l,r==="copy"?3:2,c)),c}async doMoveCopy(l,i,s,n,a,r){if(i.toString()===n.toString())return a;const{exists:c,isSameResourceWithDifferentPathCase:o}=await this.doValidateMoveCopy(l,i,s,n,a,r);if(c&&!o&&r&&await this.del(n,{recursive:!0}),await this.mkdirp(s,this.getExtUri(s).providerExtUri.dirname(n)),a==="copy"){if(l===s&&(0,v.hasFileFolderCopyCapability)(l))await l.copy(i,n,{overwrite:r});else{const b=await this.resolve(i);b.isDirectory?await this.doCopyFolder(l,b,s,n):await this.doCopyFile(l,i,s,n)}return a}else return l===s?(await l.rename(i,n,{overwrite:r}),a):(await this.doMoveCopy(l,i,s,n,"copy",r),await this.del(i,{recursive:!0}),"copy")}async doCopyFile(l,i,s,n){if((0,v.hasOpenReadWriteCloseCapability)(l)&&(0,v.hasOpenReadWriteCloseCapability)(s))return this.doPipeBuffered(l,i,s,n);if((0,v.hasOpenReadWriteCloseCapability)(l)&&(0,v.hasReadWriteCapability)(s))return this.doPipeBufferedToUnbuffered(l,i,s,n);if((0,v.hasReadWriteCapability)(l)&&(0,v.hasOpenReadWriteCloseCapability)(s))return this.doPipeUnbufferedToBuffered(l,i,s,n);if((0,v.hasReadWriteCapability)(l)&&(0,v.hasReadWriteCapability)(s))return this.doPipeUnbuffered(l,i,s,n)}async doCopyFolder(l,i,s,n){await s.mkdir(n),Array.isArray(i.children)&&await t.Promises.settled(i.children.map(async a=>{const r=this.getExtUri(s).providerExtUri.joinPath(n,a.name);return a.isDirectory?this.doCopyFolder(l,await this.resolve(a.resource),s,r):this.doCopyFile(l,a.resource,s,r)}))}async doValidateMoveCopy(l,i,s,n,a,r){let c=!1;if(l===s){const{providerExtUri:b,isPathCaseSensitive:D}=this.getExtUri(l);if(D||(c=b.isEqual(i,n)),c&&a==="copy")throw new Error((0,f.localize)(14,null,this.resourceForError(i),this.resourceForError(n)));if(!c&&b.isEqualOrParent(n,i))throw new Error((0,f.localize)(15,null,this.resourceForError(i),this.resourceForError(n)))}const o=await this.exists(n);if(o&&!c){if(!r)throw new v.FileOperationError((0,f.localize)(16,null,this.resourceForError(i),this.resourceForError(n)),4);if(l===s){const{providerExtUri:b}=this.getExtUri(l);if(b.isEqualOrParent(i,n))throw new Error((0,f.localize)(17,null,this.resourceForError(i),this.resourceForError(n)))}}return{exists:o,isSameResourceWithDifferentPathCase:c}}getExtUri(l){const i=this.isPathCaseSensitive(l);return{providerExtUri:i?d.extUri:d.extUriIgnorePathCase,isPathCaseSensitive:i}}isPathCaseSensitive(l){return!!(l.capabilities&1024)}async createFolder(l){const i=this.throwIfFileSystemIsReadonly(await this.withProvider(l),l);await this.mkdirp(i,l);const s=await this.resolve(l,{resolveMetadata:!0});return this._onDidRunOperation.fire(new v.FileOperationEvent(l,0,s)),s}async mkdirp(l,i){const s=[],{providerExtUri:n}=this.getExtUri(l);for(;!n.isEqual(i,n.dirname(i));)try{if(((await l.stat(i)).type&v.FileType.Directory)===0)throw new Error((0,f.localize)(18,null,this.resourceForError(i)));break}catch(a){if((0,v.toFileSystemProviderErrorCode)(a)!==v.FileSystemProviderErrorCode.FileNotFound)throw a;s.push(n.basename(i)),i=n.dirname(i)}for(let a=s.length-1;a>=0;a--){i=n.joinPath(i,s[a]);try{await l.mkdir(i)}catch(r){if((0,v.toFileSystemProviderErrorCode)(r)!==v.FileSystemProviderErrorCode.FileExists)throw r}}}async canDelete(l,i){try{await this.doValidateDelete(l,i)}catch(s){return s}return!0}async doValidateDelete(l,i){const s=this.throwIfFileSystemIsReadonly(await this.withProvider(l),l);if(!!i?.useTrash&&!(s.capabilities&4096))throw new Error((0,f.localize)(19,null,this.resourceForError(l)));let a;try{a=await s.stat(l)}catch{}if(a)this.throwIfFileIsReadonly(l,a);else throw new v.FileOperationError((0,f.localize)(20,null,this.resourceForError(l)),1);if(!!!i?.recursive){const c=await this.resolve(l);if(c.isDirectory&&Array.isArray(c.children)&&c.children.length>0)throw new Error((0,f.localize)(21,null,this.resourceForError(l)))}return s}async del(l,i){const s=await this.doValidateDelete(l,i),n=!!i?.useTrash,a=!!i?.recursive;await s.delete(l,{recursive:a,useTrash:n}),this._onDidRunOperation.fire(new v.FileOperationEvent(l,1))}async cloneFile(l,i){const s=await this.withProvider(l),n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(i),i);if(s===n&&this.getExtUri(s).providerExtUri.isEqual(l,i))return;if(s===n&&(0,v.hasFileCloneCapability)(s))return s.cloneFile(l,i);await this.mkdirp(n,this.getExtUri(n).providerExtUri.dirname(i));const a=this.writeQueue.queueFor(l,this.getExtUri(s).providerExtUri);return s===n&&(0,v.hasFileFolderCopyCapability)(s)?a.queue(()=>s.copy(l,i,{overwrite:!0})):a.queue(()=>this.doCopyFile(s,l,n,i))}watch(l,i={recursive:!1,excludes:[]}){const s=new m.DisposableStore;let n=!1,a=()=>{n=!0};return s.add((0,m.toDisposable)(()=>a())),(async()=>{try{const r=await this.doWatch(l,i);n?(0,m.dispose)(r):a=()=>(0,m.dispose)(r)}catch(r){this.logService.error(r)}})(),s}async doWatch(l,i){const s=await this.withProvider(l),n=(0,P.hash)([this.getExtUri(s).providerExtUri.getComparisonKey(l),i]);let a=this.activeWatchers.get(n);return a||(a={count:0,disposable:s.watch(l,i)},this.activeWatchers.set(n,a)),a.count+=1,(0,m.toDisposable)(()=>{a&&(a.count--,a.count===0&&((0,m.dispose)(a.disposable),this.activeWatchers.delete(n)))})}dispose(){super.dispose();for(const[,l]of this.activeWatchers)(0,m.dispose)(l.disposable);this.activeWatchers.clear()}async doWriteBuffered(l,i,s,n){return this.writeQueue.queueFor(i,this.getExtUri(l).providerExtUri).queue(async()=>{const a=await l.open(i,{create:!0,unlock:s?.unlock??!1});try{(0,w.isReadableStream)(n)||(0,w.isReadableBufferedStream)(n)?await this.doWriteStreamBufferedQueued(l,a,n):await this.doWriteReadableBufferedQueued(l,a,n)}catch(r){throw(0,v.ensureFileSystemProviderError)(r)}finally{await l.close(a)}})}async doWriteStreamBufferedQueued(l,i,s){let n=0,a;if((0,w.isReadableBufferedStream)(s)){if(s.buffer.length>0){const r=k.VSBuffer.concat(s.buffer);await this.doWriteBuffer(l,i,r,r.byteLength,n,0),n+=r.byteLength}if(s.ended)return;a=s.stream}else a=s;return new Promise((r,c)=>{(0,w.listenStream)(a,{onData:async o=>{a.pause();try{await this.doWriteBuffer(l,i,o,o.byteLength,n,0)}catch(b){return c(b)}n+=o.byteLength,setTimeout(()=>a.resume())},onError:o=>c(o),onEnd:()=>r()})})}async doWriteReadableBufferedQueued(l,i,s){let n=0,a;for(;(a=s.read())!==null;)await this.doWriteBuffer(l,i,a,a.byteLength,n,0),n+=a.byteLength}async doWriteBuffer(l,i,s,n,a,r){let c=0;for(;c<n;)c+=await l.write(i,a+c,s.buffer,r+c,n-c)}async doWriteUnbuffered(l,i,s,n){return this.writeQueue.queueFor(i,this.getExtUri(l).providerExtUri).queue(()=>this.doWriteUnbufferedQueued(l,i,s,n))}async doWriteUnbufferedQueued(l,i,s,n){let a;n instanceof k.VSBuffer?a=n:(0,w.isReadableStream)(n)?a=await(0,k.streamToBuffer)(n):(0,w.isReadableBufferedStream)(n)?a=await(0,k.bufferedStreamToBuffer)(n):a=(0,k.readableToBuffer)(n),await l.writeFile(i,a.buffer,{create:!0,overwrite:!0,unlock:s?.unlock??!1})}async doPipeBuffered(l,i,s,n){return this.writeQueue.queueFor(n,this.getExtUri(s).providerExtUri).queue(()=>this.doPipeBufferedQueued(l,i,s,n))}async doPipeBufferedQueued(l,i,s,n){let a,r;try{a=await l.open(i,{create:!1}),r=await s.open(n,{create:!0,unlock:!1});const c=k.VSBuffer.alloc(this.BUFFER_SIZE);let o=0,b=0,D=0;do D=await l.read(a,o,c.buffer,b,c.byteLength-b),await this.doWriteBuffer(s,r,c,D,o,b),o+=D,b+=D,b===c.byteLength&&(b=0);while(D>0)}catch(c){throw(0,v.ensureFileSystemProviderError)(c)}finally{await t.Promises.settled([typeof a=="number"?l.close(a):Promise.resolve(),typeof r=="number"?s.close(r):Promise.resolve()])}}async doPipeUnbuffered(l,i,s,n){return this.writeQueue.queueFor(n,this.getExtUri(s).providerExtUri).queue(()=>this.doPipeUnbufferedQueued(l,i,s,n))}async doPipeUnbufferedQueued(l,i,s,n){return s.writeFile(n,await l.readFile(i),{create:!0,overwrite:!0,unlock:!1})}async doPipeUnbufferedToBuffered(l,i,s,n){return this.writeQueue.queueFor(n,this.getExtUri(s).providerExtUri).queue(()=>this.doPipeUnbufferedToBufferedQueued(l,i,s,n))}async doPipeUnbufferedToBufferedQueued(l,i,s,n){const a=await s.open(n,{create:!0,unlock:!1});try{const r=await l.readFile(i);await this.doWriteBuffer(s,a,k.VSBuffer.wrap(r),r.byteLength,0,0)}catch(r){throw(0,v.ensureFileSystemProviderError)(r)}finally{await s.close(a)}}async doPipeBufferedToUnbuffered(l,i,s,n){const a=await(0,k.streamToBuffer)(this.readFileBuffered(l,i,L.CancellationToken.None));await this.doWriteUnbuffered(s,n,void 0,a)}throwIfFileSystemIsReadonly(l,i){if(l.capabilities&2048)throw new v.FileOperationError((0,f.localize)(22,null,this.resourceForError(i)),6);return l}throwIfFileIsReadonly(l,i){if((i.permissions??0)&v.FilePermission.Readonly)throw new v.FileOperationError((0,f.localize)(23,null,this.resourceForError(l)),6)}resourceForError(l){return l.scheme===I.Schemas.file?l.fsPath:l.toString(!0)}};g=we([ie(0,S.ILogService)],g),e.FileService=g}),define(ee[86],te([0,1,40,281,8,39,17,3,30,2,9,4,20,59,23,163,16,109,204,45,200,199]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiskFileSystemProvider=void 0,(()=>{try{(0,t.gracefulify)(C)}catch(s){console.error(`Error enabling graceful-fs: ${(0,g.toErrorMessage)(s)}`)}})();class i extends S.AbstractDiskFileSystemProvider{constructor(n,a){super(n,a),this.onDidChangeCapabilities=P.Event.None,this.resourceLocks=new L.ResourceMap(r=>E.extUriBiasedIgnorePathCase.getComparisonKey(r)),this.mapHandleToPos=new Map,this.mapHandleToLock=new Map,this.writeHandles=new Map}get capabilities(){return this._capabilities||(this._capabilities=57374,I.isLinux&&(this._capabilities|=1024)),this._capabilities}async stat(n){try{const{stat:a,symbolicLink:r}=await w.SymlinkSupport.stat(this.toFilePath(n));return{type:this.toType(a,r),ctime:a.birthtime.getTime(),mtime:a.mtime.getTime(),size:a.size}}catch(a){throw this.toFileSystemProviderError(a)}}async readdir(n){try{const a=await w.Promises.readdir(this.toFilePath(n),{withFileTypes:!0}),r=[];return await Promise.all(a.map(async c=>{try{let o;c.isSymbolicLink()?o=(await this.stat((0,E.joinPath)(n,c.name))).type:o=this.toType(c),r.push([c.name,o])}catch(o){this.logService.trace(o)}})),r}catch(a){throw this.toFileSystemProviderError(a)}}toType(n,a){let r;return a?.dangling?r=v.FileType.Unknown:n.isFile()?r=v.FileType.File:n.isDirectory()?r=v.FileType.Directory:r=v.FileType.Unknown,a&&(r|=v.FileType.SymbolicLink),r}async createResourceLock(n){const a=this.toFilePath(n);this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${a})`);let r;for(;r=this.resourceLocks.get(n);)this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${a})`),await r.wait();const c=new k.Barrier;return this.resourceLocks.set(n,c),this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${a})`),(0,m.toDisposable)(()=>{this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${a})`),this.resourceLocks.get(n)===c&&(this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${a})`),this.resourceLocks.delete(n)),this.traceLock(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${a})`),c.open()})}async readFile(n,a){let r;try{a?.atomic&&(this.traceLock(`[Disk FileSystemProvider]: atomic read operation started (${this.toFilePath(n)})`),r=await this.createResourceLock(n));const c=this.toFilePath(n);return await w.Promises.readFile(c)}catch(c){throw this.toFileSystemProviderError(c)}finally{r?.dispose()}}traceLock(n){i.TRACE_LOG_RESOURCE_LOCKS&&this.logService.trace(n)}readFileStream(n,a,r){const c=(0,d.newWriteableStream)(o=>R.VSBuffer.concat(o.map(b=>R.VSBuffer.wrap(b))).buffer);return(0,u.readFileIntoStream)(this,n,c,o=>o.buffer,{...a,bufferSize:256*1024},r),c}async writeFile(n,a,r){let c;try{const o=this.toFilePath(n);if(!r.create||!r.overwrite){if(await w.Promises.exists(o)){if(!r.overwrite)throw(0,v.createFileSystemProviderError)((0,f.localize)(0,null),v.FileSystemProviderErrorCode.FileExists)}else if(!r.create)throw(0,v.createFileSystemProviderError)((0,f.localize)(1,null),v.FileSystemProviderErrorCode.FileNotFound)}c=await this.open(n,{create:!0,unlock:r.unlock}),await this.write(c,0,a,0,a.byteLength)}catch(o){throw await this.toFileSystemProviderWriteError(n,o)}finally{typeof c=="number"&&await this.close(c)}}static configureFlushOnWrite(n){i.canFlush=n}async open(n,a){const r=this.toFilePath(n);let c;(0,v.isFileOpenForWriteOptions)(a)&&(c=await this.createResourceLock(n));let o;try{if((0,v.isFileOpenForWriteOptions)(a)&&a.unlock)try{const{stat:D}=await w.SymlinkSupport.stat(r);D.mode&128||await w.Promises.chmod(r,D.mode|128)}catch(D){this.logService.trace(D)}let b;if((0,v.isFileOpenForWriteOptions)(a)){if(I.isWindows)try{await w.Promises.truncate(r,0),b="r+"}catch(D){D.code!=="ENOENT"&&this.logService.trace(D)}b||(b="w")}else b="r";o=await w.Promises.open(r,b)}catch(b){throw c?.dispose(),(0,v.isFileOpenForWriteOptions)(a)?await this.toFileSystemProviderWriteError(n,b):this.toFileSystemProviderError(b)}if(this.mapHandleToPos.set(o,0),(0,v.isFileOpenForWriteOptions)(a)&&this.writeHandles.set(o,n),c){const b=this.mapHandleToLock.get(o);this.traceLock(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${r})`),this.mapHandleToLock.set(o,c),b&&(this.traceLock(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${r})`),b.dispose())}return o}async close(n){const a=this.mapHandleToLock.get(n);try{if(this.mapHandleToPos.delete(n),this.writeHandles.delete(n)&&i.canFlush)try{await w.Promises.fdatasync(n)}catch(r){i.configureFlushOnWrite(!1),this.logService.error(r)}return await w.Promises.close(n)}catch(r){throw this.toFileSystemProviderError(r)}finally{a&&(this.mapHandleToLock.get(n)===a&&(this.traceLock(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${n}`),this.mapHandleToLock.delete(n)),this.traceLock(`[Disk FileSystemProvider]: close() - disposing lock for handle ${n}`),a.dispose())}}async read(n,a,r,c,o){const b=this.normalizePos(n,a);let D=null;try{D=(await w.Promises.read(n,r,c,o,b)).bytesRead}catch(A){throw this.toFileSystemProviderError(A)}finally{this.updatePos(n,b,D)}return D}normalizePos(n,a){return a===this.mapHandleToPos.get(n)?null:a}updatePos(n,a,r){const c=this.mapHandleToPos.get(n);typeof c=="number"&&(typeof a=="number"||(typeof r=="number"?this.mapHandleToPos.set(n,c+r):this.mapHandleToPos.delete(n)))}async write(n,a,r,c,o){return(0,k.retry)(()=>this.doWrite(n,a,r,c,o),100,3)}async doWrite(n,a,r,c,o){const b=this.normalizePos(n,a);let D=null;try{D=(await w.Promises.write(n,r,c,o,b)).bytesWritten}catch(A){throw await this.toFileSystemProviderWriteError(this.writeHandles.get(n),A)}finally{this.updatePos(n,b,D)}return D}async mkdir(n){try{await w.Promises.mkdir(this.toFilePath(n))}catch(a){throw this.toFileSystemProviderError(a)}}async delete(n,a){try{const r=this.toFilePath(n);a.recursive?await w.Promises.rm(r,w.RimRafMode.MOVE):await w.Promises.unlink(r)}catch(r){throw this.toFileSystemProviderError(r)}}async rename(n,a,r){const c=this.toFilePath(n),o=this.toFilePath(a);if(c!==o)try{await this.validateTargetDeleted(n,a,"move",r.overwrite),await w.Promises.move(c,o)}catch(b){throw(b.code==="EINVAL"||b.code==="EBUSY"||b.code==="ENAMETOOLONG")&&(b=new Error((0,f.localize)(2,null,(0,y.basename)(c),(0,y.basename)((0,y.dirname)(o)),b.toString()))),this.toFileSystemProviderError(b)}}async copy(n,a,r){const c=this.toFilePath(n),o=this.toFilePath(a);if(c!==o)try{await this.validateTargetDeleted(n,a,"copy",r.overwrite),await w.Promises.copy(c,o,{preserveSymlinks:!0})}catch(b){throw(b.code==="EINVAL"||b.code==="EBUSY"||b.code==="ENAMETOOLONG")&&(b=new Error((0,f.localize)(3,null,(0,y.basename)(c),(0,y.basename)((0,y.dirname)(o)),b.toString()))),this.toFileSystemProviderError(b)}}async validateTargetDeleted(n,a,r,c){const o=this.toFilePath(n),b=this.toFilePath(a);let D=!1;if(!!(this.capabilities&1024)||(D=(0,p.isEqual)(o,b,!0)),D&&r==="copy")throw(0,v.createFileSystemProviderError)((0,f.localize)(4,null),v.FileSystemProviderErrorCode.FileExists);if(!D&&await w.Promises.exists(b)){if(!c)throw(0,v.createFileSystemProviderError)((0,f.localize)(5,null),v.FileSystemProviderErrorCode.FileExists);await this.delete(a,{recursive:!0,useTrash:!1})}}async cloneFile(n,a){return this.doCloneFile(n,a,!1)}async doCloneFile(n,a,r){const c=this.toFilePath(n),o=this.toFilePath(a),b=!!(this.capabilities&1024);if((0,p.isEqual)(c,o,!b))return;const D=new m.DisposableStore;try{const[A,N]=await Promise.all([this.createResourceLock(n),this.createResourceLock(a)]);D.add(A),D.add(N),r&&await w.Promises.mkdir((0,y.dirname)(o),{recursive:!0}),await w.Promises.copyFile(c,o)}catch(A){if(A.code==="ENOENT"&&!r)return this.doCloneFile(n,a,!0);throw this.toFileSystemProviderError(A)}finally{D.dispose()}}createUniversalWatcher(n,a,r){return new h.UniversalWatcherClient(c=>n(c),c=>a(c),r)}createNonRecursiveWatcher(n,a,r){return new l.NodeJSWatcherClient(c=>n(c),c=>a(c),r)}toFileSystemProviderError(n){if(n instanceof v.FileSystemProviderError)return n;let a;switch(n.code){case"ENOENT":a=v.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":a=v.FileSystemProviderErrorCode.FileIsADirectory;break;case"ENOTDIR":a=v.FileSystemProviderErrorCode.FileNotADirectory;break;case"EEXIST":a=v.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":a=v.FileSystemProviderErrorCode.NoPermissions;break;default:a=v.FileSystemProviderErrorCode.Unknown}return(0,v.createFileSystemProviderError)(n,a)}async toFileSystemProviderWriteError(n,a){let r=this.toFileSystemProviderError(a);if(n&&r.code===v.FileSystemProviderErrorCode.NoPermissions)try{const{stat:c}=await w.SymlinkSupport.stat(this.toFilePath(n));c.mode&128||(r=(0,v.createFileSystemProviderError)(a,v.FileSystemProviderErrorCode.FileWriteLocked))}catch(c){this.logService.trace(c)}return r}}e.DiskFileSystemProvider=i,i.TRACE_LOG_RESOURCE_LOCKS=!1,i.canFlush=!0}),define(ee[206],te([0,1,3,86,2,17,59,22]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractSessionFileWatcher=e.AbstractDiskFileSystemProviderChannel=void 0;class p extends k.Disposable{constructor(I,E){super(),this.provider=I,this.logService=E,this.sessionToWatcher=new Map,this.watchRequests=new Map}call(I,E,d){const w=this.getUriTransformer(I);switch(E){case"stat":return this.stat(w,d[0]);case"readdir":return this.readdir(w,d[0]);case"open":return this.open(w,d[0],d[1]);case"close":return this.close(d[0]);case"read":return this.read(d[0],d[1],d[2]);case"readFile":return this.readFile(w,d[0],d[1]);case"write":return this.write(d[0],d[1],d[2],d[3],d[4]);case"writeFile":return this.writeFile(w,d[0],d[1],d[2]);case"rename":return this.rename(w,d[0],d[1],d[2]);case"copy":return this.copy(w,d[0],d[1],d[2]);case"cloneFile":return this.cloneFile(w,d[0],d[1]);case"mkdir":return this.mkdir(w,d[0]);case"delete":return this.delete(w,d[0],d[1]);case"watch":return this.watch(w,d[0],d[1],d[2],d[3]);case"unwatch":return this.unwatch(d[0],d[1])}throw new Error(`IPC Command ${E} not found`)}listen(I,E,d){const w=this.getUriTransformer(I);switch(E){case"fileChange":return this.onFileChange(w,d[0]);case"readFileStream":return this.onReadFileStream(w,d[0],d[1])}throw new Error(`Unknown event ${E}`)}stat(I,E){const d=this.transformIncoming(I,E,!0);return this.provider.stat(d)}readdir(I,E){const d=this.transformIncoming(I,E);return this.provider.readdir(d)}async readFile(I,E,d){const w=this.transformIncoming(I,E,!0),f=await this.provider.readFile(w,d);return L.VSBuffer.wrap(f)}onReadFileStream(I,E,d){const w=this.transformIncoming(I,E,!0),f=new P.CancellationTokenSource,v=new C.Emitter({onDidRemoveLastListener:()=>{f.cancel()}}),u=this.provider.readFileStream(w,d,f.token);return(0,R.listenStream)(u,{onData:S=>v.fire(L.VSBuffer.wrap(S)),onError:S=>v.fire(S),onEnd:()=>{v.fire("end"),v.dispose(),f.dispose()}}),v.event}writeFile(I,E,d,w){const f=this.transformIncoming(I,E);return this.provider.writeFile(f,d.buffer,w)}open(I,E,d){const w=this.transformIncoming(I,E,!0);return this.provider.open(w,d)}close(I){return this.provider.close(I)}async read(I,E,d){const w=L.VSBuffer.alloc(d),f=0,v=await this.provider.read(I,E,w.buffer,f,d);return[w,v]}write(I,E,d,w,f){return this.provider.write(I,E,d.buffer,w,f)}mkdir(I,E){const d=this.transformIncoming(I,E);return this.provider.mkdir(d)}delete(I,E,d){const w=this.transformIncoming(I,E);return this.provider.delete(w,d)}rename(I,E,d,w){const f=this.transformIncoming(I,E),v=this.transformIncoming(I,d);return this.provider.rename(f,v,w)}copy(I,E,d,w){const f=this.transformIncoming(I,E),v=this.transformIncoming(I,d);return this.provider.copy(f,v,w)}cloneFile(I,E,d){const w=this.transformIncoming(I,E),f=this.transformIncoming(I,d);return this.provider.cloneFile(w,f)}onFileChange(I,E){const d=new C.Emitter({onWillAddFirstListener:()=>{this.sessionToWatcher.set(E,this.createSessionFileWatcher(I,d))},onDidRemoveLastListener:()=>{(0,k.dispose)(this.sessionToWatcher.get(E)),this.sessionToWatcher.delete(E)}});return d.event}async watch(I,E,d,w,f){const v=this.sessionToWatcher.get(E);if(v){const u=this.transformIncoming(I,w),S=v.watch(d,u,f);this.watchRequests.set(E+d,S)}}async unwatch(I,E){const d=I+E,w=this.watchRequests.get(d);w&&((0,k.dispose)(w),this.watchRequests.delete(d))}dispose(){super.dispose();for(const[,I]of this.watchRequests)I.dispose();this.watchRequests.clear();for(const[,I]of this.sessionToWatcher)I.dispose();this.sessionToWatcher.clear()}}e.AbstractDiskFileSystemProviderChannel=p;class m extends k.Disposable{constructor(I,E,d,w){super(),this.uriTransformer=I,this.logService=d,this.environmentService=w,this.watcherRequests=new Map,this.fileWatcher=this._register(new t.DiskFileSystemProvider(this.logService,{watcher:{recursive:this.getRecursiveWatcherOptions(this.environmentService)}})),this.registerListeners(E)}registerListeners(I){const E=this._register(new C.Emitter);this._register(E.event(d=>{I.fire(d.map(w=>({resource:this.uriTransformer.transformOutgoingURI(w.resource),type:w.type})))})),this._register(this.fileWatcher.onDidChangeFile(d=>E.fire(d))),this._register(this.fileWatcher.onDidWatchError(d=>I.fire(d)))}getRecursiveWatcherOptions(I){}getExtraExcludes(I){}watch(I,E,d){const w=this.getExtraExcludes(this.environmentService);return Array.isArray(w)&&(d.excludes=[...d.excludes,...w]),this.watcherRequests.set(I,this.fileWatcher.watch(E,d)),(0,k.toDisposable)(()=>{(0,k.dispose)(this.watcherRequests.get(I)),this.watcherRequests.delete(I)})}dispose(){super.dispose();for(const[,I]of this.watcherRequests)I.dispose();this.watcherRequests.clear()}}e.AbstractSessionFileWatcher=m}),define(ee[207],te([0,1,13,162,4,7,16,9,206,141]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiskFileSystemProviderChannel=void 0;class y extends p.AbstractDiskFileSystemProviderChannel{constructor(d,w,f){super(d,w),this.environmentService=f}getUriTransformer(d){return m.DefaultURITransformer}transformIncoming(d,w){return L.URI.revive(w)}async delete(d,w,f){if(!f.useTrash)return super.delete(d,w,f);const v=this.transformIncoming(d,w),u=(0,P.normalize)(v.fsPath);try{await C.shell.trashItem(u)}catch{throw(0,R.createFileSystemProviderError)(k.isWindows?(0,t.localize)(0,null,(0,P.basename)(u)):(0,t.localize)(1,null,(0,P.basename)(u)),R.FileSystemProviderErrorCode.Unknown)}}createSessionFileWatcher(d,w){return new I(d,w,this.logService,this.environmentService)}}e.DiskFileSystemProviderChannel=y;class I extends p.AbstractSessionFileWatcher{watch(d,w,f){if(f.recursive)throw(0,R.createFileSystemProviderError)("Recursive file watching is not supported from main process for performance reasons.",R.FileSystemProviderErrorCode.Unavailable);return super.watch(d,w,f)}}}),define(ee[208],te([0,1,6]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLogService=void 0;class t extends C.AbstractMessageLogger{constructor(L=C.DEFAULT_LOG_LEVEL){super(),this.buffer=[],this._logger=void 0,this.setLevel(L),this._register(this.onDidChangeLogLevel(R=>{this._logger?.setLevel(R)}))}set logger(L){this._logger=L;for(const{level:R,message:P}of this.buffer)(0,C.log)(L,R,P);this.buffer=[]}log(L,R){this._logger?(0,C.log)(this._logger,L,R):this.getLevel()<=L&&this.buffer.push({level:L,message:R})}dispose(){this._logger?.dispose()}flush(){this._logger?.flush()}}e.BufferLogService=t}),define(ee[209],te([0,1,3,7,6]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowerLogService=e.LoggerChannelClient=e.LoggerChannel=e.LogLevelChannelClient=e.LogLevelChannel=void 0;class L{constructor(E,d){this.logService=E,this.loggerService=d,this.onDidChangeLogLevel=C.Event.buffer(E.onDidChangeLogLevel,!0)}listen(E,d){switch(d){case"onDidChangeLogLevel":return this.onDidChangeLogLevel}throw new Error(`Event not found: ${d}`)}async call(E,d,w){switch(d){case"setLevel":return w[1]?this.loggerService.setLevel(t.URI.revive(w[1]),w[0]):this.logService.setLevel(w[0])}throw new Error(`Call not found: ${d}`)}}e.LogLevelChannel=L;class R{constructor(E){this.channel=E}get onDidChangeLogLevel(){return this.channel.listen("onDidChangeLogLevel")}setLevel(E,d){R.setLevel(this.channel,E,d)}static setLevel(E,d,w){return E.call("setLevel",[d,w])}}e.LogLevelChannelClient=R;class P{constructor(E){this.loggerService=E,this.loggers=new Map}listen(E,d){throw new Error(`Event not found: ${d}`)}async call(E,d,w){switch(d){case"createLogger":this.createLogger(t.URI.revive(w[0]),w[1]);return;case"log":return this.log(t.URI.revive(w[0]),w[1]);case"consoleLog":return this.consoleLog(w[0],w[1])}throw new Error(`Call not found: ${d}`)}createLogger(E,d){this.loggers.set(E.toString(),this.loggerService.createLogger(E,d))}consoleLog(E,d){let w=console.log;switch(E){case k.LogLevel.Error:w=console.error;break;case k.LogLevel.Warning:w=console.warn;break;case k.LogLevel.Info:w=console.info;break}w.call(console,...d)}log(E,d){const w=this.loggers.get(E.toString());if(!w)throw new Error("Create the logger before logging");for(const[f,v]of d)(0,k.log)(w,f,v)}}e.LoggerChannel=P;class p extends k.AbstractLoggerService{constructor(E,d,w){super(E,d),this.channel=w}createConsoleMainLogger(){return new k.AdapterLogger({log:(E,d)=>{this.channel.call("consoleLog",[E,d])}})}doCreateLogger(E,d,w){return new m(this.channel,E,d,w)}}e.LoggerChannelClient=p;class m extends k.AbstractMessageLogger{constructor(E,d,w,f){super(f?.always),this.channel=E,this.file=d,this.isLoggerCreated=!1,this.buffer=[],this.setLevel(w),this.channel.call("createLogger",[d,f]).then(()=>{this.doLog(this.buffer),this.isLoggerCreated=!0})}log(E,d){const w=[[E,d]];this.isLoggerCreated?this.doLog(w):this.buffer.push(...w)}doLog(E){this.channel.call("log",[this.file,E])}}class y extends k.LogService{constructor(E,d){super(d),this.parent=E,this._register(E.onDidChangeLogLevel(w=>d.setLevel(w)))}setLevel(E){super.setLevel(E),this.parent.setLevel(E)}}e.FollowerLogService=y}),define(ee[210],te([0,1,16,6]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpdLogLogger=void 0;var k;(function(m){m[m.Trace=0]="Trace",m[m.Debug=1]="Debug",m[m.Info=2]="Info",m[m.Warning=3]="Warning",m[m.Error=4]="Error",m[m.Critical=5]="Critical",m[m.Off=6]="Off"})(k||(k={}));async function L(m,y,I,E,d){try{const w=await new Promise((v,u)=>{j(["spdlog"],v,u)});w.setFlushOn(k.Trace);const f=await w.createAsyncRotatingLogger(m,y,I,E);return d?f.clearFormatters():f.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),f}catch(w){console.error(w)}return null}function R(m,y,I){switch(y){case t.LogLevel.Trace:m.trace(I);break;case t.LogLevel.Debug:m.debug(I);break;case t.LogLevel.Info:m.info(I);break;case t.LogLevel.Warning:m.warn(I);break;case t.LogLevel.Error:m.error(I);break;case t.LogLevel.Off:break;default:throw new Error(`Invalid log level ${y}`)}}function P(m,y){switch(y){case t.LogLevel.Trace:m.setLevel(k.Trace);break;case t.LogLevel.Debug:m.setLevel(k.Debug);break;case t.LogLevel.Info:m.setLevel(k.Info);break;case t.LogLevel.Warning:m.setLevel(k.Warning);break;case t.LogLevel.Error:m.setLevel(k.Error);break;case t.LogLevel.Off:m.setLevel(k.Off);break;default:throw new Error(`Invalid log level ${y}`)}}class p extends t.AbstractMessageLogger{constructor(y,I,E,d,w){super(),this.buffer=[],this.setLevel(w),this._loggerCreationPromise=this._createSpdLogLogger(y,I,E,d),this._register(this.onDidChangeLogLevel(f=>{this._logger&&P(this._logger,f)}))}async _createSpdLogLogger(y,I,E,d){const w=E?6:1,f=30/w*C.ByteSize.MB,v=await L(y,I,f,w,d);if(v){this._logger=v,P(this._logger,this.getLevel());for(const{level:u,message:S}of this.buffer)R(this._logger,u,S);this.buffer=[]}}log(y,I){this._logger?R(this._logger,y,I):this.getLevel()<=y&&this.buffer.push({level:y,message:I})}flush(){this._logger?this._logger.flush():this._loggerCreationPromise.then(()=>this.flush())}dispose(){this._logger?this.disposeLogger():this._loggerCreationPromise.then(()=>this.disposeLogger())}disposeLogger(){this._logger&&(this._logger.drop(),this._logger=void 0)}}e.SpdLogLogger=p}),define(ee[211],te([0,1,29,6,210]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerService=void 0;let L=class extends t.AbstractLoggerService{constructor(P){super(P.getLevel(),P.onDidChangeLogLevel)}doCreateLogger(P,p,m){return new k.SpdLogLogger(m?.name||(0,C.generateUuid)(),P.fsPath,!m?.donotRotate,!!m?.donotUseFormatters,p)}};L=we([ie(0,t.ILogService)],L),e.LoggerService=L}),define(ee[212],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isMenubarMenuItemAction=e.isMenubarMenuItemRecentAction=e.isMenubarMenuItemSeparator=e.isMenubarMenuItemSubmenu=void 0;function C(R){return R.submenu!==void 0}e.isMenubarMenuItemSubmenu=C;function t(R){return R.id==="vscode.menubar.separator"}e.isMenubarMenuItemSeparator=t;function k(R){return R.uri!==void 0}e.isMenubarMenuItemRecentAction=k;function L(R){return!C(R)&&!t(R)&&!k(R)}e.isMenubarMenuItemAction=L}),define(ee[37],te([0,1,3,67,2,5]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullPolicyService=e.AbstractPolicyService=e.IPolicyService=void 0,e.IPolicyService=(0,L.createDecorator)("policy");class R extends k.Disposable{constructor(){super(...arguments),this.policyDefinitions={},this.policies=new Map,this._onDidChange=this._register(new C.Emitter),this.onDidChange=this._onDidChange.event}async updatePolicyDefinitions(m){const y=Object.keys(this.policyDefinitions).length;return this.policyDefinitions={...m,...this.policyDefinitions},y!==Object.keys(this.policyDefinitions).length&&await this._updatePolicyDefinitions(m),t.Iterable.reduce(this.policies.entries(),(I,[E,d])=>({...I,[E]:d}),{})}getPolicyValue(m){return this.policies.get(m)}serialize(){return t.Iterable.reduce(Object.entries(this.policyDefinitions),(m,[y,I])=>({...m,[y]:{definition:I,value:this.policies.get(y)}}),{})}}e.AbstractPolicyService=R;class P{constructor(){this.onDidChange=C.Event.None}async updatePolicyDefinitions(){return{}}getPolicyValue(){}serialize(){}}e.NullPolicyService=P}),define(ee[213],te([0,1,8,3,67,12,16,6,37]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FilePolicyService=void 0;function m(I,E){const d=[];for(const w of k.Iterable.concat(I.keys(),E.keys()))I.get(w)!==E.get(w)&&d.push(w);return d}let y=class extends p.AbstractPolicyService{constructor(E,d,w){super(),this.file=E,this.fileService=d,this.logService=w,this.throttledDelayer=this._register(new C.ThrottledDelayer(500));const f=t.Event.filter(d.onDidFilesChange,v=>v.affects(E));this._register(d.watch(E)),this._register(f(()=>this.throttledDelayer.trigger(()=>this.refresh())))}async _updatePolicyDefinitions(){await this.refresh()}async read(){const E=new Map;try{const d=await this.fileService.readFile(this.file),w=JSON.parse(d.value.toString());if(!(0,L.isObject)(w))throw new Error("Policy file isn't a JSON object");for(const f of Object.keys(w))this.policyDefinitions[f]&&E.set(f,w[f])}catch(d){d.fileOperationResult!==1&&this.logService.error("[FilePolicyService] Failed to read policies",d)}return E}async refresh(){const E=await this.read(),d=m(this.policies,E);this.policies=E,d.length>0&&this._onDidChange.fire(d)}};y=we([ie(1,R.IFileService),ie(2,P.ILogService)],y),e.FilePolicyService=y}),define(ee[214],te([0,1,3,2,37]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicyChannelClient=e.PolicyChannel=void 0;class L{constructor(p){this.service=p,this.disposables=new t.DisposableStore}listen(p,m){switch(m){case"onDidChange":return C.Event.map(this.service.onDidChange,y=>y.reduce((I,E)=>({...I,[E]:this.service.getPolicyValue(E)??null}),{}),this.disposables)}throw new Error(`Event not found: ${m}`)}call(p,m,y){switch(m){case"updatePolicyDefinitions":return this.service.updatePolicyDefinitions(y)}throw new Error(`Call not found: ${m}`)}dispose(){this.disposables.dispose()}}e.PolicyChannel=L;class R extends k.AbstractPolicyService{constructor(p,m){super(),this.channel=m;for(const y in p){const{definition:I,value:E}=p[y];this.policyDefinitions[y]=I,E!==void 0&&this.policies.set(y,E)}this.channel.listen("onDidChange")(y=>{for(const I in y){const E=y[I];E===null?this.policies.delete(I):this.policies.set(I,E)}this._onDidChange.fire(Object.keys(y))})}async _updatePolicyDefinitions(p){const m=await this.channel.call("updatePolicyDefinitions",p);for(const y in m)this.policies.set(y,m[y])}}e.PolicyChannelClient=R}),define(ee[63],te([0,1,14,4,33,106]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let R;if(typeof t.globals.vscode<"u"&&typeof t.globals.vscode.context<"u"){const P=t.globals.vscode.context.configuration();if(P)R=P.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){R=globalThis._VSCODE_PRODUCT_JSON;const{serviceUrl:P,searchUrl:p,itemUrl:m,controlUrl:y}=R.extensionsGallery||{};Object.assign(R,{extensionsGallery:{serviceUrl:k.env.VSCODE_GALLERY_SERVICE_URL||P,searchUrl:k.env.VSCODE_GALLERY_SEARCH_URL||p,itemUrl:k.env.VSCODE_GALLERY_ITEM_URL||m,controlUrl:k.env.VSCODE_GALLERY_CONTROL_URL||y}});try{const I=(...f)=>f.reduce((v,u)=>(Object.keys(u).forEach(S=>{Array.isArray(v[S])&&Array.isArray(u[S])?v[S]=u[S]:typeof v[S]=="object"&&typeof u[S]=="object"?v[S]=I(v[S],u[S]):v[S]=u[S]}),v),{}),E=(0,L.getUserDataPath)({},R.nameShort),d=t.isWindows?`file:///${E}/product.json`:`file://${E}/product.json`,w=j.__$__nodeRequire(C.FileAccess.asFileUri(d).fsPath);R=I(R,w)}catch{}if(k.env.VSCODE_DEV&&Object.assign(R,{nameShort:`${R.nameShort} Dev`,nameLong:`${R.nameLong} Dev`,dataFolderName:`${R.dataFolderName}-dev`,serverDataFolderName:R.serverDataFolderName?`${R.serverDataFolderName}-dev`:void 0}),!R.version){const I=globalThis._VSCODE_PACKAGE_JSON;Object.assign(R,{version:I.version,release:I.release})}}else R={},Object.keys(R).length===0&&Object.assign(R,{version:"1.72.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});e.default=R}),define(ee[19],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.productSchemaId=e.IProductService=void 0,e.IProductService=(0,C.createDecorator)("productService"),e.productSchemaId="vscode://schemas/vscode-product"}),define(ee[215],te([0,1,77,6,19]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionUrlTrustService=void 0;let L=class{constructor(P,p){this.productService=P,this.logService=p,this.trustedExtensionUrlPublicKeys=new Map}async isExtensionUrlTrusted(P,p){if(!this.productService.trustedExtensionUrlPublicKeys)return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","There are no configured trusted keys"),!1;const m=/^(.*)#([^#]+)$/.exec(p);if(!m)return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Uri has no fragment",p),!1;const[,y,I]=m;let E=this.trustedExtensionUrlPublicKeys.get(P);if(!E){if(E=this.productService.trustedExtensionUrlPublicKeys[P],!E||E.length===0)return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Extension doesn't have any trusted keys",P),!1;this.trustedExtensionUrlPublicKeys.set(P,[...E])}const d=Buffer.from(decodeURIComponent(I),"base64");if(d.length<=6)return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Uri fragment is not a signature",p),!1;const w=d.slice(0,6),f=d.readUIntBE(0,6),v=Date.now()-f;if(v<0||v>36e5)return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Signed uri has expired",p),!1;const u=d.slice(6),S=C.createVerify("SHA256");S.write(w),S.write(Buffer.from(y)),S.end();for(let g=0;g<E.length;g++){let h=E[g];if(h!==null){if(typeof h=="string")try{h=C.createPublicKey({key:Buffer.from(h,"base64"),format:"der",type:"spki"}),E[g]=h}catch(l){this.logService.warn("ExtensionUrlTrustService#isExtensionUrlTrusted",`Failed to parse trusted extension uri public key #${g+1} for ${P}:`,l),E[g]=null;continue}if(S.verify(h,u))return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Signed uri is valid",p),!0}}return this.logService.trace("ExtensionUrlTrustService#isExtensionUrlTrusted","Signed uri could not be verified",p),!1}};L=we([ie(0,k.IProductService),ie(1,t.ILogService)],L),e.ExtensionUrlTrustService=L}),define(ee[216],te([0,1,8,6]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WindowProfiler=void 0;let k=class{constructor(R,P,p){this._window=R,this._sessionId=P,this._logService=p}async inspect(R){await this._connect();const P=this._window.webContents.debugger;await P.sendCommand("Profiler.start"),this._logService.warn("[perf] profiling STARTED",this._sessionId),await(0,C.timeout)(R);const p=await P.sendCommand("Profiler.stop");return this._logService.warn("[perf] profiling DONE",this._sessionId),await this._disconnect(),p.profile}async _connect(){const R=this._window.webContents.debugger;R.attach(),await R.sendCommand("Profiler.enable")}async _disconnect(){const R=this._window.webContents.debugger;await R.sendCommand("Profiler.disable"),R.detach()}};k=we([ie(2,t.ILogService)],k),e.WindowProfiler=k}),define(ee[64],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IProtocolMainService=void 0,e.IProtocolMainService=(0,C.createDecorator)("protocolMainService")}),define(ee[48],te([0,1,123,12]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=void 0;class k{constructor(){this.data=new Map}add(R,P){C.ok(t.isString(R)),C.ok(t.isObject(P)),C.ok(!this.data.has(R),"There is already an extension with this id"),this.data.set(R,P)}knows(R){return this.data.has(R)}as(R){return this.data.get(R)||null}}e.Registry=new k}),define(ee[217],te([0,1,3,48]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Extensions=void 0,e.Extensions={JSONContribution:"base.contributions.json"};function k(P){return P.length>0&&P.charAt(P.length-1)==="#"?P.substring(0,P.length-1):P}class L{constructor(){this._onDidChangeSchema=new C.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(p,m){this.schemasById[k(p)]=m,this._onDidChangeSchema.fire(p)}notifySchemaChanged(p){this._onDidChangeSchema.fire(p)}getSchemaContributions(){return{schemas:this.schemasById}}}const R=new L;t.Registry.add(e.Extensions.JSONContribution,R)}),define(ee[65],te([0,1,24,3,12,150,18,217,48]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getScopes=e.validateProperty=e.getDefaultValue=e.keyFromOverrideIdentifiers=e.overrideIdentifiersFromKey=e.OVERRIDE_PROPERTY_REGEX=e.OVERRIDE_PROPERTY_PATTERN=e.configurationDefaultsSchemaId=e.resourceLanguageSettingsSchemaId=e.resourceSettings=e.windowSettings=e.machineOverridableSettings=e.machineSettings=e.applicationSettings=e.allSettings=e.ConfigurationScope=e.Extensions=e.EditPresentationTypes=void 0;var m;(function(l){l.Multiline="multilineText",l.Singleline="singlelineText"})(m=e.EditPresentationTypes||(e.EditPresentationTypes={})),e.Extensions={Configuration:"base.contributions.configuration"};var y;(function(l){l[l.APPLICATION=1]="APPLICATION",l[l.MACHINE=2]="MACHINE",l[l.WINDOW=3]="WINDOW",l[l.RESOURCE=4]="RESOURCE",l[l.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",l[l.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(y=e.ConfigurationScope||(e.ConfigurationScope={})),e.allSettings={properties:{},patternProperties:{}},e.applicationSettings={properties:{},patternProperties:{}},e.machineSettings={properties:{},patternProperties:{}},e.machineOverridableSettings={properties:{},patternProperties:{}},e.windowSettings={properties:{},patternProperties:{}},e.resourceSettings={properties:{},patternProperties:{}},e.resourceLanguageSettingsSchemaId="vscode://schemas/settings/resourceLanguage",e.configurationDefaultsSchemaId="vscode://schemas/settings/configurationDefaults";const I=p.Registry.as(P.Extensions.JSONContribution);class E{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new t.Emitter,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new t.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:L.localize(0,null),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},I.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(i,s=!0){this.registerConfigurations([i],s)}registerConfigurations(i,s=!0){const n=this.doRegisterConfigurations(i,s);I.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(i){const s=this.doDeregisterConfigurations(i);I.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:s})}updateConfigurations({add:i,remove:s}){const n=[];n.push(...this.doDeregisterConfigurations(s)),n.push(...this.doRegisterConfigurations(i,!1)),I.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:(0,C.distinct)(n)})}registerDefaultConfigurations(i){const s=[],n=[];for(const{overrides:a,source:r}of i)for(const c in a)if(s.push(c),e.OVERRIDE_PROPERTY_REGEX.test(c)){const o=this.configurationDefaultsOverrides.get(c),b=o?.valuesSources??new Map;if(r)for(const G of Object.keys(a[c]))b.set(G,r);const D={...o?.value||{},...a[c]};this.configurationDefaultsOverrides.set(c,{source:r,value:D,valuesSources:b});const A=(0,R.getLanguageTagSettingPlainKey)(c),N={type:"object",default:D,description:L.localize(1,null,A),$ref:e.resourceLanguageSettingsSchemaId,defaultDefaultValue:D,source:k.isString(r)?void 0:r,defaultValueSource:r};n.push(...f(c)),this.configurationProperties[c]=N,this.defaultLanguageConfigurationOverridesNode.properties[c]=N}else{this.configurationDefaultsOverrides.set(c,{value:a[c],source:r});const o=this.configurationProperties[c];o&&(this.updatePropertyDefaultValue(c,o),this.updateSchema(c,o))}this.registerOverrideIdentifiers(n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:s,defaultsOverrides:!0})}deregisterDefaultConfigurations(i){const s=[];for(const{overrides:n,source:a}of i)for(const r in n){const c=this.configurationDefaultsOverrides.get(r),o=k.isString(a)?a:a?.id,b=k.isString(c?.source)?c?.source:c?.source?.id;if(o===b)if(s.push(r),this.configurationDefaultsOverrides.delete(r),e.OVERRIDE_PROPERTY_REGEX.test(r))delete this.configurationProperties[r],delete this.defaultLanguageConfigurationOverridesNode.properties[r];else{const D=this.configurationProperties[r];D&&(this.updatePropertyDefaultValue(r,D),this.updateSchema(r,D))}}this.updateOverridePropertyPatternKey(),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:s,defaultsOverrides:!0})}notifyConfigurationSchemaUpdated(...i){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(i){for(const s of i)this.overrideIdentifiers.add(s);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(i,s){const n=[];return i.forEach(a=>{n.push(...this.validateAndRegisterProperties(a,s,a.extensionInfo,a.restrictedProperties)),this.configurationContributors.push(a),this.registerJSONConfiguration(a)}),n}doDeregisterConfigurations(i){const s=[],n=a=>{if(a.properties)for(const r in a.properties){s.push(r);const c=this.configurationProperties[r];c?.policy?.name&&this.policyConfigurations.delete(c.policy.name),delete this.configurationProperties[r],this.removeFromSchema(r,a.properties[r])}a.allOf?.forEach(r=>n(r))};for(const a of i){n(a);const r=this.configurationContributors.indexOf(a);r!==-1&&this.configurationContributors.splice(r,1)}return s}validateAndRegisterProperties(i,s=!0,n,a,r=3){r=k.isUndefinedOrNull(i.scope)?r:i.scope;const c=[],o=i.properties;if(o)for(const D in o){const A=o[D];if(s&&g(D,A)){delete o[D];continue}if(A.source=n,A.defaultDefaultValue=o[D].default,this.updatePropertyDefaultValue(D,A),e.OVERRIDE_PROPERTY_REGEX.test(D)?A.scope=void 0:(A.scope=k.isUndefinedOrNull(A.scope)?r:A.scope,A.restricted=k.isUndefinedOrNull(A.restricted)?!!a?.includes(D):A.restricted),o[D].hasOwnProperty("included")&&!o[D].included){this.excludedConfigurationProperties[D]=o[D],delete o[D];continue}else this.configurationProperties[D]=o[D],o[D].policy?.name&&this.policyConfigurations.set(o[D].policy.name,D);!o[D].deprecationMessage&&o[D].markdownDeprecationMessage&&(o[D].deprecationMessage=o[D].markdownDeprecationMessage),c.push(D)}const b=i.allOf;if(b)for(const D of b)c.push(...this.validateAndRegisterProperties(D,s,n,a,r));return c}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(i){const s=n=>{const a=n.properties;if(a)for(const c in a)this.updateSchema(c,a[c]);n.allOf?.forEach(s)};s(i)}updateSchema(i,s){switch(e.allSettings.properties[i]=s,s.scope){case 1:e.applicationSettings.properties[i]=s;break;case 2:e.machineSettings.properties[i]=s;break;case 6:e.machineOverridableSettings.properties[i]=s;break;case 3:e.windowSettings.properties[i]=s;break;case 4:e.resourceSettings.properties[i]=s;break;case 5:e.resourceSettings.properties[i]=s,this.resourceLanguageSettingsSchema.properties[i]=s;break}}removeFromSchema(i,s){switch(delete e.allSettings.properties[i],s.scope){case 1:delete e.applicationSettings.properties[i];break;case 2:delete e.machineSettings.properties[i];break;case 6:delete e.machineOverridableSettings.properties[i];break;case 3:delete e.windowSettings.properties[i];break;case 4:case 5:delete e.resourceSettings.properties[i],delete this.resourceLanguageSettingsSchema.properties[i];break}}updateOverridePropertyPatternKey(){for(const i of this.overrideIdentifiers.values()){const s=`[${i}]`,n={type:"object",description:L.localize(2,null),errorMessage:L.localize(3,null),$ref:e.resourceLanguageSettingsSchemaId};this.updatePropertyDefaultValue(s,n),e.allSettings.properties[s]=n,e.applicationSettings.properties[s]=n,e.machineSettings.properties[s]=n,e.machineOverridableSettings.properties[s]=n,e.windowSettings.properties[s]=n,e.resourceSettings.properties[s]=n}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){const i={type:"object",description:L.localize(4,null),errorMessage:L.localize(5,null),$ref:e.resourceLanguageSettingsSchemaId};e.allSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,e.applicationSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,e.machineSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,e.machineOverridableSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,e.windowSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,e.resourceSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=i,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(i,s){const n=this.configurationDefaultsOverrides.get(i);let a=n?.value,r=n?.source;k.isUndefined(a)&&(a=s.defaultDefaultValue,r=void 0),k.isUndefined(a)&&(a=u(s.type)),s.default=a,s.defaultValueSource=r}}const d="\\[([^\\]]+)\\]",w=new RegExp(d,"g");e.OVERRIDE_PROPERTY_PATTERN=`^(${d})+$`,e.OVERRIDE_PROPERTY_REGEX=new RegExp(e.OVERRIDE_PROPERTY_PATTERN);function f(l){const i=[];if(e.OVERRIDE_PROPERTY_REGEX.test(l)){let s=w.exec(l);for(;s?.length;){const n=s[1].trim();n&&i.push(n),s=w.exec(l)}}return(0,C.distinct)(i)}e.overrideIdentifiersFromKey=f;function v(l){return l.reduce((i,s)=>`${i}[${s}]`,"")}e.keyFromOverrideIdentifiers=v;function u(l){switch(Array.isArray(l)?l[0]:l){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}e.getDefaultValue=u;const S=new E;p.Registry.add(e.Extensions.Configuration,S);function g(l,i){return l.trim()?e.OVERRIDE_PROPERTY_REGEX.test(l)?L.localize(7,null,l):S.getConfigurationProperties()[l]!==void 0?L.localize(8,null,l):i.policy?.name&&S.getPolicyConfigurations().get(i.policy?.name)!==void 0?L.localize(9,null,l,i.policy?.name,S.getPolicyConfigurations().get(i.policy?.name)):null:L.localize(6,null)}e.validateProperty=g;function h(){const l=[],i=S.getConfigurationProperties();for(const s of Object.keys(i))l.push([s,i[s].scope]);return l.push(["launch",4]),l.push(["task",4]),l}e.getScopes=h}),define(ee[110],te([0,1,24,3,43,2,39,44,12,7,18,65,48]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationChangeEvent=e.mergeChanges=e.Configuration=e.UserSettings=e.ConfigurationModelParser=e.ConfigurationModel=void 0;class d{constructor(s={},n=[],a=[],r){this._contents=s,this._keys=n,this._overrides=a,this.raw=r,this.frozen=!1,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const s=this.raw.map(n=>{if(n instanceof d)return n;const a=new w("");return a.parseRaw(n),a.configurationModel});this._rawConfiguration=s.reduce((n,a)=>a===n?a:n.merge(a),s[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}isFrozen(){return this.frozen}getValue(s){return s?(0,y.getConfigurationValue)(this.contents,s):this.contents}inspect(s,n){const a=this.rawConfiguration.getValue(s),r=n?this.rawConfiguration.getOverrideValue(s,n):void 0,c=n?this.rawConfiguration.override(n).getValue(s):a;return{value:a,override:r,merged:c}}getOverrideValue(s,n){const a=this.getContentsForOverrideIdentifer(n);return a?s?(0,y.getConfigurationValue)(a,s):a:void 0}getKeysForOverrideIdentifier(s){const n=[];for(const a of this.overrides)a.identifiers.includes(s)&&n.push(...a.keys);return C.distinct(n)}getAllOverrideIdentifiers(){const s=[];for(const n of this.overrides)s.push(...n.identifiers);return C.distinct(s)}override(s){let n=this.overrideConfigurations.get(s);return n||(n=this.createOverrideConfigurationModel(s),this.overrideConfigurations.set(s,n)),n}merge(...s){const n=P.deepClone(this.contents),a=P.deepClone(this.overrides),r=[...this.keys],c=this.raw?.length?[...this.raw]:[this];for(const o of s)if(c.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.mergeContents(n,o.contents);for(const b of o.overrides){const[D]=a.filter(A=>C.equals(A.identifiers,b.identifiers));D?(this.mergeContents(D.contents,b.contents),D.keys.push(...b.keys),D.keys=C.distinct(D.keys)):a.push(P.deepClone(b))}for(const b of o.keys)r.indexOf(b)===-1&&r.push(b)}return new d(n,r,a,c.every(o=>o instanceof d)?void 0:c)}freeze(){return this.frozen=!0,this}clone(){return new d(P.deepClone(this.contents),[...this.keys],P.deepClone(this.overrides))}createOverrideConfigurationModel(s){const n=this.getContentsForOverrideIdentifer(s);if(!n||typeof n!="object"||!Object.keys(n).length)return this;const a={};for(const r of C.distinct([...Object.keys(this.contents),...Object.keys(n)])){let c=this.contents[r];const o=n[r];o&&(typeof c=="object"&&typeof o=="object"?(c=P.deepClone(c),this.mergeContents(c,o)):c=o),a[r]=c}return new d(a,this.keys,this.overrides)}mergeContents(s,n){for(const a of Object.keys(n)){if(a in s&&p.isObject(s[a])&&p.isObject(n[a])){this.mergeContents(s[a],n[a]);continue}s[a]=P.deepClone(n[a])}}checkAndFreeze(s){return this.frozen&&!Object.isFrozen(s)?P.deepFreeze(s):s}getContentsForOverrideIdentifer(s){let n=null,a=null;const r=c=>{c&&(a?this.mergeContents(a,c):a=P.deepClone(c))};for(const c of this.overrides)C.equals(c.identifiers,[s])?n=c.contents:c.identifiers.includes(s)&&r(c.contents);return r(n),a}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(s,n){this.addKey(s),(0,y.addToValueTree)(this.contents,s,n,a=>{throw new Error(a)})}removeValue(s){this.removeKey(s)&&(0,y.removeFromValueTree)(this.contents,s)}addKey(s){let n=this.keys.length;for(let a=0;a<n;a++)s.indexOf(this.keys[a])===0&&(n=a);this.keys.splice(n,1,s)}removeKey(s){const n=this.keys.indexOf(s);return n!==-1?(this.keys.splice(n,1),!0):!1}}e.ConfigurationModel=d;class w{constructor(s){this._name=s,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||new d}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(s,n){if(!p.isUndefinedOrNull(s)){const a=this.doParseContent(s);this.parseRaw(a,n)}}reparse(s){this._raw&&this.parseRaw(this._raw,s)}parseRaw(s,n){this._raw=s;const{contents:a,keys:r,overrides:c,restricted:o,hasExcludedProperties:b}=this.doParseRaw(s,n);this._configurationModel=new d(a,r,c,b?[s]:void 0),this._restrictedConfigurations=o||[]}doParseContent(s){let n={},a=null,r=[];const c=[],o=[];function b(A){Array.isArray(r)?r.push(A):a!==null&&(r[a]=A)}const D={onObjectBegin:()=>{const A={};b(A),c.push(r),r=A,a=null},onObjectProperty:A=>{a=A},onObjectEnd:()=>{r=c.pop()},onArrayBegin:()=>{const A=[];b(A),c.push(r),r=A,a=null},onArrayEnd:()=>{r=c.pop()},onLiteralValue:b,onError:(A,N,G)=>{o.push({error:A,offset:N,length:G})}};if(s)try{k.visit(s,D),n=r[0]||{}}catch(A){console.error(`Error while parsing settings file ${this._name}: ${A}`),this._parseErrors=[A]}return n}doParseRaw(s,n){const a=E.Registry.as(I.Extensions.Configuration).getConfigurationProperties(),r=this.filter(s,a,!0,n);s=r.raw;const c=(0,y.toValuesTree)(s,D=>console.error(`Conflict in settings file ${this._name}: ${D}`)),o=Object.keys(s),b=this.toOverrides(s,D=>console.error(`Conflict in settings file ${this._name}: ${D}`));return{contents:c,keys:o,overrides:b,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(s,n,a,r){let c=!1;if(!r?.scopes&&!r?.skipRestricted)return{raw:s,restricted:[],hasExcludedProperties:c};const o={},b=[];for(const D in s)if(I.OVERRIDE_PROPERTY_REGEX.test(D)&&a){const A=this.filter(s[D],n,!1,r);o[D]=A.raw,c=c||A.hasExcludedProperties,b.push(...A.restricted)}else{const A=n[D],N=A?typeof A.scope<"u"?A.scope:3:void 0;A?.restricted&&b.push(D),(N===void 0||r.scopes===void 0||r.scopes.includes(N))&&!(r.skipRestricted&&A?.restricted)?o[D]=s[D]:c=!0}return{raw:o,restricted:b,hasExcludedProperties:c}}toOverrides(s,n){const a=[];for(const r of Object.keys(s))if(I.OVERRIDE_PROPERTY_REGEX.test(r)){const c={};for(const o in s[r])c[o]=s[r][o];a.push({identifiers:(0,I.overrideIdentifiersFromKey)(r),keys:Object.keys(c),contents:(0,y.toValuesTree)(c,n)})}return a}}e.ConfigurationModelParser=w;class f extends L.Disposable{constructor(s,n,a,r){super(),this.userSettingsResource=s,this.scopes=n,this.fileService=r,this._onDidChange=this._register(new t.Emitter),this.onDidChange=this._onDidChange.event,this.parser=new w(this.userSettingsResource.toString()),this.parseOptions={scopes:this.scopes},this._register(this.fileService.watch(a.dirname(this.userSettingsResource))),this._register(this.fileService.watch(this.userSettingsResource)),this._register(t.Event.any(t.Event.filter(this.fileService.onDidFilesChange,c=>c.contains(this.userSettingsResource)),t.Event.filter(this.fileService.onDidRunOperation,c=>(c.isOperation(0)||c.isOperation(3)||c.isOperation(1)||c.isOperation(4))&&a.isEqual(c.resource,s)))(()=>this._onDidChange.fire()))}async loadConfiguration(){try{const s=await this.fileService.readFile(this.userSettingsResource);return this.parser.parse(s.value.toString()||"{}",this.parseOptions),this.parser.configurationModel}catch{return new d}}reparse(){return this.parser.reparse(this.parseOptions),this.parser.configurationModel}getRestrictedSettings(){return this.parser.restrictedConfigurations}}e.UserSettings=f;class v{constructor(s,n,a,r,c,o,b,D,A,N,G,ae,x){this.key=s,this.overrides=n,this.value=a,this.overrideIdentifiers=r,this.defaultConfiguration=c,this.policyConfiguration=o,this.applicationConfiguration=b,this.userConfiguration=D,this.localUserConfiguration=A,this.remoteUserConfiguration=N,this.workspaceConfiguration=G,this.folderConfigurationModel=ae,this.memoryInspectValue=x}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.defaultInspectValue.value!==void 0||this.defaultInspectValue.override!==void 0?{value:this.defaultInspectValue.value,override:this.defaultInspectValue.override}:void 0}get policyInspectValue(){return this._policyInspectValue===void 0&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){return this.policyInspectValue?.merged}get policy(){return this.policyInspectValue?.value!==void 0?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return this._applicationInspectValue===void 0&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){return this.applicationInspectValue?.merged}get application(){return this.applicationInspectValue?.value!==void 0||this.applicationInspectValue?.override!==void 0?{value:this.applicationInspectValue.value,override:this.applicationInspectValue.override}:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.userLocalInspectValue.value!==void 0||this.userLocalInspectValue.override!==void 0?{value:this.userLocalInspectValue.value,override:this.userLocalInspectValue.override}:void 0}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.userRemoteInspectValue.value!==void 0||this.userRemoteInspectValue.override!==void 0?{value:this.userRemoteInspectValue.value,override:this.userRemoteInspectValue.override}:void 0}get workspaceInspectValue(){return this._workspaceInspectValue===void 0&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){return this.workspaceInspectValue?.merged}get workspace(){return this.workspaceInspectValue?.value!==void 0||this.workspaceInspectValue?.override!==void 0?{value:this.workspaceInspectValue.value,override:this.workspaceInspectValue.override}:void 0}get workspaceFolderInspectValue(){return this._workspaceFolderInspectValue===void 0&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){return this.workspaceFolderInspectValue?.merged}get workspaceFolder(){return this.workspaceFolderInspectValue?.value!==void 0||this.workspaceFolderInspectValue?.override!==void 0?{value:this.workspaceFolderInspectValue.value,override:this.workspaceFolderInspectValue.override}:void 0}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.memoryInspectValue.value!==void 0||this.memoryInspectValue.override!==void 0?{value:this.memoryInspectValue.value,override:this.memoryInspectValue.override}:void 0}}class u{constructor(s,n,a,r,c=new d,o=new d,b=new R.ResourceMap,D=new d,A=new R.ResourceMap,N=!0){this._defaultConfiguration=s,this._policyConfiguration=n,this._applicationConfiguration=a,this._localUserConfiguration=r,this._remoteUserConfiguration=c,this._workspaceConfiguration=o,this._folderConfigurations=b,this._memoryConfiguration=D,this._memoryConfigurationByResource=A,this._freeze=N,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new R.ResourceMap,this._userConfiguration=null}getValue(s,n,a){return this.getConsolidatedConfigurationModel(s,n,a).getValue(s)}updateValue(s,n,a={}){let r;a.resource?(r=this._memoryConfigurationByResource.get(a.resource),r||(r=new d,this._memoryConfigurationByResource.set(a.resource,r))):r=this._memoryConfiguration,n===void 0?r.removeValue(s):r.setValue(s,n),a.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(s,n,a){const r=this.getConsolidatedConfigurationModel(s,n,a),c=C.distinct(r.overrides.map(D=>D.identifiers).flat()).filter(D=>r.getOverrideValue(s,D)!==void 0),o=this.getFolderConfigurationModelForResource(n.resource,a),b=n.resource?this._memoryConfigurationByResource.get(n.resource)||this._memoryConfiguration:this._memoryConfiguration;return new v(s,n,r.getValue(s),c.length?c:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze(),this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze(),this.userConfiguration.freeze(),this.localUserConfiguration.freeze(),this.remoteUserConfiguration.freeze(),a?this._workspaceConfiguration.freeze():void 0,o?o.freeze():void 0,b.inspect(s,n.overrideIdentifier))}keys(s){const n=this.getFolderConfigurationModelForResource(void 0,s);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:n?n.freeze().keys:[]}}updateDefaultConfiguration(s){this._defaultConfiguration=s,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(s){this._policyConfiguration=s}updateApplicationConfiguration(s){this._applicationConfiguration=s,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(s){this._localUserConfiguration=s,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(s){this._remoteUserConfiguration=s,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(s){this._workspaceConfiguration=s,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(s,n){this._folderConfigurations.set(s,n),this._foldersConsolidatedConfigurations.delete(s)}deleteFolderConfiguration(s){this.folderConfigurations.delete(s),this._foldersConsolidatedConfigurations.delete(s)}compareAndUpdateDefaultConfiguration(s,n){const a=[];if(!n){const{added:r,updated:c,removed:o}=h(this._defaultConfiguration,s);n=[...r,...c,...o]}for(const r of n)for(const c of(0,I.overrideIdentifiersFromKey)(r)){const o=this._defaultConfiguration.getKeysForOverrideIdentifier(c),b=s.getKeysForOverrideIdentifier(c),D=[...b.filter(A=>o.indexOf(A)===-1),...o.filter(A=>b.indexOf(A)===-1),...o.filter(A=>!P.equals(this._defaultConfiguration.override(c).getValue(A),s.override(c).getValue(A)))];a.push([c,D])}return this.updateDefaultConfiguration(s),{keys:n,overrides:a}}compareAndUpdatePolicyConfiguration(s){const{added:n,updated:a,removed:r}=h(this._policyConfiguration,s),c=[...n,...a,...r];return c.length&&this.updatePolicyConfiguration(s),{keys:c,overrides:[]}}compareAndUpdateApplicationConfiguration(s){const{added:n,updated:a,removed:r,overrides:c}=h(this.applicationConfiguration,s),o=[...n,...a,...r];return o.length&&this.updateApplicationConfiguration(s),{keys:o,overrides:c}}compareAndUpdateLocalUserConfiguration(s){const{added:n,updated:a,removed:r,overrides:c}=h(this.localUserConfiguration,s),o=[...n,...a,...r];return o.length&&this.updateLocalUserConfiguration(s),{keys:o,overrides:c}}compareAndUpdateRemoteUserConfiguration(s){const{added:n,updated:a,removed:r,overrides:c}=h(this.remoteUserConfiguration,s),o=[...n,...a,...r];return o.length&&this.updateRemoteUserConfiguration(s),{keys:o,overrides:c}}compareAndUpdateWorkspaceConfiguration(s){const{added:n,updated:a,removed:r,overrides:c}=h(this.workspaceConfiguration,s),o=[...n,...a,...r];return o.length&&this.updateWorkspaceConfiguration(s),{keys:o,overrides:c}}compareAndUpdateFolderConfiguration(s,n){const a=this.folderConfigurations.get(s),{added:r,updated:c,removed:o,overrides:b}=h(a,n),D=[...r,...c,...o];return(D.length||!a)&&this.updateFolderConfiguration(s,n),{keys:D,overrides:b}}compareAndDeleteFolderConfiguration(s){const n=this.folderConfigurations.get(s);if(!n)throw new Error("Unknown folder");this.deleteFolderConfiguration(s);const{added:a,updated:r,removed:c,overrides:o}=h(n,void 0);return{keys:[...a,...r,...c],overrides:o}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(s,n,a){let r=this.getConsolidatedConfigurationModelForResource(n,a);return n.overrideIdentifier&&(r=r.override(n.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(s)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:s},n){let a=this.getWorkspaceConsolidatedConfiguration();if(n&&s){const r=n.getFolder(s);r&&(a=this.getFolderConsolidatedConfiguration(r.uri)||a);const c=this._memoryConfigurationByResource.get(s);c&&(a=a.merge(c))}return a}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(s){let n=this._foldersConsolidatedConfigurations.get(s);if(!n){const a=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(s);r?(n=a.merge(r),this._freeze&&(n=n.freeze()),this._foldersConsolidatedConfigurations.set(s,n)):n=a}return n}getFolderConfigurationModelForResource(s,n){if(n&&s){const a=n.getFolder(s);if(a)return this._folderConfigurations.get(a.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((s,n)=>{const{contents:a,overrides:r,keys:c}=this._folderConfigurations.get(n);return s.push([n,{contents:a,overrides:r,keys:c}]),s},[])}}allKeys(){const s=new Set;return this._defaultConfiguration.freeze().keys.forEach(n=>s.add(n)),this.userConfiguration.freeze().keys.forEach(n=>s.add(n)),this._workspaceConfiguration.freeze().keys.forEach(n=>s.add(n)),this._folderConfigurations.forEach(n=>n.freeze().keys.forEach(a=>s.add(a))),[...s.values()]}allOverrideIdentifiers(){const s=new Set;return this._defaultConfiguration.freeze().getAllOverrideIdentifiers().forEach(n=>s.add(n)),this.userConfiguration.freeze().getAllOverrideIdentifiers().forEach(n=>s.add(n)),this._workspaceConfiguration.freeze().getAllOverrideIdentifiers().forEach(n=>s.add(n)),this._folderConfigurations.forEach(n=>n.freeze().getAllOverrideIdentifiers().forEach(a=>s.add(a))),[...s.values()]}getAllKeysForOverrideIdentifier(s){const n=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(s).forEach(a=>n.add(a)),this.userConfiguration.getKeysForOverrideIdentifier(s).forEach(a=>n.add(a)),this._workspaceConfiguration.getKeysForOverrideIdentifier(s).forEach(a=>n.add(a)),this._folderConfigurations.forEach(a=>a.getKeysForOverrideIdentifier(s).forEach(r=>n.add(r))),[...n.values()]}static parse(s){const n=this.parseConfigurationModel(s.defaults),a=this.parseConfigurationModel(s.policy),r=this.parseConfigurationModel(s.application),c=this.parseConfigurationModel(s.user),o=this.parseConfigurationModel(s.workspace),b=s.folders.reduce((D,A)=>(D.set(m.URI.revive(A[0]),this.parseConfigurationModel(A[1])),D),new R.ResourceMap);return new u(n,a,r,c,new d,o,b,new d,new R.ResourceMap,!1)}static parseConfigurationModel(s){return new d(s.contents,s.keys,s.overrides).freeze()}}e.Configuration=u;function S(...i){if(i.length===0)return{keys:[],overrides:[]};if(i.length===1)return i[0];const s=new Set,n=new Map;for(const r of i)r.keys.forEach(c=>s.add(c)),r.overrides.forEach(([c,o])=>{const b=(0,R.getOrSet)(n,c,new Set);o.forEach(D=>b.add(D))});const a=[];return n.forEach((r,c)=>a.push([c,[...r.values()]])),{keys:[...s.values()],overrides:a}}e.mergeChanges=S;class g{constructor(s,n,a,r){this.change=s,this.previous=n,this.currentConfiguraiton=a,this.currentWorkspace=r,this._previousConfiguration=void 0;const c=new Set;s.keys.forEach(b=>c.add(b)),s.overrides.forEach(([,b])=>b.forEach(D=>c.add(D))),this.affectedKeys=[...c.values()];const o=new d;this.affectedKeys.forEach(b=>o.setValue(b,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=u.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(s,n){if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,s)){if(n){const a=this.previousConfiguration?this.previousConfiguration.getValue(s,n,this.previous?.workspace):void 0,r=this.currentConfiguraiton.getValue(s,n,this.currentWorkspace);return!P.equals(a,r)}return!0}return!1}doesAffectedKeysTreeContains(s,n){let a=(0,y.toValuesTree)({[n]:!0},()=>{}),r;for(;typeof a=="object"&&(r=Object.keys(a)[0]);){if(s=s[r],!s)return!1;a=a[r]}return!0}}e.ConfigurationChangeEvent=g;function h(i,s){const{added:n,removed:a,updated:r}=l(s?.rawConfiguration,i?.rawConfiguration),c=[],o=i?.getAllOverrideIdentifiers()||[],b=s?.getAllOverrideIdentifiers()||[];if(s){const D=b.filter(A=>!o.includes(A));for(const A of D)c.push([A,s.getKeysForOverrideIdentifier(A)])}if(i){const D=o.filter(A=>!b.includes(A));for(const A of D)c.push([A,i.getKeysForOverrideIdentifier(A)])}if(s&&i){for(const D of o)if(b.includes(D)){const A=l({contents:i.getOverrideValue(void 0,D)||{},keys:i.getKeysForOverrideIdentifier(D)},{contents:s.getOverrideValue(void 0,D)||{},keys:s.getKeysForOverrideIdentifier(D)});c.push([D,[...A.added,...A.removed,...A.updated]])}}return{added:n,removed:a,updated:r,overrides:c}}function l(i,s){const n=i?s?i.keys.filter(c=>s.keys.indexOf(c)===-1):[...i.keys]:[],a=s?i?s.keys.filter(c=>i.keys.indexOf(c)===-1):[...s.keys]:[],r=[];if(i&&s){for(const c of s.keys)if(i.keys.indexOf(c)!==-1){const o=(0,y.getConfigurationValue)(s.contents,c),b=(0,y.getConfigurationValue)(i.contents,c);P.equals(o,b)||r.push(c)}}return{added:n,removed:a,updated:r}}}),define(ee[218],te([0,1,24,3,2,44,12,18,110,65,6,37,48]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicyConfiguration=e.NullPolicyConfiguration=e.DefaultConfigurationModel=e.DefaultConfiguration=void 0;class d extends k.Disposable{constructor(){super(...arguments),this._onDidChangeConfiguration=this._register(new t.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event}get configurationModel(){return this._configurationModel||(this._configurationModel=new w(this.getConfigurationDefaultOverrides())),this._configurationModel}async initialize(){return this._configurationModel=void 0,this._register(E.Registry.as(m.Extensions.Configuration).onDidUpdateConfiguration(({properties:S,defaultsOverrides:g})=>this.onDidUpdateConfiguration(S,g))),this.configurationModel}reload(){return this._configurationModel=void 0,this.configurationModel}onDidUpdateConfiguration(S,g){this._configurationModel=void 0,this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:S})}getConfigurationDefaultOverrides(){return{}}}e.DefaultConfiguration=d;class w extends p.ConfigurationModel{constructor(S={}){const g=E.Registry.as(m.Extensions.Configuration).getConfigurationProperties(),h=Object.keys(g),l=Object.create(null),i=[];for(const s in g){const n=S[s],a=n!==void 0?n:g[s].default;(0,P.addToValueTree)(l,s,a,r=>console.error(`Conflict in default settings: ${r}`))}for(const s of Object.keys(l))m.OVERRIDE_PROPERTY_REGEX.test(s)&&i.push({identifiers:(0,m.overrideIdentifiersFromKey)(s),keys:Object.keys(l[s]),contents:(0,P.toValuesTree)(l[s],n=>console.error(`Conflict in default settings file: ${n}`))});super(l,h,i)}}e.DefaultConfigurationModel=w;class f{constructor(){this.onDidChangeConfiguration=t.Event.None,this.configurationModel=new p.ConfigurationModel}async initialize(){return this.configurationModel}}e.NullPolicyConfiguration=f;let v=class extends k.Disposable{get configurationModel(){return this._configurationModel}constructor(S,g,h){super(),this.defaultConfiguration=S,this.policyService=g,this.logService=h,this._onDidChangeConfiguration=this._register(new t.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=new p.ConfigurationModel}async initialize(){return this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this._register(this.policyService.onDidChange(S=>this.onDidChangePolicies(S))),this._register(this.defaultConfiguration.onDidChangeConfiguration(async({properties:S})=>this.update(await this.updatePolicyDefinitions(S),!0))),this._configurationModel}async updatePolicyDefinitions(S){const g={},h=[],l=E.Registry.as(m.Extensions.Configuration).getConfigurationProperties();for(const i of S){const s=l[i];if(!s){h.push(i);continue}if(s.policy){if(s.type!=="string"&&s.type!=="number"){this.logService.warn(`Policy ${s.policy.name} has unsupported type ${s.type}`);continue}h.push(i),g[s.policy.name]={type:s.type}}}return(0,R.isEmptyObject)(g)||await this.policyService.updatePolicyDefinitions(g),h}onDidChangePolicies(S){const g=E.Registry.as(m.Extensions.Configuration).getPolicyConfigurations(),h=(0,C.coalesce)(S.map(l=>g.get(l)));this.update(h,!0)}update(S,g){const h=E.Registry.as(m.Extensions.Configuration).getConfigurationProperties(),l=[],i=this._configurationModel.isEmpty();for(const s of S){const n=h[s]?.policy?.name;if(n){const a=this.policyService.getPolicyValue(n);(i?a!==void 0:!(0,L.equals)(this._configurationModel.getValue(s),a))&&l.push([s,a])}else this._configurationModel.getValue(s)!==void 0&&l.push([s,void 0])}if(l.length){const s=this._configurationModel;this._configurationModel=new p.ConfigurationModel;for(const n of s.keys)this._configurationModel.setValue(n,s.getValue(n));for(const[n,a]of l)a===void 0?this._configurationModel.removeValue(n):this._configurationModel.setValue(n,a);g&&this._onDidChangeConfiguration.fire(this._configurationModel)}}};v=we([ie(1,I.IPolicyService),ie(2,y.ILogService)],v),e.PolicyConfiguration=v}),define(ee[219],te([0,1,8,3,2,20,18,110,218,37]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationService=void 0;class y extends k.Disposable{constructor(E,d,w,f){super(),this.settingsResource=E,this._onDidChangeConfiguration=this._register(new t.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.defaultConfiguration=this._register(new p.DefaultConfiguration),this.policyConfiguration=w instanceof m.NullPolicyService?new p.NullPolicyConfiguration:this._register(new p.PolicyConfiguration(this.defaultConfiguration,w,f)),this.userConfiguration=this._register(new P.UserSettings(this.settingsResource,void 0,L.extUriBiasedIgnorePathCase,d)),this.configuration=new P.Configuration(this.defaultConfiguration.configurationModel,this.policyConfiguration.configurationModel,new P.ConfigurationModel,new P.ConfigurationModel),this.reloadConfigurationScheduler=this._register(new C.RunOnceScheduler(()=>this.reloadConfiguration(),50)),this._register(this.defaultConfiguration.onDidChangeConfiguration(({defaults:v,properties:u})=>this.onDidDefaultConfigurationChange(v,u))),this._register(this.policyConfiguration.onDidChangeConfiguration(v=>this.onDidPolicyConfigurationChange(v))),this._register(this.userConfiguration.onDidChange(()=>this.reloadConfigurationScheduler.schedule()))}async initialize(){const[E,d,w]=await Promise.all([this.defaultConfiguration.initialize(),this.policyConfiguration.initialize(),this.userConfiguration.loadConfiguration()]);this.configuration=new P.Configuration(E,d,new P.ConfigurationModel,w)}getConfigurationData(){return this.configuration.toData()}getValue(E,d){const w=typeof E=="string"?E:void 0,f=(0,R.isConfigurationOverrides)(E)?E:(0,R.isConfigurationOverrides)(d)?d:{};return this.configuration.getValue(w,f,void 0)}updateValue(E,d,w,f){return Promise.reject(new Error("not supported"))}inspect(E){return this.configuration.inspect(E,{},void 0)}keys(){return this.configuration.keys(void 0)}async reloadConfiguration(){const E=await this.userConfiguration.loadConfiguration();this.onDidChangeUserConfiguration(E)}onDidChangeUserConfiguration(E){const d=this.configuration.toData(),w=this.configuration.compareAndUpdateLocalUserConfiguration(E);this.trigger(w,d,2)}onDidDefaultConfigurationChange(E,d){const w=this.configuration.toData(),f=this.configuration.compareAndUpdateDefaultConfiguration(E,d);this.trigger(f,w,7)}onDidPolicyConfigurationChange(E){const d=this.configuration.toData(),w=this.configuration.compareAndUpdatePolicyConfiguration(E);this.trigger(w,d,7)}trigger(E,d,w){const f=new P.ConfigurationChangeEvent(E,{data:d},this.configuration);f.source=w,f.sourceConfig=this.getTargetConfiguration(w),this._onDidChangeConfiguration.fire(f)}getTargetConfiguration(E){switch(E){case 7:return this.configuration.defaults.contents;case 2:return this.configuration.localUserConfiguration.contents}return{}}}e.ConfigurationService=y}),define(ee[220],te([0,1,15,5]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteAuthorityResolverError=e.RemoteAuthorityResolverErrorCode=e.IRemoteAuthorityResolverService=void 0,e.IRemoteAuthorityResolverService=(0,t.createDecorator)("remoteAuthorityResolverService");var k;(function(R){R.Unknown="Unknown",R.NotAvailable="NotAvailable",R.TemporarilyNotAvailable="TemporarilyNotAvailable",R.NoResolverFound="NoResolverFound"})(k=e.RemoteAuthorityResolverErrorCode||(e.RemoteAuthorityResolverErrorCode={}));class L extends C.ErrorNoTelemetry{static isNotAvailable(P){return P instanceof L&&P._code===k.NotAvailable}static isTemporarilyNotAvailable(P){return P instanceof L&&P._code===k.TemporarilyNotAvailable}static isNoResolverFound(P){return P instanceof L&&P._code===k.NoResolverFound}static isHandled(P){return P instanceof L&&P.isHandled}constructor(P,p=k.Unknown,m){super(P),this._message=P,this._code=p,this._detail=m,this.isHandled=p===k.NotAvailable&&m===!0,Object.setPrototypeOf(this,L.prototype)}}e.RemoteAuthorityResolverError=L}),define(ee[54],te([0,1,14]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseAuthorityWithOptionalPort=e.parseAuthorityWithPort=e.getRemoteServerRootPath=e.getRemoteName=e.getRemoteAuthority=void 0;function t(m){return m.scheme===C.Schemas.vscodeRemote?m.authority:void 0}e.getRemoteAuthority=t;function k(m){if(!m)return;const y=m.indexOf("+");return y<0?m:m.substr(0,y)}e.getRemoteName=k;function L(m){return`/${m.quality??"oss"}-${m.commit??"dev"}`}e.getRemoteServerRootPath=L;function R(m){const{host:y,port:I}=p(m);if(typeof I>"u")throw new Error("Remote authority doesn't contain a port!");return{host:y,port:I}}e.parseAuthorityWithPort=R;function P(m,y){let{host:I,port:E}=p(m);return typeof E>"u"&&(E=y),{host:I,port:E}}e.parseAuthorityWithOptionalPort=P;function p(m){const y=m.match(/^(\[[0-9a-z:]+\]):(\d+)$/);if(y)return{host:y[1],port:parseInt(y[2],10)};const I=m.match(/^(\[[0-9a-z:]+\])$/);if(I)return{host:I[1],port:void 0};const E=m.match(/(.*):(\d+)$/);return E?{host:E[1],port:parseInt(E[2],10)}:{host:m,port:void 0}}}),define(ee[87],te([0,1,26,5,54]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IBuiltinExtensionsScannerService=e.isResolverExtension=e.isAuthenticationProviderExtension=e.isLanguagePackExtension=e.isApplicationScopedExtension=e.ExtensionIdentifier=e.TargetPlatform=e.ExtensionType=e.EXTENSION_CATEGORIES=e.isIExtensionIdentifier=e.getWorkspaceSupportTypeMessage=e.ALL_EXTENSION_KINDS=e.UNDEFINED_PUBLISHER=e.BUILTIN_MANIFEST_CACHE_FILE=e.USER_MANIFEST_CACHE_FILE=e.MANIFEST_CACHE_FOLDER=void 0,e.MANIFEST_CACHE_FOLDER="CachedExtensions",e.USER_MANIFEST_CACHE_FILE="user",e.BUILTIN_MANIFEST_CACHE_FILE="builtin",e.UNDEFINED_PUBLISHER="undefined_publisher",e.ALL_EXTENSION_KINDS=["ui","workspace","web"];function L(w){if(typeof w=="object"&&w!==null&&w.supported!==!0)return w.description}e.getWorkspaceSupportTypeMessage=L;function R(w){return w&&typeof w=="object"&&typeof w.id=="string"&&(!w.uuid||typeof w.uuid=="string")}e.isIExtensionIdentifier=R,e.EXTENSION_CATEGORIES=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var P;(function(w){w[w.System=0]="System",w[w.User=1]="User"})(P=e.ExtensionType||(e.ExtensionType={}));var p;(function(w){w.WIN32_X64="win32-x64",w.WIN32_IA32="win32-ia32",w.WIN32_ARM64="win32-arm64",w.LINUX_X64="linux-x64",w.LINUX_ARM64="linux-arm64",w.LINUX_ARMHF="linux-armhf",w.ALPINE_X64="alpine-x64",w.ALPINE_ARM64="alpine-arm64",w.DARWIN_X64="darwin-x64",w.DARWIN_ARM64="darwin-arm64",w.WEB="web",w.UNIVERSAL="universal",w.UNKNOWN="unknown",w.UNDEFINED="undefined"})(p=e.TargetPlatform||(e.TargetPlatform={}));class m{constructor(f){this.value=f,this._lower=f.toLowerCase()}static equals(f,v){if(typeof f>"u"||f===null)return typeof v>"u"||v===null;if(typeof v>"u"||v===null)return!1;if(typeof f=="string"||typeof v=="string"){const u=typeof f=="string"?f:f.value,S=typeof v=="string"?v:v.value;return C.equalsIgnoreCase(u,S)}return f._lower===v._lower}static toKey(f){return typeof f=="string"?f.toLowerCase():f._lower}}e.ExtensionIdentifier=m;function y(w){return I(w)}e.isApplicationScopedExtension=y;function I(w){return w.contributes&&w.contributes.localizations?w.contributes.localizations.length>0:!1}e.isLanguagePackExtension=I;function E(w){return w.contributes&&w.contributes.authentication?w.contributes.authentication.length>0:!1}e.isAuthenticationProviderExtension=E;function d(w,f){if(f){const v=`onResolveRemoteAuthority:${(0,k.getRemoteName)(f)}`;return w.activationEvents?.indexOf(v)!==-1}return!1}e.isResolverExtension=d,e.IBuiltinExtensionsScannerService=(0,t.createDecorator)("IBuiltinExtensionsScannerService")}),define(ee[111],te([0,1,26,192,87,4,7,15,33]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeTargetPlatform=e.isAlpineLinux=e.getExtensionDependencies=e.BetterMergeId=e.getGalleryExtensionTelemetryData=e.getLocalExtensionTelemetryData=e.groupByExtension=e.getGalleryExtensionId=e.adoptToGalleryExtensionId=e.getExtensionId=e.getIdAndVersion=e.ExtensionKey=e.areSameExtensions=void 0;function m(s,n){return s.uuid&&n.uuid?s.uuid===n.uuid:s.id===n.id?!0:(0,C.compareIgnoreCase)(s.id,n.id)===0}e.areSameExtensions=m;const y=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class I{static create(n){const a=n.manifest?n.manifest.version:n.version,r=n.manifest?n.targetPlatform:n.properties.targetPlatform;return new I(n.identifier,a,r)}static parse(n){const a=y.exec(n);return a&&a[1]&&a[2]?new I({id:a[1]},a[2],a[4]||void 0):null}constructor(n,a,r="undefined"){this.version=a,this.targetPlatform=r,this.id=n.id}toString(){return`${this.id}-${this.version}${this.targetPlatform!=="undefined"?`-${this.targetPlatform}`:""}`}equals(n){return n instanceof I?m(this,n)&&this.version===n.version&&this.targetPlatform===n.targetPlatform:!1}}e.ExtensionKey=I;const E=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function d(s){const n=E.exec(s);return n&&n[1]?[f(n[1]),n[2]]:[f(s),void 0]}e.getIdAndVersion=d;function w(s,n){return`${s}.${n}`}e.getExtensionId=w;function f(s){return s.toLocaleLowerCase()}e.adoptToGalleryExtensionId=f;function v(s,n){return f(w(s,n))}e.getGalleryExtensionId=v;function u(s,n){const a=[],r=c=>{for(const o of a)if(o.some(b=>m(n(b),n(c))))return o;return null};for(const c of s){const o=r(c);o?o.push(c):a.push([c])}return a}e.groupByExtension=u;function S(s){return{id:s.identifier.id,name:s.manifest.name,galleryId:null,publisherId:s.publisherId,publisherName:s.manifest.publisher,publisherDisplayName:s.publisherDisplayName,dependencies:s.manifest.extensionDependencies&&s.manifest.extensionDependencies.length>0}}e.getLocalExtensionTelemetryData=S;function g(s){return{id:s.identifier.id,name:s.name,galleryId:s.identifier.uuid,publisherId:s.publisherId,publisherName:s.publisher,publisherDisplayName:s.publisherDisplayName,isPreReleaseVersion:s.properties.isPreReleaseVersion,dependencies:!!(s.properties.dependencies&&s.properties.dependencies.length>0),isSigned:s.isSigned,...s.telemetryData}}e.getGalleryExtensionTelemetryData=g,e.BetterMergeId=new k.ExtensionIdentifier("pprice.better-merge");function h(s,n){const a=[],r=n.manifest.extensionDependencies?.slice(0)??[];for(;r.length;){const c=r.shift();if(c&&a.every(o=>!m(o.identifier,{id:c}))){const o=s.filter(b=>m(b.identifier,{id:c}));o.length===1&&(a.push(o[0]),r.push(...o[0].manifest.extensionDependencies?.slice(0)??[]))}}return a}e.getExtensionDependencies=h;async function l(s,n){if(!L.isLinux)return!1;let a;try{a=(await s.readFile(R.URI.file("/etc/os-release"))).value.toString()}catch{try{a=(await s.readFile(R.URI.file("/usr/lib/os-release"))).value.toString()}catch(c){n.debug("Error while getting the os-release file.",(0,P.getErrorMessage)(c))}}return!!a&&(a.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}e.isAlpineLinux=l;async function i(s,n){const a=await l(s,n),r=(0,t.getTargetPlatform)(a?"alpine":L.platform,p.arch);return n.debug("ComputeTargetPlatform:",r),r}e.computeTargetPlatform=i}),define(ee[221],te([0,1,8,17,22,15,3,2,29,102,220,54]),function(j,e,C,t,k,L,R,P,p,m,y,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionHostPersistentConnection=e.ManagementPersistentConnection=e.PersistentConnection=e.ReconnectionPermanentFailureEvent=e.ConnectionGainEvent=e.ReconnectionRunningEvent=e.ReconnectionWaitEvent=e.ConnectionLostEvent=e.PersistentConnectionEventType=e.connectRemoteAgentTunnel=e.connectRemoteAgentExtensionHost=e.connectRemoteAgentManagement=e.ConnectionType=void 0;const E=30*1e3;var d;(function($){$[$.Management=1]="Management",$[$.ExtensionHost=2]="ExtensionHost",$[$.Tunnel=3]="Tunnel"})(d=e.ConnectionType||(e.ConnectionType={}));function w($){switch($){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function f($){const z=new k.CancellationTokenSource;return setTimeout(()=>z.cancel(),$),z.token}function v($,z){if($.isCancellationRequested||z.isCancellationRequested)return k.CancellationToken.Cancelled;const M=new k.CancellationTokenSource;return $.onCancellationRequested(()=>M.cancel()),z.onCancellationRequested(()=>M.cancel()),M.token}class u{get didTimeout(){return this._state==="timedout"}constructor(z){this._state="pending",this._disposables=new P.DisposableStore,this.promise=new Promise((M,T)=>{this._resolvePromise=M,this._rejectPromise=T}),z.isCancellationRequested?this._timeout():this._disposables.add(z.onCancellationRequested(()=>this._timeout()))}registerDisposable(z){this._state==="pending"?this._disposables.add(z):z.dispose()}_timeout(){this._state==="pending"&&(this._disposables.dispose(),this._state="timedout",this._rejectPromise(this._createTimeoutError()))}_createTimeoutError(){const z=new Error("Time limit reached");return z.code="ETIMEDOUT",z.syscall="connect",z}resolve(z){this._state==="pending"&&(this._disposables.dispose(),this._state="resolved",this._resolvePromise(z))}reject(z){this._state==="pending"&&(this._disposables.dispose(),this._state="rejected",this._rejectPromise(z))}}function S($,z){const M=new u(z);return M.registerDisposable($.onControlMessage(T=>{const F=JSON.parse(T.toString()),_=W(F);_?M.reject(_):M.resolve(F)})),M.promise}function g($,z,M,T,F,_,q,Y){const B=new u(Y);return z.connect(M,T,F,_,q,(X,J)=>{B.didTimeout?(X&&$.error(X),J?.dispose()):X||!J?B.reject(X):B.resolve(J)}),B.promise}function h($,z){const M=new u(z);return $.then(T=>{M.didTimeout||M.resolve(T)},T=>{M.didTimeout||M.reject(T)}),M.promise}async function l($,z,M,T){const F=H($,z);$.logService.trace(`${F} 1/6. invoking socketFactory.connect().`);let _;try{_=await g($.logService,$.socketFactory,$.host,$.port,(0,I.getRemoteServerRootPath)($),`reconnectionToken=${$.reconnectionToken}&reconnection=${$.reconnectionProtocol?"true":"false"}`,`renderer-${w(z)}-${$.reconnectionToken}`,T)}catch(J){throw $.logService.error(`${F} socketFactory.connect() failed or timed out. Error:`),$.logService.error(J),J}$.logService.trace(`${F} 2/6. socketFactory.connect() was successful.`);let q,Y;$.reconnectionProtocol?($.reconnectionProtocol.beginAcceptReconnection(_,null),q=$.reconnectionProtocol,Y=!1):(q=new m.PersistentProtocol(_,null),Y=!0),$.logService.trace(`${F} 3/6. sending AuthRequest control message.`);const B=await h($.signService.createNewMessage((0,p.generateUuid)()),T),X={type:"auth",auth:$.connectionToken||"00000000000000000000",data:B.data};q.sendControl(t.VSBuffer.fromString(JSON.stringify(X)));try{const J=await S(q,v(T,f(1e4)));if(J.type!=="sign"||typeof J.data!="string"){const Te=new Error("Unexpected handshake message");throw Te.code="VSCODE_CONNECTION_ERROR",Te}if($.logService.trace(`${F} 4/6. received SignRequest control message.`),!await h($.signService.validate(B,J.signedData),T)){const Te=new Error("Refused to connect to unsupported server");throw Te.code="VSCODE_CONNECTION_ERROR",Te}const ge=await h($.signService.sign(J.data),T),De={type:"connectionType",commit:$.commit,signedData:ge,desiredConnectionType:z};return M&&(De.args=M),$.logService.trace(`${F} 5/6. sending ConnectionTypeRequest control message.`),q.sendControl(t.VSBuffer.fromString(JSON.stringify(De))),{protocol:q,ownsProtocol:Y}}catch(J){throw J&&J.code==="ETIMEDOUT"&&($.logService.error(`${F} the handshake timed out. Error:`),$.logService.error(J)),J&&J.code==="VSCODE_CONNECTION_ERROR"&&($.logService.error(`${F} received error control message when negotiating connection. Error:`),$.logService.error(J)),Y&&le(q),J}}async function i($,z,M,T){const F=Date.now(),_=H($,z),{protocol:q,ownsProtocol:Y}=await l($,z,M,T),B=new u(T);return B.registerDisposable(q.onControlMessage(X=>{const J=JSON.parse(X.toString()),oe=W(J);oe?($.logService.error(`${_} received error control message when negotiating connection. Error:`),$.logService.error(oe),Y&&le(q),B.reject(oe)):($.reconnectionProtocol?.endAcceptReconnection(),$.logService.trace(`${_} 6/6. handshake finished, connection is up and running after ${se(F)}!`),B.resolve({protocol:q,firstMessage:J}))})),B.promise}async function s($,z){const{protocol:M}=await i($,1,void 0,z);return{protocol:M}}async function n($,z,M){const{protocol:T,firstMessage:F}=await i($,2,z,M),_=F&&F.debugPort;return{protocol:T,debugPort:_}}async function a($,z,M){const T=Date.now(),F=H($,3),{protocol:_}=await l($,3,z,M);return $.logService.trace(`${F} 6/6. handshake finished, connection is up and running after ${se(T)}!`),_}async function r($,z,M){const{host:T,port:F,connectionToken:_}=await $.addressProvider.getAddress();return{commit:$.commit,quality:$.quality,host:T,port:F,connectionToken:_,reconnectionToken:z,reconnectionProtocol:M,socketFactory:$.socketFactory,signService:$.signService,logService:$.logService}}async function c($,z,M){return b($,async T=>{const{protocol:F}=await s(T,k.CancellationToken.None);return new fe($,z,M,T.reconnectionToken,F)})}e.connectRemoteAgentManagement=c;async function o($,z){return b($,async M=>{const{protocol:T,debugPort:F}=await n(M,z,k.CancellationToken.None);return new K($,z,M.reconnectionToken,T,F)})}e.connectRemoteAgentExtensionHost=o;async function b($,z){for(let T=1;;T++)try{const F=(0,p.generateUuid)(),_=await r($,F,null);return await z(_)}catch(F){if(T<5)$.logService.error(`[remote-connection][attempt ${T}] An error occurred in initial connection! Will retry... Error:`),$.logService.error(F);else throw $.logService.error(`[remote-connection][attempt ${T}]  An error occurred in initial connection! It will be treated as a permanent error. Error:`),$.logService.error(F),ne.triggerPermanentFailure(0,0,y.RemoteAuthorityResolverError.isHandled(F)),F}}async function D($,z,M){const T=await r($,(0,p.generateUuid)(),null);return await a(T,{host:z,port:M},k.CancellationToken.None)}e.connectRemoteAgentTunnel=D;function A($){return(0,C.createCancelablePromise)(z=>new Promise((M,T)=>{const F=setTimeout(M,$*1e3);z.onCancellationRequested(()=>{clearTimeout(F),M()})}))}var N;(function($){$[$.ConnectionLost=0]="ConnectionLost",$[$.ReconnectionWait=1]="ReconnectionWait",$[$.ReconnectionRunning=2]="ReconnectionRunning",$[$.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",$[$.ConnectionGain=4]="ConnectionGain"})(N=e.PersistentConnectionEventType||(e.PersistentConnectionEventType={}));class G{constructor(z,M){this.reconnectionToken=z,this.millisSinceLastIncomingData=M,this.type=0}}e.ConnectionLostEvent=G;class ae{constructor(z,M,T,F){this.reconnectionToken=z,this.millisSinceLastIncomingData=M,this.durationSeconds=T,this.cancellableTimer=F,this.type=1}skipWait(){this.cancellableTimer.cancel()}}e.ReconnectionWaitEvent=ae;class x{constructor(z,M,T){this.reconnectionToken=z,this.millisSinceLastIncomingData=M,this.attempt=T,this.type=2}}e.ReconnectionRunningEvent=x;class Q{constructor(z,M,T){this.reconnectionToken=z,this.millisSinceLastIncomingData=M,this.attempt=T,this.type=4}}e.ConnectionGainEvent=Q;class re{constructor(z,M,T,F){this.reconnectionToken=z,this.millisSinceLastIncomingData=M,this.attempt=T,this.handled=F,this.type=3}}e.ReconnectionPermanentFailureEvent=re;class ne extends P.Disposable{static triggerPermanentFailure(z,M,T){this._permanentFailure=!0,this._permanentFailureMillisSinceLastIncomingData=z,this._permanentFailureAttempt=M,this._permanentFailureHandled=T,this._instances.forEach(F=>F._gotoPermanentFailure(this._permanentFailureMillisSinceLastIncomingData,this._permanentFailureAttempt,this._permanentFailureHandled))}static debugTriggerReconnection(){this._instances.forEach(z=>z._beginReconnecting())}static debugPauseSocketWriting(){this._instances.forEach(z=>z._pauseSocketWriting())}get _isPermanentFailure(){return this._permanentFailure||ne._permanentFailure}constructor(z,M,T,F,_){super(),this._connectionType=z,this._options=M,this.reconnectionToken=T,this.protocol=F,this._reconnectionFailureIsFatal=_,this._onDidStateChange=this._register(new R.Emitter),this.onDidStateChange=this._onDidStateChange.event,this._permanentFailure=!1,this._isReconnecting=!1,this._onDidStateChange.fire(new Q(this.reconnectionToken,0,0)),this._register(F.onSocketClose(q=>{const Y=U(this._connectionType,this.reconnectionToken,!0);q?q.type===0?(this._options.logService.info(`${Y} received socket close event (hadError: ${q.hadError}).`),q.error&&this._options.logService.error(q.error)):(this._options.logService.info(`${Y} received socket close event (wasClean: ${q.wasClean}, code: ${q.code}, reason: ${q.reason}).`),q.event&&this._options.logService.error(q.event)):this._options.logService.info(`${Y} received socket close event.`),this._beginReconnecting()})),this._register(F.onSocketTimeout(q=>{const Y=U(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${Y} received socket timeout event (unacknowledgedMsgCount: ${q.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${q.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${q.timeSinceLastReceivedSomeData}).`),this._beginReconnecting()})),ne._instances.push(this),this._register((0,P.toDisposable)(()=>{const q=ne._instances.indexOf(this);q>=0&&ne._instances.splice(q,1)})),this._isPermanentFailure&&this._gotoPermanentFailure(ne._permanentFailureMillisSinceLastIncomingData,ne._permanentFailureAttempt,ne._permanentFailureHandled)}async _beginReconnecting(){if(!this._isReconnecting)try{this._isReconnecting=!0,await this._runReconnectingLoop()}finally{this._isReconnecting=!1}}async _runReconnectingLoop(){if(this._isPermanentFailure)return;const z=U(this._connectionType,this.reconnectionToken,!0);this._options.logService.info(`${z} starting reconnecting loop. You can get more information with the trace log level.`),this._onDidStateChange.fire(new G(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const M=[0,5,5,10,10,10,10,10,30];let T=-1;do{T++;const F=T<M.length?M[T]:M[M.length-1];try{if(F>0){const q=A(F);this._onDidStateChange.fire(new ae(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),F,q)),this._options.logService.info(`${z} waiting for ${F} seconds before reconnecting...`);try{await q}catch{}}if(this._isPermanentFailure){this._options.logService.error(`${z} permanent failure occurred while running the reconnecting loop.`);break}this._onDidStateChange.fire(new x(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),T+1)),this._options.logService.info(`${z} resolving connection...`);const _=await r(this._options,this.reconnectionToken,this.protocol);this._options.logService.info(`${z} connecting to ${_.host}:${_.port}...`),await this._reconnect(_,f(E)),this._options.logService.info(`${z} reconnected!`),this._onDidStateChange.fire(new Q(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),T+1));break}catch(_){if(_.code==="VSCODE_CONNECTION_ERROR"){this._options.logService.error(`${z} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this._options.logService.error(_),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),T+1,!1);break}if(T>360){this._options.logService.error(`${z} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this._options.logService.error(_),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),T+1,!1);break}if(y.RemoteAuthorityResolverError.isTemporarilyNotAvailable(_)){this._options.logService.info(`${z} A temporarily not available error occurred while trying to reconnect, will try again...`),this._options.logService.trace(_);continue}if((_.code==="ETIMEDOUT"||_.code==="ENETUNREACH"||_.code==="ECONNREFUSED"||_.code==="ECONNRESET")&&_.syscall==="connect"){this._options.logService.info(`${z} A network error occurred while trying to reconnect, will try again...`),this._options.logService.trace(_);continue}if((0,L.isCancellationError)(_)){this._options.logService.info(`${z} A promise cancelation error occurred while trying to reconnect, will try again...`),this._options.logService.trace(_);continue}if(_ instanceof y.RemoteAuthorityResolverError){this._options.logService.error(`${z} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this._options.logService.error(_),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),T+1,y.RemoteAuthorityResolverError.isHandled(_));break}this._options.logService.error(`${z} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this._options.logService.error(_),this._onReconnectionPermanentFailure(this.protocol.getMillisSinceLastIncomingData(),T+1,!1);break}}while(!this._isPermanentFailure)}_onReconnectionPermanentFailure(z,M,T){this._reconnectionFailureIsFatal?ne.triggerPermanentFailure(z,M,T):this._gotoPermanentFailure(z,M,T)}_gotoPermanentFailure(z,M,T){this._onDidStateChange.fire(new re(this.reconnectionToken,z,M,T)),le(this.protocol)}_pauseSocketWriting(){this.protocol.pauseSocketWriting()}}e.PersistentConnection=ne,ne._permanentFailure=!1,ne._permanentFailureMillisSinceLastIncomingData=0,ne._permanentFailureAttempt=0,ne._permanentFailureHandled=!1,ne._instances=[];class fe extends ne{constructor(z,M,T,F,_){super(1,z,F,_,!0),this.client=this._register(new m.Client(_,{remoteAuthority:M,clientId:T},z.ipcLogger))}async _reconnect(z,M){await s(z,M)}}e.ManagementPersistentConnection=fe;class K extends ne{constructor(z,M,T,F,_){super(2,z,T,F,!1),this._startArguments=M,this.debugPort=_}async _reconnect(z,M){await n(z,this._startArguments,M)}}e.ExtensionHostPersistentConnection=K;function le($){try{$.acceptDisconnect();const z=$.getSocket();$.dispose(),z.dispose()}catch(z){(0,L.onUnexpectedError)(z)}}function W($){if($&&$.type==="error"){const z=new Error(`Connection error: ${$.reason}`);return z.code="VSCODE_CONNECTION_ERROR",z}return null}function O($,z){for(;$.length<z;)$+=" ";return $}function U($,z,M){return`[remote-connection][${O(w($),13)}][${z.substr(0,5)}\u2026][${M?"reconnect":"initial"}]`}function H($,z){return`${U(z,$.reconnectionToken,!!$.reconnectionProtocol)}[${$.host}:${$.port}]`}function se($){return`${Date.now()-$} ms`}}),define(ee[222],te([0,1,78,83]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nodeSocketFactory=void 0,e.nodeSocketFactory=new class{connect(k,L,R,P,p,m){const y=E=>m(E,void 0),I=C.createConnection({host:k,port:L},()=>{I.removeListener("error",y);const E=Buffer.alloc(16);for(let v=0;v<16;v++)E[v]=Math.round(Math.random()*256);const d=E.toString("base64"),w=[`GET ws://${/:/.test(k)?`[${k}]`:k}:${L}${R}?${P}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${d}`];I.write(w.join(`\r
`)+`\r
\r
`);const f=v=>{v.toString().indexOf(`\r
\r
`)>=0&&(I.off("data",f),m(void 0,new t.NodeSocket(I,p)))};I.on("data",f)});I.setNoDelay(!0),I.once("error",y)}}}),define(ee[223],te([0,1,25,46,40,182]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasWSLFeatureInstalled=void 0;let R;async function P(d=!1){return(R===void 0||d)&&(R=p()),R}e.hasWSLFeatureInstalled=P;async function p(){const d=m();if(d===void 0)return!1;if(d>=22e3){const w=I();if(w)return new Promise(f=>{t.execFile(w,["--status"],v=>f(!v))})}else{const w=E();if(w)try{if((await k.promises.stat(w)).isFile())return!0}catch{}}return!1}function m(){const d=/(\d+)\.(\d+)\.(\d+)/g.exec(C.release());if(d)return parseInt(d[3])}function y(d){const w=process.env.SystemRoot;if(w){const f=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");return L.join(w,f?"Sysnative":"System32",d)}}function I(){return y("wsl.exe")}function E(){return y("lxss\\LxssManager.dll")}}),define(ee[55],te([0,1,17,167,65,5,48]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateProxyConfigurationsScope=e.asJson=e.asTextOrError=e.asText=e.isSuccess=e.IRequestService=void 0,e.IRequestService=(0,L.createDecorator)("requestService");function P(f){return f.res.statusCode&&f.res.statusCode>=200&&f.res.statusCode<300||f.res.statusCode===1223}e.isSuccess=P;function p(f){return f.res.statusCode===204}async function m(f){return p(f)?null:(await(0,C.streamToBuffer)(f.stream)).toString()}e.asText=m;async function y(f){if(!P(f))throw new Error("Server returned "+f.res.statusCode);return m(f)}e.asTextOrError=y;async function I(f){if(!P(f))throw new Error("Server returned "+f.res.statusCode);if(p(f))return null;const u=(await(0,C.streamToBuffer)(f.stream)).toString();try{return JSON.parse(u)}catch(S){throw S.message+=`:
`+u,S}}e.asJson=I;function E(f){w(f)}e.updateProxyConfigurationsScope=E;let d;function w(f){const v=R.Registry.as(k.Extensions.Configuration),u=d;d={id:"http",order:15,title:(0,t.localize)(0,null),type:"object",scope:f,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks5?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:(0,t.localize)(1,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:(0,t.localize)(2,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:(0,t.localize)(3,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[(0,t.localize)(4,null),(0,t.localize)(5,null),(0,t.localize)(6,null),(0,t.localize)(7,null)],default:"override",description:(0,t.localize)(8,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:(0,t.localize)(9,null),restricted:!0}}},v.updateConfigurations({add:[d],remove:u?[u]:[]})}w(2)}),define(ee[224],te([0,1,17,22]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestChannelClient=e.RequestChannel=void 0;class k{constructor(P){this.service=P}listen(P,p){throw new Error("Invalid listen")}call(P,p,m,y=t.CancellationToken.None){switch(p){case"request":return this.service.request(m[0],y).then(async({res:I,stream:E})=>{const d=await(0,C.streamToBuffer)(E);return[{statusCode:I.statusCode,headers:I.headers},d]});case"resolveProxy":return this.service.resolveProxy(m[0])}throw new Error("Invalid call")}}e.RequestChannel=k;class L{constructor(P){this.channel=P}async request(P,p){const[m,y]=await this.channel.call("request",[P],p);return{res:m,stream:(0,C.bufferToStream)(y)}}async resolveProxy(P){return this.channel.call("resolveProxy",[P])}}e.RequestChannelClient=L}),define(ee[225],te([0,1,226,12]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getProxyAgent=void 0;function k(R,P){return R.protocol==="http:"?P.HTTP_PROXY||P.http_proxy||null:R.protocol==="https:"&&(P.HTTPS_PROXY||P.https_proxy||P.HTTP_PROXY||P.http_proxy)||null}async function L(R,P,p={}){const m=(0,C.parse)(R),y=p.proxyUrl||k(m,P);if(!y)return null;const I=(0,C.parse)(y);if(!/^https?:$/.test(I.protocol||""))return null;const E={host:I.hostname||"",port:I.port||(I.protocol==="https"?"443":"80"),auth:I.auth,rejectUnauthorized:(0,t.isBoolean)(p.strictSSL)?p.strictSSL:!0};return m.protocol==="http:"?new(await new Promise((d,w)=>{j(["http-proxy-agent"],d,w)}))(E):new(await new Promise((d,w)=>{j(["https-proxy-agent"],d,w)}))(E)}e.getProxyAgent=L}),define(ee[112],te([0,1,46,9,168,22,45,15,4,29,144,61,8]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getResolvedShellEnv=void 0;const d=1e4;let w;async function f(u,S,g){return S["force-disable-user-env"]?(u.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):p.isWindows?(u.trace("resolveShellEnv(): skipped (Windows)"),{}):(0,I.isLaunchedFromCli)(g)&&!S["force-user-env"]?(u.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):((0,I.isLaunchedFromCli)(g)?u.trace("resolveShellEnv(): running (--force-user-env)"):u.trace("resolveShellEnv(): running (macOS/Linux)"),w||(w=E.Promises.withAsyncBody(async(h,l)=>{const i=new L.CancellationTokenSource,s=setTimeout(()=>{i.dispose(!0),l(new Error((0,k.localize)(0,null)))},d);try{h(await v(u,i.token))}catch(n){!(0,P.isCancellationError)(n)&&!i.token.isCancellationRequested?l(new Error((0,k.localize)(1,null,(0,R.toErrorMessage)(n)))):h({})}finally{clearTimeout(s),i.dispose()}})),w)}e.getResolvedShellEnv=f;async function v(u,S){const g=process.env.ELECTRON_RUN_AS_NODE;u.trace("getUnixShellEnvironment#runAsNode",g);const h=process.env.ELECTRON_NO_ATTACH_CONSOLE;u.trace("getUnixShellEnvironment#noAttach",h);const l=(0,m.generateUuid)().replace(/-/g,"").substr(0,12),i=new RegExp(l+"(.*)"+l),s={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1"};u.trace("getUnixShellEnvironment#env",s);const n=await(0,y.getSystemShell)(p.OS,s);return u.trace("getUnixShellEnvironment#shell",n),new Promise((a,r)=>{if(S.isCancellationRequested)return r((0,P.canceled)());const c=(0,t.basename)(n);let o,b;const D=process.versions.electron&&process.versions["microsoft-build"]?"--ms-enable-electron-run-as-node":"";/^pwsh(-preview)?$/.test(c)?(o=`& '${process.execPath}' ${D} -p '''${l}'' + JSON.stringify(process.env) + ''${l}'''`,b=["-Login","-Command"]):(o=`'${process.execPath}' ${D} -p '"${l}" + JSON.stringify(process.env) + "${l}"'`,c==="tcsh"?b=["-ic"]:b=["-ilc"]),u.trace("getUnixShellEnvironment#spawn",JSON.stringify(b),o);const A=(0,C.spawn)(n,[...b,o],{detached:!0,stdio:["ignore","pipe","pipe"],env:s});S.onCancellationRequested(()=>(A.kill(),r((0,P.canceled)()))),A.on("error",ae=>{u.error("getUnixShellEnvironment#errorChildProcess",(0,R.toErrorMessage)(ae)),r(ae)});const N=[];A.stdout.on("data",ae=>N.push(ae));const G=[];A.stderr.on("data",ae=>G.push(ae)),A.on("close",(ae,x)=>{const Q=Buffer.concat(N).toString("utf8");u.trace("getUnixShellEnvironment#raw",Q);const re=Buffer.concat(G).toString("utf8");if(re.trim()&&u.trace("getUnixShellEnvironment#stderr",re),ae||x)return r(new Error((0,k.localize)(2,null,ae,x)));const ne=i.exec(Q),fe=ne?ne[1]:"{}";try{const K=JSON.parse(fe);g?K.ELECTRON_RUN_AS_NODE=g:delete K.ELECTRON_RUN_AS_NODE,h?K.ELECTRON_NO_ATTACH_CONSOLE=h:delete K.ELECTRON_NO_ATTACH_CONSOLE,delete K.XDG_RUNTIME_DIR,u.trace("getUnixShellEnvironment#result",K),a(K)}catch(K){u.error("getUnixShellEnvironment#errorCaught",(0,R.toErrorMessage)(K)),r(K)}})})}}),define(ee[88],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISignService=e.SIGN_SERVICE_ID=void 0,e.SIGN_SERVICE_ID="signService",e.ISignService=(0,C.createDecorator)(e.SIGN_SERVICE_ID)}),define(ee[227],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignService=void 0;class C{constructor(){this.validators=new Map}vsda(){return new Promise((k,L)=>j(["vsda"],k,L))}async createNewMessage(k){try{const L=await this.vsda(),R=new L.validator;if(R){const P=String(C._nextId++);return this.validators.set(P,R),{id:P,data:R.createNewMessage(k)}}}catch{}return{id:"",data:k}}async validate(k,L){if(!k.id)return!0;const R=this.validators.get(k.id);if(!R)return!1;this.validators.delete(k.id);try{return R.validate(L)==="ok"}catch{return!1}}async sign(k){try{const L=await this.vsda(),R=new L.signer;if(R)return R.sign(k)}catch{}return k}}e.SignService=C,C._nextId=1}),define(ee[36],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IStateMainService=void 0,e.IStateMainService=(0,C.createDecorator)("stateMainService")}),define(ee[21],te([0,1,13,41,8,3,2,4,33,12,5,6,36,27]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleMainService=e.LifecycleMainPhase=e.ShutdownReason=e.ILifecycleMainService=void 0,e.ILifecycleMainService=(0,y.createDecorator)("lifecycleMainService");var w;(function(u){u[u.QUIT=1]="QUIT",u[u.KILL=2]="KILL"})(w=e.ShutdownReason||(e.ShutdownReason={}));var f;(function(u){u[u.Starting=1]="Starting",u[u.Ready=2]="Ready",u[u.AfterWindowOpen=3]="AfterWindowOpen",u[u.Eventually=4]="Eventually"})(f=e.LifecycleMainPhase||(e.LifecycleMainPhase={}));let v=class Ct extends R.Disposable{get quitRequested(){return this._quitRequested}get wasRestarted(){return this._wasRestarted}get phase(){return this._phase}constructor(S,g,h){super(),this.logService=S,this.stateMainService=g,this.environmentMainService=h,this._onBeforeShutdown=this._register(new L.Emitter),this.onBeforeShutdown=this._onBeforeShutdown.event,this._onWillShutdown=this._register(new L.Emitter),this.onWillShutdown=this._onWillShutdown.event,this._onWillLoadWindow=this._register(new L.Emitter),this.onWillLoadWindow=this._onWillLoadWindow.event,this._onBeforeCloseWindow=this._register(new L.Emitter),this.onBeforeCloseWindow=this._onBeforeCloseWindow.event,this._quitRequested=!1,this._wasRestarted=!1,this._phase=1,this.windowToCloseRequest=new Set,this.oneTimeListenerTokenGenerator=0,this.windowCounter=0,this.pendingQuitPromise=void 0,this.pendingQuitPromiseResolve=void 0,this.pendingWillShutdownPromise=void 0,this.mapWindowIdToPendingUnload=new Map,this.phaseWhen=new Map,this.resolveRestarted(),this.when(2).then(()=>this.registerListeners())}resolveRestarted(){this._wasRestarted=!!this.stateMainService.getItem(Ct.QUIT_AND_RESTART_KEY),this._wasRestarted&&this.stateMainService.removeItem(Ct.QUIT_AND_RESTART_KEY)}registerListeners(){const S=()=>{this._quitRequested||(this.trace("Lifecycle#app.on(before-quit)"),this._quitRequested=!0,this.trace("Lifecycle#onBeforeShutdown.fire()"),this._onBeforeShutdown.fire(),P.isMacintosh&&this.windowCounter===0&&this.fireOnWillShutdown(1))};C.app.addListener("before-quit",S);const g=()=>{this.trace("Lifecycle#app.on(window-all-closed)"),(this._quitRequested||!P.isMacintosh)&&C.app.quit()};C.app.addListener("window-all-closed",g),C.app.once("will-quit",h=>{this.trace("Lifecycle#app.on(will-quit)"),h.preventDefault(),this.fireOnWillShutdown(1).finally(()=>{this.resolvePendingQuitPromise(!1),C.app.removeListener("before-quit",S),C.app.removeListener("window-all-closed",g),C.app.quit()})})}fireOnWillShutdown(S){if(this.pendingWillShutdownPromise)return this.pendingWillShutdownPromise;this.trace("Lifecycle#onWillShutdown.fire()");const g=[];return this._onWillShutdown.fire({reason:S,join(h){g.push(h)}}),this.pendingWillShutdownPromise=(async()=>{try{await k.Promises.settled(g)}catch(h){this.logService.error(h)}try{await this.stateMainService.close()}catch(h){this.logService.error(h)}})(),this.pendingWillShutdownPromise}set phase(S){if(S<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===S)return;this.trace(`lifecycle (main): phase changed (value: ${S})`),this._phase=S;const g=this.phaseWhen.get(this._phase);g&&(g.open(),this.phaseWhen.delete(this._phase))}async when(S){if(S<=this._phase)return;let g=this.phaseWhen.get(S);g||(g=new k.Barrier,this.phaseWhen.set(S,g)),await g.wait()}registerWindow(S){const g=new R.DisposableStore;this.windowCounter++,g.add(S.onWillLoad(l=>this._onWillLoadWindow.fire({window:S,workspace:l.workspace,reason:l.reason})));const h=(0,m.assertIsDefined)(S.win);h.on("close",l=>{const i=S.id;if(this.windowToCloseRequest.has(i)){this.windowToCloseRequest.delete(i);return}this.trace(`Lifecycle#window.on('close') - window ID ${S.id}`),l.preventDefault(),this.unload(S,1).then(s=>{if(s){this.windowToCloseRequest.delete(i);return}this.windowToCloseRequest.add(i),this.trace(`Lifecycle#onBeforeCloseWindow.fire() - window ID ${i}`),this._onBeforeCloseWindow.fire(S),S.close()})}),h.on("closed",()=>{this.trace(`Lifecycle#window.on('closed') - window ID ${S.id}`),this.windowCounter--,g.dispose(),this.windowCounter===0&&(!P.isMacintosh||this._quitRequested)&&this.fireOnWillShutdown(1)})}async reload(S,g){await this.unload(S,3)||S.reload(g)}unload(S,g){const h=this.mapWindowIdToPendingUnload.get(S.id);if(h)return h;const l=this.doUnload(S,g).finally(()=>{this.mapWindowIdToPendingUnload.delete(S.id)});return this.mapWindowIdToPendingUnload.set(S.id,l),l}async doUnload(S,g){if(!S.isReady)return!1;this.trace(`Lifecycle#unload() - window ID ${S.id}`);const h=this._quitRequested?2:g,l=await this.onBeforeUnloadWindowInRenderer(S,h);return l?(this.trace(`Lifecycle#unload() - veto in renderer (window ID ${S.id})`),this.handleWindowUnloadVeto(l)):(await this.onWillUnloadWindowInRenderer(S,h),!1)}handleWindowUnloadVeto(S){return S?(this.resolvePendingQuitPromise(!0),this._quitRequested=!1,!0):!1}resolvePendingQuitPromise(S){this.pendingQuitPromiseResolve&&(this.pendingQuitPromiseResolve(S),this.pendingQuitPromiseResolve=void 0,this.pendingQuitPromise=void 0)}onBeforeUnloadWindowInRenderer(S,g){return new Promise(h=>{const l=this.oneTimeListenerTokenGenerator++,i=`vscode:ok${l}`,s=`vscode:cancel${l}`;t.validatedIpcMain.once(i,()=>{h(!1)}),t.validatedIpcMain.once(s,()=>{h(!0)}),S.send("vscode:onBeforeUnload",{okChannel:i,cancelChannel:s,reason:g})})}onWillUnloadWindowInRenderer(S,g){return new Promise(h=>{const i=`vscode:reply${this.oneTimeListenerTokenGenerator++}`;t.validatedIpcMain.once(i,()=>h()),S.send("vscode:onWillUnload",{replyChannel:i,reason:g})})}quit(S){return this.trace(`Lifecycle#quit() - begin (willRestart: ${S})`),this.pendingQuitPromise?(this.trace("Lifecycle#quit() - returning pending quit promise"),this.pendingQuitPromise):(S&&this.stateMainService.setItem(Ct.QUIT_AND_RESTART_KEY,!0),this.pendingQuitPromise=new Promise(g=>{this.pendingQuitPromiseResolve=g,this.trace("Lifecycle#quit() - calling app.quit()"),C.app.quit()}),this.pendingQuitPromise)}trace(S){this.environmentMainService.args["enable-smoke-test-driver"]?this.logService.info(S):this.logService.trace(S)}async relaunch(S){this.trace("Lifecycle#relaunch()");const g=process.argv.slice(1);if(S?.addArgs&&g.push(...S.addArgs),S?.removeArgs)for(const i of S.removeArgs){const s=g.indexOf(i);s>=0&&g.splice(s,1)}const h=()=>{try{if(P.isWindows){const i=(0,p.cwd)();i!==process.cwd()&&process.chdir(i)}}catch(i){this.logService.error(i)}this.trace("Lifecycle#relaunch() - calling app.relaunch()"),C.app.relaunch({args:g})};C.app.once("quit",h),await this.quit(!0)&&C.app.removeListener("quit",h)}async kill(S){this.trace("Lifecycle#kill()"),await this.fireOnWillShutdown(2),await Promise.race([(0,k.timeout)(1e3),(async()=>{for(const g of C.BrowserWindow.getAllWindows())if(g&&!g.isDestroyed()){let h;g.webContents&&!g.webContents.isDestroyed()?h=new Promise(l=>g.once("closed",l)):h=Promise.resolve(),g.destroy(),await h}})()]),C.app.exit(S)}};v.QUIT_AND_RESTART_KEY="lifecycle.quitAndRestart",v=we([ie(0,I.ILogService),ie(1,E.IStateMainService),ie(2,d.IEnvironmentMainService)],v),e.LifecycleMainService=v}),define(ee[228],te([0,1,4,3,2,5,21]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardLayoutMainService=e.IKeyboardLayoutMainService=void 0,e.IKeyboardLayoutMainService=(0,L.createDecorator)("keyboardLayoutMainService");let P=class extends k.Disposable{constructor(y){super(),this._onDidChangeKeyboardLayout=this._register(new t.Emitter),this.onDidChangeKeyboardLayout=this._onDidChangeKeyboardLayout.event,this._initPromise=null,this._keyboardLayoutData=null,y.when(3).then(()=>this._initialize())}_initialize(){return this._initPromise||(this._initPromise=this._doInitialize()),this._initPromise}async _doInitialize(){const y=await new Promise((I,E)=>{j(["native-keymap"],I,E)});this._keyboardLayoutData=p(y),C.isCI||y.onDidChangeKeyboardLayout(()=>{this._keyboardLayoutData=p(y),this._onDidChangeKeyboardLayout.fire(this._keyboardLayoutData)})}async getKeyboardLayoutData(){return await this._initialize(),this._keyboardLayoutData}};P=we([ie(0,R.ILifecycleMainService)],P),e.KeyboardLayoutMainService=P;function p(m){const y=m.getKeyMap(),I=m.getCurrentKeyboardLayout();return{keyboardMapping:y,keyboardLayoutInfo:I}}}),define(ee[229],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IStateService=void 0,e.IStateService=(0,C.createDecorator)("stateService")}),define(ee[230],te([0,1,8,17,12,35,16,6]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StateService=e.FileStorage=void 0;class p{constructor(I,E,d){this.storagePath=I,this.logService=E,this.fileService=d,this.storage=Object.create(null),this.lastSavedStorageContents="",this.flushDelayer=new C.ThrottledDelayer(100),this.initializing=void 0,this.closing=void 0}init(){return this.initializing||(this.initializing=this.doInit()),this.initializing}async doInit(){try{this.lastSavedStorageContents=(await this.fileService.readFile(this.storagePath)).value.toString(),this.storage=JSON.parse(this.lastSavedStorageContents)}catch(I){I.fileOperationResult!==1&&this.logService.error(I)}}getItem(I,E){const d=this.storage[I];return(0,k.isUndefinedOrNull)(d)?E:d}setItem(I,E){this.setItems([{key:I,data:E}])}setItems(I){let E=!1;for(const{key:d,data:w}of I)this.storage[d]!==w&&((0,k.isUndefinedOrNull)(w)?(0,k.isUndefined)(this.storage[d])||(this.storage[d]=void 0,E=!0):(this.storage[d]=w,E=!0));E&&this.save()}removeItem(I){(0,k.isUndefined)(this.storage[I])||(this.storage[I]=void 0,this.save())}async save(){if(!this.closing)return this.flushDelayer.trigger(()=>this.doSave())}async doSave(){if(!this.initializing)return;await this.initializing;const I=JSON.stringify(this.storage,null,4);if(I!==this.lastSavedStorageContents)try{await this.fileService.writeFile(this.storagePath,t.VSBuffer.fromString(I)),this.lastSavedStorageContents=I}catch(E){this.logService.error(E)}}async close(){return this.closing||(this.closing=this.flushDelayer.trigger(()=>this.doSave(),0)),this.closing}}e.FileStorage=p;let m=class{constructor(I,E,d){this.fileStorage=new p(I.stateResource,E,d)}async init(){await this.fileStorage.init()}getItem(I,E){return this.fileStorage.getItem(I,E)}};m=we([ie(0,L.IEnvironmentService),ie(1,P.ILogService),ie(2,R.IFileService)],m),e.StateService=m}),define(ee[231],te([0,1,230]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StateMainService=void 0;class t extends C.StateService{setItem(L,R){this.fileStorage.setItem(L,R)}setItems(L){this.fileStorage.setItems(L)}removeItem(L){this.fileStorage.removeItem(L)}close(){return this.fileStorage.close()}}e.StateMainService=t}),define(ee[89],te([0,1,4,33,7,29]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verifyMicrosoftInternalDomain=e.resolveCommonProperties=void 0;function R(m){if(C.platform===2&&/^penguin(\.|$)/i.test(m))return"chromebook"}async function P(m,y,I,E,d,w,f,v,u,S){const g=Object.create(null);g["common.machineId"]=f,g.sessionID=(0,L.generateUuid)()+Date.now(),g.commitHash=d,g.version=w,g["common.platformVersion"]=(y||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),g["common.platform"]=(0,C.PlatformToString)(C.platform),g["common.nodePlatform"]=t.platform,g["common.nodeArch"]=E,g["common.product"]=S||"desktop",v&&(g["common.msftInternal"]=v);let h=0;const l=Date.now();Object.defineProperties(g,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-l,enumerable:!0},"common.sequence":{get:()=>h++,enumerable:!0}}),C.isLinuxSnap&&(g["common.snap"]="true");const i=R(I);i&&(g["common.platformDetail"]=i);try{const s=await m.readFile(k.URI.file(u));g["common.source"]=s.value.toString().slice(0,30)}catch{}return g}e.resolveCommonProperties=P;function p(m){const y=t.env.USERDNSDOMAIN;if(!y)return!1;const I=y.toLowerCase();return m.some(E=>I===E)}e.verifyMicrosoftInternalDomain=p}),define(ee[31],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryConfiguration=e.TelemetryLevel=e.TELEMETRY_OLD_SETTING_ID=e.TELEMETRY_SETTING_ID=e.TELEMETRY_SECTION_ID=e.machineIdKey=e.lastSessionDateStorageKey=e.firstSessionDateStorageKey=e.currentSessionDateStorageKey=e.ICustomEndpointTelemetryService=e.ITelemetryService=void 0,e.ITelemetryService=(0,C.createDecorator)("telemetryService"),e.ICustomEndpointTelemetryService=(0,C.createDecorator)("customEndpointTelemetryService"),e.currentSessionDateStorageKey="telemetry.currentSessionDate",e.firstSessionDateStorageKey="telemetry.firstSessionDate",e.lastSessionDateStorageKey="telemetry.lastSessionDate",e.machineIdKey="telemetry.machineId",e.TELEMETRY_SECTION_ID="telemetry",e.TELEMETRY_SETTING_ID="telemetry.telemetryLevel",e.TELEMETRY_OLD_SETTING_ID="telemetry.enableTelemetry";var t;(function(L){L[L.NONE=0]="NONE",L[L.CRASH=1]="CRASH",L[L.ERROR=2]="ERROR",L[L.USAGE=3]="USAGE"})(t=e.TelemetryLevel||(e.TelemetryLevel={}));var k;(function(L){L.OFF="off",L.CRASH="crash",L.ERROR="error",L.ON="all"})(k=e.TelemetryConfiguration||(e.TelemetryConfiguration={}))}),define(ee[232],te([0,1,25,8,43,14,9,4,7,81,23,101,84,16,19,31]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticsService=e.collectLaunchConfigs=e.getMachineInfo=e.collectWorkspaceStats=void 0;const v=new Map;async function u(i,s){const n=`${i}::${s.join(":")}`,a=v.get(n);if(a)return a;const r=[{tag:"grunt.js",filePattern:/^gruntfile\.js$/i},{tag:"gulp.js",filePattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",filePattern:/^tsconfig\.json$/i},{tag:"package.json",filePattern:/^package\.json$/i},{tag:"jsconfig.json",filePattern:/^jsconfig\.json$/i},{tag:"tslint.json",filePattern:/^tslint\.json$/i},{tag:"eslint.json",filePattern:/^eslint\.json$/i},{tag:"tasks.json",filePattern:/^tasks\.json$/i},{tag:"launch.json",filePattern:/^launch\.json$/i},{tag:"settings.json",filePattern:/^settings\.json$/i},{tag:"webpack.config.js",filePattern:/^webpack\.config\.js$/i},{tag:"project.json",filePattern:/^project\.json$/i},{tag:"makefile",filePattern:/^makefile$/i},{tag:"sln",filePattern:/^.+\.sln$/i},{tag:"csproj",filePattern:/^.+\.csproj$/i},{tag:"cmake",filePattern:/^.+\.cmake$/i},{tag:"github-actions",filePattern:/^.+\.ya?ml$/i,relativePathPattern:/^\.github(?:\/|\\)workflows$/i},{tag:"devcontainer.json",filePattern:/^devcontainer\.json$/i},{tag:"dockerfile",filePattern:/^(dockerfile|docker\-compose\.ya?ml)$/i}],c=new Map,o=new Map,b=2e4;function D(N,G,ae,x){const Q=G.substring(N.length+1);return t.Promises.withAsyncBody(async re=>{let ne;try{ne=await y.Promises.readdir(G,{withFileTypes:!0})}catch{re();return}if(x.count>=b){x.count+=ne.length,x.maxReached=!0,re();return}let fe=ne.length;if(fe===0){re();return}let K=ne;x.count+ne.length>b&&(x.maxReached=!0,fe=b-x.count,K=ne.slice(0,fe)),x.count+=ne.length;for(const le of K)if(le.isDirectory()){if(ae.includes(le.name)||await D(N,(0,R.join)(G,le.name),ae,x),--fe===0){re();return}}else{const W=le.name.lastIndexOf(".");if(W>=0){const O=le.name.substring(W+1);O&&c.set(O,(c.get(O)??0)+1)}for(const O of r)O.relativePathPattern?.test(Q)!==!1&&O.filePattern.test(le.name)&&o.set(O.tag,(o.get(O.tag)??0)+1);if(--fe===0){re();return}}})}const A=t.Promises.withAsyncBody(async N=>{const G={count:0,maxReached:!1};await D(i,i,s,G);const ae=await h(i);N({configFiles:S(o),fileTypes:S(c),fileCount:G.count,maxFilesReached:G.maxReached,launchConfigFiles:ae})});return v.set(n,A),A}e.collectWorkspaceStats=u;function S(i){return Array.from(i.entries(),([s,n])=>({name:s,count:n})).sort((s,n)=>n.count-s.count)}function g(){const i={os:`${C.type()} ${C.arch()} ${C.release()}`,memory:`${(C.totalmem()/d.ByteSize.GB).toFixed(2)}GB (${(C.freemem()/d.ByteSize.GB).toFixed(2)}GB free)`,vmHint:`${Math.round(m.virtualMachineHint.value()*100)}%`},s=C.cpus();return s&&s.length>0&&(i.cpus=`${s[0].model} (${s.length} x ${s[0].speed})`),i}e.getMachineInfo=g;async function h(i){try{const s=new Map,n=(0,R.join)(i,".vscode","launch.json"),a=await y.Promises.readFile(n),r=[],c=(0,k.parse)(a.toString(),r);if(r.length)return console.log(`Unable to parse ${n}`),[];if((0,k.getNodeType)(c)==="object"&&c.configurations)for(const o of c.configurations){const b=o.type;b&&(s.has(b)?s.set(b,s.get(b)+1):s.set(b,1))}return S(s)}catch{return[]}}e.collectLaunchConfigs=h;let l=class{constructor(s,n){this.telemetryService=s,this.productService=n}formatMachineInfo(s){const n=[];return n.push(`OS Version:       ${s.os}`),n.push(`CPUs:             ${s.cpus}`),n.push(`Memory (System):  ${s.memory}`),n.push(`VM:               ${s.vmHint}`),n.join(`
`)}formatEnvironment(s){const n=[];n.push(`Version:          ${this.productService.nameShort} ${this.productService.version} ${this.productService.release||"Release unknown"} (${this.productService.commit||"Commit unknown"}, ${this.productService.date||"Date unknown"})`),n.push(`OS Version:       ${C.type()} ${C.arch()} ${C.release()}`);const a=C.cpus();return a&&a.length>0&&n.push(`CPUs:             ${a[0].model} (${a.length} x ${a[0].speed})`),n.push(`Memory (System):  ${(C.totalmem()/d.ByteSize.GB).toFixed(2)}GB (${(C.freemem()/d.ByteSize.GB).toFixed(2)}GB free)`),P.isWindows||n.push(`Load (avg):       ${C.loadavg().map(r=>Math.round(r)).join(", ")}`),n.push(`VM:               ${Math.round(m.virtualMachineHint.value()*100)}%`),n.push(`Screen Reader:    ${s.screenReader?"yes":"no"}`),n.push(`Process Argv:     ${s.mainArguments.join(" ")}`),n.push(`GPU Status:       ${this.expandGPUFeatures(s.gpuFeatureStatus)}`),n.join(`
`)}async getPerformanceInfo(s,n){return Promise.all([(0,I.listProcesses)(s.mainPID),this.formatWorkspaceMetadata(s)]).then(async a=>{let[r,c]=a,o=this.formatProcessList(s,r);return n.forEach(b=>{if((0,E.isRemoteDiagnosticError)(b))o+=`
${b.errorMessage}`,c+=`
${b.errorMessage}`;else if(o+=`

Remote: ${b.hostName}`,b.processes&&(o+=`
${this.formatProcessList(s,b.processes)}`),b.workspaceMetadata){c+=`
|  Remote: ${b.hostName}`;for(const D of Object.keys(b.workspaceMetadata)){const A=b.workspaceMetadata[D];let N=`${A.fileCount} files`;A.maxFilesReached&&(N=`more than ${N}`),c+=`|    Folder (${D}): ${N}`,c+=this.formatWorkspaceStats(A)}}}),{processInfo:o,workspaceInfo:c}})}async getSystemInfo(s,n){const{memory:a,vmHint:r,os:c,cpus:o}=g(),b={os:c,memory:a,cpus:o,vmHint:r,processArgs:`${s.mainArguments.join(" ")}`,gpuStatus:s.gpuFeatureStatus,screenReader:`${s.screenReader?"yes":"no"}`,remoteData:n};return P.isWindows||(b.load=`${C.loadavg().map(D=>Math.round(D)).join(", ")}`),P.isLinux&&(b.linuxEnv={desktopSession:process.env.DESKTOP_SESSION,xdgSessionDesktop:process.env.XDG_SESSION_DESKTOP,xdgCurrentDesktop:process.env.XDG_CURRENT_DESKTOP,xdgSessionType:process.env.XDG_SESSION_TYPE}),Promise.resolve(b)}async getDiagnostics(s,n){const a=[];return(0,I.listProcesses)(s.mainPID).then(async r=>(a.push(""),a.push(this.formatEnvironment(s)),a.push(""),a.push(this.formatProcessList(s,r)),s.windows.some(c=>c.folderURIs&&c.folderURIs.length>0&&!c.remoteAuthority)&&(a.push(""),a.push("Workspace Stats: "),a.push(await this.formatWorkspaceMetadata(s))),n.forEach(c=>{if((0,E.isRemoteDiagnosticError)(c))a.push(`
${c.errorMessage}`);else if(a.push(`

`),a.push(`Remote:           ${c.hostName}`),a.push(this.formatMachineInfo(c.machineInfo)),c.processes&&a.push(this.formatProcessList(s,c.processes)),c.workspaceMetadata)for(const o of Object.keys(c.workspaceMetadata)){const b=c.workspaceMetadata[o];let D=`${b.fileCount} files`;b.maxFilesReached&&(D=`more than ${D}`),a.push(`Folder (${o}): ${D}`),a.push(this.formatWorkspaceStats(b))}}),a.push(""),a.push(""),a.join(`
`)))}formatWorkspaceStats(s){const n=[];let r=0;const c=(A,N)=>{const G=` ${A}(${N})`;r+G.length>60?(n.push(o),o="|                 ",r=o.length):r+=G.length,o+=G};let o="|      File types:";const b=10,D=s.fileTypes.length>b?b:s.fileTypes.length;for(let A=0;A<D;A++){const N=s.fileTypes[A];c(N.name,N.count)}if(n.push(o),s.configFiles.length>=0&&(o="|      Conf files:",r=0,s.configFiles.forEach(A=>{c(A.name,A.count)}),n.push(o)),s.launchConfigFiles.length>0){let A="|      Launch Configs:";s.launchConfigFiles.forEach(N=>{A+=N.count>1?` ${N.name}(${N.count})`:` ${N.name}`}),n.push(A)}return n.join(`
`)}expandGPUFeatures(s){const n=Math.max(...Object.keys(s).map(a=>a.length));return Object.keys(s).map(a=>`${a}:  ${" ".repeat(n-a.length)}  ${s[a]}`).join(`
                  `)}formatWorkspaceMetadata(s){const n=[],a=[];return s.windows.forEach(r=>{r.folderURIs.length===0||!!r.remoteAuthority||(n.push(`|  Window (${r.title})`),r.folderURIs.forEach(c=>{const o=p.URI.revive(c);if(o.scheme===L.Schemas.file){const b=o.fsPath;a.push(u(b,["node_modules",".git"]).then(D=>{let A=`${D.fileCount} files`;D.maxFilesReached&&(A=`more than ${A}`),n.push(`|    Folder (${(0,R.basename)(b)}): ${A}`),n.push(this.formatWorkspaceStats(D))}).catch(D=>{n.push(`|      Error: Unable to collect workspace stats for folder ${b} (${D.toString()})`)}))}else n.push(`|    Folder (${o.toString()}): Workspace stats not available.`)}))}),Promise.all(a).then(r=>n.join(`
`)).catch(r=>`Unable to collect workspace stats: ${r}`)}formatProcessList(s,n){const a=new Map;s.windows.forEach(c=>a.set(c.pid,c.title));const r=[];return r.push("CPU %	Mem MB	   PID	Process"),n&&this.formatProcessItem(s.mainPID,a,r,n,0),r.join(`
`)}formatProcessItem(s,n,a,r,c){const o=c===0;let b;o?b=r.pid===s?`${this.productService.applicationName} main`:"remote agent":(b=`${"  ".repeat(c)} ${r.name}`,r.name==="window"&&(b=`${b} (${n.get(r.pid)})`));const D=process.platform==="win32"?r.mem:C.totalmem()*(r.mem/100);a.push(`${r.load.toFixed(0).padStart(5," ")}	${(D/d.ByteSize.MB).toFixed(0).padStart(6," ")}	${r.pid.toFixed(0).padStart(6," ")}	${b}`),Array.isArray(r.children)&&r.children.forEach(A=>this.formatProcessItem(s,n,a,A,c+1))}async getWorkspaceFileExtensions(s){const n=new Set;for(const{uri:a}of s.folders){const r=p.URI.revive(a);if(r.scheme!==L.Schemas.file)continue;const c=r.fsPath;try{(await u(c,["node_modules",".git"])).fileTypes.forEach(b=>n.add(b.name))}catch{}}return{extensions:[...n]}}async reportWorkspaceStats(s){for(const{uri:n}of s.folders){const a=p.URI.revive(n);if(a.scheme!==L.Schemas.file)continue;const r=a.fsPath;try{const c=await u(r,["node_modules",".git"]);this.telemetryService.publicLog2("workspace.stats",{"workspace.id":s.telemetryId,rendererSessionId:s.rendererSessionId}),c.fileTypes.forEach(o=>{this.telemetryService.publicLog2("workspace.stats.file",{rendererSessionId:s.rendererSessionId,type:o.name,count:o.count})}),c.launchConfigFiles.forEach(o=>{this.telemetryService.publicLog2("workspace.stats.launchConfigFile",{rendererSessionId:s.rendererSessionId,type:o.name,count:o.count})}),c.configFiles.forEach(o=>{this.telemetryService.publicLog2("workspace.stats.configFiles",{rendererSessionId:s.rendererSessionId,type:o.name,count:o.count})})}catch{}}}};l=we([ie(0,f.ITelemetryService),ie(1,w.IProductService)],l),e.DiagnosticsService=l}),define(ee[233],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryAppenderClient=e.TelemetryAppenderChannel=void 0;class C{constructor(L){this.appenders=L}listen(L,R){throw new Error(`Event not found: ${R}`)}call(L,R,{eventName:P,data:p}){return this.appenders.forEach(m=>m.log(P,p)),Promise.resolve(null)}}e.TelemetryAppenderChannel=C;class t{constructor(L){this.channel=L}log(L,R){return this.channel.call("log",{eventName:L,data:R}).then(void 0,P=>`Failed to log telemetry: ${console.warn(P)}`),Promise.resolve(null)}flush(){return Promise.resolve()}}e.TelemetryAppenderClient=t}),define(ee[56],te([0,1,44,12,18,54,89,31]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cleanData=e.getPiiPathsFromEnvironment=e.isInternalTelemetry=e.cleanRemoteAuthority=e.validateTelemetryData=e.getTelemetryLevel=e.isLoggingOnly=e.supportsTelemetry=e.configurationTelemetry=e.NullAppender=e.NullEndpointTelemetryService=e.NullTelemetryService=e.NullTelemetryServiceShape=e.TrustedTelemetryValue=void 0;class p{constructor(c){this.value=c}}e.TrustedTelemetryValue=p;class m{constructor(){this.sendErrorTelemetry=!1,this.telemetryLevel=0}publicLog(c,o){return Promise.resolve(void 0)}publicLog2(c,o){return this.publicLog(c,o)}publicLogError(c,o){return Promise.resolve(void 0)}publicLogError2(c,o){return this.publicLogError(c,o)}setExperimentProperty(){}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId",firstSessionDate:"someValue.firstSessionDate"})}}e.NullTelemetryServiceShape=m,e.NullTelemetryService=new m;class y{async publicLog(c,o,b){}async publicLogError(c,o,b){}}e.NullEndpointTelemetryService=y,e.NullAppender={log:()=>null,flush:()=>Promise.resolve(null)};function I(r,c){return c.onDidChangeConfiguration(o=>{o.source!==7&&r.publicLog2("updateConfiguration",{configurationSource:(0,k.ConfigurationTargetToString)(o.source),configurationKeys:g(o.sourceConfig)})})}e.configurationTelemetry=I;function E(r,c){return!c.isBuilt&&!c.disableTelemetry?!0:!(c.disableTelemetry||!r.enableTelemetry||c.extensionTestsLocationURI)}e.supportsTelemetry=E;function d(r,c){return!(c.isBuilt||c.disableTelemetry||r.enableTelemetry&&r.aiConfig?.ariaKey)}e.isLoggingOnly=d;function w(r){const c=r.getValue(P.TELEMETRY_SETTING_ID),o=r.getValue("telemetry.enableCrashReporter");if(r.getValue(P.TELEMETRY_OLD_SETTING_ID)===!1||o===!1)return 0;switch(c??"all"){case"all":return 3;case"error":return 2;case"crash":return 1;case"off":return 0}}e.getTelemetryLevel=w;function f(r){const c={},o={},b={};S(r,b);for(let D in b){D=D.length>150?D.substr(D.length-149):D;const A=b[D];typeof A=="number"?o[D]=A:typeof A=="boolean"?o[D]=A?1:0:typeof A=="string"?(A.length>8192&&console.warn(`Telemetry property: ${D} has been trimmed to 8192, the original length is ${A.length}`),c[D]=A.substring(0,8191)):typeof A<"u"&&A!==null&&(c[D]=A)}return{properties:c,measurements:o}}e.validateTelemetryData=f;const v=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces"]);function u(r){if(!r)return"none";const c=(0,L.getRemoteName)(r);return v.has(c)?c:"other"}e.cleanRemoteAuthority=u;function S(r,c,o=0,b){if(!!r)for(const D of Object.getOwnPropertyNames(r)){const A=r[D],N=b?b+D:D;Array.isArray(A)?c[N]=(0,C.safeStringify)(A):A instanceof Date?c[N]=A.toISOString():(0,t.isObject)(A)?o<2?S(A,c,o+1,N+"."):c[N]=(0,C.safeStringify)(A):c[N]=A}}function g(r){if(!r)return[];const c=[];return h(c,"",r),c}function h(r,c,o){o&&typeof o=="object"&&!Array.isArray(o)?Object.keys(o).forEach(b=>h(r,c?`${c}.${b}`:b,o[b])):r.push(c)}function l(r,c){const o=r.msftInternalDomains||[],b=c.getValue("telemetry.internalTesting");return(0,R.verifyMicrosoftInternalDomain)(o)||b}e.isInternalTelemetry=l;function i(r){return[r.appRoot,r.extensionsPath,r.userHome.fsPath,r.tmpDir.fsPath,r.userDataPath]}e.getPiiPathsFromEnvironment=i;function s(r,c){if(!r||!r.includes("/")&&!r.includes("\\"))return r;let o=r;const b=[];for(const G of c)for(;;){const ae=G.exec(r);if(!ae)break;b.push([ae.index,G.lastIndex])}const D=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,A=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let N=0;for(o="";;){const G=A.exec(r);if(!G)break;const ae=b.some(([x,Q])=>G.index<Q&&x<A.lastIndex);!D.test(G[0])&&!ae&&(o+=r.substring(N,G.index)+"<REDACTED: user-file-path>",N=A.lastIndex)}return N<r.length&&(o+=r.substr(N)),o}function n(r){if(!r)return r;const c=r.toLowerCase(),o=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const b of o)if(b.regex.test(c))return`<REDACTED: ${b.label}>`;return r}function a(r,c){return(0,C.cloneAndChange)(r,o=>{if(o instanceof p)return o.value;if(typeof o=="string"){let b=o.replaceAll("%20"," ");b=s(b,c);for(const D of c)b=b.replace(D,"");return b=n(b),b}})}e.cleanData=a}),define(ee[234],te([0,1,189,56]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveMarketplaceHeaders=void 0;async function k(L,R,P,p,m,y,I){const E={"X-Market-Client-Id":`VSCode ${L}`,"User-Agent":`VSCode ${L} (${R.nameShort})`};if((0,t.supportsTelemetry)(R,P)&&(0,t.getTelemetryLevel)(p)===3){const d=await(0,C.getServiceMachineId)(P,m,y),{machineId:w}=await I.getTelemetryInfo();E["X-Market-User-Id"]=d,E["VSCode-SessionId"]=w||d}return E}e.resolveMarketplaceHeaders=k}),define(ee[235],te([0,1,15,44,56]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractOneDataSystemAppender=void 0;const L="https://0.0.0.0/OneCollector/1.0";async function R(p,m,y){const I=await new Promise((v,u)=>{j(["@microsoft/1ds-core-js"],v,u)}),E=await new Promise((v,u)=>{j(["@microsoft/1ds-post-js"],v,u)}),d=new I.AppInsightsCore,w=new E.PostChannel,f={instrumentationKey:p,endpointUrl:L,loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[w]]};if(y){f.extensionConfig={};const v={alwaysUseXhrOverride:!0,httpXHROverride:y};f.extensionConfig[w.identifier]=v}return d.initialize(f,[]),d.addTelemetryInitializer(v=>{m&&(v.ext=v.ext??{},v.ext.utc=v.ext.utc??{},v.ext.utc.flags=8462029)}),d}class P{constructor(m,y,I,E,d){this._isInternalTelemetry=m,this._eventPrefix=y,this._defaultData=I,this._xhrOverride=d,this.endPointUrl=L,this._defaultData||(this._defaultData={}),typeof E=="function"?this._aiCoreOrKey=E():this._aiCoreOrKey=E,this._asyncAiCore=null}_withAIClient(m){if(!!this._aiCoreOrKey){if(typeof this._aiCoreOrKey!="string"){m(this._aiCoreOrKey);return}this._asyncAiCore||(this._asyncAiCore=R(this._aiCoreOrKey,this._isInternalTelemetry,this._xhrOverride)),this._asyncAiCore.then(y=>{m(y)},y=>{(0,C.onUnexpectedError)(y),console.error(y)})}}log(m,y){if(!this._aiCoreOrKey)return;y=(0,t.mixin)(y,this._defaultData),y=(0,k.validateTelemetryData)(y);const I=this._eventPrefix+"/"+m;try{this._withAIClient(E=>{E.pluginVersionString=y?.properties.version??"Unknown",E.track({name:I,baseData:{name:I,properties:y?.properties,measurements:y?.measurements}})})}catch{}}flush(){return this._aiCoreOrKey?new Promise(m=>{this._withAIClient(y=>{y.unload(!0,()=>{this._aiCoreOrKey=void 0,m(void 0)})})}):Promise.resolve(void 0)}}e.AbstractOneDataSystemAppender=P}),define(ee[113],te([0,1,2,44,4,26,169,18,65,63,19,48,31,56]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryService=void 0;let w=class{constructor(u,S,g){this._configurationService=S,this._productService=g,this._experimentProperties={},this._disposables=new C.DisposableStore,this._cleanupPatterns=[],this._appenders=u.appenders,this._commonProperties=u.commonProperties||Promise.resolve({}),this._piiPaths=u.piiPaths||[],this._telemetryLevel=3,this._sendErrorTelemetry=!!u.sendErrorTelemetry,this._cleanupPatterns=[/(vscode-)?file:\/\/\/.*?\/resources\/app\//gi];for(const h of this._piiPaths)this._cleanupPatterns.push(new RegExp((0,L.escapeRegExpCharacters)(h),"gi")),h.indexOf("\\")>=0&&this._cleanupPatterns.push(new RegExp((0,L.escapeRegExpCharacters)(h.replace(/\\/g,"/")),"gi"));this._updateTelemetryLevel(),this._configurationService.onDidChangeConfiguration(this._updateTelemetryLevel,this,this._disposables)}setExperimentProperty(u,S){this._experimentProperties[u]=S}_updateTelemetryLevel(){let u=(0,d.getTelemetryLevel)(this._configurationService);const S=this._productService.enabledTelemetryLevels;if(S){this._sendErrorTelemetry=this.sendErrorTelemetry?S.error:!1;const g=S.usage?3:S.error?2:0;u=Math.min(u,g)}this._telemetryLevel=u}get sendErrorTelemetry(){return this._sendErrorTelemetry}get telemetryLevel(){return this._telemetryLevel}async getTelemetryInfo(){const u=await this._commonProperties,S=u.sessionID,g=u["common.machineId"],h=u["common.firstSessionDate"],l=u["common.msftInternal"];return{sessionId:S,machineId:g,firstSessionDate:h,msftInternal:l}}dispose(){this._disposables.dispose()}_log(u,S,g){return this._telemetryLevel<S?Promise.resolve(void 0):this._commonProperties.then(h=>{g=(0,t.mixin)(g,this._experimentProperties),g=(0,d.cleanData)(g,this._cleanupPatterns),g=(0,t.mixin)(g,h),this._appenders.forEach(l=>l.log(u,g))},h=>{console.error(h)})}publicLog(u,S){return this._log(u,3,S)}publicLog2(u,S){return this.publicLog(u,S)}publicLogError(u,S){return this._sendErrorTelemetry?this._log(u,2,S):Promise.resolve(void 0)}publicLogError2(u,S){return this.publicLogError(u,S)}};w.IDLE_START_EVENT_NAME="UserIdleStart",w.IDLE_STOP_EVENT_NAME="UserIdleStop",w=we([ie(1,P.IConfigurationService),ie(2,y.IProductService)],w),e.TelemetryService=w;function f(){const v=(0,R.localize)(0,null,m.default.nameLong),u=m.default.privacyStatementUrl?(0,R.localize)(2,null,"https://aka.ms/vscode-telemetry",m.default.privacyStatementUrl):(0,R.localize)(1,null,"https://aka.ms/vscode-telemetry"),S=k.isWeb?"":(0,R.localize)(3,null),g=(0,R.localize)(4,null),h=(0,R.localize)(5,null),l=(0,R.localize)(6,null),i=(0,R.localize)(7,null),s=`
|       | ${g} | ${h} | ${l} |
|:------|:---------------------:|:---------------:|:--------------:|
| all   |            \u2713          |        \u2713        |        \u2713       |
| error |            \u2713          |        \u2713        |        -       |
| crash |            \u2713          |        -        |        -       |
| off   |            -          |        -        |        -       |
`,n=(0,R.localize)(8,null);return`
${v} ${u} ${S}

&nbsp;

${i}
${s}

&nbsp;

${n}
`}I.Registry.as(p.Extensions.Configuration).registerConfiguration({id:E.TELEMETRY_SECTION_ID,order:110,type:"object",title:(0,R.localize)(9,null),properties:{[E.TELEMETRY_SETTING_ID]:{type:"string",enum:["all","error","crash","off"],enumDescriptions:[(0,R.localize)(10,null),(0,R.localize)(11,null),(0,R.localize)(12,null),(0,R.localize)(13,null)],markdownDescription:f(),default:"off",restricted:!0,scope:1,tags:["usesOnlineServices","telemetry"]}}}),I.Registry.as(p.Extensions.Configuration).registerConfiguration({id:E.TELEMETRY_SECTION_ID,order:110,type:"object",title:(0,R.localize)(14,null),properties:{[E.TELEMETRY_OLD_SETTING_ID]:{type:"boolean",markdownDescription:m.default.privacyStatementUrl?(0,R.localize)(16,null,m.default.nameLong,m.default.privacyStatementUrl):(0,R.localize)(15,null,m.default.nameLong),default:!0,restricted:!0,markdownDeprecationMessage:(0,R.localize)(17,null,`\`#${E.TELEMETRY_SETTING_ID}#\``),scope:1,tags:["usesOnlineServices","telemetry"]}}})}),define(ee[236],te([0,1,282,235]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OneDataSystemAppender=void 0;class k extends t.AbstractOneDataSystemAppender{constructor(R,P,p,m){const y={sendPOST:(I,E)=>{const d={method:"POST",headers:{...I.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(I.data)}};try{const w=C.request(I.urlString,d,f=>{f.on("data",function(v){E(f.statusCode??200,f.headers,v.toString())}),f.on("error",function(v){E(0,{})})});w.write(I.data),w.end()}catch{E(0,{})}}};super(R,P,p,m,y)}}e.OneDataSystemAppender=k}),define(ee[237],te([0,1,4,81,31]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveMachineId=void 0;async function L(R){let P=R.getItem(k.machineIdKey);return(typeof P!="string"||C.isMacintosh&&P==="6c9d2bc8f91b89624add29c0abeae7fb42bf539fa1cdb2e3e57cd668fa9bcead")&&(P=await(0,t.getMachineId)()),P}e.resolveMachineId=L}),define(ee[114],te([0,1,31,237]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveMachineId=void 0;async function k(L){const R=await(0,t.resolveMachineId)(L);return L.setItem(C.machineIdKey,R),R}e.resolveMachineId=k}),define(ee[238],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDark=e.isHighContrast=e.ColorScheme=void 0;var C;(function(L){L.DARK="dark",L.LIGHT="light",L.HIGH_CONTRAST_DARK="hcDark",L.HIGH_CONTRAST_LIGHT="hcLight"})(C=e.ColorScheme||(e.ColorScheme={}));function t(L){return L===C.HIGH_CONTRAST_DARK||L===C.HIGH_CONTRAST_LIGHT}e.isHighContrast=t;function k(L){return L===C.DARK||L===C.HIGH_CONTRAST_DARK}e.isDark=k}),define(ee[239],te([0,1,121,3,2,5,48,238]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Themable=e.registerThemingParticipant=e.Extensions=e.getThemeTypeSelector=e.FolderThemeIcon=e.FileThemeIcon=e.ThemeIcon=e.themeColorFromId=e.ThemeColor=e.IThemeService=void 0,e.IThemeService=(0,L.createDecorator)("themeService");var p;(function(v){function u(S){return S&&typeof S=="object"&&typeof S.id=="string"}v.isThemeColor=u})(p=e.ThemeColor||(e.ThemeColor={}));function m(v){return{id:v}}e.themeColorFromId=m;var y;(function(v){function u(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color>"u"||p.isThemeColor(a.color))}v.isThemeIcon=u;const S=new RegExp(`^\\$\\((${C.CSSIcon.iconNameExpression}(?:${C.CSSIcon.iconModifierExpression})?)\\)$`);function g(a){const r=S.exec(a);if(!r)return;const[,c]=r;return{id:c}}v.fromString=g;function h(a){return{id:a}}v.fromId=h;function l(a,r){let c=a.id;const o=c.lastIndexOf("~");return o!==-1&&(c=c.substring(0,o)),r&&(c=`${c}~${r}`),{id:c}}v.modify=l;function i(a){const r=a.id.lastIndexOf("~");if(r!==-1)return a.id.substring(r+1)}v.getModifier=i;function s(a,r){return a.id===r.id&&a.color?.id===r.color?.id}v.isEqual=s;function n(a,r){return{id:a.id,color:r?m(r):void 0}}v.asThemeIcon=n,v.asClassNameArray=C.CSSIcon.asClassNameArray,v.asClassName=C.CSSIcon.asClassName,v.asCSSSelector=C.CSSIcon.asCSSSelector})(y=e.ThemeIcon||(e.ThemeIcon={})),e.FileThemeIcon=C.Codicon.file,e.FolderThemeIcon=C.Codicon.folder;function I(v){switch(v){case P.ColorScheme.DARK:return"vs-dark";case P.ColorScheme.HIGH_CONTRAST_DARK:return"hc-black";case P.ColorScheme.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}e.getThemeTypeSelector=I,e.Extensions={ThemingContribution:"base.contributions.theming"};class E{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new t.Emitter}onColorThemeChange(u){return this.themingParticipants.push(u),this.onThemingParticipantAddedEmitter.fire(u),(0,k.toDisposable)(()=>{const S=this.themingParticipants.indexOf(u);this.themingParticipants.splice(S,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}}const d=new E;R.Registry.add(e.Extensions.ThemingContribution,d);function w(v){return d.onColorThemeChange(v)}e.registerThemingParticipant=w;class f extends k.Disposable{constructor(u){super(),this.themeService=u,this.theme=u.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(S=>this.onThemeChange(S)))}onThemeChange(u){this.theme=u,this.updateStyles()}updateStyles(){}getColor(u,S){let g=this.theme.getColor(u);return g&&S&&(g=S(g,this.theme)),g?g.toString():null}}e.Themable=f}),define(ee[66],te([0,1,13,3,2,4,18,5,36]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeMainService=e.IThemeMainService=void 0;const m="#FFFFFF",y="#1E1E1E",I="#000000",E="#FFFFFF",d="theme",w="themeBackground",f="windowSplash";e.IThemeMainService=(0,P.createDecorator)("themeMainService");let v=class extends k.Disposable{constructor(S,g){super(),this.stateMainService=S,this.configurationService=g,this._onDidChangeColorScheme=this._register(new t.Emitter),this.onDidChangeColorScheme=this._onDidChangeColorScheme.event,C.nativeTheme.on("updated",()=>{this._onDidChangeColorScheme.fire(this.getColorScheme())})}getColorScheme(){if(L.isWindows){if(C.nativeTheme.shouldUseHighContrastColors)return{dark:C.nativeTheme.shouldUseInvertedColorScheme,highContrast:!0}}else if(L.isMacintosh){if(C.nativeTheme.shouldUseInvertedColorScheme||C.nativeTheme.shouldUseHighContrastColors)return{dark:C.nativeTheme.shouldUseDarkColors,highContrast:!0}}else if(L.isLinux&&C.nativeTheme.shouldUseHighContrastColors)return{dark:!0,highContrast:!0};return{dark:C.nativeTheme.shouldUseDarkColors,highContrast:!1}}getBackgroundColor(){const S=this.getColorScheme();if(S.highContrast&&this.configurationService.getValue("window.autoDetectHighContrast"))return S.dark?I:E;let g=this.stateMainService.getItem(w,null);if(!g)switch(this.stateMainService.getItem(d,"vs-dark").split(" ")[0]){case"vs":g=m;break;case"hc-black":g=I;break;case"hc-light":g=E;break;default:g=y}return L.isMacintosh&&g.toUpperCase()===y&&(g="#171717"),g}saveWindowSplash(S,g){this.stateMainService.setItems([{key:d,data:g.baseTheme},{key:w,data:g.colorInfo.background},{key:f,data:g}]),typeof S=="number"&&this.updateBackgroundColor(S,g)}updateBackgroundColor(S,g){for(const h of C.BrowserWindow.getAllWindows())if(h.id===S){h.setBackgroundColor(g.colorInfo.background);break}}getWindowSplash(){return this.stateMainService.getItem(f)}};v=we([ie(0,p.IStateMainService),ie(1,R.IConfigurationService)],v),e.ThemeMainService=v}),define(ee[115],te([0,1,3,18,5,6]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractTunnelService=e.DisposableTunnel=e.isPortPrivileged=e.isAllInterfaces=e.ALL_INTERFACES_ADDRESSES=e.isLocalhost=e.LOCALHOST_ADDRESSES=e.extractLocalHostUriMetaDataForPortMapping=e.ProvidedOnAutoForward=e.TunnelPrivacyId=e.TunnelProtocol=e.ISharedTunnelsService=e.ITunnelService=void 0,e.ITunnelService=(0,k.createDecorator)("tunnelService"),e.ISharedTunnelsService=(0,k.createDecorator)("sharedTunnelsService");var R;(function(f){f.Http="http",f.Https="https"})(R=e.TunnelProtocol||(e.TunnelProtocol={}));var P;(function(f){f.ConstantPrivate="constantPrivate",f.Private="private",f.Public="public"})(P=e.TunnelPrivacyId||(e.TunnelPrivacyId={}));var p;(function(f){f[f.Notify=1]="Notify",f[f.OpenBrowser=2]="OpenBrowser",f[f.OpenPreview=3]="OpenPreview",f[f.Silent=4]="Silent",f[f.Ignore=5]="Ignore",f[f.OpenBrowserOnce=6]="OpenBrowserOnce"})(p=e.ProvidedOnAutoForward||(e.ProvidedOnAutoForward={}));function m(f){if(f.scheme!=="http"&&f.scheme!=="https")return;const v=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(f.authority);if(!!v)return{address:v[1],port:+v[2]}}e.extractLocalHostUriMetaDataForPortMapping=m,e.LOCALHOST_ADDRESSES=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function y(f){return e.LOCALHOST_ADDRESSES.indexOf(f)>=0}e.isLocalhost=y,e.ALL_INTERFACES_ADDRESSES=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function I(f){return e.ALL_INTERFACES_ADDRESSES.indexOf(f)>=0}e.isAllInterfaces=I;function E(f,v,u,S){if(u===1)return!1;if(u===2&&I(v)){const g=/(\d+)\.(\d+)\.(\d+)/g.exec(S);if(g?.length===4&&parseInt(g[1])>=18)return!1}return f<1024}e.isPortPrivileged=E;class d{constructor(v,u,S){this.remoteAddress=v,this.localAddress=u,this._dispose=S,this._onDispose=new C.Emitter,this.onDidDispose=this._onDispose.event}dispose(){return this._onDispose.fire(),this._dispose()}}e.DisposableTunnel=d;let w=class{constructor(v,u){this.logService=v,this.configurationService=u,this._onTunnelOpened=new C.Emitter,this.onTunnelOpened=this._onTunnelOpened.event,this._onTunnelClosed=new C.Emitter,this.onTunnelClosed=this._onTunnelClosed.event,this._onAddedTunnelProvider=new C.Emitter,this.onAddedTunnelProvider=this._onAddedTunnelProvider.event,this._tunnels=new Map,this._canElevate=!1,this._privacyOptions=[],this._factoryInProgress=new Set}get hasTunnelProvider(){return!!this._tunnelProvider}get defaultTunnelHost(){const v=this.configurationService.getValue("remote.localPortHost");return!v||v==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(v){return this._tunnelProvider=v,v?(this._onAddedTunnelProvider.fire(),{dispose:()=>{this._tunnelProvider=void 0,this._canElevate=!1,this._privacyOptions=[]}}):(this._canElevate=!1,this._privacyOptions=[],this._onAddedTunnelProvider.fire(),{dispose:()=>{}})}setTunnelFeatures(v){this._canElevate=v.elevation,this._privacyOptions=v.privacyOptions}get canElevate(){return this._canElevate}get canChangePrivacy(){return this._privacyOptions.length>0}get privacyOptions(){return this._privacyOptions}get tunnels(){return this.getTunnels()}async getTunnels(){const v=[],u=Array.from(this._tunnels.values());for(const S of u){const g=Array.from(S.values());for(const h of g){const l=await h.value;l&&v.push(l)}}return v}async dispose(){for(const v of this._tunnels.values()){for(const{value:u}of v.values())await u.then(S=>S?.dispose());v.clear()}this._tunnels.clear()}setEnvironmentTunnel(v,u,S,g,h){this.addTunnelToMap(v,u,Promise.resolve({tunnelRemoteHost:v,tunnelRemotePort:u,localAddress:S,privacy:g,protocol:h,dispose:()=>Promise.resolve()}))}async getExistingTunnel(v,u){(I(v)||y(v))&&(v=e.LOCALHOST_ADDRESSES[0]);const S=this.getTunnelFromMap(v,u);if(S)return++S.refcount,S.value}openTunnel(v,u,S,g,h=!1,l,i){if(this.logService.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${u}:${S} on local port ${g}.`),!v)return;if(u||(u="localhost"),this._tunnelProvider&&this._factoryInProgress.has(S)){this.logService.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const s=this.retainOrCreateTunnel(v,u,S,g,h,l,i);return s?s.then(n=>{if(!n){this.logService.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.removeEmptyTunnelFromMap(u,S);return}this.logService.trace("ForwardedPorts: (TunnelService) New tunnel established.");const a=this.makeTunnel(n);return(n.tunnelRemoteHost!==u||n.tunnelRemotePort!==S)&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),this._onTunnelOpened.fire(a),a}):(this.logService.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),s)}makeTunnel(v){return{tunnelRemotePort:v.tunnelRemotePort,tunnelRemoteHost:v.tunnelRemoteHost,tunnelLocalPort:v.tunnelLocalPort,localAddress:v.localAddress,privacy:v.privacy,protocol:v.protocol,dispose:async()=>{this.logService.trace(`ForwardedPorts: (TunnelService) dispose request for ${v.tunnelRemoteHost}:${v.tunnelRemotePort} `);const u=this._tunnels.get(v.tunnelRemoteHost);if(u){const S=u.get(v.tunnelRemotePort);S&&(S.refcount--,await this.tryDisposeTunnel(v.tunnelRemoteHost,v.tunnelRemotePort,S))}}}}async tryDisposeTunnel(v,u,S){if(S.refcount<=0){this.logService.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${v}:${u}.`);const g=S.value.then(async h=>{h&&(await h.dispose(!0),this._onTunnelClosed.fire({host:h.tunnelRemoteHost,port:h.tunnelRemotePort}))});return this._tunnels.has(v)&&this._tunnels.get(v).delete(u),g}}async closeTunnel(v,u){this.logService.trace(`ForwardedPorts: (TunnelService) close request for ${v}:${u} `);const S=this._tunnels.get(v);if(S&&S.has(u)){const g=S.get(u);g.refcount=0,await this.tryDisposeTunnel(v,u,g)}}addTunnelToMap(v,u,S){this._tunnels.has(v)||this._tunnels.set(v,new Map),this._tunnels.get(v).set(u,{refcount:1,value:S})}async removeEmptyTunnelFromMap(v,u){const S=this._tunnels.get(v);S&&(await S.get(u)||S.delete(u),S.size===0&&this._tunnels.delete(v))}getTunnelFromMap(v,u){const S=[v];y(v)?(S.push(...e.LOCALHOST_ADDRESSES),S.push(...e.ALL_INTERFACES_ADDRESSES)):I(v)&&S.push(...e.ALL_INTERFACES_ADDRESSES);const g=S.map(h=>this._tunnels.get(h));for(const h of g){const l=h?.get(u);if(l)return l}}canTunnel(v){return!!m(v)}createWithProvider(v,u,S,g,h,l,i){this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${u}:${S} on local port ${g}.`);const s=S;this._factoryInProgress.add(s);const n=g===void 0?S:g,a={elevationRequired:h?this.isPortPrivileged(n):!1},r={remoteAddress:{host:u,port:S},localAddressPort:g,privacy:l,public:l?l!==P.Private:void 0,protocol:i},c=v.forwardPort(r,a);return c?(this.addTunnelToMap(u,S,c),c.finally(()=>{this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this._factoryInProgress.delete(s)})):this._factoryInProgress.delete(s),c}};w=we([ie(0,L.ILogService),ie(1,t.IConfigurationService)],w),e.AbstractTunnelService=w}),define(ee[240],te([0,1,78,25,97,222,8,2,18,6,19,221,115,88,4]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedTunnelsService=e.TunnelService=e.BaseTunnelService=void 0;async function f(h,l,i,s,n){let a;for(let r=3;r&&(a?.dispose(),a=await new v(h,l,i,s,n).waitForReady(),!(n&&k.BROWSER_RESTRICTED_PORTS[n]||!k.BROWSER_RESTRICTED_PORTS[a.tunnelLocalPort]));r--);return a}class v extends P.Disposable{constructor(l,i,s,n,a){super(),this.defaultTunnelHost=i,this.suggestedLocalPort=a,this.privacy=E.TunnelPrivacyId.Private,this._socketsDispose=new Map,this._options=l,this._server=C.createServer(),this._barrier=new R.Barrier,this._listeningListener=()=>this._barrier.open(),this._server.on("listening",this._listeningListener),this._connectionListener=r=>this._onConnection(r),this._server.on("connection",this._connectionListener),this._errorListener=()=>{},this._server.on("error",this._errorListener),this.tunnelRemotePort=n,this.tunnelRemoteHost=s}async dispose(){super.dispose(),this._server.removeListener("listening",this._listeningListener),this._server.removeListener("connection",this._connectionListener),this._server.removeListener("error",this._errorListener),this._server.close(),Array.from(this._socketsDispose.values()).forEach(i=>{i()})}async waitForReady(){const l=this.suggestedLocalPort??this.tunnelRemotePort,i=(0,E.isAllInterfaces)(this.defaultTunnelHost)?"0.0.0.0":"127.0.0.1";let s=await(0,k.findFreePortFaster)(l,2,1e3,i),n=null;return this._server.listen(s,this.defaultTunnelHost),await this._barrier.wait(),n=this._server.address(),n||(s=0,this._server.listen(s,this.defaultTunnelHost),await this._barrier.wait(),n=this._server.address()),this.tunnelLocalPort=n.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${n.port}`,this}async _onConnection(l){l.pause();const i=(0,E.isLocalhost)(this.tunnelRemoteHost)||(0,E.isAllInterfaces)(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,s=await(0,I.connectRemoteAgentTunnel)(this._options,i,this.tunnelRemotePort),n=s.getSocket().socket,a=s.readEntireBuffer();s.dispose(),a.byteLength>0&&l.write(a.buffer),l.on("end",()=>{l.localAddress&&this._socketsDispose.delete(l.localAddress),n.end()}),l.on("close",()=>n.end()),l.on("error",()=>{l.localAddress&&this._socketsDispose.delete(l.localAddress),n.destroy()}),n.on("end",()=>l.end()),n.on("close",()=>l.end()),n.on("error",()=>{l.destroy()}),l.pipe(n),n.pipe(l),l.localAddress&&this._socketsDispose.set(l.localAddress,()=>{l.end(),n.end()})}}let u=class extends E.AbstractTunnelService{constructor(l,i,s,n,a){super(i,a),this.socketFactory=l,this.signService=s,this.productService=n}isPortPrivileged(l){return(0,E.isPortPrivileged)(l,this.defaultTunnelHost,w.OS,t.release())}retainOrCreateTunnel(l,i,s,n,a,r,c){const o=this.getTunnelFromMap(i,s);if(o)return++o.refcount,o.value;if(this._tunnelProvider)return this.createWithProvider(this._tunnelProvider,i,s,n,a,r,c);{this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${i}:${s} on local port ${n}.`);const b={commit:this.productService.commit,quality:this.productService.quality,socketFactory:this.socketFactory,addressProvider:l,signService:this.signService,logService:this.logService,ipcLogger:null},D=f(b,this.defaultTunnelHost,i,s,n);return this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.addTunnelToMap(i,s,D),D}}};u=we([ie(1,m.ILogService),ie(2,d.ISignService),ie(3,y.IProductService),ie(4,p.IConfigurationService)],u),e.BaseTunnelService=u;let S=class extends u{constructor(l,i,s,n){super(L.nodeSocketFactory,l,i,s,n)}};S=we([ie(0,m.ILogService),ie(1,d.ISignService),ie(2,y.IProductService),ie(3,p.IConfigurationService)],S),e.TunnelService=S;let g=class extends P.Disposable{constructor(l,i,s,n){super(),this.logService=l,this.productService=i,this.signService=s,this.configurationService=n,this._tunnelServices=new Map}async openTunnel(l,i,s,n,a,r,c,o){if(this.logService.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${s}:${n} on local port ${a}.`),!this._tunnelServices.has(l)){const b=new S(this.logService,this.signService,this.productService,this.configurationService);this._register(b),this._tunnelServices.set(l,b),b.onTunnelClosed(async()=>{(await b.tunnels).length===0&&(b.dispose(),this._tunnelServices.delete(l))})}return this._tunnelServices.get(l).openTunnel(i,s,n,a,r,c,o)}};g=we([ie(0,m.ILogService),ie(1,y.IProductService),ie(2,d.ISignService),ie(3,p.IConfigurationService)],g),e.SharedTunnelsService=g}),define(ee[49],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IUpdateService=e.State=e.UpdateType=e.StateType=void 0;var t;(function(L){L.Uninitialized="uninitialized",L.Idle="idle",L.CheckingForUpdates="checking for updates",L.AvailableForDownload="available for download",L.Downloading="downloading",L.Downloaded="downloaded",L.Updating="updating",L.Ready="ready"})(t=e.StateType||(e.StateType={}));var k;(function(L){L[L.Setup=0]="Setup",L[L.Archive=1]="Archive",L[L.Snap=2]="Snap",L[L.WindowsInstaller=3]="WindowsInstaller"})(k=e.UpdateType||(e.UpdateType={})),e.State={Uninitialized:{type:"uninitialized"},Idle:(L,R)=>({type:"idle",updateType:L,error:R}),CheckingForUpdates:L=>({type:"checking for updates",explicit:L}),AvailableForDownload:L=>({type:"available for download",update:L}),Downloading:L=>({type:"downloading",update:L}),Downloaded:L=>({type:"downloaded",update:L}),Updating:L=>({type:"updating",update:L}),Ready:L=>({type:"ready",update:L})},e.IUpdateService=(0,C.createDecorator)("updateService")}),define(ee[241],te([0,1,4,170,65,48]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),L.Registry.as(k.Extensions.Configuration).registerConfiguration({id:"update",order:15,title:(0,t.localize)(0,null),type:"object",properties:{"update.mode":{type:"string",enum:["none","manual","start","default"],default:"default",scope:1,description:(0,t.localize)(1,null),tags:["usesOnlineServices"],enumDescriptions:[(0,t.localize)(2,null),(0,t.localize)(3,null),(0,t.localize)(4,null),(0,t.localize)(5,null)],policy:{name:"UpdateMode",minimumVersion:"1.67"}},"update.channel":{type:"string",default:"default",scope:1,description:(0,t.localize)(6,null),deprecationMessage:(0,t.localize)(7,null,"update.mode")},"update.enableWindowsBackgroundUpdates":{type:"boolean",default:!0,scope:1,title:(0,t.localize)(8,null),description:(0,t.localize)(9,null),included:C.isWindows&&!C.isWeb},"update.showReleaseNotes":{type:"boolean",default:!0,scope:1,description:(0,t.localize)(10,null),tags:["usesOnlineServices"]}}})}),define(ee[242],te([0,1,3,49]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateChannelClient=e.UpdateChannel=void 0;class k{constructor(P){this.service=P}listen(P,p){switch(p){case"onStateChange":return this.service.onStateChange}throw new Error(`Event not found: ${p}`)}call(P,p,m){switch(p){case"checkForUpdates":return this.service.checkForUpdates(m);case"downloadUpdate":return this.service.downloadUpdate();case"applyUpdate":return this.service.applyUpdate();case"quitAndInstall":return this.service.quitAndInstall();case"_getInitialState":return Promise.resolve(this.service.state);case"isLatestVersion":return this.service.isLatestVersion();case"_applySpecificUpdate":return this.service._applySpecificUpdate(m)}throw new Error(`Call not found: ${p}`)}}e.UpdateChannel=k;class L{get state(){return this._state}set state(P){this._state=P,this._onStateChange.fire(P)}constructor(P){this.channel=P,this._onStateChange=new C.Emitter,this.onStateChange=this._onStateChange.event,this._state=t.State.Uninitialized,this.channel.listen("onStateChange")(p=>this.state=p),this.channel.call("_getInitialState").then(p=>this.state=p)}checkForUpdates(P){return this.channel.call("checkForUpdates",P)}downloadUpdate(){return this.channel.call("downloadUpdate")}applyUpdate(){return this.channel.call("applyUpdate")}quitAndInstall(){return this.channel.call("quitAndInstall")}isLatestVersion(){return this.channel.call("isLatestVersion")}_applySpecificUpdate(P){return this.channel.call("_applySpecificUpdate",P)}}e.UpdateChannelClient=L}),define(ee[90],te([0,1,8,22,3,18,27,21,6,19,55,49]),function(j,e,C,t,k,L,R,P,p,m,y,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractUpdateService=e.createUpdateURL=void 0;function E(w,f,v){return`${v.updateUrl}/api/update/${w}/${f}/${v.commit}`}e.createUpdateURL=E;let d=class{get state(){return this._state}setState(f){this.logService.info("update#setState",f.type),this._state=f,this._onStateChange.fire(f)}constructor(f,v,u,S,g,h){this.lifecycleMainService=f,this.configurationService=v,this.environmentMainService=u,this.requestService=S,this.logService=g,this.productService=h,this._state=I.State.Uninitialized,this._onStateChange=new k.Emitter,this.onStateChange=this._onStateChange.event}async initialize(){if(!this.environmentMainService.isBuilt)return;if(this.environmentMainService.disableUpdates){this.logService.info("update#ctor - updates are disabled by the environment");return}if(!this.productService.updateUrl||!this.productService.commit){this.logService.info("update#ctor - updates are disabled as there is no update URL");return}const f=this.getUpdateMode(),v=this.getProductQuality(f);if(!v){this.logService.info("update#ctor - updates are disabled by user preference");return}if(this.url=this.buildUpdateFeedUrl(v),!this.url){this.logService.info("update#ctor - updates are disabled as the update URL is badly formed");return}if(this.setState(I.State.Idle(this.getUpdateType())),f==="manual"){this.logService.info("update#ctor - manual checks only; automatic updates are disabled by user preference");return}f==="start"?(this.logService.info("update#ctor - startup checks only; automatic updates are disabled by user preference"),setTimeout(()=>this.checkForUpdates(!1),30*1e3)):this.scheduleCheckForUpdates(30*1e3).then(void 0,u=>this.logService.error(u))}getUpdateMode(){return(0,L.getMigratedSettingValue)(this.configurationService,"update.mode","update.channel")}getProductQuality(f){return f==="none"?void 0:this.productService.quality}scheduleCheckForUpdates(f=60*60*1e3){return(0,C.timeout)(f).then(()=>this.checkForUpdates(!1)).then(()=>this.scheduleCheckForUpdates(60*60*1e3))}async checkForUpdates(f){this.logService.trace("update#checkForUpdates, state = ",this.state.type),this.state.type==="idle"&&this.doCheckForUpdates(f)}async downloadUpdate(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),this.state.type==="available for download"&&await this.doDownloadUpdate(this.state)}async doDownloadUpdate(f){}async applyUpdate(){this.logService.trace("update#applyUpdate, state = ",this.state.type),this.state.type==="downloaded"&&await this.doApplyUpdate()}async doApplyUpdate(){}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),this.state.type!=="ready"||(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleMainService.quit(!0).then(f=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${f}`),!f&&(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())})),Promise.resolve(void 0)}async isLatestVersion(){return this.url?await this.getUpdateMode()==="none"?!1:(await this.requestService.request({url:this.url},t.CancellationToken.None)).res.statusCode===204:void 0}async _applySpecificUpdate(f){}getUpdateType(){return 1}doQuitAndInstall(){}};d=we([ie(0,P.ILifecycleMainService),ie(1,L.IConfigurationService),ie(2,R.IEnvironmentMainService),ie(3,y.IRequestService),ie(4,p.ILogService),ie(5,m.IProductService)],d),e.AbstractUpdateService=d}),define(ee[243],te([0,1,13,53,3,2,18,27,21,6,19,55,31,49,90]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DarwinUpdateService=void 0;let f=class extends w.AbstractUpdateService{get onRawError(){return k.Event.fromNodeEventEmitter(C.autoUpdater,"error",(u,S)=>S)}get onRawUpdateNotAvailable(){return k.Event.fromNodeEventEmitter(C.autoUpdater,"update-not-available")}get onRawUpdateAvailable(){return k.Event.fromNodeEventEmitter(C.autoUpdater,"update-available",(u,S,g)=>({url:S,version:g,productVersion:g}))}get onRawUpdateDownloaded(){return k.Event.fromNodeEventEmitter(C.autoUpdater,"update-downloaded",(u,S,g,h)=>({releaseNotes:S,version:g,productVersion:g,date:h}))}constructor(u,S,g,h,l,i,s){super(u,S,h,l,i,s),this.telemetryService=g,this.disposables=new L.DisposableStore}async initialize(){await super.initialize(),this.onRawError(this.onError,this,this.disposables),this.onRawUpdateAvailable(this.onUpdateAvailable,this,this.disposables),this.onRawUpdateDownloaded(this.onUpdateDownloaded,this,this.disposables),this.onRawUpdateNotAvailable(this.onUpdateNotAvailable,this,this.disposables)}onError(u){this.logService.error("UpdateService error:",u);const g=(this.state.type==="checking for updates"?this.state.explicit:!0)?u:void 0;this.setState(d.State.Idle(1,g))}buildUpdateFeedUrl(u){let S;this.productService.darwinUniversalAssetId?S=this.productService.darwinUniversalAssetId:S=process.arch==="x64"?"darwin":"darwin-arm64";const g=(0,w.createUpdateURL)(S,u,this.productService);try{C.autoUpdater.setFeedURL({url:g})}catch(h){this.logService.error("Failed to set update feed URL",h);return}return g}doCheckForUpdates(u){this.setState(d.State.CheckingForUpdates(u)),C.autoUpdater.checkForUpdates()}onUpdateAvailable(u){this.state.type==="checking for updates"&&this.setState(d.State.Downloading(u))}onUpdateDownloaded(u){this.state.type==="downloading"&&(this.telemetryService.publicLog2("update:downloaded",{version:u.version}),this.setState(d.State.Ready(u)))}onUpdateNotAvailable(){this.state.type==="checking for updates"&&(this.telemetryService.publicLog2("update:notAvailable",{explicit:this.state.explicit}),this.setState(d.State.Idle(1)))}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),C.autoUpdater.quitAndInstall()}dispose(){this.disposables.dispose()}};we([t.memoize],f.prototype,"onRawError",null),we([t.memoize],f.prototype,"onRawUpdateNotAvailable",null),we([t.memoize],f.prototype,"onRawUpdateAvailable",null),we([t.memoize],f.prototype,"onRawUpdateDownloaded",null),f=we([ie(0,p.ILifecycleMainService),ie(1,R.IConfigurationService),ie(2,E.ITelemetryService),ie(3,P.IEnvironmentMainService),ie(4,I.IRequestService),ie(5,m.ILogService),ie(6,y.IProductService)],f),e.DarwinUpdateService=f}),define(ee[244],te([0,1,46,40,8,3,9,27,21,6,31,49]),function(j,e,C,t,k,L,R,P,p,m,y,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnapUpdateService=void 0;let E=class{get state(){return this._state}setState(f){this.logService.info("update#setState",f.type),this._state=f,this._onStateChange.fire(f)}constructor(f,v,u){if(this.lifecycleMainService=f,this.logService=u,this._state=I.State.Uninitialized,this._onStateChange=new L.Emitter,this.onStateChange=this._onStateChange.event,v.disableUpdates){this.logService.info("update#ctor - updates are disabled");return}this.setState(I.State.Idle(this.getUpdateType())),this.scheduleCheckForUpdates(30*1e3).then(void 0,S=>this.logService.error(S))}scheduleCheckForUpdates(f=60*60*1e3){return(0,k.timeout)(f).then(()=>this.checkForUpdates(!1)).then(()=>this.scheduleCheckForUpdates(60*60*1e3))}async checkForUpdates(f){this.logService.trace("update#checkForUpdates, state = ",this.state.type),this.state.type==="idle"&&this.doCheckForUpdates(f)}async downloadUpdate(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),this.state.type==="available for download"&&await this.doDownloadUpdate(this.state)}doDownloadUpdate(f){return Promise.resolve(void 0)}async applyUpdate(){this.logService.trace("update#applyUpdate, state = ",this.state.type),this.state.type==="downloaded"&&await this.doApplyUpdate()}doApplyUpdate(){return Promise.resolve(void 0)}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),this.state.type!=="ready"||(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleMainService.quit(!0).then(f=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${f}`),!f&&(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())})),Promise.resolve(void 0)}getUpdateType(){return 2}doQuitAndInstall(){}async _applySpecificUpdate(f){}};E=we([ie(0,p.ILifecycleMainService),ie(1,P.IEnvironmentMainService),ie(2,m.ILogService)],E);let d=class extends E{constructor(f,v,u,S,g,h){super(u,S,g),this.snap=f,this.snapRevision=v,this.telemetryService=h;const l=(0,t.watch)(R.dirname(this.snap)),i=L.Event.fromNodeEventEmitter(l,"change",(r,c)=>c),s=L.Event.filter(i,r=>r==="current"),a=L.Event.debounce(s,(r,c)=>c,2e3)(()=>this.checkForUpdates(!1));u.onWillShutdown(()=>{a.dispose(),l.close()})}doCheckForUpdates(){this.setState(I.State.CheckingForUpdates(!1)),this.isUpdateAvailable().then(f=>{f?this.setState(I.State.Ready({version:"something",productVersion:"something"})):(this.telemetryService.publicLog2("update:notAvailable",{explicit:!1}),this.setState(I.State.Idle(2)))},f=>{this.logService.error(f),this.telemetryService.publicLog2("update:notAvailable",{explicit:!1}),this.setState(I.State.Idle(2,f.message||f))})}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),(0,C.spawn)("sleep 3 && "+R.basename(process.argv[0]),{shell:!0,detached:!0,stdio:"ignore"})}async isUpdateAvailable(){const f=await new Promise((u,S)=>(0,t.realpath)(`${R.dirname(this.snap)}/current`,(g,h)=>g?S(g):u(h))),v=R.basename(f);return this.snapRevision!==v}isLatestVersion(){return this.isUpdateAvailable().then(void 0,f=>{this.logService.error("update#checkForSnapUpdate(): Could not get realpath of application.")})}};d=we([ie(2,p.ILifecycleMainService),ie(3,P.IEnvironmentMainService),ie(4,m.ILogService),ie(5,y.ITelemetryService)],d),e.SnapUpdateService=d}),define(ee[42],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IUriIdentityService=void 0,e.IUriIdentityService=(0,C.createDecorator)("IUriIdentityService")}),define(ee[245],te([0,1,42,190,16,20,127,3,2]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UriIdentityService=void 0;class m{constructor(E){this.uri=E,this.time=m._clock++}touch(){return this.time=m._clock++,this}}m._clock=0;let y=class{constructor(E){this._fileService=E,this._dispooables=new p.DisposableStore,this._limit=2**16;const d=new Map,w=f=>{let v=d.get(f.scheme);return v===void 0&&(v=E.hasProvider(f)&&!this._fileService.hasCapability(f,1024),d.set(f.scheme,v)),v};this._dispooables.add(P.Event.any(E.onDidChangeFileSystemProviderRegistrations,E.onDidChangeFileSystemProviderCapabilities)(f=>{d.delete(f.scheme)})),this.extUri=new L.ExtUri(w),this._canonicalUris=new R.SkipList((f,v)=>this.extUri.compare(f,v,!0),this._limit)}dispose(){this._dispooables.dispose(),this._canonicalUris.clear()}asCanonicalUri(E){this._fileService.hasProvider(E)&&(E=(0,L.normalizePath)(E));const d=this._canonicalUris.get(E);return d?d.touch().uri.with({fragment:E.fragment}):(this._canonicalUris.set(E,new m(E)),this._checkTrim(),E)}_checkTrim(){if(this._canonicalUris.size<this._limit)return;const E=[...this._canonicalUris.entries()].sort((w,f)=>w[1].touch<f[1].touch?1:w[1].touch>f[1].touch?-1:0);m._clock=0,this._canonicalUris.clear();const d=this._limit*.5;for(let w=0;w<d;w++)this._canonicalUris.set(E[w][0],E[w][1].touch())}};y=we([ie(0,k.IFileService)],y),e.UriIdentityService=y,(0,t.registerSingleton)(C.IUriIdentityService,y,1)}),define(ee[116],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IURLService=void 0,e.IURLService=(0,C.createDecorator)("urlService")}),define(ee[246],te([0,1,7]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.URLHandlerRouter=e.URLHandlerChannelClient=e.URLHandlerChannel=void 0;class t{constructor(P){this.handler=P}listen(P,p){throw new Error(`Event not found: ${p}`)}call(P,p,m){switch(p){case"handleURL":return this.handler.handleURL(C.URI.revive(m[0]),m[1])}throw new Error(`Call not found: ${p}`)}}e.URLHandlerChannel=t;class k{constructor(P){this.channel=P}handleURL(P,p){return this.channel.call("handleURL",[P.toJSON(),p])}}e.URLHandlerChannelClient=k;class L{constructor(P){this.next=P}async routeCall(P,p,m,y){if(p!=="handleURL")throw new Error(`Call not found: ${p}`);if(m){const I=C.URI.revive(m);if(I&&I.query){const E=/\bwindowId=(\d+)/.exec(I.query);if(E){const d=E[1],w=new RegExp(`window:${d}`),f=P.connections.find(v=>w.test(v.ctx));if(f)return f}}}return this.next.routeCall(P,p,m,y)}routeEvent(P,p){throw new Error(`Event not found: ${p}`)}}e.URLHandlerRouter=L}),define(ee[247],te([0,1,8,2,7,19]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeURLService=e.AbstractURLService=void 0;class R extends t.Disposable{constructor(){super(...arguments),this.handlers=new Set}open(m,y){const I=[...this.handlers.values()];return(0,C.first)(I.map(E=>()=>E.handleURL(m,y)),void 0,!1).then(E=>E||!1)}registerHandler(m){return this.handlers.add(m),(0,t.toDisposable)(()=>this.handlers.delete(m))}}e.AbstractURLService=R;let P=class extends R{constructor(m){super(),this.productService=m}create(m){let{authority:y,path:I,query:E,fragment:d}=m||{authority:void 0,path:void 0,query:void 0,fragment:void 0};return y&&I&&I.indexOf("/")!==0&&(I=`/${I}`),k.URI.from({scheme:this.productService.urlProtocol,authority:y,path:I,query:E,fragment:d})}};P=we([ie(0,L.IProductService)],P),e.NativeURLService=P}),define(ee[248],te([0,1,13,8,3,2,4,7]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronURLListener=void 0;function p(y){try{return P.URI.parse(y)}catch{return null}}class m{constructor(I,E,d,w,f){if(this.urlService=E,this.uris=[],this.retryCount=0,this.flushDisposable=L.Disposable.None,this.disposables=new L.DisposableStore,this.uris=I,R.isWindows){const S=w.isBuilt?[]:[`"${w.appRoot}"`];S.push("--open-url","--"),C.app.setAsDefaultProtocolClient(f.urlProtocol,process.execPath,S)}const v=k.Event.map(k.Event.fromNodeEventEmitter(C.app,"open-url",(S,g)=>({event:S,url:g})),({event:S,url:g})=>(S.preventDefault(),g));this.disposables.add(v(S=>{const g=p(S);!g||this.urlService.open(g,{originalUrl:S})})),d.getWindows().filter(S=>S.isReady).length>0?this.flush():k.Event.once(d.onDidSignalReadyWindow)(this.flush,this,this.disposables)}async flush(){if(this.retryCount++>10)return;const I=[];for(const E of this.uris)await this.urlService.open(E.uri,{originalUrl:E.url})||I.push(E);I.length!==0&&(this.uris=I,this.flushDisposable=(0,t.disposableTimeout)(()=>this.flush(),500))}dispose(){this.disposables.dispose(),this.flushDisposable.dispose()}}e.ElectronURLListener=m}),define(ee[249],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IWebviewManagerService=void 0,e.IWebviewManagerService=(0,C.createDecorator)("webviewManagerService")}),define(ee[250],te([0,1,13,2,14,7]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebviewProtocolProvider=void 0;class R extends t.Disposable{constructor(){super();const p=this.handleWebviewRequest.bind(this);C.protocol.registerFileProtocol(k.Schemas.vscodeWebview,p)}handleWebviewRequest(p,m){try{const y=L.URI.parse(p.url),I=R.validWebviewFilePaths.get(y.path);if(typeof I=="string"){const E=`vs/workbench/contrib/webview/browser/pre/${I}`,d=k.FileAccess.asFileUri(E);return m({path:decodeURIComponent(d.fsPath),headers:{...k.COI.getHeadersFromQuery(p.url),"Cross-Origin-Resource-Policy":"cross-origin"}})}else return m({error:-10})}catch{}return m({error:-2})}}e.WebviewProtocolProvider=R,R.validWebviewFilePaths=new Map([["/index.html","index.html"],["/fake.html","fake.html"],["/service-worker.js","service-worker.js"]])}),define(ee[74],te([0,1,4]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoomLevelToZoomFactor=e.useWindowControlsOverlay=e.getTitleBarStyle=e.getMenuBarVisibility=e.isFileToOpen=e.isFolderToOpen=e.isWorkspaceToOpen=e.WindowMinimumSize=void 0,e.WindowMinimumSize={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};function t(y){return!!y.workspaceUri}e.isWorkspaceToOpen=t;function k(y){return!!y.folderUri}e.isFolderToOpen=k;function L(y){return!!y.fileUri}e.isFileToOpen=L;function R(y){const I=P(y),E=y.getValue("window.menuBarVisibility");return E==="default"||I==="native"&&E==="compact"||C.isMacintosh&&C.isNative?"classic":E}e.getMenuBarVisibility=R;function P(y){if(C.isWeb)return"custom";const I=y.getValue("window");if(I){if(C.isMacintosh&&I.nativeTabs===!0||C.isMacintosh&&I.nativeFullScreen===!1)return"native";const w=I.titleBarStyle;if(w==="native"||w==="custom")return w}return C.isLinux?"native":"custom"}e.getTitleBarStyle=P;function p(y){if(!C.isWindows||C.isWeb||P(y)==="native")return!1;const I=y.getValue("window.experimental.windowControlsOverlay.enabled");return typeof I=="boolean"?I:!0}e.useWindowControlsOverlay=p;function m(y=0){return Math.pow(1.2,y)}e.zoomLevelToZoomFactor=m}),define(ee[117],te([0,1]),function(j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WindowError=e.WindowMode=e.defaultWindowState=e.UnloadReason=e.LoadReason=void 0;var C;(function(P){P[P.INITIAL=1]="INITIAL",P[P.LOAD=2]="LOAD",P[P.RELOAD=3]="RELOAD"})(C=e.LoadReason||(e.LoadReason={}));var t;(function(P){P[P.CLOSE=1]="CLOSE",P[P.QUIT=2]="QUIT",P[P.RELOAD=3]="RELOAD",P[P.LOAD=4]="LOAD"})(t=e.UnloadReason||(e.UnloadReason={}));const k=function(P=1){return{width:/*Windhawk*/1280/*1024*/,height:768,mode:P}};e.defaultWindowState=k;var L;(function(P){P[P.Maximized=0]="Maximized",P[P.Normal=1]="Normal",P[P.Minimized=2]="Minimized",P[P.Fullscreen=3]="Fullscreen"})(L=e.WindowMode||(e.WindowMode={}));var R;(function(P){P[P.UNRESPONSIVE=1]="UNRESPONSIVE",P[P.PROCESS_GONE=2]="PROCESS_GONE",P[P.LOAD=3]="LOAD"})(R=e.WindowError||(e.WindowError={}))}),define(ee[32],te([0,1,5]),function(j,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenContext=e.IWindowsMainService=void 0,e.IWindowsMainService=(0,C.createDecorator)("windowsMainService");var t;(function(k){k[k.CLI=0]="CLI",k[k.DOCK=1]="DOCK",k[k.MENU=2]="MENU",k[k.DIALOG=3]="DIALOG",k[k.DESKTOP=4]="DESKTOP",k[k.API=5]="API"})(t=e.OpenContext||(e.OpenContext={}))}),define(ee[251],te([0,1,13,22,3,68,2,29,71,107,6,19,32]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyAuthHandler=void 0;var d;(function(f){f[f.Initial=1]="Initial",f[f.StoredCredentialsUsed=2]="StoredCredentialsUsed",f[f.LoginDialogShown=3]="LoginDialogShown"})(d||(d={}));let w=class extends R.Disposable{constructor(v,u,S,g,h){super(),this.logService=v,this.windowsMainService=u,this.credentialsService=S,this.encryptionMainService=g,this.productService=h,this.PROXY_CREDENTIALS_SERVICE_KEY=`${this.productService.urlProtocol}.proxy-credentials`,this.pendingProxyResolve=void 0,this.state=d.Initial,this.sessionCredentials=void 0,this.registerListeners()}registerListeners(){const v=k.Event.fromNodeEventEmitter(C.app,"login",(u,S,g,h,l)=>({event:u,webContents:S,req:g,authInfo:h,callback:l}));this._register(v(this.onLogin,this))}async onLogin({event:v,authInfo:u,req:S,callback:g}){if(!u.isProxy)return;if(!this.pendingProxyResolve&&this.state===d.LoginDialogShown&&S.firstAuthAttempt){this.logService.trace("auth#onLogin (proxy) - exit - proxy dialog already shown");return}v.preventDefault();let h;if(this.pendingProxyResolve)this.logService.trace("auth#onLogin (proxy) - pending proxy handling found"),h=await this.pendingProxyResolve;else{this.logService.trace("auth#onLogin (proxy) - no pending proxy handling found, starting new"),this.pendingProxyResolve=this.resolveProxyCredentials(u);try{h=await this.pendingProxyResolve}finally{this.pendingProxyResolve=void 0}}g(h?.username,h?.password)}async resolveProxyCredentials(v){this.logService.trace("auth#resolveProxyCredentials (proxy) - enter");try{const u=await this.doResolveProxyCredentials(v);if(u)return this.logService.trace("auth#resolveProxyCredentials (proxy) - got credentials"),u;this.logService.trace("auth#resolveProxyCredentials (proxy) - did not get credentials")}finally{this.logService.trace("auth#resolveProxyCredentials (proxy) - exit")}}async doResolveProxyCredentials(v){this.logService.trace("auth#doResolveProxyCredentials - enter",v);const u=String((0,L.hash)({scheme:v.scheme,host:v.host,port:v.port}));let S,g;try{const s=await this.credentialsService.getPassword(this.PROXY_CREDENTIALS_SERVICE_KEY,u);if(s){const n=JSON.parse(await this.encryptionMainService.decrypt(s));S=n.username,g=n.password}}catch(s){this.logService.error(s)}if(this.state!==d.StoredCredentialsUsed&&typeof S=="string"&&typeof g=="string")return this.logService.trace("auth#doResolveProxyCredentials (proxy) - exit - found stored credentials to use"),this.state=d.StoredCredentialsUsed,{username:S,password:g};const h=this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow();if(!h){this.logService.trace("auth#doResolveProxyCredentials (proxy) - exit - no opened window found to show dialog in");return}this.logService.trace(`auth#doResolveProxyCredentials (proxy) - asking window ${h.id} to handle proxy login`);const l={authInfo:v,username:this.sessionCredentials?.username??S,password:this.sessionCredentials?.password??g,replyChannel:`vscode:proxyAuthResponse:${(0,P.generateUuid)()}`};h.sendWhenReady("vscode:openProxyAuthenticationDialog",t.CancellationToken.None,l),this.state=d.LoginDialogShown;const i=await new Promise(s=>{const n=async(a,r,c)=>{if(r===l.replyChannel)if(this.logService.trace(`auth#doResolveProxyCredentials - exit - received credentials from window ${h.id}`),h.win?.webContents.off("ipc-message",n),c){const o={username:c.username,password:c.password};try{if(c.remember){const b=await this.encryptionMainService.encrypt(JSON.stringify(o));await this.credentialsService.setPassword(this.PROXY_CREDENTIALS_SERVICE_KEY,u,b)}else await this.credentialsService.deletePassword(this.PROXY_CREDENTIALS_SERVICE_KEY,u)}catch(b){this.logService.error(b)}s({username:o.username,password:o.password})}else s(void 0)};h.win?.webContents.on("ipc-message",n)});return this.sessionCredentials=i,i}};w=we([ie(0,y.ILogService),ie(1,E.IWindowsMainService),ie(2,p.ICredentialsMainService),ie(3,m.IEncryptionMainService),ie(4,I.IProductService)],w),e.ProxyAuthHandler=w}),define(ee[252],te([0,1,71,6,35,19,32,202]),function(j,e,C,t,k,L,R,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CredentialsNativeMainService=void 0;let p=class extends P.BaseCredentialsMainService{constructor(y,I,E,d){super(y),this.environmentMainService=I,this.productService=E,this.windowsMainService=d,this.surfaceKeytarLoadError=w=>{this.windowsMainService.sendToFocused("vscode:showCredentialsError",w.message??w)}}async getSecretStoragePrefix(){return Promise.resolve(this.productService.urlProtocol)}async withKeytar(){if(this._keytarCache)return this._keytarCache;if(this.environmentMainService.disableKeytar)return this.logService.info("Keytar is disabled. Using in-memory credential store instead."),this._keytarCache=new C.InMemoryCredentialsProvider,this._keytarCache;const y=await new Promise((I,E)=>{j(["keytar"],I,E)});return await y.findCredentials("test-keytar-loads"),this._keytarCache=y,this._keytarCache}};p=we([ie(0,t.ILogService),ie(1,k.INativeEnvironmentService),ie(2,L.IProductService),ie(3,R.IWindowsMainService)],p),e.CredentialsNativeMainService=p}),define(ee[253],te([0,1,15,2,3,6,21,80,46,283,8,14,44,4,33,13,32]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionHostStarter=void 0;const u=f.utilityProcess,S=typeof u<"u";let g=class Ut{constructor(s,n,a){this._logService=s,this._windowsMainService=a,this._shutdown=!1,this._extHosts=new Map,n.onWillShutdown(r=>{this._shutdown=!0,r.join(this._waitForAllExit(6e3))})}dispose(){}_getExtHost(s){const n=this._extHosts.get(s);if(!n)throw new Error("Unknown extension host!");return n}onDynamicStdout(s){return this._getExtHost(s).onStdout}onDynamicStderr(s){return this._getExtHost(s).onStderr}onDynamicMessage(s){return this._getExtHost(s).onMessage}onDynamicError(s){return this._getExtHost(s).onError}onDynamicExit(s){return this._getExtHost(s).onExit}async canUseUtilityProcess(){return S}async createExtensionHost(s){if(this._shutdown)throw(0,C.canceled)();const n=String(++Ut._lastId);let a;if(s){if(!S)throw new Error("Cannot use UtilityProcess!");a=new l(n,this._logService,this._windowsMainService)}else a=new h(n,this._logService);return this._extHosts.set(n,a),a.onExit(({pid:r,code:c,signal:o})=>{this._logService.info(`Extension host with pid ${r} exited with code: ${c}, signal: ${o}.`),setTimeout(()=>{a.dispose(),this._extHosts.delete(n)})}),{id:n}}async start(s,n){if(this._shutdown)throw(0,C.canceled)();return this._getExtHost(s).start(n)}async enableInspectPort(s){if(this._shutdown)throw(0,C.canceled)();const n=this._extHosts.get(s);return n?n.enableInspectPort():!1}async kill(s){if(this._shutdown)throw(0,C.canceled)();const n=this._extHosts.get(s);!n||n.kill()}async _killAllNow(){for(const[,s]of this._extHosts)s.kill()}async _waitForAllExit(s){const n=[];for(const[,a]of this._extHosts)n.push(a.waitForExit(s));return y.Promises.settled(n).then(()=>{})}};g._lastId=0,g=we([ie(0,L.ILogService),ie(1,R.ILifecycleMainService),ie(2,v.IWindowsMainService)],g),e.ExtensionHostStarter=g;let h=class extends t.Disposable{constructor(s,n){super(),this.id=s,this._logService=n,this._onStdout=this._register(new k.Emitter),this.onStdout=this._onStdout.event,this._onStderr=this._register(new k.Emitter),this.onStderr=this._onStderr.event,this._onMessage=this._register(new k.Emitter),this.onMessage=this._onMessage.event,this._onError=this._register(new k.Emitter),this.onError=this._onError.event,this._onExit=this._register(new k.Emitter),this.onExit=this._onExit.event,this._process=null,this._hasExited=!1}start(s){d.isCI&&this._logService.info("Calling fork to start extension host...");const n=P.StopWatch.create(!1);this._process=(0,p.fork)(I.FileAccess.asFileUri("bootstrap-fork").fsPath,["--type=extensionHost","--skipWorkspaceStorageLock"],(0,E.mixin)({cwd:(0,w.cwd)()},s));const a=n.elapsed(),r=this._process.pid;this._logService.info(`Starting extension host with pid ${r} (fork() took ${a} ms).`);const c=new m.StringDecoder("utf-8");this._process.stdout?.on("data",b=>{const D=typeof b=="string"?b:c.write(b);this._onStdout.fire(D)});const o=new m.StringDecoder("utf-8");this._process.stderr?.on("data",b=>{const D=typeof b=="string"?b:o.write(b);this._onStderr.fire(D)}),this._process.on("message",b=>{this._onMessage.fire(b)}),this._process.on("error",b=>{this._onError.fire({error:(0,C.transformErrorForSerialization)(b)})}),this._process.on("exit",(b,D)=>{this._hasExited=!0,this._onExit.fire({pid:r,code:b,signal:D})})}enableInspectPort(){return this._process?(this._logService.info(`Enabling inspect port on extension host with pid ${this._process.pid}.`),typeof process._debugProcess=="function"?(process._debugProcess(this._process.pid),!0):d.isWindows?!1:(this._process.kill("SIGUSR1"),!0)):!1}kill(){!this._process||(this._logService.info(`Killing extension host with pid ${this._process.pid}.`),this._process.kill())}async waitForExit(s){if(!this._process)return;const n=this._process.pid;this._logService.info(`Waiting for extension host with pid ${n} to exit.`),await Promise.race([k.Event.toPromise(this.onExit),(0,y.timeout)(s)]),this._hasExited||(this._logService.info(`Extension host with pid ${n} did not exit within ${s}ms.`),this._process.kill())}};h=we([ie(1,L.ILogService)],h);let l=class extends t.Disposable{constructor(s,n,a){super(),this.id=s,this._logService=n,this._windowsMainService=a,this.onError=k.Event.None,this._onStdout=this._register(new k.Emitter),this.onStdout=this._onStdout.event,this._onStderr=this._register(new k.Emitter),this.onStderr=this._onStderr.event,this._onMessage=this._register(new k.Emitter),this.onMessage=this._onMessage.event,this._onExit=this._register(new k.Emitter),this.onExit=this._onExit.event,this._process=null,this._hasExited=!1}start(s){const n=this._windowsMainService.getWindowById(s.responseWindowId);if(!n){this._logService.info(`UtilityProcess<${this.id}>: Refusing to create new Extension Host UtilityProcess because requesting window cannot be found...`);return}const a=n.win;if(!a||a.isDestroyed()||a.webContents.isDestroyed()){this._logService.info(`UtilityProcess<${this.id}>: Refusing to create new Extension Host UtilityProcess because requesting window cannot be found...`);return}const r=`extensionHost${this.id}`,c=I.FileAccess.asFileUri("bootstrap-fork.js").fsPath,o=["--type=extensionHost","--skipWorkspaceStorageLock"],b=s.execArgv||[],D={...s.env},A=!0,N="pipe";for(const ne of Object.keys(D))D[ne]=String(D[ne]);this._logService.info(`UtilityProcess<${this.id}>: Creating new...`),this._process=u.fork(c,o,{serviceName:r,env:D,execArgv:b,allowLoadingUnsignedLibraries:A,stdio:N});const G=new m.StringDecoder("utf-8");this._process.stdout?.on("data",ne=>{const fe=typeof ne=="string"?ne:G.write(ne);this._onStdout.fire(fe)});const ae=new m.StringDecoder("utf-8");this._process.stderr?.on("data",ne=>{const fe=typeof ne=="string"?ne:ae.write(ne);this._onStderr.fire(fe)}),this._process.on("message",ne=>{this._onMessage.fire(ne)}),this._register(k.Event.fromNodeEventEmitter(this._process,"spawn")(()=>{this._logService.info(`UtilityProcess<${this.id}>: received spawn event.`)}));const x=k.Event.fromNodeEventEmitter(this._process,"exit",ne=>ne);this._register(x(ne=>{this._logService.info(`UtilityProcess<${this.id}>: received exit event with code ${ne}.`),this._hasExited=!0,this._onExit.fire({pid:this._process.pid,code:ne,signal:""})}));const{port1:Q,port2:re}=new f.MessageChannelMain;this._process.postMessage("null",[re]),a.webContents.postMessage(s.responseChannel,s.responseNonce,[Q])}enableInspectPort(){return this._process?(this._logService.info(`UtilityProcess<${this.id}>: Enabling inspect port on extension host with pid ${this._process.pid}.`),typeof process._debugProcess=="function"?(process._debugProcess(this._process.pid),!0):!1):!1}kill(){!this._process||(this._logService.info(`UtilityProcess<${this.id}>: Killing extension host with pid ${this._process.pid}.`),this._process.kill())}async waitForExit(s){if(!this._process)return;const n=this._process.pid;this._logService.info(`UtilityProcess<${this.id}>: Waiting for extension host with pid ${n} to exit.`),await Promise.race([k.Event.toPromise(this.onExit),(0,y.timeout)(s)]),this._hasExited||(this._logService.info(`UtilityProcess<${this.id}>: Extension host with pid ${n} did not exit within ${s}ms, will kill it now.`),this._process.kill())}};l=we([ie(1,L.ILogService),ie(2,v.IWindowsMainService)],l)}),define(ee[254],te([0,1,13,24,4,7,23,18,61,5,6,116,32]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LaunchMainService=e.ILaunchMainService=e.ID=void 0,e.ID="launchMainService",e.ILaunchMainService=(0,m.createDecorator)(e.ID);let d=class{constructor(f,v,u,S){this.logService=f,this.windowsMainService=v,this.urlService=u,this.configurationService=S}async start(f,v){this.logService.trace("Received data from other instance: ",f,v),k.isMacintosh&&C.app.focus({steal:!0});const u=this.parseOpenUrl(f);if(u.length){let S=Promise.resolve();if(this.windowsMainService.getWindowCount()===0){const g=(0,t.firstOrDefault)(await this.windowsMainService.openEmptyWindow({context:4}));g&&(S=g.ready())}S.then(()=>{for(const{uri:g,url:h}of u)this.urlService.open(g,{originalUrl:h})})}else return this.startOpenWindow(f,v)}parseOpenUrl(f){return f["open-url"]&&f._urls&&f._urls.length>0?(0,t.coalesce)(f._urls.map(v=>{try{return{uri:L.URI.parse(v),url:v}}catch{return null}})):[]}async startOpenWindow(f,v){const u=(0,p.isLaunchedFromCli)(v)?0:4;let S=[];const g=f.wait&&f.waitMarkerFilePath?L.URI.file(f.waitMarkerFilePath):void 0,h=f.remote||void 0,l={context:u,cli:f,userEnv:v,waitMarkerFileURI:g,remoteAuthority:h,forceProfile:f.profile,forceTempProfile:f["profile-temp"]};if(f.extensionDevelopmentPath)await this.windowsMainService.openExtensionDevelopmentHostWindow(f.extensionDevelopmentPath,l);else if(!f._.length&&!f["folder-uri"]&&!f["file-uri"]){let i=!1;if(f["new-window"]||f["unity-launch"]||l.forceProfile||l.forceTempProfile)i=!0;else if(f["reuse-window"])i=!1;else switch(this.configurationService.getValue("window")?.openWithoutArgumentsInNewWindow||"default"){case"on":i=!0;break;case"off":i=!1;break;default:i=!k.isMacintosh}if(i)S=await this.windowsMainService.open({...l,forceNewWindow:!0,forceEmpty:!0});else{const s=this.windowsMainService.getLastActiveWindow();s?(this.windowsMainService.openExistingWindow(s,l),S=[s]):S=await this.windowsMainService.open({...l,forceEmpty:!0})}}else S=await this.windowsMainService.open({...l,forceNewWindow:f["new-window"],preferNewWindow:!f["reuse-window"]&&!f.wait,forceReuseWindow:f["reuse-window"],diffMode:f.diff,mergeMode:f.merge,addMode:f.add,noRecentEntry:!!f["skip-add-to-recently-opened"],gotoLineMode:f.goto});if(g&&S.length===1&&S[0])return Promise.race([S[0].whenClosedOrLoaded,(0,R.whenDeleted)(g.fsPath)]).then(()=>{},()=>{})}async getMainProcessId(){return this.logService.trace("Received request for process ID from other instance."),process.pid}};d=we([ie(0,y.ILogService),ie(1,E.IWindowsMainService),ie(2,I.IURLService),ie(3,P.IConfigurationService)],d),e.LaunchMainService=d}),define(ee[255],te([0,1,13,3,2,250,32]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebviewMainService=void 0;let P=class extends k.Disposable{constructor(m){super(),this.windowsMainService=m,this._onFoundInFrame=this._register(new t.Emitter),this.onFoundInFrame=this._onFoundInFrame.event,this._register(new L.WebviewProtocolProvider)}async setIgnoreMenuShortcuts(m,y){let I;if(typeof m.windowId=="number"){const{windowId:E}=m,d=this.windowsMainService.getWindowById(E);if(!d?.win)throw new Error(`Invalid windowId: ${E}`);I=d.win.webContents}else{const{webContentsId:E}=m;if(I=C.webContents.fromId(E),!I)throw new Error(`Invalid webContentsId: ${E}`)}I.isDestroyed()||I.setIgnoreMenuShortcuts(y)}async findInFrame(m,y,I,E){const w=this.getFrameByName(m,y);if(typeof w.findInFrame=="function"){w.findInFrame(I,{findNext:E.findNext,forward:E.forward});const f=(v,u)=>{u.finalUpdate&&(this._onFoundInFrame.fire(u),w.removeListener("found-in-frame",f))};w.on("found-in-frame",f)}}async stopFindInFrame(m,y,I){const d=this.getFrameByName(m,y);typeof d.stopFindInFrame=="function"&&d.stopFindInFrame(I.keepSelection?"keepSelection":"clearSelection")}getFrameByName(m,y){const I=this.windowsMainService.getWindowById(m.windowId);if(!I?.win)throw new Error(`Invalid windowId: ${m}`);const E=I.win.webContents.mainFrame.framesInSubtree.find(d=>d.name===y);if(!E)throw new Error(`Unknown frame: ${y}`);return E}};P=we([ie(0,R.IWindowsMainService)],P),e.WebviewMainService=P}),define(ee[256],te([0,1,8,3,2]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActiveWindowManager=void 0;class L extends k.Disposable{constructor({onDidOpenWindow:P,onDidFocusWindow:p,getActiveWindowId:m}){super(),this.disposables=this._register(new k.DisposableStore),t.Event.latch(t.Event.any(P,p))(this.setActiveWindow,this,this.disposables),this.firstActiveWindowIdPromise=(0,C.createCancelablePromise)(()=>m()),(async()=>{try{const I=await this.firstActiveWindowIdPromise;this.activeWindowId=typeof this.activeWindowId=="number"?this.activeWindowId:I}catch{}finally{this.firstActiveWindowIdPromise=void 0}})()}setActiveWindow(P){this.firstActiveWindowIdPromise&&(this.firstActiveWindowIdPromise.cancel(),this.firstActiveWindowIdPromise=void 0),this.activeWindowId=P}async getActiveClientId(){return`window:${this.firstActiveWindowIdPromise?await this.firstActiveWindowIdPromise:this.activeWindowId}`}}e.ActiveWindowManager=L}),define(ee[28],te([0,1,174,9,60,20,7,5,14]),function(j,e,C,t,k,L,R,P,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasWorkspaceFileExtension=e.isSavedWorkspace=e.isTemporaryWorkspace=e.isUntitledWorkspace=e.UNTITLED_WORKSPACE_NAME=e.WORKSPACE_FILTER=e.WORKSPACE_SUFFIX=e.WORKSPACE_EXTENSION=e.toWorkspaceFolder=e.WorkspaceFolder=e.Workspace=e.isWorkspaceFolder=e.isWorkspace=e.WorkbenchState=e.reviveIdentifier=e.isWorkspaceIdentifier=e.toWorkspaceIdentifier=e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE=e.isSingleFolderWorkspaceIdentifier=e.IWorkspaceContextService=void 0,e.IWorkspaceContextService=(0,P.createDecorator)("contextService");function m(s){const n=s;return typeof n?.id=="string"&&R.URI.isUri(n.uri)}e.isSingleFolderWorkspaceIdentifier=m,e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE={id:"ext-dev"};function y(s,n){if(typeof s=="string"||typeof s>"u")return typeof s=="string"?{id:(0,t.basename)(s)}:n?e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE:void 0;const a=s;if(a.configuration)return{id:a.id,configPath:a.configuration};if(a.folders.length===1)return{id:a.id,uri:a.folders[0].uri}}e.toWorkspaceIdentifier=y;function I(s){const n=s;return typeof n?.id=="string"&&R.URI.isUri(n.configPath)}e.isWorkspaceIdentifier=I;function E(s){const n=s;if(n?.uri)return{id:n.id,uri:R.URI.revive(n.uri)};const a=s;if(a?.configPath)return{id:a.id,configPath:R.URI.revive(a.configPath)};if(s?.id)return{id:s.id}}e.reviveIdentifier=E;var d;(function(s){s[s.EMPTY=1]="EMPTY",s[s.FOLDER=2]="FOLDER",s[s.WORKSPACE=3]="WORKSPACE"})(d=e.WorkbenchState||(e.WorkbenchState={}));function w(s){const n=s;return!!(n&&typeof n=="object"&&typeof n.id=="string"&&Array.isArray(n.folders))}e.isWorkspace=w;function f(s){const n=s;return!!(n&&typeof n=="object"&&R.URI.isUri(n.uri)&&typeof n.name=="string"&&typeof n.toResource=="function")}e.isWorkspaceFolder=f;class v{constructor(n,a,r,c,o){this._id=n,this._transient=r,this._configuration=c,this._ignorePathCasing=o,this._foldersMap=k.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0),this.folders=a}update(n){this._id=n.id,this._configuration=n.configuration,this._transient=n.transient,this._ignorePathCasing=n._ignorePathCasing,this.folders=n.folders}get folders(){return this._folders}set folders(n){this._folders=n,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(n){this._configuration=n}getFolder(n){return n&&this._foldersMap.findSubstr(n)||null}updateFoldersMap(){this._foldersMap=k.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0);for(const n of this.folders)this._foldersMap.set(n.uri,n)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}e.Workspace=v;class u{constructor(n,a){this.raw=a,this.uri=n.uri,this.index=n.index,this.name=n.name}toResource(n){return(0,L.joinPath)(this.uri,n)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}e.WorkspaceFolder=u;function S(s){return new u({uri:s,index:0,name:(0,L.basenameOrAuthority)(s)},{uri:s.toString()})}e.toWorkspaceFolder=S,e.WORKSPACE_EXTENSION="code-workspace",e.WORKSPACE_SUFFIX=`.${e.WORKSPACE_EXTENSION}`,e.WORKSPACE_FILTER=[{name:(0,C.localize)(0,null),extensions:[e.WORKSPACE_EXTENSION]}],e.UNTITLED_WORKSPACE_NAME="workspace.json";function g(s,n){return L.extUriBiasedIgnorePathCase.isEqualOrParent(s,n.untitledWorkspacesHome)}e.isUntitledWorkspace=g;function h(s){let n;return R.URI.isUri(s)?n=s:n=s.configuration,n?.scheme===p.Schemas.tmp}e.isTemporaryWorkspace=h;function l(s,n){return!g(s,n)&&!h(s)}e.isSavedWorkspace=l;function i(s){return(typeof s=="string"?(0,t.extname)(s):(0,L.extname)(s))===e.WORKSPACE_SUFFIX}e.hasWorkspaceFileExtension=i}),define(ee[57],te([0,1,13,8,68,34,2,76,4,12,23,151,5,6,28]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DialogMainService=e.IDialogMainService=void 0,e.IDialogMainService=(0,E.createDecorator)("dialogMainService");let f=class{constructor(u){this.logService=u,this.windowFileDialogLocks=new Map,this.windowDialogQueues=new Map,this.noWindowDialogueQueue=new t.Queue}pickFileFolder(u,S){return this.doPick({...u,pickFolders:!0,pickFiles:!0,title:(0,I.localize)(0,null)},S)}pickFolder(u,S){return this.doPick({...u,pickFolders:!0,title:(0,I.localize)(1,null)},S)}pickFile(u,S){return this.doPick({...u,pickFiles:!0,title:(0,I.localize)(2,null)},S)}pickWorkspace(u,S){const g=(0,I.localize)(3,null),h=(0,L.mnemonicButtonLabel)((0,I.localize)(4,null)),l=w.WORKSPACE_FILTER;return this.doPick({...u,pickFiles:!0,title:g,filters:l,buttonLabel:h},S)}async doPick(u,S){const g={title:u.title,buttonLabel:u.buttonLabel,filters:u.filters,defaultPath:u.defaultPath};(typeof u.pickFiles=="boolean"||typeof u.pickFolders=="boolean")&&(g.properties=void 0,u.pickFiles&&u.pickFolders&&(g.properties=["multiSelections","openDirectory","openFile","createDirectory"])),g.properties||(g.properties=["multiSelections",u.pickFolders?"openDirectory":"openFile","createDirectory"]),p.isMacintosh&&g.properties.push("treatPackageAsDirectory");const h=await this.showOpenDialog(g,(0,m.withNullAsUndefined)(S||C.BrowserWindow.getFocusedWindow()));if(h&&h.filePaths&&h.filePaths.length>0)return h.filePaths}getWindowDialogQueue(u){if(u){let S=this.windowDialogQueues.get(u.id);return S||(S=new t.Queue,this.windowDialogQueues.set(u.id,S)),S}else return this.noWindowDialogueQueue}showMessageBox(u,S){return this.getWindowDialogQueue(S).queue(async()=>S?C.dialog.showMessageBox(S,u):C.dialog.showMessageBox(u))}async showSaveDialog(u,S){const g=this.acquireFileDialogLock(u,S);if(!g)return this.logService.error("[DialogMainService]: file save dialog is already or will be showing for the window with the same configuration"),{canceled:!0};try{return await this.getWindowDialogQueue(S).queue(async()=>{let h;return S?h=await C.dialog.showSaveDialog(S,u):h=await C.dialog.showSaveDialog(u),h.filePath=this.normalizePath(h.filePath),h})}finally{(0,R.dispose)(g)}}normalizePath(u){return u&&p.isMacintosh&&(u=(0,P.normalizeNFC)(u)),u}normalizePaths(u){return u.map(S=>this.normalizePath(S))}async showOpenDialog(u,S){u.defaultPath&&(await y.Promises.exists(u.defaultPath)||(u.defaultPath=void 0));const g=this.acquireFileDialogLock(u,S);if(!g)return this.logService.error("[DialogMainService]: file open dialog is already or will be showing for the window with the same configuration"),{canceled:!0,filePaths:[]};try{return await this.getWindowDialogQueue(S).queue(async()=>{let h;return S?h=await C.dialog.showOpenDialog(S,u):h=await C.dialog.showOpenDialog(u),h.filePaths=this.normalizePaths(h.filePaths),h})}finally{(0,R.dispose)(g)}}acquireFileDialogLock(u,S){if(!S)return R.Disposable.None;this.logService.trace("[DialogMainService]: request to acquire file dialog lock",u);let g=this.windowFileDialogLocks.get(S.id);g||(g=new Set,this.windowFileDialogLocks.set(S.id,g));const h=(0,k.hash)(u);if(!g.has(h))return this.logService.trace("[DialogMainService]: new file dialog lock created",u),g.add(h),(0,R.toDisposable)(()=>{this.logService.trace("[DialogMainService]: file dialog lock disposed",u),g?.delete(h),g?.size===0&&this.windowFileDialogLocks.delete(S.id)})}};f=we([ie(0,d.ILogService)],f),e.DialogMainService=f}),define(ee[257],te([0,1,3,2,69,28]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StorageDatabaseChannel=void 0;class R extends t.Disposable{constructor(p,m){super(),this.logService=p,this.storageMainService=m,this.onDidChangeApplicationStorageEmitter=this._register(new C.Emitter),this.mapProfileToOnDidChangeProfileStorageEmitter=new Map,this.registerStorageChangeListeners(m.applicationStorage,this.onDidChangeApplicationStorageEmitter)}registerStorageChangeListeners(p,m){this._register(C.Event.debounce(p.onDidChangeStorage,(y,I)=>(y?y.push(I):y=[I],y),R.STORAGE_CHANGE_DEBOUNCE_TIME)(y=>{y.length&&m.fire(this.serializeStorageChangeEvents(y,p))}))}serializeStorageChangeEvents(p,m){const y=new Map,I=new Set;return p.forEach(E=>{const d=m.get(E.key);typeof d=="string"?y.set(E.key,d):I.add(E.key)}),{changed:Array.from(y.entries()),deleted:Array.from(I.values())}}listen(p,m,y){switch(m){case"onDidChangeStorage":{const I=y.profile?(0,k.revive)(y.profile):void 0;if(!I)return this.onDidChangeApplicationStorageEmitter.event;let E=this.mapProfileToOnDidChangeProfileStorageEmitter.get(I.id);return E||(E=this._register(new C.Emitter),this.registerStorageChangeListeners(this.storageMainService.profileStorage(I),E),this.mapProfileToOnDidChangeProfileStorageEmitter.set(I.id,E)),E.event}}throw new Error(`Event not found: ${m}`)}async call(p,m,y){const I=y.profile?(0,k.revive)(y.profile):void 0,E=(0,L.reviveIdentifier)(y.workspace),d=await this.withStorageInitialized(I,E);switch(m){case"getItems":return Array.from(d.items.entries());case"updateItems":{const w=y;if(w.insert)for(const[f,v]of w.insert)d.set(f,v);w.delete?.forEach(f=>d.delete(f));break}case"isUsed":{const w=y.payload;if(typeof w=="string")return this.storageMainService.isUsed(w)}default:throw new Error(`Call not found: ${m}`)}}async withStorageInitialized(p,m){let y;m?y=this.storageMainService.workspaceStorage(m):p?y=this.storageMainService.profileStorage(p):y=this.storageMainService.applicationStorage;try{await y.init()}catch(I){this.logService.error(`StorageIPC#init: Unable to init ${m?"workspace":p?"profile":"application"} storage due to ${I}`)}return y}}e.StorageDatabaseChannel=R,R.STORAGE_CHANGE_DEBOUNCE_TIME=100}),define(ee[38],te([0,1,68,3,2,20,7,171,35,16,5,6,28,39,42,8,29,26,12]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryUserDataProfilesService=e.UserDataProfilesService=e.toUserDataProfile=e.reviveProfile=e.IUserDataProfilesService=e.PROFILES_ENABLEMENT_CONFIG=e.isUserDataProfile=void 0;function g(n){const a=n;return!!(a&&typeof a=="object"&&typeof a.id=="string"&&typeof a.isDefault=="boolean"&&typeof a.name=="string"&&R.URI.isUri(a.location)&&R.URI.isUri(a.globalStorageHome)&&R.URI.isUri(a.settingsResource)&&R.URI.isUri(a.keybindingsResource)&&R.URI.isUri(a.tasksResource)&&R.URI.isUri(a.snippetsHome)&&R.URI.isUri(a.extensionsResource))}e.isUserDataProfile=g,e.PROFILES_ENABLEMENT_CONFIG="workbench.experimental.settingsProfiles.enabled",e.IUserDataProfilesService=(0,y.createDecorator)("IUserDataProfilesService");function h(n,a){return{id:n.id,isDefault:n.isDefault,name:n.name,shortName:n.shortName,location:R.URI.revive(n.location).with({scheme:a}),globalStorageHome:R.URI.revive(n.globalStorageHome).with({scheme:a}),settingsResource:R.URI.revive(n.settingsResource).with({scheme:a}),keybindingsResource:R.URI.revive(n.keybindingsResource).with({scheme:a}),tasksResource:R.URI.revive(n.tasksResource).with({scheme:a}),snippetsHome:R.URI.revive(n.snippetsHome).with({scheme:a}),extensionsResource:R.URI.revive(n.extensionsResource)?.with({scheme:a}),useDefaultFlags:n.useDefaultFlags,isTransient:n.isTransient}}e.reviveProfile=h;function l(n,a,r,c){return{id:n,name:a,location:r,isDefault:!1,shortName:c?.shortName,globalStorageHome:(0,L.joinPath)(r,"globalStorage"),settingsResource:(0,L.joinPath)(r,"settings.json"),keybindingsResource:(0,L.joinPath)(r,"keybindings.json"),tasksResource:(0,L.joinPath)(r,"tasks.json"),snippetsHome:(0,L.joinPath)(r,"snippets"),extensionsResource:(0,L.joinPath)(r,"extensions.json"),useDefaultFlags:c?.useDefaultFlags,isTransient:c?.transient}}e.toUserDataProfile=l;let i=class extends k.Disposable{get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(a,r,c,o){super(),this.environmentService=a,this.fileService=r,this.uriIdentityService=c,this.logService=o,this.enabled=!1,this._onDidChangeProfiles=this._register(new t.Emitter),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new t.Emitter),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new t.Emitter),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new t.Emitter),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],workspaces:new d.ResourceMap},this.profilesHome=(0,L.joinPath)(this.environmentService.userRoamingDataHome,"profiles")}setEnablement(a){this.enabled!==a&&(this._profilesObject=void 0,this.enabled=a)}isEnabled(){return this.enabled}get profilesObject(){if(!this._profilesObject){const a=[];if(this.enabled)for(const b of this.getStoredProfiles()){if(!b.name||!(0,S.isString)(b.name)||!b.location){this.logService.warn("Skipping the invalid stored profile",b.location||b.name);continue}a.push(l((0,L.basename)(b.location),b.name,b.location,{shortName:b.shortName,useDefaultFlags:b.useDefaultFlags}))}let r;const c=new d.ResourceMap,o=l((0,C.hash)(this.environmentService.userRoamingDataHome.path).toString(16),(0,P.localize)(0,null),this.environmentService.userRoamingDataHome);if(a.unshift({...o,extensionsResource:this.getDefaultProfileExtensionsLocation()??o.extensionsResource,isDefault:!0}),a.length){const b=this.getStoredProfileAssociations();if(b.workspaces)for(const[D,A]of Object.entries(b.workspaces)){const N=R.URI.parse(D),G=R.URI.parse(A),ae=a.find(x=>this.uriIdentityService.extUri.isEqual(x.location,G));ae&&c.set(N,ae)}if(b.emptyWindow){const D=R.URI.parse(b.emptyWindow);r=a.find(A=>this.uriIdentityService.extUri.isEqual(A.location,D))}}this._profilesObject={profiles:a,workspaces:c,emptyWindow:r}}return this._profilesObject}async createTransientProfile(a){const r="Temp",c=new RegExp(`${(0,u.escapeRegExpCharacters)(r)}\\s(\\d+)`);let o=0;for(const D of this.profiles){const A=c.exec(D.name),N=A?parseInt(A[1]):0;o=N>o?N:o}const b=`${r} ${o+1}`;return this.createProfile((0,C.hash)((0,v.generateUuid)()).toString(16),b,{transient:!0},a)}async createNamedProfile(a,r,c){return this.createProfile((0,C.hash)((0,v.generateUuid)()).toString(16),a,r,c)}async createProfile(a,r,c,o){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);const b=await this.doCreateProfile(a,r,c);return o&&await this.setProfileForWorkspace(o,b),b}async doCreateProfile(a,r,c){if(!(0,S.isString)(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let o=this.profileCreationPromises.get(r);return o||(o=(async()=>{try{const b=this.profiles.find(N=>N.name===r||N.id===a);if(b)return b;const D=l(a,r,(0,L.joinPath)(this.profilesHome,a),c);await this.fileService.createFolder(D.location);const A=[];return this._onWillCreateProfile.fire({profile:D,join(N){A.push(N)}}),await f.Promises.settled(A),this.updateProfiles([D],[],[]),D}finally{this.profileCreationPromises.delete(r)}})(),this.profileCreationPromises.set(r,o)),o}async updateProfile(a,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);let c=this.profiles.find(o=>o.id===a.id);if(!c)throw new Error(`Profile '${a.name}' does not exist`);return c=l(c.id,r.name??c.name,c.location,{shortName:r.shortName??c.shortName,transient:r.transient??c.isTransient,useDefaultFlags:r.useDefaultFlags??c.useDefaultFlags}),this.updateProfiles([],[],[c]),c}async removeProfile(a){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);if(a.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(o=>o.id===a.id);if(!r)throw new Error(`Profile '${a.name}' does not exist`);const c=[];this._onWillRemoveProfile.fire({profile:r,join(o){c.push(o)}});try{await Promise.allSettled(c)}catch(o){this.logService.error(o)}r.id===this.profilesObject.emptyWindow?.id&&(this.profilesObject.emptyWindow=void 0);for(const o of[...this.profilesObject.workspaces.keys()])r.id===this.profilesObject.workspaces.get(o)?.id&&this.profilesObject.workspaces.delete(o);this.updateStoredProfileAssociations(),this.updateProfiles([],[r],[]);try{this.profiles.length===1?await this.fileService.del(this.profilesHome,{recursive:!0}):await this.fileService.del(r.location,{recursive:!0})}catch(o){this.logService.error(o)}}getOrSetProfileForWorkspace(a,r=this.defaultProfile){if(!this.enabled)return this.defaultProfile;let c=this.getProfileForWorkspace(a);return c||(c=r,this.profiles.length>1&&this.setProfileForWorkspaceSync(a,c)),c}async setProfileForWorkspace(a,r){this.setProfileForWorkspaceSync(a,r)}setProfileForWorkspaceSync(a,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);const c=this.profiles.find(o=>o.id===r.id);if(!c)throw new Error(`Profile '${r.name}' does not exist`);this.updateWorkspaceAssociation(a,c)}unsetWorkspace(a,r){if(!this.enabled)throw new Error(`Profiles are disabled. Enable them via the '${e.PROFILES_ENABLEMENT_CONFIG}' setting.`);this.updateWorkspaceAssociation(a,void 0,r)}async resetWorkspaces(){this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindow=void 0,this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindow=void 0,this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(!!this.enabled&&await this.fileService.exists(this.profilesHome)){const a=await this.fileService.resolve(this.profilesHome);await Promise.all((a.children||[]).filter(r=>r.isDirectory&&this.profiles.every(c=>!this.uriIdentityService.extUri.isEqual(c.location,r.resource))).map(r=>this.fileService.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;const a=this.transientProfilesObject.profiles.filter(r=>!this.isProfileAssociatedToWorkspace(r));await Promise.allSettled(a.map(r=>this.removeProfile(r)))}getProfileForWorkspace(a){const r=this.getWorkspace(a);return R.URI.isUri(r)?this.transientProfilesObject.workspaces.get(r)??this.profilesObject.workspaces.get(r):this.transientProfilesObject.emptyWindow??this.profilesObject.emptyWindow}getWorkspace(a){return(0,E.isSingleFolderWorkspaceIdentifier)(a)?a.uri:(0,E.isWorkspaceIdentifier)(a)?a.configPath:"empty-window"}isProfileAssociatedToWorkspace(a){return!!(this.uriIdentityService.extUri.isEqual(this.transientProfilesObject.emptyWindow?.location,a.location)||[...this.transientProfilesObject.workspaces.values()].some(r=>this.uriIdentityService.extUri.isEqual(r.location,a.location))||this.uriIdentityService.extUri.isEqual(this.profilesObject.emptyWindow?.location,a.location)||[...this.profilesObject.workspaces.values()].some(r=>this.uriIdentityService.extUri.isEqual(r.location,a.location)))}updateProfiles(a,r,c){const o=[...this.profiles,...a],b=[];this.transientProfilesObject.profiles=[];for(let D of o)D.isDefault||r.some(A=>D.id===A.id)||(D=c.find(A=>D.id===A.id)??D,D.isTransient?this.transientProfilesObject.profiles.push(D):b.push({location:D.location,name:D.name,shortName:D.shortName,useDefaultFlags:D.useDefaultFlags}));this.saveStoredProfiles(b),this._profilesObject=void 0,this.triggerProfilesChanges(a,r,c)}triggerProfilesChanges(a,r,c){this._onDidChangeProfiles.fire({added:a,removed:r,updated:c,all:this.profiles})}updateWorkspaceAssociation(a,r,c){c=r?.isTransient?!0:c,c||this.updateWorkspaceAssociation(a,void 0,!0);const o=this.getWorkspace(a),b=c?this.transientProfilesObject:this.profilesObject;R.URI.isUri(o)?(b.workspaces.delete(o),r&&b.workspaces.set(o,r)):b.emptyWindow=r,c||this.updateStoredProfileAssociations()}updateStoredProfileAssociations(){const a={};for(const[c,o]of this.profilesObject.workspaces.entries())a[c.toString()]=o.location.toString();const r=this.profilesObject.emptyWindow?.location.toString();this.saveStoredProfileAssociations({workspaces:a,emptyWindow:r}),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(a){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(a){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};i.PROFILES_KEY="userDataProfiles",i.PROFILE_ASSOCIATIONS_KEY="profileAssociations",i=we([ie(0,p.IEnvironmentService),ie(1,m.IFileService),ie(2,w.IUriIdentityService),ie(3,I.ILogService)],i),e.UserDataProfilesService=i;class s extends i{constructor(){super(...arguments),this.storedProfiles=[],this.storedProfileAssociations={}}getStoredProfiles(){return this.storedProfiles}saveStoredProfiles(a){this.storedProfiles=a}getStoredProfileAssociations(){return this.storedProfileAssociations}saveStoredProfileAssociations(a){this.storedProfileAssociations=a}}e.InMemoryUserDataProfilesService=s}),define(ee[91],te([0,1,8,17,2,3,39,7,111,87,16,5,6,38,42]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsProfileScannerService=e.IExtensionsProfileScannerService=void 0,e.IExtensionsProfileScannerService=(0,I.createDecorator)("IExtensionsProfileScannerService");let f=class extends k.Disposable{constructor(S,g,h,l){super(),this.fileService=S,this.userDataProfilesService=g,this.uriIdentityService=h,this.logService=l,this._onAddExtensions=this._register(new L.Emitter),this.onAddExtensions=this._onAddExtensions.event,this._onDidAddExtensions=this._register(new L.Emitter),this.onDidAddExtensions=this._onDidAddExtensions.event,this._onRemoveExtensions=this._register(new L.Emitter),this.onRemoveExtensions=this._onRemoveExtensions.event,this._onDidRemoveExtensions=this._register(new L.Emitter),this.onDidRemoveExtensions=this._onDidRemoveExtensions.event,this.resourcesAccessQueueMap=new R.ResourceMap}scanProfileExtensions(S){return this.withProfileExtensions(S)}async addExtensionsToProfile(S,g){const h=[],l=[];try{return await this.withProfileExtensions(g,i=>{const s=[];for(const n of i)S.some(([a])=>(0,p.areSameExtensions)(a.identifier,n.identifier)&&a.manifest.version!==n.version)?h.push(n):s.push(n);for(const[n,a]of S)if(!s.some(r=>(0,p.areSameExtensions)(r.identifier,n.identifier)&&r.version===n.manifest.version)){const r={identifier:n.identifier,version:n.manifest.version,location:n.location,metadata:a};l.push(r),s.push(r)}return l.length&&this._onAddExtensions.fire({extensions:l,profileLocation:g}),h.length&&this._onRemoveExtensions.fire({extensions:h,profileLocation:g}),s}),l.length&&this._onDidAddExtensions.fire({extensions:l,profileLocation:g}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,profileLocation:g}),l}catch(i){throw l.length&&this._onDidAddExtensions.fire({extensions:l,error:i,profileLocation:g}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,error:i,profileLocation:g}),i}}async removeExtensionFromProfile(S,g){const h=[];this._onRemoveExtensions.fire({extensions:h,profileLocation:g});try{await this.withProfileExtensions(g,l=>{const i=[];for(const s of l)(0,p.areSameExtensions)(s.identifier,S.identifier)?h.push(s):i.push(s);return h.length&&this._onRemoveExtensions.fire({extensions:h,profileLocation:g}),i}),h.length&&this._onDidRemoveExtensions.fire({extensions:h,profileLocation:g})}catch(l){throw h.length&&this._onDidRemoveExtensions.fire({extensions:h,error:l,profileLocation:g}),l}}async withProfileExtensions(S,g){return this.getResourceAccessQueue(S).queue(async()=>{let h=[],l;try{const i=await this.fileService.readFile(S);l=JSON.parse(i.value.toString())}catch(i){if((0,y.toFileOperationResult)(i)!==1)throw i;this.uriIdentityService.extUri.isEqual(S,this.userDataProfilesService.defaultProfile.extensionsResource)&&(l=await this.migrateFromOldDefaultProfileExtensionsLocation())}if(l)for(const i of l){if(!i.identifier){this.logService.info("Ignoring invalid extension while scanning. Identifier does not exist.",i);continue}if(!i.location){this.logService.info("Ignoring invalid extension while scanning. Location does not exist.",i);continue}if(!i.version){this.logService.info("Ignoring invalid extension while scanning. Version does not exist.",i);continue}h.push({identifier:i.identifier,location:P.URI.revive(i.location),version:i.version,metadata:i.metadata})}if(g){h=g(h);const i=h.map(s=>({identifier:s.identifier,version:s.version,location:s.location.toJSON(),metadata:s.metadata}));await this.fileService.writeFile(S,t.VSBuffer.fromString(JSON.stringify(i)))}return h})}async migrateFromOldDefaultProfileExtensionsLocation(){return this._migrationPromise||(this._migrationPromise=(async()=>{const S=this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,"extensions.json");let g;try{g=(await this.fileService.readFile(S)).value.toString()}catch(l){if((0,y.toFileOperationResult)(l)===1)return;throw l}this.logService.info("Migrating extensions from old default profile location",S.toString());let h;try{const l=JSON.parse(g);Array.isArray(l)&&l.every(i=>!!(i&&typeof i=="object"&&(0,m.isIExtensionIdentifier)(i.identifier)&&v(i.location)&&i.version&&typeof i.version=="string"))?h=l:this.logService.warn("Skipping migrating from old default profile locaiton: Found invalid data",l)}catch(l){this.logService.error(l)}if(h)try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,t.VSBuffer.fromString(JSON.stringify(h)),{overwrite:!1}),this.logService.info("Migrated extensions from old default profile location to new location",S.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString())}catch(l){if((0,y.toFileOperationResult)(l)===3)this.logService.info("Migration from old default profile location to new location is done by another window",S.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString());else throw l}try{await this.fileService.del(S)}catch(l){(0,y.toFileOperationResult)(l)!==1&&this.logService.error(l)}return h})()),this._migrationPromise}getResourceAccessQueue(S){let g=this.resourcesAccessQueueMap.get(S);return g||(g=new C.Queue,this.resourcesAccessQueueMap.set(S,g)),g}};f=we([ie(0,y.IFileService),ie(1,d.IUserDataProfilesService),ie(2,w.IUriIdentityService),ie(3,E.ILogService)],f),e.ExtensionsProfileScannerService=f;function v(u){return u?typeof u.path=="string"&&typeof u.scheme=="string":!1}}),define(ee[118],te([0,1,24,8,44,17,15,43,137,2,14,9,4,20,188,98,12,7,156,35,111,87,187,16,5,6,19,3,69,91,38,42,185,186]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N,G){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeExtensionsScannerService=e.toExtensionDescription=e.AbstractExtensionsScannerService=e.IExtensionsScannerService=e.Translations=void 0;var ae;(function(le){function W(O,U){if(O===U)return!0;const H=Object.keys(O),se=new Set;for(const $ of Object.keys(U))se.add($);if(H.length!==se.size)return!1;for(const $ of H){if(O[$]!==U[$])return!1;se.delete($)}return se.size===0}le.equals=W})(ae=e.Translations||(e.Translations={})),e.IExtensionsScannerService=(0,n.createDecorator)("IExtensionsScannerService");let x=class extends m.Disposable{constructor(W,O,U,H,se,$,z,M,T,F,_,q){super(),this.systemExtensionsLocation=W,this.userExtensionsLocation=O,this.extensionsControlLocation=U,this.cacheLocation=H,this.userDataProfilesService=se,this.extensionsProfileScannerService=$,this.fileService=z,this.logService=M,this.environmentService=T,this.productService=F,this.uriIdentityService=_,this.instantiationService=q,this._onDidChangeCache=this._register(new c.Emitter),this.onDidChangeCache=this._onDidChangeCache.event,this.obsoleteFile=(0,d.joinPath)(this.userExtensionsLocation,".obsolete"),this.systemExtensionsCachedScanner=this._register(this.instantiationService.createInstance(ne,(0,d.joinPath)(this.cacheLocation,l.BUILTIN_MANIFEST_CACHE_FILE),this.obsoleteFile)),this.userExtensionsCachedScanner=this._register(this.instantiationService.createInstance(ne,(0,d.joinPath)(this.cacheLocation,l.USER_MANIFEST_CACHE_FILE),this.obsoleteFile)),this.extensionsScanner=this._register(this.instantiationService.createInstance(re,this.obsoleteFile)),this._initializeDefaultProfileExtensionsPromise=void 0,this._register(this.systemExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(0))),this._register(this.userExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(1)))}getTargetPlatform(){return this._targetPlatformPromise||(this._targetPlatformPromise=(0,h.computeTargetPlatform)(this.fileService,this.logService)),this._targetPlatformPromise}async scanAllExtensions(W,O,U){const[H,se]=await Promise.all([this.scanSystemExtensions(W),this.scanUserExtensions(O)]),$=U?await this.scanExtensionsUnderDevelopment(W,[...H,...se]):[];return this.dedupExtensions(H,se,$,await this.getTargetPlatform(),!0)}async scanSystemExtensions(W){const O=[];O.push(this.scanDefaultSystemExtensions(!!W.useCache,W.language)),O.push(this.scanDevSystemExtensions(W.language,!!W.checkControlFile));const[U,H]=await Promise.all(O);return this.applyScanOptions([...U,...H],0,W,!1)}async scanUserExtensions(W){const O=W.profileLocation??this.userExtensionsLocation;this.logService.trace("Started scanning user extensions",O);const U=await this.createExtensionScannerInput(O,!!W.profileLocation,1,!W.includeUninstalled,W.language);let se=await(W.useCache&&!U.devMode&&U.excludeObsolete?this.userExtensionsCachedScanner:this.extensionsScanner).scanExtensions(U);return se=await this.applyScanOptions(se,1,W,!0),this.logService.trace("Scanned user extensions:",se.length),se}async scanExtensionsUnderDevelopment(W,O){if(this.environmentService.isExtensionDevelopment&&this.environmentService.extensionDevelopmentLocationURI){const U=(await Promise.all(this.environmentService.extensionDevelopmentLocationURI.filter(H=>H.scheme===y.Schemas.file).map(async H=>{const se=await this.createExtensionScannerInput(H,!1,1,!0,W.language,!1);return(await this.extensionsScanner.scanOneOrMultipleExtensions(se)).map(z=>(z.type=O.find(M=>(0,h.areSameExtensions)(M.identifier,z.identifier))?.type??z.type,this.extensionsScanner.validate(z,se)))}))).flat();return this.applyScanOptions(U,"development",W,!0)}return[]}async scanExistingExtension(W,O,U){const H=await this.createExtensionScannerInput(W,!1,O,!0,U.language),se=await this.extensionsScanner.scanExtension(H);return!se||!U.includeInvalid&&!se.isValid?null:se}async scanOneOrMultipleExtensions(W,O,U){const H=await this.createExtensionScannerInput(W,!1,O,!0,U.language),se=await this.extensionsScanner.scanOneOrMultipleExtensions(H);return this.applyScanOptions(se,O,U,!0)}async scanMetadata(W){const O=(0,d.joinPath)(W,"package.json"),U=(await this.fileService.readFile(O)).value.toString();return JSON.parse(U).__metadata}async updateMetadata(W,O){const U=(0,d.joinPath)(W,"package.json"),H=(await this.fileService.readFile(U)).value.toString(),se=JSON.parse(H);O.isMachineScoped=O.isMachineScoped||void 0,O.isBuiltin=O.isBuiltin||void 0,O.installedTimestamp=O.installedTimestamp||void 0,se.__metadata={...se.__metadata,...O},await this.fileService.writeFile((0,d.joinPath)(W,"package.json"),L.VSBuffer.fromString(JSON.stringify(se,null,"	")))}initializeDefaultProfileExtensions(){return this._initializeDefaultProfileExtensionsPromise||(this._initializeDefaultProfileExtensionsPromise=(async()=>{try{const W=this.uriIdentityService.extUri.joinPath(this.userExtensionsLocation,".init-default-profile-extensions");if(await this.fileService.exists(W))return;if(!await this.fileService.exists(this.userDataProfilesService.defaultProfile.extensionsResource)&&!await this.fileService.exists(this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,"extensions.json"))){this.logService.info("Started initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString());const O=await this.scanUserExtensions({includeInvalid:!0});await this.extensionsProfileScannerService.addExtensionsToProfile(O.map(U=>[U,U.metadata]),this.userDataProfilesService.defaultProfile.extensionsResource),this.logService.info("Completed initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString())}try{await this.fileService.createFile(W,L.VSBuffer.fromString(""))}catch(O){(0,s.toFileOperationResult)(O)!==1&&this.logService.warn("Failed to create default profile extensions initialize marker in extensions installation folder.",this.userExtensionsLocation.toString(),(0,R.getErrorMessage)(O))}}catch(W){throw this.logService.error(W),W}})()),this._initializeDefaultProfileExtensionsPromise}async applyScanOptions(W,O,U,H){return U.includeAllVersions||(W=this.dedupExtensions(O===0?W:void 0,O===1?W:void 0,O==="development"?W:void 0,await this.getTargetPlatform(),H)),U.includeInvalid||(W=W.filter(se=>se.isValid)),W.sort((se,$)=>{const z=I.basename(se.location.fsPath),M=I.basename($.location.fsPath);return z<M?-1:z>M?1:0})}dedupExtensions(W,O,U,H,se){const $=(M,T,F)=>{if(M.isValid&&!T.isValid)return!1;if(M.isValid===T.isValid){if(se&&w.gt(M.manifest.version,T.manifest.version))return this.logService.debug(`Skipping extension ${T.location.path} with lower version ${T.manifest.version} in favour of ${M.location.path} with version ${M.manifest.version}`),!1;if(w.eq(M.manifest.version,T.manifest.version)){if(M.type===0)return this.logService.debug(`Skipping extension ${T.location.path} in favour of system extension ${M.location.path} with same version`),!1;if(M.targetPlatform===H)return this.logService.debug(`Skipping extension ${T.location.path} from different target platform ${T.targetPlatform}`),!1}}return F?this.logService.warn(`Overwriting user extension ${M.location.path} with ${T.location.path}.`):this.logService.debug(`Overwriting user extension ${M.location.path} with ${T.location.path}.`),!0},z=new Map;return W?.forEach(M=>{const T=l.ExtensionIdentifier.toKey(M.identifier.id),F=z.get(T);(!F||$(F,M,!1))&&z.set(T,M)}),O?.forEach(M=>{const T=l.ExtensionIdentifier.toKey(M.identifier.id),F=z.get(T);if(!F&&W&&M.type===0){this.logService.debug(`Skipping obsolete system extension ${M.location.path}.`);return}(!F||$(F,M,!1))&&z.set(T,M)}),U?.forEach(M=>{const T=l.ExtensionIdentifier.toKey(M.identifier.id),F=z.get(T);(!F||$(F,M,!0))&&z.set(T,M),z.set(T,M)}),[...z.values()]}async scanDefaultSystemExtensions(W,O){this.logService.trace("Started scanning system extensions");const U=await this.createExtensionScannerInput(this.systemExtensionsLocation,!1,0,!0,O),se=await(W&&!U.devMode?this.systemExtensionsCachedScanner:this.extensionsScanner).scanExtensions(U);return this.logService.trace("Scanned system extensions:",se.length),se}async scanDevSystemExtensions(W,O){const U=this.environmentService.isBuilt?[]:this.productService.builtInExtensions;if(!U?.length)return[];this.logService.trace("Started scanning dev system extensions");const H=O?await this.getBuiltInExtensionControl():{},se=[],$=u.URI.file(I.normalize(I.join(y.FileAccess.asFileUri("").fsPath,"..",".build","builtInExtensions")));for(const M of U){const T=H[M.name]||"marketplace";switch(T){case"disabled":break;case"marketplace":se.push((0,d.joinPath)($,M.name));break;default:se.push(u.URI.file(T));break}}const z=await Promise.all(se.map(async M=>this.extensionsScanner.scanExtension(await this.createExtensionScannerInput(M,!1,0,!0,W))));return this.logService.trace("Scanned dev system extensions:",z.length),(0,C.coalesce)(z)}async getBuiltInExtensionControl(){try{const W=await this.fileService.readFile(this.extensionsControlLocation);return JSON.parse(W.value.toString())}catch{return{}}}async createExtensionScannerInput(W,O,U,H,se,$=!0){const z=await this.getTranslations(se??E.language),M=await this.getMtime(W),T=O&&!this.uriIdentityService.extUri.isEqual(W,this.userDataProfilesService.defaultProfile.extensionsResource)?this.userDataProfilesService.defaultProfile.extensionsResource:void 0,F=T?await this.getMtime(T):void 0;return new Q(W,M,T,F,O,U,H,$,this.productService.version,this.productService.date,this.productService.commit,!this.environmentService.isBuilt,se,z)}async getMtime(W){try{const O=await this.fileService.stat(W);if(typeof O.mtime=="number")return O.mtime}catch{}}};x=we([ie(4,D.IUserDataProfilesService),ie(5,b.IExtensionsProfileScannerService),ie(6,s.IFileService),ie(7,a.ILogService),ie(8,g.IEnvironmentService),ie(9,r.IProductService),ie(10,A.IUriIdentityService),ie(11,n.IInstantiationService)],x),e.AbstractExtensionsScannerService=x;class Q{constructor(W,O,U,H,se,$,z,M,T,F,_,q,Y,B){this.location=W,this.mtime=O,this.applicationExtensionslocation=U,this.applicationExtensionslocationMtime=H,this.profile=se,this.type=$,this.excludeObsolete=z,this.validate=M,this.productVersion=T,this.productDate=F,this.productCommit=_,this.devMode=q,this.language=Y,this.translations=B}static createNlsConfiguration(W){return{language:W.language,pseudo:W.language==="pseudo",devMode:W.devMode,translations:W.translations}}static equals(W,O){return(0,d.isEqual)(W.location,O.location)&&W.mtime===O.mtime&&(0,d.isEqual)(W.applicationExtensionslocation,O.applicationExtensionslocation)&&W.applicationExtensionslocationMtime===O.applicationExtensionslocationMtime&&W.profile===O.profile&&W.type===O.type&&W.excludeObsolete===O.excludeObsolete&&W.validate===O.validate&&W.productVersion===O.productVersion&&W.productDate===O.productDate&&W.productCommit===O.productCommit&&W.devMode===O.devMode&&W.language===O.language&&ae.equals(W.translations,O.translations)}}let re=class extends m.Disposable{constructor(W,O,U,H,se){super(),this.obsoleteFile=W,this.extensionsProfileScannerService=O,this.uriIdentityService=U,this.fileService=H,this.logService=se}async scanExtensions(W){const O=W.profile?await this.scanExtensionsFromProfile(W):await this.scanExtensionsFromLocation(W);let U={};if(W.excludeObsolete&&W.type===1)try{const H=(await this.fileService.readFile(this.obsoleteFile)).value.toString();U=JSON.parse(H)}catch{}return(0,v.isEmptyObject)(U)?O:O.filter(H=>!U[h.ExtensionKey.create(H).toString()])}async scanExtensionsFromLocation(W){const O=await this.fileService.resolve(W.location);if(!O.children?.length)return[];const U=await Promise.all(O.children.map(async H=>{if(!H.isDirectory||W.type===1&&(0,d.basename)(H.resource).indexOf(".")===0)return null;const se=new Q(H.resource,W.mtime,W.applicationExtensionslocation,W.applicationExtensionslocationMtime,W.profile,W.type,W.excludeObsolete,W.validate,W.productVersion,W.productDate,W.productCommit,W.devMode,W.language,W.translations);return this.scanExtension(se)}));return(0,C.coalesce)(U).sort((H,se)=>H.location.path<se.location.path?-1:1)}async scanExtensionsFromProfile(W){let O=await this.scanExtensionsFromProfileResource(W.location,()=>!0,W);if(W.applicationExtensionslocation&&!this.uriIdentityService.extUri.isEqual(W.location,W.applicationExtensionslocation)){O=O.filter(H=>!H.metadata?.isApplicationScoped);const U=await this.scanExtensionsFromProfileResource(W.applicationExtensionslocation,H=>!!H.metadata?.isApplicationScoped,W);O.push(...U)}return O}async scanExtensionsFromProfileResource(W,O,U){const H=await this.extensionsProfileScannerService.scanProfileExtensions(W);if(!H.length)return[];const se=await Promise.all(H.map(async $=>{if(O($)){const z=new Q($.location,U.mtime,U.applicationExtensionslocation,U.applicationExtensionslocationMtime,U.profile,U.type,U.excludeObsolete,U.validate,U.productVersion,U.productDate,U.productCommit,U.devMode,U.language,U.translations);return this.scanExtension(z,$.metadata)}return null}));return(0,C.coalesce)(se)}async scanOneOrMultipleExtensions(W){try{if(await this.fileService.exists((0,d.joinPath)(W.location,"package.json"))){const O=await this.scanExtension(W);return O?[O]:[]}else return await this.scanExtensions(W)}catch(O){return this.logService.error(`Error scanning extensions at ${W.location.path}:`,(0,R.getErrorMessage)(O)),[]}}async scanExtension(W,O){try{let U=await this.scanExtensionManifest(W.location);if(U){U.publisher||(U.publisher=l.UNDEFINED_PUBLISHER),O=O??U.__metadata,delete U.__metadata;const H=(0,h.getGalleryExtensionId)(U.publisher,U.name),se=O?.id?{id:H,uuid:O.id}:{id:H},$=O?.isSystem?0:W.type,z=$===0||!!O?.isBuiltin;G.ImplicitActivationEvents.updateManifest(U),U=await this.translateManifest(W.location,U,Q.createNlsConfiguration(W));const M={type:$,identifier:se,manifest:U,location:W.location,isBuiltin:z,targetPlatform:O?.targetPlatform??"undefined",metadata:O,isValid:!0,validations:[]};return W.validate?this.validate(M,W):M}}catch(U){W.type!==0&&this.logService.error(U)}return null}validate(W,O){let U=!0;const H=(0,i.validateExtensionManifest)(O.productVersion,O.productDate,O.location,W.manifest,W.isBuiltin);for(const[se,$]of H)se===f.default.Error&&(U=!1,this.logService.error(this.formatMessage(O.location,$)));return W.isValid=U,W.validations=H,W}async scanExtensionManifest(W){const O=(0,d.joinPath)(W,"package.json");let U;try{U=(await this.fileService.readFile(O)).value.toString()}catch(se){return(0,s.toFileOperationResult)(se)!==1&&this.logService.error(this.formatMessage(W,(0,S.localize)(0,null,O.path,se.message))),null}let H;try{H=JSON.parse(U)}catch{const $=[];(0,P.parse)(U,$);for(const z of $)this.logService.error(this.formatMessage(W,(0,S.localize)(1,null,O.path,z.offset,z.length,(0,p.getParseErrorMessage)(z.error))));return null}return(0,P.getNodeType)(H)!=="object"?(this.logService.error(this.formatMessage(W,(0,S.localize)(2,null,O.path))),null):H}async translateManifest(W,O,U){const H=await this.getLocalizedMessages(W,O,U);if(H)try{const se=[],$=await this.resolveOriginalMessageBundle(H.default,se);if(se.length>0)return se.forEach(M=>{this.logService.error(this.formatMessage(W,(0,S.localize)(3,null,H.default?.path,(0,p.getParseErrorMessage)(M.error))))}),O;if((0,P.getNodeType)(H)!=="object")return this.logService.error(this.formatMessage(W,(0,S.localize)(4,null,H.default?.path))),O;const z=H.values||Object.create(null);return(0,N.localizeManifest)(O,z,$)}catch{}return O}async getLocalizedMessages(W,O,U){const H=(0,d.joinPath)(W,"package.nls.json"),se=(T,F)=>{F.forEach(_=>{this.logService.error(this.formatMessage(W,(0,S.localize)(5,null,T?.path,(0,p.getParseErrorMessage)(_.error))))})},$=T=>{this.logService.error(this.formatMessage(W,(0,S.localize)(6,null,T?.path)))},z=`${O.publisher}.${O.name}`,M=U.translations[z];if(M)try{const T=u.URI.file(M),F=(await this.fileService.readFile(T)).value.toString(),_=[],q=(0,P.parse)(F,_);return _.length>0?(se(T,_),{values:void 0,default:H}):(0,P.getNodeType)(q)!=="object"?($(T),{values:void 0,default:H}):{values:q.contents?q.contents.package:void 0,default:H}}catch{return{values:void 0,default:H}}else{if(!await this.fileService.exists(H))return;let F;try{F=await this.findMessageBundles(W,U)}catch{return}if(!F.localized)return{values:void 0,default:F.original};try{const _=(await this.fileService.readFile(F.localized)).value.toString(),q=[],Y=(0,P.parse)(_,q);return q.length>0?(se(F.localized,q),{values:void 0,default:F.original}):(0,P.getNodeType)(Y)!=="object"?($(F.localized),{values:void 0,default:F.original}):{values:Y,default:F.original}}catch{return{values:void 0,default:F.original}}}}async resolveOriginalMessageBundle(W,O){if(W)try{const U=(await this.fileService.readFile(W)).value.toString();return(0,P.parse)(U,O)}catch{}}findMessageBundles(W,O){return new Promise((U,H)=>{const se=$=>{const z=(0,d.joinPath)(W,`package.nls.${$}.json`);this.fileService.exists(z).then(M=>{M&&U({localized:z,original:(0,d.joinPath)(W,"package.nls.json")});const T=$.lastIndexOf("-");T===-1?U({localized:(0,d.joinPath)(W,"package.nls.json"),original:null}):($=$.substring(0,T),se($))})};if(O.devMode||O.pseudo||!O.language)return U({localized:(0,d.joinPath)(W,"package.nls.json"),original:null});se(O.language)})}formatMessage(W,O){return`[${W.path}]: ${O}`}};re=we([ie(1,b.IExtensionsProfileScannerService),ie(2,A.IUriIdentityService),ie(3,s.IFileService),ie(4,a.ILogService)],re);let ne=class extends re{constructor(W,O,U,H,se,$){super(O,U,H,se,$),this.cacheFile=W,this.cacheValidatorThrottler=this._register(new t.ThrottledDelayer(3e3)),this._onDidChangeCache=this._register(new c.Emitter),this.onDidChangeCache=this._onDidChangeCache.event}async scanExtensions(W){const O=await this.readExtensionCache();if(this.input=W,O&&O.input&&Q.equals(O.input,this.input))return this.cacheValidatorThrottler.trigger(()=>this.validateCache()),O.result.map(H=>(H.location=u.URI.revive(H.location),H));const U=await super.scanExtensions(W);return await this.writeExtensionCache({input:W,result:U}),U}async readExtensionCache(){try{const W=await this.fileService.readFile(this.cacheFile),O=JSON.parse(W.value.toString());return{result:O.result,input:(0,o.revive)(O.input)}}catch(W){this.logService.debug("Error while reading the extension cache file:",this.cacheFile.path,(0,R.getErrorMessage)(W))}return null}async writeExtensionCache(W){try{await this.fileService.writeFile(this.cacheFile,L.VSBuffer.fromString(JSON.stringify(W)))}catch(O){this.logService.debug("Error while writing the extension cache file:",this.cacheFile.path,(0,R.getErrorMessage)(O))}}async validateCache(){if(!this.input)return;const W=await this.readExtensionCache();if(!W)return;const O=W.result,U=JSON.parse(JSON.stringify(await super.scanExtensions(this.input)));if(!k.equals(U,O))try{await this.fileService.del(this.cacheFile),this._onDidChangeCache.fire()}catch(H){this.logService.error(H)}}};ne=we([ie(2,b.IExtensionsProfileScannerService),ie(3,A.IUriIdentityService),ie(4,s.IFileService),ie(5,a.ILogService)],ne);function fe(le,W){const O=(0,h.getExtensionId)(le.manifest.publisher,le.manifest.name);return{id:O,identifier:new l.ExtensionIdentifier(O),isBuiltin:le.type===0,isUserBuiltin:le.type===1&&le.isBuiltin,isUnderDevelopment:W,extensionLocation:le.location,uuid:le.identifier.uuid,targetPlatform:le.targetPlatform,...le.manifest}}e.toExtensionDescription=fe;class K extends x{constructor(W,O,U,H,se,$,z,M,T,F,_,q){super(W,O,(0,d.joinPath)(U,".vscode-oss-dev","extensions","control.json"),(0,d.joinPath)(H,l.MANIFEST_CACHE_FOLDER),se,$,z,M,T,F,_,q),this.translationsPromise=(async()=>{if(E.translationsConfigFile)try{const Y=await this.fileService.readFile(u.URI.file(E.translationsConfigFile));return JSON.parse(Y.value.toString())}catch{}return Object.create(null)})()}getTranslations(W){return this.translationsPromise}}e.NativeExtensionsScannerService=K}),define(ee[258],te([0,1,7,35,91,118,16,5,6,19,42,38]),function(j,e,C,t,k,L,R,P,p,m,y,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionsScannerService=void 0;let E=class extends L.NativeExtensionsScannerService{constructor(w,f,v,u,S,g,h,l){super(C.URI.file(S.builtinExtensionsPath),C.URI.file(S.extensionsPath),S.userHome,C.URI.file(S.userDataPath),w,f,v,u,S,g,h,l)}};E=we([ie(0,I.IUserDataProfilesService),ie(1,k.IExtensionsProfileScannerService),ie(2,R.IFileService),ie(3,p.ILogService),ie(4,t.INativeEnvironmentService),ie(5,m.IProductService),ie(6,y.IUriIdentityService),ie(7,P.IInstantiationService)],E),e.ExtensionsScannerService=E}),define(ee[259],te([0,1,13,2,14,9,4,60,7,29,41,35,6,38]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolMainService=void 0;let w=class extends t.Disposable{constructor(v,u,S){super(),this.environmentService=v,this.logService=S,this.validRoots=P.TernarySearchTree.forPaths(!R.isLinux),this.validExtensions=new Set([".svg",".png",".jpg",".jpeg",".gif",".bmp",".webp"]),this.addValidFileRoot(v.appRoot),this.addValidFileRoot(v.extensionsPath),this.addValidFileRoot(u.defaultProfile.globalStorageHome.fsPath),this.addValidFileRoot(v.workspaceStorageHome.fsPath),this.handleProtocols()}handleProtocols(){const{defaultSession:v}=C.session;v.protocol.registerFileProtocol(k.Schemas.vscodeFileResource,(u,S)=>this.handleResourceRequest(u,S)),v.protocol.interceptFileProtocol(k.Schemas.file,(u,S)=>this.handleFileRequest(u,S)),this._register((0,t.toDisposable)(()=>{v.protocol.unregisterProtocol(k.Schemas.vscodeFileResource),v.protocol.uninterceptProtocol(k.Schemas.file)}))}addValidFileRoot(v){const u=(0,L.normalize)(v);return this.validRoots.get(u)?t.Disposable.None:(this.validRoots.set(u,!0),(0,t.toDisposable)(()=>this.validRoots.delete(u)))}handleFileRequest(v,u){const S=p.URI.parse(v.url);return this.logService.error(`Refused to load resource ${S.fsPath} from ${k.Schemas.file}: protocol (original URL: ${v.url})`),u({error:-3})}handleResourceRequest(v,u){const S=this.requestToNormalizedFilePath(v);let g;return this.environmentService.crossOriginIsolated&&((0,L.basename)(S)==="workbench.html"||(0,L.basename)(S)==="workbench-dev.html"?g=k.COI.CoopAndCoep:g=k.COI.getHeadersFromQuery(v.url)),this.validRoots.findSubstr(S)?u({path:S,headers:g}):this.validExtensions.has((0,L.extname)(S).toLowerCase())?u({path:S}):(this.logService.error(`${k.Schemas.vscodeFileResource}: Refused to load resource ${S} from ${k.Schemas.vscodeFileResource}: protocol (original URL: ${v.url})`),u({error:-3}))}requestToNormalizedFilePath(v){const u=p.URI.parse(v.url),S=k.FileAccess.uriToFileUri(u);return(0,L.normalize)(S.fsPath)}createIPCObjectUrl(){let v;const u=p.URI.from({scheme:"vscode",path:(0,m.generateUuid)()}),S=u.toString(),g=async()=>v;return y.validatedIpcMain.handle(S,g),this.logService.trace(`IPC Object URL: Registered new channel ${S}.`),{resource:u,update:h=>v=h,dispose:()=>{this.logService.trace(`IPC Object URL: Removed channel ${S}.`),y.validatedIpcMain.removeHandler(S)}}}};w=we([ie(0,I.INativeEnvironmentService),ie(1,d.IUserDataProfilesService),ie(2,E.ILogService)],w),e.ProtocolMainService=w}),define(ee[260],te([0,1,13,41,8,3,2,14,12,103,27,21,6,63,64,66,45,38,37]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcess=void 0;let g=class extends R.Disposable{constructor(l,i,s,n,a,r,c,o,b){super(),this.machineId=l,this.userEnv=i,this.environmentMainService=s,this.userDataProfilesService=n,this.lifecycleMainService=a,this.logService=r,this.policyService=c,this.themeMainService=o,this.protocolMainService=b,this.firstWindowConnectionBarrier=new k.Barrier,this.window=void 0,this.windowCloseListener=void 0,this._onDidError=this._register(new L.Emitter),this.onDidError=L.Event.buffer(this._onDidError.event),this._whenReady=void 0,this._whenIpcReady=void 0,this.registerListeners()}registerListeners(){t.validatedIpcMain.on("vscode:createSharedProcessMessageChannel",(l,i)=>this.onWindowConnection(l,i)),t.validatedIpcMain.on("vscode:relaySharedProcessWorkerMessageChannel",(l,i)=>this.onWorkerConnection(l,i)),this._register(this.lifecycleMainService.onWillShutdown(()=>this.onWillShutdown()))}async onWindowConnection(l,i){this.logService.trace("SharedProcess: on vscode:createSharedProcessMessageChannel"),this.firstWindowConnectionBarrier.isOpen()||this.firstWindowConnectionBarrier.open(),await this.whenReady();const s=await this.connect();if(l.sender.isDestroyed())return s.close();l.sender.postMessage("vscode:createSharedProcessMessageChannelResult",i,[s])}onWorkerConnection(l,i){this.logService.trace("SharedProcess: onWorkerConnection",i);const s=new R.DisposableStore,n=r=>{!this.isAlive()||(this.logService.trace(`SharedProcess: disposing worker (reason: '${r}')`,i),s.dispose(),this.send("vscode:electron-main->shared-process=disposeWorker",i))},a=C.BrowserWindow.fromId(i.reply.windowId);if(!a||a.isDestroyed()||a.webContents.isDestroyed()||!i.reply.channel){n("unavailable");return}s.add(L.Event.filter(this.lifecycleMainService.onWillLoadWindow,r=>r.window.win===a)(()=>n("load"))),s.add(L.Event.fromNodeEventEmitter(a,"closed")(()=>n("closed"))),a.webContents.postMessage(i.reply.channel,i.reply.nonce,l.ports)}onWillShutdown(){const l=this.window;!l||(this.send("vscode:electron-main->shared-process=exit"),this.windowCloseListener&&(l.removeListener("close",this.windowCloseListener),this.windowCloseListener=void 0),setTimeout(()=>{try{l.close()}catch{}this.window=void 0},0))}send(l,...i){if(!this.isAlive()){this.logService.warn(`Sending IPC message to channel '${l}' for shared process window that is destroyed`);return}try{this.window?.webContents.send(l,...i)}catch(s){this.logService.warn(`Error sending IPC message to channel '${l}' of shared process: ${(0,v.toErrorMessage)(s)}`)}}whenReady(){return this._whenReady||(this._whenReady=new Promise(l=>t.validatedIpcMain.once("vscode:shared-process->electron-main=init-done",()=>{this.logService.trace("SharedProcess: Overall ready"),l()}))),this._whenReady}get whenIpcReady(){return this._whenIpcReady||(this._whenIpcReady=(async()=>{await this.firstWindowConnectionBarrier.wait(),this.createWindow(),this.registerWindowListeners(),await new Promise(l=>t.validatedIpcMain.once("vscode:shared-process->electron-main=ipc-ready",()=>{this.logService.trace("SharedProcess: IPC ready"),l()}))})()),this._whenIpcReady}createWindow(){const l=this._register(this.protocolMainService.createIPCObjectUrl());this.window=new C.BrowserWindow({show:!1,backgroundColor:this.themeMainService.getBackgroundColor(),webPreferences:{preload:P.FileAccess.asFileUri("vs/base/parts/sandbox/electron-browser/preload.js").fsPath,additionalArguments:[`--vscode-window-config=${l.resource.toString()}`,"--vscode-window-kind=shared-process"],v8CacheOptions:this.environmentMainService.useCodeCache?"bypassHeatCheck":"none",nodeIntegration:!0,nodeIntegrationInWorker:!0,contextIsolation:!1,enableWebSQL:!1,spellcheck:!1,images:!1,webgl:!1}}),l.update({machineId:this.machineId,windowId:this.window.id,appRoot:this.environmentMainService.appRoot,codeCachePath:this.environmentMainService.codeCachePath,profiles:this.userDataProfilesService.profiles,userEnv:this.userEnv,args:this.environmentMainService.args,logLevel:this.logService.getLevel(),product:d.default,policiesData:this.policyService.serialize()}),this.window.loadURL(P.FileAccess.asBrowserUri(`vs/code/electron-browser/sharedProcess/sharedProcess${this.environmentMainService.isBuilt?"":"-dev"}.html`).toString(!0))}registerWindowListeners(){!this.window||(this.windowCloseListener=l=>{this.logService.trace("SharedProcess#close prevented"),l.preventDefault(),this.window?.isVisible()&&this.window.hide()},this.window.on("close",this.windowCloseListener),this.window.webContents.on("render-process-gone",(l,i)=>this._onDidError.fire({type:2,details:i})),this.window.on("unresponsive",()=>this._onDidError.fire({type:1})),this.window.webContents.on("did-fail-load",(l,i,s)=>this._onDidError.fire({type:3,details:{reason:s,exitCode:i}})))}async connect(){await this.whenIpcReady;const l=(0,p.assertIsDefined)(this.window);return(0,m.connect)(l)}async toggle(){await this.whenIpcReady,this.window&&(this.window.isVisible()?(this.window.webContents.closeDevTools(),this.window.hide()):(this.window.show(),this.window.webContents.openDevTools()))}isVisible(){return this.window?.isVisible()??!1}isAlive(){const l=this.window;return l?!l.isDestroyed()&&!l.webContents.isDestroyed():!1}};g=we([ie(2,y.IEnvironmentMainService),ie(3,u.IUserDataProfilesService),ie(4,I.ILifecycleMainService),ie(5,E.ILogService),ie(6,S.IPolicyService),ie(7,f.IThemeMainService),ie(8,w.IProtocolMainService)],g),e.SharedProcess=g}),define(ee[92],te([0,1,8,3,2,73,12,104,5,38]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logStorage=e.InMemoryStorageService=e.isProfileUsingDefaultStorage=e.AbstractStorageService=e.loadKeyTargets=e.StorageTarget=e.StorageScope=e.WillSaveStateReason=e.IStorageService=e.TARGET_KEY=e.IS_NEW_KEY=void 0,e.IS_NEW_KEY="__$__isNewStorageMarker",e.TARGET_KEY="__$__targetStorageMarker",e.IStorageService=(0,p.createDecorator)("storageService");var y;(function(S){S[S.NONE=0]="NONE",S[S.SHUTDOWN=1]="SHUTDOWN"})(y=e.WillSaveStateReason||(e.WillSaveStateReason={}));var I;(function(S){S[S.APPLICATION=-1]="APPLICATION",S[S.PROFILE=0]="PROFILE",S[S.WORKSPACE=1]="WORKSPACE"})(I=e.StorageScope||(e.StorageScope={}));var E;(function(S){S[S.USER=0]="USER",S[S.MACHINE=1]="MACHINE"})(E=e.StorageTarget||(e.StorageTarget={}));function d(S){const g=S.get(e.TARGET_KEY);if(g)try{return JSON.parse(g)}catch{}return Object.create(null)}e.loadKeyTargets=d;class w extends k.Disposable{constructor(g={flushInterval:w.DEFAULT_FLUSH_INTERVAL}){super(),this.options=g,this._onDidChangeValue=this._register(new t.PauseableEmitter),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new t.PauseableEmitter),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new t.Emitter),this.onWillSaveState=this._onWillSaveState.event,this.flushWhenIdleScheduler=this._register(new C.RunOnceScheduler(()=>this.doFlushWhenIdle(),this.options.flushInterval)),this.runFlushWhenIdle=this._register(new k.MutableDisposable),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}doFlushWhenIdle(){this.runFlushWhenIdle.value=(0,C.runWhenIdle)(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){(0,k.dispose)([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{(0,L.mark)("code/willInitStorage");try{await this.doInitialize()}finally{(0,L.mark)("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(g,h){if(h===e.TARGET_KEY){switch(g){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:g})}else this._onDidChangeValue.fire({scope:g,key:h,target:this.getKeyTargets(g)[h]})}emitWillSaveState(g){this._onWillSaveState.fire({reason:g})}get(g,h,l){return this.getStorage(h)?.get(g,l)}getBoolean(g,h,l){return this.getStorage(h)?.getBoolean(g,l)}getNumber(g,h,l){return this.getStorage(h)?.getNumber(g,l)}store(g,h,l,i){if((0,R.isUndefinedOrNull)(h)){this.remove(g,l);return}this.withPausedEmitters(()=>{this.updateKeyTarget(g,l,i),this.getStorage(l)?.set(g,h)})}remove(g,h){this.withPausedEmitters(()=>{this.updateKeyTarget(g,h,void 0),this.getStorage(h)?.delete(g)})}withPausedEmitters(g){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{g()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(g,h){const l=[],i=this.getKeyTargets(g);for(const s of Object.keys(i))i[s]===h&&l.push(s);return l}updateKeyTarget(g,h,l){const i=this.getKeyTargets(h);typeof l=="number"?i[g]!==l&&(i[g]=l,this.getStorage(h)?.set(e.TARGET_KEY,JSON.stringify(i))):typeof i[g]=="number"&&(delete i[g],this.getStorage(h)?.set(e.TARGET_KEY,JSON.stringify(i)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(g){switch(g){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(g){const h=this.getStorage(g);return h?d(h):Object.create(null)}isNew(g){return this.getBoolean(e.IS_NEW_KEY,g)===!0}async flush(g=y.NONE){this._onWillSaveState.fire({reason:g});const h=this.getStorage(-1),l=this.getStorage(0),i=this.getStorage(1);switch(g){case y.NONE:await C.Promises.settled([h?.whenFlushed()??Promise.resolve(),l?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve()]);break;case y.SHUTDOWN:await C.Promises.settled([h?.flush(0)??Promise.resolve(),l?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve()]);break}}async log(){const g=this.getStorage(-1)?.items??new Map,h=this.getStorage(0)?.items??new Map,l=this.getStorage(1)?.items??new Map;return u(g,h,l,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async switch(g,h){return this.emitWillSaveState(y.NONE),(0,m.isUserDataProfile)(g)?this.switchToProfile(g,h):this.switchToWorkspace(g,h)}canSwitchProfile(g,h){return!(g.id===h.id||f(h)&&f(g))}switchData(g,h,l,i){this.withPausedEmitters(()=>{if(i)for(const[s,n]of g)h.set(s,n);else{const s=new Set;for(const[n,a]of g)s.add(n),h.get(n)!==a&&this.emitDidChangeValue(l,n);for(const[n]of h.items)s.has(n)||this.emitDidChangeValue(l,n)}})}}e.AbstractStorageService=w,w.DEFAULT_FLUSH_INTERVAL=60*1e3;function f(S){return S.isDefault||!!S.useDefaultFlags?.uiState}e.isProfileUsingDefaultStorage=f;class v extends w{constructor(){super(),this.applicationStorage=this._register(new P.Storage(new P.InMemoryStorageDatabase,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new P.Storage(new P.InMemoryStorageDatabase,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new P.Storage(new P.InMemoryStorageDatabase,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(g=>this.emitDidChangeValue(1,g))),this._register(this.profileStorage.onDidChangeStorage(g=>this.emitDidChangeValue(0,g))),this._register(this.applicationStorage.onDidChangeStorage(g=>this.emitDidChangeValue(-1,g)))}getStorage(g){switch(g){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(g){switch(g){case-1:return"inMemory (application)";case 0:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}hasScope(g){return!1}}e.InMemoryStorageService=v;async function u(S,g,h,l,i,s){const n=G=>{try{return JSON.parse(G)}catch{return G}},a=new Map,r=new Map;S.forEach((G,ae)=>{a.set(ae,G),r.set(ae,n(G))});const c=new Map,o=new Map;g.forEach((G,ae)=>{c.set(ae,G),o.set(ae,n(G))});const b=new Map,D=new Map;h.forEach((G,ae)=>{b.set(ae,G),D.set(ae,n(G))}),console.group(l!==i?`Storage: Application (path: ${l})`:`Storage: Application & Profile (path: ${l}, default profile)`);const A=[];if(a.forEach((G,ae)=>{A.push({key:ae,value:G})}),console.table(A),console.groupEnd(),console.log(r),l!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);const G=[];c.forEach((ae,x)=>{G.push({key:x,value:ae})}),console.table(G),console.groupEnd(),console.log(o)}console.group(`Storage: Workspace (path: ${s})`);const N=[];b.forEach((G,ae)=>{N.push({key:ae,value:G})}),console.table(N),console.groupEnd(),console.log(D)}e.logStorage=u}),define(ee[261],te([0,1,24,8,3,2,9,80,7,23,104,148,6,92,31,28]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorageMain=e.WorkspaceStorageMain=e.ApplicationStorageMain=e.ProfileStorageMain=void 0;class v extends L.Disposable{get storage(){return this._storage}constructor(s,n){super(),this.logService=s,this.fileService=n,this._onDidChangeStorage=this._register(new k.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this._onDidCloseStorage=this._register(new k.Emitter),this.onDidCloseStorage=this._onDidCloseStorage.event,this._storage=new y.Storage(new y.InMemoryStorageDatabase,{hint:y.StorageHint.STORAGE_IN_MEMORY}),this.initializePromise=void 0,this.whenInitPromise=new t.DeferredPromise,this.whenInit=this.whenInitPromise.p,this.state=y.StorageState.None}isInMemory(){return this._storage.isInMemory()}init(){return this.initializePromise||(this.initializePromise=(async()=>{if(this.state===y.StorageState.None)try{const s=await this.doCreate();this._storage.dispose(),this._storage=s,this._register(s.onDidChangeStorage(a=>this._onDidChangeStorage.fire({key:a}))),await this.doInit(s);const n=s.getBoolean(d.IS_NEW_KEY);n===void 0?s.set(d.IS_NEW_KEY,!0):n&&s.set(d.IS_NEW_KEY,!1)}catch(s){this.logService.error(`[storage main] initialize(): Unable to init storage due to ${s}`)}finally{this.state=y.StorageState.Initialized,this.whenInitPromise.complete()}})()),this.initializePromise}createLoggingOptions(){return{logTrace:this.logService.getLevel()===E.LogLevel.Trace?s=>this.logService.trace(s):void 0,logError:s=>this.logService.error(s)}}doInit(s){return s.init()}get items(){return this._storage.items}get(s,n){return this._storage.get(s,n)}set(s,n){return this._storage.set(s,n)}delete(s){return this._storage.delete(s)}async close(){const s=new P.StopWatch(!1);await this.doClose(),s.stop(),s.elapsed()>v.LOG_SLOW_CLOSE_THRESHOLD&&await this.logSlowClose(s),this._onDidCloseStorage.fire()}async logSlowClose(s){if(!!this.path)try{const n=(0,C.top)(Array.from(this._storage.items.entries()).map(([r,c])=>({key:r,length:c.length})),(r,c)=>c.length-r.length,5).map(r=>`${r.key}:${r.length}`).join(", "),a=(await this.fileService.stat(p.URI.file(this.path))).size;this.logService.warn(`[storage main] detected slow close() operation: Time: ${s.elapsed()}ms, DB size: ${a}b, Large Keys: ${n}`)}catch(n){this.logService.error("[storage main] figuring out stats for slow DB on close() resulted in an error",n)}}async doClose(){this.initializePromise&&await this.initializePromise,this.state=y.StorageState.Closed,await this._storage.close()}}v.LOG_SLOW_CLOSE_THRESHOLD=2e3;class u extends v{get path(){if(!this.options.useInMemoryStorage)return(0,R.join)(this.profile.globalStorageHome.fsPath,u.STORAGE_NAME)}constructor(s,n,a,r){super(a,r),this.profile=s,this.options=n}async doCreate(){return new y.Storage(new I.SQLiteStorageDatabase(this.path??I.SQLiteStorageDatabase.IN_MEMORY_PATH,{logging:this.createLoggingOptions()}),this.path?void 0:{hint:y.StorageHint.STORAGE_IN_MEMORY})}}u.STORAGE_NAME="state.vscdb";class S extends u{constructor(s,n,a,r){super(s,n,a,r)}}e.ProfileStorageMain=S;class g extends u{constructor(s,n,a,r){super(n.defaultProfile,s,a,r)}async doInit(s){await super.doInit(s),this.updateTelemetryState(s)}updateTelemetryState(s){s.get(w.firstSessionDateStorageKey,void 0)===void 0&&s.set(w.firstSessionDateStorageKey,new Date().toUTCString());const a=s.get(w.currentSessionDateStorageKey,void 0),r=new Date().toUTCString();s.set(w.lastSessionDateStorageKey,typeof a>"u"?null:a),s.set(w.currentSessionDateStorageKey,r)}}e.ApplicationStorageMain=g;class h extends v{get path(){if(!this.options.useInMemoryStorage)return(0,R.join)(this.environmentService.workspaceStorageHome.fsPath,this.workspace.id,h.WORKSPACE_STORAGE_NAME)}constructor(s,n,a,r,c){super(a,c),this.workspace=s,this.options=n,this.environmentService=r}async doCreate(){const{storageFilePath:s,wasCreated:n}=await this.prepareWorkspaceStorageFolder();return new y.Storage(new I.SQLiteStorageDatabase(s,{logging:this.createLoggingOptions()}),{hint:this.options.useInMemoryStorage?y.StorageHint.STORAGE_IN_MEMORY:n?y.StorageHint.STORAGE_DOES_NOT_EXIST:void 0})}async prepareWorkspaceStorageFolder(){if(this.options.useInMemoryStorage)return{storageFilePath:I.SQLiteStorageDatabase.IN_MEMORY_PATH,wasCreated:!0};const s=(0,R.join)(this.environmentService.workspaceStorageHome.fsPath,this.workspace.id),n=(0,R.join)(s,h.WORKSPACE_STORAGE_NAME);return await m.Promises.exists(s)?{storageFilePath:n,wasCreated:!1}:(await m.Promises.mkdir(s,{recursive:!0}),this.ensureWorkspaceStorageFolderMeta(s),{storageFilePath:n,wasCreated:!0})}async ensureWorkspaceStorageFolderMeta(s){let n;if((0,f.isSingleFolderWorkspaceIdentifier)(this.workspace)?n={folder:this.workspace.uri.toString()}:(0,f.isWorkspaceIdentifier)(this.workspace)&&(n={workspace:this.workspace.configPath.toString()}),n)try{const a=(0,R.join)(s,h.WORKSPACE_META_NAME);await m.Promises.exists(a)||await m.Promises.writeFile(a,JSON.stringify(n,void 0,2))}catch(a){this.logService.error(`[storage main] ensureWorkspaceStorageFolderMeta(): Unable to create workspace storage metadata due to ${a}`)}}}e.WorkspaceStorageMain=h,h.WORKSPACE_STORAGE_NAME="state.vscdb",h.WORKSPACE_META_NAME="workspace.json";class l extends v{get path(){}async doCreate(){return new y.Storage(new y.InMemoryStorageDatabase,{hint:y.StorageHint.STORAGE_IN_MEMORY})}}e.InMemoryStorageMain=l}),define(ee[262],te([0,1,3,2,92]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileStorageChangesListenerChannel=void 0;class L extends t.Disposable{constructor(P,p,m){super(),this.storageMainService=P,this.userDataProfilesService=p,this.logService=m;const y=this._register(new t.MutableDisposable);this._onDidChange=this._register(new C.Emitter({onWillAddFirstListener:()=>y.value=this.registerStorageChangeListeners(),onDidRemoveLastListener:()=>y.value=void 0}))}registerStorageChangeListeners(){this.logService.debug("ProfileStorageChangesListenerChannel#registerStorageChangeListeners");const P=new t.DisposableStore;return P.add(C.Event.debounce(this.storageMainService.applicationStorage.onDidChangeStorage,(p,m)=>(p?p.push(m.key):p=[m.key],p),100)(p=>this.onDidChangeApplicationStorage(p))),P.add(C.Event.debounce(this.storageMainService.onDidChangeProfileStorage,(p,m)=>{p||(p=new Map);let y=p.get(m.profile.id);return y||p.set(m.profile.id,y={profile:m.profile,keys:[],storage:m.storage}),y.keys.push(m.key),p},100)(p=>this.onDidChangeProfileStorage(p))),P}onDidChangeApplicationStorage(P){const p=P.includes(k.TARGET_KEY)?[this.userDataProfilesService.defaultProfile]:[],m=[];if(P=P.filter(y=>y!==k.TARGET_KEY),P.length){const y=(0,k.loadKeyTargets)(this.storageMainService.applicationStorage.storage);m.push({profile:this.userDataProfilesService.defaultProfile,changes:P.map(I=>({key:I,scope:0,target:y[I]}))})}this.triggerEvents(p,m)}onDidChangeProfileStorage(P){const p=[],m=new Map;for(const[y,I]of P.entries()){I.keys.includes(k.TARGET_KEY)&&p.push(I.profile);const E=I.keys.filter(d=>d!==k.TARGET_KEY);if(E.length){const d=(0,k.loadKeyTargets)(I.storage.storage);m.set(y,{profile:I.profile,changes:E.map(w=>({key:w,scope:0,target:d[w]}))})}}this.triggerEvents(p,[...m.values()])}triggerEvents(P,p){(P.length||p.length)&&this._onDidChange.fire({valueChanges:p,targetChanges:P})}listen(P,p,m){switch(p){case"onDidChange":return this._onDidChange.event}throw new Error(`Event not found: ${p}`)}async call(P,p){throw new Error(`Call not found: ${p}`)}}e.ProfileStorageChangesListenerChannel=L}),define(ee[263],te([0,1,69,7,35,16,6,229,42,38]),function(j,e,C,t,k,L,R,P,p,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataProfilesService=void 0;let y=class At extends m.UserDataProfilesService{constructor(E,d,w,f,v){super(w,f,d,v),this.stateService=E,this.nativeEnvironmentService=w}getStoredProfiles(){return(0,C.revive)(this.stateService.getItem(At.PROFILES_KEY,[]))}getStoredProfileAssociations(){return(0,C.revive)(this.stateService.getItem(At.PROFILE_ASSOCIATIONS_KEY,{}))}getDefaultProfileExtensionsLocation(){return this.uriIdentityService.extUri.joinPath(t.URI.file(this.nativeEnvironmentService.extensionsPath).with({scheme:this.profilesHome.scheme}),"extensions.json")}};y=we([ie(0,P.IStateService),ie(1,p.IUriIdentityService),ie(2,k.INativeEnvironmentService),ie(3,L.IFileService),ie(4,R.ILogService)],y),e.UserDataProfilesService=y}),define(ee[51],te([0,1,7,35,16,5,6,36,42,38,263]),function(j,e,C,t,k,L,R,P,p,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataProfilesMainService=e.IUserDataProfilesMainService=void 0,e.IUserDataProfilesMainService=(0,L.refineServiceDecorator)(m.IUserDataProfilesService);let I=class ft extends y.UserDataProfilesService{constructor(d,w,f,v,u){super(d,w,f,v,u),this.stateMainService=d}setEnablement(d){super.setEnablement(d),this.enabled||(this.saveStoredProfiles([]),this.saveStoredProfileAssociations({}))}saveStoredProfiles(d){d.length?this.stateMainService.setItem(ft.PROFILES_KEY,d):this.stateMainService.removeItem(ft.PROFILES_KEY)}saveStoredProfileAssociations(d){d.emptyWindow||d.workspaces?this.stateMainService.setItem(ft.PROFILE_ASSOCIATIONS_KEY,d):this.stateMainService.removeItem(ft.PROFILE_ASSOCIATIONS_KEY)}getStoredProfileAssociations(){const d="workspaceAndProfileInfo",w=this.stateMainService.getItem(d,void 0);if(w){this.stateMainService.removeItem(d);const f=w.reduce((v,{workspace:u,profile:S})=>(v[C.URI.revive(u).toString()]=C.URI.revive(S).toString(),v),{});this.stateMainService.setItem(ft.PROFILE_ASSOCIATIONS_KEY,{workspaces:f})}return super.getStoredProfileAssociations()}};I=we([ie(0,P.IStateMainService),ie(1,p.IUriIdentityService),ie(2,t.INativeEnvironmentService),ie(3,k.IFileService),ie(4,R.ILogService)],I),e.UserDataProfilesMainService=I}),define(ee[93],te([0,1,7,50,3,2,35,16,5,21,6,92,261,38,51,42]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApplicationStorageMainService=e.IApplicationStorageMainService=e.StorageMainService=e.IStorageMainService=void 0,e.IStorageMainService=(0,p.createDecorator)("storageMainService");let v=class extends L.Disposable{constructor(g,h,l,i,s,n){super(),this.logService=g,this.environmentService=h,this.userDataProfilesService=l,this.lifecycleMainService=i,this.fileService=s,this.uriIdentityService=n,this.shutdownReason=void 0,this._onDidChangeProfileStorage=this._register(new k.Emitter),this.onDidChangeProfileStorage=this._onDidChangeProfileStorage.event,this.applicationStorage=this.createApplicationStorage(),this.mapProfileToStorage=new Map,this.mapWorkspaceToStorage=new Map,this.registerListeners()}getStorageOptions(){return{useInMemoryStorage:!!this.environmentService.extensionTestsLocationURI}}registerListeners(){(async()=>(await this.lifecycleMainService.when(3),this.applicationStorage.init()))(),this._register(this.lifecycleMainService.onWillLoadWindow(g=>{g.window.profile&&this.profileStorage(g.window.profile).init(),g.workspace&&this.workspaceStorage(g.workspace).init()})),this._register(this.lifecycleMainService.onWillShutdown(g=>{this.logService.trace("storageMainService#onWillShutdown()"),this.shutdownReason=g.reason,g.join(this.applicationStorage.close());for(const[,h]of this.mapProfileToStorage)g.join(h.close());for(const[,h]of this.mapWorkspaceToStorage)g.join(h.close())})),this._register(this.userDataProfilesService.onWillCreateProfile(g=>{g.join((async()=>{await this.fileService.exists(g.profile.globalStorageHome)||await this.fileService.createFolder(g.profile.globalStorageHome)})())})),this._register(this.userDataProfilesService.onWillRemoveProfile(g=>{const h=this.mapProfileToStorage.get(g.profile.id);h&&g.join(h.close())}))}createApplicationStorage(){this.logService.trace("StorageMainService: creating application storage");const g=new E.ApplicationStorageMain(this.getStorageOptions(),this.userDataProfilesService,this.logService,this.fileService);return(0,t.once)(g.onDidCloseStorage)(()=>{this.logService.trace("StorageMainService: closed application storage")}),g}profileStorage(g){if((0,I.isProfileUsingDefaultStorage)(g))return this.applicationStorage;let h=this.mapProfileToStorage.get(g.id);if(!h){this.logService.trace(`StorageMainService: creating profile storage (${g.name})`),h=this.createProfileStorage(g),this.mapProfileToStorage.set(g.id,h);const l=this._register(h.onDidChangeStorage(i=>this._onDidChangeProfileStorage.fire({...i,storage:h,profile:g})));(0,t.once)(h.onDidCloseStorage)(()=>{this.logService.trace(`StorageMainService: closed profile storage (${g.name})`),this.mapProfileToStorage.delete(g.id),l.dispose()})}return h}createProfileStorage(g){return this.shutdownReason===2?new E.InMemoryStorageMain(this.logService,this.fileService):new E.ProfileStorageMain(g,this.getStorageOptions(),this.logService,this.fileService)}workspaceStorage(g){let h=this.mapWorkspaceToStorage.get(g.id);return h||(this.logService.trace(`StorageMainService: creating workspace storage (${g.id})`),h=this.createWorkspaceStorage(g),this.mapWorkspaceToStorage.set(g.id,h),(0,t.once)(h.onDidCloseStorage)(()=>{this.logService.trace(`StorageMainService: closed workspace storage (${g.id})`),this.mapWorkspaceToStorage.delete(g.id)})),h}createWorkspaceStorage(g){return this.shutdownReason===2?new E.InMemoryStorageMain(this.logService,this.fileService):new E.WorkspaceStorageMain(g,this.getStorageOptions(),this.logService,this.environmentService,this.fileService)}isUsed(g){const h=C.URI.file(g);for(const l of[this.applicationStorage,...this.mapProfileToStorage.values(),...this.mapWorkspaceToStorage.values()])if(!!l.path&&this.uriIdentityService.extUri.isEqualOrParent(C.URI.file(l.path),h))return!0;return!1}};v=we([ie(0,y.ILogService),ie(1,R.IEnvironmentService),ie(2,w.IUserDataProfilesMainService),ie(3,m.ILifecycleMainService),ie(4,P.IFileService),ie(5,f.IUriIdentityService)],v),e.StorageMainService=v,e.IApplicationStorageMainService=(0,p.createDecorator)("applicationStorageMainService");let u=class extends I.AbstractStorageService{constructor(g,h){super(),this.userDataProfilesService=g,this.storageMainService=h,this.whenReady=this.storageMainService.applicationStorage.whenInit}doInitialize(){return this.storageMainService.applicationStorage.whenInit}getStorage(g){if(g===-1)return this.storageMainService.applicationStorage.storage}getLogDetails(g){if(g===-1)return this.userDataProfilesService.defaultProfile.globalStorageHome.fsPath}shouldFlushWhenIdle(){return!1}switch(){throw new Error("Migrating storage is unsupported from main process")}switchToProfile(){throw new Error("Switching storage profile is unsupported from main process")}switchToWorkspace(){throw new Error("Switching storage workspace is unsupported from main process")}hasScope(){throw new Error("Main process is never profile or workspace scoped")}};u=we([ie(0,d.IUserDataProfilesService),ie(1,e.IStorageMainService)],u),e.ApplicationStorageMainService=u}),define(ee[264],te([0,1,2,21,51]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataTransientProfilesHandler=void 0;let L=class extends C.Disposable{constructor(P,p){super(),this.userDataProfilesService=p,this._register(P.onWillLoadWindow(m=>{m.reason===2&&this.unsetTransientProfileForWorkspace(m.window.openedWorkspace??"empty-window")})),this._register(P.onBeforeCloseWindow(m=>this.unsetTransientProfileForWorkspace(m.openedWorkspace??"empty-window")))}async unsetTransientProfileForWorkspace(P){this.userDataProfilesService.getOrSetProfileForWorkspace(P).isTransient&&(this.userDataProfilesService.unsetWorkspace(P,!0),await this.userDataProfilesService.cleanUpTransientProfiles())}};L=we([ie(0,t.ILifecycleMainService),ie(1,k.IUserDataProfilesMainService)],L),e.UserDataTransientProfilesHandler=L}),define(ee[119],te([0,1,20,7,28]),function(j,e,C,t,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findWindowOnExtensionDevelopmentPath=e.findWindowOnWorkspaceOrFolder=e.findWindowOnFile=void 0;async function L(p,m,y){for(const E of p){const d=E.openedWorkspace;if((0,k.isWorkspaceIdentifier)(d)){const w=await y(d);if(w){if(w.folders.some(f=>C.extUriBiasedIgnorePathCase.isEqualOrParent(m,f.uri)))return E}else if(C.extUriBiasedIgnorePathCase.isEqualOrParent(m,d.configPath))return E}}const I=p.filter(E=>(0,k.isSingleFolderWorkspaceIdentifier)(E.openedWorkspace)&&C.extUriBiasedIgnorePathCase.isEqualOrParent(m,E.openedWorkspace.uri));if(I.length)return I.sort((E,d)=>-(E.openedWorkspace.uri.path.length-d.openedWorkspace.uri.path.length))[0]}e.findWindowOnFile=L;function R(p,m){for(const y of p)if((0,k.isWorkspaceIdentifier)(y.openedWorkspace)&&C.extUriBiasedIgnorePathCase.isEqual(y.openedWorkspace.configPath,m)||(0,k.isSingleFolderWorkspaceIdentifier)(y.openedWorkspace)&&C.extUriBiasedIgnorePathCase.isEqual(y.openedWorkspace.uri,m))return y}e.findWindowOnWorkspaceOrFolder=R;function P(p,m){const y=I=>m.some(E=>C.extUriBiasedIgnorePathCase.isEqual(t.URI.file(E),t.URI.file(I)));for(const I of p)if(I.config?.extensionDevelopmentPath?.some(E=>y(E)))return I}e.findWindowOnExtensionDevelopmentPath=P}),define(ee[265],te([0,1,13,2,4,20,7,18,21,6,36,32,117,28]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWindowsStateStoreData=e.restoreWindowsState=e.WindowsStateHandler=void 0;let w=class Tt extends t.Disposable{get state(){return this._state}constructor(h,l,i,s,n){super(),this.windowsMainService=h,this.stateMainService=l,this.lifecycleMainService=i,this.logService=s,this.configurationService=n,this._state=f(this.stateMainService.getItem(Tt.windowsStateStorageKey)),this.lastClosedState=void 0,this.shuttingDown=!1,this.registerListeners()}registerListeners(){C.app.on("browser-window-blur",()=>{this.shuttingDown||this.saveWindowsState()}),this.lifecycleMainService.onBeforeCloseWindow(h=>this.onBeforeCloseWindow(h)),this.lifecycleMainService.onBeforeShutdown(()=>this.onBeforeShutdown()),this.windowsMainService.onDidChangeWindowsCount(h=>{h.newCount-h.oldCount>0&&(this.lastClosedState=void 0)}),this.windowsMainService.onDidDestroyWindow(h=>this.onBeforeCloseWindow(h))}onBeforeShutdown(){this.shuttingDown=!0,this.saveWindowsState()}saveWindowsState(){const h=new Set,l={openedWindows:[],lastPluginDevelopmentHostWindow:this._state.lastPluginDevelopmentHostWindow,lastActiveWindow:this.lastClosedState};if(!l.lastActiveWindow){let n=this.windowsMainService.getLastActiveWindow();(!n||n.isExtensionDevelopmentHost)&&(n=this.windowsMainService.getWindows().find(a=>!a.isExtensionDevelopmentHost)),n&&(l.lastActiveWindow=this.toWindowState(n),l.lastActiveWindow.uiState.mode===3&&h.add(l.lastActiveWindow.uiState.display))}const i=this.windowsMainService.getWindows().find(n=>n.isExtensionDevelopmentHost&&!n.isExtensionTestHost);i&&(l.lastPluginDevelopmentHostWindow=this.toWindowState(i),l.lastPluginDevelopmentHostWindow.uiState.mode===3&&(h.has(l.lastPluginDevelopmentHostWindow.uiState.display)?k.isMacintosh&&!i.win?.isSimpleFullScreen()&&(l.lastPluginDevelopmentHostWindow.uiState.mode=1):h.add(l.lastPluginDevelopmentHostWindow.uiState.display))),this.windowsMainService.getWindowCount()>1&&(l.openedWindows=this.windowsMainService.getWindows().filter(n=>!n.isExtensionDevelopmentHost).map(n=>{const a=this.toWindowState(n);return a.uiState.mode===3&&(h.has(a.uiState.display)?k.isMacintosh&&a.windowId!==l.lastActiveWindow?.windowId&&!n.win?.isSimpleFullScreen()&&(a.uiState.mode=1):h.add(a.uiState.display)),a}));const s=u(l);this.stateMainService.setItem(Tt.windowsStateStorageKey,s),this.shuttingDown&&this.logService.trace("[WindowsStateHandler] onBeforeShutdown",s)}onBeforeCloseWindow(h){if(this.lifecycleMainService.quitRequested)return;const l=this.toWindowState(h);h.isExtensionDevelopmentHost&&!h.isExtensionTestHost?this._state.lastPluginDevelopmentHostWindow=l:!h.isExtensionDevelopmentHost&&h.openedWorkspace&&this._state.openedWindows.forEach(i=>{const s=(0,d.isWorkspaceIdentifier)(h.openedWorkspace)&&i.workspace?.id===h.openedWorkspace.id,n=(0,d.isSingleFolderWorkspaceIdentifier)(h.openedWorkspace)&&i.folderUri&&L.extUriBiasedIgnorePathCase.isEqual(i.folderUri,h.openedWorkspace.uri);(s||n)&&(i.uiState=l.uiState)}),this.windowsMainService.getWindowCount()===1&&(this.lastClosedState=l)}toWindowState(h){return{windowId:h.id,workspace:(0,d.isWorkspaceIdentifier)(h.openedWorkspace)?h.openedWorkspace:void 0,folderUri:(0,d.isSingleFolderWorkspaceIdentifier)(h.openedWorkspace)?h.openedWorkspace.uri:void 0,backupPath:h.backupPath,remoteAuthority:h.remoteAuthority,uiState:h.serializeWindowState()}}getNewWindowState(h){const l=this.doGetNewWindowState(h),i=this.configurationService.getValue("window");if(l.mode===3){let s;l.hasDefaultState?s=!!(i?.newWindowDimensions&&["fullscreen","inherit","offset"].indexOf(i.newWindowDimensions)>=0):s=!!(this.lifecycleMainService.wasRestarted||i?.restoreFullscreen),s||(l.mode=1)}return l}doGetNewWindowState(h){const l=this.windowsMainService.getLastActiveWindow();if(!h.extensionTestsPath){if(!!h.extensionDevelopmentPath&&this.state.lastPluginDevelopmentHostWindow)return this.state.lastPluginDevelopmentHostWindow.uiState;const c=h.workspace;if((0,d.isWorkspaceIdentifier)(c)){const b=this.state.openedWindows.filter(D=>D.workspace&&D.workspace.id===c.id).map(D=>D.uiState);if(b.length)return b[0]}if((0,d.isSingleFolderWorkspaceIdentifier)(c)){const b=this.state.openedWindows.filter(D=>D.folderUri&&L.extUriBiasedIgnorePathCase.isEqual(D.folderUri,c.uri)).map(D=>D.uiState);if(b.length)return b[0]}else if(h.backupPath){const b=this.state.openedWindows.filter(D=>D.backupPath===h.backupPath).map(D=>D.uiState);if(b.length)return b[0]}const o=this.lastClosedState||this.state.lastActiveWindow;if(!l&&o)return o.uiState}let i;const s=C.screen.getAllDisplays();if(s.length===1)i=s[0];else{if(k.isMacintosh){const c=C.screen.getCursorScreenPoint();i=C.screen.getDisplayNearestPoint(c)}!i&&l&&(i=C.screen.getDisplayMatching(l.getBounds())),i||(i=C.screen.getPrimaryDisplay()||s[0])}let n=(0,E.defaultWindowState)();n.x=Math.round(i.bounds.x+i.bounds.width/2-n.width/2),n.y=Math.round(i.bounds.y+i.bounds.height/2-n.height/2);const a=this.configurationService.getValue("window");let r=!0;if(a?.newWindowDimensions){if(a.newWindowDimensions==="maximized")n.mode=0,r=!1;else if(a.newWindowDimensions==="fullscreen")n.mode=3,r=!1;else if((a.newWindowDimensions==="inherit"||a.newWindowDimensions==="offset")&&l){const c=l.serializeWindowState();c.mode===3?n.mode=3:n=c,r=n.mode!==3&&a.newWindowDimensions==="offset"}}return r&&(n=this.ensureNoOverlap(n)),n.hasDefaultState=!0,n}ensureNoOverlap(h){if(this.windowsMainService.getWindows().length===0)return h;h.x=typeof h.x=="number"?h.x:0,h.y=typeof h.y=="number"?h.y:0;const l=this.windowsMainService.getWindows().map(i=>i.getBounds());for(;l.some(i=>i.x===h.x||i.y===h.y);)h.x+=30,h.y+=30;return h}};w.windowsStateStorageKey="windowsState",w=we([ie(0,I.IWindowsMainService),ie(1,y.IStateMainService),ie(2,p.ILifecycleMainService),ie(3,m.ILogService),ie(4,P.IConfigurationService)],w),e.WindowsStateHandler=w;function f(g){const h={openedWindows:[]},l=g||{openedWindows:[]};return l.lastActiveWindow&&(h.lastActiveWindow=v(l.lastActiveWindow)),l.lastPluginDevelopmentHostWindow&&(h.lastPluginDevelopmentHostWindow=v(l.lastPluginDevelopmentHostWindow)),Array.isArray(l.openedWindows)&&(h.openedWindows=l.openedWindows.map(i=>v(i))),h}e.restoreWindowsState=f;function v(g){const h={uiState:g.uiState};return g.backupPath&&(h.backupPath=g.backupPath),g.remoteAuthority&&(h.remoteAuthority=g.remoteAuthority),g.folder&&(h.folderUri=R.URI.parse(g.folder)),g.workspaceIdentifier&&(h.workspace={id:g.workspaceIdentifier.id,configPath:R.URI.parse(g.workspaceIdentifier.configURIPath)}),h}function u(g){return{lastActiveWindow:g.lastActiveWindow&&S(g.lastActiveWindow),lastPluginDevelopmentHostWindow:g.lastPluginDevelopmentHostWindow&&S(g.lastPluginDevelopmentHostWindow),openedWindows:g.openedWindows.map(h=>S(h))}}e.getWindowsStateStoreData=u;function S(g){return{workspaceIdentifier:g.workspace&&{id:g.workspace.id,configURIPath:g.workspace.configPath.toString()},folder:g.folderUri&&g.folderUri.toString(),backupPath:g.backupPath,remoteAuthority:g.remoteAuthority,uiState:g.uiState}}}),define(ee[94],te([0,1,30,43,125,34,14,9,4,20,7,5,54,28]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toStoreData=e.restoreRecentlyOpened=e.rewriteWorkspaceFileForNewLocation=e.toWorkspaceFolders=e.getStoredWorkspaceFolder=e.isStoredWorkspaceFolder=e.isRecentFile=e.isRecentFolder=e.isRecentWorkspace=e.IWorkspacesService=void 0,e.IWorkspacesService=(0,I.createDecorator)("workspacesService");function w(D){return D.hasOwnProperty("workspace")}e.isRecentWorkspace=w;function f(D){return D.hasOwnProperty("folderUri")}e.isRecentFolder=f;function v(D){return D.hasOwnProperty("fileUri")}e.isRecentFile=v;function u(D){return S(D)||g(D)}e.isStoredWorkspaceFolder=u;function S(D){const A=D;return typeof A?.path=="string"&&(!A.name||typeof A.name=="string")}function g(D){const A=D;return typeof A?.uri=="string"&&(!A.name||typeof A.name=="string")}function h(D,A,N,G,ae){if(D.scheme!==G.scheme)return{name:N,uri:D.toString(!0)};let x=A?void 0:ae.relativePath(G,D);if(x!==void 0)x.length===0?x=".":p.isWindows&&(x=l(x));else if(D.scheme===R.Schemas.file)x=D.fsPath,p.isWindows&&(x=l(x));else if(ae.isEqualAuthority(D.authority,G.authority))x=D.path;else return{name:N,uri:D.toString(!0)};return{name:N,path:x}}e.getStoredWorkspaceFolder=h;function l(D){return D=(0,L.normalizeDriveLetter)(D),(0,C.isUNC)(D)||(D=(0,C.toSlashes)(D)),D}function i(D,A,N){const G=[],ae=new Set,x=N.dirname(A);for(const Q of D){let re;if(S(Q))Q.path&&(re=N.resolvePath(x,Q.path));else if(g(Q))try{re=y.URI.parse(Q.uri),re.path[0]!==P.posix.sep&&(re=re.with({path:P.posix.sep+re.path}))}catch(ne){console.warn(ne)}if(re){const ne=N.getComparisonKey(re);if(!ae.has(ne)){ae.add(ne);const fe=Q.name||N.basenameOrAuthority(re);G.push(new d.WorkspaceFolder({uri:re,name:fe,index:G.length},Q))}}}return G}e.toWorkspaceFolders=i;function s(D,A,N,G,ae){const x=n(A,D),Q=ae.dirname(A),re=ae.dirname(G),ne=[];for(const W of x.folders){const O=S(W)?ae.resolvePath(Q,W.path):y.URI.parse(W.uri);let U;N?U=!1:U=!S(W)||(0,P.isAbsolute)(W.path),ne.push(h(O,U,W.name,re,ae))}const fe={insertSpaces:!1,tabSize:4,eol:p.isLinux||p.isMacintosh?`
`:`\r
`},K=k.setProperty(D,["folders"],ne,fe);let le=k.applyEdits(D,K);return(0,m.isEqualAuthority)(x.remoteAuthority,(0,E.getRemoteAuthority)(G))&&(le=k.applyEdits(le,k.removeProperty(le,["remoteAuthority"],fe))),le}e.rewriteWorkspaceFileForNewLocation=s;function n(D,A){const N=t.parse(A);if(N&&Array.isArray(N.folders))N.folders=N.folders.filter(G=>u(G));else throw new Error(`${D} looks like an invalid workspace file.`);return N}function a(D){return D.workspace&&typeof D.workspace=="object"&&typeof D.workspace.id=="string"&&typeof D.workspace.configPath=="string"}function r(D){return typeof D.folderUri=="string"}function c(D){return typeof D.fileUri=="string"}function o(D,A){const N={workspaces:[],files:[]};if(D){const G=function(x,Q){for(let re=0;re<x.length;re++)try{Q(x[re],re)}catch(ne){A.warn(`Error restoring recent entry ${JSON.stringify(x[re])}: ${ne.toString()}. Skip entry.`)}},ae=D;Array.isArray(ae.entries)&&G(ae.entries,x=>{const Q=x.label,re=x.remoteAuthority;a(x)?N.workspaces.push({label:Q,remoteAuthority:re,workspace:{id:x.workspace.id,configPath:y.URI.parse(x.workspace.configPath)}}):r(x)?N.workspaces.push({label:Q,remoteAuthority:re,folderUri:y.URI.parse(x.folderUri)}):c(x)&&N.files.push({label:Q,remoteAuthority:re,fileUri:y.URI.parse(x.fileUri)})})}return N}e.restoreRecentlyOpened=o;function b(D){const A={entries:[]};for(const N of D.workspaces)f(N)?A.entries.push({folderUri:N.folderUri.toString(),label:N.label,remoteAuthority:N.remoteAuthority}):A.entries.push({workspace:{id:N.workspace.id,configPath:N.workspace.configPath.toString()},label:N.label,remoteAuthority:N.remoteAuthority});for(const N of D.files)A.entries.push({fileUri:N.fileUri.toString(),label:N.label,remoteAuthority:N.remoteAuthority});return A}e.toStoreData=b}),define(ee[95],te([0,1,77,14,4,20]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createEmptyWorkspaceIdentifier=e.getSingleFolderWorkspaceIdentifier=e.getWorkspaceIdentifier=e.NON_EMPTY_WORKSPACE_ID_LENGTH=void 0,e.NON_EMPTY_WORKSPACE_ID_LENGTH=128/4;function R(m){function y(){let I=m.scheme===t.Schemas.file?(0,L.originalFSPath)(m):m.toString();return k.isLinux||(I=I.toLowerCase()),(0,C.createHash)("md5").update(I).digest("hex")}return{id:y(),configPath:m}}e.getWorkspaceIdentifier=R;function P(m,y){function I(){if(m.scheme!==t.Schemas.file)return(0,C.createHash)("md5").update(m.toString()).digest("hex");if(!y)return;let d;return k.isLinux?d=y.ino:k.isMacintosh?d=y.birthtime.getTime():k.isWindows&&(typeof y.birthtimeMs=="number"?d=Math.floor(y.birthtimeMs):d=y.birthtime.getTime()),(0,C.createHash)("md5").update(m.fsPath).update(d?String(d):"").digest("hex")}const E=I();if(typeof E=="string")return{id:E,uri:m}}e.getSingleFolderWorkspaceIdentifier=P;function p(){return{id:(Date.now()+Math.round(Math.random()*1e3)).toString()}}e.createEmptyWorkspaceIdentifier=p}),define(ee[266],te([0,1,77,30,14,9,4,20,23,178,18,27,36,16,6,177,28,95]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackupMainService=void 0;let S=class Ot{constructor(h,l,i,s){this.environmentMainService=h,this.configurationService=l,this.logService=i,this.stateMainService=s,this.backupHome=this.environmentMainService.backupHome,this.workspaces=[],this.folders=[],this.emptyWindows=[],this.backupUriComparer=P.extUriBiasedIgnorePathCase,this.backupPathComparer={isEqual:(n,a)=>(0,t.isEqual)(n,a,!R.isLinux)}}async initialize(){const h=await this.initializeAndMigrateBackupWorkspacesMetadata();this.emptyWindows=await this.validateEmptyWorkspaces(h.emptyWindows),this.workspaces=await this.validateWorkspaces((0,m.deserializeWorkspaceInfos)(h)),this.folders=await this.validateFolders((0,m.deserializeFolderInfos)(h)),this.storeWorkspacesMetadata()}async initializeAndMigrateBackupWorkspacesMetadata(){let h=this.stateMainService.getItem(Ot.backupWorkspacesMetadataStorageKey);if(!h)try{const l=(0,L.join)(this.backupHome,"workspaces.json"),i=await p.Promises.readFile(l,"utf8");try{await p.Promises.unlink(l)}catch{}const s=JSON.parse(i);h={workspaces:Array.isArray(s.rootURIWorkspaces)?s.rootURIWorkspaces:[],folders:Array.isArray(s.folderWorkspaceInfos)?s.folderWorkspaceInfos:[],emptyWindows:Array.isArray(s.emptyWorkspaceInfos)?s.emptyWorkspaceInfos:[]}}catch(l){l.code!=="ENOENT"&&this.logService.error(`Backup: Could not migrate legacy backup workspaces metadata: ${l.toString()}`)}return h??{workspaces:[],folders:[],emptyWindows:[]}}getWorkspaceBackups(){return this.isHotExitOnExitAndWindowClose()?[]:this.workspaces.slice(0)}getFolderBackups(){return this.isHotExitOnExitAndWindowClose()?[]:this.folders.slice(0)}isHotExitEnabled(){return this.getHotExitConfig()!==d.HotExitConfiguration.OFF}isHotExitOnExitAndWindowClose(){return this.getHotExitConfig()===d.HotExitConfiguration.ON_EXIT_AND_WINDOW_CLOSE}getHotExitConfig(){return this.configurationService.getValue()?.files?.hotExit||d.HotExitConfiguration.ON_EXIT}getEmptyWindowBackups(){return this.emptyWindows.slice(0)}registerWorkspaceBackup(h,l){this.workspaces.some(s=>h.workspace.id===s.workspace.id)||(this.workspaces.push(h),this.storeWorkspacesMetadata());const i=(0,L.join)(this.backupHome,h.workspace.id);return l?this.moveBackupFolder(i,l).then(()=>i):i}async moveBackupFolder(h,l){if(await p.Promises.exists(h)&&await this.convertToEmptyWindowBackup(h),await p.Promises.exists(l))try{await p.Promises.rename(l,h)}catch(i){this.logService.error(`Backup: Could not move backup folder to new location: ${i.toString()}`)}}registerFolderBackup(h){return this.folders.some(l=>this.backupUriComparer.isEqual(h.folderUri,l.folderUri))||(this.folders.push(h),this.storeWorkspacesMetadata()),(0,L.join)(this.backupHome,this.getFolderHash(h))}registerEmptyWindowBackup(h){return this.emptyWindows.some(l=>!!l.backupFolder&&this.backupPathComparer.isEqual(l.backupFolder,h.backupFolder))||(this.emptyWindows.push(h),this.storeWorkspacesMetadata()),(0,L.join)(this.backupHome,h.backupFolder)}async validateWorkspaces(h){if(!Array.isArray(h))return[];const l=new Set,i=[];for(const s of h){const n=s.workspace;if(!(0,v.isWorkspaceIdentifier)(n))return[];if(!l.has(n.id)){l.add(n.id);const a=(0,L.join)(this.backupHome,n.id);await this.doHasBackups(a)?n.configPath.scheme!==k.Schemas.file||await p.Promises.exists(n.configPath.fsPath)?i.push(s):await this.convertToEmptyWindowBackup(a):await this.deleteStaleBackup(a)}}return i}async validateFolders(h){if(!Array.isArray(h))return[];const l=[],i=new Set;for(const s of h){const n=s.folderUri,a=this.backupUriComparer.getComparisonKey(n);if(!i.has(a)){i.add(a);const r=(0,L.join)(this.backupHome,this.getFolderHash(s));await this.doHasBackups(r)?n.scheme!==k.Schemas.file||await p.Promises.exists(n.fsPath)?l.push(s):await this.convertToEmptyWindowBackup(r):await this.deleteStaleBackup(r)}}return l}async validateEmptyWorkspaces(h){if(!Array.isArray(h))return[];const l=[],i=new Set;for(const s of h){const n=s.backupFolder;if(typeof n!="string")return[];if(!i.has(n)){i.add(n);const a=(0,L.join)(this.backupHome,n);await this.doHasBackups(a)?l.push(s):await this.deleteStaleBackup(a)}}return l}async deleteStaleBackup(h){try{await p.Promises.rm(h,p.RimRafMode.MOVE)}catch(l){this.logService.error(`Backup: Could not delete stale backup: ${l.toString()}`)}}prepareNewEmptyWindowBackup(){let h=(0,u.createEmptyWorkspaceIdentifier)();for(;this.emptyWindows.some(l=>!!l.backupFolder&&this.backupPathComparer.isEqual(l.backupFolder,h.id));)h=(0,u.createEmptyWorkspaceIdentifier)();return{backupFolder:h.id}}async convertToEmptyWindowBackup(h){const l=this.prepareNewEmptyWindowBackup(),i=(0,L.join)(this.backupHome,l.backupFolder);try{await p.Promises.rename(h,i)}catch(s){return this.logService.error(`Backup: Could not rename backup folder: ${s.toString()}`),!1}return this.emptyWindows.push(l),!0}async getDirtyWorkspaces(){const h=[];for(const l of this.workspaces)await this.hasBackups(l)&&h.push(l);for(const l of this.folders)await this.hasBackups(l)&&h.push(l);return h}hasBackups(h){let l;return(0,m.isEmptyWindowBackupInfo)(h)?l=(0,L.join)(this.backupHome,h.backupFolder):(0,f.isFolderBackupInfo)(h)?l=(0,L.join)(this.backupHome,this.getFolderHash(h)):l=(0,L.join)(this.backupHome,h.workspace.id),this.doHasBackups(l)}async doHasBackups(h){try{const l=await p.Promises.readdir(h);for(const i of l)try{if((await p.Promises.readdir((0,L.join)(h,i))).length>0)return!0}catch{}}catch{}return!1}storeWorkspacesMetadata(){const h={workspaces:this.workspaces.map(({workspace:l,remoteAuthority:i})=>{const s={id:l.id,configURIPath:l.configPath.toString()};return i&&(s.remoteAuthority=i),s}),folders:this.folders.map(({folderUri:l,remoteAuthority:i})=>{const s={folderUri:l.toString()};return i&&(s.remoteAuthority=i),s}),emptyWindows:this.emptyWindows.map(({backupFolder:l,remoteAuthority:i})=>{const s={backupFolder:l};return i&&(s.remoteAuthority=i),s})};this.stateMainService.setItem(Ot.backupWorkspacesMetadataStorageKey,h)}getFolderHash(h){const l=h.folderUri;let i;return l.scheme===k.Schemas.file?i=R.isLinux?l.fsPath:l.fsPath.toLowerCase():i=l.toString().toLowerCase(),(0,C.createHash)("md5").update(i).digest("hex")}};S.backupWorkspacesMetadataStorageKey="backupWorkspaces",S=we([ie(0,I.IEnvironmentMainService),ie(1,y.IConfigurationService),ie(2,w.ILogService),ie(3,E.IStateMainService)],S),e.BackupMainService=S}),define(ee[52],te([0,1,13,3,43,34,2,14,9,20,12,23,176,62,57,27,5,6,19,51,119,28,94,95]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspacesManagementMainService=e.IWorkspacesManagementMainService=void 0,e.IWorkspacesManagementMainService=(0,v.createDecorator)("workspacesManagementMainService");let n=class extends R.Disposable{constructor(r,c,o,b,D,A){super(),this.environmentMainService=r,this.logService=c,this.userDataProfilesMainService=o,this.backupMainService=b,this.dialogMainService=D,this.productService=A,this._onDidDeleteUntitledWorkspace=this._register(new t.Emitter),this.onDidDeleteUntitledWorkspace=this._onDidDeleteUntitledWorkspace.event,this._onDidEnterWorkspace=this._register(new t.Emitter),this.onDidEnterWorkspace=this._onDidEnterWorkspace.event,this.untitledWorkspacesHome=this.environmentMainService.untitledWorkspacesHome,this.untitledWorkspaces=[]}async initialize(){this.untitledWorkspaces=[];try{const r=(await I.Promises.readdir(this.untitledWorkspacesHome.fsPath)).map(c=>(0,m.joinPath)(this.untitledWorkspacesHome,c,l.UNTITLED_WORKSPACE_NAME));for(const c of r){const o=(0,s.getWorkspaceIdentifier)(c),b=await this.resolveLocalWorkspace(c);b?this.untitledWorkspaces.push({workspace:o,remoteAuthority:b.remoteAuthority}):await this.deleteUntitledWorkspace(o)}}catch(r){r.code!=="ENOENT"&&this.logService.warn(`Unable to read folders in ${this.untitledWorkspacesHome} (${r}).`)}}resolveLocalWorkspace(r){return this.doResolveLocalWorkspace(r,c=>I.Promises.readFile(c,"utf8"))}doResolveLocalWorkspace(r,c){if(!!this.isWorkspacePath(r)&&r.scheme===P.Schemas.file)try{const o=c(r.fsPath);return o instanceof Promise?o.then(b=>this.doResolveWorkspace(r,b),b=>{}):this.doResolveWorkspace(r,o)}catch{return}}isWorkspacePath(r){return(0,l.isUntitledWorkspace)(r,this.environmentMainService)||(0,l.hasWorkspaceFileExtension)(r)}doResolveWorkspace(r,c){try{const o=this.doParseStoredWorkspace(r,c),b=(0,s.getWorkspaceIdentifier)(r);return{id:b.id,configPath:b.configPath,folders:(0,i.toWorkspaceFolders)(o.folders,b.configPath,m.extUriBiasedIgnorePathCase),remoteAuthority:o.remoteAuthority,transient:o.transient}}catch(o){this.logService.warn(o.toString())}}doParseStoredWorkspace(r,c){const o=(0,k.parse)(c);if(o&&Array.isArray(o.folders))o.folders=o.folders.filter(b=>(0,i.isStoredWorkspaceFolder)(b));else throw new Error(`${r.toString(!0)} looks like an invalid workspace file.`);return o}async createUntitledWorkspace(r,c){const{workspace:o,storedWorkspace:b}=this.newUntitledWorkspace(r,c),D=o.configPath.fsPath;return await I.Promises.mkdir((0,p.dirname)(D),{recursive:!0}),await I.Promises.writeFile(D,JSON.stringify(b,null,"	")),this.untitledWorkspaces.push({workspace:o,remoteAuthority:c}),o}newUntitledWorkspace(r=[],c){const o=(Date.now()+Math.round(Math.random()*1e3)).toString(),b=(0,m.joinPath)(this.untitledWorkspacesHome,o),D=(0,m.joinPath)(b,l.UNTITLED_WORKSPACE_NAME),A=[];for(const N of r)A.push((0,i.getStoredWorkspaceFolder)(N.uri,!0,N.name,b,m.extUriBiasedIgnorePathCase));return{workspace:(0,s.getWorkspaceIdentifier)(D),storedWorkspace:{folders:A,remoteAuthority:c}}}async getWorkspaceIdentifier(r){return(0,s.getWorkspaceIdentifier)(r)}isUntitledWorkspace(r){return(0,l.isUntitledWorkspace)(r.configPath,this.environmentMainService)}async deleteUntitledWorkspace(r){!this.isUntitledWorkspace(r)||(await this.doDeleteUntitledWorkspace(r),this.userDataProfilesMainService.isEnabled()&&this.userDataProfilesMainService.unsetWorkspace(r),this._onDidDeleteUntitledWorkspace.fire(r))}async doDeleteUntitledWorkspace(r){const c=(0,m.originalFSPath)(r.configPath);try{await I.Promises.rm((0,p.dirname)(c));const o=(0,p.join)(this.environmentMainService.workspaceStorageHome.fsPath,r.id);await I.Promises.exists(o)&&await I.Promises.writeFile((0,p.join)(o,"obsolete"),""),this.untitledWorkspaces=this.untitledWorkspaces.filter(b=>b.workspace.id!==r.id)}catch(o){this.logService.warn(`Unable to delete untitled workspace ${c} (${o}).`)}}getUntitledWorkspaces(){return this.untitledWorkspaces}async enterWorkspace(r,c,o){if(!r||!r.win||!r.isReady||!await this.isValidTargetWorkspacePath(r,c,o))return;const D=await this.doEnterWorkspace(r,(0,s.getWorkspaceIdentifier)(o));if(!!D)return this._onDidEnterWorkspace.fire({window:r,workspace:D.workspace}),D}async isValidTargetWorkspacePath(r,c,o){if(!o)return!0;if((0,l.isWorkspaceIdentifier)(r.openedWorkspace)&&m.extUriBiasedIgnorePathCase.isEqual(r.openedWorkspace.configPath,o))return!1;if((0,h.findWindowOnWorkspaceOrFolder)(c,o)){const b={title:this.productService.nameLong,type:"info",buttons:[(0,L.mnemonicButtonLabel)((0,E.localize)(0,null))],message:(0,E.localize)(1,null,(0,m.basename)(o)),detail:(0,E.localize)(2,null),noLink:!0,defaultId:0};return await this.dialogMainService.showMessageBox(b,(0,y.withNullAsUndefined)(C.BrowserWindow.getFocusedWindow())),!1}return!0}async doEnterWorkspace(r,c){if(!r.config)return;r.focus();let o;return r.config.extensionDevelopmentPath||(r.config.backupPath?o=await this.backupMainService.registerWorkspaceBackup({workspace:c,remoteAuthority:r.remoteAuthority},r.config.backupPath):o=this.backupMainService.registerWorkspaceBackup({workspace:c,remoteAuthority:r.remoteAuthority})),(0,l.isWorkspaceIdentifier)(r.openedWorkspace)&&this.isUntitledWorkspace(r.openedWorkspace)&&await this.deleteUntitledWorkspace(r.openedWorkspace),r.config.workspace=c,r.config.backupPath=o,{workspace:c,backupPath:o}}};n=we([ie(0,f.IEnvironmentMainService),ie(1,u.ILogService),ie(2,g.IUserDataProfilesMainService),ie(3,d.IBackupMainService),ie(4,w.IDialogMainService),ie(5,S.IProductService)],n),e.WorkspacesManagementMainService=n}),define(ee[120],te([0,1,13,41,22,5,32,28,52,12,6]),function(j,e,C,t,k,L,R,P,p,m,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticsMainService=e.IDiagnosticsMainService=e.ID=void 0,e.ID="diagnosticsMainService",e.IDiagnosticsMainService=(0,L.createDecorator)(e.ID);let I=class{constructor(d,w,f){this.windowsMainService=d,this.workspacesManagementMainService=w,this.logService=f}async getRemoteDiagnostics(d){const w=this.windowsMainService.getWindows();return(await Promise.all(w.map(async v=>{const u=v.remoteAuthority;if(!u)return;const S=`vscode:getDiagnosticInfoResponse${v.id}`,g={includeProcesses:d.includeProcesses,folders:d.includeWorkspaceMetadata?await this.getFolderURIs(v):void 0};return new Promise(h=>{v.sendWhenReady("vscode:getDiagnosticInfo",k.CancellationToken.None,{replyChannel:S,args:g}),t.validatedIpcMain.once(S,(l,i)=>{i||h({hostName:u,errorMessage:`Unable to resolve connection to '${u}'.`}),h(i)}),setTimeout(()=>{h({hostName:u,errorMessage:`Connection to '${u}' could not be established`})},5e3)})}))).filter(v=>!!v)}async getMainDiagnostics(){this.logService.trace("Received request for main process info from other instance.");const d=[];for(const w of C.BrowserWindow.getAllWindows()){const f=this.windowsMainService.getWindowById(w.id);f?d.push(await this.codeWindowToInfo(f)):d.push(this.browserWindowToInfo(w))}return{mainPID:process.pid,mainArguments:process.argv.slice(1),windows:d,screenReader:!!C.app.accessibilitySupportEnabled,gpuFeatureStatus:C.app.getGPUFeatureStatus()}}async codeWindowToInfo(d){const w=await this.getFolderURIs(d),f=(0,m.assertIsDefined)(d.win);return this.browserWindowToInfo(f,w,d.remoteAuthority)}browserWindowToInfo(d,w=[],f){return{pid:d.webContents.getOSProcessId(),title:d.getTitle(),folderURIs:w,remoteAuthority:f}}async getFolderURIs(d){const w=[],f=d.openedWorkspace;if((0,P.isSingleFolderWorkspaceIdentifier)(f))w.push(f.uri);else if((0,P.isWorkspaceIdentifier)(f)){const v=await this.workspacesManagementMainService.resolveLocalWorkspace(f.configPath);v&&v.folders.forEach(S=>{w.push(S.uri)})}return w}};I=we([ie(0,R.IWindowsMainService),ie(1,p.IWorkspacesManagementMainService),ie(2,y.ILogService)],I),e.DiagnosticsMainService=I}),define(ee[58],te([0,1,46,13,25,142,53,3,34,2,14,9,4,7,100,81,23,97,166,57,27,5,21,6,19,66,32,28,52,17,223,216,36]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativeHostMainService=e.INativeHostMainService=void 0,e.INativeHostMainService=(0,l.createDecorator)("nativeHostMainService");let G=class extends m.Disposable{constructor(x,Q,re,ne,fe,K,le,W,O,U){super(),this.sharedProcess=x,this.windowsMainService=Q,this.dialogMainService=re,this.lifecycleMainService=ne,this.environmentMainService=fe,this.logService=K,this.productService=le,this.themeMainService=W,this.stateMainService=O,this.workspacesManagementMainService=U,this.onDidOpenWindow=P.Event.map(this.windowsMainService.onDidOpenWindow,H=>H.id),this.onDidTriggerSystemContextMenu=P.Event.filter(P.Event.map(this.windowsMainService.onDidTriggerSystemContextMenu,({window:H,x:se,y:$})=>({windowId:H.id,x:se,y:$})),({windowId:H})=>!!this.windowsMainService.getWindowById(H)),this.onDidMaximizeWindow=P.Event.filter(P.Event.fromNodeEventEmitter(t.app,"browser-window-maximize",(H,se)=>se.id),H=>!!this.windowsMainService.getWindowById(H)),this.onDidUnmaximizeWindow=P.Event.filter(P.Event.fromNodeEventEmitter(t.app,"browser-window-unmaximize",(H,se)=>se.id),H=>!!this.windowsMainService.getWindowById(H)),this.onDidBlurWindow=P.Event.filter(P.Event.fromNodeEventEmitter(t.app,"browser-window-blur",(H,se)=>se.id),H=>!!this.windowsMainService.getWindowById(H)),this.onDidFocusWindow=P.Event.any(P.Event.map(P.Event.filter(P.Event.map(this.windowsMainService.onDidChangeWindowsCount,()=>this.windowsMainService.getLastActiveWindow()),H=>!!H),H=>H.id),P.Event.filter(P.Event.fromNodeEventEmitter(t.app,"browser-window-focus",(H,se)=>se.id),H=>!!this.windowsMainService.getWindowById(H))),this.onDidResumeOS=P.Event.fromNodeEventEmitter(t.powerMonitor,"resume"),this.onDidChangeColorScheme=this.themeMainService.onDidChangeColorScheme,this._onDidChangePassword=this._register(new P.Emitter),this.onDidChangePassword=this._onDidChangePassword.event,this.onDidChangeDisplay=P.Event.debounce(P.Event.any(P.Event.filter(P.Event.fromNodeEventEmitter(t.screen,"display-metrics-changed",(H,se,$)=>$),H=>!(Array.isArray(H)&&H.length===1&&H[0]==="workArea")),P.Event.fromNodeEventEmitter(t.screen,"display-added"),P.Event.fromNodeEventEmitter(t.screen,"display-removed")),()=>{},100)}get windowId(){throw new Error("Not implemented in electron-main")}async getWindows(){return this.windowsMainService.getWindows().map(Q=>({id:Q.id,workspace:Q.openedWorkspace??(0,c.toWorkspaceIdentifier)(Q.backupPath,Q.isExtensionDevelopmentHost),title:Q.win?.getTitle()??"",filename:Q.getRepresentedFilename(),dirty:Q.isDocumentEdited()}))}async getWindowCount(x){return this.windowsMainService.getWindowCount()}async getActiveWindowId(x){const Q=t.BrowserWindow.getFocusedWindow()||this.windowsMainService.getLastActiveWindow();if(Q)return Q.id}openWindow(x,Q,re){return Array.isArray(Q)?this.doOpenWindow(x,Q,re):this.doOpenEmptyWindow(x,Q)}async doOpenWindow(x,Q,re=Object.create(null)){Q.length>0&&await this.windowsMainService.open({context:5,contextWindowId:x,urisToOpen:Q,cli:this.environmentMainService.args,forceNewWindow:re.forceNewWindow,forceReuseWindow:re.forceReuseWindow,preferNewWindow:re.preferNewWindow,diffMode:re.diffMode,mergeMode:re.mergeMode,addMode:re.addMode,gotoLineMode:re.gotoLineMode,noRecentEntry:re.noRecentEntry,waitMarkerFileURI:re.waitMarkerFileURI,remoteAuthority:re.remoteAuthority||void 0})}async doOpenEmptyWindow(x,Q){await this.windowsMainService.openEmptyWindow({context:5,contextWindowId:x},Q)}async toggleFullScreen(x){this.windowById(x)?.toggleFullScreen()}async handleTitleDoubleClick(x){this.windowById(x)?.handleTitleDoubleClick()}async isMaximized(x){const Q=this.windowById(x);return Q?.win?Q.win.isMaximized():!1}async maximizeWindow(x){const Q=this.windowById(x);Q?.win&&Q.win.maximize()}async unmaximizeWindow(x){const Q=this.windowById(x);Q?.win&&Q.win.unmaximize()}async minimizeWindow(x){const Q=this.windowById(x);Q?.win&&Q.win.minimize()}async updateWindowControls(x,Q){const re=this.windowById(x);re&&re.updateWindowControls(Q)}async focusWindow(x,Q){Q&&typeof Q.windowId=="number"&&(x=Q.windowId),this.windowById(x)?.focus({force:Q?.force??!1})}async setMinimumSize(x,Q,re){const ne=this.windowById(x);if(ne?.win){const[fe,K]=ne.win.getSize(),[le,W]=ne.win.getMinimumSize(),[O,U]=[Q??le,re??W],[H,se]=[Math.max(fe,O),Math.max(K,U)];(le!==O||W!==U)&&ne.win.setMinimumSize(O,U),(fe!==H||K!==se)&&ne.win.setSize(H,se)}}async saveWindowSplash(x,Q){this.themeMainService.saveWindowSplash(x,Q)}async installShellCommand(x){const{source:Q,target:re}=await this.getShellCommandLink();try{const{symbolicLink:ne}=await v.SymlinkSupport.stat(Q);if(ne&&!ne.dangling){const fe=await(0,w.realpath)(Q);if(re===fe)return}await v.Promises.unlink(Q)}catch(ne){if(ne.code!=="ENOENT")throw ne}try{await v.Promises.symlink(re,Q)}catch(ne){if(ne.code!=="EACCES"&&ne.code!=="ENOENT")throw ne;const{response:fe}=await this.showMessageBox(x,{title:this.productService.nameLong,type:"info",message:(0,S.localize)(0,null,this.productService.nameShort),buttons:[(0,p.mnemonicButtonLabel)((0,S.localize)(1,null)),(0,p.mnemonicButtonLabel)((0,S.localize)(2,null))],noLink:!0,defaultId:0,cancelId:1});if(fe===0)try{const K=`osascript -e "do shell script \\"mkdir -p /usr/local/bin && ln -sf '${re}' '${Q}'\\" with administrator privileges"`;await(0,L.promisify)(C.exec)(K)}catch{throw new Error((0,S.localize)(3,null,Q))}}}async uninstallShellCommand(x){const{source:Q}=await this.getShellCommandLink();try{await v.Promises.unlink(Q)}catch(re){switch(re.code){case"EACCES":{const{response:ne}=await this.showMessageBox(x,{title:this.productService.nameLong,type:"info",message:(0,S.localize)(4,null,this.productService.nameShort),buttons:[(0,p.mnemonicButtonLabel)((0,S.localize)(5,null)),(0,p.mnemonicButtonLabel)((0,S.localize)(6,null))],noLink:!0,defaultId:0,cancelId:1});if(ne===0)try{const fe=`osascript -e "do shell script \\"rm '${Q}'\\" with administrator privileges"`;await(0,L.promisify)(C.exec)(fe)}catch{throw new Error((0,S.localize)(7,null,Q))}break}case"ENOENT":break;default:throw re}}}async getShellCommandLink(){const x=(0,I.resolve)(this.environmentMainService.appRoot,"bin",this.productService.applicationName),Q=`/usr/local/bin/${this.productService.applicationName}`;if(!await v.Promises.exists(x))throw new Error((0,S.localize)(8,null,x));return{source:Q,target:x}}async showMessageBox(x,Q){return this.dialogMainService.showMessageBox(Q,this.toBrowserWindow(x))}async showSaveDialog(x,Q){return this.dialogMainService.showSaveDialog(Q,this.toBrowserWindow(x))}async showOpenDialog(x,Q){return this.dialogMainService.showOpenDialog(Q,this.toBrowserWindow(x))}toBrowserWindow(x){const Q=this.windowById(x);if(Q?.win)return Q.win}async pickFileFolderAndOpen(x,Q){const re=await this.dialogMainService.pickFileFolder(Q);re&&await this.doOpenPicked(await Promise.all(re.map(async ne=>await v.SymlinkSupport.existsDirectory(ne)?{folderUri:d.URI.file(ne)}:{fileUri:d.URI.file(ne)})),Q,x)}async pickFolderAndOpen(x,Q){const re=await this.dialogMainService.pickFolder(Q);re&&await this.doOpenPicked(re.map(ne=>({folderUri:d.URI.file(ne)})),Q,x)}async pickFileAndOpen(x,Q){const re=await this.dialogMainService.pickFile(Q);re&&await this.doOpenPicked(re.map(ne=>({fileUri:d.URI.file(ne)})),Q,x)}async pickWorkspaceAndOpen(x,Q){const re=await this.dialogMainService.pickWorkspace(Q);re&&await this.doOpenPicked(re.map(ne=>({workspaceUri:d.URI.file(ne)})),Q,x)}async doOpenPicked(x,Q,re){await this.windowsMainService.open({context:3,contextWindowId:re,cli:this.environmentMainService.args,urisToOpen:x,forceNewWindow:Q.forceNewWindow})}async showItemInFolder(x,Q){t.shell.showItemInFolder(Q)}async setRepresentedFilename(x,Q){this.windowById(x)?.setRepresentedFilename(Q)}async setDocumentEdited(x,Q){this.windowById(x)?.setDocumentEdited(Q)}async openExternal(x,Q){return E.isLinuxSnap?this.safeSnapOpenExternal(Q):t.shell.openExternal(Q),!0}safeSnapOpenExternal(x){const Q=process.env.GDK_PIXBUF_MODULE_FILE,re=process.env.GDK_PIXBUF_MODULEDIR;delete process.env.GDK_PIXBUF_MODULE_FILE,delete process.env.GDK_PIXBUF_MODULEDIR,t.shell.openExternal(x),process.env.GDK_PIXBUF_MODULE_FILE=Q,process.env.GDK_PIXBUF_MODULEDIR=re}moveItemToTrash(x,Q){return t.shell.trashItem(Q)}async isAdmin(){let x;return E.isWindows?x=(await new Promise((Q,re)=>{j(["native-is-elevated"],Q,re)}))():x=process.getuid()===0,x}async writeElevated(x,Q,re,ne){const fe=await new Promise((K,le)=>{j(["@vscode/sudo-prompt"],K,le)});return new Promise((K,le)=>{const W=[`"${this.cliPath}"`];ne?.unlock&&W.push("--file-chmod"),W.push("--file-write",`"${Q.fsPath}"`,`"${re.fsPath}"`);const O={name:this.productService.nameLong.replace("-",""),icns:E.isMacintosh&&this.environmentMainService.isBuilt?(0,I.join)((0,I.dirname)(this.environmentMainService.appRoot),`${this.productService.nameShort}.icns`):void 0};fe.exec(W.join(" "),O,(U,H,se)=>{H&&this.logService.trace(`[sudo-prompt] received stdout: ${H}`),se&&this.logService.trace(`[sudo-prompt] received stderr: ${se}`),U?le(U):K(void 0)})})}get cliPath(){return E.isWindows?this.environmentMainService.isBuilt?(0,I.join)((0,I.dirname)(process.execPath),"bin",`${this.productService.applicationName}.cmd`):(0,I.join)(this.environmentMainService.appRoot,"scripts","code-cli.bat"):E.isLinux?this.environmentMainService.isBuilt?(0,I.join)((0,I.dirname)(process.execPath),"bin",`${this.productService.applicationName}`):(0,I.join)(this.environmentMainService.appRoot,"scripts","code-cli.sh"):this.environmentMainService.isBuilt?(0,I.join)(this.environmentMainService.appRoot,"bin",`${this.productService.applicationName}`):(0,I.join)(this.environmentMainService.appRoot,"scripts","code-cli.sh")}async getOSStatistics(){return{totalmem:(0,k.totalmem)(),freemem:(0,k.freemem)(),loadavg:(0,k.loadavg)()}}async getOSProperties(){return{arch:(0,k.arch)(),platform:(0,k.platform)(),release:(0,k.release)(),type:(0,k.type)(),cpus:(0,k.cpus)()}}async getOSVirtualMachineHint(){return f.virtualMachineHint.value()}async getOSColorScheme(){return this.themeMainService.getColorScheme()}async hasWSLFeatureInstalled(){return E.isWindows&&(0,D.hasWSLFeatureInstalled)()}async killProcess(x,Q,re){process.kill(Q,re)}async readClipboardText(x,Q){return t.clipboard.readText(Q)}async writeClipboardText(x,Q,re){return t.clipboard.writeText(Q,re)}async readClipboardFindText(x){return t.clipboard.readFindText()}async writeClipboardFindText(x,Q){return t.clipboard.writeFindText(Q)}async writeClipboardBuffer(x,Q,re,ne){return t.clipboard.writeBuffer(Q,Buffer.from(re.buffer),ne)}async readClipboardBuffer(x,Q){return b.VSBuffer.wrap(t.clipboard.readBuffer(Q))}async hasClipboard(x,Q,re){return t.clipboard.has(Q,re)}async newWindowTab(){await this.windowsMainService.open({context:5,cli:this.environmentMainService.args,forceNewTabbedWindow:!0,forceEmpty:!0,remoteAuthority:this.environmentMainService.args.remote||void 0})}async showPreviousWindowTab(){t.Menu.sendActionToFirstResponder("selectPreviousTab:")}async showNextWindowTab(){t.Menu.sendActionToFirstResponder("selectNextTab:")}async moveWindowTabToNewWindow(){t.Menu.sendActionToFirstResponder("moveTabToNewWindow:")}async mergeAllWindowTabs(){t.Menu.sendActionToFirstResponder("mergeAllWindows:")}async toggleWindowTabsBar(){t.Menu.sendActionToFirstResponder("toggleTabBar:")}async updateTouchBar(x,Q){this.windowById(x)?.updateTouchBar(Q)}async notifyReady(x){this.windowById(x)?.setReady()}async relaunch(x,Q){return this.lifecycleMainService.relaunch(Q)}async reload(x,Q){const re=this.windowById(x);if(re){if((0,c.isWorkspaceIdentifier)(re.openedWorkspace)){const ne=re.openedWorkspace.configPath;if(ne.scheme===y.Schemas.file&&(await this.workspacesManagementMainService.resolveLocalWorkspace(ne))?.transient)return this.openWindow(re.id,{forceReuseWindow:!0})}return this.lifecycleMainService.reload(re,Q?.disableExtensions!==void 0?{_:[],"disable-extensions":Q.disableExtensions}:void 0)}}async closeWindow(x){this.closeWindowById(x,x)}async closeWindowById(x,Q){const re=this.windowById(Q);if(re?.win)return re.win.close()}async quit(x){const Q=this.windowsMainService.getLastActiveWindow();Q?.isExtensionDevelopmentHost&&this.windowsMainService.getWindowCount()>1&&Q.win?Q.win.close():this.lifecycleMainService.quit()}async exit(x,Q){await this.lifecycleMainService.kill(Q)}async resolveProxy(x,Q){const ne=this.windowById(x)?.win?.webContents?.session;if(ne)return ne.resolveProxy(Q)}findFreePort(x,Q,re,ne,fe=1){return(0,u.findFreePort)(Q,re,ne,fe)}async openDevTools(x,Q){const re=this.windowById(x);re?.win&&re.win.webContents.openDevTools(Q)}async toggleDevTools(x){const Q=this.windowById(x);Q?.win&&Q.win.webContents.toggleDevTools()}async sendInputEvent(x,Q){const re=this.windowById(x);re?.win&&(Q.type==="mouseDown"||Q.type==="mouseUp")&&re.win.webContents.sendInputEvent(Q)}async enableSandbox(x,Q){Q?this.stateMainService.setItem("window.experimental.useSandbox",!0):this.stateMainService.removeItem("window.experimental.useSandbox")}async toggleSharedProcessWindow(){return this.sharedProcess.toggle()}async profileRenderer(x,Q,re){const ne=this.windowById(x);if(!ne||!ne.win)throw new Error;return await new A.WindowProfiler(ne.win,Q,this.logService).inspect(re)}async windowsGetStringRegKey(x,Q,re,ne){if(!E.isWindows)return;const fe=await new Promise((K,le)=>{j(["@vscode/windows-registry"],K,le)});try{return fe.GetStringRegKey(Q,re,ne)}catch{return}}windowById(x){if(typeof x=="number")return this.windowsMainService.getWindowById(x)}};we([R.memoize],G.prototype,"cliPath",null),G=we([ie(1,r.IWindowsMainService),ie(2,g.IDialogMainService),ie(3,i.ILifecycleMainService),ie(4,h.IEnvironmentMainService),ie(5,s.ILogService),ie(6,n.IProductService),ie(7,a.IThemeMainService),ie(8,N.IStateMainService),ie(9,o.IWorkspacesManagementMainService)],G),e.NativeHostMainService=G}),define(ee[267],te([0,1,13,41,25,34,2,14,4,101,164,84,120,57,27,5,6,58,63,19,64,74,30,12]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IssueMainService=e.IIssueMainService=void 0,e.IIssueMainService=(0,f.createDecorator)("issueMainService");let n=class Nt{constructor(r,c,o,b,D,A,N,G,ae){this.userEnv=r,this.environmentMainService=c,this.logService=o,this.diagnosticsService=b,this.diagnosticsMainService=D,this.dialogMainService=A,this.nativeHostMainService=N,this.protocolMainService=G,this.productService=ae,this.issueReporterWindow=null,this.issueReporterParentWindow=null,this.processExplorerWindow=null,this.processExplorerParentWindow=null,this.registerListeners()}registerListeners(){t.validatedIpcMain.on("vscode:issueSystemInfoRequest",async r=>{const[c,o]=await Promise.all([this.diagnosticsMainService.getMainDiagnostics(),this.diagnosticsMainService.getRemoteDiagnostics({includeProcesses:!1,includeWorkspaceMetadata:!1})]),b=await this.diagnosticsService.getSystemInfo(c,o);this.safeSend(r,"vscode:issueSystemInfoResponse",b)}),t.validatedIpcMain.on("vscode:listProcesses",async r=>{const c=[];try{c.push({name:(0,y.localize)(0,null),rootProcess:await(0,m.listProcesses)(process.pid)}),(await this.diagnosticsMainService.getRemoteDiagnostics({includeProcesses:!0})).forEach(b=>{(0,I.isRemoteDiagnosticError)(b)?c.push({name:b.hostName,rootProcess:b}):b.processes&&c.push({name:b.hostName,rootProcess:b.processes})})}catch(o){this.logService.error(`Listing processes failed: ${o}`)}this.safeSend(r,"vscode:listProcessesResponse",c)}),t.validatedIpcMain.on("vscode:issueReporterClipboard",async r=>{const c={title:this.productService.nameLong,message:(0,y.localize)(1,null),type:"warning",buttons:[(0,L.mnemonicButtonLabel)((0,y.localize)(2,null)),(0,L.mnemonicButtonLabel)((0,y.localize)(3,null))],defaultId:0,cancelId:1,noLink:!0};if(this.issueReporterWindow){const o=await this.dialogMainService.showMessageBox(c,this.issueReporterWindow);this.safeSend(r,"vscode:issueReporterClipboardResponse",o.response===0)}}),t.validatedIpcMain.on("vscode:issuePerformanceInfoRequest",async r=>{const c=await this.getPerformanceInfo();this.safeSend(r,"vscode:issuePerformanceInfoResponse",c)}),t.validatedIpcMain.on("vscode:issueReporterConfirmClose",async()=>{const r={title:this.productService.nameLong,message:(0,y.localize)(4,null),type:"warning",buttons:[(0,L.mnemonicButtonLabel)((0,y.localize)(5,null)),(0,L.mnemonicButtonLabel)((0,y.localize)(6,null))],defaultId:0,cancelId:1,noLink:!0};this.issueReporterWindow&&(await this.dialogMainService.showMessageBox(r,this.issueReporterWindow)).response===0&&this.issueReporterWindow&&(this.issueReporterWindow.destroy(),this.issueReporterWindow=null)}),t.validatedIpcMain.on("vscode:workbenchCommand",(r,c)=>{const{id:o,from:b,args:D}=c;let A;switch(b){case"issueReporter":A=this.issueReporterParentWindow;break;case"processExplorer":A=this.processExplorerParentWindow;break;default:throw new Error(`Unexpected command source: ${b}`)}A?.webContents.send("vscode:runAction",{id:o,from:b,args:D})}),t.validatedIpcMain.on("vscode:openExternal",(r,c)=>{this.nativeHostMainService.openExternal(void 0,c)}),t.validatedIpcMain.on("vscode:closeIssueReporter",r=>{this.issueReporterWindow?.close()}),t.validatedIpcMain.on("vscode:closeProcessExplorer",r=>{this.processExplorerWindow?.close()}),t.validatedIpcMain.on("vscode:windowsInfoRequest",async r=>{const c=await this.diagnosticsMainService.getMainDiagnostics();this.safeSend(r,"vscode:windowsInfoResponse",c.windows)})}safeSend(r,c,...o){r.sender.isDestroyed()||r.sender.send(c,...o)}async openReporter(r){if(!this.issueReporterWindow&&(this.issueReporterParentWindow=C.BrowserWindow.getFocusedWindow(),this.issueReporterParentWindow)){const c=new R.DisposableStore,o=c.add(this.protocolMainService.createIPCObjectUrl()),b=this.getWindowPosition(this.issueReporterParentWindow,700,800);this.issueReporterWindow=this.createBrowserWindow(b,o,{backgroundColor:r.styles.backgroundColor,title:(0,y.localize)(7,null),zoomLevel:r.zoomLevel,alwaysOnTop:!1},"issue-reporter"),o.update({appRoot:this.environmentMainService.appRoot,windowId:this.issueReporterWindow.id,userEnv:this.userEnv,data:r,disableExtensions:!!this.environmentMainService.disableExtensions,os:{type:(0,k.type)(),arch:(0,k.arch)(),release:(0,k.release)()},product:S.default}),this.issueReporterWindow.loadURL(P.FileAccess.asBrowserUri(`vs/code/electron-sandbox/issue/issueReporter${this.environmentMainService.isBuilt?"":"-dev"}.html`).toString(!0)),this.issueReporterWindow.on("close",()=>{this.issueReporterWindow=null,c.dispose()}),this.issueReporterParentWindow.on("closed",()=>{this.issueReporterWindow&&(this.issueReporterWindow.close(),this.issueReporterWindow=null,c.dispose())})}this.issueReporterWindow&&this.focusWindow(this.issueReporterWindow)}async openProcessExplorer(r){if(!this.processExplorerWindow&&(this.processExplorerParentWindow=C.BrowserWindow.getFocusedWindow(),this.processExplorerParentWindow)){const c=new R.DisposableStore,o=c.add(this.protocolMainService.createIPCObjectUrl()),b=this.getWindowPosition(this.processExplorerParentWindow,800,500);this.processExplorerWindow=this.createBrowserWindow(b,o,{backgroundColor:r.styles.backgroundColor,title:(0,y.localize)(8,null),zoomLevel:r.zoomLevel,alwaysOnTop:!0},"process-explorer"),o.update({appRoot:this.environmentMainService.appRoot,windowId:this.processExplorerWindow.id,userEnv:this.userEnv,data:r,product:S.default}),this.processExplorerWindow.loadURL(P.FileAccess.asBrowserUri(`vs/code/electron-sandbox/processExplorer/processExplorer${this.environmentMainService.isBuilt?"":"-dev"}.html`).toString(!0)),this.processExplorerWindow.on("close",()=>{this.processExplorerWindow=null,c.dispose()}),this.processExplorerParentWindow.on("close",()=>{this.processExplorerWindow&&(this.processExplorerWindow.close(),this.processExplorerWindow=null,c.dispose())})}this.processExplorerWindow&&this.focusWindow(this.processExplorerWindow)}focusWindow(r){r.isMinimized()&&r.restore(),r.focus()}createBrowserWindow(r,c,o,b){const D=new C.BrowserWindow({fullscreen:!1,skipTaskbar:!1,resizable:!0,width:r.width,height:r.height,minWidth:300,minHeight:200,x:r.x,y:r.y,title:o.title,backgroundColor:o.backgroundColor||Nt.DEFAULT_BACKGROUND_COLOR,webPreferences:{preload:P.FileAccess.asFileUri("vs/base/parts/sandbox/electron-browser/preload.js").fsPath,additionalArguments:[`--vscode-window-config=${c.resource.toString()}`,`--vscode-window-kind=${b}`],v8CacheOptions:this.environmentMainService.useCodeCache?"bypassHeatCheck":"none",enableWebSQL:!1,spellcheck:!1,zoomFactor:(0,l.zoomLevelToZoomFactor)(o.zoomLevel),sandbox:!0,contextIsolation:!0},alwaysOnTop:o.alwaysOnTop,experimentalDarkMode:!0});return D.setMenuBarVisibility(!1),D}async getSystemStatus(){const[r,c]=await Promise.all([this.diagnosticsMainService.getMainDiagnostics(),this.diagnosticsMainService.getRemoteDiagnostics({includeProcesses:!1,includeWorkspaceMetadata:!1})]);return this.diagnosticsService.getDiagnostics(r,c)}getWindowPosition(r,c,o){let b;const D=C.screen.getAllDisplays();if(D.length===1)b=D[0];else{if(p.isMacintosh){const G=C.screen.getCursorScreenPoint();b=C.screen.getDisplayNearestPoint(G)}!b&&r&&(b=C.screen.getDisplayMatching(r.getBounds())),b||(b=C.screen.getPrimaryDisplay()||D[0])}const A={width:c,height:o},N=b.bounds;return A.x=N.x+N.width/2-A.width/2,A.y=N.y+N.height/2-A.height/2,N.width>0&&N.height>0&&(A.x<N.x&&(A.x=N.x),A.y<N.y&&(A.y=N.y),A.x>N.x+N.width&&(A.x=N.x),A.y>N.y+N.height&&(A.y=N.y),A.width>N.width&&(A.width=N.width),A.height>N.height&&(A.height=N.height)),A}async getPerformanceInfo(){try{const[r,c]=await Promise.all([this.diagnosticsMainService.getMainDiagnostics(),this.diagnosticsMainService.getRemoteDiagnostics({includeProcesses:!0,includeWorkspaceMetadata:!0})]);return await this.diagnosticsService.getPerformanceInfo(r,c)}catch(r){throw this.logService.warn("issueService#getPerformanceInfo ",r.message),r}}async stopTracing(){if(!this.environmentMainService.args.trace)return;const r=await C.contentTracing.stopRecording(`${(0,i.randomPath)(this.environmentMainService.userHome.fsPath,this.productService.applicationName)}.trace.txt`);await this.dialogMainService.showMessageBox({title:this.productService.nameLong,type:"info",message:(0,y.localize)(9,null),detail:(0,y.localize)(10,null,r),buttons:[(0,L.mnemonicButtonLabel)((0,y.localize)(11,null))],defaultId:0,noLink:!0},(0,s.withNullAsUndefined)(C.BrowserWindow.getFocusedWindow())),this.nativeHostMainService.showItemInFolder(void 0,r)}};n.DEFAULT_BACKGROUND_COLOR="#1E1E1E",n=we([ie(1,w.IEnvironmentMainService),ie(2,v.ILogService),ie(3,I.IDiagnosticsService),ie(4,E.IDiagnosticsMainService),ie(5,d.IDialogMainService),ie(6,u.INativeHostMainService),ie(7,h.IProtocolMainService),ie(8,g.IProductService)],n),e.IssueMainService=n}),define(ee[268],te([0,1,22,18,27,21,6,58,19,55,31,49,90]),function(j,e,C,t,k,L,R,P,p,m,y,I,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinuxUpdateService=void 0;let d=class extends E.AbstractUpdateService{constructor(f,v,u,S,g,h,l,i){super(f,v,S,g,h,i),this.telemetryService=u,this.nativeHostMainService=l}buildUpdateFeedUrl(f){return(0,E.createUpdateURL)(`linux-${process.arch}`,f,this.productService)}doCheckForUpdates(f){!this.url||(this.setState(I.State.CheckingForUpdates(f)),this.requestService.request({url:this.url},C.CancellationToken.None).then(m.asJson).then(v=>{!v||!v.url||!v.version||!v.productVersion?(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!f}),this.setState(I.State.Idle(1))):this.setState(I.State.AvailableForDownload(v))}).then(void 0,v=>{this.logService.error(v),this.telemetryService.publicLog2("update:notAvailable",{explicit:!!f});const u=f?v.message||v:void 0;this.setState(I.State.Idle(1,u))}))}async doDownloadUpdate(f){this.productService.downloadUrl&&this.productService.downloadUrl.length>0?this.nativeHostMainService.openExternal(void 0,this.productService.downloadUrl):f.update.url&&this.nativeHostMainService.openExternal(void 0,f.update.url),this.setState(I.State.Idle(1))}};d=we([ie(0,L.ILifecycleMainService),ie(1,t.IConfigurationService),ie(2,y.ITelemetryService),ie(3,k.IEnvironmentMainService),ie(4,m.IRequestService),ie(5,R.ILogService),ie(6,P.INativeHostMainService),ie(7,p.IProductService)],d),e.LinuxUpdateService=d}),define(ee[269],te([0,1,46,40,25,8,22,53,9,7,128,23,18,27,16,21,6,58,19,55,31,49,90]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Win32UpdateService=void 0;async function s(c,o=1e3){for(;!c();)await(0,L.timeout)(o)}let n;function a(){return typeof n>"u"&&(t.existsSync(p.join(p.dirname(process.execPath),"unins000.exe"))?n=0:p.basename(p.normalize(p.join(process.execPath,"..","..")))==="Program Files"?n=3:n=1),n}let r=class extends i.AbstractUpdateService{get cachePath(){const o=p.join((0,k.tmpdir)(),`${this.productService.applicationName}-update-${this.productService.target}-${process.arch}`);return I.Promises.mkdir(o,{recursive:!0}).then(()=>o)}constructor(o,b,D,A,N,G,ae,x,Q){super(o,b,A,N,G,Q),this.telemetryService=D,this.fileService=ae,this.nativeHostMainService=x}async initialize(){if(this.productService.target==="user"&&await this.nativeHostMainService.isAdmin(void 0)){this.logService.info("update#ctor - updates are disabled due to running as Admin in user setup");return}super.initialize()}buildUpdateFeedUrl(o){let b="win32";switch(process.arch!=="ia32"&&(b+=`-${process.arch}`),a()){case 1:b+="-archive";break;case 3:b+="-msi";break;default:this.productService.target==="user"&&(b+="-user")}return(0,i.createUpdateURL)(b,o,this.productService)}doCheckForUpdates(o){!this.url||(this.setState(l.State.CheckingForUpdates(o)),this.requestService.request({url:this.url},R.CancellationToken.None).then(g.asJson).then(b=>{const D=a();return!b||!b.url||!b.version||!b.productVersion?(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!o}),this.setState(l.State.Idle(D)),Promise.resolve(null)):D===1?(this.setState(l.State.AvailableForDownload(b)),Promise.resolve(null)):(this.setState(l.State.Downloading(b)),this.cleanup(b.version).then(()=>this.getUpdatePackagePath(b.version).then(A=>I.Promises.exists(A).then(N=>{if(N)return Promise.resolve(A);const G=b.url,ae=b.hash,x=`${A}.tmp`;return this.requestService.request({url:G},R.CancellationToken.None).then(Q=>this.fileService.writeFile(m.URI.file(x),Q.stream)).then(ae?()=>(0,y.checksum)(x,b.hash):()=>{}).then(()=>I.Promises.rename(x,A)).then(()=>A)})).then(A=>{const N=this.configurationService.getValue("update.enableWindowsBackgroundUpdates");this.availableUpdate={packagePath:A},N&&b.supportsFastUpdate?this.productService.target==="user"?this.doApplyUpdate():this.setState(l.State.Downloaded(b)):this.setState(l.State.Ready(b))})))}).then(void 0,b=>{this.logService.error(b),this.telemetryService.publicLog2("update:notAvailable",{explicit:!!o});const D=o?b.message||b:void 0;this.setState(l.State.Idle(a(),D))}))}async doDownloadUpdate(o){o.update.url&&this.nativeHostMainService.openExternal(void 0,o.update.url),this.setState(l.State.Idle(a()))}async getUpdatePackagePath(o){const b=await this.cachePath;return p.join(b,`CodeSetup-${this.productService.quality}-${o}.exe`)}async cleanup(o=null){const b=o?G=>!new RegExp(`${this.productService.quality}-${o}\\.exe$`).test(G):()=>!0,D=await this.cachePath,N=(await I.Promises.readdir(D)).filter(b).map(async G=>{try{await I.Promises.unlink(p.join(D,G))}catch{}});await Promise.all(N)}async doApplyUpdate(){if(this.state.type!=="downloaded"&&this.state.type!=="downloading"||!this.availableUpdate)return Promise.resolve(void 0);const o=this.state.update;this.setState(l.State.Updating(o));const b=await this.cachePath;this.availableUpdate.updateFilePath=p.join(b,`CodeSetup-${this.productService.quality}-${o.version}.flag`),await I.Promises.writeFile(this.availableUpdate.updateFilePath,"flag"),(0,C.spawn)(this.availableUpdate.packagePath,["/verysilent",`/update="${this.availableUpdate.updateFilePath}"`,"/nocloseapplications","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"],windowsVerbatimArguments:!0}).once("exit",()=>{this.availableUpdate=void 0,this.setState(l.State.Idle(a()))});const A=`${this.productService.win32MutexName}-ready`,N=await new Promise((G,ae)=>{j(["windows-mutex"],G,ae)});s(()=>N.isActive(A)).then(()=>this.setState(l.State.Ready(o)))}doQuitAndInstall(){this.state.type!=="ready"||!this.availableUpdate||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.state.update.supportsFastUpdate&&this.availableUpdate.updateFilePath?t.unlinkSync(this.availableUpdate.updateFilePath):a()==3?(0,C.spawn)("msiexec.exe",["/i",this.availableUpdate.packagePath],{detached:!0,stdio:["ignore","ignore","ignore"]}):(0,C.spawn)(this.availableUpdate.packagePath,["/silent","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"]}))}getUpdateType(){return a()}async _applySpecificUpdate(o){if(this.state.type!=="idle")return;const b=this.configurationService.getValue("update.enableWindowsBackgroundUpdates"),D={version:"unknown",productVersion:"unknown",supportsFastUpdate:!!b};this.setState(l.State.Downloading(D)),this.availableUpdate={packagePath:o},b?this.productService.target==="user"?this.doApplyUpdate():this.setState(l.State.Downloaded(D)):this.setState(l.State.Ready(D))}};we([P.memoize],r.prototype,"cachePath",null),r=we([ie(0,f.ILifecycleMainService),ie(1,E.IConfigurationService),ie(2,h.ITelemetryService),ie(3,d.IEnvironmentMainService),ie(4,g.IRequestService),ie(5,v.ILogService),ie(6,w.IFileService),ie(7,u.INativeHostMainService),ie(8,S.IProductService)],r),e.Win32UpdateService=r}),define(ee[270],te([0,1,13,8,22,45,3,34,2,14,9,73,4,7,172,62,18,57,27,61,16,21,6,19,64,234,93,31,239,66,74,32,28,52,117,122,37,36,51,58,236,113,56,89,25,114]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N,G,ae,x,Q,re,ne,fe,K,le,W,O,U,H){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeWindow=void 0;var se;(function(z){z[z.NONE=0]="NONE",z[z.NAVIGATING=1]="NAVIGATING",z[z.READY=2]="READY"})(se||(se={}));let $=class gt extends p.Disposable{get id(){return this._id}get win(){return this._win}get lastFocusTime(){return this._lastFocusTime}get backupPath(){return this._config?.backupPath}get openedWorkspace(){return this._config?.workspace}get profile(){if(!this.config)return;const M=this.userDataProfilesService.profiles.find(T=>T.id===this.config?.profiles.profile.id);return this.isExtensionDevelopmentHost&&M?M:this.userDataProfilesService.getOrSetProfileForWorkspace(this.config.workspace??"empty-window",M??this.userDataProfilesService.defaultProfile)}get remoteAuthority(){return this._config?.remoteAuthority}get config(){return this._config}get isExtensionDevelopmentHost(){return!!this._config?.extensionDevelopmentPath}get isExtensionTestHost(){return!!this._config?.extensionTestsPath}get isExtensionDevelopmentTestFromCli(){return this.isExtensionDevelopmentHost&&this.isExtensionTestHost&&!this._config?.debugId}constructor(M,T,F,_,q,Y,B,X,J,oe,ge,De,Te,ke,Ae,ve,pe,ye,Me,Z){super(),this.logService=T,this.environmentMainService=F,this.policyService=_,this.userDataProfilesService=q,this.fileService=Y,this.applicationStorageMainService=B,this.storageMainService=X,this.configurationService=J,this.themeMainService=oe,this.workspacesManagementMainService=ge,this.backupMainService=De,this.telemetryService=Te,this.dialogMainService=ke,this.lifecycleMainService=Ae,this.productService=ve,this.protocolMainService=pe,this.windowsMainService=ye,this.stateMainService=Me,this.nativeHostMainService=Z,this._onWillLoad=this._register(new R.Emitter),this.onWillLoad=this._onWillLoad.event,this._onDidSignalReady=this._register(new R.Emitter),this.onDidSignalReady=this._onDidSignalReady.event,this._onDidTriggerSystemContextMenu=this._register(new R.Emitter),this.onDidTriggerSystemContextMenu=this._onDidTriggerSystemContextMenu.event,this._onDidClose=this._register(new R.Emitter),this.onDidClose=this._onDidClose.event,this._onDidDestroy=this._register(new R.Emitter),this.onDidDestroy=this._onDidDestroy.event,this._lastFocusTime=-1,this.transientIsNativeFullScreen=void 0,this.joinNativeFullScreenTransition=void 0,this.hasWindowControlOverlay=!1,this.whenReadyCallbacks=[],this.touchBarGroups=[],this.currentHttpProxy=void 0,this.currentNoProxy=void 0,this.configObjectUrl=this._register(this.protocolMainService.createIPCObjectUrl()),this.wasLoaded=!1,this.readyState=0;{const[he,de]=this.restoreWindowState(M.state);this.windowState=he,this.logService.trace("window#ctor: using window state",he);const Se=this.windowState.mode===0||this.windowState.mode===3;typeof gt.sandboxState>"u"&&(gt.sandboxState=this.stateMainService.getItem("window.experimental.useSandbox",!1));const Ie=this.configurationService.getValue("window");let Fe=!1;typeof Ie?.experimental?.useSandbox=="boolean"?Fe=Ie.experimental.useSandbox:this.productService.quality==="stable"&&gt.sandboxState?Fe=!0:Fe=typeof this.productService.quality=="string"&&this.productService.quality!=="stable";const Oe={width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y,backgroundColor:this.themeMainService.getBackgroundColor(),minWidth:D.WindowMinimumSize.WIDTH,minHeight:D.WindowMinimumSize.HEIGHT,show:!Se,title:this.productService.nameLong,webPreferences:{preload:m.FileAccess.asFileUri("vs/base/parts/sandbox/electron-browser/preload.js").fsPath,additionalArguments:[`--vscode-window-config=${this.configObjectUrl.resource.toString()}`],v8CacheOptions:this.environmentMainService.useCodeCache?"bypassHeatCheck":"none",enableWebSQL:!1,spellcheck:!1,zoomFactor:(0,D.zoomLevelToZoomFactor)(Ie?.zoomLevel),autoplayPolicy:"user-gesture-required",enableBlinkFeatures:"HighlightAPI",...Fe?{sandbox:!0}:{nodeIntegration:!0,contextIsolation:!1}},experimentalDarkMode:!0};E.isLinux?Oe.icon=(0,y.join)(this.environmentMainService.appRoot,"resources/linux/code.png"):E.isWindows/*Windhawk*//*&&!this.environmentMainService.isBuilt*/&&(Oe.icon=(0,y.join)(this.environmentMainService.appRoot,"resources/win32/windhawk.ico"/*"resources/win32/code_150x150.png"*/)),E.isMacintosh&&!this.useNativeFullScreen()&&(Oe.fullscreenable=!1),E.isMacintosh&&(Oe.acceptFirstMouse=!0,Ie?.clickThroughInactive===!1&&(Oe.acceptFirstMouse=!1));const qe=E.isMacintosh&&Ie?.nativeTabs===!0;qe&&(Oe.tabbingIdentifier=this.productService.nameShort);const _e=(0,D.getTitleBarStyle)(this.configurationService)==="custom";if(_e&&(Oe.titleBarStyle="hidden",E.isMacintosh||(Oe.frame=!1),(0,D.useWindowControlsOverlay)(this.configurationService))){const Ne=this.themeMainService.getWindowSplash()?.colorInfo.titleBarBackground??this.themeMainService.getBackgroundColor(),xe=x.Color.fromHex(Ne).isDarker()?"#FFFFFF":"#000000";Oe.titleBarOverlay={height:29,color:Ne,symbolColor:xe},this.hasWindowControlOverlay=!0}if((0,I.mark)("code/willCreateCodeBrowserWindow"),this._win=new C.BrowserWindow(Oe),/*Windhawk*/this._win.setAppDetails({appId:"RamenSoftware.Windhawk",appIconPath:this.environmentMainService.appRoot+"\\resources\\win32\\windhawk.ico",relaunchCommand:"\""+this.environmentMainService.appRoot.replace(/(\\[^\\]+){3}$/, "")+"\\windhawk.exe\"",relaunchDisplayName:"Windhawk"}),(0,I.mark)("code/didCreateCodeBrowserWindow"),this._id=this._win.id,E.isMacintosh&&_e&&this._win.setSheetOffset(22),_e&&(E.isWindows&&(0,D.useWindowControlsOverlay)(this.configurationService)||E.isMacintosh)){const Ne=this.stateMainService.getItem(gt.windowControlHeightStateStorageKey);Ne&&this.updateWindowControls({height:Ne})}E.isWindows&&_e&&this._win.hookWindowMessage(278,()=>{const[xe,ze]=this._win.getPosition(),Ke=C.screen.getCursorScreenPoint(),V=Ke.x-xe,ce=Ke.y-ze;return(()=>!(V>30&&ce>=0&&ce<=Math.max(this._win.getBounds().height*.15,35)))()||(this._win.setEnabled(!1),this._win.setEnabled(!0),this._onDidTriggerSystemContextMenu.fire({x:V,y:ce})),0}),(E.isMacintosh||E.isWindows)&&de&&(!qe||C.BrowserWindow.getAllWindows().length===1)&&[this.windowState.width,this.windowState.height,this.windowState.x,this.windowState.y].every(Ne=>typeof Ne=="number")&&this._win.setBounds({width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y}),Se&&((0,I.mark)("code/willMaximizeCodeWindow"),this._win.maximize(),this.windowState.mode===3&&this.setFullScreen(!0),this._win.show(),(0,I.mark)("code/didMaximizeCodeWindow")),this._lastFocusTime=Date.now()}this.environmentMainService.args["open-devtools"]===!0&&this._win.webContents.openDevTools(),this.onConfigurationUpdated(),this.createTouchBar(),this.registerListeners()}setRepresentedFilename(M){E.isMacintosh?this._win.setRepresentedFilename(M):this.representedFilename=M}getRepresentedFilename(){return E.isMacintosh?this._win.getRepresentedFilename():this.representedFilename}setDocumentEdited(M){E.isMacintosh&&this._win.setDocumentEdited(M),this.documentEdited=M}isDocumentEdited(){return E.isMacintosh?this._win.isDocumentEdited():!!this.documentEdited}focus(M){E.isMacintosh&&M?.force&&C.app.focus({steal:!0}),this._win&&(this._win.isMinimized()&&this._win.restore(),this._win.focus())}setReady(){for(this.logService.trace(`window#load: window reported ready (id: ${this._id})`),this.readyState=2;this.whenReadyCallbacks.length;)this.whenReadyCallbacks.pop()(this);this._onDidSignalReady.fire()}ready(){return new Promise(M=>{if(this.isReady)return M(this);this.whenReadyCallbacks.push(M)})}get isReady(){return this.readyState===2}get whenClosedOrLoaded(){return new Promise(M=>{function T(){F.dispose(),_.dispose(),M()}const F=this.onDidClose(()=>T()),_=this.onWillLoad(()=>T())})}registerListeners(){this._win.on("unresponsive",()=>this.onWindowError(1)),this._win.webContents.on("render-process-gone",(T,F)=>this.onWindowError(2,F)),this._win.webContents.on("did-fail-load",(T,F,_)=>this.onWindowError(3,{reason:_,exitCode:F})),this._win.webContents.on("will-prevent-unload",T=>{T.preventDefault()}),this._win.on("closed",()=>{this._onDidClose.fire(),this.dispose()}),this._win.webContents.on("did-finish-load",()=>{this.pendingLoadConfig&&(this._config=this.pendingLoadConfig,this.pendingLoadConfig=void 0)}),this._win.on("focus",()=>{this._lastFocusTime=Date.now()}),this._win.on("maximize",T=>{this._config&&(this._config.maximized=!0),C.app.emit("browser-window-maximize",T,this._win)}),this._win.on("unmaximize",T=>{this._config&&(this._config.maximized=!1),C.app.emit("browser-window-unmaximize",T,this._win)}),this._win.on("enter-full-screen",()=>{this.sendWhenReady("vscode:enterFullScreen",k.CancellationToken.None),this.joinNativeFullScreenTransition?.complete(),this.joinNativeFullScreenTransition=void 0}),this._win.on("leave-full-screen",()=>{this.sendWhenReady("vscode:leaveFullScreen",k.CancellationToken.None),this.joinNativeFullScreenTransition?.complete(),this.joinNativeFullScreenTransition=void 0}),this._register(this.configurationService.onDidChangeConfiguration(T=>this.onConfigurationUpdated(T))),this._register(this.workspacesManagementMainService.onDidDeleteUntitledWorkspace(T=>this.onDidDeleteUntitledWorkspace(T)));const M=["https://marketplace.visualstudio.com/*","https://*.vsassets.io/*"];this._win.webContents.session.webRequest.onBeforeSendHeaders({urls:M},async(T,F)=>{const _=await this.getMarketplaceHeaders();F({cancel:!1,requestHeaders:Object.assign(T.requestHeaders,_)})})}getMarketplaceHeaders(){return this.marketplaceHeadersPromise||(this.marketplaceHeadersPromise=(0,a.resolveMarketplaceHeaders)(this.productService.version,this.productService,this.environmentMainService,this.configurationService,this.fileService,this.applicationStorageMainService,this.telemetryService)),this.marketplaceHeadersPromise}async onWindowError(M,T){switch(M){case 2:this.logService.error(`CodeWindow: renderer process gone (reason: ${T?.reason||"<unknown>"}, code: ${T?.exitCode||"<unknown>"})`);break;case 1:this.logService.error("CodeWindow: detected unresponsive");break;case 3:this.logService.error(`CodeWindow: failed to load (reason: ${T?.reason||"<unknown>"}, code: ${T?.exitCode||"<unknown>"})`);break}switch(this.telemetryService.publicLog2("windowerror",{type:M,reason:T?.reason,code:T?.exitCode}),M){case 1:case 2:if(this.isExtensionDevelopmentTestFromCli){this.lifecycleMainService.kill(1);return}if(this.environmentMainService.args["enable-smoke-test-driver"]){await this.destroyWindow(!1,!1),this.lifecycleMainService.quit();return}if(M===1){if(this.isExtensionDevelopmentHost||this.isExtensionTestHost||this._win&&this._win.webContents&&this._win.webContents.isDevToolsOpened())return;const F=await this.dialogMainService.showMessageBox({title:this.productService.nameLong,type:"warning",buttons:[(0,P.mnemonicButtonLabel)((0,w.localize)(0,null)),(0,P.mnemonicButtonLabel)((0,w.localize)(1,null)),(0,P.mnemonicButtonLabel)((0,w.localize)(2,null))],message:(0,w.localize)(3,null),detail:(0,w.localize)(4,null),noLink:!0,defaultId:0,cancelId:1,checkboxLabel:this._config?.workspace?(0,w.localize)(5,null):void 0},this._win);if(F.response!==1){const _=F.response===0;await this.destroyWindow(_,F.checkboxChecked)}}else if(M===2)if(E.isWindows&&T?.reason==="launch-failed"&&T.exitCode===18&&await this.nativeHostMainService.isAdmin(void 0))await this.handleWindowsAdminCrash(T);else{let F;T?F=(0,w.localize)(7,null,T.reason,T.exitCode??"<unknown>"):F=(0,w.localize)(6,null);const _=await this.dialogMainService.showMessageBox({title:this.productService.nameLong,type:"warning",buttons:[(0,P.mnemonicButtonLabel)((0,w.localize)(8,null)),(0,P.mnemonicButtonLabel)((0,w.localize)(9,null))],message:F,detail:(0,w.localize)(10,null),noLink:!0,defaultId:0,checkboxLabel:this._config?.workspace?(0,w.localize)(11,null):void 0},this._win),q=_.response===0;await this.destroyWindow(q,_.checkboxChecked)}break}}async handleWindowsAdminCrash(M){const T=[],F=(0,W.isInternalTelemetry)(this.productService,this.configurationService);if((0,W.supportsTelemetry)(this.productService,this.environmentMainService)){this.productService.aiConfig&&this.productService.aiConfig.ariaKey&&T.push(new K.OneDataSystemAppender(F,"monacoworkbench",null,this.productService.aiConfig.ariaKey));const{installSourcePath:_}=this.environmentMainService,q=await(0,H.resolveMachineId)(this.stateMainService),Y={appenders:T,sendErrorTelemetry:!1,commonProperties:(0,O.resolveCommonProperties)(this.fileService,(0,U.release)(),(0,U.hostname)(),process.arch,this.productService.commit,this.productService.version,q,F,_),piiPaths:(0,W.getPiiPathsFromEnvironment)(this.environmentMainService)};await new le.TelemetryService(Y,this.configurationService,this.productService).publicLog2("windowadminerror",{reason:M.reason,code:M.exitCode})}await this.dialogMainService.showMessageBox({title:this.productService.nameLong,type:"error",buttons:[(0,P.mnemonicButtonLabel)((0,w.localize)(12,null))],message:(0,w.localize)(13,null),detail:(0,w.localize)(14,null,this.productService.nameLong),noLink:!0,defaultId:0},this._win),await Promise.all(T.map(_=>_.flush())),await this.destroyWindow(!1,!1)}async destroyWindow(M,T){const F=this._config?.workspace;if(T&&F)try{const _=this.storageMainService.workspaceStorage(F);await _.init(),_.delete("memento/workbench.parts.editor"),await _.close()}catch(_){this.logService.error(_)}if(this._onDidDestroy.fire(),this._win?.destroy(),M&&this._config){let _,q;(0,N.isSingleFolderWorkspaceIdentifier)(F)?_={folderUri:F.uri}:(0,N.isWorkspaceIdentifier)(F)?_={workspaceUri:F.configPath}:q=!0;const[Y]=await this.windowsMainService.open({context:5,userEnv:this._config.userEnv,cli:{...this.environmentMainService.args,_:[]},urisToOpen:_?[_]:void 0,forceEmpty:q,forceNewWindow:!0,remoteAuthority:this.remoteAuthority});Y.focus()}}onDidDeleteUntitledWorkspace(M){this._config?.workspace?.id===M.id&&(this._config.workspace=void 0)}onConfigurationUpdated(M){const T=this.getMenuBarVisibility();T!==this.currentMenuBarVisibility&&(this.currentMenuBarVisibility=T,this.setMenuBarVisibility(T));let F=(this.configurationService.getValue("http.proxy")||"").trim()||(process.env.https_proxy||process.env.HTTPS_PROXY||process.env.http_proxy||process.env.HTTP_PROXY||"").trim()||void 0;F?.endsWith("/")&&(F=F.substr(0,F.length-1));const _=(process.env.no_proxy||process.env.NO_PROXY||"").trim()||void 0;if((F||"").indexOf("@")===-1&&(F!==this.currentHttpProxy||_!==this.currentNoProxy)){this.currentHttpProxy=F,this.currentNoProxy=_;const q=F||"",Y=_?`${_},<local>`:"<local>";this.logService.trace(`Setting proxy to '${q}', bypassing '${Y}'`),this._win.webContents.session.setProxy({proxyRules:q,proxyBypassRules:Y,pacScript:""})}}addTabbedWindow(M){E.isMacintosh&&M.win&&this._win.addTabbedWindow(M.win)}load(M,T=Object.create(null)){this.logService.trace(`window#load: attempt to load window (id: ${this._id})`),this.isDocumentEdited()&&(!T.isReload||!this.backupMainService.isHotExitEnabled())&&this.setDocumentEdited(!1),T.isReload||(this.getRepresentedFilename()&&this.setRepresentedFilename(""),this._win.setTitle(this.productService.nameLong)),this.updateConfiguration(M,T),this.readyState===0?this._config=M:this.pendingLoadConfig=M,this.readyState=1,this._win.loadURL(m.FileAccess.asBrowserUri(`vs/code/electron-sandbox/workbench/workbench${this.environmentMainService.isBuilt?"":"-dev"}.html`).toString(!0));const F=this.wasLoaded;this.wasLoaded=!0,!this.environmentMainService.isBuilt&&!this.environmentMainService.extensionTestsLocationURI&&this._register(new t.RunOnceScheduler(()=>{this._win&&!this._win.isVisible()&&!this._win.isMinimized()&&(this._win.show(),this.focus({force:!0}),this._win.webContents.openDevTools())},1e4)).schedule(),this._onWillLoad.fire({workspace:M.workspace,reason:T.isReload?3:F?2:1})}updateConfiguration(M,T){const F=(this._config??this.pendingLoadConfig)?.userEnv;if(F){const _=(0,g.isLaunchedFromCli)(F)&&!(0,g.isLaunchedFromCli)(M.userEnv),q=this.isExtensionDevelopmentHost;(_||q)&&(M.userEnv={...F,...M.userEnv})}process.env.CHROME_CRASHPAD_PIPE_NAME&&Object.assign(M.userEnv,{CHROME_CRASHPAD_PIPE_NAME:process.env.CHROME_CRASHPAD_PIPE_NAME}),T.disableExtensions!==void 0&&(M["disable-extensions"]=T.disableExtensions),M.fullscreen=this.isFullScreen,M.maximized=this._win.isMaximized(),M.partsSplash=this.themeMainService.getWindowSplash(),(0,I.mark)("code/willOpenNewWindow"),M.perfMarks=(0,I.getMarks)(),this.configObjectUrl.update(M)}async reload(M){const T=Object.assign({},this._config);T.workspace=await this.validateWorkspaceBeforeReload(T),delete T.filesToOpenOrCreate,delete T.filesToDiff,delete T.filesToMerge,delete T.filesToWait,this.isExtensionDevelopmentHost&&M&&(T.verbose=M.verbose,T.debugId=M.debugId,T.extensionEnvironment=M.extensionEnvironment,T["inspect-extensions"]=M["inspect-extensions"],T["inspect-brk-extensions"]=M["inspect-brk-extensions"],T["extensions-dir"]=M["extensions-dir"]),T.isInitialStartup=!1,T.policiesData=this.policyService.serialize(),T.continueOn=this.environmentMainService.continueOn,T.profiles={all:this.userDataProfilesService.profiles,profile:this.profile||this.userDataProfilesService.defaultProfile},T.logLevel=this.logService.getLevel(),this.load(T,{isReload:!0,disableExtensions:M?.["disable-extensions"]})}async validateWorkspaceBeforeReload(M){if((0,N.isWorkspaceIdentifier)(M.workspace)){const T=M.workspace.configPath;if(T.scheme===m.Schemas.file&&!await this.fileService.exists(T))return}else if((0,N.isSingleFolderWorkspaceIdentifier)(M.workspace)){const T=M.workspace.uri;if(T.scheme===m.Schemas.file&&!await this.fileService.exists(T))return}return M.workspace}serializeWindowState(){if(!this._win)return(0,ae.defaultWindowState)();if(this.isFullScreen){let F;try{F=C.screen.getDisplayMatching(this.getBounds())}catch{}const _=(0,ae.defaultWindowState)();return{mode:3,display:F?F.id:void 0,width:this.windowState.width||_.width,height:this.windowState.height||_.height,x:this.windowState.x||0,y:this.windowState.y||0}}const M=Object.create(null);let T;if(!E.isMacintosh&&this._win.isMaximized()?T=0:T=1,T===0?M.mode=0:M.mode=1,T===1||T===0){let F;T===1?F=this.getBounds():F=this._win.getNormalBounds(),M.x=F.x,M.y=F.y,M.width=F.width,M.height=F.height}return M}updateWindowControls(M){if(M.height&&this.stateMainService.setItem(gt.windowControlHeightStateStorageKey,M.height),E.isWindows&&this.hasWindowControlOverlay)this._win.setTitleBarOverlay({color:M.backgroundColor?.trim()===""?void 0:M.backgroundColor,symbolColor:M.foregroundColor?.trim()===""?void 0:M.foregroundColor,height:M.height?M.height-1:void 0});else if(E.isMacintosh&&M.height!==void 0){const T=(M.height-15)/2;this._win.setTrafficLightPosition({x:T,y:T})}}restoreWindowState(M){(0,I.mark)("code/willRestoreCodeWindowState");let T=!1;if(M)try{const F=C.screen.getAllDisplays();T=F.length>1,M=this.validateWindowState(M,F)}catch(F){this.logService.warn(`Unexpected error validating window state: ${F}
${F.stack}`)}return(0,I.mark)("code/didRestoreCodeWindowState"),[M||(0,ae.defaultWindowState)(),T]}validateWindowState(M,T){if(this.logService.trace(`window#validateWindowState: validating window state on ${T.length} display(s)`,M),typeof M.x!="number"||typeof M.y!="number"||typeof M.width!="number"||typeof M.height!="number"){this.logService.trace("window#validateWindowState: unexpected type of state values");return}if(M.width<=0||M.height<=0){this.logService.trace("window#validateWindowState: unexpected negative values");return}if(T.length===1){const q=this.getWorkingArea(T[0]);if(q){let Y=function(){!M||typeof M.x!="number"||typeof M.y!="number"||!q||(M.x<q.x&&(M.x=q.x),M.y<q.y&&(M.y=q.y))};this.logService.trace("window#validateWindowState: 1 monitor working area",q),Y(),M.width>q.width&&(M.width=q.width),M.height>q.height&&(M.height=q.height),M.x>q.x+q.width-128&&(M.x=q.x+q.width-M.width),M.y>q.y+q.height-128&&(M.y=q.y+q.height-M.height),Y()}return M}if(M.display&&M.mode===3){const q=T.find(Y=>Y.id===M.display);if(q&&typeof q.bounds?.x=="number"&&typeof q.bounds?.y=="number"){this.logService.trace("window#validateWindowState: restoring fullscreen to previous display");const Y=(0,ae.defaultWindowState)(3);return Y.x=q.bounds.x,Y.y=q.bounds.y,Y}}let F,_;try{F=C.screen.getDisplayMatching({x:M.x,y:M.y,width:M.width,height:M.height}),_=this.getWorkingArea(F)}catch{}if(F&&_&&M.x+M.width>_.x&&M.y+M.height>_.y&&M.x<_.x+_.width&&M.y<_.y+_.height)return this.logService.trace("window#validateWindowState: multi-monitor working area",_),M}getWorkingArea(M){if(M.workArea.width>0&&M.workArea.height>0)return M.workArea;if(M.bounds.width>0&&M.bounds.height>0)return M.bounds}getBounds(){const[M,T]=this._win.getPosition(),[F,_]=this._win.getSize();return{x:M,y:T,width:F,height:_}}toggleFullScreen(){this.setFullScreen(!this.isFullScreen)}setFullScreen(M){this.useNativeFullScreen()?this.setNativeFullScreen(M):this.setSimpleFullScreen(M),this.sendWhenReady(M?"vscode:enterFullScreen":"vscode:leaveFullScreen",k.CancellationToken.None),this.currentMenuBarVisibility&&this.setMenuBarVisibility(this.currentMenuBarVisibility,!1)}get isFullScreen(){return E.isMacintosh&&typeof this.transientIsNativeFullScreen=="boolean"?this.transientIsNativeFullScreen:this._win.isFullScreen()||this._win.isSimpleFullScreen()}setNativeFullScreen(M){this._win.isSimpleFullScreen()&&this._win.setSimpleFullScreen(!1),this.doSetNativeFullScreen(M)}doSetNativeFullScreen(M){E.isMacintosh&&(this.transientIsNativeFullScreen=M,this.joinNativeFullScreenTransition=new t.DeferredPromise,Promise.race([this.joinNativeFullScreenTransition.p,(0,t.timeout)(1e3)]).finally(()=>this.transientIsNativeFullScreen=void 0)),this._win.setFullScreen(M)}setSimpleFullScreen(M){this._win.isFullScreen()&&this.doSetNativeFullScreen(!1),this._win.setSimpleFullScreen(M),this._win.webContents.focus()}useNativeFullScreen(){const M=this.configurationService.getValue("window");return!M||typeof M.nativeFullScreen!="boolean"||M.nativeTabs?!0:M.nativeFullScreen!==!1}isMinimized(){return this._win.isMinimized()}getMenuBarVisibility(){let M=(0,D.getMenuBarVisibility)(this.configurationService);return["visible","toggle","hidden"].indexOf(M)<0&&(M="classic"),M}setMenuBarVisibility(M,T=!0){E.isMacintosh||(M==="toggle"&&T&&this.send("vscode:showInfoMessage",(0,w.localize)(15,null)),M==="hidden"?setTimeout(()=>{this.doSetMenuBarVisibility(M)}):this.doSetMenuBarVisibility(M))}doSetMenuBarVisibility(M){const T=this.isFullScreen;switch(M){case"classic":this._win.setMenuBarVisibility(!T),this._win.autoHideMenuBar=T;break;case"visible":this._win.setMenuBarVisibility(!0),this._win.autoHideMenuBar=!1;break;case"toggle":this._win.setMenuBarVisibility(!1),this._win.autoHideMenuBar=!0;break;case"hidden":this._win.setMenuBarVisibility(!1),this._win.autoHideMenuBar=!1;break}}handleTitleDoubleClick(){if(E.isMacintosh)switch(C.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string")){case"Minimize":this._win.minimize();break;case"None":break;case"Maximize":default:this._win.isMaximized()?this._win.unmaximize():this._win.maximize()}else this._win.isMaximized()?this._win.unmaximize():this._win.maximize()}close(){this._win?.close()}sendWhenReady(M,T,...F){this.isReady?this.send(M,...F):this.ready().then(()=>{T.isCancellationRequested||this.send(M,...F)})}send(M,...T){if(this._win){if(this._win.isDestroyed()||this._win.webContents.isDestroyed()){this.logService.warn(`Sending IPC message to channel '${M}' for window that is destroyed`);return}try{this._win.webContents.send(M,...T)}catch(F){this.logService.warn(`Error sending IPC message to channel '${M}' of window ${this._id}: ${(0,L.toErrorMessage)(F)}`)}}}updateTouchBar(M){!E.isMacintosh||this.touchBarGroups.forEach((T,F)=>{const _=M[F];T.segments=this.createTouchBarGroupSegments(_)})}createTouchBar(){if(!!E.isMacintosh){for(let M=0;M<10;M++){const T=this.createTouchBarGroup();this.touchBarGroups.push(T)}this._win.setTouchBar(new C.TouchBar({items:this.touchBarGroups}))}}createTouchBarGroup(M=[]){const T=this.createTouchBarGroupSegments(M),F=new C.TouchBar.TouchBarSegmentedControl({segments:T,mode:"buttons",segmentStyle:"automatic",change:_=>{this.sendWhenReady("vscode:runAction",k.CancellationToken.None,{id:F.segments[_].id,from:"touchbar"})}});return F}createTouchBarGroupSegments(M=[]){return M.map(F=>{let _;F.icon&&!o.ThemeIcon.isThemeIcon(F.icon)&&F.icon?.dark?.scheme===m.Schemas.file&&(_=C.nativeImage.createFromPath(d.URI.revive(F.icon.dark).fsPath),_.isEmpty()&&(_=void 0));let q;return typeof F.title=="string"?q=F.title:q=F.title.value,{id:F.id,label:_?void 0:q,icon:_}})}dispose(){super.dispose(),this._win=null}};$.windowControlHeightStateStorageKey="windowControlHeight",$.sandboxState=void 0,$=we([ie(1,i.ILogService),ie(2,S.IEnvironmentMainService),ie(3,Q.IPolicyService),ie(4,ne.IUserDataProfilesMainService),ie(5,h.IFileService),ie(6,r.IApplicationStorageMainService),ie(7,r.IStorageMainService),ie(8,v.IConfigurationService),ie(9,b.IThemeMainService),ie(10,G.IWorkspacesManagementMainService),ie(11,f.IBackupMainService),ie(12,c.ITelemetryService),ie(13,u.IDialogMainService),ie(14,l.ILifecycleMainService),ie(15,s.IProductService),ie(16,n.IProtocolMainService),ie(17,A.IWindowsMainService),ie(18,re.IStateMainService),ie(19,fe.INativeHostMainService)],$),e.CodeWindow=$}),define(ee[75],te([0,1,13,24,8,3,34,2,14,4,20,7,23,175,5,21,6,93,94,28,52,39]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspacesHistoryMainService=e.IWorkspacesHistoryMainService=void 0,e.IWorkspacesHistoryMainService=(0,w.createDecorator)("workspacesHistoryMainService");let i=class rt extends P.Disposable{constructor(n,a,r,c){super(),this.logService=n,this.workspacesManagementMainService=a,this.lifecycleMainService=r,this.applicationStorageMainService=c,this._onDidChangeRecentlyOpened=this._register(new L.Emitter),this.onDidChangeRecentlyOpened=this._onDidChangeRecentlyOpened.event,this.macOSRecentDocumentsUpdater=this._register(new k.ThrottledDelayer(800)),this.registerListeners()}registerListeners(){this.lifecycleMainService.when(4).then(()=>this.handleWindowsJumpList()),this._register(this.workspacesManagementMainService.onDidEnterWorkspace(n=>this.addRecentlyOpened([{workspace:n.workspace,remoteAuthority:n.window.remoteAuthority}])))}async addRecentlyOpened(n){let a=[],r=[];for(const o of n)if((0,S.isRecentWorkspace)(o))!this.workspacesManagementMainService.isUntitledWorkspace(o.workspace)&&!this.containsWorkspace(a,o.workspace)&&a.push(o);else if((0,S.isRecentFolder)(o))this.containsFolder(a,o.folderUri)||a.push(o);else{const b=this.containsFile(r,o.fileUri),D=o.fileUri.scheme===p.Schemas.file&&rt.COMMON_FILES_FILTER.indexOf((0,y.basename)(o.fileUri))>=0;!b&&!D&&(r.push(o),m.isWindows&&o.fileUri.scheme===p.Schemas.file&&C.app.addRecentDocument(o.fileUri.fsPath))}const c=await this.mergeEntriesFromStorage({workspaces:a,files:r});a=c.workspaces,r=c.files,a.length>rt.MAX_TOTAL_RECENT_ENTRIES&&(a.length=rt.MAX_TOTAL_RECENT_ENTRIES),r.length>rt.MAX_TOTAL_RECENT_ENTRIES&&(r.length=rt.MAX_TOTAL_RECENT_ENTRIES),await this.saveRecentlyOpened({workspaces:a,files:r}),this._onDidChangeRecentlyOpened.fire(),m.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments())}async removeRecentlyOpened(n){const a=b=>{const D=this.location(b);for(const A of n)if(y.extUriBiasedIgnorePathCase.isEqual(A,D))return!1;return!0},r=await this.getRecentlyOpened(),c=r.workspaces.filter(a),o=r.files.filter(a);(c.length!==r.workspaces.length||o.length!==r.files.length)&&(await this.saveRecentlyOpened({files:o,workspaces:c}),this._onDidChangeRecentlyOpened.fire(),m.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments()))}async clearRecentlyOpened(){await this.saveRecentlyOpened({workspaces:[],files:[]}),C.app.clearRecentDocuments(),this._onDidChangeRecentlyOpened.fire()}async getRecentlyOpened(){return this.mergeEntriesFromStorage()}async mergeEntriesFromStorage(n){const a=new l.ResourceMap(o=>y.extUriBiasedIgnorePathCase.getComparisonKey(o));if(n?.workspaces)for(const o of n.workspaces)a.set(this.location(o),o);const r=new l.ResourceMap(o=>y.extUriBiasedIgnorePathCase.getComparisonKey(o));if(n?.files)for(const o of n.files)r.set(this.location(o),o);const c=await this.getRecentlyOpenedFromStorage();for(const o of c.workspaces){const b=a.get(this.location(o));b?b.label=b.label??o.label:a.set(this.location(o),o)}for(const o of c.files){const b=r.get(this.location(o));b?b.label=b.label??o.label:r.set(this.location(o),o)}return{workspaces:[...a.values()],files:[...r.values()]}}async getRecentlyOpenedFromStorage(){await this.applicationStorageMainService.whenReady;let n;const a=this.applicationStorageMainService.get(rt.RECENTLY_OPENED_STORAGE_KEY,-1);if(typeof a=="string")try{n=JSON.parse(a)}catch(r){this.logService.error("Unexpected error parsing opened paths list",r)}return(0,S.restoreRecentlyOpened)(n,this.logService)}async saveRecentlyOpened(n){await this.applicationStorageMainService.whenReady,this.applicationStorageMainService.store(rt.RECENTLY_OPENED_STORAGE_KEY,JSON.stringify((0,S.toStoreData)(n)),-1,1)}location(n){return(0,S.isRecentFolder)(n)?n.folderUri:(0,S.isRecentFile)(n)?n.fileUri:n.workspace.configPath}containsWorkspace(n,a){return!!n.find(r=>(0,S.isRecentWorkspace)(r)&&r.workspace.id===a.id)}containsFolder(n,a){return!!n.find(r=>(0,S.isRecentFolder)(r)&&y.extUriBiasedIgnorePathCase.isEqual(r.folderUri,a))}containsFile(n,a){return!!n.find(r=>y.extUriBiasedIgnorePathCase.isEqual(r.fileUri,a))}async handleWindowsJumpList(){/*Windhawk*/true||!m.isWindows||(await this.updateWindowsJumpList(),this._register(this.onDidChangeRecentlyOpened(()=>this.updateWindowsJumpList())))}async updateWindowsJumpList(){if(!m.isWindows)return;const n=[];if(n.push({type:"tasks",items:[{type:"task",title:(0,d.localize)(0,null),description:(0,d.localize)(1,null),program:process.execPath,args:"-n",iconPath:process.execPath,iconIndex:0}]}),(await this.getRecentlyOpened()).workspaces.length>0){const a=[];for(const o of C.app.getJumpListSettings().removedItems){const b=o.args;if(b){const D=/^--(folder|file)-uri\s+"([^"]+)"$/.exec(b);D&&a.push(I.URI.parse(D[2]))}}await this.removeRecentlyOpened(a);let r=!1;const c=(0,t.coalesce)((await this.getRecentlyOpened()).workspaces.slice(0,rt.MAX_WINDOWS_JUMP_LIST_ENTRIES).map(o=>{const b=(0,S.isRecentWorkspace)(o)?o.workspace:o.folderUri,{title:D,description:A}=this.getWindowsJumpListLabel(b,o.label);let N;return I.URI.isUri(b)?N=`--folder-uri "${b.toString()}"`:(r=!0,N=`--file-uri "${b.configPath.toString()}"`),{type:"task",title:D.substr(0,255),description:A.substr(0,255),program:process.execPath,args:N,iconPath:"explorer.exe",iconIndex:0}}));c.length>0&&n.push({type:"custom",name:r?(0,d.localize)(2,null):(0,d.localize)(3,null),items:c})}n.push({type:"recent"});try{const a=C.app.setJumpList(n);a&&a!=="ok"&&this.logService.warn(`updateWindowsJumpList#setJumpList unexpected result: ${a}`)}catch(a){this.logService.warn("updateWindowsJumpList#setJumpList",a)}}getWindowsJumpListLabel(n,a){if(a)return{title:(0,R.splitName)(a).name,description:a};if(I.URI.isUri(n))return{title:(0,y.basename)(n),description:this.renderJumpListPathDescription(n)};if(this.workspacesManagementMainService.isUntitledWorkspace(n))return{title:(0,d.localize)(4,null),description:""};let r=(0,y.basename)(n.configPath);return r.endsWith(g.WORKSPACE_EXTENSION)&&(r=r.substr(0,r.length-g.WORKSPACE_EXTENSION.length-1)),{title:(0,d.localize)(5,null,r),description:this.renderJumpListPathDescription(n.configPath)}}renderJumpListPathDescription(n){return n.scheme==="file"?(0,R.normalizeDriveLetter)(n.fsPath):n.toString()}async updateMacOSRecentDocuments(){if(!m.isMacintosh)return;C.app.clearRecentDocuments();const n=await this.getRecentlyOpened(),a=[];let r=0;for(let o=0;o<n.workspaces.length&&r<rt.MAX_MACOS_DOCK_RECENT_WORKSPACES;o++){const b=this.location(n.workspaces[o]);if(b.scheme===p.Schemas.file){const D=(0,y.originalFSPath)(b);await E.Promises.exists(D)&&(a.push(D),r++)}}const c=[];for(let o=0;o<n.files.length&&r<rt.MAX_MACOS_DOCK_RECENT_ENTRIES_TOTAL;o++){const b=this.location(n.files[o]);if(b.scheme===p.Schemas.file){const D=(0,y.originalFSPath)(b);if(rt.COMMON_FILES_FILTER.includes((0,y.basename)(b))||a.includes(D))continue;await E.Promises.exists(D)&&(c.push(D),r++)}}c.reverse().forEach(o=>C.app.addRecentDocument(o)),a.reverse().forEach(o=>C.app.addRecentDocument(o))}};i.MAX_TOTAL_RECENT_ENTRIES=500,i.RECENTLY_OPENED_STORAGE_KEY="history.recentlyOpenedPathsList",i.MAX_MACOS_DOCK_RECENT_WORKSPACES=7,i.MAX_MACOS_DOCK_RECENT_ENTRIES_TOTAL=10,i.MAX_WINDOWS_JUMP_LIST_ENTRIES=7,i.COMMON_FILES_FILTER=["COMMIT_EDITMSG","MERGE_MSG"],i=we([ie(0,v.ILogService),ie(1,h.IWorkspacesManagementMainService),ie(2,f.ILifecycleMainService),ie(3,u.IApplicationStorageMainService)],i),e.WorkspacesHistoryMainService=i}),define(ee[271],te([0,1,13,8,22,34,4,7,165,18,27,21,6,212,58,19,36,31,49,74,32,75]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Menubar=void 0;const i="menu";let s=class Wt{constructor(r,c,o,b,D,A,N,G,ae,x,Q){this.updateService=r,this.configurationService=c,this.windowsMainService=o,this.environmentMainService=b,this.telemetryService=D,this.workspacesHistoryMainService=A,this.stateMainService=N,this.lifecycleMainService=G,this.logService=ae,this.nativeHostMainService=x,this.productService=Q,this.fallbackMenuHandlers=Object.create(null),this.menuUpdater=new t.RunOnceScheduler(()=>this.doUpdateMenu(),0),this.menuGC=new t.RunOnceScheduler(()=>{this.oldMenus=[]},1e4),this.menubarMenus=Object.create(null),this.keybindings=Object.create(null),(R.isMacintosh||(0,g.getTitleBarStyle)(this.configurationService)==="native")&&this.restoreCachedMenubarData(),this.addFallbackHandlers(),this.closedLastWindow=!1,this.noActiveWindow=!1,this.oldMenus=[],this.install(),this.registerListeners()}restoreCachedMenubarData(){const r=this.stateMainService.getItem(Wt.lastKnownMenubarStorageKey);r&&(r.menus&&(this.menubarMenus=r.menus),r.keybindings&&(this.keybindings=r.keybindings))}addFallbackHandlers(){this.fallbackMenuHandlers["workbench.action.files.newUntitledFile"]=(A,N,G)=>this.windowsMainService.openEmptyWindow({context:2,contextWindowId:N?.id}),this.fallbackMenuHandlers["workbench.action.newWindow"]=(A,N,G)=>this.windowsMainService.openEmptyWindow({context:2,contextWindowId:N?.id}),this.fallbackMenuHandlers["workbench.action.files.openFileFolder"]=(A,N,G)=>this.nativeHostMainService.pickFileFolderAndOpen(void 0,{forceNewWindow:this.isOptionClick(G),telemetryExtraData:{from:i}}),this.fallbackMenuHandlers["workbench.action.files.openFolder"]=(A,N,G)=>this.nativeHostMainService.pickFolderAndOpen(void 0,{forceNewWindow:this.isOptionClick(G),telemetryExtraData:{from:i}}),this.fallbackMenuHandlers["workbench.action.openWorkspace"]=(A,N,G)=>this.nativeHostMainService.pickWorkspaceAndOpen(void 0,{forceNewWindow:this.isOptionClick(G),telemetryExtraData:{from:i}}),this.fallbackMenuHandlers["workbench.action.clearRecentFiles"]=()=>this.workspacesHistoryMainService.clearRecentlyOpened();const r=this.productService.twitterUrl;r&&(this.fallbackMenuHandlers["workbench.action.openTwitterUrl"]=()=>this.openUrl(r,"openTwitterUrl"));const c=this.productService.requestFeatureUrl;c&&(this.fallbackMenuHandlers["workbench.action.openRequestFeatureUrl"]=()=>this.openUrl(c,"openUserVoiceUrl"));const o=this.productService.reportIssueUrl;o&&(this.fallbackMenuHandlers["workbench.action.openIssueReporter"]=()=>this.openUrl(o,"openReportIssues"));const b=this.productService.licenseUrl;b&&(this.fallbackMenuHandlers["workbench.action.openLicenseUrl"]=()=>{if(R.language){const A=b.indexOf("?")>0?"&":"?";this.openUrl(`${b}${A}lang=${R.language}`,"openLicenseUrl")}else this.openUrl(b,"openLicenseUrl")});const D=this.productService.privacyStatementUrl;D&&b&&(this.fallbackMenuHandlers["workbench.action.openPrivacyStatementUrl"]=()=>{this.openUrl(D,"openPrivacyStatement")})}registerListeners(){this.lifecycleMainService.onWillShutdown(()=>this.willShutdown=!0),this.windowsMainService.onDidChangeWindowsCount(r=>this.onDidChangeWindowsCount(r)),this.nativeHostMainService.onDidBlurWindow(()=>this.onDidChangeWindowFocus()),this.nativeHostMainService.onDidFocusWindow(()=>this.onDidChangeWindowFocus())}get currentEnableMenuBarMnemonics(){const r=this.configurationService.getValue("window.enableMenuBarMnemonics");return typeof r!="boolean"?!0:r}get currentEnableNativeTabs(){if(!R.isMacintosh)return!1;const r=this.configurationService.getValue("window.nativeTabs");return typeof r!="boolean"?!1:r}updateMenu(r,c){this.menubarMenus=r.menus,this.keybindings=r.keybindings,this.stateMainService.setItem(Wt.lastKnownMenubarStorageKey,r),this.scheduleUpdateMenu()}scheduleUpdateMenu(){this.menuUpdater.schedule()}doUpdateMenu(){this.willShutdown||setTimeout(()=>{this.willShutdown||this.install()},10)}onDidChangeWindowsCount(r){!R.isMacintosh||(r.oldCount===0&&r.newCount>0||r.oldCount>0&&r.newCount===0)&&(this.closedLastWindow=r.newCount===0,this.scheduleUpdateMenu())}onDidChangeWindowFocus(){!R.isMacintosh||(this.noActiveWindow=!C.BrowserWindow.getFocusedWindow(),this.scheduleUpdateMenu())}install(){const r=C.Menu.getApplicationMenu();if(r&&this.oldMenus.push(r),Object.keys(this.menubarMenus).length===0){C.Menu.setApplicationMenu(R.isMacintosh?new C.Menu:null);return}const c=new C.Menu;let o;if(R.isMacintosh){const D=new C.Menu;o=new C.MenuItem({label:this.productService.nameShort,submenu:D}),this.setMacApplicationMenu(D),c.append(o)}if(R.isMacintosh&&!this.appMenuInstalled){this.appMenuInstalled=!0;const D=new C.Menu;D.append(new C.MenuItem({label:this.mnemonicLabel(p.localize(0,null)),click:()=>this.windowsMainService.openEmptyWindow({context:1})})),C.app.dock.setMenu(D)}if(this.shouldDrawMenu("File")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(1,null)),submenu:D});this.setMenuById(D,"File"),c.append(A)}if(this.shouldDrawMenu("Edit")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(2,null)),submenu:D});this.setMenuById(D,"Edit"),c.append(A)}if(this.shouldDrawMenu("Selection")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(3,null)),submenu:D});this.setMenuById(D,"Selection"),c.append(A)}if(this.shouldDrawMenu("View")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(4,null)),submenu:D});this.setMenuById(D,"View"),c.append(A)}if(this.shouldDrawMenu("Go")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(5,null)),submenu:D});this.setMenuById(D,"Go"),c.append(A)}if(this.shouldDrawMenu("Run")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(6,null)),submenu:D});this.setMenuById(D,"Run"),c.append(A)}if(this.shouldDrawMenu("Terminal")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(7,null)),submenu:D});this.setMenuById(D,"Terminal"),c.append(A)}let b;if(this.shouldDrawMenu("Window")){const D=new C.Menu;b=new C.MenuItem({label:this.mnemonicLabel(p.localize(8,null)),submenu:D,role:"window"}),this.setMacWindowMenu(D)}if(b&&c.append(b),this.shouldDrawMenu("Help")){const D=new C.Menu,A=new C.MenuItem({label:this.mnemonicLabel(p.localize(9,null)),submenu:D,role:"help"});this.setMenuById(D,"Help"),c.append(A)}c.items&&c.items.length>0?C.Menu.setApplicationMenu(c):C.Menu.setApplicationMenu(null),this.menuGC.schedule()}setMacApplicationMenu(r){const c=this.createMenuItem(p.localize(10,null,this.productService.nameLong),"workbench.action.showAboutDialog"),o=this.getUpdateMenuItems();let b;if(this.shouldDrawMenu("Preferences")){const re=new C.Menu;this.setMenuById(re,"Preferences"),b=new C.MenuItem({label:this.mnemonicLabel(p.localize(11,null)),submenu:re})}const D=new C.Menu,A=new C.MenuItem({label:p.localize(12,null),role:"services",submenu:D}),N=new C.MenuItem({label:p.localize(13,null,this.productService.nameLong),role:"hide",accelerator:"Command+H"}),G=new C.MenuItem({label:p.localize(14,null),role:"hideOthers",accelerator:"Command+Alt+H"}),ae=new C.MenuItem({label:p.localize(15,null),role:"unhide"}),x=new C.MenuItem(this.likeAction("workbench.action.quit",{label:p.localize(16,null,this.productService.nameLong),click:async(re,ne,fe)=>{const K=this.windowsMainService.getLastActiveWindow();(this.windowsMainService.getWindowCount()===0||!!C.BrowserWindow.getFocusedWindow()||K?.isMinimized())&&await this.confirmBeforeQuit(fe)&&this.nativeHostMainService.quit(void 0)}})),Q=[c];Q.push(...o),b&&Q.push(n(),b),Q.push(n(),A,n(),N,G,ae,n(),x),Q.forEach(re=>r.append(re))}async confirmBeforeQuit(r){if(this.windowsMainService.getWindowCount()===0)return!0;const c=this.configurationService.getValue("window.confirmBeforeClose");if(c==="always"||c==="keyboardOnly"&&this.isKeyboardEvent(r)){const o={title:this.productService.nameLong,type:"question",buttons:[(0,L.mnemonicButtonLabel)(p.localize(17,null)),(0,L.mnemonicButtonLabel)(p.localize(18,null))],message:p.localize(19,null),noLink:!0,defaultId:0,cancelId:1},{response:b}=await this.nativeHostMainService.showMessageBox(this.windowsMainService.getFocusedWindow()?.id,o);return b===0}return!0}shouldDrawMenu(r){if(!R.isMacintosh&&(0,g.getTitleBarStyle)(this.configurationService)==="custom")return!1;switch(r){case"File":case"Help":if(R.isMacintosh)return this.windowsMainService.getWindowCount()===0&&this.closedLastWindow||this.windowsMainService.getWindowCount()>0&&this.noActiveWindow||!!this.menubarMenus&&!!this.menubarMenus[r];case"Window":if(R.isMacintosh)return this.windowsMainService.getWindowCount()===0&&this.closedLastWindow||this.windowsMainService.getWindowCount()>0&&this.noActiveWindow||!!this.menubarMenus;default:return this.windowsMainService.getWindowCount()>0&&!!this.menubarMenus&&!!this.menubarMenus[r]}}setMenu(r,c){c.forEach(o=>{if((0,d.isMenubarMenuItemSeparator)(o))r.append(n());else if((0,d.isMenubarMenuItemSubmenu)(o)){const b=new C.Menu,D=new C.MenuItem({label:this.mnemonicLabel(o.label),submenu:b});this.setMenu(b,o.submenu.items),r.append(D)}else(0,d.isMenubarMenuItemRecentAction)(o)?r.append(this.createOpenRecentMenuItem(o)):(0,d.isMenubarMenuItemAction)(o)&&(o.id==="workbench.action.showAboutDialog"&&this.insertCheckForUpdatesItems(r),R.isMacintosh?this.windowsMainService.getWindowCount()===0&&this.closedLastWindow||this.windowsMainService.getWindowCount()>0&&this.noActiveWindow?this.fallbackMenuHandlers[o.id]?r.append(new C.MenuItem(this.likeAction(o.id,{label:this.mnemonicLabel(o.label),click:this.fallbackMenuHandlers[o.id]}))):r.append(this.createMenuItem(o.label,o.id,!1,o.checked)):r.append(this.createMenuItem(o.label,o.id,o.enabled!==!1,!!o.checked)):r.append(this.createMenuItem(o.label,o.id,o.enabled!==!1,!!o.checked)))})}setMenuById(r,c){this.menubarMenus&&this.menubarMenus[c]&&this.setMenu(r,this.menubarMenus[c].items)}insertCheckForUpdatesItems(r){const c=this.getUpdateMenuItems();c.length&&(c.forEach(o=>r.append(o)),r.append(n()))}createOpenRecentMenuItem(r){const c=P.URI.revive(r.uri),o=r.id,b=o==="openRecentFile"?{fileUri:c}:o==="openRecentWorkspace"?{workspaceUri:c}:{folderUri:c};return new C.MenuItem(this.likeAction(o,{label:r.label,click:async(D,A,N)=>{const G=this.isOptionClick(N);(await this.windowsMainService.open({context:2,cli:this.environmentMainService.args,urisToOpen:[b],forceNewWindow:G,gotoLineMode:!1,remoteAuthority:r.remoteAuthority})).length>0||await this.workspacesHistoryMainService.removeRecentlyOpened([c])}},!1))}isOptionClick(r){return!!(r&&(!R.isMacintosh&&(r.ctrlKey||r.shiftKey)||R.isMacintosh&&(r.metaKey||r.altKey)))}isKeyboardEvent(r){return!!(r.triggeredByAccelerator||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey)}createRoleMenuItem(r,c,o){const b={label:this.mnemonicLabel(r),role:o,enabled:!0};return new C.MenuItem(this.withKeybinding(c,b))}setMacWindowMenu(r){const c=new C.MenuItem({label:p.localize(20,null),role:"minimize",accelerator:"Command+M",enabled:this.windowsMainService.getWindowCount()>0}),o=new C.MenuItem({label:p.localize(21,null),role:"zoom",enabled:this.windowsMainService.getWindowCount()>0}),b=new C.MenuItem({label:p.localize(22,null),role:"front",enabled:this.windowsMainService.getWindowCount()>0}),D=this.createMenuItem(p.localize(23,null),"workbench.action.switchWindow"),A=[];this.currentEnableNativeTabs&&(A.push(n()),A.push(this.createMenuItem(p.localize(24,null),"workbench.action.newWindowTab")),A.push(this.createRoleMenuItem(p.localize(25,null),"workbench.action.showPreviousWindowTab","selectPreviousTab")),A.push(this.createRoleMenuItem(p.localize(26,null),"workbench.action.showNextWindowTab","selectNextTab")),A.push(this.createRoleMenuItem(p.localize(27,null),"workbench.action.moveWindowTabToNewWindow","moveTabToNewWindow")),A.push(this.createRoleMenuItem(p.localize(28,null),"workbench.action.mergeAllWindowTabs","mergeAllWindows"))),[c,o,n(),D,...A,n(),b].forEach(N=>r.append(N))}getUpdateMenuItems(){switch(this.updateService.state.type){case"uninitialized":return[];case"idle":return[new C.MenuItem({label:this.mnemonicLabel(p.localize(29,null)),click:()=>setTimeout(()=>{this.reportMenuActionTelemetry("CheckForUpdate"),this.updateService.checkForUpdates(!0)},0)})];case"checking for updates":return[new C.MenuItem({label:p.localize(30,null),enabled:!1})];case"available for download":return[new C.MenuItem({label:this.mnemonicLabel(p.localize(31,null)),click:()=>{this.updateService.downloadUpdate()}})];case"downloading":return[new C.MenuItem({label:p.localize(32,null),enabled:!1})];case"downloaded":return[new C.MenuItem({label:this.mnemonicLabel(p.localize(33,null)),click:()=>{this.reportMenuActionTelemetry("InstallUpdate"),this.updateService.applyUpdate()}})];case"updating":return[new C.MenuItem({label:p.localize(34,null),enabled:!1})];case"ready":return[new C.MenuItem({label:this.mnemonicLabel(p.localize(35,null)),click:()=>{this.reportMenuActionTelemetry("RestartToUpdate"),this.updateService.quitAndInstall()}})]}}createMenuItem(r,c,o,b){const D=this.mnemonicLabel(r),A=typeof c=="function"?c:(Q,re,ne)=>{const fe=Q?Q.userSettingsLabel:null;let K=c;Array.isArray(c)&&(K=this.isOptionClick(ne)?c[1]:c[0]),fe&&ne.triggeredByAccelerator?this.runActionInRenderer({type:"keybinding",userSettingsLabel:fe}):this.runActionInRenderer({type:"commandId",commandId:K})},N=typeof o=="boolean"?o:this.windowsMainService.getWindowCount()>0,G=typeof b=="boolean"?b:!1,ae={label:D,click:A,enabled:N};G&&(ae.type="checkbox",ae.checked=G);let x;return typeof c=="string"?x=c:Array.isArray(c)&&(x=c[0]),R.isMacintosh&&(x==="editor.action.clipboardCutAction"?ae.role="cut":x==="editor.action.clipboardCopyAction"?ae.role="copy":x==="editor.action.clipboardPasteAction"&&(ae.role="paste"),x==="undo"?ae.click=this.makeContextAwareClickHandler(A,{inDevTools:Q=>Q.undo(),inNoWindow:()=>C.Menu.sendActionToFirstResponder("undo:")}):x==="redo"?ae.click=this.makeContextAwareClickHandler(A,{inDevTools:Q=>Q.redo(),inNoWindow:()=>C.Menu.sendActionToFirstResponder("redo:")}):x==="editor.action.selectAll"&&(ae.click=this.makeContextAwareClickHandler(A,{inDevTools:Q=>Q.selectAll(),inNoWindow:()=>C.Menu.sendActionToFirstResponder("selectAll:")}))),new C.MenuItem(this.withKeybinding(x,ae))}makeContextAwareClickHandler(r,c){return(o,b,D)=>{const A=C.BrowserWindow.getFocusedWindow();if(!A)return c.inNoWindow();if(A.webContents.isDevToolsFocused()&&A.webContents.devToolsWebContents)return c.inDevTools(A.webContents.devToolsWebContents);r(o,b||A,D)}}runActionInRenderer(r){let c=C.BrowserWindow.getFocusedWindow();if(!c){const b=this.windowsMainService.getLastActiveWindow();b?.isMinimized()&&(c=b.win)}const o=c?this.windowsMainService.getWindowById(c.id):void 0;if(o){if(this.logService.trace("menubar#runActionInRenderer",r),R.isMacintosh&&!this.environmentMainService.isBuilt&&!o.isReady&&(r.type==="commandId"&&r.commandId==="workbench.action.toggleDevTools"||r.type!=="commandId"&&r.userSettingsLabel==="alt+cmd+i"))return;if(r.type==="commandId"){const b={id:r.commandId,from:"menu"};o.sendWhenReady("vscode:runAction",k.CancellationToken.None,b)}else{const b={userSettingsLabel:r.userSettingsLabel};o.sendWhenReady("vscode:runKeybinding",k.CancellationToken.None,b)}}else this.logService.trace("menubar#runActionInRenderer: no active window found",r)}withKeybinding(r,c){const o=typeof r=="string"?this.keybindings[r]:void 0;if(o?.label){if(o.isNative!==!1)c.accelerator=o.label,c.userSettingsLabel=o.userSettingsLabel;else if(typeof c.label=="string"){const b=c.label.indexOf("[");b>=0?c.label=`${c.label.substr(0,b)} [${o.label}]`:c.label=`${c.label} [${o.label}]`}}else c.accelerator=void 0;return c}likeAction(r,c,o=!c.accelerator){o&&(c=this.withKeybinding(r,c));const b=c.click;return c.click=(D,A,N)=>{this.reportMenuActionTelemetry(r),b?.(D,A,N)},c}openUrl(r,c){this.nativeHostMainService.openExternal(void 0,r),this.reportMenuActionTelemetry(c)}reportMenuActionTelemetry(r){this.telemetryService.publicLog2("workbenchActionExecuted",{id:r,from:i})}mnemonicLabel(r){return(0,L.mnemonicMenuLabel)(r,!this.currentEnableMenuBarMnemonics)}};s.lastKnownMenubarStorageKey="lastKnownMenubarData",s=we([ie(0,S.IUpdateService),ie(1,m.IConfigurationService),ie(2,h.IWindowsMainService),ie(3,y.IEnvironmentMainService),ie(4,u.ITelemetryService),ie(5,l.IWorkspacesHistoryMainService),ie(6,v.IStateMainService),ie(7,I.ILifecycleMainService),ie(8,E.ILogService),ie(9,w.INativeHostMainService),ie(10,f.IProductService)],s),e.Menubar=s;function n(){return new C.MenuItem({type:"separator"})}}),define(ee[272],te([0,1,5,21,6,271]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenubarMainService=e.IMenubarMainService=void 0,e.IMenubarMainService=(0,C.createDecorator)("menubarMainService");let R=class{constructor(p,m,y){this.instantiationService=p,this.lifecycleMainService=m,this.logService=y,this.menubar=this.installMenuBarAfterWindowOpen()}async installMenuBarAfterWindowOpen(){return await this.lifecycleMainService.when(3),this.instantiationService.createInstance(L.Menubar)}async updateMenubar(p,m){this.logService.trace("menubarService#updateMenubar",p),(await this.menubar).updateMenu(m,p)}};R=we([ie(0,C.IInstantiationService),ie(1,t.ILifecycleMainService),ie(2,k.ILogService)],R),e.MenubarMainService=R}),define(ee[273],te([0,1,13,23,25,24,22,3,30,50,34,2,14,9,73,4,33,20,12,7,173,62,18,57,27,16,5,21,6,63,19,64,54,36,74,270,119,265,28,95,75,52,66,37,51]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N,G,ae,x,Q,re,ne,fe,K,le,W,O,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WindowsMainService=void 0;function H(z){return(0,ne.isWorkspaceIdentifier)(z?.workspace)}function se(z){return(0,ne.isSingleFolderWorkspaceIdentifier)(z?.workspace)}let $=class mt extends I.Disposable{constructor(M,T,F,_,q,Y,B,X,J,oe,ge,De,Te,ke,Ae,ve,pe,ye){super(),this.machineId=M,this.initialUserEnv=T,this.logService=F,this.stateMainService=_,this.policyService=q,this.environmentMainService=Y,this.userDataProfilesMainService=B,this.lifecycleMainService=X,this.backupMainService=J,this.configurationService=oe,this.workspacesHistoryMainService=ge,this.workspacesManagementMainService=De,this.instantiationService=Te,this.dialogMainService=ke,this.fileService=Ae,this.productService=ve,this.protocolMainService=pe,this.themeMainService=ye,this._onDidOpenWindow=this._register(new P.Emitter),this.onDidOpenWindow=this._onDidOpenWindow.event,this._onDidSignalReadyWindow=this._register(new P.Emitter),this.onDidSignalReadyWindow=this._onDidSignalReadyWindow.event,this._onDidDestroyWindow=this._register(new P.Emitter),this.onDidDestroyWindow=this._onDidDestroyWindow.event,this._onDidChangeWindowsCount=this._register(new P.Emitter),this.onDidChangeWindowsCount=this._onDidChangeWindowsCount.event,this._onDidTriggerSystemContextMenu=this._register(new P.Emitter),this.onDidTriggerSystemContextMenu=this._onDidTriggerSystemContextMenu.event,this.windowsStateHandler=this._register(new re.WindowsStateHandler(this,this.stateMainService,this.lifecycleMainService,this.logService,this.configurationService)),this.registerListeners()}registerListeners(){this._register(this.workspacesManagementMainService.onDidEnterWorkspace(M=>this._onDidSignalReadyWindow.fire(M.window))),this._register(this.onDidSignalReadyWindow(M=>{if(M.config?.extensionDevelopmentPath||M.config?.extensionTestsPath){const T=new I.DisposableStore;if(T.add(P.Event.any(M.onDidClose,M.onDidDestroy)(()=>T.dispose())),M.config.extensionDevelopmentPath)for(const F of M.config.extensionDevelopmentPath)T.add(this.protocolMainService.addValidFileRoot(F));M.config.extensionTestsPath&&T.add(this.protocolMainService.addValidFileRoot(M.config.extensionTestsPath))}}))}openEmptyWindow(M,T){const F=this.environmentMainService.args,_=T?.remoteAuthority||void 0,q=!0,Y=T?.forceReuseWindow,B=!Y;return this.open({...M,cli:F,forceEmpty:q,forceNewWindow:B,forceReuseWindow:Y,remoteAuthority:_})}openExistingWindow(M,T){M.focus(),this.handleWaitMarkerFile(T,[M])}async open(M){this.logService.trace("windowsManager#open"),M.addMode&&(M.initialStartup||!this.getLastActiveWindow())&&(M.addMode=!1);const T=[],F=[],_=[],q=[],Y=[];let B,X=0;const J=await this.getPathsToOpen(M);this.logService.trace("windowsManager#open pathsToOpen",J);for(const ke of J)se(ke)?M.addMode?T.push(ke):F.push(ke):H(ke)?_.push(ke):ke.fileUri?(B||(B={filesToOpenOrCreate:[],filesToDiff:[],filesToMerge:[],remoteAuthority:ke.remoteAuthority}),B.filesToOpenOrCreate.push(ke)):ke.backupPath?Y.push({backupFolder:(0,d.basename)(ke.backupPath),remoteAuthority:ke.remoteAuthority}):X++;M.diffMode&&B&&B.filesToOpenOrCreate.length>=2&&(B.filesToDiff=B.filesToOpenOrCreate.slice(0,2),B.filesToOpenOrCreate=[]),M.mergeMode&&B&&B.filesToOpenOrCreate.length===4&&(B.filesToMerge=B.filesToOpenOrCreate.slice(0,4),B.filesToOpenOrCreate=[],B.filesToDiff=[]),B&&M.waitMarkerFileURI&&(B.filesToWait={paths:(0,L.coalesce)([...B.filesToDiff,B.filesToMerge[3],...B.filesToOpenOrCreate]),waitMarkerFileUri:M.waitMarkerFileURI}),M.initialStartup?(q.push(...this.workspacesManagementMainService.getUntitledWorkspaces()),_.push(...q),Y.push(...this.backupMainService.getEmptyWindowBackups())):Y.length=0;const{windows:oe,filesOpenedInWindow:ge}=await this.doOpen(M,_,F,Y,X,B,T);if(this.logService.trace(`windowsManager#open used window count ${oe.length} (workspacesToOpen: ${_.length}, foldersToOpen: ${F.length}, emptyToRestore: ${Y.length}, emptyToOpen: ${X})`),oe.length>1)if(ge)ge.focus();else{const ke=this.windowsStateHandler.state.lastActiveWindow&&!M.forceEmpty&&!M.cli._.length&&!M.cli["file-uri"]&&!M.cli["folder-uri"]&&!(M.urisToOpen&&M.urisToOpen.length);let Ae=!0,ve=!0;if(ke){const pe=oe.filter(ye=>this.windowsStateHandler.state.lastActiveWindow&&ye.backupPath===this.windowsStateHandler.state.lastActiveWindow.backupPath);pe.length&&(pe[0].focus(),Ae=!1,ve=!1)}if(Ae)for(let pe=oe.length-1;pe>=0;pe--){const ye=oe[pe];if(!(ye.openedWorkspace&&q.some(Me=>ye.openedWorkspace&&Me.workspace.id===ye.openedWorkspace.id)||ye.backupPath&&Y.some(Me=>ye.backupPath&&Me.backupFolder===(0,d.basename)(ye.backupPath)))){ye.focus(),ve=!1;break}}ve&&oe[oe.length-1].focus()}const De=B&&B.filesToDiff.length>0,Te=B&&B.filesToMerge.length>0;if(!oe.some(ke=>ke.isExtensionDevelopmentHost)&&!De&&!Te&&!M.noRecentEntry){const ke=[];for(const Ae of J)H(Ae)&&!Ae.transient?ke.push({label:Ae.label,workspace:Ae.workspace,remoteAuthority:Ae.remoteAuthority}):se(Ae)?ke.push({label:Ae.label,folderUri:Ae.workspace.uri,remoteAuthority:Ae.remoteAuthority}):Ae.fileUri&&ke.push({label:Ae.label,fileUri:Ae.fileUri,remoteAuthority:Ae.remoteAuthority});this.workspacesHistoryMainService.addRecentlyOpened(ke)}return this.handleWaitMarkerFile(M,oe),oe}handleWaitMarkerFile(M,T){const F=M.waitMarkerFileURI;M.context===0&&F&&T.length===1&&T[0]&&(async()=>{await T[0].whenClosedOrLoaded;try{await this.fileService.del(F)}catch{}})()}async doOpen(M,T,F,_,q,Y,B){const X=[];let J;function oe(pe,ye){X.push(pe),ye&&(J=pe,Y=void 0)}let{openFolderInNewWindow:ge,openFilesInNewWindow:De}=this.shouldOpenNewWindow(M);if(!M.initialStartup&&B.length>0){const pe=B[0].remoteAuthority,ye=this.getLastActiveWindowForAuthority(pe);ye&&oe(this.doAddFoldersToExistingWindow(ye,B.map(Me=>Me.workspace.uri)))}const Te=F.length+T.length+_.length;if(Y&&Te===0){const pe=Y.filesToOpenOrCreate[0]||Y.filesToDiff[0]||Y.filesToMerge[3],ye=this.getWindows().filter(Z=>Y&&(0,u.isEqualAuthority)(Z.remoteAuthority,Y.remoteAuthority));let Me;pe?.fileUri&&!De&&((M.context===4||M.context===0||M.context===1)&&(Me=await(0,Q.findWindowOnFile)(ye,pe.fileUri,async Z=>Z.configPath.scheme===E.Schemas.file?this.workspacesManagementMainService.resolveLocalWorkspace(Z.configPath):void 0)),Me||(Me=this.doGetLastActiveWindow(ye))),Me?(0,ne.isWorkspaceIdentifier)(Me.openedWorkspace)?T.push({workspace:Me.openedWorkspace,remoteAuthority:Me.remoteAuthority}):(0,ne.isSingleFolderWorkspaceIdentifier)(Me.openedWorkspace)?F.push({workspace:Me.openedWorkspace,remoteAuthority:Me.remoteAuthority}):oe(this.doOpenFilesInExistingWindow(M,Me,Y),!0):oe(await this.openInBrowserWindow({userEnv:M.userEnv,cli:M.cli,initialStartup:M.initialStartup,filesToOpen:Y,forceNewWindow:!0,remoteAuthority:Y.remoteAuthority,forceNewTabbedWindow:M.forceNewTabbedWindow,forceProfile:M.forceProfile,forceTempProfile:M.forceTempProfile}),!0)}const ke=(0,L.distinct)(T,pe=>pe.workspace.id);if(ke.length>0){const pe=(0,L.coalesce)(ke.map(ye=>(0,Q.findWindowOnWorkspaceOrFolder)(this.getWindows(),ye.workspace.configPath)));if(pe.length>0){const ye=pe[0],Me=(0,u.isEqualAuthority)(Y?.remoteAuthority,ye.remoteAuthority)?Y:void 0;oe(this.doOpenFilesInExistingWindow(M,ye,Me),!!Me),ge=!0}for(const ye of ke){if(pe.some(he=>he.openedWorkspace&&he.openedWorkspace.id===ye.workspace.id))continue;const Me=ye.remoteAuthority,Z=(0,u.isEqualAuthority)(Y?.remoteAuthority,Me)?Y:void 0;oe(await this.doOpenFolderOrWorkspace(M,ye,ge,Z),!!Z),ge=!0}}const Ae=(0,L.distinct)(F,pe=>u.extUriBiasedIgnorePathCase.getComparisonKey(pe.workspace.uri));if(Ae.length>0){const pe=(0,L.coalesce)(Ae.map(ye=>(0,Q.findWindowOnWorkspaceOrFolder)(this.getWindows(),ye.workspace.uri)));if(pe.length>0){const ye=pe[0],Me=(0,u.isEqualAuthority)(Y?.remoteAuthority,ye.remoteAuthority)?Y:void 0;oe(this.doOpenFilesInExistingWindow(M,ye,Me),!!Me),ge=!0}for(const ye of Ae){if(pe.some(he=>(0,ne.isSingleFolderWorkspaceIdentifier)(he.openedWorkspace)&&u.extUriBiasedIgnorePathCase.isEqual(he.openedWorkspace.uri,ye.workspace.uri)))continue;const Me=ye.remoteAuthority,Z=(0,u.isEqualAuthority)(Y?.remoteAuthority,Me)?Y:void 0;oe(await this.doOpenFolderOrWorkspace(M,ye,ge,Z),!!Z),ge=!0}}const ve=(0,L.distinct)(_,pe=>pe.backupFolder);if(ve.length>0)for(const pe of ve){const ye=pe.remoteAuthority,Me=(0,u.isEqualAuthority)(Y?.remoteAuthority,ye)?Y:void 0;oe(await this.doOpenEmpty(M,!0,ye,Me,pe),!!Me),ge=!0}if(X.length===0||Y){Y&&!q&&q++;const pe=Y?Y.remoteAuthority:M.remoteAuthority;for(let ye=0;ye<q;ye++)oe(await this.doOpenEmpty(M,ge,pe,Y),!!Y),ge=!0}return{windows:(0,L.distinct)(X),filesOpenedInWindow:J}}doOpenFilesInExistingWindow(M,T,F){this.logService.trace("windowsManager#doOpenFilesInExistingWindow",{filesToOpen:F}),T.focus();const _={filesToOpenOrCreate:F?.filesToOpenOrCreate,filesToDiff:F?.filesToDiff,filesToMerge:F?.filesToMerge,filesToWait:F?.filesToWait,termProgram:M?.userEnv?.TERM_PROGRAM};return T.sendWhenReady("vscode:openFiles",R.CancellationToken.None,_),T}doAddFoldersToExistingWindow(M,T){this.logService.trace("windowsManager#doAddFoldersToExistingWindow",{foldersToAdd:T}),M.focus();const F={foldersToAdd:T};return M.sendWhenReady("vscode:addFolders",R.CancellationToken.None,F),M}doOpenEmpty(M,T,F,_,q){this.logService.trace("windowsManager#doOpenEmpty",{restore:!!q,remoteAuthority:F,filesToOpen:_,forceNewWindow:T});let Y;return!T&&typeof M.contextWindowId=="number"&&(Y=this.getWindowById(M.contextWindowId)),this.openInBrowserWindow({userEnv:M.userEnv,cli:M.cli,initialStartup:M.initialStartup,remoteAuthority:F,forceNewWindow:T,forceNewTabbedWindow:M.forceNewTabbedWindow,filesToOpen:_,windowToUse:Y,emptyWindowBackupInfo:q,forceProfile:M.forceProfile,forceTempProfile:M.forceTempProfile})}doOpenFolderOrWorkspace(M,T,F,_,q){return this.logService.trace("windowsManager#doOpenFolderOrWorkspace",{folderOrWorkspace:T,filesToOpen:_}),!F&&!q&&typeof M.contextWindowId=="number"&&(q=this.getWindowById(M.contextWindowId)),this.openInBrowserWindow({workspace:T.workspace,userEnv:M.userEnv,cli:M.cli,initialStartup:M.initialStartup,remoteAuthority:T.remoteAuthority,forceNewWindow:F,forceNewTabbedWindow:M.forceNewTabbedWindow,filesToOpen:_,windowToUse:q,forceProfile:M.forceProfile,forceTempProfile:M.forceTempProfile})}async getPathsToOpen(M){let T,F=!1,_=!1;if(M.urisToOpen&&M.urisToOpen.length>0?(T=await this.doExtractPathsFromAPI(M),F=!0):M.forceEmpty?T=[Object.create(null)]:M.cli._.length||M.cli["folder-uri"]||M.cli["file-uri"]?(T=await this.doExtractPathsFromCLI(M.cli),T.length===0&&T.push(Object.create(null)),F=!0):(T=await this.doGetPathsFromLastSession(),T.length===0&&T.push(Object.create(null)),_=!0),!M.addMode&&F){const q=T.filter(Y=>se(Y));if(q.length>1){const Y=q[0].remoteAuthority;if(q.every(B=>(0,u.isEqualAuthority)(B.remoteAuthority,Y))){const B=await this.workspacesManagementMainService.createUntitledWorkspace(q.map(X=>({uri:X.workspace.uri})));T.push({workspace:B,remoteAuthority:Y}),T=T.filter(X=>!se(X))}}}if(M.initialStartup&&!_&&this.configurationService.getValue("window")?.restoreWindows==="preserve"){const q=await this.doGetPathsFromLastSession();T.unshift(...q.filter(Y=>H(Y)||se(Y)||Y.backupPath))}return T}async doExtractPathsFromAPI(M){const T={gotoLineMode:M.gotoLineMode,remoteAuthority:M.remoteAuthority},F=await Promise.all((0,L.coalesce)(M.urisToOpen||[]).map(async _=>{const q=await this.resolveOpenable(_,T);if(q)return q.label=_.label,q;const Y=this.resourceFromOpenable(_),B={title:this.productService.nameLong,type:"info",buttons:[(0,y.mnemonicButtonLabel)((0,h.localize)(0,null))],defaultId:0,message:Y.scheme===E.Schemas.file?(0,h.localize)(1,null):(0,h.localize)(2,null),detail:Y.scheme===E.Schemas.file?(0,h.localize)(3,null,(0,y.getPathLabel)(Y,{os:f.OS,tildify:this.environmentMainService})):(0,h.localize)(4,null,Y.toString(!0)),noLink:!0};this.dialogMainService.showMessageBox(B,(0,S.withNullAsUndefined)(C.BrowserWindow.getFocusedWindow()))}));return(0,L.coalesce)(F)}async doExtractPathsFromCLI(M){const T=[],F={ignoreFileNotFound:!0,gotoLineMode:M.goto,remoteAuthority:M.remote||void 0,forceOpenWorkspaceAsFile:M.diff&&M._.length===2||M.merge&&M._.length===4},_=M["folder-uri"];if(_){const B=await Promise.all(_.map(X=>{const J=this.cliArgToUri(X);if(!!J)return this.resolveOpenable({folderUri:J},F)}));T.push(...(0,L.coalesce)(B))}const q=M["file-uri"];if(q){const B=await Promise.all(q.map(X=>{const J=this.cliArgToUri(X);if(!!J)return this.resolveOpenable((0,ne.hasWorkspaceFileExtension)(X)?{workspaceUri:J}:{fileUri:J},F)}));T.push(...(0,L.coalesce)(B))}const Y=await Promise.all(M._.map(B=>F.remoteAuthority?this.doResolveRemotePath(B,F):this.doResolveFilePath(B,F)));return T.push(...(0,L.coalesce)(Y)),T}cliArgToUri(M){try{const T=g.URI.parse(M);if(!T.scheme){this.logService.error(`Invalid URI input string, scheme missing: ${M}`);return}return T}catch(T){this.logService.error(`Invalid URI input string: ${M}, ${T.message}`)}}async doGetPathsFromLastSession(){const M=this.getRestoreWindowsSetting();switch(M){case"none":return[];case"one":case"all":case"preserve":case"folders":{const T=[];M!=="one"&&T.push(...this.windowsStateHandler.state.openedWindows),this.windowsStateHandler.state.lastActiveWindow&&T.push(this.windowsStateHandler.state.lastActiveWindow);const F=await Promise.all(T.map(async _=>{if(_.workspace){const q=await this.resolveOpenable({workspaceUri:_.workspace.configPath},{remoteAuthority:_.remoteAuthority,rejectTransientWorkspaces:!0});if(H(q))return q}else if(_.folderUri){const q=await this.resolveOpenable({folderUri:_.folderUri},{remoteAuthority:_.remoteAuthority});if(se(q))return q}else if(M!=="folders"&&_.backupPath)return{backupPath:_.backupPath,remoteAuthority:_.remoteAuthority}}));return(0,L.coalesce)(F)}}}getRestoreWindowsSetting(){let M;return this.lifecycleMainService.wasRestarted?M="all":(M=this.configurationService.getValue("window")?.restoreWindows||"all",["preserve","all","folders","one","none"].includes(M)||(M="all")),M}async resolveOpenable(M,T=Object.create(null)){const F=this.resourceFromOpenable(M);return F.scheme===E.Schemas.file?((0,ae.isFileToOpen)(M)&&(T={...T,forceOpenWorkspaceAsFile:!0}),this.doResolveFilePath(F.fsPath,T)):this.doResolveRemoteOpenable(M,T)}doResolveRemoteOpenable(M,T){let F=this.resourceFromOpenable(M);const _=(0,N.getRemoteAuthority)(F)||T.remoteAuthority;if(F=(0,u.removeTrailingPathSeparator)((0,u.normalizePath)(F)),(0,ae.isFileToOpen)(M)){if(T.gotoLineMode){const{path:q,line:Y,column:B}=(0,p.parseLineAndColumnAware)(F.path);return{fileUri:F.with({path:q}),options:{selection:Y?{startLineNumber:Y,startColumn:B||1}:void 0},remoteAuthority:_}}return{fileUri:F,remoteAuthority:_}}else if((0,ae.isWorkspaceToOpen)(M))return{workspace:(0,fe.getWorkspaceIdentifier)(F),remoteAuthority:_};return{workspace:(0,fe.getSingleFolderWorkspaceIdentifier)(F),remoteAuthority:_}}resourceFromOpenable(M){return(0,ae.isWorkspaceToOpen)(M)?M.workspaceUri:(0,ae.isFolderToOpen)(M)?M.folderUri:M.fileUri}async doResolveFilePath(M,T){let F,_;T.gotoLineMode&&({path:M,line:F,column:_}=(0,p.parseLineAndColumnAware)(M)),M=(0,p.sanitizeFilePath)((0,d.normalize)(M),(0,v.cwd)());try{const q=await t.Promises.stat(M);if(q.isFile()){if(!T.forceOpenWorkspaceAsFile){const Y=await this.workspacesManagementMainService.resolveLocalWorkspace(g.URI.file(M));if(Y)return Y.transient&&T.rejectTransientWorkspaces?void 0:{workspace:{id:Y.id,configPath:Y.configPath},type:a.FileType.File,exists:!0,remoteAuthority:Y.remoteAuthority,transient:Y.transient}}return{fileUri:g.URI.file(M),type:a.FileType.File,exists:!0,options:{selection:F?{startLineNumber:F,startColumn:_||1}:void 0}}}else{if(q.isDirectory())return{workspace:(0,fe.getSingleFolderWorkspaceIdentifier)(g.URI.file(M),q),type:a.FileType.Directory,exists:!0};if(!f.isWindows&&M==="/dev/null")return{fileUri:g.URI.file(M),type:a.FileType.File,exists:!0}}}catch{const Y=g.URI.file(M);if(this.workspacesHistoryMainService.removeRecentlyOpened([Y]),T.ignoreFileNotFound)return{fileUri:Y,type:a.FileType.File,exists:!1}}}doResolveRemotePath(M,T){const F=M.charCodeAt(0),_=T.remoteAuthority;let q,Y;T.gotoLineMode&&({path:M,line:q,column:Y}=(0,p.parseLineAndColumnAware)(M)),F!==47&&((0,p.isWindowsDriveLetter)(F)&&M.charCodeAt(M.charCodeAt(1))===58&&(M=(0,p.toSlashes)(M)),M=`/${M}`);const B=g.URI.from({scheme:E.Schemas.vscodeRemote,authority:_,path:M});if(M.charCodeAt(M.length-1)!==47){if((0,ne.hasWorkspaceFileExtension)(M))return T.forceOpenWorkspaceAsFile?{fileUri:B,options:{selection:q?{startLineNumber:q,startColumn:Y||1}:void 0},remoteAuthority:T.remoteAuthority}:{workspace:(0,fe.getWorkspaceIdentifier)(B),remoteAuthority:_};if(T.gotoLineMode||d.posix.basename(M).indexOf(".")!==-1)return{fileUri:B,options:{selection:q?{startLineNumber:q,startColumn:Y||1}:void 0},remoteAuthority:_}}return{workspace:(0,fe.getSingleFolderWorkspaceIdentifier)(B),remoteAuthority:_}}shouldOpenNewWindow(M){const T=this.configurationService.getValue("window"),F=T?.openFoldersInNewWindow||"default",_=T?.openFilesInNewWindow||"off";let q=(M.preferNewWindow||M.forceNewWindow)&&!M.forceReuseWindow;!M.forceNewWindow&&!M.forceReuseWindow&&(F==="on"||F==="off")&&(q=F==="on");let Y=!1;return M.forceNewWindow||M.forceReuseWindow?Y=!!M.forceNewWindow&&!M.forceReuseWindow:(f.isMacintosh?M.context===1&&(Y=!0):M.context!==3&&M.context!==2&&!(M.userEnv&&M.userEnv.TERM_PROGRAM==="vscode")&&(Y=!0),!M.cli.extensionDevelopmentPath&&(_==="on"||_==="off")&&(Y=_==="on")),{openFolderInNewWindow:!!q,openFilesInNewWindow:Y}}async openExtensionDevelopmentHostWindow(M,T){const F=(0,Q.findWindowOnExtensionDevelopmentPath)(this.getWindows(),M);if(F)return this.lifecycleMainService.reload(F,T.cli),F.focus(),[F];let _=T.cli["folder-uri"]||[],q=T.cli["file-uri"]||[],Y=T.cli._;if(!Y.length&&!_.length&&!q.length&&!T.cli.extensionTestsPath){const J=this.windowsStateHandler.state.lastPluginDevelopmentHostWindow,oe=J?.workspace??J?.folderUri;oe&&(g.URI.isUri(oe)?oe.scheme===E.Schemas.file?Y=[oe.fsPath]:_=[oe.toString()]:oe.configPath.scheme===E.Schemas.file?Y=[(0,u.originalFSPath)(oe.configPath)]:q=[oe.configPath.toString()])}let B=T.remoteAuthority;for(const J of M)if(J.match(/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/)){const oe=g.URI.parse(J),ge=(0,N.getRemoteAuthority)(oe);ge&&(B?(0,u.isEqualAuthority)(ge,B)||this.logService.error("more than one extension development path authority"):B=ge)}Y=Y.filter(J=>{const oe=g.URI.file(J);return(0,Q.findWindowOnWorkspaceOrFolder)(this.getWindows(),oe)?!1:(0,u.isEqualAuthority)((0,N.getRemoteAuthority)(oe),B)}),_=_.filter(J=>{const oe=this.cliArgToUri(J);return oe&&!!(0,Q.findWindowOnWorkspaceOrFolder)(this.getWindows(),oe)?!1:oe?(0,u.isEqualAuthority)((0,N.getRemoteAuthority)(oe),B):!1}),q=q.filter(J=>{const oe=this.cliArgToUri(J);return oe&&!!(0,Q.findWindowOnWorkspaceOrFolder)(this.getWindows(),oe)?!1:oe?(0,u.isEqualAuthority)((0,N.getRemoteAuthority)(oe),B):!1}),T.cli._=Y,T.cli["folder-uri"]=_,T.cli["file-uri"]=q;const X={context:T.context,cli:T.cli,forceNewWindow:!0,forceEmpty:!Y.length&&!_.length&&!q.length,userEnv:T.userEnv,noRecentEntry:!0,waitMarkerFileURI:T.waitMarkerFileURI,remoteAuthority:B,forceProfile:T.forceProfile,forceTempProfile:T.forceTempProfile};return this.open(X)}async openInBrowserWindow(M){const T=this.configurationService.getValue("window");let F;!M.forceNewWindow&&!M.forceNewTabbedWindow&&(F=M.windowToUse||this.getLastActiveWindow(),F&&F.focus());const _={...this.environmentMainService.args,...M.cli,machineId:this.machineId,windowId:-1,mainPid:process.pid,appRoot:this.environmentMainService.appRoot,execPath:process.execPath,codeCachePath:this.environmentMainService.codeCachePath,backupPath:M.emptyWindowBackupInfo?(0,d.join)(this.environmentMainService.backupHome,M.emptyWindowBackupInfo.backupFolder):void 0,profiles:{all:this.userDataProfilesMainService.profiles,profile:F?.isExtensionDevelopmentHost&&F?.profile?F.profile:await this.resolveProfileForBrowserWindow(M)},homeDir:this.environmentMainService.userHome.fsPath,tmpDir:this.environmentMainService.tmpDir.fsPath,userDataDir:this.environmentMainService.userDataPath,remoteAuthority:M.remoteAuthority,workspace:M.workspace,userEnv:{...this.initialUserEnv,...M.userEnv},filesToOpenOrCreate:M.filesToOpen?.filesToOpenOrCreate,filesToDiff:M.filesToOpen?.filesToDiff,filesToMerge:M.filesToOpen?.filesToMerge,filesToWait:M.filesToOpen?.filesToWait,logLevel:this.logService.getLevel(),logsPath:this.environmentMainService.logsPath,product:b.default,isInitialStartup:M.initialStartup,perfMarks:(0,w.getMarks)(),os:{release:(0,k.release)(),hostname:(0,k.hostname)()},zoomLevel:typeof T?.zoomLevel=="number"?T.zoomLevel:void 0,autoDetectHighContrast:T?.autoDetectHighContrast??!0,autoDetectColorScheme:T?.autoDetectColorScheme??!1,accessibilitySupport:C.app.accessibilitySupportEnabled,colorScheme:this.themeMainService.getColorScheme(),policiesData:this.policyService.serialize(),continueOn:this.environmentMainService.continueOn};if(F){const q=F.config;!_.extensionDevelopmentPath&&q?.extensionDevelopmentPath&&(_.extensionDevelopmentPath=q.extensionDevelopmentPath,_.extensionDevelopmentKind=q.extensionDevelopmentKind,_["enable-proposed-api"]=q["enable-proposed-api"],_.verbose=q.verbose,_["inspect-extensions"]=q["inspect-extensions"],_["inspect-brk-extensions"]=q["inspect-brk-extensions"],_.debugId=q.debugId,_.extensionEnvironment=q.extensionEnvironment,_["extensions-dir"]=q["extensions-dir"],_["disable-extensions"]=q["disable-extensions"])}else{const q=this.windowsStateHandler.getNewWindowState(_);(0,w.mark)("code/willCreateCodeWindow");const Y=F=this.instantiationService.createInstance(x.CodeWindow,{state:q,extensionDevelopmentPath:_.extensionDevelopmentPath,isExtensionTestHost:!!_.extensionTestsPath});(0,w.mark)("code/didCreateCodeWindow"),M.forceNewTabbedWindow&&this.getLastActiveWindow()?.addTabbedWindow(Y),mt.WINDOWS.push(Y),this._onDidOpenWindow.fire(Y),this._onDidChangeWindowsCount.fire({oldCount:this.getWindowCount()-1,newCount:this.getWindowCount()}),(0,m.once)(Y.onDidSignalReady)(()=>this._onDidSignalReadyWindow.fire(Y)),(0,m.once)(Y.onDidClose)(()=>this.onWindowClosed(Y)),(0,m.once)(Y.onDidDestroy)(()=>this._onDidDestroyWindow.fire(Y)),Y.onDidTriggerSystemContextMenu(({x:X,y:J})=>this._onDidTriggerSystemContextMenu.fire({window:Y,x:X,y:J}));const B=(0,S.assertIsDefined)(Y.win?.webContents);B.removeAllListeners("devtools-reload-page"),B.on("devtools-reload-page",()=>this.lifecycleMainService.reload(Y)),this.lifecycleMainService.registerWindow(Y)}return _.windowId=F.id,F.isReady?this.lifecycleMainService.unload(F,4).then(q=>{q||this.doOpenInBrowserWindow(F,_,M)}):this.doOpenInBrowserWindow(F,_,M),F}doOpenInBrowserWindow(M,T,F){T.extensionDevelopmentPath||((0,ne.isWorkspaceIdentifier)(T.workspace)?T.backupPath=this.backupMainService.registerWorkspaceBackup({workspace:T.workspace,remoteAuthority:T.remoteAuthority}):(0,ne.isSingleFolderWorkspaceIdentifier)(T.workspace)?T.backupPath=this.backupMainService.registerFolderBackup({folderUri:T.workspace.uri,remoteAuthority:T.remoteAuthority}):T.backupPath=this.backupMainService.registerEmptyWindowBackup({backupFolder:F.emptyWindowBackupInfo?.backupFolder??(0,fe.createEmptyWorkspaceIdentifier)().id,remoteAuthority:T.remoteAuthority})),M.load(T)}async resolveProfileForBrowserWindow(M){let T;return this.userDataProfilesMainService.isEnabled()&&(M.forceProfile?T=this.userDataProfilesMainService.profiles.find(F=>F.name===M.forceProfile)??await this.userDataProfilesMainService.createNamedProfile(M.forceProfile):M.forceTempProfile&&(T=await this.userDataProfilesMainService.createTransientProfile())),T?M.cli?.extensionDevelopmentPath||this.userDataProfilesMainService.setProfileForWorkspaceSync(M.workspace??"empty-window",T):T=this.userDataProfilesMainService.getOrSetProfileForWorkspace(M.workspace??"empty-window",(M.windowToUse??this.getLastActiveWindow())?.profile??this.userDataProfilesMainService.defaultProfile),T}onWindowClosed(M){const T=mt.WINDOWS.indexOf(M);mt.WINDOWS.splice(T,1),this._onDidChangeWindowsCount.fire({oldCount:this.getWindowCount()+1,newCount:this.getWindowCount()})}getFocusedWindow(){const M=C.BrowserWindow.getFocusedWindow();if(M)return this.getWindowById(M.id)}getLastActiveWindow(){return this.doGetLastActiveWindow(this.getWindows())}getLastActiveWindowForAuthority(M){return this.doGetLastActiveWindow(this.getWindows().filter(T=>(0,u.isEqualAuthority)(T.remoteAuthority,M)))}doGetLastActiveWindow(M){const T=Math.max.apply(Math,M.map(F=>F.lastFocusTime));return M.find(F=>F.lastFocusTime===T)}sendToFocused(M,...T){(this.getFocusedWindow()||this.getLastActiveWindow())?.sendWhenReady(M,R.CancellationToken.None,...T)}sendToAll(M,T,F){for(const _ of this.getWindows())F&&F.indexOf(_.id)>=0||_.sendWhenReady(M,R.CancellationToken.None,T)}getWindows(){return mt.WINDOWS}getWindowCount(){return mt.WINDOWS.length}getWindowById(M){const T=this.getWindows().filter(F=>F.id===M);return(0,L.firstOrDefault)(T)}getWindowByWebContents(M){const T=C.BrowserWindow.fromWebContents(M);if(!!T)return this.getWindowById(T.id)}};$.WINDOWS=[],$=we([ie(2,o.ILogService),ie(3,G.IStateMainService),ie(4,O.IPolicyService),ie(5,n.IEnvironmentMainService),ie(6,U.IUserDataProfilesMainService),ie(7,c.ILifecycleMainService),ie(8,l.IBackupMainService),ie(9,i.IConfigurationService),ie(10,K.IWorkspacesHistoryMainService),ie(11,le.IWorkspacesManagementMainService),ie(12,r.IInstantiationService),ie(13,s.IDialogMainService),ie(14,a.IFileService),ie(15,D.IProductService),ie(16,A.IProtocolMainService),ie(17,W.IThemeMainService)],$),e.WindowsMainService=$}),define(ee[274],te([0,1,62,32,75,52]),function(j,e,C,t,k,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspacesMainService=void 0;let R=class{constructor(p,m,y,I){this.workspacesManagementMainService=p,this.windowsMainService=m,this.workspacesHistoryMainService=y,this.backupMainService=I,this.onDidChangeRecentlyOpened=this.workspacesHistoryMainService.onDidChangeRecentlyOpened}async enterWorkspace(p,m){const y=this.windowsMainService.getWindowById(p);if(y)return this.workspacesManagementMainService.enterWorkspace(y,this.windowsMainService.getWindows(),m)}createUntitledWorkspace(p,m,y){return this.workspacesManagementMainService.createUntitledWorkspace(m,y)}deleteUntitledWorkspace(p,m){return this.workspacesManagementMainService.deleteUntitledWorkspace(m)}getWorkspaceIdentifier(p,m){return this.workspacesManagementMainService.getWorkspaceIdentifier(m)}getRecentlyOpened(p){return this.workspacesHistoryMainService.getRecentlyOpened()}addRecentlyOpened(p,m){return this.workspacesHistoryMainService.addRecentlyOpened(m)}removeRecentlyOpened(p,m){return this.workspacesHistoryMainService.removeRecentlyOpened(m)}clearRecentlyOpened(p){return this.workspacesHistoryMainService.clearRecentlyOpened()}async getDirtyWorkspaces(){return this.backupMainService.getDirtyWorkspaces()}};R=we([ie(0,L.IWorkspacesManagementMainService),ie(1,t.IWindowsMainService),ie(2,k.IWorkspacesHistoryMainService),ie(3,C.IBackupMainService)],R),e.WorkspacesMainService=R}),define(ee[275],te([0,1,13,41,25,17,45,15,30,50,43,34,2,14,9,4,12,7,29,132,47,146,103,251,149,62,266,18,71,181,84,120,57,107,203,27,61,112,193,215,194,253,108,195,196,16,207,86,70,5,85,267,228,254,21,6,209,272,58,19,54,260,88,36,257,93,89,31,233,113,56,49,242,243,268,244,269,116,246,247,248,249,255,32,273,256,28,94,75,274,52,252,37,214,51,224,55,91,118,258,264,262,8,114]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N,G,ae,x,Q,re,ne,fe,K,le,W,O,U,H,se,$,z,M,T,F,_,q,Y,B,X,J,oe,ge,De,Te,ke,Ae,ve,pe,ye,Me,Z,he,de,Se,Ie,Fe,Oe,qe,_e,Ne,xe,ze,Ke,V,ce,ue,me,be,Le,Be,it,Je,je,tt,nt,lt,at,Bt,zt,Ft,$t,qt,jt,Ht,It,Vt){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeApplication=void 0;let Pt=class extends E.Disposable{constructor(Ee,Pe,Re,Ce,We,$e,Ze,et,Ue,Ve,Ge){super(),this.mainProcessNodeIpcServer=Ee,this.userEnv=Pe,this.mainInstantiationService=Re,this.logService=Ce,this.environmentMainService=We,this.lifecycleMainService=$e,this.configurationService=Ze,this.stateMainService=et,this.fileService=Ue,this.productService=Ve,this.userDataProfilesMainService=Ge,this.configureSession(),this.registerListeners()}configureSession(){const Ee=Ue=>Ue?.startsWith(`${d.Schemas.vscodeWebview}://`),Pe=new Set(["clipboard-read","clipboard-sanitized-write"]);C.session.defaultSession.setPermissionRequestHandler((Ue,Ve,Ge,Xe)=>Ee(Xe.requestingUrl)?Ge(Pe.has(Ve)):Ge(!1)),C.session.defaultSession.setPermissionCheckHandler((Ue,Ve,Ge,Xe)=>Ee(Xe.requestingUrl)?Pe.has(Ve):!1);const Re=new Set([d.Schemas.file,d.Schemas.vscodeFileResource,d.Schemas.vscodeRemoteResource,"devtools"]),Ce=Ue=>{for(let Ve=Ue;Ve;Ve=Ve.parent)if(Ve.url.startsWith(`${d.Schemas.vscodeWebview}://`))return!0;return!1},We=Ue=>Ue.resourceType==="xhr"||Ce(Ue.frame),$e=Ue=>{const Ve=Ue.frame;if(!Ve||!this.windowsMainService)return!1;const Ge=C.BrowserWindow.getAllWindows();for(const Xe of Ge)if(Ve.processId===Xe.webContents.mainFrame.processId)return!0;return!1},Ze=(Ue,Ve)=>{if(Ue.path!=="/index.html")return!0;const Ge=Ve.frame;if(!Ge||!this.windowsMainService)return!1;for(const Xe of this.windowsMainService.getWindows())if(Xe.win&&Ge.processId===Xe.win.webContents.mainFrame.processId)return!0;return!1};C.session.defaultSession.webRequest.onBeforeRequest((Ue,Ve)=>{const Ge=u.URI.parse(Ue.url);return Ge.scheme===d.Schemas.vscodeWebview&&!Ze(Ge,Ue)?(this.logService.error("Blocked vscode-webview request",Ue.url),Ve({cancel:!0})):Ge.scheme===d.Schemas.vscodeFileResource&&!$e(Ue)?(this.logService.error("Blocked vscode-file request",Ue.url),Ve({cancel:!0})):Ge.path.endsWith(".svg")&&!Re.has(Ge.scheme)?Ve({cancel:!We(Ue)}):Ve({cancel:!1})}),C.session.defaultSession.webRequest.onHeadersReceived((Ue,Ve)=>{const Ge=Ue.responseHeaders,Xe=Ge["content-type"]||Ge["Content-Type"];if(Xe&&Array.isArray(Xe)){const st=u.URI.parse(Ue.url);if(st.path.endsWith(".svg")&&Re.has(st.scheme))return Ge["Content-Type"]=["image/svg+xml"],Ve({cancel:!1,responseHeaders:Ge});if(!st.path.endsWith(d.Schemas.vscodeRemoteResource)&&Xe.some(ct=>ct.toLowerCase().includes("image/svg")))return Ve({cancel:!We(Ue)})}return Ve({cancel:!1})});const et=C.session.defaultSession;typeof et.setCodeCachePath=="function"&&this.environmentMainService.codeCachePath&&et.setCodeCachePath((0,w.join)(this.environmentMainService.codeCachePath,"chrome"))}registerListeners(){(0,P.setUnexpectedErrorHandler)(Re=>this.onUnexpectedError(Re)),process.on("uncaughtException",Re=>(0,P.onUnexpectedError)(Re)),process.on("unhandledRejection",Re=>(0,P.onUnexpectedError)(Re)),this.lifecycleMainService.onWillShutdown(()=>this.dispose()),(0,g.registerContextMenuListener)(),C.app.on("accessibility-support-changed",(Re,Ce)=>{this.windowsMainService?.sendToAll("vscode:accessibilitySupportChanged",Ce)}),C.app.on("activate",async(Re,Ce)=>{this.logService.trace("app#activate"),Ce||await this.windowsMainService?.openEmptyWindow({context:1})}),C.app.on("web-contents-created",(Re,Ce)=>{Ce.on("will-navigate",We=>{this.logService.error("webContents#will-navigate: Prevented webcontent navigation"),We.preventDefault()}),Ce.setWindowOpenHandler(({url:We})=>(this.nativeHostMainService?.openExternal(void 0,We),{action:"deny"}))});let Ee=[],Pe;C.app.on("open-file",(Re,Ce)=>{this.logService.trace("app#open-file: ",Ce),Re.preventDefault(),Ee.push((0,Le.hasWorkspaceFileExtension)(Ce)?{workspaceUri:u.URI.file(Ce)}:{fileUri:u.URI.file(Ce)}),Pe!==void 0&&(clearTimeout(Pe),Pe=void 0),Pe=setTimeout(async()=>{await this.windowsMainService?.open({context:1,cli:this.environmentMainService.args,urisToOpen:Ee,gotoLineMode:!1,preferNewWindow:!0}),Ee=[],Pe=void 0},100)}),C.app.on("new-window-for-tab",async()=>{await this.windowsMainService?.openEmptyWindow({context:4})}),t.validatedIpcMain.handle("vscode:fetchShellEnv",Re=>{const Ce=this.windowsMainService?.getWindowByWebContents(Re.sender);let We,$e;return Ce?.config?(We=Ce.config,$e={...process.env,...Ce.config.userEnv}):(We=this.environmentMainService.args,$e=process.env),this.resolveShellEnvironment(We,$e,!1)}),t.validatedIpcMain.handle("vscode:writeNlsFile",(Re,Ce,We)=>{const $e=this.validateNlsPath([Ce]);if(!$e||typeof We!="string")throw new Error("Invalid operation (vscode:writeNlsFile)");return this.fileService.writeFile($e,L.VSBuffer.fromString(We))}),t.validatedIpcMain.handle("vscode:readNlsFile",async(Re,...Ce)=>{const We=this.validateNlsPath(Ce);if(!We)throw new Error("Invalid operation (vscode:readNlsFile)");return(await this.fileService.readFile(We)).value.toString()}),t.validatedIpcMain.on("vscode:toggleDevTools",Re=>Re.sender.toggleDevTools()),t.validatedIpcMain.on("vscode:openDevTools",Re=>Re.sender.openDevTools()),t.validatedIpcMain.on("vscode:reloadWindow",Re=>Re.sender.reload())}validateNlsPath(Ee){let Pe;for(const Re of Ee)typeof Re=="string"&&(typeof Pe!="string"?Pe=Re:Pe=(0,w.join)(Pe,Re));if(!(typeof Pe!="string"||!(0,w.isAbsolute)(Pe)||!(0,p.isEqualOrParent)(Pe,this.environmentMainService.cachedLanguagesPath,!f.isLinux)))return u.URI.file(Pe)}onUnexpectedError(Ee){if(Ee){const Pe={message:`[uncaught exception in main]: ${Ee.message}`,stack:Ee.stack};this.windowsMainService?.sendToFocused("vscode:reportError",JSON.stringify(Pe))}this.logService.error(`[uncaught exception in main]: ${Ee}`),Ee.stack&&this.logService.error(Ee.stack)}async startup(){this.logService.debug("Starting VS Code"),this.logService.debug(`from: ${this.environmentMainService.appRoot}`),this.logService.debug("args:",this.environmentMainService.args);const Ee=this.productService.win32AppUserModelId;f.isWindows&&Ee&&C.app.setAppUserModelId(Ee);try{f.isMacintosh&&this.configurationService.getValue("window.nativeTabs")===!0&&!C.systemPreferences.getUserDefault("NSUseImprovedLayoutPass","boolean")&&C.systemPreferences.setUserDefault("NSUseImprovedLayoutPass","boolean",!0)}catch(Ue){this.logService.error(Ue)}const Pe=new l.Server;this.lifecycleMainService.onWillShutdown(Ue=>{Ue.reason===2&&Pe.dispose()}),this.logService.trace("Resolving machine identifier...");const Re=await(0,Vt.resolveMachineId)(this.stateMainService);this.logService.trace(`Resolved machine identifier: ${Re}`);const{sharedProcess:Ce,sharedProcessReady:We,sharedProcessClient:$e}=this.setupSharedProcess(Re),Ze=await this.initServices(Re,Ce,We);this.setUpHandlers(Ze),Ze.invokeFunction(Ue=>this.initChannels(Ue,Pe,$e)),await Ze.invokeFunction(Ue=>this.openFirstWindow(Ue,Pe)),Ze.invokeFunction(Ue=>this.afterWindowOpen(Ue,Ce)),this._register(new It.RunOnceScheduler(()=>{this._register((0,It.runWhenIdle)(()=>this.lifecycleMainService.phase=4,2500))},2500)).schedule()}setUpHandlers(Ee){this._register(Ee.createInstance(s.ProxyAuthHandler)),this._register(Ee.createInstance(jt.UserDataTransientProfilesHandler))}setupSharedProcess(Ee){const Pe=this._register(this.mainInstantiationService.createInstance(Te.SharedProcess,Ee,this.userEnv)),Re=(async()=>{this.logService.trace("Main->SharedProcess#connect");const We=await Pe.connect();return this.logService.trace("Main->SharedProcess#connect: connection established"),new i.Client(We,"main")})(),Ce=(async()=>(await Pe.whenReady(),Re))();return{sharedProcess:Pe,sharedProcessReady:Ce,sharedProcessClient:Re}}async initServices(Ee,Pe,Re){const Ce=new T.ServiceCollection;switch(process.platform){case"win32":Ce.set(Se.IUpdateService,new z.SyncDescriptor(_e.Win32UpdateService));break;case"linux":f.isLinuxSnap?Ce.set(Se.IUpdateService,new z.SyncDescriptor(qe.SnapUpdateService,[process.env.SNAP,process.env.SNAP_REVISION])):Ce.set(Se.IUpdateService,new z.SyncDescriptor(Oe.LinuxUpdateService));break;case"darwin":Ce.set(Se.IUpdateService,new z.SyncDescriptor(Fe.DarwinUpdateService));break}Ce.set(ue.IWindowsMainService,new z.SyncDescriptor(me.WindowsMainService,[Ee,this.userEnv],!1));const We=new N.DialogMainService(this.logService);Ce.set(N.IDialogMainService,We),Ce.set(q.ILaunchMainService,new z.SyncDescriptor(q.LaunchMainService,void 0,!1)),Ce.set(A.IDiagnosticsMainService,new z.SyncDescriptor(A.DiagnosticsMainService,void 0,!1)),Ce.set(D.IDiagnosticsService,h.ProxyChannel.toService((0,h.getDelayedChannel)(Re.then(et=>et.getChannel("diagnostics"))))),Ce.set(F.IIssueMainService,new z.SyncDescriptor(F.IssueMainService,[this.userEnv])),Ce.set(G.IEncryptionMainService,new z.SyncDescriptor(ae.EncryptionMainService,[Ee])),Ce.set(_.IKeyboardLayoutMainService,new z.SyncDescriptor(_.KeyboardLayoutMainService)),Ce.set(oe.INativeHostMainService,new z.SyncDescriptor(oe.NativeHostMainService,[Pe],!1)),Ce.set(o.ICredentialsMainService,new z.SyncDescriptor(tt.CredentialsNativeMainService)),Ce.set(V.IWebviewManagerService,new z.SyncDescriptor(ce.WebviewMainService)),Ce.set(J.IMenubarMainService,new z.SyncDescriptor(J.MenubarMainService)),Ce.set(ne.IExtensionUrlTrustService,new z.SyncDescriptor(fe.ExtensionUrlTrustService)),Ce.set(K.IExtensionHostStarter,new z.SyncDescriptor(le.ExtensionHostStarter)),Ce.set(pe.IStorageMainService,new z.SyncDescriptor(pe.StorageMainService)),Ce.set(pe.IApplicationStorageMainService,new z.SyncDescriptor(pe.ApplicationStorageMainService)),f.isWindows?Ce.set(W.IExternalTerminalMainService,new z.SyncDescriptor(O.WindowsExternalTerminalService)):f.isMacintosh?Ce.set(W.IExternalTerminalMainService,new z.SyncDescriptor(O.MacExternalTerminalService)):f.isLinux&&Ce.set(W.IExternalTerminalMainService,new z.SyncDescriptor(O.LinuxExternalTerminalService));const $e=new r.BackupMainService(this.environmentMainService,this.configurationService,this.logService,this.stateMainService);Ce.set(a.IBackupMainService,$e);const Ze=new je.WorkspacesManagementMainService(this.environmentMainService,this.logService,this.userDataProfilesMainService,$e,We,this.productService);if(Ce.set(je.IWorkspacesManagementMainService,Ze),Ce.set(Be.IWorkspacesService,new z.SyncDescriptor(Je.WorkspacesMainService,void 0,!1)),Ce.set(it.IWorkspacesHistoryMainService,new z.SyncDescriptor(it.WorkspacesHistoryMainService,void 0,!1)),Ce.set(Ne.IURLService,new z.SyncDescriptor(ze.NativeURLService,void 0,!1)),(0,de.supportsTelemetry)(this.productService,this.environmentMainService)){const et=(0,de.isInternalTelemetry)(this.productService,this.configurationService),Ue=(0,h.getDelayedChannel)(Re.then(ct=>ct.getChannel("telemetryAppender"))),Ve=new Z.TelemetryAppenderClient(Ue),Ge=(0,ye.resolveCommonProperties)(this.fileService,(0,k.release)(),(0,k.hostname)(),process.arch,this.productService.commit,this.productService.version,Ee,et,this.environmentMainService.installSourcePath),Xe=(0,de.getPiiPathsFromEnvironment)(this.environmentMainService),st={appenders:[Ve],commonProperties:Ge,piiPaths:Xe,sendErrorTelemetry:!0};Ce.set(Me.ITelemetryService,new z.SyncDescriptor(he.TelemetryService,[st],!1))}else Ce.set(Me.ITelemetryService,de.NullTelemetryService);return Ce.set(Ft.IExtensionsProfileScannerService,new z.SyncDescriptor(Ft.ExtensionsProfileScannerService,void 0,!0)),Ce.set($t.IExtensionsScannerService,new z.SyncDescriptor(qt.ExtensionsScannerService,void 0,!0)),await It.Promises.settled([$e.initialize(),Ze.initialize()]),this.mainInstantiationService.createChild(Ce)}initChannels(Ee,Pe,Re){const Ce=h.ProxyChannel.fromService(Ee.get(q.ILaunchMainService),{disableMarshalling:!0});this.mainProcessNodeIpcServer.registerChannel("launch",Ce);const We=h.ProxyChannel.fromService(Ee.get(A.IDiagnosticsMainService),{disableMarshalling:!0});this.mainProcessNodeIpcServer.registerChannel("diagnostics",We);const $e=new lt.PolicyChannel(Ee.get(nt.IPolicyService));Pe.registerChannel("policy",$e),Re.then(Qe=>Qe.registerChannel("policy",$e));const Ze=this.fileService.getProvider(d.Schemas.file);(0,v.assertType)(Ze instanceof $.DiskFileSystemProvider);const et=new se.DiskFileSystemProviderChannel(Ze,this.logService,this.environmentMainService);Pe.registerChannel(U.LOCAL_FILE_SYSTEM_CHANNEL_NAME,et),Re.then(Qe=>Qe.registerChannel(U.LOCAL_FILE_SYSTEM_CHANNEL_NAME,et));const Ue=h.ProxyChannel.fromService(Ee.get(at.IUserDataProfilesMainService));Pe.registerChannel("userDataProfiles",Ue),Re.then(Qe=>Qe.registerChannel("userDataProfiles",Ue));const Ve=new Bt.RequestChannel(Ee.get(zt.IRequestService));Re.then(Qe=>Qe.registerChannel("request",Ve));const Ge=new Ie.UpdateChannel(Ee.get(Se.IUpdateService));Pe.registerChannel("update",Ge);const Xe=h.ProxyChannel.fromService(Ee.get(F.IIssueMainService));Pe.registerChannel("issue",Xe);const st=h.ProxyChannel.fromService(Ee.get(G.IEncryptionMainService));Pe.registerChannel("encryption",st);const ct=h.ProxyChannel.fromService(Ee.get(o.ICredentialsMainService));Pe.registerChannel("credentials",ct);const kt=h.ProxyChannel.fromService(Ee.get(ke.ISignService));Pe.registerChannel("sign",kt);const Ye=h.ProxyChannel.fromService(Ee.get(_.IKeyboardLayoutMainService));Pe.registerChannel("keyboardLayout",Ye),this.nativeHostMainService=Ee.get(oe.INativeHostMainService);const pt=h.ProxyChannel.fromService(this.nativeHostMainService);Pe.registerChannel("nativeHost",pt),Re.then(Qe=>Qe.registerChannel("nativeHost",pt));const wt=h.ProxyChannel.fromService(Ee.get(Be.IWorkspacesService));Pe.registerChannel("workspaces",wt);const yt=h.ProxyChannel.fromService(Ee.get(J.IMenubarMainService));Pe.registerChannel("menubar",yt);const Mt=h.ProxyChannel.fromService(Ee.get(Ne.IURLService));Pe.registerChannel("url",Mt);const Dt=h.ProxyChannel.fromService(Ee.get(ne.IExtensionUrlTrustService));Pe.registerChannel("extensionUrlTrust",Dt);const vt=h.ProxyChannel.fromService(Ee.get(V.IWebviewManagerService));Pe.registerChannel("webview",vt);const ut=this._register(new ve.StorageDatabaseChannel(this.logService,Ee.get(pe.IStorageMainService)));Pe.registerChannel("storage",ut),Re.then(Qe=>Qe.registerChannel("storage",ut));const bt=this._register(new Ht.ProfileStorageChangesListenerChannel(Ee.get(pe.IStorageMainService),Ee.get(at.IUserDataProfilesMainService),this.logService));Re.then(Qe=>Qe.registerChannel("profileStorageListener",bt));const St=h.ProxyChannel.fromService(Ee.get(W.IExternalTerminalMainService));Pe.registerChannel("externalTerminal",St);const ht=new X.LogLevelChannel(Ee.get(B.ILogService),Ee.get(B.ILoggerService));Pe.registerChannel("logLevel",ht),Re.then(Qe=>Qe.registerChannel("logLevel",ht));const He=new X.LoggerChannel(Ee.get(B.ILoggerService));Pe.registerChannel("logger",He),Re.then(Qe=>Qe.registerChannel("logger",He));const ot=new b.ElectronExtensionHostDebugBroadcastChannel(Ee.get(ue.IWindowsMainService));Pe.registerChannel("extensionhostdebugservice",ot);const dt=h.ProxyChannel.fromService(Ee.get(K.IExtensionHostStarter));Pe.registerChannel(K.ipcExtensionHostStarterChannelName,dt)}async openFirstWindow(Ee,Pe){const Re=this.windowsMainService=Ee.get(ue.IWindowsMainService),Ce=Ee.get(Ne.IURLService),We=Ee.get(oe.INativeHostMainService);this.lifecycleMainService.phase=2;const $e=[],Ze=[...this.environmentMainService.args["open-url"]?this.environmentMainService.args._urls||[]:[],...global.getOpenUrls()||[]].map(He=>{try{return{uri:u.URI.parse(He),url:He}}catch{return}}).filter(He=>{if(!He||this.shouldBlockURI(He.uri))return!1;const ot=this.getWindowOpenableFromProtocolLink(He.uri);return ot?($e.push(ot),!1):!0}),et=this,Ue=this.environmentMainService,Ve=this.productService,Ge=this.logService;Ce.registerHandler({async handleURL(He,ot){if(Ge.trace("app#handleURL: ",He.toString(!0),ot),He.scheme===Ve.urlProtocol&&He.path==="workspace"&&(He=He.with({authority:"file",path:u.URI.parse(He.query).path,query:""})),et.shouldBlockURI(He))return!0;let dt=!1;const Qe=new URLSearchParams(He.query);Qe.get("windowId")==="_blank"&&(Qe.delete("windowId"),He=He.with({query:Qe.toString()}),dt=!0),dt||=f.isMacintosh&&Re.getWindowCount()===0;const _t=Qe.get("continueOn");_t!==null&&(Ue.continueOn=_t??void 0,Qe.delete("continueOn"),He=He.with({query:Qe.toString()}));const Rt=et.getWindowOpenableFromProtocolLink(He);if(Ge.trace("app#handleURL: windowOpenableFromProtocolLink = ",Rt),Rt){const[Lt]=await Re.open({context:5,cli:{...Ue.args},urisToOpen:[Rt],forceNewWindow:dt,gotoLineMode:!0});return Lt.focus(),!0}if(dt){const[Lt]=await Re.open({context:5,cli:{...Ue.args},forceNewWindow:!0,forceEmpty:!0,gotoLineMode:!0,remoteAuthority:(0,De.getRemoteAuthority)(He)});return await Lt.ready(),Ce.open(He,ot)}return!1}});const Xe=this._register(new be.ActiveWindowManager({onDidOpenWindow:We.onDidOpenWindow,onDidFocusWindow:We.onDidFocusWindow,getActiveWindowId:()=>We.getActiveWindowId(-1)})),st=new h.StaticRouter(He=>Xe.getActiveClientId().then(ot=>He===ot)),ct=new xe.URLHandlerRouter(st),kt=Pe.getChannel("urlHandler",ct);Ce.registerHandler(new xe.URLHandlerChannelClient(kt)),this._register(new Ke.ElectronURLListener(Ze,Ce,Re,this.environmentMainService,this.productService));const Ye=this.environmentMainService.args,pt=global.macOpenFiles,wt=(0,Q.isLaunchedFromCli)(process.env)?0:4,yt=Ye._.length,Mt=!!Ye["folder-uri"],Dt=!!Ye["file-uri"],vt=Ye["skip-add-to-recently-opened"]===!0,ut=Ye.wait&&Ye.waitMarkerFilePath?u.URI.file(Ye.waitMarkerFilePath):void 0,bt=Ye.remote||void 0,St=Ye.profile,ht=Ye["profile-temp"];if($e.length>0)return Re.open({context:wt,cli:Ye,urisToOpen:$e,gotoLineMode:!0,initialStartup:!0});if(!yt&&!Mt&&!Dt){if(Ye["new-window"]||St||ht)return Re.open({context:wt,cli:Ye,forceNewWindow:!0,forceEmpty:!0,noRecentEntry:vt,waitMarkerFileURI:ut,initialStartup:!0,remoteAuthority:bt,forceProfile:St,forceTempProfile:ht});if(pt.length)return Re.open({context:1,cli:Ye,urisToOpen:pt.map(He=>(0,Le.hasWorkspaceFileExtension)(He)?{workspaceUri:u.URI.file(He)}:{fileUri:u.URI.file(He)}),noRecentEntry:vt,waitMarkerFileURI:ut,initialStartup:!0})}return Re.open({context:wt,cli:Ye,forceNewWindow:Ye["new-window"]||!yt&&Ye["unity-launch"],diffMode:Ye.diff,mergeMode:Ye.merge,noRecentEntry:vt,waitMarkerFileURI:ut,gotoLineMode:Ye.goto,initialStartup:!0,remoteAuthority:bt,forceProfile:St,forceTempProfile:ht})}shouldBlockURI(Ee){return!!(Ee.authority===d.Schemas.file&&f.isWindows&&C.dialog.showMessageBoxSync({title:this.productService.nameLong,type:"question",buttons:[(0,I.mnemonicButtonLabel)((0,n.localize)(0,null)),(0,I.mnemonicButtonLabel)((0,n.localize)(1,null))],defaultId:0,cancelId:1,message:(0,n.localize)(2,null,(0,I.getPathLabel)(Ee,{os:f.OS,tildify:this.environmentMainService}),this.productService.nameShort),detail:(0,n.localize)(3,null),noLink:!0})===1)}getWindowOpenableFromProtocolLink(Ee){if(!!Ee.path){if(Ee.authority===d.Schemas.file){const Pe=u.URI.file(Ee.fsPath);return(0,Le.hasWorkspaceFileExtension)(Pe)?{workspaceUri:Pe}:{fileUri:Pe}}else if(Ee.authority===d.Schemas.vscodeRemote){const Pe=Ee.path.indexOf(w.posix.sep,1);if(Pe!==-1){const Re=Ee.path.substring(1,Pe),Ce=Ee.path.substring(Pe),We=u.URI.from({scheme:d.Schemas.vscodeRemote,authority:Re,path:Ce,query:Ee.query,fragment:Ee.fragment});return(0,Le.hasWorkspaceFileExtension)(Ce)?{workspaceUri:We}:/:[\d]+$/.test(Ce)?{fileUri:We}:{folderUri:We}}}}}afterWindowOpen(Ee,Pe){const Re=Ee.get(Me.ITelemetryService),Ce=Ee.get(Se.IUpdateService);this.lifecycleMainService.phase=3,this.handleSharedProcessErrors(Re,Pe),this.installMutex(),C.protocol.registerHttpProtocol(d.Schemas.vscodeRemoteResource,(We,$e)=>{$e({url:We.url.replace(/^vscode-remote-resource:/,"http:"),method:We.method})}),(Ce instanceof _e.Win32UpdateService||Ce instanceof Oe.LinuxUpdateService||Ce instanceof Fe.DarwinUpdateService)&&Ce.initialize(),this.resolveShellEnvironment(this.environmentMainService.args,process.env,!0),this.updateCrashReporterEnablement()}async installMutex(){const Ee=this.productService.win32MutexName;if(f.isWindows&&Ee)try{const Pe=await new Promise((Ce,We)=>{j(["windows-mutex"],Ce,We)}),Re=new Pe.Mutex(Ee);(0,m.once)(this.lifecycleMainService.onWillShutdown)(()=>Re.release())}catch(Pe){this.logService.error(Pe)}}handleSharedProcessErrors(Ee,Pe){let Re=!1;(0,m.once)(this.lifecycleMainService.onWillShutdown)(()=>Re=!0),this._register(Pe.onDidError(({type:Ce,details:We})=>{let $e;switch(Ce){case 1:$e="SharedProcess: detected unresponsive window";break;case 2:$e=`SharedProcess: renderer process gone (detail: ${We?.reason??"<unknown>"}, code: ${We?.exitCode??"<unknown>"})`;break;case 3:$e=`SharedProcess: failed to load (detail: ${We?.reason??"<unknown>"}, code: ${We?.exitCode??"<unknown>"})`;break}(0,P.onUnexpectedError)(new Error($e)),Ee.publicLog2("sharedprocesserror",{type:Ce,reason:We?.reason,code:We?.exitCode,visible:Pe.isVisible(),shuttingdown:Re})}))}async resolveShellEnvironment(Ee,Pe,Re){try{return await(0,re.getResolvedShellEnv)(this.logService,Ee,Pe)}catch(Ce){const We=(0,R.toErrorMessage)(Ce);Re?this.windowsMainService?.sendToFocused("vscode:showResolveShellEnvError",We):this.logService.error(We)}return{}}async updateCrashReporterEnablement(){try{const Pe=(await this.fileService.readFile(this.environmentMainService.argvResource)).value.toString(),Re=JSON.parse((0,y.stripComments)(Pe)),We=(0,de.getTelemetryLevel)(this.configurationService)>=1;if(Re["enable-crash-reporter"]===void 0){const $e=["","	// Allows to disable crash reporting.","	// Should restart the app if the value is changed.",`	"enable-crash-reporter": ${We},`,"","	// Unique id used for correlating crash reports sent from this instance.","	// Do not edit this value.",`	"crash-reporter-id": "${(0,S.generateUuid)()}"`,"}"],Ze=Pe.substring(0,Pe.length-2).concat(`,
`,$e.join(`
`));await this.fileService.writeFile(this.environmentMainService.argvResource,L.VSBuffer.fromString(Ze))}else{const $e=Pe.replace(/"enable-crash-reporter": .*,/,`"enable-crash-reporter": ${We},`);$e!==Pe&&await this.fileService.writeFile(this.environmentMainService.argvResource,L.VSBuffer.fromString($e))}}catch(Ee){this.logService.error(Ee)}}};Pt=we([ie(2,M.IInstantiationService),ie(3,B.ILogService),ie(4,x.IEnvironmentMainService),ie(5,Y.ILifecycleMainService),ie(6,c.IConfigurationService),ie(7,Ae.IStateMainService),ie(8,H.IFileService),ie(9,ge.IProductService),ie(10,at.IUserDataProfilesMainService)],Pt),e.CodeApplication=Pt}),define(ee[276],te([0,1,37,8,284,2,6]),function(j,e,C,t,k,L,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NativePolicyService=void 0;let P=class extends C.AbstractPolicyService{constructor(m,y){super(),this.logService=m,this.productName=y,this.throttler=new t.Throttler,this.watcher=this._register(new L.MutableDisposable)}async _updatePolicyDefinitions(m){this.logService.trace(`NativePolicyService#_updatePolicyDefinitions - Found ${Object.keys(m).length} policy definitions`),await this.throttler.queue(()=>new Promise((y,I)=>{try{this.watcher.value=(0,k.createWatcher)(this.productName,m,E=>{this._onDidPolicyChange(E),y()})}catch(E){this.logService.error("NativePolicyService#_updatePolicyDefinitions - Error creating watcher:",E),I(E)}}))}_onDidPolicyChange(m){this.logService.trace(`NativePolicyService#_onDidPolicyChange - Updated policy values: ${JSON.stringify(m)}`);for(const y in m){const I=m[y];I===void 0?this.policies.delete(y):this.policies.set(y,I)}this._onDidChange.fire(Object.keys(m))}};P=we([ie(0,R.ILogService)],P),e.NativePolicyService=P}),define(ee[277],te([0,1,226,8,17,15,2,12,18,35,112,6,225,285]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestService=void 0;let w=class extends R.Disposable{constructor(v,u,S){super(),this.environmentService=u,this.logService=S,this.configure(v.getValue()),this._register(v.onDidChangeConfiguration(()=>this.configure(v.getValue()),this))}configure(v){this.proxyUrl=v.http&&v.http.proxy,this.strictSSL=!!(v.http&&v.http.proxyStrictSSL),this.authorization=v.http&&v.http.proxyAuthorization}async request(v,u){this.logService.trace("RequestService#request (node) - begin",v.url);const{proxyUrl:S,strictSSL:g}=this;let h;try{h=await(0,y.getResolvedShellEnv)(this.logService,this.environmentService.args,process.env)}catch(s){this.shellEnvErrorLogged||(this.shellEnvErrorLogged=!0,this.logService.error("RequestService#request (node) resolving shell environment failed",s))}const l={...process.env,...h},i=v.agent?v.agent:await(0,E.getProxyAgent)(v.url||"",l,{proxyUrl:S,strictSSL:g});v.agent=i,v.strictSSL=g,this.authorization&&(v.headers={...v.headers||{},"Proxy-Authorization":this.authorization});try{const s=await this._request(v,u);return this.logService.trace("RequestService#request (node) - success",v.url),s}catch(s){throw this.logService.trace("RequestService#request (node) - error",v.url,s),s}}async getNodeRequest(v){return((0,C.parse)(v.url).protocol==="https:"?await new Promise((g,h)=>{j(["https"],g,h)}):await new Promise((g,h)=>{j(["http"],g,h)})).request}_request(v,u){return t.Promises.withAsyncBody(async(S,g)=>{const h=(0,C.parse)(v.url),l=v.getRawRequest?v.getRawRequest(v):await this.getNodeRequest(v),i={hostname:h.hostname,port:h.port?parseInt(h.port):h.protocol==="https:"?443:80,protocol:h.protocol,path:h.path,method:v.type||"GET",headers:v.headers,agent:v.agent,rejectUnauthorized:(0,P.isBoolean)(v.strictSSL)?v.strictSSL:!0};v.user&&v.password&&(i.auth=v.user+":"+v.password);const s=l(i,n=>{const a=(0,P.isNumber)(v.followRedirects)?v.followRedirects:3;if(n.statusCode&&n.statusCode>=300&&n.statusCode<400&&a>0&&n.headers.location)this._request({...v,url:n.headers.location,followRedirects:a-1},u).then(S,g);else{let r=n;!v.isChromiumNetwork&&n.headers["content-encoding"]==="gzip"&&(r=n.pipe((0,d.createGunzip)())),S({res:n,stream:(0,k.streamToBufferReadableStream)(r)})}});s.on("error",g),v.timeout&&s.setTimeout(v.timeout),v.isChromiumNetwork&&s.removeHeader("Content-Length"),v.data&&typeof v.data=="string"&&s.write(v.data),s.end(),u.onCancellationRequested(()=>{s.abort(),g(new L.CancellationError)})})}async resolveProxy(v){}};w=we([ie(0,p.IConfigurationService),ie(1,m.INativeEnvironmentService),ie(2,I.ILogService)],w),e.RequestService=w}),define(ee[278],te([0,1,13,277]),function(j,e,C,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestMainService=void 0;function k(R){return C.net.request}class L extends t.RequestService{request(P,p){return super.request({...P||{},getRawRequest:k,isChromiumNetwork:!0},p)}}e.RequestMainService=L}),define(ee[286],te([0,1,13,40,7,24,8,45,15,30,50,34,14,9,73,4,33,26,23,47,83,275,10,18,219,232,27,61,184,16,205,86,70,201,85,21,208,6,211,63,19,64,259,115,240,55,278,88,227,36,231,56,66,51,37,276,213,2,42,245,38,241]),function(j,e,C,t,k,L,R,P,p,m,y,I,E,d,w,f,v,u,S,g,h,l,i,s,n,a,r,c,o,b,D,A,N,G,ae,x,Q,re,ne,fe,K,le,W,O,U,H,se,$,z,M,T,F,_,q,Y,B,X,J,oe,ge,De){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class Te{main(){try{this.startup()}catch(ve){console.error(ve.message),C.app.exit(1)}}async startup(){(0,p.setUnexpectedErrorHandler)(Ie=>console.error(Ie));const[ve,pe,ye,Me,Z,he,de,Se]=this.createServices();try{try{await this.initServices(ye,Se,Me,Z,de)}catch(Ie){throw this.handleStartupDataDirError(ye,de.nameLong,Ie),Ie}await ve.invokeFunction(async Ie=>{const Fe=Ie.get(re.ILogService),Oe=Ie.get(x.ILifecycleMainService),qe=Ie.get(b.IFileService),_e=Ie.get(re.ILoggerService),Ne=await this.claimInstance(Fe,ye,Oe,ve,de,!0);return S.Promises.writeFile(ye.mainLockfile,String(process.pid)).catch(xe=>{Fe.warn(`Error writing main lockfile: ${xe.stack}`)}),he.logger=_e.createLogger(k.URI.file((0,d.join)(ye.logsPath,"main.log")),{name:"main"}),(0,y.once)(Oe.onWillShutdown)(xe=>{qe.dispose(),Me.dispose(),xe.join(S.Promises.unlink(ye.mainLockfile).catch(()=>{}))}),ve.createInstance(l.CodeApplication,Ne,pe).startup()})}catch(Ie){ve.invokeFunction(this.quit,Ie)}}createServices(){const ve=new ae.ServiceCollection,pe=new J.DisposableStore;process.once("exit",()=>pe.dispose());const ye={_serviceBrand:void 0,...fe.default};ve.set(K.IProductService,ye);const Me=new r.EnvironmentMainService(this.resolveArgs(),ye),Z=this.patchEnvironment(Me);ve.set(r.IEnvironmentMainService,Me);const he=new Q.BufferLogService,de=pe.add(new re.MultiplexLogService([new re.ConsoleMainLogger((0,re.getLogLevel)(Me)),he]));ve.set(re.ILogService,de);const Se=new D.FileService(de);ve.set(b.IFileService,Se);const Ie=new A.DiskFileSystemProvider(de);Se.registerProvider(E.Schemas.file,Ie);const Fe=new ge.UriIdentityService(Se);ve.set(oe.IUriIdentityService,Fe),ve.set(re.ILoggerService,new ne.LoggerService(de));const Oe=new T.StateMainService(Me,de,Se);ve.set(M.IStateMainService,Oe);const qe=new q.UserDataProfilesMainService(Oe,Fe,Me,Se,de);ve.set(q.IUserDataProfilesMainService,qe);const _e=f.isWindows&&ye.win32RegValueName?pe.add(new B.NativePolicyService(de,ye.win32RegValueName)):Me.policyFile?pe.add(new X.FilePolicyService(Me.policyFile,Se,de)):new Y.NullPolicyService;ve.set(Y.IPolicyService,_e);const Ne=new n.ConfigurationService(qe.defaultProfile.settingsResource,Se,_e,de);return ve.set(s.IConfigurationService,Ne),ve.set(x.ILifecycleMainService,new N.SyncDescriptor(x.LifecycleMainService,void 0,!1)),ve.set(H.IRequestService,new N.SyncDescriptor(se.RequestMainService,void 0,!0)),ve.set(_.IThemeMainService,new N.SyncDescriptor(_.ThemeMainService)),ve.set($.ISignService,new N.SyncDescriptor(z.SignService,void 0,!1)),ve.set(O.ITunnelService,new N.SyncDescriptor(U.TunnelService)),ve.set(le.IProtocolMainService,new W.ProtocolMainService(Me,qe,de)),[new G.InstantiationService(ve,!0),Z,Me,Ne,Oe,he,ye,qe]}patchEnvironment(ve){const pe={VSCODE_IPC_HOOK:ve.mainIPCHandle};return["VSCODE_NLS_CONFIG","VSCODE_PORTABLE"].forEach(ye=>{const Me=process.env[ye];typeof Me=="string"&&(pe[ye]=Me)}),Object.assign(process.env,pe),pe}async initServices(ve,pe,ye,Me,Z){await R.Promises.settled([Promise.all([ve.extensionsPath,ve.codeCachePath,ve.logsPath,pe.defaultProfile.globalStorageHome.fsPath,ve.workspaceStorageHome.fsPath,ve.localHistoryHome.fsPath,ve.backupHome].map(he=>he?S.Promises.mkdir(he,{recursive:!0}):void 0)),Me.init(),ye.initialize()]),pe.setEnablement(Z.quality!=="stable"||ye.getValue(De.PROFILES_ENABLEMENT_CONFIG))}async claimInstance(ve,pe,ye,Me,Z,he){let de;try{(0,w.mark)("code/willStartMainServer"),de=await(0,h.serve)(pe.mainIPCHandle),(0,w.mark)("code/didStartMainServer"),(0,y.once)(ye.onWillShutdown)(()=>de.dispose())}catch(Se){if(Se.code!=="EADDRINUSE")throw this.handleStartupDataDirError(pe,Z.nameLong,Se),Se;let Ie;try{Ie=await(0,h.connect)(pe.mainIPCHandle,"main")}catch(_e){if(!he||f.isWindows||_e.code!=="ECONNREFUSED")throw _e.code==="EPERM"&&this.showStartupWarningDialog((0,i.localize)(0,null,Z.nameShort),(0,i.localize)(1,null),Z.nameLong),_e;try{(0,t.unlinkSync)(pe.mainIPCHandle)}catch(Ne){throw ve.warn("Could not delete obsolete instance handle",Ne),Ne}return this.claimInstance(ve,pe,ye,Me,Z,!1)}if(pe.extensionTestsLocationURI&&!pe.debugExtensionHost.break){const _e=`Running extension tests from the command line is currently only supported if no other instance of ${Z.nameShort} is running.`;throw ve.error(_e),Ie.dispose(),new Error(_e)}let Fe;!pe.args.wait&&!pe.args.status&&(Fe=setTimeout(()=>{this.showStartupWarningDialog((0,i.localize)(2,null,Z.nameShort),(0,i.localize)(3,null),Z.nameLong)},1e4));const Oe=g.ProxyChannel.toService(Ie.getChannel("launch"),{disableMarshalling:!0}),qe=g.ProxyChannel.toService(Ie.getChannel("diagnostics"),{disableMarshalling:!0});if(pe.args.status)return Me.invokeFunction(async()=>{const _e=new a.DiagnosticsService(F.NullTelemetryService,Z),Ne=await qe.getMainDiagnostics(),xe=await qe.getRemoteDiagnostics({includeProcesses:!0,includeWorkspaceMetadata:!0}),ze=await _e.getDiagnostics(Ne,xe);throw console.log(ze),new p.ExpectedError});throw f.isWindows&&await this.windowsAllowSetForegroundWindow(Oe,ve),ve.trace("Sending env to running instance..."),await Oe.start(pe.args,process.env),Ie.dispose(),Fe&&clearTimeout(Fe),new p.ExpectedError("Sent env to running instance. Terminating...")}if(pe.args.status)throw ve.warn(`Warning: The --status argument can only be used if ${Z.nameShort} is already running. Please run it again after {0} has started.`),new p.ExpectedError("Terminating...");return process.env.VSCODE_PID=String(process.pid),de}handleStartupDataDirError(ve,pe,ye){if(ye.code==="EACCES"||ye.code==="EPERM"){const Me=(0,L.coalesce)([ve.userDataPath,ve.extensionsPath,h.XDG_RUNTIME_DIR]).map(Z=>(0,I.getPathLabel)(k.URI.file(Z),{os:f.OS,tildify:ve}));this.showStartupWarningDialog((0,i.localize)(4,null),(0,i.localize)(5,null,(0,P.toErrorMessage)(ye),Me.join(`
`)),pe)}}showStartupWarningDialog(ve,pe,ye){C.dialog.showMessageBoxSync({title:ye,type:"warning",buttons:[(0,I.mnemonicButtonLabel)((0,i.localize)(6,null))],message:ve,detail:pe,defaultId:0,noLink:!0})}async windowsAllowSetForegroundWindow(ve,pe){if(f.isWindows){const ye=await ve.getMainProcessId();pe.trace("Sending some foreground love to the running instance:",ye);try{(await new Promise((Me,Z)=>{j(["windows-foreground-love"],Me,Z)})).allowSetForegroundWindow(ye)}catch(Me){pe.error(Me)}}}quit(ve,pe){const ye=ve.get(re.ILogService),Me=ve.get(x.ILifecycleMainService);let Z=0;pe&&(pe.isExpected?pe.message&&ye.trace(pe.message):(Z=1,pe.stack?ye.error(pe.stack):ye.error(`Startup error: ${pe.toString()}`))),Me.kill(Z)}resolveArgs(){const ve=this.validatePaths((0,c.parseMainProcessArgv)(process.argv));if(ve.wait&&!ve.waitMarkerFilePath){const pe=(0,o.createWaitMarkerFileSync)(ve.verbose);pe&&((0,c.addArg)(process.argv,"--waitMarkerFilePath",pe),ve.waitMarkerFilePath=pe)}return ve}validatePaths(ve){if(ve["open-url"]&&(ve._urls=ve._,ve._=[]),!ve.remote){const pe=this.doValidatePaths(ve._,ve.goto);ve._=pe}return ve}doValidatePaths(ve,pe){const ye=(0,v.cwd)(),Me=ve.map(de=>{let Se=String(de),Ie;pe&&(Ie=(0,m.parseLineAndColumnAware)(Se),Se=Ie.path),Se&&(Se=this.preparePath(ye,Se));const Fe=(0,m.sanitizeFilePath)(Se,ye),Oe=(0,d.basename)(Fe);return Oe&&!(0,m.isValidBasename)(Oe)?null:pe&&Ie?(Ie.path=Fe,this.toPath(Ie)):Fe}),Z=f.isWindows||f.isMacintosh,he=(0,L.distinct)(Me,de=>de&&Z?de.toLowerCase():de||"");return(0,L.coalesce)(he)}preparePath(ve,pe){return f.isWindows&&(pe=(0,u.rtrim)(pe,'"')),pe=(0,u.trim)((0,u.trim)(pe," "),"	"),f.isWindows&&(pe=(0,d.resolve)(ve,pe),pe=(0,u.rtrim)(pe,".")),pe}toPath(ve){const pe=[ve.path];return typeof ve.line=="number"&&pe.push(String(ve.line)),typeof ve.column=="number"&&pe.push(String(ve.column)),pe.join(":")}}new Te().main()})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/d2c422ca15f1fbc976eed3e02e3392bbb39c5824/core/vs\code\electron-main\main.js.map
