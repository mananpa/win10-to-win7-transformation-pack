{"version":3,"file":"extension.js","mappings":"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R,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,MACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,QACR,KAAQ,SAC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","sources":[".././node_modules/fs-ext/fs-ext.js",".././node_modules/ini-win/lib/ini.js",".././node_modules/jsonschema/lib/attribute.js",".././node_modules/jsonschema/lib/helpers.js",".././node_modules/jsonschema/lib/index.js",".././node_modules/jsonschema/lib/scan.js",".././node_modules/jsonschema/lib/validator.js",".././node_modules/native-reg/lib/index.js",".././node_modules/node-gyp-build/index.js",".././node_modules/node-gyp-build/node-gyp-build.js",".././node_modules/fs-ext/build/Release/fs-ext.node",".././node_modules/semver/classes/comparator.js",".././node_modules/semver/classes/range.js",".././node_modules/semver/classes/semver.js",".././node_modules/semver/functions/clean.js",".././node_modules/semver/functions/cmp.js",".././node_modules/semver/functions/coerce.js",".././node_modules/semver/functions/compare-build.js",".././node_modules/semver/functions/compare-loose.js",".././node_modules/semver/functions/compare.js",".././node_modules/semver/functions/diff.js",".././node_modules/semver/functions/eq.js",".././node_modules/semver/functions/gt.js",".././node_modules/semver/functions/gte.js",".././node_modules/semver/functions/inc.js",".././node_modules/semver/functions/lt.js",".././node_modules/semver/functions/lte.js",".././node_modules/semver/functions/major.js",".././node_modules/semver/functions/minor.js",".././node_modules/semver/functions/neq.js",".././node_modules/semver/functions/parse.js",".././node_modules/semver/functions/patch.js",".././node_modules/semver/functions/prerelease.js",".././node_modules/semver/functions/rcompare.js",".././node_modules/semver/functions/rsort.js",".././node_modules/semver/functions/satisfies.js",".././node_modules/semver/functions/sort.js",".././node_modules/semver/functions/valid.js",".././node_modules/semver/index.js",".././node_modules/semver/internal/constants.js",".././node_modules/semver/internal/debug.js",".././node_modules/semver/internal/identifiers.js",".././node_modules/semver/internal/lrucache.js",".././node_modules/semver/internal/parse-options.js",".././node_modules/semver/internal/re.js",".././node_modules/semver/ranges/gtr.js",".././node_modules/semver/ranges/intersects.js",".././node_modules/semver/ranges/ltr.js",".././node_modules/semver/ranges/max-satisfying.js",".././node_modules/semver/ranges/min-satisfying.js",".././node_modules/semver/ranges/min-version.js",".././node_modules/semver/ranges/outside.js",".././node_modules/semver/ranges/simplify.js",".././node_modules/semver/ranges/subset.js",".././node_modules/semver/ranges/to-comparators.js",".././node_modules/semver/ranges/valid.js",".././node_modules/tr46/index.js",".././node_modules/vscode-nls-i18n/dist/index.js",".././node_modules/webidl-conversions/lib/index.js",".././node_modules/whatwg-url/lib/URL-impl.js",".././node_modules/whatwg-url/lib/URL.js",".././node_modules/whatwg-url/lib/public-api.js",".././node_modules/whatwg-url/lib/url-state-machine.js",".././node_modules/whatwg-url/lib/utils.js","../external commonjs \"vscode\"","../external node-commonjs \"assert\"","../external node-commonjs \"fs\"","../external node-commonjs \"os\"","../external node-commonjs \"path\"","../external node-commonjs \"punycode\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../external node-commonjs \"stream\"","../external node-commonjs \"http\"","../external node-commonjs \"https\"","../external node-commonjs \"zlib\"",".././node_modules/node-fetch/lib/index.mjs",".././src/config.ts","../external node-commonjs \"child_process\"",".././src/logOutputChannel.ts",".././src/ini.ts",".././src/utils/appSettingsUtils.ts",".././src/utils/compilerUtils.ts",".././src/utils/editorWorkspaceUtils.ts",".././src/utils/modConfigUtils.ts",".././node_modules/js-yaml/dist/js-yaml.mjs",".././src/utils/modSourceUtils.ts",".././src/utils/trayProgramUtils.ts",".././src/utils/userProfileUtils.ts",".././src/extension.ts",".././src/storagePaths.ts"],"sourcesContent":["// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\"use strict\";\n\nvar binding = require('./build/Release/fs-ext');\n\n// Used by flock\nfunction stringToFlockFlags(flag) {\n  // Only mess with strings\n  if (typeof flag !== 'string') {\n    return flag;\n  }\n  switch (flag) {\n    case 'sh':\n      return binding.constants.LOCK_SH;\n\n    case 'ex':\n      return binding.constants.LOCK_EX;\n\n    case 'shnb':\n      return binding.constants.LOCK_SH | binding.constants.LOCK_NB;\n\n    case 'exnb':\n      return binding.constants.LOCK_EX | binding.constants.LOCK_NB;\n\n    case 'un':\n      return binding.constants.LOCK_UN;\n\n    default:\n      throw new Error('Unknown flock flag: ' + flag);\n  }\n}\n\n// used by Fcntl\nfunction stringToFcntlFlags(flag) {\n  if (typeof flag !== 'string') {\n    return flag;\n  }\n\n  switch (flag) {\n    case 'getfd':\n      return binding.constants.F_GETFD;\n\n    case 'setfd':\n      return binding.constants.F_SETFD;\n\n    case 'setlk':\n      return binding.constants.F_SETLK;\n\n    case 'setlkw':\n      return binding.constants.F_SETLKW;\n\n    case 'getlk':\n      return binding.constants.F_GETLK;\n\n    default:\n      throw new Error('Unknown fcntl flag: ' + flag);\n  }\n}\n\nfunction noop() {}\n\nexports.flock = function(fd, flags, callback) {\n  callback = arguments[arguments.length - 1];\n  if (typeof(callback) !== 'function') {\n    callback = noop;\n  }\n\n  var oper = stringToFlockFlags(flags);\n\n  binding.flock(fd, oper, callback);\n};\n\nexports.flockSync = function(fd, flags) {\n  var oper = stringToFlockFlags(flags);\n\n  return binding.flock(fd, oper);\n};\n\nexports.fcntl = function(fd, cmd, arg, callback) {\n  cmd = stringToFcntlFlags(cmd);\n  if (arguments.length < 4) {\n    callback = arg;\n    arg = 0;\n  }\n  if (!arg) arg = 0;\n  return binding.fcntl(fd, cmd, arg, callback);\n};\n\nexports.fcntlSync = function(fd, cmd, arg) {\n  cmd = stringToFcntlFlags(cmd);\n  if (!arg) arg = 0;\n  return binding.fcntl(fd, cmd, arg);\n};\n\nexports.seek = function(fd, position, whence, callback) {\n  callback = arguments[arguments.length - 1];\n  if (typeof(callback) !== 'function') {\n    callback = noop;\n  }\n\n  binding.seek(fd, position, whence, callback);\n};\n\nexports.seekSync = function(fd, position, whence) {\n  return binding.seek(fd, position, whence);\n};\n\nexports.statVFS = function(path, callback) {\n  path = path || '/';\n  return binding.statVFS(path, callback);\n};\n\nexports.constants = binding.constants;\n","const { hasOwnProperty } = Object.prototype\r\n\r\n/* istanbul ignore next */\r\nconst eol = typeof process !== 'undefined' &&\r\n  process.platform === 'win32' ? '\\r\\n' : '\\n'\r\n\r\nconst encode = (obj, opt) => {\r\n  const children = []\r\n  let out = ''\r\n\r\n  if (typeof opt === 'string') {\r\n    opt = {\r\n      section: opt,\r\n      whitespace: false,\r\n    }\r\n  } else {\r\n    opt = opt || Object.create(null)\r\n    opt.whitespace = opt.whitespace === true\r\n  }\r\n\r\n  const separator = opt.whitespace ? ' = ' : '='\r\n\r\n  for (const k of Object.keys(obj)) {\r\n    const val = obj[k]\r\n    if (val && Array.isArray(val)) {\r\n      for (const [i, item] of val.entries())\r\n        out += safe(k + '[' + i + ']') + separator + safe(item) + eol\r\n    } else if (val && typeof val === 'object')\r\n      children.push(k)\r\n    else\r\n      out += safe(k) + separator + safe(val) + eol\r\n  }\r\n\r\n  if (opt.section && out.length)\r\n    out = '[' + safe(opt.section) + ']' + eol + out\r\n\r\n  for (const k of children) {\r\n    const nk = dotSplit(k).join('\\\\.')\r\n    const section = (opt.section ? opt.section + '.' : '') + nk\r\n    const { whitespace } = opt\r\n    const child = encode(obj[k], {\r\n      section,\r\n      whitespace,\r\n    })\r\n    if (out.length && child.length)\r\n      out += eol\r\n\r\n    out += child\r\n  }\r\n\r\n  return out\r\n}\r\n\r\nconst dotSplit = str =>\r\n  str.replace(/\\1/g, '\\u0002LITERAL\\\\1LITERAL\\u0002')\r\n    .replace(/\\\\\\./g, '\\u0001')\r\n    .split(/\\./)\r\n    .map(part =>\r\n      part.replace(/\\1/g, '\\\\.')\r\n        .replace(/\\2LITERAL\\\\1LITERAL\\2/g, '\\u0001'))\r\n\r\nconst decode = str => {\r\n  const out = Object.create(null)\r\n  let p = out\r\n  let section = null\r\n  //          section             |key      = value\r\n  const re = /^\\s*\\[([^\\]]*)\\]\\s*$|^([^=]+)(=(.*))?$/i\r\n  const lines = str.split(/[\\r\\n]+/g)\r\n\r\n  for (const line of lines) {\r\n    if (!line || line.match(/^\\s*(;|$)/))\r\n      continue\r\n    const match = line.match(re)\r\n    if (!match)\r\n      continue\r\n    if (match[1] !== undefined) {\r\n      section = unsafe(match[1])\r\n      if (section === '__proto__') {\r\n        // not allowed\r\n        // keep parsing the section, but don't attach it.\r\n        p = Object.create(null)\r\n        continue\r\n      }\r\n      p = out[section] = out[section] || Object.create(null)\r\n      continue\r\n    }\r\n    const key = unsafe(match[2])\r\n    if (key === '__proto__')\r\n      continue\r\n    const value = match[3] ? unsafe(match[4]) : ''\r\n\r\n    if (!hasOwnProperty.call(p, key))\r\n      p[key] = value\r\n  }\r\n\r\n  // {a:{y:1},\"a.b\":{x:2}} --> {a:{y:1,b:{x:2}}}\r\n  // use a filter to return the keys that have to be deleted.\r\n  const remove = []\r\n  for (const k of Object.keys(out)) {\r\n    if (!hasOwnProperty.call(out, k) ||\r\n        typeof out[k] !== 'object' ||\r\n        Array.isArray(out[k]))\r\n      continue\r\n\r\n    // see if the parent section is also an object.\r\n    // if so, add it to that, and mark this one for deletion\r\n    const parts = dotSplit(k)\r\n    let p = out\r\n    const l = parts.pop()\r\n    const nl = l.replace(/\\\\\\./g, '.')\r\n    for (const part of parts) {\r\n      if (part === '__proto__')\r\n        continue\r\n      if (!hasOwnProperty.call(p, part) || typeof p[part] !== 'object')\r\n        p[part] = Object.create(null)\r\n      p = p[part]\r\n    }\r\n    if (p === out && nl === l)\r\n      continue\r\n\r\n    p[nl] = out[k]\r\n    remove.push(k)\r\n  }\r\n  for (const del of remove)\r\n    delete out[del]\r\n\r\n  return out\r\n}\r\n\r\nconst isQuoted = val =>\r\n  (val.charAt(0) === '\"' && val.slice(-1) === '\"') ||\r\n    (val.charAt(0) === \"'\" && val.slice(-1) === \"'\")\r\n\r\nconst safe = val => {\r\n  val = val.replace(/\\r\\n|\\r|\\n/g, ' ')\r\n  return ((val.length > 1 &&\r\n     isQuoted(val)) ||\r\n    val !== val.trim())\r\n    ? '\"' + val + '\"'\r\n    : val\r\n}\r\n\r\nconst unsafe = (val, doUnesc) => {\r\n  val = (val || '').trim()\r\n  if (isQuoted(val)) {\r\n    // remove the quotes\r\n    val = val.substr(1, val.length - 2)\r\n  }\r\n  return val\r\n}\r\n\r\nmodule.exports = {\r\n  parse: decode,\r\n  decode,\r\n  stringify: encode,\r\n  encode,\r\n  safe,\r\n  unsafe,\r\n}\r\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'additionalItems': true,\n  'then': true,\n  'else': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true,\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      if(!v) return;\n      var id = v.$id || v.id;\n      return id ? ('<' + id + '>') : (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  var throwAll = options.throwAll;\n  options.throwError = false;\n  options.throwAll = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n  options.throwAll = throwAll;\n\n  if (!res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n    ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      var id = v.$id || v.id;\n      if(id) return '<' + id + '>';\n      return(v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var id = v.$id || v.id;\n      var msg = id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n    ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    var id = v.$id || v.id;\n    return id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates \"then\" or \"else\" depending on the result of validating \"if\"\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.if = function validateIf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) return null;\n  if (!helpers.isSchema(schema.if)) throw new Error('Expected \"if\" keyword to be a schema');\n  var ifValid = testSchemaNoThrow.call(this, instance, options, ctx, null, schema.if);\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var res;\n  if(ifValid){\n    if (schema.then === undefined) return;\n    if (!helpers.isSchema(schema.then)) throw new Error('Expected \"then\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.then, options, ctx.makeChild(schema.then));\n    result.importErrors(res);\n  }else{\n    if (schema.else === undefined) return;\n    if (!helpers.isSchema(schema.else)) throw new Error('Expected \"else\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.else, options, ctx.makeChild(schema.else));\n    result.importErrors(res);\n  }\n  return result;\n};\n\nfunction getEnumerableProperty(object, key){\n  // Determine if `key` shows up in `for(var key in object)`\n  // First test Object.hasOwnProperty.call as an optimization: that guarantees it does\n  if(Object.hasOwnProperty.call(object, key)) return object[key];\n  // Test `key in object` as an optimization; false means it won't\n  if(!(key in object)) return;\n  while( (object = Object.getPrototypeOf(object)) ){\n    if(Object.propertyIsEnumerable.call(object, key)) return object[key];\n  }\n}\n\n/**\n * Validates propertyNames\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.propertyNames = function validatePropertyNames (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var subschema = schema.propertyNames!==undefined ? schema.propertyNames : {};\n  if(!helpers.isSchema(subschema)) throw new SchemaError('Expected \"propertyNames\" to be a schema (object or boolean)');\n\n  for (var property in instance) {\n    if(getEnumerableProperty(instance, property) !== undefined){\n      var res = this.validateSchema(property, subschema, options, ctx.makeChild(subschema));\n      result.importErrors(res);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var subschema = properties[property];\n    if(subschema===undefined){\n      continue;\n    }else if(subschema===null){\n      throw new SchemaError('Unexpected null, expected schema in \"properties\"');\n    }\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, subschema, options, ctx);\n    }\n    var prop = getEnumerableProperty(instance, property);\n    var res = this.validateSchema(prop, subschema, options, ctx.makeChild(subschema, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existence tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"is not allowed to have the additional property \" + JSON.stringify(property),\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var subschema = patternProperties[pattern];\n      if(subschema===undefined){\n        continue;\n      }else if(subschema===null){\n        throw new SchemaError('Unexpected null, expected schema in \"patternProperties\"');\n      }\n      try {\n        var regexp = new RegExp(pattern, 'u');\n      } catch(_e) {\n        // In the event the stricter handling causes an error, fall back on the forgiving handling\n        // DEPRECATED\n        regexp = new RegExp(pattern);\n      }\n      if (!regexp.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, subschema, options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], subschema, options, ctx.makeChild(subschema, property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.items===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    if(Array.isArray(schema.items)){\n      var items =  schema.items[i]===undefined ? schema.additionalItems : schema.items[i];\n    }else{\n      var items = schema.items;\n    }\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates the \"contains\" keyword\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.contains = function validateContains (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.contains===undefined) return;\n  if (!helpers.isSchema(schema.contains)) throw new Error('Expected \"contains\" keyword to be a schema');\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = instance.some(function (value, i) {\n    var res = self.validateSchema(value, schema.contains, options, ctx.makeChild(schema.contains, i));\n    return res.errors.length===0;\n  });\n  if(count===false){\n    result.addError({\n      name: 'contains',\n      argument: schema.contains,\n      message: \"must contain an item matching given schema\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    if(!(instance > schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than \" + schema.minimum,\n      });\n    }\n  } else {\n    if(!(instance >= schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than or equal to \" + schema.minimum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    if(!(instance < schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than \" + schema.maximum,\n      });\n    }\n  } else {\n    if(!(instance <= schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than or equal to \" + schema.maximum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMinimum = function validateExclusiveMinimum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMinimum, which is handled by the \"minimum\" keyword.\n  if(typeof schema.exclusiveMinimum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance > schema.exclusiveMinimum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMinimum',\n      argument: schema.exclusiveMinimum,\n      message: \"must be strictly greater than \" + schema.exclusiveMinimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMaximum = function validateExclusiveMaximum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMaximum, which is handled by the \"maximum\" keyword.\n  if(typeof schema.exclusiveMaximum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance < schema.exclusiveMaximum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMaximum',\n      argument: schema.exclusiveMaximum,\n      message: \"must be strictly less than \" + schema.exclusiveMaximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument),\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatibility with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\",\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(getEnumerableProperty(instance, n)===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var pattern = schema.pattern;\n  try {\n    var regexp = new RegExp(pattern, 'u');\n  } catch(_e) {\n    // In the event the stricter handling causes an error, fall back on the forgiving handling\n    // DEPRECATED\n    regexp = new RegExp(pattern);\n  }\n  if (!instance.match(regexp)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (schema.uniqueItems!==true) return;\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var id = type && (type.$id || type.id);\n      var schemaId = id || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, path, name, argument) {\n  if(Array.isArray(path)){\n    this.path = path;\n    this.property = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else if(path !== undefined){\n    this.property = path;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    var id = schema.$id || schema.id;\n    this.schema = id || schema;\n  }\n  if (instance !== undefined) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.options = options;\n  this.path = ctx.path;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.throwFirst = options && options.throwFirst;\n  this.throwAll = options && options.throwAll;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.path);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.path, detail.name, detail.argument);\n  }\n\n  this.errors.push(err);\n  if (this.throwFirst) {\n    throw new ValidatorResultError(this);\n  }else if(this.throwError){\n    throw err;\n  }\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    this.errors = this.errors.concat(res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\nmodule.exports.ValidatorResultError = ValidatorResultError;\nfunction ValidatorResultError(result) {\n  if(Error.captureStackTrace){\n    Error.captureStackTrace(this, ValidatorResultError);\n  }\n  this.instance = result.instance;\n  this.schema = result.schema;\n  this.options = result.options;\n  this.errors = result.errors;\n}\nValidatorResultError.prototype = new Error();\nValidatorResultError.prototype.constructor = ValidatorResultError;\nValidatorResultError.prototype.name = \"Validation Error\";\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  {\n    constructor: {value: SchemaError, enumerable: false},\n    name: {value: 'SchemaError', enumerable: false},\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, path, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  if(Array.isArray(path)){\n    this.path = path;\n    this.propertyPath = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else{\n    this.propertyPath = path;\n  }\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var path = (propertyName===undefined) ? this.path : this.path.concat([propertyName]);\n  var id = schema.$id || schema.id;\n  var base = uri.resolve(this.base, id||'');\n  var ctx = new SchemaContext(schema, this.options, path, base, Object.create(this.schemas));\n  if(id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n};\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  // 7.3.1. Dates, Times, and Duration\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n  'duration': /P(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S)|\\d+(D|M(\\d+D)?|Y(\\d+M(\\d+D)?)?)(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S))?|\\d+W)/i,\n\n  // 7.3.2. Email Addresses\n  // TODO: fix the email production\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'idn-email': /^(\"(?:[!#-\\[\\]-\\u{10FFFF}]|\\\\[\\t -\\u{10FFFF}])*\"|[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*)@([!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*|\\[[!-Z\\^-\\u{10FFFF}]*\\])$/u,\n\n  // 7.3.3. Hostnames\n\n  // 7.3.4. IP Addresses\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  // FIXME whitespace is invalid\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n\n  // 7.3.5. Resource Identifiers\n  // TODO: A more accurate regular expression for \"uri\" goes:\n  // [A-Za-z][+\\-.0-9A-Za-z]*:((/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?)?#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])|/?%[0-9A-Fa-f]{2}|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*(#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?)?\n  'uri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'uri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/,\n  'iri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'iri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\\u{10FFFF}]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/u,\n  'uuid': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n\n  // 7.3.6. uri-template\n  'uri-template': /(%[0-9a-f]{2}|[!#$&(-;=?@\\[\\]_a-z~]|\\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?)*\\})*/iu,\n\n  // 7.3.7. JSON Pointers\n  'json-pointer': /^(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*$/iu,\n  'relative-json-pointer': /^\\d+(#|(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*)$/iu,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n\n  // 7.3.8. regex\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n\n  // Other definitions\n  // \"style\" was removed from JSON Schema in draft-4 and is deprecated\n  'style': /[\\r\\n\\t ]*[^\\r\\n\\t ][^:]*:[\\r\\n\\t ]*[^\\r\\n\\t ;]*[\\r\\n\\t ]*;?/,\n  // \"color\" was removed from JSON Schema in draft-4 and is deprecated\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/,\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e);\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e);\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key]);\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n}\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n  // ~ must be encoded explicitly because hacks\n  // the slash is encoded by encodeURIComponent\n  return a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\nexports.isSchema = function isSchema(val){\n  return (typeof val === 'object' && val) || (typeof val === 'boolean');\n};\n\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidatorResultError = require('./helpers').ValidatorResultError;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","\"use strict\";\n\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var id = schema.$id || schema.id;\n    var ourBase = id ? urilib.resolve(baseuri, id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+ourBase+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', (Array.isArray(schema.items)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', (Array.isArray(schema.extends)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!Array.isArray(schemas)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n};\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar ValidatorResultError = helpers.ValidatorResultError;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.$id || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    // If this schema is already defined, it will be filtered out by the next step\n    this.unresolvedRefs.push(uri);\n  }\n  // Remove newly defined schemas from unresolvedRefs\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!Array.isArray(schemas)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if((typeof schema !== 'boolean' && typeof schema !== 'object') || schema === null){\n    throw new SchemaError('Expected `schema` to be an object or boolean');\n  }\n  if (!options) {\n    options = {};\n  }\n  // This section indexes subschemas in the provided schema, so they don't need to be added with Validator#addSchema\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var id = schema.$id || schema.id;\n  var base = urilib.resolve(options.base||anonymousBase, id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, [], base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if(options.required && instance===undefined){\n    var result = new ValidatorResult(instance, schema, options, ctx);\n    result.addError('is required, but is undefined');\n    return result;\n  }\n  var result = this.validateSchema(instance, schema, options, ctx);\n  if (!result) {\n    throw new Error('Result undefined');\n  }else if(options.throwAll && result.errors.length){\n    throw new ValidatorResultError(result);\n  }\n  return result;\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (Array.isArray(schema['extends'])) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema = shouldResolve(schema);\n  if (switchSchema) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.path, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref = shouldResolve(schema);\n  if(ref) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if(type===undefined){\n    return;\n  }else if(type===null){\n    throw new SchemaError('Unexpected null in \"type\" keyword');\n  }\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance === 'object') && !(Array.isArray(instance)) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.queryValue = exports.getValue = exports.setValueQWORD = exports.setValueDWORD = exports.setValueMULTI_SZ = exports.setValueEXPAND_SZ = exports.setValueSZ = exports.formatQWORD = exports.formatDWORD = exports.formatMultiString = exports.formatString = exports.parseMultiString = exports.parseString = exports.parseValue = exports.closeKey = exports.deleteValue = exports.deleteKeyValue = exports.deleteTree = exports.deleteKey = exports.copyTree = exports.renameKey = exports.setValueRaw = exports.getValueRaw = exports.queryValueRaw = exports.enumValueNames = exports.enumKeyNames = exports.loadAppKey = exports.openCurrentUser = exports.openKey = exports.createKey = exports.isHKEY = exports.HKU = exports.HKLM = exports.HKCU = exports.HKCR = exports.GetValueFlags = exports.ValueType = exports.Access = exports.OpenKeyOptions = exports.CreateKeyOptions = exports.HKEY = void 0;\r\nvar assert = require('assert');\r\nvar types = require('util').types || {\r\n    // approximate polyfill for Node.js < 10\r\n    isExternal: function (x) {\r\n        return Object.prototype.toString.call(x) === '[object Object]';\r\n    }\r\n};\r\nvar isWindows = process.platform === 'win32';\r\nvar native = isWindows && require('node-gyp-build')(__dirname + \"/..\");\r\n// from winreg.h\r\nvar HKEY;\r\n(function (HKEY) {\r\n    HKEY[HKEY[\"CLASSES_ROOT\"] = 2147483648] = \"CLASSES_ROOT\";\r\n    HKEY[HKEY[\"CURRENT_USER\"] = 2147483649] = \"CURRENT_USER\";\r\n    HKEY[HKEY[\"LOCAL_MACHINE\"] = 2147483650] = \"LOCAL_MACHINE\";\r\n    HKEY[HKEY[\"USERS\"] = 2147483651] = \"USERS\";\r\n    HKEY[HKEY[\"PERFORMANCE_DATA\"] = 2147483652] = \"PERFORMANCE_DATA\";\r\n    HKEY[HKEY[\"PERFORMANCE_TEXT\"] = 2147483728] = \"PERFORMANCE_TEXT\";\r\n    HKEY[HKEY[\"PERFORMANCE_NLSTEXT\"] = 2147483744] = \"PERFORMANCE_NLSTEXT\";\r\n    HKEY[HKEY[\"CURRENT_CONFIG\"] = 2147483653] = \"CURRENT_CONFIG\";\r\n    HKEY[HKEY[\"DYN_DATA\"] = 2147483654] = \"DYN_DATA\";\r\n    HKEY[HKEY[\"CURRENT_USER_LOCAL_SETTINGS\"] = 2147483655] = \"CURRENT_USER_LOCAL_SETTINGS\";\r\n})(HKEY = exports.HKEY || (exports.HKEY = {}));\r\nvar CreateKeyOptions;\r\n(function (CreateKeyOptions) {\r\n    CreateKeyOptions[CreateKeyOptions[\"NON_VOLATILE\"] = 0] = \"NON_VOLATILE\";\r\n    CreateKeyOptions[CreateKeyOptions[\"VOLATILE\"] = 1] = \"VOLATILE\";\r\n    CreateKeyOptions[CreateKeyOptions[\"CREATE_LINK\"] = 2] = \"CREATE_LINK\";\r\n    CreateKeyOptions[CreateKeyOptions[\"BACKUP_RESTORE\"] = 4] = \"BACKUP_RESTORE\";\r\n})(CreateKeyOptions = exports.CreateKeyOptions || (exports.CreateKeyOptions = {}));\r\nvar OpenKeyOptions;\r\n(function (OpenKeyOptions) {\r\n    OpenKeyOptions[OpenKeyOptions[\"OPEN_LINK\"] = 8] = \"OPEN_LINK\";\r\n})(OpenKeyOptions = exports.OpenKeyOptions || (exports.OpenKeyOptions = {}));\r\n// from https://docs.microsoft.com/en-nz/windows/desktop/SysInfo/registry-key-security-and-access-rights\r\nvar Access;\r\n(function (Access) {\r\n    // Specific rights\r\n    Access[Access[\"QUERY_VALUE\"] = 1] = \"QUERY_VALUE\";\r\n    Access[Access[\"SET_VALUE\"] = 2] = \"SET_VALUE\";\r\n    Access[Access[\"CREATE_SUB_KEY\"] = 4] = \"CREATE_SUB_KEY\";\r\n    Access[Access[\"ENUMERATE_SUB_KEYS\"] = 8] = \"ENUMERATE_SUB_KEYS\";\r\n    Access[Access[\"NOTIFY\"] = 16] = \"NOTIFY\";\r\n    Access[Access[\"CREATE_LINK\"] = 32] = \"CREATE_LINK\";\r\n    // WOW64. See https://docs.microsoft.com/en-nz/windows/desktop/WinProg64/accessing-an-alternate-registry-view\r\n    Access[Access[\"WOW64_64KEY\"] = 256] = \"WOW64_64KEY\";\r\n    Access[Access[\"WOW64_32KEY\"] = 512] = \"WOW64_32KEY\";\r\n    // Standard access rights\r\n    Access[Access[\"DELETE\"] = 65536] = \"DELETE\";\r\n    // Generic rights.\r\n    Access[Access[\"READ\"] = 131097] = \"READ\";\r\n    Access[Access[\"WRITE\"] = 131078] = \"WRITE\";\r\n    Access[Access[\"EXECUTE\"] = 131097] = \"EXECUTE\";\r\n    Access[Access[\"ALL_ACCESS\"] = 983103] = \"ALL_ACCESS\";\r\n})(Access = exports.Access || (exports.Access = {}));\r\n// from winnt.h\r\nvar ValueType;\r\n(function (ValueType) {\r\n    ValueType[ValueType[\"NONE\"] = 0] = \"NONE\";\r\n    ValueType[ValueType[\"SZ\"] = 1] = \"SZ\";\r\n    ValueType[ValueType[\"EXPAND_SZ\"] = 2] = \"EXPAND_SZ\";\r\n    // (with environment variable references)\r\n    ValueType[ValueType[\"BINARY\"] = 3] = \"BINARY\";\r\n    ValueType[ValueType[\"DWORD\"] = 4] = \"DWORD\";\r\n    ValueType[ValueType[\"DWORD_LITTLE_ENDIAN\"] = 4] = \"DWORD_LITTLE_ENDIAN\";\r\n    ValueType[ValueType[\"DWORD_BIG_ENDIAN\"] = 5] = \"DWORD_BIG_ENDIAN\";\r\n    ValueType[ValueType[\"LINK\"] = 6] = \"LINK\";\r\n    ValueType[ValueType[\"MULTI_SZ\"] = 7] = \"MULTI_SZ\";\r\n    ValueType[ValueType[\"RESOURCE_LIST\"] = 8] = \"RESOURCE_LIST\";\r\n    ValueType[ValueType[\"FULL_RESOURCE_DESCRIPTOR\"] = 9] = \"FULL_RESOURCE_DESCRIPTOR\";\r\n    ValueType[ValueType[\"RESOURCE_REQUIREMENTS_LIST\"] = 10] = \"RESOURCE_REQUIREMENTS_LIST\";\r\n    ValueType[ValueType[\"QWORD\"] = 11] = \"QWORD\";\r\n    ValueType[ValueType[\"QWORD_LITTLE_ENDIAN\"] = 11] = \"QWORD_LITTLE_ENDIAN\";\r\n})(ValueType = exports.ValueType || (exports.ValueType = {}));\r\n// From RegGetValue docs\r\nvar GetValueFlags;\r\n(function (GetValueFlags) {\r\n    GetValueFlags[GetValueFlags[\"RT_ANY\"] = 65535] = \"RT_ANY\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_NONE\"] = 1] = \"RT_REG_NONE\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_SZ\"] = 2] = \"RT_REG_SZ\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_EXPAND_SZ\"] = 4] = \"RT_REG_EXPAND_SZ\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_BINARY\"] = 8] = \"RT_REG_BINARY\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_DWORD\"] = 16] = \"RT_REG_DWORD\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_MULTI_SZ\"] = 32] = \"RT_REG_MULTI_SZ\";\r\n    GetValueFlags[GetValueFlags[\"RT_REG_QWORD\"] = 64] = \"RT_REG_QWORD\";\r\n    GetValueFlags[GetValueFlags[\"RT_DWORD\"] = 24] = \"RT_DWORD\";\r\n    GetValueFlags[GetValueFlags[\"RT_QWORD\"] = 72] = \"RT_QWORD\";\r\n    GetValueFlags[GetValueFlags[\"NO_EXPAND\"] = 268435456] = \"NO_EXPAND\";\r\n    // ZEROONFAILURE = 0x20000000, // doesn't make sense here\r\n    GetValueFlags[GetValueFlags[\"SUBKEY_WOW6464KEY\"] = 65536] = \"SUBKEY_WOW6464KEY\";\r\n    GetValueFlags[GetValueFlags[\"SUBKEY_WOW6432KEY\"] = 131072] = \"SUBKEY_WOW6432KEY\";\r\n})(GetValueFlags = exports.GetValueFlags || (exports.GetValueFlags = {}));\r\nexports.HKCR = HKEY.CLASSES_ROOT;\r\nexports.HKCU = HKEY.CURRENT_USER;\r\nexports.HKLM = HKEY.LOCAL_MACHINE;\r\nexports.HKU = HKEY.USERS;\r\nfunction isHKEY(hkey) {\r\n    assert(isWindows);\r\n    return (hkey instanceof native.HKEY ||\r\n        typeof hkey === \"number\" &&\r\n            hkey !== 0 &&\r\n            hkey === (hkey >>> 0) || // checks value is a positive uint32\r\n        types.isExternal(hkey));\r\n}\r\nexports.isHKEY = isHKEY;\r\n// Raw APIs\r\nfunction createKey(hkey, subKey, access, options) {\r\n    if (options === void 0) { options = 0; }\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string');\r\n    assert(typeof options === 'number');\r\n    assert(typeof access === 'number');\r\n    return native.createKey(hkey, subKey, options, access);\r\n}\r\nexports.createKey = createKey;\r\nfunction openKey(hkey, subKey, access, options) {\r\n    if (options === void 0) { options = 0; }\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string');\r\n    assert(typeof options === 'number');\r\n    assert(typeof access === 'number');\r\n    return native.openKey(hkey, subKey, options, access);\r\n}\r\nexports.openKey = openKey;\r\nfunction openCurrentUser(access) {\r\n    if (access === void 0) { access = Access.ALL_ACCESS; }\r\n    assert(isWindows);\r\n    assert(typeof access === 'number');\r\n    return native.openCurrentUser(access);\r\n}\r\nexports.openCurrentUser = openCurrentUser;\r\nfunction loadAppKey(file, access) {\r\n    assert(isWindows);\r\n    assert(typeof file === 'string');\r\n    assert(typeof access === 'number');\r\n    return native.loadAppKey(file, access);\r\n}\r\nexports.loadAppKey = loadAppKey;\r\nfunction enumKeyNames(hkey) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    return native.enumKeyNames(hkey);\r\n}\r\nexports.enumKeyNames = enumKeyNames;\r\nfunction enumValueNames(hkey) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    return native.enumValueNames(hkey);\r\n}\r\nexports.enumValueNames = enumValueNames;\r\nfunction queryValueRaw(hkey, valueName) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof valueName === 'string' || valueName === null);\r\n    return native.queryValue(hkey, valueName || \"\");\r\n}\r\nexports.queryValueRaw = queryValueRaw;\r\nfunction getValueRaw(hkey, subKey, valueName, flags) {\r\n    if (flags === void 0) { flags = 0; }\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string' || subKey === null);\r\n    assert(typeof valueName === 'string' || valueName === null);\r\n    assert(typeof flags === 'number');\r\n    if ((flags & GetValueFlags.RT_ANY) === 0) {\r\n        flags |= GetValueFlags.RT_ANY;\r\n    }\r\n    return native.getValue(hkey, subKey || \"\", valueName || \"\", flags);\r\n}\r\nexports.getValueRaw = getValueRaw;\r\nfunction setValueRaw(hkey, valueName, valueType, data) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof valueName === 'string' || valueName === null);\r\n    assert(typeof valueType === 'number');\r\n    assert(Buffer.isBuffer(data));\r\n    native.setValue(hkey, valueName || \"\", valueType, data);\r\n}\r\nexports.setValueRaw = setValueRaw;\r\nfunction renameKey(hkey, subKey, newSubKey) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string' || subKey === null);\r\n    assert(typeof newSubKey === 'string');\r\n    return native.renameKey(hkey, subKey || \"\", newSubKey);\r\n}\r\nexports.renameKey = renameKey;\r\nfunction copyTree(hkeySrc, subKey, hkeyDest) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkeySrc));\r\n    assert(typeof subKey === 'string' || subKey === null);\r\n    assert(isHKEY(hkeyDest));\r\n    return native.copyTree(hkeySrc, subKey || \"\", hkeyDest);\r\n}\r\nexports.copyTree = copyTree;\r\nfunction deleteKey(hkey, subKey) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string');\r\n    return native.deleteKey(hkey, subKey);\r\n}\r\nexports.deleteKey = deleteKey;\r\nfunction deleteTree(hkey, subKey) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string' || subKey === null);\r\n    return native.deleteTree(hkey, subKey || \"\");\r\n}\r\nexports.deleteTree = deleteTree;\r\nfunction deleteKeyValue(hkey, subKey, valueName) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof subKey === 'string');\r\n    assert(typeof valueName === 'string');\r\n    return native.deleteKeyValue(hkey, subKey, valueName);\r\n}\r\nexports.deleteKeyValue = deleteKeyValue;\r\nfunction deleteValue(hkey, valueName) {\r\n    assert(isWindows);\r\n    assert(isHKEY(hkey));\r\n    assert(typeof valueName === 'string' || valueName === null);\r\n    return native.deleteValue(hkey, valueName || \"\");\r\n}\r\nexports.deleteValue = deleteValue;\r\nfunction closeKey(hkey) {\r\n    assert(isWindows);\r\n    if (hkey == null)\r\n        return; // nicely handle uninitialized\r\n    assert(isHKEY(hkey));\r\n    native.closeKey(hkey);\r\n}\r\nexports.closeKey = closeKey;\r\nfunction parseValue(value) {\r\n    if (value === null) {\r\n        return null;\r\n    }\r\n    switch (value.type) {\r\n        default:\r\n            return assert.fail(\"Unhandled reg value type: \" + value.type);\r\n        case ValueType.SZ:\r\n        case ValueType.EXPAND_SZ:\r\n            return parseString(value);\r\n        case ValueType.BINARY:\r\n            return value;\r\n        case ValueType.DWORD_LITTLE_ENDIAN:\r\n            return value.readUInt32LE(0);\r\n        case ValueType.DWORD_BIG_ENDIAN:\r\n            return value.readUInt32BE(0);\r\n        case ValueType.MULTI_SZ:\r\n            return parseMultiString(value);\r\n        case ValueType.QWORD_LITTLE_ENDIAN:\r\n            return value.readBigUInt64LE(0);\r\n    }\r\n}\r\nexports.parseValue = parseValue;\r\nfunction trimUcs2Null(value) {\r\n    // https://docs.microsoft.com/en-us/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexw\r\n    // Remarks: \"The string may not have been stored with the proper terminating null characters\"\r\n    if (value.length >= 2 && value[value.length - 2] === 0 && value[value.length - 1] === 0) {\r\n        value = value.slice(0, -2);\r\n    }\r\n    return value;\r\n}\r\nfunction parseString(value) {\r\n    value = trimUcs2Null(value);\r\n    return value.toString('ucs-2');\r\n}\r\nexports.parseString = parseString;\r\nfunction parseMultiString(value) {\r\n    value = trimUcs2Null(value);\r\n    value = trimUcs2Null(value);\r\n    return value.toString('ucs-2').split('\\0');\r\n}\r\nexports.parseMultiString = parseMultiString;\r\nfunction formatString(value) {\r\n    return Buffer.from(value + '\\0', 'ucs-2');\r\n}\r\nexports.formatString = formatString;\r\nfunction formatMultiString(values) {\r\n    return Buffer.from(values.join('\\0') + '\\0\\0', 'ucs-2');\r\n}\r\nexports.formatMultiString = formatMultiString;\r\nfunction formatDWORD(value) {\r\n    var data = Buffer.alloc(4);\r\n    data.writeUInt32LE(value, 0);\r\n    return data;\r\n}\r\nexports.formatDWORD = formatDWORD;\r\nfunction formatQWORD(value) {\r\n    var data = Buffer.alloc(8);\r\n    if (typeof value === \"bigint\") {\r\n        data.writeBigUInt64LE(value, 0);\r\n    }\r\n    else {\r\n        data.writeUInt32LE(value, 0);\r\n        // bit operations immediately cast to a 32-bit value\r\n        data.writeUInt32LE(value / 4294967296, 4);\r\n    }\r\n    return data;\r\n}\r\nexports.formatQWORD = formatQWORD;\r\n// Formatted APIs\r\nfunction setValueSZ(hkey, valueName, value) {\r\n    setValueRaw(hkey, valueName, ValueType.SZ, formatString(value));\r\n}\r\nexports.setValueSZ = setValueSZ;\r\nfunction setValueEXPAND_SZ(hkey, valueName, value) {\r\n    setValueRaw(hkey, valueName, ValueType.EXPAND_SZ, formatString(value));\r\n}\r\nexports.setValueEXPAND_SZ = setValueEXPAND_SZ;\r\nfunction setValueMULTI_SZ(hkey, valueName, value) {\r\n    setValueRaw(hkey, valueName, ValueType.MULTI_SZ, formatMultiString(value));\r\n}\r\nexports.setValueMULTI_SZ = setValueMULTI_SZ;\r\nfunction setValueDWORD(hkey, valueName, value) {\r\n    setValueRaw(hkey, valueName, ValueType.DWORD, formatDWORD(value));\r\n}\r\nexports.setValueDWORD = setValueDWORD;\r\nfunction setValueQWORD(hkey, valueName, value) {\r\n    setValueRaw(hkey, valueName, ValueType.QWORD, formatQWORD(value));\r\n}\r\nexports.setValueQWORD = setValueQWORD;\r\nfunction getValue(hkey, subKey, valueName, flags) {\r\n    if (flags === void 0) { flags = 0; }\r\n    return parseValue(getValueRaw(hkey, subKey, valueName, flags));\r\n}\r\nexports.getValue = getValue;\r\nfunction queryValue(hkey, valueName) {\r\n    return parseValue(queryValueRaw(hkey, valueName));\r\n}\r\nexports.queryValue = queryValue;\r\n//# sourceMappingURL=index.js.map","if (typeof process.addon === 'function') { // if the platform supports native resolving prefer that\n  module.exports = process.addon.bind(process)\n} else { // else use the runtime version here\n  module.exports = require('./node-gyp-build.js')\n}\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = process.env.npm_config_arch || os.arch()\nvar platform = process.env.npm_config_platform || os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.resolve(dir))\n}\n\nload.resolve = load.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","\ntry {\n  process.dlopen(module, __dirname + require(\"path\").sep + __webpack_public_path__ + \"e0f1dd0fc5bc2e5c289962389cb164c4.node\");\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.localize = exports.init = exports.Localize = void 0;\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst vscode = require(\"vscode\");\nclass Localize {\n    constructor(options = {}) {\n        this.options = options;\n    }\n    /**\n     * translate the key\n     * @param key\n     * @param args\n     */\n    localize(key, ...args) {\n        const languagePack = this.bundle;\n        const message = languagePack[key] || key;\n        return this.format(message, args);\n    }\n    init(extensionPath) {\n        this.extensionPath = extensionPath;\n        this.bundle = this.resolveLanguagePack();\n    }\n    format(message, args = []) {\n        let result;\n        if (args.length === 0) {\n            result = message;\n        }\n        else {\n            result = message.replace(/\\{(\\d+)\\}/g, (match, rest) => {\n                const index = rest[0];\n                return typeof args[index] !== \"undefined\" ? args[index] : match;\n            });\n        }\n        return result;\n    }\n    resolveLanguagePack() {\n        const defaultResolvedLanguage = \".nls.json\";\n        let resolvedLanguage = \"\";\n        const rootPath = this.extensionPath || process.cwd();\n        const file = path.join(rootPath, \"package\");\n        const options = this.options;\n        if (!options.locale) {\n            resolvedLanguage = defaultResolvedLanguage;\n        }\n        else {\n            let locale = options.locale;\n            while (locale) {\n                const candidate = \".nls.\" + locale + \".json\";\n                if (fs.existsSync(file + candidate)) {\n                    resolvedLanguage = candidate;\n                    break;\n                }\n                else {\n                    const index = locale.lastIndexOf(\"-\");\n                    if (index > 0) {\n                        locale = locale.substring(0, index);\n                    }\n                    else {\n                        resolvedLanguage = \".nls.json\";\n                        locale = null;\n                    }\n                }\n            }\n        }\n        let defaultLanguageBundle = {};\n        // if not use default language\n        // then merger the Language pack\n        // just in case the resolveLanguage bundle missing the translation and fallback with default language\n        if (resolvedLanguage !== defaultResolvedLanguage) {\n            defaultLanguageBundle = JSON.parse(fs.readFileSync(path.join(file + defaultResolvedLanguage), \"utf8\"));\n        }\n        const languageFilePath = path.join(file + resolvedLanguage);\n        const isExistResolvedLanguage = fs.existsSync(languageFilePath);\n        const ResolvedLanguageBundle = isExistResolvedLanguage ? JSON.parse(fs.readFileSync(languageFilePath, \"utf8\")) : {};\n        // merger with default language bundle\n        return Object.assign(Object.assign({}, defaultLanguageBundle), ResolvedLanguageBundle);\n    }\n}\nexports.Localize = Localize;\nlet config = {\n    locale: vscode.env.language,\n};\nconst instance = new Localize(config);\nfunction init(extensionPath) {\n    return instance.init(extensionPath);\n}\nexports.init = init;\nfunction localize(key, ...args) {\n    return instance.localize(key, ...args);\n}\nexports.localize = localize;\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","module.exports = require(\"vscode\");","module.exports = require(\"assert\");","module.exports = require(\"fs\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"stream\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"https\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"zlib\");","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError, AbortError };\n","// https://stackoverflow.com/a/45074641\r\ndeclare const v8debug: any;\r\nconst debug = typeof v8debug === 'object'\r\n            || /--debug|--inspect/.test(process.execArgv.join(' '));\r\n\r\nexport default {\r\n\turls: {\r\n\t\tmods: 'https://mods.windhawk.net/catalog.json',\r\n\t\tmodsFolder: 'https://mods.windhawk.net/mods/',\r\n\t},\r\n\tdebug: debug ? {\r\n\t\treactProjectBuildPath: String.raw`C:\\Windhawk-dev\\vscode-windhawk-ui\\dist\\apps\\vscode-windhawk-ui`,\r\n\t\tappRootPath: String.raw`C:\\Windhawk-dev\\Windhawk`,\r\n\t\tdisableMinimalMode: true,\r\n\t\tdisableEnvVarCheck: true,\r\n\t} : {\r\n\t\treactProjectBuildPath: null,\r\n\t\tappRootPath: null,\r\n\t\tdisableMinimalMode: false,\r\n\t\tdisableEnvVarCheck: false,\r\n\t},\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"child_process\");","import * as child_process from 'child_process';\r\nimport * as vscode from 'vscode';\r\n\r\nexport class WindhawkLogOutput {\r\n\tprivate _logOutputProcessPath: string;\r\n\tprivate _logOutputChannel?: vscode.OutputChannel;\r\n\tprivate _logOutputProcess?: child_process.ChildProcessWithoutNullStreams;\r\n\r\n\tconstructor(logOutputProcessPath: string) {\r\n\t\tthis._logOutputProcessPath = logOutputProcessPath;\r\n\t}\r\n\r\n\tpublic createOrShow(preserveFocus?: boolean) {\r\n\t\tif (!this._logOutputChannel) {\r\n\t\t\tthis._logOutputChannel = vscode.window.createOutputChannel('Windhawk Log');\r\n\t\t}\r\n\t\tthis._logOutputChannel.show(preserveFocus);\r\n\r\n\t\tif (!this._logOutputProcess) {\r\n\t\t\tconst args = [\r\n\t\t\t\t'--pattern',\r\n\t\t\t\t'[WH] *',\r\n\t\t\t\t'--no-buffering',\r\n\t\t\t];\r\n\t\t\tconst ps = child_process.spawn(this._logOutputProcessPath, args);\r\n\r\n\t\t\tthis._logOutputProcess = ps;\r\n\r\n\t\t\tps.stdout.on('data', data => {\r\n\t\t\t\t//console.log(`ps stdout: ${data}`);\r\n\t\t\t\tthis._logOutputChannel?.append(data.toString());\r\n\t\t\t});\r\n\r\n\t\t\tps.stderr.on('data', data => {\r\n\t\t\t\t//console.log(`ps stderr: ${data}`);\r\n\t\t\t\tthis._logOutputChannel?.append(data.toString());\r\n\t\t\t});\r\n\r\n\t\t\tlet gotError = false;\r\n\r\n\t\t\tps.on('error', err => {\r\n\t\t\t\t//console.log('Oh no, the error: ' + err);\r\n\t\t\t\tthis._logOutputProcess = undefined;\r\n\t\t\t\tgotError = true;\r\n\t\t\t\tvscode.window.showErrorMessage(err.message);\r\n\t\t\t});\r\n\r\n\t\t\tps.on('close', code => {\r\n\t\t\t\t//console.log(`ps process exited with code ${code}`);\r\n\t\t\t\tif (!gotError) {\r\n\t\t\t\t\tthis._logOutputProcess = undefined;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic dispose() {\r\n\t\tif (this._logOutputProcess) {\r\n\t\t\tthis._logOutputProcess.kill();\r\n\t\t\tthis._logOutputProcess = undefined;\r\n\t\t}\r\n\r\n\t\tif (this._logOutputChannel) {\r\n\t\t\tthis._logOutputChannel.dispose();\r\n\t\t\tthis._logOutputChannel = undefined;\r\n\t\t}\r\n\t}\r\n}\r\n","import * as fs from 'fs';\r\nimport * as fsExt from 'fs-ext';\r\nimport * as ini from 'ini-win';\r\n\r\nexport type iniValue = {\r\n\t[key: string]: {\r\n\t\t[key: string]: string\r\n\t}\r\n};\r\n\r\nexport function fromFile(filePath: string) {\r\n\tconst fd = fs.openSync(filePath, 'r');\r\n\tfsExt.flockSync(fd, 'sh');\r\n\tconst buffer = fs.readFileSync(fd);\r\n\tfsExt.flockSync(fd, 'un');\r\n\tfs.closeSync(fd);\r\n\r\n\tlet contents: string;\r\n\tif (buffer[0] === 0xFF && buffer[1] === 0xFE) {\r\n\t\tcontents = buffer.slice(2).toString('utf16le');\r\n\t} else {\r\n\t\tcontents = buffer.toString('utf8');\r\n\t}\r\n\r\n\tconst parsed = ini.parse(contents);\r\n\r\n\tconst result: iniValue = {};\r\n\tfor (const [sectionName, section] of Object.entries(parsed)) {\r\n\t\tfor (const [key, value] of Object.entries(section)) {\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tresult[sectionName] = result[sectionName] || {};\r\n\t\t\t\tresult[sectionName][key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function fromFileOrDefault(filePath: string, defaultValue: iniValue = {}) {\r\n\ttry {\r\n\t\treturn fromFile(filePath);\r\n\t} catch (e) {\r\n\t\t// Ignore if file doesn't exist.\r\n\t\tif (e.code !== 'ENOENT') {\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn defaultValue;\r\n\t}\r\n}\r\n\r\nexport function toFile(filePath: string, value: iniValue) {\r\n\tconst fd = fs.openSync(filePath, 'w');\r\n\tfsExt.flockSync(fd, 'ex');\r\n\tfs.writeFileSync(fd, '\\uFEFF' + ini.stringify(value), 'utf16le');\r\n\tfsExt.flockSync(fd, 'un');\r\n\tfs.closeSync(fd);\r\n}\r\n","import * as child_process from 'child_process';\r\nimport * as reg from 'native-reg';\r\nimport * as path from 'path';\r\nimport * as vscode from 'vscode';\r\nimport * as ini from '../ini';\r\n\r\nexport type AppSettings = {\r\n\tlanguage: string,\r\n\tdisableUpdateCheck: boolean,\r\n\tdisableRunUIScheduledTask: boolean | null,\r\n\tdevModeOptOut: boolean,\r\n\tdevModeUsedAtLeastOnce: boolean,\r\n\thideTrayIcon: boolean,\r\n\tdontAutoShowToolkit: boolean,\r\n\tmodTasksDialogDelay: number,\r\n\tsafeMode: boolean,\r\n\tloggingVerbosity: number,\r\n\tengine: {\r\n\t\tloggingVerbosity: number,\r\n\t\tinclude: string[],\r\n\t\texclude: string[],\r\n\t\tinjectIntoCriticalProcesses: boolean,\r\n\t\tloadModsInCriticalSystemProcesses: number\r\n\t}\r\n};\r\n\r\nexport interface AppSettingsUtils {\r\n\tgetAppSettings(): AppSettings;\r\n\tupdateAppSettings(appSettings: Partial<AppSettings>): void;\r\n\tshouldRestartApp(appSettings: Partial<AppSettings>): boolean;\r\n\tshouldNotifyTrayProgram(appSettings: Partial<AppSettings>): boolean;\r\n}\r\n\r\nexport class AppSettingsUtilsPortable implements AppSettingsUtils {\r\n\tprivate settingsIniPath: string;\r\n\tprivate engineSettingsIniPath: string;\r\n\r\n\tpublic constructor(appDataPath: string) {\r\n\t\tthis.settingsIniPath = path.join(appDataPath, 'settings.ini');\r\n\t\tthis.engineSettingsIniPath = path.join(appDataPath, 'engine', 'settings.ini');\r\n\t}\r\n\r\n\tpublic getAppSettings() {\r\n\t\tconst iniFileParsed = ini.fromFileOrDefault(this.settingsIniPath);\r\n\t\tconst engineIniFileParsed = ini.fromFileOrDefault(this.engineSettingsIniPath);\r\n\r\n\t\treturn {\r\n\t\t\tlanguage: iniFileParsed.Settings?.Language || 'en',\r\n\t\t\tdisableUpdateCheck: !!parseInt(iniFileParsed.Settings?.DisableUpdateCheck ?? '0', 10),\r\n\t\t\tdisableRunUIScheduledTask: null,\r\n\t\t\tdevModeOptOut: !!parseInt(iniFileParsed.Settings?.DevModeOptOut ?? '0', 10),\r\n\t\t\tdevModeUsedAtLeastOnce: !!parseInt(iniFileParsed.Settings?.DevModeUsedAtLeastOnce ?? '0', 10),\r\n\t\t\thideTrayIcon: !!parseInt(iniFileParsed.Settings?.HideTrayIcon ?? '0', 10),\r\n\t\t\tdontAutoShowToolkit: !!parseInt(iniFileParsed.Settings?.DontAutoShowToolkit ?? '0', 10),\r\n\t\t\tmodTasksDialogDelay: parseInt(iniFileParsed.Settings?.ModTasksDialogDelay ?? '2000', 10),\r\n\t\t\tsafeMode: !!parseInt(iniFileParsed.Settings?.SafeMode ?? '0', 10),\r\n\t\t\tloggingVerbosity: parseInt(iniFileParsed.Settings?.LoggingVerbosity ?? '0', 10),\r\n\t\t\tengine: {\r\n\t\t\t\tloggingVerbosity: parseInt(engineIniFileParsed.Settings?.LoggingVerbosity ?? '0', 10),\r\n\t\t\t\tinclude: (engineIniFileParsed.Settings?.Include || '').split('|'),\r\n\t\t\t\texclude: (engineIniFileParsed.Settings?.Exclude || '').split('|'),\r\n\t\t\t\tinjectIntoCriticalProcesses: !!parseInt(engineIniFileParsed.Settings?.InjectIntoCriticalProcesses ?? '0', 10),\r\n\t\t\t\tloadModsInCriticalSystemProcesses: parseInt(engineIniFileParsed.Settings?.LoadModsInCriticalSystemProcesses ?? '1', 10)\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tpublic updateAppSettings(appSettings: Partial<AppSettings>) {\r\n\t\tconst iniFileParsed = ini.fromFileOrDefault(this.settingsIniPath);\r\n\r\n\t\tiniFileParsed.Settings = iniFileParsed.Settings || {};\r\n\r\n\t\tif (appSettings.language !== undefined) {\r\n\t\t\tiniFileParsed.Settings.Language = appSettings.language;\r\n\t\t}\r\n\t\tif (appSettings.disableUpdateCheck !== undefined) {\r\n\t\t\tiniFileParsed.Settings.DisableUpdateCheck = appSettings.disableUpdateCheck ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.disableRunUIScheduledTask !== undefined && appSettings.disableRunUIScheduledTask !== null) {\r\n\t\t\tthrow new Error('Cannot set disableRunUIScheduledTask in portable mode');\r\n\t\t}\r\n\t\tif (appSettings.devModeOptOut !== undefined) {\r\n\t\t\tiniFileParsed.Settings.DevModeOptOut = appSettings.devModeOptOut ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.devModeUsedAtLeastOnce !== undefined) {\r\n\t\t\tiniFileParsed.Settings.DevModeUsedAtLeastOnce = appSettings.devModeUsedAtLeastOnce ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.hideTrayIcon !== undefined) {\r\n\t\t\tiniFileParsed.Settings.HideTrayIcon = appSettings.hideTrayIcon ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.dontAutoShowToolkit !== undefined) {\r\n\t\t\tiniFileParsed.Settings.DontAutoShowToolkit = appSettings.dontAutoShowToolkit ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.modTasksDialogDelay !== undefined) {\r\n\t\t\tiniFileParsed.Settings.ModTasksDialogDelay = appSettings.modTasksDialogDelay.toString();\r\n\t\t}\r\n\t\tif (appSettings.safeMode !== undefined) {\r\n\t\t\tiniFileParsed.Settings.SafeMode = appSettings.safeMode ? '1' : '0';\r\n\t\t}\r\n\t\tif (appSettings.loggingVerbosity !== undefined) {\r\n\t\t\tiniFileParsed.Settings.LoggingVerbosity = appSettings.loggingVerbosity.toString();\r\n\t\t}\r\n\r\n\t\tini.toFile(this.settingsIniPath, iniFileParsed);\r\n\r\n\t\tif (appSettings.engine !== undefined) {\r\n\t\t\tconst engineIniFileParsed = ini.fromFileOrDefault(this.engineSettingsIniPath);\r\n\r\n\t\t\tengineIniFileParsed.Settings = engineIniFileParsed.Settings || {};\r\n\r\n\t\t\tif (appSettings.engine.loggingVerbosity !== undefined) {\r\n\t\t\t\tengineIniFileParsed.Settings.LoggingVerbosity = appSettings.engine.loggingVerbosity.toString();\r\n\t\t\t}\r\n\t\t\tif (appSettings.engine.include !== undefined) {\r\n\t\t\t\tengineIniFileParsed.Settings.Include = appSettings.engine.include.join('|');\r\n\t\t\t}\r\n\t\t\tif (appSettings.engine.exclude !== undefined) {\r\n\t\t\t\tengineIniFileParsed.Settings.Exclude = appSettings.engine.exclude.join('|');\r\n\t\t\t}\r\n\t\t\tif (appSettings.engine.injectIntoCriticalProcesses !== undefined) {\r\n\t\t\t\tengineIniFileParsed.Settings.InjectIntoCriticalProcesses = appSettings.engine.injectIntoCriticalProcesses ? '1' : '0';\r\n\t\t\t}\r\n\t\t\tif (appSettings.engine.loadModsInCriticalSystemProcesses !== undefined) {\r\n\t\t\t\tengineIniFileParsed.Settings.LoadModsInCriticalSystemProcesses = appSettings.engine.loadModsInCriticalSystemProcesses.toString();\r\n\t\t\t}\r\n\r\n\t\t\tini.toFile(this.engineSettingsIniPath, engineIniFileParsed);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldRestartApp(appSettings: Partial<AppSettings>) {\r\n\t\treturn appSettings.safeMode !== undefined ||\r\n\t\t\tappSettings.loggingVerbosity !== undefined ||\r\n\t\t\t(appSettings.engine !== undefined && Object.keys(appSettings.engine).length > 0);\r\n\t}\r\n\r\n\tpublic shouldNotifyTrayProgram(appSettings: Partial<AppSettings>) {\r\n\t\treturn appSettings.language !== undefined ||\r\n\t\t\tappSettings.disableUpdateCheck !== undefined ||\r\n\t\t\tappSettings.hideTrayIcon !== undefined ||\r\n\t\t\tappSettings.dontAutoShowToolkit !== undefined ||\r\n\t\t\tappSettings.modTasksDialogDelay !== undefined;\r\n\t}\r\n}\r\n\r\nexport class AppSettingsUtilsNonPortable implements AppSettingsUtils {\r\n\tprivate regKey: reg.HKEY;\r\n\tprivate regSubKey: string;\r\n\tprivate engineRegSubKey: string;\r\n\r\n\tpublic constructor(regKey: reg.HKEY, regSubKey: string) {\r\n\t\tthis.regKey = regKey;\r\n\t\tthis.regSubKey = regSubKey + '\\\\Settings';\r\n\t\tthis.engineRegSubKey = regSubKey + '\\\\Engine\\\\Settings';\r\n\t}\r\n\r\n\tpublic getAppSettings() {\r\n\t\tconst key = reg.createKey(this.regKey, this.regSubKey,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.WOW64_64KEY);\r\n\t\tconst engineKey = reg.createKey(this.regKey, this.engineRegSubKey,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\treturn {\r\n\t\t\t\tlanguage: (reg.getValue(key, null, 'Language', reg.GetValueFlags.RT_REG_SZ) || 'en') as string,\r\n\t\t\t\tdisableUpdateCheck: !!reg.getValue(key, null, 'DisableUpdateCheck', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tdisableRunUIScheduledTask: !!reg.getValue(key, null, 'DisableRunUIScheduledTask', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tdevModeOptOut: !!reg.getValue(key, null, 'DevModeOptOut', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tdevModeUsedAtLeastOnce: !!reg.getValue(key, null, 'DevModeUsedAtLeastOnce', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\thideTrayIcon: !!reg.getValue(key, null, 'HideTrayIcon', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tdontAutoShowToolkit: !!reg.getValue(key, null, 'DontAutoShowToolkit', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tmodTasksDialogDelay: (reg.getValue(key, null, 'ModTasksDialogDelay', reg.GetValueFlags.RT_REG_DWORD) ?? 2000) as number,\r\n\t\t\t\tsafeMode: !!reg.getValue(key, null, 'SafeMode', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tloggingVerbosity: (reg.getValue(key, null, 'LoggingVerbosity', reg.GetValueFlags.RT_REG_DWORD) ?? 0) as number,\r\n\t\t\t\tengine: {\r\n\t\t\t\t\tloggingVerbosity: (reg.getValue(engineKey, null, 'LoggingVerbosity', reg.GetValueFlags.RT_REG_DWORD) ?? 0) as number,\r\n\t\t\t\t\tinclude: ((reg.getValue(engineKey, null, 'Include', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\texclude: ((reg.getValue(engineKey, null, 'Exclude', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\tinjectIntoCriticalProcesses: !!reg.getValue(engineKey, null, 'InjectIntoCriticalProcesses', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\t\tloadModsInCriticalSystemProcesses: (reg.getValue(engineKey, null, 'LoadModsInCriticalSystemProcesses', reg.GetValueFlags.RT_REG_DWORD) ?? 1) as number,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t\treg.closeKey(engineKey);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic updateAppSettings(appSettings: Partial<AppSettings>) {\r\n\t\tconst key = reg.createKey(this.regKey, this.regSubKey,\r\n\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\tif (appSettings.language !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'Language', appSettings.language);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.setInstallerLanguage(appSettings.language);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.warn('Failed to set installer language', e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (appSettings.disableUpdateCheck !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DisableUpdateCheck', appSettings.disableUpdateCheck ? 1 : 0);\r\n\t\t\t\tthis.enableScheduledTask('WindhawkUpdateTask', !appSettings.disableUpdateCheck);\r\n\t\t\t}\r\n\t\t\tif (appSettings.disableRunUIScheduledTask !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DisableRunUIScheduledTask', appSettings.disableRunUIScheduledTask ? 1 : 0);\r\n\t\t\t\tthis.enableScheduledTask('WindhawkRunUITask', !appSettings.disableRunUIScheduledTask);\r\n\t\t\t}\r\n\t\t\tif (appSettings.devModeOptOut !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DevModeOptOut', appSettings.devModeOptOut ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (appSettings.devModeUsedAtLeastOnce !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DevModeUsedAtLeastOnce', appSettings.devModeUsedAtLeastOnce ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (appSettings.hideTrayIcon !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'HideTrayIcon', appSettings.hideTrayIcon ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (appSettings.dontAutoShowToolkit !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DontAutoShowToolkit', appSettings.dontAutoShowToolkit ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (appSettings.modTasksDialogDelay !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'ModTasksDialogDelay', appSettings.modTasksDialogDelay);\r\n\t\t\t}\r\n\t\t\tif (appSettings.safeMode !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'SafeMode', appSettings.safeMode ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (appSettings.loggingVerbosity !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'LoggingVerbosity', appSettings.loggingVerbosity);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\r\n\t\tif (appSettings.engine !== undefined) {\r\n\t\t\tconst engineKey = reg.createKey(this.regKey, this.engineRegSubKey,\r\n\t\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\t\ttry {\r\n\t\t\t\tif (appSettings.engine.loggingVerbosity !== undefined) {\r\n\t\t\t\t\treg.setValueDWORD(engineKey, 'LoggingVerbosity', appSettings.engine.loggingVerbosity);\r\n\t\t\t\t}\r\n\t\t\t\tif (appSettings.engine.include !== undefined) {\r\n\t\t\t\t\treg.setValueSZ(engineKey, 'Include', appSettings.engine.include.join('|'));\r\n\t\t\t\t}\r\n\t\t\t\tif (appSettings.engine.exclude !== undefined) {\r\n\t\t\t\t\treg.setValueSZ(engineKey, 'Exclude', appSettings.engine.exclude.join('|'));\r\n\t\t\t\t}\r\n\t\t\t\tif (appSettings.engine.injectIntoCriticalProcesses !== undefined) {\r\n\t\t\t\t\treg.setValueDWORD(engineKey, 'InjectIntoCriticalProcesses', appSettings.engine.injectIntoCriticalProcesses ? 1 : 0);\r\n\t\t\t\t}\r\n\t\t\t\tif (appSettings.engine.loadModsInCriticalSystemProcesses !== undefined) {\r\n\t\t\t\t\treg.setValueDWORD(engineKey, 'LoadModsInCriticalSystemProcesses', appSettings.engine.loadModsInCriticalSystemProcesses);\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\treg.closeKey(engineKey);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic shouldRestartApp(appSettings: Partial<AppSettings>) {\r\n\t\treturn appSettings.safeMode !== undefined ||\r\n\t\t\tappSettings.loggingVerbosity !== undefined ||\r\n\t\t\t(appSettings.engine !== undefined && Object.keys(appSettings.engine).length > 0);\r\n\t}\r\n\r\n\tpublic shouldNotifyTrayProgram(appSettings: Partial<AppSettings>) {\r\n\t\treturn appSettings.language !== undefined ||\r\n\t\t\tappSettings.disableUpdateCheck !== undefined ||\r\n\t\t\tappSettings.hideTrayIcon !== undefined ||\r\n\t\t\tappSettings.dontAutoShowToolkit !== undefined ||\r\n\t\t\tappSettings.modTasksDialogDelay !== undefined;\r\n\t}\r\n\r\n\tprivate setInstallerLanguage(language: string) {\r\n\t\t// https://github.com/sindresorhus/lcid/blob/958d38ff2b812d6854cbba2cae611e86a1d5ddf3/lcid.json\r\n\t\tconst lcidMap = {\r\n\t\t\t\"4\": \"zh_CHS\",\r\n\t\t\t\"1025\": \"ar_SA\",\r\n\t\t\t\"1026\": \"bg_BG\",\r\n\t\t\t\"1027\": \"ca_ES\",\r\n\t\t\t\"1028\": \"zh_TW\",\r\n\t\t\t\"1029\": \"cs_CZ\",\r\n\t\t\t\"1030\": \"da_DK\",\r\n\t\t\t\"1031\": \"de_DE\",\r\n\t\t\t\"1032\": \"el_GR\",\r\n\t\t\t\"1033\": \"en_US\",\r\n\t\t\t\"1034\": \"es_ES\",\r\n\t\t\t\"1035\": \"fi_FI\",\r\n\t\t\t\"1036\": \"fr_FR\",\r\n\t\t\t\"1037\": \"he_IL\",\r\n\t\t\t\"1038\": \"hu_HU\",\r\n\t\t\t\"1039\": \"is_IS\",\r\n\t\t\t\"1040\": \"it_IT\",\r\n\t\t\t\"1041\": \"ja_JP\",\r\n\t\t\t\"1042\": \"ko_KR\",\r\n\t\t\t\"1043\": \"nl_NL\",\r\n\t\t\t\"1044\": \"nb_NO\",\r\n\t\t\t\"1045\": \"pl_PL\",\r\n\t\t\t\"1046\": \"pt_BR\",\r\n\t\t\t\"1047\": \"rm_CH\",\r\n\t\t\t\"1048\": \"ro_RO\",\r\n\t\t\t\"1049\": \"ru_RU\",\r\n\t\t\t\"1050\": \"hr_HR\",\r\n\t\t\t\"1051\": \"sk_SK\",\r\n\t\t\t\"1052\": \"sq_AL\",\r\n\t\t\t\"1053\": \"sv_SE\",\r\n\t\t\t\"1054\": \"th_TH\",\r\n\t\t\t\"1055\": \"tr_TR\",\r\n\t\t\t\"1056\": \"ur_PK\",\r\n\t\t\t\"1057\": \"id_ID\",\r\n\t\t\t\"1058\": \"uk_UA\",\r\n\t\t\t\"1059\": \"be_BY\",\r\n\t\t\t\"1060\": \"sl_SI\",\r\n\t\t\t\"1061\": \"et_EE\",\r\n\t\t\t\"1062\": \"lv_LV\",\r\n\t\t\t\"1063\": \"lt_LT\",\r\n\t\t\t\"1064\": \"tg_TJ\",\r\n\t\t\t\"1065\": \"fa_IR\",\r\n\t\t\t\"1066\": \"vi_VN\",\r\n\t\t\t\"1067\": \"hy_AM\",\r\n\t\t\t\"1069\": \"eu_ES\",\r\n\t\t\t\"1070\": \"wen_DE\",\r\n\t\t\t\"1071\": \"mk_MK\",\r\n\t\t\t\"1072\": \"st_ZA\",\r\n\t\t\t\"1073\": \"ts_ZA\",\r\n\t\t\t\"1074\": \"tn_ZA\",\r\n\t\t\t\"1075\": \"ven_ZA\",\r\n\t\t\t\"1076\": \"xh_ZA\",\r\n\t\t\t\"1077\": \"zu_ZA\",\r\n\t\t\t\"1078\": \"af_ZA\",\r\n\t\t\t\"1079\": \"ka_GE\",\r\n\t\t\t\"1080\": \"fo_FO\",\r\n\t\t\t\"1081\": \"hi_IN\",\r\n\t\t\t\"1082\": \"mt_MT\",\r\n\t\t\t\"1083\": \"se_NO\",\r\n\t\t\t\"1084\": \"gd_GB\",\r\n\t\t\t\"1085\": \"yi\",\r\n\t\t\t\"1086\": \"ms_MY\",\r\n\t\t\t\"1087\": \"kk_KZ\",\r\n\t\t\t\"1088\": \"ky_KG\",\r\n\t\t\t\"1089\": \"sw_KE\",\r\n\t\t\t\"1090\": \"tk_TM\",\r\n\t\t\t\"1092\": \"tt_RU\",\r\n\t\t\t\"1093\": \"bn_IN\",\r\n\t\t\t\"1094\": \"pa_IN\",\r\n\t\t\t\"1095\": \"gu_IN\",\r\n\t\t\t\"1096\": \"or_IN\",\r\n\t\t\t\"1097\": \"ta_IN\",\r\n\t\t\t\"1098\": \"te_IN\",\r\n\t\t\t\"1099\": \"kn_IN\",\r\n\t\t\t\"1100\": \"ml_IN\",\r\n\t\t\t\"1101\": \"as_IN\",\r\n\t\t\t\"1102\": \"mr_IN\",\r\n\t\t\t\"1103\": \"sa_IN\",\r\n\t\t\t\"1104\": \"mn_MN\",\r\n\t\t\t\"1105\": \"bo_CN\",\r\n\t\t\t\"1106\": \"cy_GB\",\r\n\t\t\t\"1107\": \"kh_KH\",\r\n\t\t\t\"1108\": \"lo_LA\",\r\n\t\t\t\"1109\": \"my_MM\",\r\n\t\t\t\"1110\": \"gl_ES\",\r\n\t\t\t\"1111\": \"kok_IN\",\r\n\t\t\t\"1113\": \"sd_IN\",\r\n\t\t\t\"1114\": \"syr_SY\",\r\n\t\t\t\"1115\": \"si_LK\",\r\n\t\t\t\"1116\": \"chr_US\",\r\n\t\t\t\"1118\": \"am_ET\",\r\n\t\t\t\"1119\": \"tmz\",\r\n\t\t\t\"1121\": \"ne_NP\",\r\n\t\t\t\"1122\": \"fy_NL\",\r\n\t\t\t\"1123\": \"ps_AF\",\r\n\t\t\t\"1124\": \"fil_PH\",\r\n\t\t\t\"1125\": \"div_MV\",\r\n\t\t\t\"1126\": \"bin_NG\",\r\n\t\t\t\"1127\": \"fuv_NG\",\r\n\t\t\t\"1128\": \"ha_NG\",\r\n\t\t\t\"1129\": \"ibb_NG\",\r\n\t\t\t\"1130\": \"yo_NG\",\r\n\t\t\t\"1131\": \"quz_BO\",\r\n\t\t\t\"1132\": \"ns_ZA\",\r\n\t\t\t\"1133\": \"ba_RU\",\r\n\t\t\t\"1134\": \"lb_LU\",\r\n\t\t\t\"1135\": \"kl_GL\",\r\n\t\t\t\"1144\": \"ii_CN\",\r\n\t\t\t\"1146\": \"arn_CL\",\r\n\t\t\t\"1148\": \"moh_CA\",\r\n\t\t\t\"1150\": \"br_FR\",\r\n\t\t\t\"1152\": \"ug_CN\",\r\n\t\t\t\"1153\": \"mi_NZ\",\r\n\t\t\t\"1154\": \"oc_FR\",\r\n\t\t\t\"1155\": \"co_FR\",\r\n\t\t\t\"1156\": \"gsw_FR\",\r\n\t\t\t\"1157\": \"sah_RU\",\r\n\t\t\t\"1158\": \"qut_GT\",\r\n\t\t\t\"1159\": \"rw_RW\",\r\n\t\t\t\"1160\": \"wo_SN\",\r\n\t\t\t\"1164\": \"gbz_AF\",\r\n\t\t\t\"2049\": \"ar_IQ\",\r\n\t\t\t\"2052\": \"zh_CN\",\r\n\t\t\t\"2055\": \"de_CH\",\r\n\t\t\t\"2057\": \"en_GB\",\r\n\t\t\t\"2058\": \"es_MX\",\r\n\t\t\t\"2060\": \"fr_BE\",\r\n\t\t\t\"2064\": \"it_CH\",\r\n\t\t\t\"2067\": \"nl_BE\",\r\n\t\t\t\"2068\": \"nn_NO\",\r\n\t\t\t\"2070\": \"pt_PT\",\r\n\t\t\t\"2072\": \"ro_MD\",\r\n\t\t\t\"2073\": \"ru_MD\",\r\n\t\t\t\"2077\": \"sv_FI\",\r\n\t\t\t\"2080\": \"ur_IN\",\r\n\t\t\t\"2092\": \"az_AZ\",\r\n\t\t\t\"2094\": \"dsb_DE\",\r\n\t\t\t\"2107\": \"se_SE\",\r\n\t\t\t\"2108\": \"ga_IE\",\r\n\t\t\t\"2110\": \"ms_BN\",\r\n\t\t\t\"2115\": \"uz_UZ\",\r\n\t\t\t\"2128\": \"mn_CN\",\r\n\t\t\t\"2129\": \"bo_BT\",\r\n\t\t\t\"2141\": \"iu_CA\",\r\n\t\t\t\"2143\": \"tmz_DZ\",\r\n\t\t\t\"2145\": \"ne_IN\",\r\n\t\t\t\"2155\": \"quz_EC\",\r\n\t\t\t\"2163\": \"ti_ET\",\r\n\t\t\t\"3073\": \"ar_EG\",\r\n\t\t\t\"3076\": \"zh_HK\",\r\n\t\t\t\"3079\": \"de_AT\",\r\n\t\t\t\"3081\": \"en_AU\",\r\n\t\t\t\"3082\": \"es_ES\",\r\n\t\t\t\"3084\": \"fr_CA\",\r\n\t\t\t\"3098\": \"sr_SP\",\r\n\t\t\t\"3131\": \"se_FI\",\r\n\t\t\t\"3179\": \"quz_PE\",\r\n\t\t\t\"4097\": \"ar_LY\",\r\n\t\t\t\"4100\": \"zh_SG\",\r\n\t\t\t\"4103\": \"de_LU\",\r\n\t\t\t\"4105\": \"en_CA\",\r\n\t\t\t\"4106\": \"es_GT\",\r\n\t\t\t\"4108\": \"fr_CH\",\r\n\t\t\t\"4122\": \"hr_BA\",\r\n\t\t\t\"4155\": \"smj_NO\",\r\n\t\t\t\"5121\": \"ar_DZ\",\r\n\t\t\t\"5124\": \"zh_MO\",\r\n\t\t\t\"5127\": \"de_LI\",\r\n\t\t\t\"5129\": \"en_NZ\",\r\n\t\t\t\"5130\": \"es_CR\",\r\n\t\t\t\"5132\": \"fr_LU\",\r\n\t\t\t\"5179\": \"smj_SE\",\r\n\t\t\t\"6145\": \"ar_MA\",\r\n\t\t\t\"6153\": \"en_IE\",\r\n\t\t\t\"6154\": \"es_PA\",\r\n\t\t\t\"6156\": \"fr_MC\",\r\n\t\t\t\"6203\": \"sma_NO\",\r\n\t\t\t\"7169\": \"ar_TN\",\r\n\t\t\t\"7177\": \"en_ZA\",\r\n\t\t\t\"7178\": \"es_DO\",\r\n\t\t\t\"7180\": \"fr_029\",\r\n\t\t\t\"7194\": \"sr_BA\",\r\n\t\t\t\"7227\": \"sma_SE\",\r\n\t\t\t\"8193\": \"ar_OM\",\r\n\t\t\t\"8201\": \"en_JA\",\r\n\t\t\t\"8202\": \"es_VE\",\r\n\t\t\t\"8204\": \"fr_RE\",\r\n\t\t\t\"8218\": \"bs_BA\",\r\n\t\t\t\"8251\": \"sms_FI\",\r\n\t\t\t\"9217\": \"ar_YE\",\r\n\t\t\t\"9225\": \"en_CB\",\r\n\t\t\t\"9226\": \"es_CO\",\r\n\t\t\t\"9228\": \"fr_CG\",\r\n\t\t\t\"9275\": \"smn_FI\",\r\n\t\t\t\"10241\": \"ar_SY\",\r\n\t\t\t\"10249\": \"en_BZ\",\r\n\t\t\t\"10250\": \"es_PE\",\r\n\t\t\t\"10252\": \"fr_SN\",\r\n\t\t\t\"11265\": \"ar_JO\",\r\n\t\t\t\"11273\": \"en_TT\",\r\n\t\t\t\"11274\": \"es_AR\",\r\n\t\t\t\"11276\": \"fr_CM\",\r\n\t\t\t\"12289\": \"ar_LB\",\r\n\t\t\t\"12297\": \"en_ZW\",\r\n\t\t\t\"12298\": \"es_EC\",\r\n\t\t\t\"12300\": \"fr_CI\",\r\n\t\t\t\"13313\": \"ar_KW\",\r\n\t\t\t\"13321\": \"en_PH\",\r\n\t\t\t\"13322\": \"es_CL\",\r\n\t\t\t\"13324\": \"fr_ML\",\r\n\t\t\t\"14337\": \"ar_AE\",\r\n\t\t\t\"14345\": \"en_ID\",\r\n\t\t\t\"14346\": \"es_UR\",\r\n\t\t\t\"14348\": \"fr_MA\",\r\n\t\t\t\"15361\": \"ar_BH\",\r\n\t\t\t\"15369\": \"en_HK\",\r\n\t\t\t\"15370\": \"es_PY\",\r\n\t\t\t\"15372\": \"fr_HT\",\r\n\t\t\t\"16385\": \"ar_QA\",\r\n\t\t\t\"16393\": \"en_IN\",\r\n\t\t\t\"16394\": \"es_BO\",\r\n\t\t\t\"17417\": \"en_MY\",\r\n\t\t\t\"17418\": \"es_SV\",\r\n\t\t\t\"18441\": \"en_SG\",\r\n\t\t\t\"18442\": \"es_HN\",\r\n\t\t\t\"19466\": \"es_NI\",\r\n\t\t\t\"20490\": \"es_PR\",\r\n\t\t\t\"21514\": \"es_US\",\r\n\t\t\t\"31748\": \"zh_CHT\"\r\n\t\t};\r\n\t\tconst languageParts = language.split('-');\r\n\t\tlet languageLcid: number | undefined;\r\n\t\tfor (const [lcid, iterLanguage] of Object.entries(lcidMap)) {\r\n\t\t\tconst iterLanguageParts = iterLanguage.split('_');\r\n\t\t\tif (languageParts.length <= iterLanguageParts.length &&\r\n\t\t\t\tlanguageParts.every((part, index) => part === iterLanguageParts[index])) {\r\n\t\t\t\tlanguageLcid = parseInt(lcid, 10);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (languageLcid === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Special case: Use Spanish International.\r\n\t\tif (languageLcid === 1034) {\r\n\t\t\tlanguageLcid = 3082;\r\n\t\t}\r\n\t\tconst key = reg.createKey(reg.HKLM, 'SOFTWARE\\\\Windhawk',\r\n\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_32KEY);\r\n\t\ttry {\r\n\t\t\treg.setValueDWORD(key, 'language', languageLcid);\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate enableScheduledTask(taskName: string, enable: boolean) {\r\n\t\ttry {\r\n\t\t\tconst ps = child_process.spawn('schtasks.exe', [\r\n\t\t\t\t'/change',\r\n\t\t\t\t'/tn',\r\n\t\t\t\ttaskName,\r\n\t\t\t\tenable ? '/enable' : '/disable'\r\n\t\t\t]);\r\n\r\n\t\t\tlet gotError = false;\r\n\t\t\tlet stderr = '';\r\n\r\n\t\t\tps.stderr.on('data', data => {\r\n\t\t\t\t//console.log(`ps stderr: ${data}`);\r\n\t\t\t\tstderr += data;\r\n\t\t\t});\r\n\r\n\t\t\tps.on('error', err => {\r\n\t\t\t\t//console.log('Oh no, the error: ' + err);\r\n\t\t\t\tgotError = true;\r\n\t\t\t\tvscode.window.showErrorMessage(err.message);\r\n\t\t\t});\r\n\r\n\t\t\tps.on('close', code => {\r\n\t\t\t\t//console.log(`ps process exited with code ${code}`);\r\n\t\t\t\tif (!gotError && code !== 0) {\r\n\t\t\t\t\tlet message = 'schtasks.exe error';\r\n\t\t\t\t\tconst stderrFiltered = stderr.trim().replace(/^ERROR:\\s*/, '');\r\n\t\t\t\t\tif (stderrFiltered !== '') {\r\n\t\t\t\t\t\tmessage += ': ' + stderrFiltered;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvscode.window.showWarningMessage(message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tvscode.window.showErrorMessage(e.message);\r\n\t\t}\r\n\t}\r\n}\r\n","import * as child_process from 'child_process';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\ntype WorkspacePaths = {\r\n\tmodSourcePath: string,\r\n\tstdoutOutputPath: string,\r\n\tstderrOutputPath: string\r\n};\r\n\r\nexport class CompilerError extends Error {\r\n\tpublic stdoutPath: string;\r\n\tpublic stderrPath: string;\r\n\r\n\tconstructor(stdoutPath: string, stderrPath: string) {\r\n\t\tsuper('Compilation failed, the mod might require a newer Windhawk version');\r\n\t\tthis.stdoutPath = stdoutPath;\r\n\t\tthis.stderrPath = stderrPath;\r\n\t}\r\n}\r\n\r\nexport default class CompilerUtils {\r\n\tprivate compilerPath: string;\r\n\tprivate enginePath: string;\r\n\tprivate engineModsPath: string;\r\n\r\n\tpublic constructor(compilerPath: string, enginePath: string, appDataPath: string) {\r\n\t\tthis.compilerPath = compilerPath;\r\n\t\tthis.enginePath = enginePath;\r\n\t\tthis.engineModsPath = path.join(appDataPath, 'Engine', 'Mods');\r\n\t}\r\n\r\n\tprivate doesCompiledModExist(fileName: string, bits: number) {\r\n\t\tconst compiledModPath = path.join(this.engineModsPath, bits.toString(), fileName);\r\n\t\treturn fs.existsSync(compiledModPath);\r\n\t}\r\n\r\n\tprivate async makePrecompiledHeaders(\r\n\t\tpchHeaderPath: string,\r\n\t\ttargetPchPath: string,\r\n\t\tbits: number,\r\n\t\tstdoutOutputPath: string,\r\n\t\tstderrOutputPath: string,\r\n\t\tmodId: string,\r\n\t\tmodVersion: string,\r\n\t\textraArgs: string[],\r\n\t): Promise<number | null> {\r\n\t\tconst gppPath = path.join(this.compilerPath, 'bin', 'g++.exe');\r\n\r\n\t\tconst args = [\r\n\t\t\t'-std=c++23',\r\n\t\t\t'-O2',\r\n\t\t\t'-DUNICODE',\r\n\t\t\t'-D_UNICODE',\r\n\t\t\t'-DWINVER=0x0A00',\r\n\t\t\t'-D_WIN32_WINNT=0x0A00',\r\n\t\t\t'-D_WIN32_IE=0x0A00',\r\n\t\t\t'-DNTDDI_VERSION=0x0A000008',\r\n\t\t\t'-D__USE_MINGW_ANSI_STDIO=0',\r\n\t\t\t'-DWH_MOD',\r\n\t\t\t'-DWH_MOD_ID=L\"' + modId.replace(/\"/g, '\\\\\"') + '\"',\r\n\t\t\t'-DWH_MOD_VERSION=L\"' + modVersion.replace(/\"/g, '\\\\\"') + '\"',\r\n\t\t\t'-x',\r\n\t\t\t'c++-header',\r\n\t\t\tpchHeaderPath,\r\n\t\t\t'-target',\r\n\t\t\tbits === 64 ? 'x86_64-w64-mingw32' : 'i686-w64-mingw32',\r\n\t\t\t'-o',\r\n\t\t\ttargetPchPath,\r\n\t\t\t...extraArgs.filter(arg => arg.startsWith('-D'))\r\n\t\t];\r\n\t\tconst ps = child_process.spawn(gppPath, args, {\r\n\t\t\tcwd: this.compilerPath\r\n\t\t});\r\n\r\n\t\tfs.writeFileSync(stdoutOutputPath, '');\r\n\t\tfs.writeFileSync(stderrOutputPath, '');\r\n\r\n\t\tps.stdout.on('data', data => {\r\n\t\t\tfs.appendFileSync(stdoutOutputPath, data);\r\n\t\t});\r\n\r\n\t\tps.stderr.on('data', data => {\r\n\t\t\tfs.appendFileSync(stderrOutputPath, data);\r\n\t\t});\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tps.on('error', err => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\r\n\t\t\tps.on('close', code => {\r\n\t\t\t\tresolve(code);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate async compileModInternal(\r\n\t\tmodSourcePath: string,\r\n\t\ttargetDllName: string,\r\n\t\tbits: number,\r\n\t\tstdoutOutputPath: string,\r\n\t\tstderrOutputPath: string,\r\n\t\tmodId: string,\r\n\t\tmodVersion: string,\r\n\t\textraArgs: string[],\r\n\t\tpchPath?: string\r\n\t): Promise<number | null> {\r\n\t\tconst gppPath = path.join(this.compilerPath, 'bin', 'g++.exe');\r\n\t\tconst engineLibPath = path.join(this.enginePath, bits.toString(), 'windhawk.lib');\r\n\t\tconst compiledModPath = path.join(this.engineModsPath, bits.toString(), targetDllName);\r\n\r\n\t\tfs.mkdirSync(path.dirname(compiledModPath), { recursive: true });\r\n\r\n\t\tconst cppVersion = [\r\n\t\t\t'chrome-ui-tweaks\\n1.0.0',\r\n\t\t\t'taskbar-vertical\\n1.0',\r\n\t\t].includes(`${modId}\\n${modVersion}`) ? 20 : 23;\r\n\r\n\t\tconst windowsVersionFlags = [\r\n\t\t\t'aerexplorer\\n1.6.2',\r\n\t\t\t'classic-taskdlg-fix\\n1.1.0',\r\n\t\t\t'msg-box-font-fix\\n1.5.0',\r\n\t\t].includes(`${modId}\\n${modVersion}`) ? [] : [\r\n\t\t\t'-DWINVER=0x0A00',\r\n\t\t\t'-D_WIN32_WINNT=0x0A00',\r\n\t\t\t'-D_WIN32_IE=0x0A00',\r\n\t\t\t'-DNTDDI_VERSION=0x0A000008',\r\n\t\t];\r\n\r\n\t\tlet backwardCompatibilityFlags: string[] = [];\r\n\r\n\t\tif ([\r\n\t\t\t'accent-color-sync\\n1.31',\r\n\t\t\t'aerexplorer\\n1.6.2',\r\n\t\t\t'basic-themer\\n1.1.0',\r\n\t\t\t'classic-maximized-windows-fix\\n2.1',\r\n\t\t\t'taskbar-vertical\\n1.0',\r\n\t\t\t'win7-alttab-loader\\n1.0.2',\r\n\t\t\t'ce-disable-process-button-flashing\\n1.0.1',\r\n\t\t\t'msg-box-font-fix\\n1.5.0',\r\n\t\t\t'sib-plusplus-tweaker\\n0.7',\r\n\t\t\t'windows-7-clock-spacing\\n1.0.0',\r\n\t\t].includes(`${modId}\\n${modVersion}`)) {\r\n\t\t\tbackwardCompatibilityFlags.push('-DWH_ENABLE_DEPRECATED_PARTS');\r\n\t\t}\r\n\r\n\t\tif ([\r\n\t\t\t'classic-explorer-treeview\\n1.1',\r\n\t\t\t'taskbar-button-scroll\\n1.0.6',\r\n\t\t\t'taskbar-clock-customization\\n1.3.3',\r\n\t\t\t'taskbar-notification-icon-spacing\\n1.0.2',\r\n\t\t\t'taskbar-vertical\\n1.0',\r\n\t\t\t'taskbar-wheel-cycle\\n1.1.3',\r\n\t\t].includes(`${modId}\\n${modVersion}`)) {\r\n\t\t\tbackwardCompatibilityFlags.push('-lruntimeobject');\r\n\t\t}\r\n\r\n\t\tif ([\r\n\t\t\t'taskbar-empty-space-clicks\\n1.3',\r\n\t\t].includes(`${modId}\\n${modVersion}`)) {\r\n\t\t\tbackwardCompatibilityFlags.push('-DUIATYPES_H');\r\n\t\t}\r\n\r\n\t\tconst args = [\r\n\t\t\t`-std=c++${cppVersion}`,\r\n\t\t\t'-O2',\r\n\t\t\t'-shared',\r\n\t\t\t'-DUNICODE',\r\n\t\t\t'-D_UNICODE',\r\n\t\t\t...windowsVersionFlags,\r\n\t\t\t'-D__USE_MINGW_ANSI_STDIO=0',\r\n\t\t\t'-DWH_MOD',\r\n\t\t\t'-DWH_MOD_ID=L\"' + modId.replace(/\"/g, '\\\\\"') + '\"',\r\n\t\t\t'-DWH_MOD_VERSION=L\"' + modVersion.replace(/\"/g, '\\\\\"') + '\"',\r\n\t\t\tengineLibPath,\r\n\t\t\tmodSourcePath,\r\n\t\t\t'-include',\r\n\t\t\t'windhawk_api.h',\r\n\t\t\t'-target',\r\n\t\t\tbits === 64 ? 'x86_64-w64-mingw32' : 'i686-w64-mingw32',\r\n\t\t\t'-o',\r\n\t\t\tcompiledModPath,\r\n\t\t\t...(pchPath ? ['-include-pch', pchPath] : []),\r\n\t\t\t...extraArgs,\r\n\t\t\t...backwardCompatibilityFlags,\r\n\t\t];\r\n\t\tconst ps = child_process.spawn(gppPath, args, {\r\n\t\t\tcwd: this.compilerPath\r\n\t\t});\r\n\r\n\t\tfs.writeFileSync(stdoutOutputPath, '');\r\n\t\tfs.writeFileSync(stderrOutputPath, '');\r\n\r\n\t\tps.stdout.on('data', data => {\r\n\t\t\tfs.appendFileSync(stdoutOutputPath, data);\r\n\t\t});\r\n\r\n\t\tps.stderr.on('data', data => {\r\n\t\t\tfs.appendFileSync(stderrOutputPath, data);\r\n\t\t});\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tps.on('error', err => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\r\n\t\t\tps.on('close', code => {\r\n\t\t\t\tresolve(code);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate deleteOldModFilesInFolder(modId: string, bits: number, currentDllName?: string) {\r\n\t\tconst compiledModsPath = path.join(this.engineModsPath, bits.toString());\r\n\r\n\t\tlet compiledModsDir: fs.Dir;\r\n\t\ttry {\r\n\t\t\tcompiledModsDir = fs.opendirSync(compiledModsPath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet compiledModsDirEntry: fs.Dirent | null;\r\n\t\t\twhile ((compiledModsDirEntry = compiledModsDir.readSync()) !== null) {\r\n\t\t\t\tif (!compiledModsDirEntry.isFile()) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst filename = compiledModsDirEntry.name;\r\n\t\t\t\tif (currentDllName && filename === currentDllName) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!filename.startsWith(modId + '_') || !filename.endsWith('.dll')) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst filenamePart = filename.slice((modId + '_').length, -'.dll'.length);\r\n\t\t\t\tif (!filenamePart.match(/(^|_)[0-9]+$/)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst compiledModPath = path.join(compiledModsPath, filename);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfs.unlinkSync(compiledModPath);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// Ignore errors.\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tcompiledModsDir.closeSync();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate deleteOldModFiles(modId: string, currentDllName?: string) {\r\n\t\tthis.deleteOldModFilesInFolder(modId, 32, currentDllName);\r\n\t\tthis.deleteOldModFilesInFolder(modId, 64, currentDllName);\r\n\t}\r\n\r\n\tprivate copyCompilerLibs(bits: number) {\r\n\t\tconst llvmArch = bits === 64 ? 'x86_64-w64-mingw32' : 'i686-w64-mingw32';\r\n\r\n\t\tconst libsPath = path.join(this.compilerPath, llvmArch, 'bin');\r\n\t\tconst targetModsPath = path.join(this.engineModsPath, bits.toString());\r\n\r\n\t\tfs.mkdirSync(path.dirname(targetModsPath), { recursive: true });\r\n\r\n\t\tconst libsDir = fs.opendirSync(libsPath);\r\n\r\n\t\ttry {\r\n\t\t\tlet libsDirEntry: fs.Dirent | null;\r\n\t\t\twhile ((libsDirEntry = libsDir.readSync()) !== null) {\r\n\t\t\t\tif (!libsDirEntry.isFile()) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst filename = libsDirEntry.name;\r\n\r\n\t\t\t\tconst libPath = path.join(libsPath, filename);\r\n\t\t\t\tconst libPathDest = path.join(targetModsPath, filename);\r\n\r\n\t\t\t\tif (fs.existsSync(libPathDest) &&\r\n\t\t\t\t\tfs.statSync(libPathDest).mtimeMs === fs.statSync(libPath).mtimeMs) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfs.copyFileSync(libPath, libPathDest);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (!fs.existsSync(libPathDest)) {\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// The lib file already exists, perhaps it's in use.\r\n\t\t\t\t\t// Try to rename it to a temporary name.\r\n\t\t\t\t\tconst libPathDestExt = path.extname(libPathDest);\r\n\t\t\t\t\tconst libPathDestBaseName = path.basename(libPathDest, libPathDestExt);\r\n\t\t\t\t\tfor (let i = 1; ; i++) {\r\n\t\t\t\t\t\tconst tempFilename = libPathDestBaseName + '_temp' + i + libPathDestExt;\r\n\t\t\t\t\t\tconst libPathDestTemp = path.join(targetModsPath, tempFilename);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tfs.renameSync(libPathDest, libPathDestTemp);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tif (!fs.existsSync(libPathDestTemp)) {\r\n\t\t\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfs.copyFileSync(libPath, libPathDest);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tlibsDir.closeSync();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async compileMod(\r\n\t\tmodId: string,\r\n\t\tmodVersion: string,\r\n\t\tworkspacePaths: WorkspacePaths,\r\n\t\tarchitecture?: string[],\r\n\t\tcompilerOptions?: string\r\n\t) {\r\n\t\tlet targetDllName: string;\r\n\t\tfor (; ;) {\r\n\t\t\ttargetDllName = modId + '_' + modVersion + '_' + randomIntFromInterval(100000, 999999) + '.dll';\r\n\t\t\tif (!this.doesCompiledModExist(targetDllName, 32) &&\r\n\t\t\t\t!this.doesCompiledModExist(targetDllName, 64)) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet compilerOptionsArray: string[] = [];\r\n\t\tif (compilerOptions && compilerOptions.trim() !== '') {\r\n\t\t\tcompilerOptionsArray = splitargs(compilerOptions);\r\n\t\t}\r\n\r\n\t\tconst allArchitectures: { [key: string]: number } = {\r\n\t\t\t'x86': 32,\r\n\t\t\t'x86-64': 64\r\n\t\t};\r\n\r\n\t\tfor (const arch of architecture || Object.keys(allArchitectures)) {\r\n\t\t\tconst bits = allArchitectures[arch];\r\n\t\t\tif (!bits) {\r\n\t\t\t\tthrow new Error('Unknown architecture: ' + arch);\r\n\t\t\t}\r\n\r\n\t\t\tlet pchPath: string | undefined = undefined;\r\n\t\t\tconst pchHeaderPath = path.join(path.dirname(workspacePaths.modSourcePath), 'windhawk_pch.h');\r\n\t\t\tif (fs.existsSync(pchHeaderPath)) {\r\n\t\t\t\tpchPath = path.join(path.dirname(workspacePaths.modSourcePath), `windhawk_${arch}.pch`);\r\n\t\t\t\tif (!fs.existsSync(pchPath) ||\r\n\t\t\t\t\tfs.statSync(pchPath).mtimeMs < fs.statSync(pchHeaderPath).mtimeMs) {\r\n\t\t\t\t\tconst result = await this.makePrecompiledHeaders(\r\n\t\t\t\t\t\tpchHeaderPath,\r\n\t\t\t\t\t\tpchPath,\r\n\t\t\t\t\t\tbits,\r\n\t\t\t\t\t\tworkspacePaths.stdoutOutputPath,\r\n\t\t\t\t\t\tworkspacePaths.stderrOutputPath,\r\n\t\t\t\t\t\tmodId,\r\n\t\t\t\t\t\tmodVersion,\r\n\t\t\t\t\t\tcompilerOptionsArray\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (result !== 0) {\r\n\t\t\t\t\t\tthrow new CompilerError(\r\n\t\t\t\t\t\t\tworkspacePaths.stdoutOutputPath,\r\n\t\t\t\t\t\t\tworkspacePaths.stderrOutputPath\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst result = await this.compileModInternal(\r\n\t\t\t\tworkspacePaths.modSourcePath,\r\n\t\t\t\ttargetDllName,\r\n\t\t\t\tbits,\r\n\t\t\t\tworkspacePaths.stdoutOutputPath,\r\n\t\t\t\tworkspacePaths.stderrOutputPath,\r\n\t\t\t\tmodId,\r\n\t\t\t\tmodVersion,\r\n\t\t\t\tcompilerOptionsArray,\r\n\t\t\t\tpchPath\r\n\t\t\t);\r\n\t\t\tif (result !== 0) {\r\n\t\t\t\tthrow new CompilerError(\r\n\t\t\t\t\tworkspacePaths.stdoutOutputPath,\r\n\t\t\t\t\tworkspacePaths.stderrOutputPath\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthis.copyCompilerLibs(bits);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttargetDllName,\r\n\t\t\tdeleteOldModFiles: () => this.deleteOldModFiles(modId, targetDllName)\r\n\t\t};\r\n\t}\r\n\r\n\tpublic deleteModFiles(modId: string) {\r\n\t\tthis.deleteOldModFiles(modId);\r\n\t}\r\n}\r\n\r\n// https://stackoverflow.com/a/7228322\r\n// min and max included\r\nfunction randomIntFromInterval(min: number, max: number) {\r\n\treturn Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\n// https://github.com/elgs/splitargs\r\nfunction splitargs(input: string, sep?: RegExp, keepQuotes?: boolean) {\r\n\tconst separator = sep || /\\s/g;\r\n\tlet singleQuoteOpen = false;\r\n\tlet doubleQuoteOpen = false;\r\n\tlet tokenBuffer = [];\r\n\tconst ret = [];\r\n\r\n\tconst arr = input.split('');\r\n\tfor (let i = 0; i < arr.length; ++i) {\r\n\t\tconst element = arr[i];\r\n\t\tconst matches = element.match(separator);\r\n\t\tif (element === \"'\" && !doubleQuoteOpen) {\r\n\t\t\tif (keepQuotes === true) {\r\n\t\t\t\ttokenBuffer.push(element);\r\n\t\t\t}\r\n\t\t\tsingleQuoteOpen = !singleQuoteOpen;\r\n\t\t\tcontinue;\r\n\t\t} else if (element === '\"' && !singleQuoteOpen) {\r\n\t\t\tif (keepQuotes === true) {\r\n\t\t\t\ttokenBuffer.push(element);\r\n\t\t\t}\r\n\t\t\tdoubleQuoteOpen = !doubleQuoteOpen;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!singleQuoteOpen && !doubleQuoteOpen && matches) {\r\n\t\t\tif (tokenBuffer.length > 0) {\r\n\t\t\t\tret.push(tokenBuffer.join(''));\r\n\t\t\t\ttokenBuffer = [];\r\n\t\t\t} else if (sep) {\r\n\t\t\t\tret.push(element);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttokenBuffer.push(element);\r\n\t\t}\r\n\t}\r\n\tif (tokenBuffer.length > 0) {\r\n\t\tret.push(tokenBuffer.join(''));\r\n\t} else if (sep) {\r\n\t\tret.push('');\r\n\t}\r\n\treturn ret;\r\n}\r\n","import * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport * as child_process from 'child_process';\r\nimport * as vscode from 'vscode';\r\nimport config from '../config';\r\n\r\nexport default class EditorWorkspaceUtils {\r\n\tprivate workspacePath: string;\r\n\r\n\tpublic constructor() {\r\n\t\tconst firstWorkspaceFolder = vscode.workspace.workspaceFolders?.[0];\r\n\t\tif (!firstWorkspaceFolder) {\r\n\t\t\tvscode.commands.executeCommand('workbench.action.files.openFolder');\r\n\t\t\tthrow new Error('No workspace folder');\r\n\t\t}\r\n\r\n\t\tthis.workspacePath = firstWorkspaceFolder.uri.fsPath;\r\n\t}\r\n\r\n\tpublic getFilePath(fileName: string) {\r\n\t\treturn path.join(this.workspacePath, fileName);\r\n\t}\r\n\r\n\tpublic getCompilationPaths() {\r\n\t\tconst modSourcePath = this.getFilePath('mod.wh.cpp');\r\n\t\tconst stdoutOutputPath = this.getFilePath('compiler_output.log');\r\n\t\tconst stderrOutputPath = this.getFilePath('compiler_errors.log');\r\n\t\treturn {\r\n\t\t\tmodSourcePath,\r\n\t\t\tstdoutOutputPath,\r\n\t\t\tstderrOutputPath\r\n\t\t};\r\n\t}\r\n\r\n\tpublic getDraftsPath() {\r\n\t\treturn path.join(this.workspacePath, 'Drafts');\r\n\t}\r\n\r\n\tprivate initializeEditorSettings() {\r\n\t\t// Flags for clangd.\r\n\t\tconst compileFlags = [\r\n\t\t\t'-x',\r\n\t\t\t'c++',\r\n\t\t\t'-std=c++23',\r\n\t\t\t'-target',\r\n\t\t\t'x86_64-w64-mingw32',\r\n\t\t\t'-DUNICODE',\r\n\t\t\t'-D_UNICODE',\r\n\t\t\t'-DWINVER=0x0A00',\r\n\t\t\t'-D_WIN32_WINNT=0x0A00',\r\n\t\t\t'-D_WIN32_IE=0x0A00',\r\n\t\t\t'-DNTDDI_VERSION=0x0A000008',\r\n\t\t\t'-D__USE_MINGW_ANSI_STDIO=0',\r\n\t\t\t'-DWH_MOD',\r\n\t\t\t'-DWH_EDITING',\r\n\t\t\t'-include',\r\n\t\t\t'windhawk_api.h',\r\n\t\t\t'-Wall',\r\n\t\t\t'-Wextra',\r\n\t\t\t'-Wno-unused-parameter',\r\n\t\t\t'-Wno-missing-field-initializers',\r\n\t\t];\r\n\r\n\t\tfs.writeFileSync(this.getFilePath('compile_flags.txt'), compileFlags.join('\\n') + '\\n');\r\n\r\n\t\tconst clangFormatConfig = [\r\n\t\t\t'# To override, create a .clang-format.windhawk file with the desired settings.',\r\n\t\t\t'BasedOnStyle: Chromium',\r\n\t\t\t'IndentWidth: 4',\r\n\t\t\t'CommentPragmas: ^[ \\\\t]+@[a-zA-Z]+',\r\n\t\t];\r\n\r\n\t\tif (fs.existsSync(this.getFilePath('.clang-format.windhawk'))) {\r\n\t\t\tfs.copyFileSync(this.getFilePath('.clang-format.windhawk'), this.getFilePath('.clang-format'));\r\n\t\t} else {\r\n\t\t\tfs.writeFileSync(this.getFilePath('.clang-format'), clangFormatConfig.join('\\n') + '\\n');\r\n\t\t}\r\n\r\n\t\tif (!fs.existsSync(this.getFilePath('.git'))) {\r\n\t\t\tchild_process.spawnSync('git', ['init'], { cwd: this.workspacePath, stdio: 'ignore' });\r\n\t\t}\r\n\r\n\t\tif (fs.existsSync(this.getFilePath('.git'))) {\r\n\t\t\tchild_process.spawnSync('git', ['add', 'mod.wh.cpp'], { cwd: this.workspacePath, stdio: 'ignore' });\r\n\t\t}\r\n\t}\r\n\r\n\tpublic initializeFromModSource(modSource: string, modSourceFromDrafts?: string | null) {\r\n\t\tfs.writeFileSync(this.getFilePath('mod.wh.cpp'), modSource);\r\n\r\n\t\t// Remove windhawk_api.h from older versions, it now resides in the\r\n\t\t// compiler include folder.\r\n\t\ttry {\r\n\t\t\tfs.unlinkSync(this.getFilePath('windhawk_api.h'));\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.initializeEditorSettings();\r\n\r\n\t\tif (modSourceFromDrafts) {\r\n\t\t\t// Write the new content after initializing, so that git won't stage the draft changes.\r\n\t\t\tfs.writeFileSync(this.getFilePath('mod.wh.cpp'), modSourceFromDrafts);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic saveModToDrafts(modId: string) {\r\n\t\tconst draftsPath = this.getDraftsPath();\r\n\t\tfs.mkdirSync(draftsPath, { recursive: true });\r\n\t\tfs.copyFileSync(this.getFilePath('mod.wh.cpp'), path.join(draftsPath, modId + '.wh.cpp'));\r\n\t}\r\n\r\n\tpublic loadModFromDrafts(modId: string) {\r\n\t\tconst draftsPath = this.getDraftsPath();\r\n\t\tconst modSourcePath = path.join(draftsPath, modId + '.wh.cpp');\r\n\t\tif (fs.existsSync(modSourcePath)) {\r\n\t\t\treturn fs.readFileSync(modSourcePath, 'utf8');\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic deleteModFromDrafts(modId: string) {\r\n\t\tconst draftsPath = this.getDraftsPath();\r\n\t\tconst modSourcePath = path.join(draftsPath, modId + '.wh.cpp');\r\n\t\ttry {\r\n\t\t\tfs.unlinkSync(modSourcePath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async toggleMinimalLayout(minimal: boolean) {\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tconst thenableArray: Thenable<void>[] = [];\r\n\r\n\t\tif (minimal) {\r\n\t\t\tthenableArray.push(vscode.commands.executeCommand('workbench.action.closeSidebar'));\r\n\t\t\tthenableArray.push(vscode.commands.executeCommand('workbench.action.closePanel'));\r\n\t\t\tthenableArray.push(vscodeConfig.update('workbench.activityBar.visible', false));\r\n\t\t}\r\n\r\n\t\tthenableArray.push(vscodeConfig.update('workbench.editor.showTabs', !minimal));\r\n\t\tthenableArray.push(vscodeConfig.update('workbench.statusBar.visible', !minimal));\r\n\r\n\t\treturn Promise.all(thenableArray);\r\n\t}\r\n\r\n\tpublic async enterEditorMode(modId: string, modWasModified = false) {\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tawait Promise.all([\r\n\t\t\tvscodeConfig.update('windhawk.editedModId', modId),\r\n\t\t\tvscodeConfig.update('windhawk.editedModWasModified', modWasModified),\r\n\t\t\tvscodeConfig.update('git.enabled', true)\r\n\t\t]);\r\n\r\n\t\tawait vscode.commands.executeCommand('vscode.open', vscode.Uri.file(this.getFilePath('mod.wh.cpp')), {\r\n\t\t\tpreview: false\r\n\t\t});\r\n\t\tawait vscode.commands.executeCommand('workbench.action.closeEditorsInOtherGroups');\r\n\t\tawait vscode.commands.executeCommand('workbench.action.closeOtherEditors');\r\n\t\tawait vscode.commands.executeCommand('windhawk.sidebar.focus', {\r\n\t\t\tpreserveFocus: true\r\n\t\t});\r\n\r\n\t\tif (!config.debug.disableMinimalMode) {\r\n\t\t\tawait this.toggleMinimalLayout(false);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async exitEditorMode() {\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tawait Promise.all([\r\n\t\t\tvscodeConfig.update('windhawk.editedModId', undefined),\r\n\t\t\tvscodeConfig.update('windhawk.editedModWasModified', undefined),\r\n\t\t\tvscodeConfig.update('git.enabled', undefined),\r\n\t\t]);\r\n\r\n\t\tawait vscode.commands.executeCommand('windhawk.start');\r\n\t\tawait vscode.commands.executeCommand('workbench.action.closeEditorsInOtherGroups');\r\n\t\tawait vscode.commands.executeCommand('workbench.action.closeOtherEditors');\r\n\r\n\t\tif (!config.debug.disableMinimalMode) {\r\n\t\t\tawait this.toggleMinimalLayout(true);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async restoreEditorMode() {\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tconst modIdConfig = vscodeConfig.get('windhawk.editedModId');\r\n\t\tconst modId = typeof modIdConfig === 'string' ? modIdConfig : null;\r\n\r\n\t\tif (modId) {\r\n\t\t\tconst modWasModified = !!vscodeConfig.get('windhawk.editedModWasModified');\r\n\t\t\tawait this.enterEditorMode(modId, modWasModified);\r\n\t\t\treturn {\r\n\t\t\t\tmodId,\r\n\t\t\t\tmodWasModified\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tawait this.exitEditorMode();\r\n\t\t\treturn {\r\n\t\t\t\tmodId: null\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async setEditorModeModId(modId: string) {\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tawait vscodeConfig.update('windhawk.editedModId', modId);\r\n\t}\r\n\r\n\tpublic async markEditorModeModAsModified(modified: boolean) {\r\n\t\tif (!modified && fs.existsSync(this.getFilePath('.git'))) {\r\n\t\t\tchild_process.spawn('git', ['add', 'mod.wh.cpp'], { cwd: this.workspacePath, stdio: 'ignore' });\r\n\t\t}\r\n\r\n\t\tconst vscodeConfig = vscode.workspace.getConfiguration();\r\n\t\tawait vscodeConfig.update('windhawk.editedModWasModified', modified);\r\n\t}\r\n}\r\n","import * as fs from 'fs';\r\nimport * as reg from 'native-reg';\r\nimport * as path from 'path';\r\nimport * as ini from '../ini';\r\n\r\nfunction getSettingsChangeTime() {\r\n\t// Unix timestamp in seconds, limited to a positive signed 32-bit integer.\r\n\treturn (Date.now() / 1000) & 0x7fffffff;\r\n}\r\n\r\ntype ModConfig = {\r\n\tlibraryFileName: string,\r\n\tdisabled: boolean,\r\n\tloggingEnabled: boolean,\r\n\tdebugLoggingEnabled: boolean,\r\n\tinclude: string[],\r\n\texclude: string[],\r\n\tincludeCustom: string[],\r\n\texcludeCustom: string[],\r\n\tincludeExcludeCustomOnly: boolean,\r\n\tarchitecture: string[],\r\n\tversion: string\r\n};\r\n\r\ntype ModSettings = Record<string, string | number>;\r\n\r\nfunction mergeModSettings(existingSettings: ModSettings, newSettings: ModSettings) {\r\n\tconst getNamePrefix = (name: string) => name.split('.', 1)[0].replace(/\\[\\d+\\]$/, '[0]');\r\n\r\n\tconst existingNamePrefixes: Record<string, boolean> = {};\r\n\tfor (const name of Object.keys(existingSettings)) {\r\n\t\texistingNamePrefixes[getNamePrefix(name)] = true;\r\n\t}\r\n\r\n\tconst mergedSettings: ModSettings = { ...existingSettings };\r\n\tlet existingSettingsChanged = false;\r\n\r\n\tfor (const [name, value] of Object.entries(newSettings)) {\r\n\t\tif (!existingNamePrefixes[getNamePrefix(name)]) {\r\n\t\t\tmergedSettings[name] = value;\r\n\t\t\texistingSettingsChanged = true;\r\n\t\t}\r\n\t}\r\n\r\n\treturn { mergedSettings, existingSettingsChanged };\r\n}\r\n\r\nexport interface ModConfigUtils {\r\n\tgetConfigOfInstalled(): Record<string, ModConfig>;\r\n\tdoesConfigExist(modId: string): boolean;\r\n\tgetModConfig(modId: string): ModConfig | null;\r\n\tsetModConfig(modId: string, config: Partial<ModConfig>, initialSettings?: ModSettings): void;\r\n\tgetModSettings(modId: string): ModSettings;\r\n\tsetModSettings(modId: string, settings: ModSettings): void;\r\n\tenableMod(modId: string, enable: boolean): void;\r\n\tenableLogging(modId: string, enable: boolean): void;\r\n\tdeleteMod(modId: string): void;\r\n\tchangeModId(modIdFrom: string, modIdTo: string): void;\r\n}\r\n\r\nexport class ModConfigUtilsPortable implements ModConfigUtils {\r\n\tprivate engineModsPath: string;\r\n\tprivate engineModsWritablePath: string;\r\n\r\n\tpublic constructor(appDataPath: string) {\r\n\t\tthis.engineModsPath = path.join(appDataPath, 'Engine', 'Mods');\r\n\t\tthis.engineModsWritablePath = path.join(appDataPath, 'Engine', 'ModsWritable');\r\n\t}\r\n\r\n\tprivate getModIniPath(modId: string) {\r\n\t\treturn path.join(this.engineModsPath, modId + '.ini');\r\n\t}\r\n\r\n\tprivate getModWritableIniPath(modId: string) {\r\n\t\treturn path.join(this.engineModsWritablePath, modId + '.ini');\r\n\t}\r\n\r\n\tpublic getConfigOfInstalled() {\r\n\t\tconst mods: Record<string, ModConfig> = {};\r\n\r\n\t\tlet engineModsDir: fs.Dir;\r\n\t\ttry {\r\n\t\t\tengineModsDir = fs.opendirSync(this.engineModsPath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\treturn mods;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet engineModsDirEntry: fs.Dirent | null;\r\n\t\t\twhile ((engineModsDirEntry = engineModsDir.readSync()) !== null) {\r\n\t\t\t\tif (engineModsDirEntry.isFile() && engineModsDirEntry.name.endsWith('.ini')) {\r\n\t\t\t\t\tconst engineModPath = path.join(this.engineModsPath, engineModsDirEntry.name);\r\n\t\t\t\t\tconst modConfig = ini.fromFileOrDefault(engineModPath);\r\n\r\n\t\t\t\t\tif (!modConfig.Mod?.LibraryFileName) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst modId = engineModsDirEntry.name.slice(0, -'.ini'.length);\r\n\t\t\t\t\tmods[modId] = {\r\n\t\t\t\t\t\tlibraryFileName: modConfig.Mod.LibraryFileName,\r\n\t\t\t\t\t\tdisabled: !!parseInt(modConfig.Mod.Disabled ?? '0', 10),\r\n\t\t\t\t\t\tloggingEnabled: !!parseInt(modConfig.Mod.LoggingEnabled ?? '0', 10),\r\n\t\t\t\t\t\tdebugLoggingEnabled: !!parseInt(modConfig.Mod.DebugLoggingEnabled ?? '0', 10),\r\n\t\t\t\t\t\tinclude: (modConfig.Mod.Include ?? '').split('|'),\r\n\t\t\t\t\t\texclude: (modConfig.Mod.Exclude ?? '').split('|'),\r\n\t\t\t\t\t\tincludeCustom: (modConfig.Mod.IncludeCustom ?? '').split('|'),\r\n\t\t\t\t\t\texcludeCustom: (modConfig.Mod.ExcludeCustom ?? '').split('|'),\r\n\t\t\t\t\t\tincludeExcludeCustomOnly: !!parseInt(modConfig.Mod.IncludeExcludeCustomOnly ?? '0', 10),\r\n\t\t\t\t\t\tarchitecture: (modConfig.Mod.Architecture ?? '').split('|'),\r\n\t\t\t\t\t\tversion: modConfig.Mod.Version ?? ''\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tengineModsDir.closeSync();\r\n\t\t}\r\n\r\n\t\treturn mods;\r\n\t}\r\n\r\n\tpublic doesConfigExist(modId: string) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\treturn !!modConfig.Mod?.LibraryFileName;\r\n\t}\r\n\r\n\tpublic getModConfig(modId: string) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tif (!modConfig.Mod?.LibraryFileName) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tlibraryFileName: modConfig.Mod.LibraryFileName,\r\n\t\t\tdisabled: !!parseInt(modConfig.Mod.Disabled ?? '0', 10),\r\n\t\t\tloggingEnabled: !!parseInt(modConfig.Mod.LoggingEnabled ?? '0', 10),\r\n\t\t\tdebugLoggingEnabled: !!parseInt(modConfig.Mod.DebugLoggingEnabled ?? '0', 10),\r\n\t\t\tinclude: (modConfig.Mod.Include ?? '').split('|'),\r\n\t\t\texclude: (modConfig.Mod.Exclude ?? '').split('|'),\r\n\t\t\tincludeCustom: (modConfig.Mod.IncludeCustom ?? '').split('|'),\r\n\t\t\texcludeCustom: (modConfig.Mod.ExcludeCustom ?? '').split('|'),\r\n\t\t\tincludeExcludeCustomOnly: !!parseInt(modConfig.Mod.IncludeExcludeCustomOnly ?? '0', 10),\r\n\t\t\tarchitecture: (modConfig.Mod.Architecture ?? '').split('|'),\r\n\t\t\tversion: modConfig.Mod.Version ?? ''\r\n\t\t};\r\n\t}\r\n\r\n\tprivate ModSettingsToIniSection(settings: ModSettings) {\r\n\t\tconst value: Record<string, string> = {};\r\n\t\tfor (const [k, v] of Object.entries(settings)) {\r\n\t\t\tvalue[k] = v.toString();\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic setModConfig(modId: string, config: Partial<ModConfig>, initialSettings?: ModSettings) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tmodConfig.Mod = modConfig.Mod || {};\r\n\t\tmodConfig.Settings = modConfig.Settings || {};\r\n\r\n\t\tconst configExisted = !!modConfig.Mod.LibraryFileName;\r\n\r\n\t\tif (config.libraryFileName !== undefined) {\r\n\t\t\tmodConfig.Mod.LibraryFileName = config.libraryFileName;\r\n\t\t}\r\n\t\tif (config.disabled !== undefined) {\r\n\t\t\tmodConfig.Mod.Disabled = config.disabled ? '1' : '0';\r\n\t\t}\r\n\t\tif (config.loggingEnabled !== undefined) {\r\n\t\t\tmodConfig.Mod.LoggingEnabled = config.loggingEnabled ? '1' : '0';\r\n\t\t}\r\n\t\tif (config.debugLoggingEnabled !== undefined) {\r\n\t\t\tmodConfig.Mod.DebugLoggingEnabled = config.debugLoggingEnabled ? '1' : '0';\r\n\t\t}\r\n\t\tif (config.include !== undefined) {\r\n\t\t\tmodConfig.Mod.Include = config.include.join('|');\r\n\t\t}\r\n\t\tif (config.exclude !== undefined) {\r\n\t\t\tmodConfig.Mod.Exclude = config.exclude.join('|');\r\n\t\t}\r\n\t\tif (config.includeCustom !== undefined) {\r\n\t\t\tmodConfig.Mod.IncludeCustom = config.includeCustom.join('|');\r\n\t\t}\r\n\t\tif (config.excludeCustom !== undefined) {\r\n\t\t\tmodConfig.Mod.ExcludeCustom = config.excludeCustom.join('|');\r\n\t\t}\r\n\t\tif (config.includeExcludeCustomOnly !== undefined) {\r\n\t\t\tmodConfig.Mod.IncludeExcludeCustomOnly = config.includeExcludeCustomOnly ? '1' : '0';\r\n\t\t}\r\n\t\tif (config.architecture !== undefined) {\r\n\t\t\tmodConfig.Mod.Architecture = config.architecture.join('|');\r\n\t\t}\r\n\t\tif (config.version !== undefined) {\r\n\t\t\tmodConfig.Mod.Version = config.version;\r\n\t\t}\r\n\r\n\t\tif (initialSettings !== undefined) {\r\n\t\t\tif (!configExisted) {\r\n\t\t\t\tmodConfig.Mod.SettingsChangeTime = getSettingsChangeTime().toString();\r\n\t\t\t\tmodConfig.Settings = this.ModSettingsToIniSection(initialSettings);\r\n\t\t\t} else {\r\n\t\t\t\tconst { mergedSettings, existingSettingsChanged } =\r\n\t\t\t\t\tmergeModSettings(modConfig.Settings || {}, initialSettings);\r\n\t\t\t\tif (existingSettingsChanged) {\r\n\t\t\t\t\tmodConfig.Mod.SettingsChangeTime = getSettingsChangeTime().toString();\r\n\t\t\t\t\tmodConfig.Settings = this.ModSettingsToIniSection(mergedSettings);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfs.mkdirSync(path.dirname(modIniPath), { recursive: true });\r\n\t\tini.toFile(modIniPath, modConfig);\r\n\t}\r\n\r\n\tpublic getModSettings(modId: string) {\r\n\t\tlet settings: ModSettings = {};\r\n\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tif (modConfig.Settings) {\r\n\t\t\tsettings = modConfig.Settings;\r\n\t\t}\r\n\r\n\t\treturn settings;\r\n\t}\r\n\r\n\tpublic setModSettings(modId: string, settings: ModSettings) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tmodConfig.Settings = this.ModSettingsToIniSection(settings);\r\n\r\n\t\tmodConfig.Mod = modConfig.Mod || {};\r\n\t\tmodConfig.Mod.SettingsChangeTime = getSettingsChangeTime().toString();\r\n\r\n\t\tfs.mkdirSync(path.dirname(modIniPath), { recursive: true });\r\n\t\tini.toFile(modIniPath, modConfig);\r\n\t}\r\n\r\n\tpublic enableMod(modId: string, enable: boolean) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tmodConfig.Mod = modConfig.Mod || {};\r\n\t\tmodConfig.Mod.Disabled = enable ? '0' : '1';\r\n\r\n\t\tfs.mkdirSync(path.dirname(modIniPath), { recursive: true });\r\n\t\tini.toFile(modIniPath, modConfig);\r\n\t}\r\n\r\n\tpublic enableLogging(modId: string, enable: boolean) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\tconst modConfig = ini.fromFileOrDefault(modIniPath);\r\n\r\n\t\tmodConfig.Mod = modConfig.Mod || {};\r\n\t\tmodConfig.Mod.LoggingEnabled = enable ? '1' : '0';\r\n\r\n\t\tfs.mkdirSync(path.dirname(modIniPath), { recursive: true });\r\n\t\tini.toFile(modIniPath, modConfig);\r\n\t}\r\n\r\n\tpublic deleteMod(modId: string) {\r\n\t\tconst modIniPath = this.getModIniPath(modId);\r\n\t\ttry {\r\n\t\t\tfs.unlinkSync(modIniPath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst modWritableIniPath = this.getModWritableIniPath(modId);\r\n\t\ttry {\r\n\t\t\tfs.unlinkSync(modWritableIniPath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic changeModId(modIdFrom: string, modIdTo: string) {\r\n\t\tconst modIniPathFrom = this.getModIniPath(modIdFrom);\r\n\t\tconst modIniPathTo = this.getModIniPath(modIdTo);\r\n\t\ttry {\r\n\t\t\tfs.renameSync(modIniPathFrom, modIniPathTo);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst modWritableIniPathFrom = this.getModWritableIniPath(modIdFrom);\r\n\t\tconst modWritableIniPathTo = this.getModWritableIniPath(modIdTo);\r\n\t\ttry {\r\n\t\t\tfs.renameSync(modWritableIniPathFrom, modWritableIniPathTo);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class ModConfigUtilsNonPortable implements ModConfigUtils {\r\n\tprivate regKey: reg.HKEY;\r\n\tprivate regSubKey: string;\r\n\tprivate regSubKeyModWritable: string;\r\n\r\n\tpublic constructor(regKey: reg.HKEY, regSubKey: string) {\r\n\t\tthis.regKey = regKey;\r\n\t\tthis.regSubKey = regSubKey + '\\\\Engine\\\\Mods';\r\n\t\tthis.regSubKeyModWritable = regSubKey + '\\\\Engine\\\\ModsWritable';\r\n\t}\r\n\r\n\tpublic getConfigOfInstalled() {\r\n\t\tconst mods: Record<string, ModConfig> = {};\r\n\r\n\t\tconst key = reg.openKey(this.regKey, this.regSubKey,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.ENUMERATE_SUB_KEYS | reg.Access.WOW64_64KEY);\r\n\t\tif (key) {\r\n\t\t\ttry {\r\n\t\t\t\tfor (const modId of reg.enumKeyNames(key)) {\r\n\t\t\t\t\tconst libraryFileName = reg.getValue(key, modId, 'LibraryFileName', reg.GetValueFlags.RT_REG_SZ) as string | null;\r\n\t\t\t\t\tif (!libraryFileName) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmods[modId] = {\r\n\t\t\t\t\t\tlibraryFileName,\r\n\t\t\t\t\t\tdisabled: !!reg.getValue(key, modId, 'Disabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\t\t\tloggingEnabled: !!reg.getValue(key, modId, 'LoggingEnabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\t\t\tdebugLoggingEnabled: !!reg.getValue(key, modId, 'DebugLoggingEnabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\t\t\tinclude: ((reg.getValue(key, modId, 'Include', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\t\texclude: ((reg.getValue(key, modId, 'Exclude', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\t\tincludeCustom: ((reg.getValue(key, modId, 'IncludeCustom', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\t\texcludeCustom: ((reg.getValue(key, modId, 'ExcludeCustom', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\t\tincludeExcludeCustomOnly: !!reg.getValue(key, modId, 'IncludeExcludeCustomOnly', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\t\t\tarchitecture: ((reg.getValue(key, modId, 'Architecture', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\t\t\tversion: (reg.getValue(key, modId, 'Version', reg.GetValueFlags.RT_REG_SZ) ?? '') as string\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\treg.closeKey(key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mods;\r\n\t}\r\n\r\n\tpublic doesConfigExist(modId: string) {\r\n\t\tconst key = reg.openKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.WOW64_64KEY);\r\n\t\tif (!key) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\treturn !!reg.getValue(key, null, 'LibraryFileName', reg.GetValueFlags.RT_REG_SZ);\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getModConfig(modId: string) {\r\n\t\tconst key = reg.openKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.WOW64_64KEY);\r\n\t\tif (!key) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst libraryFileName = reg.getValue(key, null, 'LibraryFileName', reg.GetValueFlags.RT_REG_SZ) as string | null;\r\n\t\t\tif (!libraryFileName) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tlibraryFileName,\r\n\t\t\t\tdisabled: !!reg.getValue(key, null, 'Disabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tloggingEnabled: !!reg.getValue(key, null, 'LoggingEnabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tdebugLoggingEnabled: !!reg.getValue(key, null, 'DebugLoggingEnabled', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tinclude: ((reg.getValue(key, null, 'Include', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\texclude: ((reg.getValue(key, null, 'Exclude', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\tincludeCustom: ((reg.getValue(key, null, 'IncludeCustom', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\texcludeCustom: ((reg.getValue(key, null, 'ExcludeCustom', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\tincludeExcludeCustomOnly: !!reg.getValue(key, null, 'IncludeExcludeCustomOnly', reg.GetValueFlags.RT_REG_DWORD),\r\n\t\t\t\tarchitecture: ((reg.getValue(key, null, 'Architecture', reg.GetValueFlags.RT_REG_SZ) ?? '') as string).split('|'),\r\n\t\t\t\tversion: (reg.getValue(key, null, 'Version', reg.GetValueFlags.RT_REG_SZ) ?? '') as string\r\n\t\t\t};\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setModConfig(modId: string, config: Partial<ModConfig>, initialSettings?: ModSettings) {\r\n\t\tlet configExisted = false;\r\n\r\n\t\tconst key = reg.createKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\tconst prevLibraryFileName = reg.getValue(key, null, 'LibraryFileName', reg.GetValueFlags.RT_REG_SZ);\r\n\t\t\tif (prevLibraryFileName) {\r\n\t\t\t\tconfigExisted = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.libraryFileName !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'LibraryFileName', config.libraryFileName);\r\n\t\t\t}\r\n\t\t\tif (config.disabled !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'Disabled', config.disabled ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (config.loggingEnabled !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'LoggingEnabled', config.loggingEnabled ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (config.debugLoggingEnabled !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'DebugLoggingEnabled', config.debugLoggingEnabled ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (config.include !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'Include', config.include.join('|'));\r\n\t\t\t}\r\n\t\t\tif (config.exclude !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'Exclude', config.exclude.join('|'));\r\n\t\t\t}\r\n\t\t\tif (config.includeCustom !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'IncludeCustom', config.includeCustom.join('|'));\r\n\t\t\t}\r\n\t\t\tif (config.excludeCustom !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'ExcludeCustom', config.excludeCustom.join('|'));\r\n\t\t\t}\r\n\t\t\tif (config.includeExcludeCustomOnly !== undefined) {\r\n\t\t\t\treg.setValueDWORD(key, 'IncludeExcludeCustomOnly', config.includeExcludeCustomOnly ? 1 : 0);\r\n\t\t\t}\r\n\t\t\tif (config.architecture !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'Architecture', config.architecture.join('|'));\r\n\t\t\t}\r\n\t\t\tif (config.version !== undefined) {\r\n\t\t\t\treg.setValueSZ(key, 'Version', config.version);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\r\n\t\tif (initialSettings !== undefined) {\r\n\t\t\tif (!configExisted) {\r\n\t\t\t\tthis.setModSettings(modId, initialSettings);\r\n\t\t\t} else {\r\n\t\t\t\tconst { mergedSettings, existingSettingsChanged } =\r\n\t\t\t\t\tmergeModSettings(this.getModSettings(modId), initialSettings);\r\n\t\t\t\tif (existingSettingsChanged) {\r\n\t\t\t\t\tthis.setModSettings(modId, mergedSettings);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getModSettings(modId: string) {\r\n\t\tconst settings: ModSettings = {};\r\n\r\n\t\tconst key = reg.openKey(this.regKey, this.regSubKey + '\\\\' + modId + '\\\\Settings',\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.WOW64_64KEY);\r\n\t\tif (key) {\r\n\t\t\ttry {\r\n\t\t\t\tfor (const valueName of reg.enumValueNames(key)) {\r\n\t\t\t\t\tconst value = reg.getValue(key, null, valueName, reg.GetValueFlags.RT_REG_DWORD | reg.GetValueFlags.RT_REG_SZ);\r\n\t\t\t\t\tif (value !== null) {\r\n\t\t\t\t\t\tif (typeof value === 'number') {\r\n\t\t\t\t\t\t\t// Add `| 0` after every math operation to get a\r\n\t\t\t\t\t\t\t// 32-bit signed integer result.\r\n\t\t\t\t\t\t\t// https://james.darpinian.com/blog/integer-math-in-javascript#tldr\r\n\t\t\t\t\t\t\tconst valueSigned = value | 0;\r\n\t\t\t\t\t\t\tsettings[valueName] = valueSigned;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsettings[valueName] = value as string;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\treg.closeKey(key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn settings;\r\n\t}\r\n\r\n\tpublic setModSettings(modId: string, settings: ModSettings) {\r\n\t\tconst settingsKey = reg.createKey(this.regKey, this.regSubKey + '\\\\' + modId + '\\\\Settings',\r\n\t\t\treg.Access.QUERY_VALUE | reg.Access.SET_VALUE | reg.Access.DELETE | reg.Access.ENUMERATE_SUB_KEYS | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\treg.deleteTree(settingsKey, null);\r\n\r\n\t\t\tfor (const [name, value] of Object.entries(settings)) {\r\n\t\t\t\tif (typeof value === 'number') {\r\n\t\t\t\t\t// Add [...] `>>> 0` for a 32-bit unsigned integer result.\r\n\t\t\t\t\t// https://james.darpinian.com/blog/integer-math-in-javascript#tldr\r\n\t\t\t\t\tconst valueUnsigned = value >>> 0;\r\n\t\t\t\t\treg.setValueDWORD(settingsKey, name, valueUnsigned);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treg.setValueSZ(settingsKey, name, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\treg.closeKey(settingsKey);\r\n\t\t}\r\n\r\n\t\tconst modKey = reg.createKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\treg.setValueDWORD(modKey, 'SettingsChangeTime', getSettingsChangeTime());\r\n\t\t} finally {\r\n\t\t\treg.closeKey(modKey);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic enableMod(modId: string, enable: boolean) {\r\n\t\tconst key = reg.createKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\treg.setValueDWORD(key, 'Disabled', enable ? 0 : 1);\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic enableLogging(modId: string, enable: boolean) {\r\n\t\tconst key = reg.createKey(this.regKey, this.regSubKey + '\\\\' + modId,\r\n\t\t\treg.Access.SET_VALUE | reg.Access.WOW64_64KEY);\r\n\t\ttry {\r\n\t\t\treg.setValueDWORD(key, 'LoggingEnabled', enable ? 1 : 0);\r\n\t\t} finally {\r\n\t\t\treg.closeKey(key);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic deleteMod(modId: string) {\r\n\t\tfor (const subKey of [this.regSubKey, this.regSubKeyModWritable]) {\r\n\t\t\tconst key = reg.openKey(this.regKey, subKey + '\\\\' + modId,\r\n\t\t\t\treg.Access.QUERY_VALUE | reg.Access.SET_VALUE | reg.Access.DELETE | reg.Access.ENUMERATE_SUB_KEYS | reg.Access.WOW64_64KEY);\r\n\t\t\tif (key) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (reg.deleteTree(key, null)) {\r\n\t\t\t\t\t\treg.deleteKey(key, '');\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\treg.closeKey(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic changeModId(modIdFrom: string, modIdTo: string) {\r\n\t\tfor (const subKey of [this.regSubKey, this.regSubKeyModWritable]) {\r\n\t\t\tconst key = reg.openKey(this.regKey, subKey + '\\\\' + modIdFrom,\r\n\t\t\t\treg.Access.WRITE | reg.Access.WOW64_64KEY);\r\n\t\t\tif (key) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treg.renameKey(key, null, modIdTo);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\treg.closeKey(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '→') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    // used for this specific key only because Object.defineProperty is slow\n    if (keyNode === '__proto__') {\n      Object.defineProperty(_result, keyNode, {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: valueNode\n      });\n    } else {\n      _result[keyNode] = valueNode;\n    }\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn’t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out  ⇒ ns-plain-safe-out\n//                             c = flow-in   ⇒ ns-plain-safe-in\n//                             c = block-key ⇒ ns-plain-safe-out\n//                             c = flow-key  ⇒ ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - “:” - “#” )\n//                            | ( /* An ns-char preceding */ “#” )\n//                            | ( “:” /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( “?” | “:” | “-” ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | “%” | “@” | “`”)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    • No ending newline => unaffected; already using strip \"-\" chomping.\n//    • Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | “-”\n      // [39] ns-uri-char     ::=  “%” ns-hex-digit ns-hex-digit | ns-word-char | “#”\n      //                         | “;” | “/” | “?” | “:” | “@” | “&” | “=” | “+” | “$” | “,”\n      //                         | “_” | “.” | “!” | “~” | “*” | “'” | “(” | “)” | “[” | “]”\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport default jsYaml;\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n","import * as fs from 'fs';\r\nimport * as yaml from 'js-yaml';\r\nimport * as jsonschema from 'jsonschema';\r\nimport * as path from 'path';\r\n\r\nconst modMetadataParams = {\r\n\tsingleValue: [\r\n\t\t'id',\r\n\t\t'version',\r\n\t\t'github',\r\n\t\t'twitter',\r\n\t\t'homepage',\r\n\t\t'compilerOptions',\r\n\t\t'license',\r\n\t],\r\n\tsingleValueLocalizable: [\r\n\t\t'name',\r\n\t\t'description',\r\n\t\t'author',\r\n\t],\r\n\tmultiValue: [\r\n\t\t'include',\r\n\t\t'exclude',\r\n\t\t'architecture',\r\n\t],\r\n} as const;\r\n\r\ntype ModMetadataParamsSingleValue = typeof modMetadataParams.singleValue[number];\r\ntype ModMetadataParamsSingleValueLocalizable = typeof modMetadataParams.singleValueLocalizable[number];\r\ntype ModMetadataParamsMultiValue = typeof modMetadataParams.multiValue[number];\r\n\r\nfunction isModMetadataParamsSingleValue(k: string): k is ModMetadataParamsSingleValue {\r\n\treturn modMetadataParams.singleValue.includes(k as any);\r\n}\r\nfunction isModMetadataParamsSingleValueLocalizable(k: string): k is ModMetadataParamsSingleValueLocalizable {\r\n\treturn modMetadataParams.singleValueLocalizable.includes(k as any);\r\n}\r\nfunction isModMetadataParamsMultiValue(k: string): k is ModMetadataParamsMultiValue {\r\n\treturn modMetadataParams.multiValue.includes(k as any);\r\n}\r\n\r\ntype ModMetadata = Partial<\r\n\tRecord<ModMetadataParamsSingleValue, string> &\r\n\tRecord<ModMetadataParamsSingleValueLocalizable, string> &\r\n\tRecord<ModMetadataParamsMultiValue, string[]>\r\n>;\r\n\r\nexport default class ModSourceUtils {\r\n\tprivate modsSourcePath: string;\r\n\r\n\tpublic constructor(appDataPath: string) {\r\n\t\tthis.modsSourcePath = path.join(appDataPath, 'ModsSource');\r\n\t}\r\n\r\n\tprivate getModSourcePath(modId: string) {\r\n\t\treturn path.join(this.modsSourcePath, modId + '.wh.cpp');\r\n\t}\r\n\r\n\tprivate getBestLanguageMatch(matchLanguage: string, candidates: {\r\n\t\tlanguage: string | null,\r\n\t\tvalue: string\r\n\t}[]) {\r\n\t\tconst languages = candidates.map(x => x.language && x.language.toLowerCase());\r\n\r\n\t\tlet iterLanguage = matchLanguage;\r\n\t\tlet foundIndex;\r\n\r\n\t\tfor (;;) {\r\n\t\t\t// Exact match.\r\n\t\t\tfoundIndex = languages.indexOf(iterLanguage);\r\n\t\t\tif (foundIndex !== -1) {\r\n\t\t\t\treturn candidates[foundIndex];\r\n\t\t\t}\r\n\r\n\t\t\t// A more specific language.\r\n\t\t\tfoundIndex = languages.findIndex(language => language && language.startsWith(iterLanguage));\r\n\t\t\tif (foundIndex !== -1) {\r\n\t\t\t\treturn candidates[foundIndex];\r\n\t\t\t}\r\n\r\n\t\t\tif (!iterLanguage.includes('-')) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\titerLanguage = iterLanguage.replace(/-[^-]*$/, '');\r\n\t\t}\r\n\r\n\t\t// No language.\r\n\t\tfoundIndex = languages.indexOf(null);\r\n\t\tif (foundIndex !== -1) {\r\n\t\t\treturn candidates[foundIndex];\r\n\t\t}\r\n\r\n\t\t// No matches of any kind, return the first item.\r\n\t\treturn candidates[0];\r\n\t}\r\n\r\n\tprivate extractMetadataRaw(modSource: string) {\r\n\t\tconst metadataBlockMatch = modSource.match(/^\\/\\/[ \\t]+==WindhawkMod==[ \\t]*$([\\s\\S]+?)^\\/\\/[ \\t]+==\\/WindhawkMod==[ \\t]*$/m);\r\n\t\tif (!metadataBlockMatch) {\r\n\t\t\tthrow new Error('Couldn\\'t find a metadata block in the source code');\r\n\t\t}\r\n\r\n\t\tconst metadataBlock = metadataBlockMatch[1];\r\n\r\n\t\tconst result: Record<string, {\r\n\t\t\tlanguage: string | null,\r\n\t\t\tvalue: string\r\n\t\t}[]> = {};\r\n\r\n\t\tfor (const line of metadataBlock.split('\\n')) {\r\n\t\t\tconst lineTrimmed = line.trimEnd();\r\n\t\t\tif (lineTrimmed === '') {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst match = lineTrimmed.match(/^\\/\\/[ \\t]+@([a-zA-Z]+)(?::([a-z]{2}(?:-[A-Z]{2})?))?[ \\t]+(.*)$/);\r\n\t\t\tif (!match) {\r\n\t\t\t\tconst lineTruncated = lineTrimmed.length > 20 ? (lineTrimmed.slice(0, 17) + '...') : lineTrimmed;\r\n\t\t\t\tthrow new Error('Couldn\\'t parse metadata line: ' + lineTruncated);\r\n\t\t\t}\r\n\r\n\t\t\tconst key = match[1];\r\n\t\t\tconst language = match[2] as string | undefined;\r\n\t\t\tconst value = match[3];\r\n\r\n\t\t\tresult[key] = result[key] ?? [];\r\n\t\t\tresult[key].push({\r\n\t\t\t\tlanguage: language ?? null,\r\n\t\t\t\tvalue\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate validateMetadata(metadata: ModMetadata) {\r\n\t\tconst modId = metadata.id;\r\n\t\tif (!modId) {\r\n\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t}\r\n\r\n\t\tif (!modId.match(/^[0-9a-z-]+$/)) {\r\n\t\t\tthrow new Error('Mod id must only contain the following characters: 0-9, a-z, and a hyphen (-)');\r\n\t\t}\r\n\r\n\t\tconst paths = {\r\n\t\t\tinclude: metadata.include,\r\n\t\t\texclude: metadata.exclude\r\n\t\t};\r\n\t\tfor (const [category, pathsArray] of Object.entries(paths)) {\r\n\t\t\tfor (const path of pathsArray || []) {\r\n\t\t\t\tif (path.match(/[/\"<>|]/)) {\r\n\t\t\t\t\tthrow new Error(`Mod ${category} path contains one of the forbidden characters: / \" < > |`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst supportedArchitecture = [\r\n\t\t\t'x86',\r\n\t\t\t'x86-64'\r\n\t\t];\r\n\t\tfor (const architecture of metadata.architecture || []) {\r\n\t\t\tif (!supportedArchitecture.includes(architecture)) {\r\n\t\t\t\tthrow new Error(`Mod architecture must be one of ${supportedArchitecture.join(', ')}: ${architecture}`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic extractMetadata(modSource: string, language: string) {\r\n\t\tconst metadataRaw = this.extractMetadataRaw(modSource);\r\n\r\n\t\tconst result: ModMetadata = {};\r\n\r\n\t\tfor (const [metadataKey, metadataValue] of Object.entries(metadataRaw)) {\r\n\t\t\tif (metadataValue.length === 0) {\r\n\t\t\t\tthrow new Error(`Missing metadata parameter: ${metadataKey}`);\r\n\t\t\t}\r\n\r\n\t\t\tif (isModMetadataParamsSingleValueLocalizable(metadataKey)) {\r\n\t\t\t\tconst languages = new Set<string | null>();\r\n\t\t\t\tfor (const item of metadataValue) {\r\n\t\t\t\t\tif (languages.has(item.language)) {\r\n\t\t\t\t\t\tthrow new Error(`Duplicate metadata parameter: ${metadataKey}` + (item.language !== null ? `:${item.language}` : ''));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlanguages.add(item.language);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult[metadataKey] = this.getBestLanguageMatch(language, metadataValue).value;\r\n\t\t\t} else if (isModMetadataParamsMultiValue(metadataKey)) {\r\n\t\t\t\tfor (const item of metadataValue) {\r\n\t\t\t\t\tif (item.language !== null) {\r\n\t\t\t\t\t\tthrow new Error(`Metadata parameter can't be localized: ${metadataKey}:${item.language}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult[metadataKey] = metadataValue.map(x => x.value);\r\n\t\t\t} else if (isModMetadataParamsSingleValue(metadataKey)) {\r\n\t\t\t\tfor (const item of metadataValue) {\r\n\t\t\t\t\tif (item.language !== null) {\r\n\t\t\t\t\t\tthrow new Error(`Metadata parameter can't be localized: ${metadataKey}:${item.language}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (metadataValue.length > 1) {\r\n\t\t\t\t\tthrow new Error(`Duplicate metadata parameter: ${metadataKey}`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult[metadataKey] = metadataValue[0].value;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`Unsupported metadata parameter: ${metadataKey}`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.validateMetadata(result);\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic appendToIdAndName(modSource: string, appendToId?: string, appendToName?: string) {\r\n\t\t// This function can be made more generic in the future, if necessary.\r\n\t\tconst search = /(^\\/\\/[ \\t]+==WindhawkMod==[ \\t]*$)([\\s\\S]+?)(^\\/\\/[ \\t]+==\\/WindhawkMod==[ \\t]*$)/m;\r\n\t\treturn modSource.replace(search, (match, p1: string, p2: string, p3: string) => {\r\n\t\t\tlet p2New = p2;\r\n\r\n\t\t\tif(appendToId) {\r\n\t\t\t\tp2New = p2New.replace(/^(\\/\\/[ \\t]+@id[ \\t]+)(.*?)([ \\t]*)$/m,\r\n\t\t\t\t\t'$1$2' + appendToId.replace(/\\$/g, '$$$$') + '$3');\r\n\t\t\t}\r\n\r\n\t\t\tif (appendToName) {\r\n\t\t\t\tp2New = p2New.replace(/^(\\/\\/[ \\t]+@name(?::(?:[a-z]{2}(?:-[A-Z]{2})?))?[ \\t]+)(.*?)([ \\t]*)$/mg,\r\n\t\t\t\t\t'$1$2' + appendToName.replace(/\\$/g, '$$$$') + '$3');\r\n\t\t\t}\r\n\r\n\t\t\treturn p1 + p2New + p3;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getMetadataOfInstalled(language: string, onLoadError: (modId: string, error: Error) => void) {\r\n\t\tconst mods: Record<string, ModMetadata> = {};\r\n\r\n\t\tlet modsSourceDir: fs.Dir;\r\n\t\ttry {\r\n\t\t\tmodsSourceDir = fs.opendirSync(this.modsSourcePath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\treturn mods;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlet modsSourceDirEntry: fs.Dirent | null;\r\n\t\t\twhile ((modsSourceDirEntry = modsSourceDir.readSync()) !== null) {\r\n\t\t\t\tif (modsSourceDirEntry.isFile() && modsSourceDirEntry.name.endsWith('.wh.cpp')) {\r\n\t\t\t\t\tconst modId = modsSourceDirEntry.name.slice(0, -'.wh.cpp'.length);\r\n\t\t\t\t\tconst modSourcePath = path.join(this.modsSourcePath, modsSourceDirEntry.name);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst modSourceMetadata = this.extractMetadata(fs.readFileSync(modSourcePath, 'utf8'), language);\r\n\t\t\t\t\t\tmods[modId] = modSourceMetadata;\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tonLoadError(modId, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tmodsSourceDir.closeSync();\r\n\t\t}\r\n\r\n\t\treturn mods;\r\n\t}\r\n\r\n\tpublic getSource(modId: string) {\r\n\t\tconst modSourcePath = this.getModSourcePath(modId);\r\n\t\treturn fs.readFileSync(modSourcePath, 'utf8');\r\n\t}\r\n\r\n\tpublic setSource(modId: string, modSource: string) {\r\n\t\tconst modSourcePath = this.getModSourcePath(modId);\r\n\t\tfs.mkdirSync(path.dirname(modSourcePath), { recursive: true });\r\n\t\tfs.writeFileSync(modSourcePath, modSource);\r\n\t}\r\n\r\n\tpublic doesSourceExist(modId: string) {\r\n\t\tconst modSourcePath = this.getModSourcePath(modId);\r\n\t\treturn fs.existsSync(modSourcePath);\r\n\t}\r\n\r\n\tpublic extractReadme(modSource: string) {\r\n\t\tconst readmeBlockMatch = modSource.match(/^\\/\\/[ \\t]+==WindhawkModReadme==[ \\t]*$\\s*\\/\\*\\s*([\\s\\S]+?)\\s*\\*\\/\\s*^\\/\\/[ \\t]+==\\/WindhawkModReadme==[ \\t]*$/m);\r\n\t\tif (readmeBlockMatch === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn readmeBlockMatch[1];\r\n\t}\r\n\r\n\tprivate extractInitialSettingsRaw(modSource: string) {\r\n\t\tconst settingsBlockMatch = modSource.match(/^\\/\\/[ \\t]+==WindhawkModSettings==[ \\t]*$\\s*\\/\\*\\s*([\\s\\S]+?)\\s*\\*\\/\\s*^\\/\\/[ \\t]+==\\/WindhawkModSettings==[ \\t]*$/m);\r\n\t\tif (settingsBlockMatch === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst settings = yaml.load(settingsBlockMatch[1], {\r\n\t\t\tschema: yaml.JSON_SCHEMA\r\n\t\t});\r\n\t\tif (!Array.isArray(settings)) {\r\n\t\t\tthrow new Error('Failed to parse settings: not a valid YAML array');\r\n\t\t}\r\n\r\n\t\tconst schema = {\r\n\t\t\t\"type\": \"array\",\r\n\t\t\t\"minItems\": 1,\r\n\t\t\t\"items\": {\r\n\t\t\t\t\"type\": \"object\",\r\n\t\t\t\t\"minProperties\": 1,\r\n\t\t\t\t\"additionalProperties\": false,\r\n\t\t\t\t\"patternProperties\": {\r\n\t\t\t\t\t\"^[0-9A-Za-z_-]+$\": {\r\n\t\t\t\t\t\t\"anyOf\": [\r\n\t\t\t\t\t\t\t{ \"type\": \"boolean\" },\r\n\t\t\t\t\t\t\t{ \"type\": \"number\" },\r\n\t\t\t\t\t\t\t{ \"type\": \"string\" },\r\n\t\t\t\t\t\t\t{ \"$ref\": \"#\" },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"type\": \"array\",\r\n\t\t\t\t\t\t\t\t\"minItems\": 1,\r\n\t\t\t\t\t\t\t\t\"anyOf\": [\r\n\t\t\t\t\t\t\t\t\t{ \"items\": { \"type\": \"number\" } },\r\n\t\t\t\t\t\t\t\t\t{ \"items\": { \"type\": \"string\" } },\r\n\t\t\t\t\t\t\t\t\t{ \"items\": { \"$ref\": \"#\" } }\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"^\\\\$(name|description)(:[a-z]{2}(-[A-Z]{2})?)?$\": {\r\n\t\t\t\t\t\t\"type\": \"string\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"^\\\\$(options)(:[a-z]{2}(-[A-Z]{2})?)?$\": {\r\n\t\t\t\t\t\t\"type\": \"array\",\r\n\t\t\t\t\t\t\"minItems\": 2,\r\n\t\t\t\t\t\t\"items\": {\r\n\t\t\t\t\t\t\t\"type\": \"object\",\r\n\t\t\t\t\t\t\t\"minProperties\": 1,\r\n\t\t\t\t\t\t\t\"maxProperties\": 1,\r\n\t\t\t\t\t\t\t\"patternProperties\": {\r\n\t\t\t\t\t\t\t\t\"^.*$\": {\r\n\t\t\t\t\t\t\t\t\t\"type\": \"string\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst validatorResult = jsonschema.validate(settings, schema);\r\n\t\tif (!validatorResult.valid) {\r\n\t\t\tthrow new Error('Failed to parse settings: ' + validatorResult.toString());\r\n\t\t}\r\n\r\n\t\treturn settings as Record<string, any>[];\r\n\t}\r\n\r\n\tpublic extractInitialSettings(modSource: string, language: string) {\r\n\t\tconst parseSettings = (settings: Record<string, any>[]) => {\r\n\t\t\treturn settings.map(parseSettingsValueAnnotated);\r\n\t\t};\r\n\r\n\t\tconst parseSettingsValueAnnotated = (value: Record<string, any>) => {\r\n\t\t\tconst actualParameters = Object.keys(value).filter(x => !x.startsWith('$'));\r\n\t\t\tif (actualParameters.length === 0) {\r\n\t\t\t\tthrow new Error('Missing settings key');\r\n\t\t\t} else if (actualParameters.length > 1) {\r\n\t\t\t\tthrow new Error('More than one settings key');\r\n\t\t\t}\r\n\r\n\t\t\tconst actualParameter = actualParameters[0];\r\n\t\t\tconst metaParameters = Object.keys(value).filter(x => x.startsWith('$'));\r\n\r\n\t\t\tconst result: Record<string, any> = {};\r\n\r\n\t\t\tfor (const paramWithPrefix of metaParameters) {\r\n\t\t\t\tconst param = paramWithPrefix.slice(1); // remove '$'\r\n\t\t\t\tconst paramParts = param.split(':');\r\n\r\n\t\t\t\tresult[paramParts[0]] = result[paramParts[0]] ?? [];\r\n\t\t\t\tresult[paramParts[0]].push({\r\n\t\t\t\t\tlanguage: paramParts[1] ?? null,\r\n\t\t\t\t\tvalue: value[paramWithPrefix]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfor (const key of Object.keys(result)) {\r\n\t\t\t\tresult[key] = this.getBestLanguageMatch(language, result[key]).value;\r\n\t\t\t}\r\n\r\n\t\t\tresult.key = actualParameter;\r\n\t\t\tresult.value = parseSettingsValue(value[actualParameter]);\r\n\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tconst parseSettingsValue = (value: any): any => {\r\n\t\t\tif (typeof value === 'boolean' ||\r\n\t\t\t\ttypeof value === 'number' ||\r\n\t\t\t\ttypeof value === 'string' ||\r\n\t\t\t\ttypeof value[0] === 'number' ||\r\n\t\t\t\ttypeof value[0] === 'string') {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\treturn Array.isArray(value[0]) ? value.map(parseSettings) : parseSettings(value);\r\n\t\t};\r\n\r\n\t\tconst settingsRaw = this.extractInitialSettingsRaw(modSource);\r\n\t\tif (!settingsRaw) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn parseSettings(settingsRaw);\r\n\t}\r\n\r\n\tpublic extractInitialSettingsForEngine(modSource: string) {\r\n\t\tconst parseSettings = (settings: Record<string, any>[], keyPrefix = '') => {\r\n\t\t\tfor (const value of settings) {\r\n\t\t\t\tparseSettingsValueAnnotated(value, keyPrefix);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst parseSettingsValueAnnotated = (value: Record<string, any>, keyPrefix = '') => {\r\n\t\t\tconst actualParameters = Object.keys(value).filter(x => !x.startsWith('$'));\r\n\t\t\tif (actualParameters.length === 0) {\r\n\t\t\t\tthrow new Error('Missing settings key');\r\n\t\t\t} else if (actualParameters.length > 1) {\r\n\t\t\t\tthrow new Error('More than one settings key');\r\n\t\t\t}\r\n\r\n\t\t\tconst actualParameter = actualParameters[0];\r\n\r\n\t\t\tconst key = (keyPrefix && (keyPrefix + '.')) + actualParameter;\r\n\t\t\tparseSettingsValue(value[actualParameter], key);\r\n\t\t};\r\n\r\n\t\tconst parseSettingsValue = (value: any, key: string) => {\r\n\t\t\tif (typeof value === 'boolean') {\r\n\t\t\t\tparsed[key] = value ? 1 : 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof value === 'number' ||\r\n\t\t\t\ttypeof value === 'string') {\r\n\t\t\t\tparsed[key] = value;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof value[0] === 'number' ||\r\n\t\t\t\ttypeof value[0] === 'string') {\r\n\t\t\t\tfor (const [i, item] of value.entries()) {\r\n\t\t\t\t\tparseSettingsValue(item, `${key}[${i}]`);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (Array.isArray(value[0])) {\r\n\t\t\t\tfor (const [i, item] of value.entries()) {\r\n\t\t\t\t\tparseSettings(item, `${key}[${i}]`);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tparseSettings(value, key);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst parsed: Record<string, string | number> = {};\r\n\r\n\t\tconst settingsRaw = this.extractInitialSettingsRaw(modSource);\r\n\t\tif (!settingsRaw) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tparseSettings(settingsRaw);\r\n\t\treturn parsed;\r\n\t}\r\n\r\n\tpublic deleteSource(modId: string) {\r\n\t\tconst modSourcePath = this.getModSourcePath(modId);\r\n\t\ttry {\r\n\t\t\tfs.unlinkSync(modSourcePath);\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import * as child_process from 'child_process';\r\nimport * as path from 'path';\r\nimport * as vscode from 'vscode';\r\n\r\nexport default class TrayProgramUtils {\r\n\tprivate trayProgramPath: string;\r\n\r\n\tpublic constructor(appRootPath: string) {\r\n\t\tthis.trayProgramPath = path.join(appRootPath, 'windhawk.exe');\r\n\t}\r\n\r\n\tprivate getCleanProcessEnv() {\r\n\t\t// Return the process environment, but without any environment variables\r\n\t\t// that are specific to Electron or VSCode. This is because the tray\r\n\t\t// process might run another instance of VSCode, and these variables\r\n\t\t// might cause problems (e.g. ELECTRON_RUN_AS_NODE=1).\r\n\t\tconst cleanEnv: NodeJS.ProcessEnv = {};\r\n\t\tfor (const [key, value] of Object.entries(process.env)) {\r\n\t\t\tif (!key.startsWith('ELECTRON_') &&\r\n\t\t\t\t!key.startsWith('VSCODE_') &&\r\n\t\t\t\t!key.startsWith('WINDHAWK_')) {\r\n\t\t\t\tcleanEnv[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn cleanEnv;\r\n\t}\r\n\r\n\tprivate runTrayProgramWithArgs(args: string[]) {\r\n\t\ttry {\r\n\t\t\tconst ps = child_process.spawn(this.trayProgramPath, args, {\r\n\t\t\t\tenv: this.getCleanProcessEnv(),\r\n\t\t\t});\r\n\r\n\t\t\tlet gotError = false;\r\n\r\n\t\t\tps.on('error', err => {\r\n\t\t\t\t//console.log('Oh no, the error: ' + err);\r\n\t\t\t\tgotError = true;\r\n\t\t\t\tvscode.window.showErrorMessage(err.message);\r\n\t\t\t});\r\n\r\n\t\t\tps.on('close', code => {\r\n\t\t\t\t//console.log(`ps process exited with code ${code}`);\r\n\t\t\t\tif (!gotError && code !== 0) {\r\n\t\t\t\t\tvscode.window.showWarningMessage('Communication with the Windhawk tray icon process failed, make sure it\\'s running');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tvscode.window.showErrorMessage(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate runTrayProgramWithArgsDetached(args: string[]) {\r\n\t\ttry {\r\n\t\t\tconst ps = child_process.spawn(this.trayProgramPath, args, {\r\n\t\t\t\tenv: this.getCleanProcessEnv(),\r\n\t\t\t\tdetached: true,\r\n\t\t\t\tstdio: 'ignore',\r\n\t\t\t});\r\n\r\n\t\t\tps.unref();\r\n\t\t} catch (e) {\r\n\t\t\tvscode.window.showErrorMessage(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic postAppRestart() {\r\n\t\t// We need to run this detached because if we don't, the process will be\r\n\t\t// killed when the extension is deactivated, before it has the change to\r\n\t\t// start a new VSCode instance.\r\n\t\tthis.runTrayProgramWithArgsDetached([\r\n\t\t\t'-restart'\r\n\t\t]);\r\n\t}\r\n\r\n\tpublic postNewUpdatesFound() {\r\n\t\tthis.runTrayProgramWithArgs([\r\n\t\t\t'-new-updates-found'\r\n\t\t]);\r\n\t}\r\n\r\n\tpublic postAppSettingsChanged() {\r\n\t\tthis.runTrayProgramWithArgs([\r\n\t\t\t'-app-settings-changed'\r\n\t\t]);\r\n\t}\r\n}\r\n","import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\ntype UserProfileType = {\r\n\tid?: string,\r\n\tos?: string,\r\n\tapp: Partial<{\r\n\t\tversion: string,\r\n\t\tlatestVersion: string\r\n\t}>,\r\n\tmods: Record<string, Partial<{\r\n\t\tversion: string,\r\n\t\tdisabled: boolean,\r\n\t\trating: number,\r\n\t\tlatestVersion: string\r\n\t}> | undefined>\r\n};\r\n\r\ntype onFileModified = (mtimeMs: number) => void;\r\n\r\nexport class UserProfile {\r\n\tprivate userProfilePath: string;\r\n\tprivate userProfile: UserProfileType;\r\n\tprivate onFileModified?: onFileModified;\r\n\r\n\tpublic constructor(userProfilePath: string, onFileModified?: onFileModified) {\r\n\t\tthis.userProfilePath = userProfilePath;\r\n\t\tthis.onFileModified = onFileModified;\r\n\r\n\t\tlet userProfileText: string | undefined;\r\n\t\ttry {\r\n\t\t\tuserProfileText = fs.readFileSync(userProfilePath, 'utf8');\r\n\t\t} catch (e) {\r\n\t\t\t// Ignore if file doesn't exist.\r\n\t\t\tif (e.code !== 'ENOENT') {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet userProfile: any = {};\r\n\t\tif (userProfileText) {\r\n\t\t\ttry {\r\n\t\t\t\tuserProfile = JSON.parse(userProfileText);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Ignore if file is invalid.\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tuserProfile.app = userProfile.app || {};\r\n\t\tuserProfile.mods = userProfile.mods || {};\r\n\r\n\t\tthis.userProfile = userProfile;\r\n\t}\r\n\r\n\tpublic getAppLatestVersion() {\r\n\t\treturn this.userProfile.app.latestVersion ?? null;\r\n\t}\r\n\r\n\tpublic getModRating(modId: string) {\r\n\t\treturn this.userProfile.mods[modId]?.rating ?? null;\r\n\t}\r\n\r\n\tpublic getModLatestVersion(modId: string) {\r\n\t\treturn this.userProfile.mods[modId]?.latestVersion ?? null;\r\n\t}\r\n\r\n\tpublic setModVersion(modId: string, version: string, resetLatestVersion = true) {\r\n\t\tconst mod = this.userProfile.mods[modId] || {};\r\n\r\n\t\tmod.version = version;\r\n\t\tif (resetLatestVersion) {\r\n\t\t\tdelete mod.latestVersion;\r\n\t\t}\r\n\r\n\t\tthis.userProfile.mods[modId] = mod;\r\n\t}\r\n\r\n\tpublic setModDisabled(modId: string, disabled: boolean) {\r\n\t\tconst mod = this.userProfile.mods[modId] || {};\r\n\t\tmod.disabled = disabled;\r\n\t\tthis.userProfile.mods[modId] = mod;\r\n\t}\r\n\r\n\tpublic setModRating(modId: string, rating: number) {\r\n\t\tconst mod = this.userProfile.mods[modId] || {};\r\n\t\tmod.rating = rating;\r\n\t\tthis.userProfile.mods[modId] = mod;\r\n\t}\r\n\r\n\tpublic deleteMod(modId: string) {\r\n\t\tdelete this.userProfile.mods[modId];\r\n\t}\r\n\r\n\tpublic updateLatestVersions(appLatestVersion?: string, modLatestVersions?: Record<string, string>) {\r\n\t\tlet updated = false;\r\n\r\n\t\tif (appLatestVersion && this.userProfile.app.latestVersion !== appLatestVersion) {\r\n\t\t\tthis.userProfile.app.latestVersion = appLatestVersion;\r\n\t\t\tupdated = true;\r\n\t\t}\r\n\r\n\t\tfor (const [modId, latestVersion] of Object.entries(modLatestVersions || {})) {\r\n\t\t\tconst mod = this.userProfile.mods[modId];\r\n\t\t\tif (mod && mod.latestVersion !== latestVersion) {\r\n\t\t\t\tmod.latestVersion = latestVersion;\r\n\t\t\t\tupdated = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn updated;\r\n\t}\r\n\r\n\tpublic write(asExternalUpdate = false) {\r\n\t\tfs.writeFileSync(this.userProfilePath, JSON.stringify(this.userProfile, null, 2));\r\n\t\tif (!asExternalUpdate) {\r\n\t\t\tthis.onFileModified?.(fs.statSync(this.userProfilePath).mtimeMs);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default class UserProfileUtils {\r\n\tprivate userProfilePath: string;\r\n\tprivate lastModifiedByUserMtimeMs: number | null = null;\r\n\r\n\tpublic constructor(appDataPath: string) {\r\n\t\tthis.userProfilePath = path.join(appDataPath, 'userprofile.json');\r\n\t}\r\n\r\n\tpublic getFilePath() {\r\n\t\treturn this.userProfilePath;\r\n\t}\r\n\r\n\tpublic read() {\r\n\t\treturn new UserProfile(this.userProfilePath, mtimeMs => {\r\n\t\t\tthis.lastModifiedByUserMtimeMs = mtimeMs;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getLastModifiedByUserMtimeMs() {\r\n\t\treturn this.lastModifiedByUserMtimeMs;\r\n\t}\r\n}\r\n","import * as fs from 'fs';\r\nimport fetch from 'node-fetch';\r\nimport * as path from 'path';\r\nimport * as semver from 'semver';\r\nimport * as vscode from 'vscode';\r\nimport * as i18n from 'vscode-nls-i18n';\r\nimport config from './config';\r\nimport { WindhawkLogOutput } from './logOutputChannel';\r\nimport * as storagePaths from './storagePaths';\r\nimport { AppSettings, AppSettingsUtils, AppSettingsUtilsNonPortable, AppSettingsUtilsPortable } from './utils/appSettingsUtils';\r\nimport CompilerUtils, { CompilerError } from './utils/compilerUtils';\r\nimport EditorWorkspaceUtils from './utils/editorWorkspaceUtils';\r\nimport { ModConfigUtils, ModConfigUtilsNonPortable, ModConfigUtilsPortable } from './utils/modConfigUtils';\r\nimport ModSourceUtils from './utils/modSourceUtils';\r\nimport TrayProgramUtils from './utils/trayProgramUtils';\r\nimport UserProfileUtils, { UserProfile } from './utils/userProfileUtils';\r\nimport {\r\n\tCompileEditedModData,\r\n\tCompileModData,\r\n\tDeleteModData,\r\n\tEditModData,\r\n\tEnableEditedModData,\r\n\tEnableEditedModLoggingData,\r\n\tEnableModData,\r\n\tExitEditorModeData,\r\n\tForkModData,\r\n\tGetModConfigData,\r\n\tGetModSettingsData,\r\n\tGetModSourceDataData,\r\n\tGetRepositoryModSourceDataData,\r\n\tInstallModData,\r\n\tModConfig,\r\n\tModMetadata,\r\n\tSetModSettingsData,\r\n\tUpdateAppSettingsData,\r\n\tUpdateModConfigData,\r\n\tUpdateModRatingData\r\n} from './webviewIPCMessages';\r\n\r\ntype AppUtils = {\r\n\tmodSource: ModSourceUtils,\r\n\tmodConfig: ModConfigUtils,\r\n\tcompiler: CompilerUtils,\r\n\teditorWorkspace: EditorWorkspaceUtils,\r\n\ttrayProgram: TrayProgramUtils,\r\n\tuserProfile: UserProfileUtils,\r\n\tappSettings: AppSettingsUtils\r\n};\r\n\r\n// Set to a local folder to use a dev environment.\r\n// Set to null to use the 'webview' folder.\r\nconst baseDebugReactUiPath: string | null = config.debug.reactProjectBuildPath;\r\n\r\nlet windhawkLogOutput: WindhawkLogOutput | null = null;\r\nlet windhawkCompilerOutput: vscode.OutputChannel | null = null;\r\n\r\nexport function activate(context: vscode.ExtensionContext) {\r\n\tif (!config.debug.disableEnvVarCheck && !process.env.WINDHAWK_UI_PATH) {\r\n\t\tvscode.window.showErrorMessage('Windhawk: Unsupported environment, perhaps VSCode was launched directly');\r\n\t\treturn;\r\n\t}\r\n\r\n\ttry {\r\n\t\ti18n.init(context.extensionPath);\r\n\r\n\t\twindhawkLogOutput = new WindhawkLogOutput(path.join(context.extensionPath, 'files', 'DbgViewMini.exe'));\r\n\t\twindhawkCompilerOutput = vscode.window.createOutputChannel('Windhawk Compiler');\r\n\r\n\t\tconst paths = storagePaths.getStoragePaths();\r\n\t\tconst { appRootPath, appDataPath, enginePath, compilerPath } = paths.fsPaths;\r\n\t\tconst utils: AppUtils = {\r\n\t\t\tmodSource: new ModSourceUtils(appDataPath),\r\n\t\t\tmodConfig: paths.portable\r\n\t\t\t\t? new ModConfigUtilsPortable(appDataPath)\r\n\t\t\t\t: new ModConfigUtilsNonPortable(paths.regKey, paths.regSubKey),\r\n\t\t\tcompiler: new CompilerUtils(compilerPath, enginePath, appDataPath),\r\n\t\t\teditorWorkspace: new EditorWorkspaceUtils(),\r\n\t\t\ttrayProgram: new TrayProgramUtils(appRootPath),\r\n\t\t\tuserProfile: new UserProfileUtils(appDataPath),\r\n\t\t\tappSettings: paths.portable\r\n\t\t\t\t? new AppSettingsUtilsPortable(appDataPath)\r\n\t\t\t\t: new AppSettingsUtilsNonPortable(paths.regKey, paths.regSubKey)\r\n\t\t};\r\n\r\n\t\tconst sidebarWebviewViewProvider = new WindhawkViewProvider(context.extensionUri, context.extensionPath, utils);\r\n\r\n\t\tcontext.subscriptions.push(\r\n\t\t\tvscode.window.registerWebviewViewProvider(WindhawkViewProvider.viewType, sidebarWebviewViewProvider)\r\n\t\t);\r\n\r\n\t\tcontext.subscriptions.push(\r\n\t\t\t// Note: We get notified about internal files, such as settings.json, too.\r\n\t\t\tvscode.workspace.onDidSaveTextDocument(doc => {\r\n\t\t\t\tsidebarWebviewViewProvider.fileWasModified(doc);\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tconst onEnterEditorMode = (modId: string, modWasModified = false) => {\r\n\t\t\tsidebarWebviewViewProvider.setEditedMod(modId, modWasModified);\r\n\t\t};\r\n\r\n\t\tconst onAppSettingsUpdated = () => {\r\n\t\t\tsidebarWebviewViewProvider.appSettingsUpdated();\r\n\t\t};\r\n\r\n\t\tcontext.subscriptions.push(\r\n\t\t\tvscode.commands.registerCommand('windhawk.start', (options?: WindhawkPanelOptions) => {\r\n\t\t\t\tWindhawkPanel.createOrShow(context.extensionUri, context.extensionPath, utils, {\r\n\t\t\t\t\tonEnterEditorMode,\r\n\t\t\t\t\tonAppSettingsUpdated\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t...options\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tvscode.commands.registerCommand('windhawk.compileMod', () => {\r\n\t\t\t\tsidebarWebviewViewProvider.compileMod();\r\n\t\t\t}),\r\n\t\t);\r\n\r\n\t\tutils.editorWorkspace.restoreEditorMode().then(({ modId, modWasModified }) => {\r\n\t\t\tif (modId) {\r\n\t\t\t\tsidebarWebviewViewProvider.setEditedMod(modId, !!modWasModified);\r\n\t\t\t}\r\n\t\t}).catch(e => reportException(e));\r\n\r\n\t\tconst onUserProfileModified = () => {\r\n\t\t\tconst { mtimeMs } = fs.statSync(utils.userProfile.getFilePath());\r\n\t\t\tif (mtimeMs !== utils.userProfile.getLastModifiedByUserMtimeMs()) {\r\n\t\t\t\tWindhawkPanel.userProfileChanged();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst userProfileWatcher = vscode.workspace.createFileSystemWatcher(\r\n\t\t\tnew vscode.RelativePattern(vscode.Uri.file(utils.userProfile.getFilePath()), '*'));\r\n\t\tuserProfileWatcher.onDidCreate(onUserProfileModified);\r\n\t\tuserProfileWatcher.onDidChange(onUserProfileModified);\r\n\t\tcontext.subscriptions.push(userProfileWatcher);\r\n\t} catch (e) {\r\n\t\treportException(e);\r\n\t}\r\n}\r\n\r\ntype RepositoryModsType = Record<string, any>;\r\n\r\ntype WindhawkPanelCallbacks = {\r\n\tonEnterEditorMode: (modId: string, modWasModified: boolean) => void,\r\n\tonAppSettingsUpdated: () => void\r\n};\r\n\r\ntype WindhawkPanelParams = {\r\n\tpreviewModId?: string\r\n};\r\n\r\ntype WindhawkPanelOptions = {\r\n\ttitle: string,\r\n\tcreateColumn?: vscode.ViewColumn,\r\n\tparams?: WindhawkPanelParams\r\n};\r\n\r\n/**\r\n * Manages Windhawk webview panels.\r\n */\r\nclass WindhawkPanel {\r\n\t/**\r\n\t * Track the currently panel. Only allow a single panel to exist at a time.\r\n\t */\r\n\tpublic static currentPanel: WindhawkPanel | undefined;\r\n\r\n\tpublic static readonly viewType = 'windhawk';\r\n\r\n\tprivate readonly _panel: vscode.WebviewPanel;\r\n\tprivate readonly _extensionUri: vscode.Uri;\r\n\tprivate readonly _extensionPath: string;\r\n\tprivate readonly _utils: AppUtils;\r\n\tprivate readonly _callbacks: WindhawkPanelCallbacks;\r\n\tprivate _disposables: vscode.Disposable[] = [];\r\n\tprivate _language = 'en';\r\n\tprivate _checkForUpdates = true;\r\n\r\n\tpublic static createOrShow(\r\n\t\textensionUri: vscode.Uri,\r\n\t\textensionPath: string,\r\n\t\tutils: AppUtils,\r\n\t\tcallbacks: WindhawkPanelCallbacks,\r\n\t\toptions: WindhawkPanelOptions\r\n\t) {\r\n\t\tconst column = vscode.window.activeTextEditor\r\n\t\t\t? vscode.window.activeTextEditor.viewColumn\r\n\t\t\t: undefined;\r\n\r\n\t\t// If we already have a panel, refresh and show it.\r\n\t\tif (WindhawkPanel.currentPanel) {\r\n\t\t\tWindhawkPanel.currentPanel.refresh(options.title, options.params);\r\n\t\t\tWindhawkPanel.currentPanel._panel.reveal();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Otherwise, create a new panel.\r\n\t\tconst localResourceRoots = [vscode.Uri.joinPath(extensionUri, 'webview')];\r\n\t\tif (baseDebugReactUiPath) {\r\n\t\t\tlocalResourceRoots.push(vscode.Uri.file(baseDebugReactUiPath));\r\n\t\t}\r\n\r\n\t\tconst panel = vscode.window.createWebviewPanel(\r\n\t\t\tWindhawkPanel.viewType,\r\n\t\t\toptions.title,\r\n\t\t\toptions.createColumn || column || vscode.ViewColumn.One,\r\n\t\t\t{\r\n\t\t\t\t// Enable javascript in the webview.\r\n\t\t\t\tenableScripts: true,\r\n\r\n\t\t\t\t// And restrict the webview to only loading content from our extension's `webview` directory.\r\n\t\t\t\tlocalResourceRoots\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tWindhawkPanel.currentPanel = new WindhawkPanel(panel, extensionUri, extensionPath, utils, callbacks, options.params);\r\n\t}\r\n\r\n\tpublic static refreshIfExists(title: string, params?: WindhawkPanelParams) {\r\n\t\tWindhawkPanel.currentPanel?.refresh(title, params);\r\n\t}\r\n\r\n\tprivate constructor(\r\n\t\tpanel: vscode.WebviewPanel,\r\n\t\textensionUri: vscode.Uri,\r\n\t\textensionPath: string,\r\n\t\tutils: AppUtils,\r\n\t\tcallbacks: WindhawkPanelCallbacks,\r\n\t\tparams?: WindhawkPanelParams\r\n\t) {\r\n\t\tthis._panel = panel;\r\n\t\tthis._extensionUri = extensionUri;\r\n\t\tthis._extensionPath = extensionPath;\r\n\t\tthis._utils = utils;\r\n\t\tthis._callbacks = callbacks;\r\n\r\n\t\t// Set the webview initial html content and icon.\r\n\t\tthis._panel.webview.html = this._getHtmlForWebview(this._panel.webview, params);\r\n\t\tthis._panel.iconPath = {\r\n\t\t\tlight: vscode.Uri.joinPath(extensionUri, 'assets', 'tab-icon-black.svg'),\r\n\t\t\tdark: vscode.Uri.joinPath(extensionUri, 'assets', 'tab-icon-white.svg')\r\n\t\t};\r\n\r\n\t\t// Listen for when the panel is disposed.\r\n\t\t// This happens when the user closes the panel or when the panel is closed programmatically.\r\n\t\tthis._panel.onDidDispose(() => this.dispose(), null, this._disposables);\r\n\r\n\t\t// Handle messages from the webview.\r\n\t\tthis._panel.webview.onDidReceiveMessage(\r\n\t\t\tmessage => this._handleMessage(message),\r\n\t\t\tnull,\r\n\t\t\tthis._disposables\r\n\t\t);\r\n\t}\r\n\r\n\tpublic refresh(title: string, params?: WindhawkPanelParams) {\r\n\t\tthis._panel.title = title;\r\n\r\n\t\t// To refresh, first clear the html.\r\n\t\tthis._panel.webview.html = '';\r\n\t\tthis._panel.webview.html = this._getHtmlForWebview(this._panel.webview, params);\r\n\t}\r\n\r\n\tpublic static userProfileChanged() {\r\n\t\t// If we don't already have a panel, there's nothing to update.\r\n\t\tif (!WindhawkPanel.currentPanel) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tWindhawkPanel.currentPanel._userProfileChanged();\r\n\t}\r\n\r\n\tpublic dispose() {\r\n\t\tWindhawkPanel.currentPanel = undefined;\r\n\r\n\t\t// Clean up our resources.\r\n\t\tthis._panel.dispose();\r\n\r\n\t\twhile (this._disposables.length) {\r\n\t\t\tconst x = this._disposables.pop();\r\n\t\t\tif (x) {\r\n\t\t\t\tx.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getHtmlForWebview(webview: vscode.Webview, params?: WindhawkPanelParams) {\r\n\t\tconst webviewPathOnDisk = baseDebugReactUiPath\r\n\t\t\t? vscode.Uri.file(baseDebugReactUiPath)\r\n\t\t\t: vscode.Uri.joinPath(this._extensionUri, 'webview');\r\n\r\n\t\tconst baseWebviewUri = webview.asWebviewUri(webviewPathOnDisk);\r\n\t\tlet html = fs.readFileSync(vscode.Uri.joinPath(webviewPathOnDisk, 'index.html').fsPath, 'utf8');\r\n\r\n\t\tconst csp = [\r\n\t\t\t`default-src 'none'`,\r\n\t\t\t`style-src 'unsafe-inline' ${webview.cspSource}`,\r\n\t\t\t`img-src ${webview.cspSource} data: https://i.imgur.com https://raw.githubusercontent.com`,\r\n\t\t\t`script-src ${webview.cspSource}`,\r\n\t\t\t`connect-src ${webview.cspSource} https://mods.windhawk.net`,\r\n\t\t\t`font-src ${webview.cspSource}`\r\n\t\t];\r\n\r\n\t\thtml = html.replace('<head>', `<head>\r\n\t\t\t<base href=\"${baseWebviewUri.toString()}/\">\r\n\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"${csp.join('; ')};\">\r\n\t\t`);\r\n\r\n\t\tconst dataParams = params ? ` data-params=\"${escapeHtml(JSON.stringify(params))}\"` : '';\r\n\r\n\t\thtml = html.replace(/<body([^>]*)>/, `<body data-content=\"panel\"${dataParams}$1>`);\r\n\r\n\t\treturn html;\r\n\t}\r\n\r\n\tprivate _getAppUISettings(appSettings: AppSettings, userProfile?: UserProfile) {\r\n\t\tlet updateIsAvailable = false;\r\n\t\tif (!appSettings.disableUpdateCheck) {\r\n\t\t\ttry {\r\n\t\t\t\tconst currentVersion = semver.coerce(vscode.extensions.getExtension('m417z.windhawk')?.packageJSON.version);\r\n\t\t\t\tconst latestVersion = semver.coerce((userProfile || this._utils.userProfile.read()).getAppLatestVersion());\r\n\t\t\t\tupdateIsAvailable = !!(currentVersion && latestVersion && semver.lt(currentVersion, latestVersion));\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tlanguage: appSettings.language,\r\n\t\t\tdevModeOptOut: appSettings.devModeOptOut,\r\n\t\t\tdevModeUsedAtLeastOnce: appSettings.devModeUsedAtLeastOnce,\r\n\t\t\tupdateIsAvailable,\r\n\t\t\tsafeMode: appSettings.safeMode\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _userProfileChanged() {\r\n\t\ttry {\r\n\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\r\n\t\t\t// First, recalculate UI settings, since the update availability value\r\n\t\t\t// depends on the user profile.\r\n\t\t\tconst appSettings = this._utils.appSettings.getAppSettings();\r\n\t\t\tthis._language = appSettings.language;\r\n\t\t\tthis._checkForUpdates = !appSettings.disableUpdateCheck;\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'event',\r\n\t\t\t\tcommand: 'setNewAppSettings',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tappUISettings: this._getAppUISettings(appSettings, userProfile)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Next, recalculate mod values which depend on the user profile.\r\n\t\t\tconst installedModsDetails: Record<string, {\r\n\t\t\t\tupdateAvailable: boolean,\r\n\t\t\t\tuserRating: number\r\n\t\t\t}> = {};\r\n\r\n\t\t\tconst modsMetadata = this._utils.modSource.getMetadataOfInstalled(this._language, (modId, error) => {\r\n\t\t\t\tvscode.window.showErrorMessage(`Failed to load mod ${modId}: ${error}`);\r\n\t\t\t});\r\n\t\t\tconst modsConfig = this._utils.modConfig.getConfigOfInstalled();\r\n\r\n\t\t\tfor (const modId of new Set([...Object.keys(modsMetadata), ...Object.keys(modsConfig)])) {\r\n\t\t\t\tconst modLatestVersion = this._checkForUpdates && userProfile.getModLatestVersion(modId);\r\n\t\t\t\tconst updateAvailable = !!(modLatestVersion && modLatestVersion !== (modsMetadata[modId]?.version || ''));\r\n\t\t\t\tconst userRating = userProfile.getModRating(modId) || 0;\r\n\t\t\t\tinstalledModsDetails[modId] = {\r\n\t\t\t\t\tupdateAvailable,\r\n\t\t\t\t\tuserRating: userRating\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'event',\r\n\t\t\t\tcommand: 'updateInstalledModsDetails',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdetails: installedModsDetails\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\treportException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate readonly _handleMessageMap: Record<string, (message: any) => void> = {\r\n\t\tgetInitialAppSettings: message => {\r\n\t\t\tlet appUISettings = null;\r\n\t\t\ttry {\r\n\t\t\t\tconst appSettings = this._utils.appSettings.getAppSettings();\r\n\t\t\t\tthis._language = appSettings.language;\r\n\t\t\t\tthis._checkForUpdates = !appSettings.disableUpdateCheck;\r\n\r\n\t\t\t\tappUISettings = this._getAppUISettings(appSettings);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getInitialAppSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tappUISettings\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetInstalledMods: message => {\r\n\t\t\tconst installedMods: Record<string, {\r\n\t\t\t\tmetadata: ModMetadata | null,\r\n\t\t\t\tconfig: ModConfig | null,\r\n\t\t\t\tupdateAvailable: boolean,\r\n\t\t\t\tuserRating: number\r\n\t\t\t}> = {};\r\n\t\t\ttry {\r\n\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\tconst modsMetadata = this._utils.modSource.getMetadataOfInstalled(this._language, (modId, error) => {\r\n\t\t\t\t\tvscode.window.showErrorMessage(`Failed to load mod ${modId}: ${error}`);\r\n\t\t\t\t});\r\n\t\t\t\tconst modsConfig = this._utils.modConfig.getConfigOfInstalled();\r\n\r\n\t\t\t\tfor (const modId of new Set([...Object.keys(modsMetadata), ...Object.keys(modsConfig)])) {\r\n\t\t\t\t\tconst modLatestVersion = this._checkForUpdates && userProfile.getModLatestVersion(modId);\r\n\t\t\t\t\tconst updateAvailable = !!(modLatestVersion && modLatestVersion !== (modsMetadata[modId]?.version || ''));\r\n\t\t\t\t\tconst userRating = userProfile.getModRating(modId) || 0;\r\n\t\t\t\t\tinstalledMods[modId] = {\r\n\t\t\t\t\t\tmetadata: modsMetadata[modId] || null,\r\n\t\t\t\t\t\tconfig: modsConfig[modId] || null,\r\n\t\t\t\t\t\tupdateAvailable,\r\n\t\t\t\t\t\tuserRating: userRating\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getInstalledMods',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tinstalledMods\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetFeaturedMods: async message => {\r\n\t\t\tlet featuredMods = null;\r\n\t\t\ttry {\r\n\t\t\t\tconst repositoryMods = await this._fetchRepositoryMods();\r\n\t\t\t\tfeaturedMods = Object.fromEntries(\r\n\t\t\t\t\tObject.entries(repositoryMods).filter(([k, v]) => v.featured));\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getFeaturedMods',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tfeaturedMods\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetRepositoryMods: async message => {\r\n\t\t\tlet unifiedModsData: Record<string, {\r\n\t\t\t\trepository: any,\r\n\t\t\t\tinstalled?: {\r\n\t\t\t\t\tmetadata: ModMetadata | null,\r\n\t\t\t\t\tconfig: ModConfig | null,\r\n\t\t\t\t\tuserRating: number\r\n\t\t\t\t}\r\n\t\t\t}> | null = null;\r\n\t\t\ttry {\r\n\t\t\t\tconst repositoryMods = await this._fetchRepositoryMods();\r\n\r\n\t\t\t\tunifiedModsData = {};\r\n\t\t\t\tfor (const [modId, value] of Object.entries(repositoryMods)) {\r\n\t\t\t\t\tunifiedModsData[modId] = {\r\n\t\t\t\t\t\trepository: value\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\tconst modsMetadata = this._utils.modSource.getMetadataOfInstalled(this._language, (modId, error) => {\r\n\t\t\t\t\tvscode.window.showErrorMessage(`Failed to load mod ${modId}: ${error}`);\r\n\t\t\t\t});\r\n\t\t\t\tconst modsConfig = this._utils.modConfig.getConfigOfInstalled();\r\n\r\n\t\t\t\tfor (const modId of new Set([...Object.keys(modsMetadata), ...Object.keys(modsConfig)])) {\r\n\t\t\t\t\tif (unifiedModsData[modId]) {\r\n\t\t\t\t\t\tconst userRating = userProfile.getModRating(modId) || 0;\r\n\t\t\t\t\t\tunifiedModsData[modId].installed = {\r\n\t\t\t\t\t\t\tmetadata: modsMetadata[modId] || null,\r\n\t\t\t\t\t\t\tconfig: modsConfig[modId] || null,\r\n\t\t\t\t\t\t\tuserRating\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getRepositoryMods',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmods: unifiedModsData\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetModSourceData: message => {\r\n\t\t\tconst data: GetModSourceDataData = message.data;\r\n\r\n\t\t\tlet source = null;\r\n\t\t\ttry {\r\n\t\t\t\tsource = this._utils.modSource.getSource(data.modId);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tlet metadata = null;\r\n\t\t\tlet readme = null;\r\n\t\t\tlet initialSettings = null;\r\n\t\t\tif (source) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmetadata = this._utils.modSource.extractMetadata(source, this._language);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\treadme = this._utils.modSource.extractReadme(source);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tinitialSettings = this._utils.modSource.extractInitialSettings(source, this._language);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getModSourceData',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\tmetadata,\r\n\t\t\t\t\t\treadme,\r\n\t\t\t\t\t\tinitialSettings\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetRepositoryModSourceData: async message => {\r\n\t\t\tconst data: GetRepositoryModSourceDataData = message.data;\r\n\r\n\t\t\tlet source = null;\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await fetch(config.urls.modsFolder + data.modId + '.wh.cpp');\r\n\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\tthrow Error('Server error: ' + (response.statusText || response.status));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsource = await response.text();\r\n\r\n\t\t\t\t// Make sure the source code has CRLF newlines.\r\n\t\t\t\tsource = source.replace(/\\r\\n|\\r|\\n/g, '\\r\\n');\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tlet metadata = null;\r\n\t\t\tlet readme = null;\r\n\t\t\tlet initialSettings = null;\r\n\t\t\tif (source) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmetadata = this._utils.modSource.extractMetadata(source, this._language);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\treadme = this._utils.modSource.extractReadme(source);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tinitialSettings = this._utils.modSource.extractInitialSettings(source, this._language);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treportException(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getRepositoryModSourceData',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsource,\r\n\t\t\t\t\t\tmetadata,\r\n\t\t\t\t\t\treadme,\r\n\t\t\t\t\t\tinitialSettings\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetModSettings: message => {\r\n\t\t\tconst data: GetModSettingsData = message.data;\r\n\r\n\t\t\tlet modSettings = null;\r\n\t\t\ttry {\r\n\t\t\t\tmodSettings = this._utils.modConfig.getModSettings(data.modId);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getModSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tsettings: modSettings || {}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetModSettings: message => {\r\n\t\t\tconst data: SetModSettingsData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tthis._utils.modConfig.setModSettings(data.modId, data.settings);\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'setModSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetModConfig: message => {\r\n\t\t\tconst data: GetModConfigData = message.data;\r\n\r\n\t\t\tlet modConfig = null;\r\n\t\t\ttry {\r\n\t\t\t\tmodConfig = this._utils.modConfig.getModConfig(data.modId);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getModConfig',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tconfig: modConfig\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateModConfig: message => {\r\n\t\t\tconst data: UpdateModConfigData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tthis._utils.modConfig.setModConfig(data.modId, data.config);\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'updateModConfig',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tinstallMod: async message => {\r\n\t\t\tconst data: InstallModData = message.data;\r\n\r\n\t\t\tlet installedModDetails: {\r\n\t\t\t\tmetadata: ModMetadata,\r\n\t\t\t\tconfig: ModConfig\r\n\t\t\t} | null = null;\r\n\r\n\t\t\ttry {\r\n\t\t\t\twindhawkCompilerOutput?.clear();\r\n\t\t\t\twindhawkCompilerOutput?.hide();\r\n\r\n\t\t\t\tconst modId = data.modId;\r\n\t\t\t\tconst modSource = data.modSource;\r\n\t\t\t\tconst disabled = !!data.disabled;\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t} else if (metadata.id !== modId) {\r\n\t\t\t\t\tthrow new Error('Mod id specified in the source code doesn\\'t match');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._utils.editorWorkspace.initializeFromModSource(modSource);\r\n\r\n\t\t\t\tconst initialSettingsForEngine = this._utils.modSource.extractInitialSettingsForEngine(modSource);\r\n\r\n\t\t\t\tconst { targetDllName, deleteOldModFiles } = await this._utils.compiler.compileMod(\r\n\t\t\t\t\tmodId,\r\n\t\t\t\t\tmetadata.version || '',\r\n\t\t\t\t\tthis._utils.editorWorkspace.getCompilationPaths(),\r\n\t\t\t\t\tmetadata.architecture,\r\n\t\t\t\t\tmetadata.compilerOptions\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis._utils.modConfig.setModConfig(modId, {\r\n\t\t\t\t\tlibraryFileName: targetDllName,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\t// loggingEnabled: false,\r\n\t\t\t\t\t// debugLoggingEnabled: false,\r\n\t\t\t\t\tinclude: metadata.include || [],\r\n\t\t\t\t\texclude: metadata.exclude || [],\r\n\t\t\t\t\t// includeCustom: [],\r\n\t\t\t\t\t// excludeCustom: [],\r\n\t\t\t\t\t// includeExcludeCustomOnly: false,\r\n\t\t\t\t\tarchitecture: metadata.architecture || [],\r\n\t\t\t\t\tversion: metadata.version || ''\r\n\t\t\t\t}, initialSettingsForEngine || {});\r\n\r\n\t\t\t\tthis._utils.modSource.setSource(modId, modSource);\r\n\r\n\t\t\t\tdeleteOldModFiles();\r\n\r\n\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\tuserProfile.setModVersion(modId, metadata.version || '');\r\n\t\t\t\tuserProfile.write();\r\n\r\n\t\t\t\tconst config = this._utils.modConfig.getModConfig(modId);\r\n\t\t\t\tif (!config) {\r\n\t\t\t\t\tthrow new Error('Failed to query installed mod details');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinstalledModDetails = {\r\n\t\t\t\t\tmetadata,\r\n\t\t\t\t\tconfig\r\n\t\t\t\t};\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportCompilerException(e, true);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'installMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tinstalledModDetails\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcompileMod: async message => {\r\n\t\t\tconst data: CompileModData = message.data;\r\n\r\n\t\t\tlet compiledModDetails: {\r\n\t\t\t\tmetadata: ModMetadata,\r\n\t\t\t\tconfig: ModConfig\r\n\t\t\t} | null = null;\r\n\r\n\t\t\ttry {\r\n\t\t\t\twindhawkCompilerOutput?.clear();\r\n\t\t\t\twindhawkCompilerOutput?.hide();\r\n\r\n\t\t\t\tconst modId = data.modId;\r\n\t\t\t\tconst modSource = this._utils.modSource.getSource(modId);\r\n\t\t\t\tconst disabled = !!data.disabled;\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t} else if (metadata.id !== modId.replace(/^local@/, '')) {\r\n\t\t\t\t\tthrow new Error('Mod id specified in the source code doesn\\'t match');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._utils.editorWorkspace.initializeFromModSource(modSource);\r\n\r\n\t\t\t\tconst initialSettingsForEngine = this._utils.modSource.extractInitialSettingsForEngine(modSource);\r\n\r\n\t\t\t\tconst { targetDllName, deleteOldModFiles } = await this._utils.compiler.compileMod(\r\n\t\t\t\t\tmodId,\r\n\t\t\t\t\tmetadata.version || '',\r\n\t\t\t\t\tthis._utils.editorWorkspace.getCompilationPaths(),\r\n\t\t\t\t\tmetadata.architecture,\r\n\t\t\t\t\tmetadata.compilerOptions\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis._utils.modConfig.setModConfig(modId, {\r\n\t\t\t\t\tlibraryFileName: targetDllName,\r\n\t\t\t\t\tdisabled,\r\n\t\t\t\t\t// loggingEnabled: false,\r\n\t\t\t\t\t// debugLoggingEnabled: false,\r\n\t\t\t\t\tinclude: metadata.include || [],\r\n\t\t\t\t\texclude: metadata.exclude || [],\r\n\t\t\t\t\t// includeCustom: [],\r\n\t\t\t\t\t// excludeCustom: [],\r\n\t\t\t\t\t// includeExcludeCustomOnly: false,\r\n\t\t\t\t\tarchitecture: metadata.architecture || [],\r\n\t\t\t\t\tversion: metadata.version || ''\r\n\t\t\t\t}, initialSettingsForEngine || {});\r\n\r\n\t\t\t\tdeleteOldModFiles();\r\n\r\n\t\t\t\tconst config = this._utils.modConfig.getModConfig(modId);\r\n\t\t\t\tif (!config) {\r\n\t\t\t\t\tthrow new Error('Failed to query compiled mod details');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcompiledModDetails = {\r\n\t\t\t\t\tmetadata,\r\n\t\t\t\t\tconfig\r\n\t\t\t\t};\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportCompilerException(e, true);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'compileMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tcompiledModDetails\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tenableMod: message => {\r\n\t\t\tconst data: EnableModData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tconst modId: string = data.modId;\r\n\t\t\t\tconst enable: boolean = data.enable;\r\n\r\n\t\t\t\tthis._utils.modConfig.enableMod(modId, enable);\r\n\r\n\t\t\t\tif (!modId.startsWith('local@')) {\r\n\t\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\t\tuserProfile.setModDisabled(modId, !enable);\r\n\t\t\t\t\tuserProfile.write();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'enableMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tenabled: data.enable,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreateNewMod: async message => {\r\n\t\t\ttry {\r\n\t\t\t\tconst modSourcePath = path.join(this._extensionPath, 'files', 'mod_template.wh.cpp');\r\n\t\t\t\tlet modSource = fs.readFileSync(modSourcePath, 'utf8');\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newModId = metadata.id;\r\n\t\t\t\tlet localModId = 'local@' + newModId;\r\n\t\t\t\tif (this._utils.modSource.doesSourceExist(localModId) || this._utils.modConfig.doesConfigExist(localModId)) {\r\n\t\t\t\t\tlet counter = 2;\r\n\t\t\t\t\tlet modIdSuffix;\r\n\t\t\t\t\tfor (;;) {\r\n\t\t\t\t\t\tmodIdSuffix = '-' + counter;\r\n\t\t\t\t\t\tnewModId = metadata.id + modIdSuffix;\r\n\t\t\t\t\t\tlocalModId = 'local@' + newModId;\r\n\r\n\t\t\t\t\t\tconst exists = this._utils.modSource.doesSourceExist(localModId) || this._utils.modConfig.doesConfigExist(localModId);\r\n\t\t\t\t\t\tif (!exists) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst modNameSuffix = ` (${counter})`;\r\n\t\t\t\t\tmodSource = this._utils.modSource.appendToIdAndName(modSource, modIdSuffix, modNameSuffix);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._utils.editorWorkspace.initializeFromModSource(modSource);\r\n\r\n\t\t\t\tthis._callbacks.onEnterEditorMode(newModId, false);\r\n\r\n\t\t\t\tawait this._utils.editorWorkspace.enterEditorMode(newModId);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\teditMod: async message => {\r\n\t\t\tconst data: EditModData = message.data;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst modSource = this._utils.modSource.getSource(data.modId);\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst modSourceFromDrafts = this._utils.editorWorkspace.loadModFromDrafts(metadata.id);\r\n\t\t\t\tif (modSourceFromDrafts) {\r\n\t\t\t\t\tthis._utils.editorWorkspace.deleteModFromDrafts(metadata.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._utils.editorWorkspace.initializeFromModSource(modSource, modSourceFromDrafts);\r\n\r\n\t\t\t\tthis._callbacks.onEnterEditorMode(metadata.id, !!modSourceFromDrafts);\r\n\r\n\t\t\t\tawait this._utils.editorWorkspace.enterEditorMode(metadata.id, !!modSourceFromDrafts);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\tforkMod: async message => {\r\n\t\t\tconst data: ForkModData = message.data;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tlet modSource = data.modSource || this._utils.modSource.getSource(data.modId);\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t} else if (metadata.id !== data.modId.replace(/^local@/, '')) {\r\n\t\t\t\t\tthrow new Error('Mod id specified in the source code doesn\\'t match');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet modIdSuffix = '-fork';\r\n\t\t\t\tlet forkModId = metadata.id + modIdSuffix;\r\n\t\t\t\tlet localModId = 'local@' + forkModId;\r\n\t\t\t\tlet modNameSuffix = ' - Fork';\r\n\t\t\t\tif (this._utils.modSource.doesSourceExist(localModId) || this._utils.modConfig.doesConfigExist(localModId)) {\r\n\t\t\t\t\tlet counter = 2;\r\n\t\t\t\t\tfor (;;) {\r\n\t\t\t\t\t\tmodIdSuffix = '-fork' + counter;\r\n\t\t\t\t\t\tforkModId = metadata.id + modIdSuffix;\r\n\t\t\t\t\t\tlocalModId = 'local@' + forkModId;\r\n\r\n\t\t\t\t\t\tconst exists = this._utils.modSource.doesSourceExist(localModId) || this._utils.modConfig.doesConfigExist(localModId);\r\n\t\t\t\t\t\tif (!exists) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmodNameSuffix = ` - Fork (${counter})`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodSource = this._utils.modSource.appendToIdAndName(modSource, modIdSuffix, modNameSuffix);\r\n\r\n\t\t\t\tthis._utils.editorWorkspace.initializeFromModSource(modSource);\r\n\r\n\t\t\t\tthis._callbacks.onEnterEditorMode(forkModId, false);\r\n\r\n\t\t\t\tawait this._utils.editorWorkspace.enterEditorMode(forkModId);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteMod: message => {\r\n\t\t\tconst data: DeleteModData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tconst modId: string = data.modId;\r\n\r\n\t\t\t\tthis._utils.modConfig.deleteMod(modId);\r\n\t\t\t\tthis._utils.modSource.deleteSource(modId);\r\n\r\n\t\t\t\tthis._utils.compiler.deleteModFiles(modId);\r\n\r\n\t\t\t\tif (modId.startsWith('local@')) {\r\n\t\t\t\t\tthis._utils.editorWorkspace.deleteModFromDrafts(modId.replace(/^local@/, ''));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\t\tuserProfile.deleteMod(modId);\r\n\t\t\t\t\tuserProfile.write();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'deleteMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateModRating: message => {\r\n\t\t\tconst data: UpdateModRatingData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst userProfile = this._utils.userProfile.read();\r\n\t\t\t\tuserProfile.setModRating(data.modId, data.rating);\r\n\t\t\t\tuserProfile.write();\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'updateModRating',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: data.modId,\r\n\t\t\t\t\trating: data.rating,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetAppSettings: message => {\r\n\t\t\tlet appSettings = null;\r\n\t\t\ttry {\r\n\t\t\t\tappSettings = this._utils.appSettings.getAppSettings();\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getAppSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tappSettings: appSettings || {}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateAppSettings: message => {\r\n\t\t\tconst data: UpdateAppSettingsData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tconst appSettings: Partial<AppSettings> = data.appSettings;\r\n\r\n\t\t\t\tthis._utils.appSettings.updateAppSettings(appSettings);\r\n\r\n\t\t\t\tconst newAppSettings = this._utils.appSettings.getAppSettings();\r\n\t\t\t\tthis._language = newAppSettings.language;\r\n\t\t\t\tthis._checkForUpdates = !newAppSettings.disableUpdateCheck;\r\n\r\n\t\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\tcommand: 'setNewAppSettings',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tappUISettings: this._getAppUISettings(newAppSettings)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._callbacks.onAppSettingsUpdated();\r\n\r\n\t\t\t\tif (this._utils.appSettings.shouldRestartApp(appSettings)) {\r\n\t\t\t\t\tthis._utils.trayProgram.postAppRestart();\r\n\t\t\t\t} else if (this._utils.appSettings.shouldNotifyTrayProgram(appSettings)) {\r\n\t\t\t\t\tthis._utils.trayProgram.postAppSettingsChanged();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._panel.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'updateAppSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tappSettings: data.appSettings,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowAdvancedDebugLogOutput: message => {\r\n\t\t\ttry {\r\n\t\t\t\twindhawkLogOutput?.createOrShow();\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _handleMessage(message: any) {\r\n\t\tconst { command, ...rest } = message;\r\n\t\tthis._handleMessageMap[command](rest);\r\n\t}\r\n\r\n\tprivate async _fetchRepositoryMods() {\r\n\t\tconst response = await fetch(config.urls.mods);\r\n\t\tif (!response.ok) {\r\n\t\t\tthrow Error('Server error: ' + (response.statusText || response.status));\r\n\t\t}\r\n\r\n\t\tconst data = await response.json();\r\n\t\tthis._updateUserProfileJson(data);\r\n\t\treturn data.mods as RepositoryModsType;\r\n\t}\r\n\r\n\tprivate _updateUserProfileJson(data: any) {\r\n\t\tconst userProfile = this._utils.userProfile.read();\r\n\r\n\t\tconst appLatestVersion = data.app.version;\r\n\r\n\t\tconst repositoryMods: RepositoryModsType = data.mods;\r\n\t\tconst modLatestVersion: Record<string, string> = {};\r\n\t\tfor (const [modId, value] of Object.entries(repositoryMods)) {\r\n\t\t\tconst { version } = value.metadata;\r\n\t\t\tif (version) {\r\n\t\t\t\tmodLatestVersion[modId] = version;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (userProfile.updateLatestVersions(appLatestVersion, modLatestVersion)) {\r\n\t\t\t// Set asExternalUpdate so that the file watcher will send the\r\n\t\t\t// updated data to the UI.\r\n\t\t\tconst asExternalUpdate = true;\r\n\t\t\tuserProfile.write(asExternalUpdate);\r\n\r\n\t\t\tif (this._checkForUpdates) {\r\n\t\t\t\tthis._utils.trayProgram.postNewUpdatesFound();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass WindhawkViewProvider implements vscode.WebviewViewProvider {\r\n\tpublic static readonly viewType = 'windhawk.sidebar';\r\n\r\n\tprivate _view?: vscode.WebviewView;\r\n\tprivate readonly _extensionUri: vscode.Uri;\r\n\tprivate readonly _extensionPath: string;\r\n\tprivate readonly _utils: AppUtils;\r\n\tprivate _language = 'en';\r\n\tprivate _editedModId?: string;\r\n\tprivate _editedModWasModified = false;\r\n\tprivate _editedModBeingCompiled = false;\r\n\tprivate _editedModCompilationFailed = false;\r\n\r\n\tconstructor(\r\n\t\textensionUri: vscode.Uri,\r\n\t\textensionPath: string,\r\n\t\tutils: AppUtils\r\n\t) {\r\n\t\tthis._extensionUri = extensionUri;\r\n\t\tthis._extensionPath = extensionPath;\r\n\t\tthis._utils = utils;\r\n\t}\r\n\r\n\tpublic resolveWebviewView(\r\n\t\twebviewView: vscode.WebviewView,\r\n\t\tcontext: vscode.WebviewViewResolveContext,\r\n\t\t_token: vscode.CancellationToken,\r\n\t) {\r\n\t\tthis._view = webviewView;\r\n\r\n\t\tconst localResourceRoots = [vscode.Uri.joinPath(this._extensionUri, 'webview')];\r\n\t\tif (baseDebugReactUiPath) {\r\n\t\t\tlocalResourceRoots.push(vscode.Uri.file(baseDebugReactUiPath));\r\n\t\t}\r\n\r\n\t\twebviewView.webview.options = {\r\n\t\t\t// Allow scripts in the webview.\r\n\t\t\tenableScripts: true,\r\n\r\n\t\t\t// And restrict the webview to only loading content from our extension's `webview` directory.\r\n\t\t\tlocalResourceRoots\r\n\t\t};\r\n\r\n\t\twebviewView.webview.html = this._getHtmlForWebview(webviewView.webview);\r\n\r\n\t\twebviewView.webview.onDidReceiveMessage(\r\n\t\t\tmessage => this._handleMessage(message)\r\n\t\t);\r\n\r\n\t\twebviewView.onDidChangeVisibility(() => {\r\n\t\t\tif (!webviewView.visible && this._editedModId) {\r\n\t\t\t\tvscode.window.showInformationMessage(\r\n\t\t\t\t\t'The Windhawk sidebar was closed, perhaps accidentally. ' +\r\n\t\t\t\t\t'Restore sidebar? You can also restore it with Ctrl+B.',\r\n\t\t\t\t\t'Restore sidebar'\r\n\t\t\t\t).then(value => {\r\n\t\t\t\t\tif (value === 'Restore sidebar') {\r\n\t\t\t\t\t\twebviewView.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _getHtmlForWebview(webview: vscode.Webview) {\r\n\t\tconst webviewPathOnDisk = baseDebugReactUiPath\r\n\t\t\t? vscode.Uri.file(baseDebugReactUiPath)\r\n\t\t\t: vscode.Uri.joinPath(this._extensionUri, 'webview');\r\n\r\n\t\tconst baseWebviewUri = webview.asWebviewUri(webviewPathOnDisk);\r\n\t\tlet html = fs.readFileSync(vscode.Uri.joinPath(webviewPathOnDisk, 'index.html').fsPath, 'utf8');\r\n\r\n\t\tconst csp = [\r\n\t\t\t`default-src 'none'`,\r\n\t\t\t`style-src 'unsafe-inline' ${webview.cspSource}`,\r\n\t\t\t`img-src ${webview.cspSource} data:`,\r\n\t\t\t`script-src ${webview.cspSource}`,\r\n\t\t\t`connect-src ${webview.cspSource}`,\r\n\t\t\t`font-src ${webview.cspSource}`\r\n\t\t];\r\n\r\n\t\thtml = html.replace('<head>', `<head>\r\n\t\t\t<base href=\"${baseWebviewUri.toString()}/\">\r\n\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"${csp.join('; ')};\">\r\n\t\t`);\r\n\r\n\t\thtml = html.replace(/<body([^>]*)>/, '<body data-content=\"sidebar\"$1>');\r\n\r\n\t\treturn html;\r\n\t}\r\n\r\n\tpublic fileWasModified(doc: vscode.TextDocument) {\r\n\t\tconst { modSourcePath } = this._utils.editorWorkspace.getCompilationPaths();\r\n\t\tif (doc.uri.toString(true) !== vscode.Uri.file(modSourcePath).toString(true)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this._editedModWasModified || this._editedModCompilationFailed) {\r\n\t\t\tthis._editedModWasModified = true;\r\n\t\t\tthis._editedModCompilationFailed = false;\r\n\t\t\tthis._utils.editorWorkspace.markEditorModeModAsModified(true);\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'event',\r\n\t\t\t\tcommand: 'editedModWasModified',\r\n\t\t\t\tdata: {}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic compileMod() {\r\n\t\tthis._view?.show(true);\r\n\t\tthis._view?.webview.postMessage({\r\n\t\t\ttype: 'event',\r\n\t\t\tcommand: 'compileEditedModStart',\r\n\t\t\tdata: {}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _postEditedModDetails() {\r\n\t\tif (this._editedModId) {\r\n\t\t\tconst localModId = 'local@' + this._editedModId;\r\n\t\t\tconst modConfig = this._utils.modConfig.getModConfig(localModId);\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'event',\r\n\t\t\t\tcommand: 'setEditedModDetails',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmodId: this._editedModId,\r\n\t\t\t\t\tmodDetails: modConfig,\r\n\t\t\t\t\tmodWasModified: this._editedModWasModified\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setEditedMod(modId: string, modWasModified: boolean) {\r\n\t\tthis._editedModId = modId;\r\n\t\tthis._editedModWasModified = modWasModified;\r\n\t\tthis._editedModCompilationFailed = false;\r\n\t\tthis._postEditedModDetails();\r\n\t}\r\n\r\n\tpublic appSettingsUpdated() {\r\n\t\tconst newAppSettings = this._utils.appSettings.getAppSettings();\r\n\t\tthis._language = newAppSettings.language;\r\n\r\n\t\tthis._view?.webview.postMessage({\r\n\t\t\ttype: 'event',\r\n\t\t\tcommand: 'setNewAppSettings',\r\n\t\t\tdata: {\r\n\t\t\t\tlanguage: this._language\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate readonly _handleMessageMap: Record<string, (message: any) => void> = {\r\n\t\tgetInitialAppSettings: message => {\r\n\t\t\tlet appSettings = null;\r\n\t\t\ttry {\r\n\t\t\t\tappSettings = this._utils.appSettings.getAppSettings();\r\n\t\t\t\tthis._language = appSettings.language;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'getInitialAppSettings',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tlanguage: this._language\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetInitialSidebarParams: message => {\r\n\t\t\tthis._postEditedModDetails();\r\n\t\t},\r\n\t\tenableEditedMod: message => {\r\n\t\t\tconst data: EnableEditedModData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this._editedModId) {\r\n\t\t\t\t\tthrow new Error('No mod is being edited');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst localModId = 'local@' + this._editedModId;\r\n\t\t\t\tthis._utils.modConfig.enableMod(localModId, data.enable);\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'enableEditedMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tenabled: data.enable,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tenableEditedModLogging: message => {\r\n\t\t\tconst data: EnableEditedModLoggingData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this._editedModId) {\r\n\t\t\t\t\tthrow new Error('No mod is being edited');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst localModId = 'local@' + this._editedModId;\r\n\t\t\t\tthis._utils.modConfig.enableLogging(localModId, data.enable);\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'enableEditedModLogging',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tenabled: data.enable,\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcompileEditedMod: async message => {\r\n\t\t\tconst data: CompileEditedModData = message.data;\r\n\r\n\t\t\tif (this._editedModBeingCompiled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._editedModBeingCompiled = true;\r\n\r\n\t\t\tlet succeeded = false;\r\n\r\n\t\t\ttry {\r\n\t\t\t\twindhawkCompilerOutput?.clear();\r\n\r\n\t\t\t\tif (!this._editedModId) {\r\n\t\t\t\t\tthrow new Error('No mod is being edited');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait vscode.workspace.saveAll(false);\r\n\r\n\t\t\t\tconst oldModId = this._editedModId;\r\n\t\t\t\tconst localOldModId = 'local@' + this._editedModId;\r\n\r\n\t\t\t\tconst workspaceCompilationPaths = this._utils.editorWorkspace.getCompilationPaths();\r\n\t\t\t\tconst modSource = fs.readFileSync(workspaceCompilationPaths.modSourcePath, 'utf8');\r\n\r\n\t\t\t\tconst metadata = this._utils.modSource.extractMetadata(modSource, this._language);\r\n\t\t\t\tif (!metadata.id) {\r\n\t\t\t\t\tthrow new Error('Mod id must be specified in the source code');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst modId = metadata.id;\r\n\t\t\t\tconst localModId = 'local@' + modId;\r\n\r\n\t\t\t\tif (modId !== oldModId) {\r\n\t\t\t\t\tif (this._utils.modSource.doesSourceExist(localModId) || this._utils.modConfig.doesConfigExist(localModId)) {\r\n\t\t\t\t\t\tthrow new Error('Mod id specified in the source code already exists');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst initialSettingsForEngine = this._utils.modSource.extractInitialSettingsForEngine(modSource);\r\n\r\n\t\t\t\tconst { targetDllName, deleteOldModFiles } = await this._utils.compiler.compileMod(\r\n\t\t\t\t\tlocalModId,\r\n\t\t\t\t\tmetadata.version || '',\r\n\t\t\t\t\tworkspaceCompilationPaths,\r\n\t\t\t\t\tmetadata.architecture,\r\n\t\t\t\t\tmetadata.compilerOptions\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (modId !== oldModId) {\r\n\t\t\t\t\tthis._utils.modConfig.changeModId(localOldModId, localModId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._utils.modConfig.setModConfig(localModId, {\r\n\t\t\t\t\tlibraryFileName: targetDllName,\r\n\t\t\t\t\tdisabled: data.disabled,\r\n\t\t\t\t\tloggingEnabled: data.loggingEnabled,\r\n\t\t\t\t\t// debugLoggingEnabled: false,\r\n\t\t\t\t\tinclude: metadata.include || [],\r\n\t\t\t\t\texclude: metadata.exclude || [],\r\n\t\t\t\t\t// includeCustom: [],\r\n\t\t\t\t\t// excludeCustom: [],\r\n\t\t\t\t\t// includeExcludeCustomOnly: false,\r\n\t\t\t\t\tarchitecture: metadata.architecture || [],\r\n\t\t\t\t\tversion: metadata.version || ''\r\n\t\t\t\t}, initialSettingsForEngine || {});\r\n\r\n\t\t\t\tthis._utils.modSource.setSource(localModId, modSource);\r\n\r\n\t\t\t\tif (modId !== oldModId) {\r\n\t\t\t\t\tthis._utils.modSource.deleteSource(localOldModId);\r\n\r\n\t\t\t\t\tthis._utils.editorWorkspace.setEditorModeModId(modId);\r\n\r\n\t\t\t\t\tthis._editedModId = modId;\r\n\t\t\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\t\tcommand: 'setEditedModId',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tmodId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdeleteOldModFiles();\r\n\r\n\t\t\t\tif (data.loggingEnabled) {\r\n\t\t\t\t\twindhawkLogOutput?.createOrShow(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindhawkCompilerOutput?.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tWindhawkPanel.refreshIfExists('Preview', {\r\n\t\t\t\t\tpreviewModId: localModId\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._editedModWasModified = false;\r\n\t\t\t\tthis._editedModCompilationFailed = false;\r\n\t\t\t\tthis._utils.editorWorkspace.markEditorModeModAsModified(false);\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportCompilerException(e);\r\n\t\t\t\tthis._editedModCompilationFailed = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'compileEditedMod',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis._editedModBeingCompiled = false;\r\n\t\t},\r\n\t\tpreviewEditedMod: async message => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!this._editedModId) {\r\n\t\t\t\t\tthrow new Error('No mod is being edited');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst localModId = 'local@' + this._editedModId;\r\n\t\t\t\tawait vscode.commands.executeCommand('windhawk.start', {\r\n\t\t\t\t\ttitle: 'Preview',\r\n\t\t\t\t\tcreateColumn: vscode.ViewColumn.Beside,\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tpreviewModId: localModId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowLogOutput: message => {\r\n\t\t\ttry {\r\n\t\t\t\twindhawkLogOutput?.createOrShow();\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\texitEditorMode: async message => {\r\n\t\t\tconst data: ExitEditorModeData = message.data;\r\n\r\n\t\t\tlet succeeded = false;\r\n\t\t\ttry {\r\n\t\t\t\tif (!await vscode.workspace.saveAll(true)) {\r\n\t\t\t\t\tthrow new Error('Failed to save all files');\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindhawkLogOutput?.dispose();\r\n\r\n\t\t\t\tif (this._editedModId) {\r\n\t\t\t\t\tif (this._editedModWasModified && data.saveToDrafts) {\r\n\t\t\t\t\t\tthis._utils.editorWorkspace.saveModToDrafts(this._editedModId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._utils.editorWorkspace.deleteModFromDrafts(this._editedModId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editedModId = undefined;\r\n\t\t\t\tthis._editedModWasModified = false;\r\n\t\t\t\tthis._editedModCompilationFailed = false;\r\n\t\t\t\tawait this._utils.editorWorkspace.exitEditorMode();\r\n\r\n\t\t\t\tsucceeded = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treportException(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._view?.webview.postMessage({\r\n\t\t\t\ttype: 'reply',\r\n\t\t\t\tcommand: 'exitEditorMode',\r\n\t\t\t\tmessageId: message.messageId,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsucceeded\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _handleMessage(message: any) {\r\n\t\tconst { command, ...rest } = message;\r\n\t\tthis._handleMessageMap[command](rest);\r\n\t}\r\n}\r\n\r\nfunction reportException(e: any) {\r\n\tconsole.error(e);\r\n\tvscode.window.showErrorMessage(e.message);\r\n}\r\n\r\nfunction reportCompilerException(e: any, treatCompilationErrorAsException = false) {\r\n\tif (!(e instanceof CompilerError)) {\r\n\t\treportException(e);\r\n\t\treturn;\r\n\t}\r\n\r\n\ttry {\r\n\t\tconst stdout = fs.readFileSync(e.stdoutPath, 'utf8').trim();\r\n\t\tconst stderr = fs.readFileSync(e.stderrPath, 'utf8').trim();\r\n\t\tlet log = stdout;\r\n\t\tif (stdout !== '') {\r\n\t\t\tlog += '\\n\\n';\r\n\t\t}\r\n\t\tlog += stderr + '\\n';\r\n\r\n\t\twindhawkCompilerOutput?.append(log);\r\n\t\twindhawkCompilerOutput?.show();\r\n\r\n\t\tif (treatCompilationErrorAsException) {\r\n\t\t\treportException(e);\r\n\t\t}\r\n\t} catch (e) {\r\n\t\treportException(e);\r\n\t}\r\n}\r\n\r\n// https://stackoverflow.com/a/6234804\r\nfunction escapeHtml(unsafe: string) {\r\n\treturn unsafe\r\n\t\t.replace(/&/g, \"&amp;\")\r\n\t\t.replace(/</g, \"&lt;\")\r\n\t\t.replace(/>/g, \"&gt;\")\r\n\t\t.replace(/\"/g, \"&quot;\")\r\n\t\t.replace(/'/g, \"&#039;\");\r\n}\r\n","import * as reg from 'native-reg';\r\nimport * as path from 'path';\r\nimport * as vscode from 'vscode';\r\nimport config from './config';\r\nimport * as ini from './ini';\r\n\r\ntype FileSystemPaths = {\r\n\tappRootPath: string,\r\n\tappDataPath: string,\r\n\tenginePath: string,\r\n\tcompilerPath: string,\r\n\tuiPath: string\r\n};\r\n\r\ntype StoragePathsPortable = {\r\n\tportable: true,\r\n\tfsPaths: FileSystemPaths\r\n};\r\n\r\ntype StoragePathsNonPortable = {\r\n\tportable: false,\r\n\tfsPaths: FileSystemPaths,\r\n\tregKey: reg.HKEY,\r\n\tregSubKey: string\r\n};\r\n\r\nexport type StoragePaths =\r\n\t| StoragePathsPortable\r\n\t| StoragePathsNonPortable;\r\n\r\nfunction getAppRootPath() {\r\n\tconst debugAppRootPath = config.debug.appRootPath;\r\n\tif (debugAppRootPath) {\r\n\t\treturn debugAppRootPath;\r\n\t}\r\n\r\n\tconst vscodeInstallPath = vscode.env.appRoot; // returns <vscode_dir>\\resources\\app\r\n\treturn path.dirname(path.dirname(path.dirname(vscodeInstallPath)));\r\n}\r\n\r\nfunction getStorageConfig(appRootPath: string) {\r\n\tconst iniFilePath = path.join(appRootPath, 'windhawk.ini');\r\n\treturn ini.fromFile(iniFilePath);\r\n}\r\n\r\nfunction expandEnvironmentVariables(path: string) {\r\n\t// https://stackoverflow.com/a/21363956\r\n\treturn path.replace(/%([^%]+)%/g, (original, matched) => {\r\n\t\treturn process.env[matched] ?? original;\r\n\t});\r\n}\r\n\r\nexport function getStoragePaths(): StoragePaths {\r\n\tconst appRootPath = getAppRootPath();\r\n\tconst storageConfig = getStorageConfig(appRootPath);\r\n\r\n\tconst portable = !!parseInt(storageConfig.Storage.Portable, 10);\r\n\r\n\tconst processPath = (p: string) => path.resolve(appRootPath, expandEnvironmentVariables(p));\r\n\r\n\tconst appDataPath = processPath(storageConfig.Storage.AppDataPath);\r\n\tconst enginePath = processPath(storageConfig.Storage.EnginePath);\r\n\tconst compilerPath = processPath(storageConfig.Storage.CompilerPath);\r\n\tconst uiPath = processPath(storageConfig.Storage.UIPath);\r\n\r\n\tif (portable) {\r\n\t\treturn {\r\n\t\t\tportable,\r\n\t\t\tfsPaths: {\r\n\t\t\t\tappRootPath,\r\n\t\t\t\tappDataPath,\r\n\t\t\t\tenginePath,\r\n\t\t\t\tcompilerPath,\r\n\t\t\t\tuiPath\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tconst registryKey = storageConfig.Storage.RegistryKey;\r\n\tlet i = registryKey.indexOf('\\\\');\r\n\tif (i === -1) {\r\n\t\ti = registryKey.length;\r\n\t}\r\n\r\n\tlet regKey: reg.HKEY;\r\n\tswitch (registryKey.slice(0, i)) {\r\n\t\tcase 'HKEY_CURRENT_USER':\r\n\t\tcase 'HKCU':\r\n\t\t\tregKey = reg.HKCU;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'HKEY_USERS':\r\n\t\tcase 'HKU':\r\n\t\t\tregKey = reg.HKU;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'HKEY_LOCAL_MACHINE':\r\n\t\tcase 'HKLM':\r\n\t\t\tregKey = reg.HKLM;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tthrow new Error('Unsupported registry path');\r\n\t}\r\n\r\n\tconst regSubKey = registryKey.slice(i + 1);\r\n\r\n\treturn {\r\n\t\tportable,\r\n\t\tfsPaths: {\r\n\t\t\tappRootPath,\r\n\t\t\tappDataPath,\r\n\t\t\tenginePath,\r\n\t\t\tcompilerPath,\r\n\t\t\tuiPath\r\n\t\t},\r\n\t\tregKey,\r\n\t\tregSubKey\r\n\t};\r\n}\r\n"],"names":["binding","exports","fd","flags","oper","flag","constants","LOCK_SH","LOCK_EX","LOCK_NB","LOCK_UN","Error","stringToFlockFlags","flock","hasOwnProperty","Object","prototype","eol","process","platform","encode","obj","opt","children","out","section","whitespace","create","separator","k","keys","val","Array","isArray","i","item","entries","safe","push","length","nk","dotSplit","join","child","str","replace","split","map","part","decode","p","re","lines","line","match","undefined","unsafe","key","value","call","remove","parts","l","pop","nl","del","isQuoted","charAt","slice","trim","doUnesc","substr","module","parse","stringify","helpers","ValidatorResult","SchemaError","attribute","validators","testSchemaNoThrow","instance","options","ctx","callback","schema","throwError","throwAll","res","this","validateSchema","valid","Function","getEnumerableProperty","object","getPrototypeOf","propertyIsEnumerable","testAdditionalProperty","property","result","types","properties","additionalProperties","addError","name","argument","message","JSON","preValidateProperty","makeChild","importErrors","type","some","testType","bind","list","v","id","$id","anyOf","inner","title","nestedErrors","allOf","self","forEach","msg","errors","oneOf","count","filter","if","isSchema","ifValid","then","else","propertyNames","subschema","prop","patternProperties","test","pattern","regexp","RegExp","_e","minProperties","maxProperties","items","array","every","additionalItems","contains","minimum","number","exclusiveMinimum","maximum","exclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","getDecimalPlaces","divisorDecimals","maxDecimals","Math","max","multiplier","pow","round","testArrays","a","j","len","deepCompareStrict","multipleOf","divisibleBy","required","n","string","toString","format","disableFormat","isFormat","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dependencies","dep","childContext","propertyPath","String","not","disallow","notTypes","schemaId","uri","ValidationError","path","reduce","sum","makeSuffix","stack","throwFirst","stringizer","ValidatorResultError","captureStackTrace","detail","err","validatorType","concat","defineProperty","get","constructor","enumerable","SchemaContext","base","schemas","resolve","target","propertyName","FORMAT_REGEXPS","input","parseFloat","parseInt","isNaN","e","regex","ipv4","validator","customFormats","deepMerger","dst","deepMerge","indexOf","copyist","src","copyistWithDeepMerge","pathEncoder","encodeURIComponent","b","aKeys","bKeys","objectGetPath","o","s","shift","decodeURIComponent","encodePath","decimalPlaces","Number","decimalParts","Validator","validate","urilib","SchemaScanResult","found","ref","scanSchema","baseuri","$ref","resolvedUri","ourBase","substring","scanArray","extends","scanObject","definitions","unresolvedRefs","attributes","shouldResolve","addSchema","scan","ourUri","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","sch","schemaobj","schemaTraverser","superResolve","switchSchema","resolved","subctx","skipAttributes","ignoreProperties","validatorErr","allowUnknownAttributes","rewrite","parsed","fragment","hash","document","isFinite","integer","boolean","date","Date","any","HKEY","ValueType","GetValueFlags","OpenKeyOptions","CreateKeyOptions","assert","isExternal","x","isWindows","native","__dirname","isHKEY","hkey","setValueRaw","valueName","valueType","data","Buffer","isBuffer","setValue","parseValue","fail","SZ","EXPAND_SZ","trimUcs2Null","parseString","BINARY","DWORD_LITTLE_ENDIAN","readUInt32LE","DWORD_BIG_ENDIAN","readUInt32BE","MULTI_SZ","parseMultiString","QWORD_LITTLE_ENDIAN","readBigUInt64LE","Access","CLASSES_ROOT","CURRENT_USER","LOCAL_MACHINE","USERS","subKey","access","createKey","openKey","enumKeyNames","enumValueNames","newSubKey","renameKey","deleteKey","deleteTree","closeKey","from","formatString","DWORD","alloc","writeUInt32LE","formatDWORD","RT_ANY","getValue","getValueRaw","addon","fs","os","runtimeRequire","vars","config","variables","prebuildsOnly","env","PREBUILDS_ONLY","abi","versions","modules","runtime","electron","ELECTRON_RUN_AS_NODE","window","nw","arch","npm_config_arch","npm_config_platform","libc","LIBC","existsSync","isAlpine","armv","ARM_VERSION","arm_version","uv","load","dir","readdirSync","getFirst","files","matchBuild","parseTuple","arr","architectures","Boolean","matchTuple","tuple","includes","compareTuples","parseTags","file","tags","specificity","tag","napi","matchTags","runtimeAgnostic","compareTags","toUpperCase","release","debug","prebuild","nearby","dirname","execPath","node","sort","prebuilds","winner","dlopen","error","ANY","Symbol","Comparator","comp","parseOptions","loose","semver","operator","version","r","t","COMPARATORLOOSE","COMPARATOR","m","TypeError","SemVer","er","cmp","intersects","Range","includePrerelease","startsWith","safeRe","SPACE_CHARACTERS","range","raw","set","formatted","parseRange","c","first","isNullSet","isAny","comps","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","Map","comparators","size","has","delete","values","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","num","build","compare","other","compareMain","comparePre","compareBuild","inc","identifier","identifierBase","eq","neq","gt","gte","lt","lte","op","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","next","exec","index","lastIndex","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","prefix","throwErrors","internalRe","identifiers","clean","diff","rcompare","compareLoose","rsort","coerce","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","NODE_DEBUG","args","console","numeric","anum","bnum","firstKey","looseOption","freeze","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","token","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","maxSV","rangeObj","min","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","prev","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","Set","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","add","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","normalize","findStatus","start","end","mid","floor","regexAstralSymbols","countSymbols","combiningMarksRegex","validateLabel","label","processing_option","toUnicode","search","status","codePointAt","processing","domain_name","useSTD3","hasError","processed","codePoint","fromCodePoint","apply","mapChars","labels","validation","toASCII","verifyDnsLength","total","domain","vscode","localize","bundle","init","extensionPath","resolveLanguagePack","rest","defaultResolvedLanguage","resolvedLanguage","rootPath","cwd","locale","candidate","lastIndexOf","defaultLanguageBundle","readFileSync","languageFilePath","ResolvedLanguageBundle","assign","language","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","upperBound","moduloVal","moduloBitLength","moduloBound","V","opts","enforceRange","abs","clamp","evenRound","treatNullAsEmptyString","S","U","charCodeAt","d","usm","implementation","constructorArgs","url","parsedBase","basicURLParse","parsedURL","baseURL","_url","href","serializeURL","origin","serializeURLOrigin","protocol","scheme","stateOverride","username","cannotHaveAUsernamePasswordPort","setTheUsername","password","setThePassword","host","port","serializeHost","serializeInteger","cannotBeABaseURL","hostname","pathname","query","toJSON","utils","Impl","impl","implSymbol","URL","arguments","setup","is","configurable","privateData","wrapper","wrapperSymbol","interface","expose","Window","Worker","tr46","specialSchemes","ftp","gopher","http","https","ws","wss","failure","ucs2","at","idx","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","buffer","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","buf","utf8PercentEncode","parseIPv4Number","parseHost","isSpecialArg","address","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","swaps","temp","parseIPv6","output","decoded","parseOpaqueHost","utf8PercentDecode","asciiDomain","ipv4Host","numbers","counter","parseIPv4","serializeIPv4","maxIdx","maxLen","currStart","currLen","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","trimControlChars","trimTabAndNewline","state","atFlag","arrFlag","passwordTokenSeenFlag","isASCIIAlphanumeric","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","excludeFragment","parseURL","serializeOrigin","mixin","source","getOwnPropertyNames","getOwnPropertyDescriptor","wrapperForImpl","implForWrapper","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","definition","toStringTag","nmd","paths","Readable","BUFFER","TYPE","Blob","blobParts","buffers","element","ArrayBuffer","isView","byteOffset","byteLength","text","Promise","arrayBuffer","ab","stream","readable","_read","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","code","errno","convert","defineProperties","writable","INTERNALS","PassThrough","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","disturbed","on","consumeBody","_this4","reject","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","append","getAll","clone","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","headers","json","_this2","textConverted","_this3","charset","convertBody","mixIn","proto","desc","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","MAP","Headers","rawHeaders","headerNames","headerName","method","iterator","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","INTERNAL","HeadersIteratorPrototype","setPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","contentType","statusText","ok","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","Request","inputBody","signal","isAbortSignal","redirect","follow","agent","AbortError","URL$1","PassThrough$1","fetch","request","contentLengthValue","totalBytes","getNodeRequestOptions","send","response","destroyStream","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","errorCallback","hadError","listenerCount","fixResponseChunkedTransferBadEnding","addListener","hasDataListener","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","destination","orig","dest","endsWith","isDomainOrSubdomain","response_options","statusMessage","codings","zlibOptions","flush","finishFlush","write","writeToStream","destroy","urls","mods","modsFolder","v8debug","execArgv","reactProjectBuildPath","appRootPath","disableMinimalMode","disableEnvVarCheck","WindhawkLogOutput","logOutputProcessPath","_logOutputProcessPath","createOrShow","preserveFocus","_logOutputChannel","createOutputChannel","show","_logOutputProcess","ps","stdout","stderr","gotError","showErrorMessage","dispose","kill","fromFile","filePath","contents","ini","sectionName","fromFileOrDefault","defaultValue","toFile","AppSettingsUtilsPortable","appDataPath","settingsIniPath","engineSettingsIniPath","getAppSettings","iniFileParsed","engineIniFileParsed","Settings","Language","disableUpdateCheck","DisableUpdateCheck","disableRunUIScheduledTask","devModeOptOut","DevModeOptOut","devModeUsedAtLeastOnce","DevModeUsedAtLeastOnce","hideTrayIcon","HideTrayIcon","dontAutoShowToolkit","DontAutoShowToolkit","modTasksDialogDelay","ModTasksDialogDelay","safeMode","SafeMode","loggingVerbosity","LoggingVerbosity","engine","include","Include","exclude","Exclude","injectIntoCriticalProcesses","InjectIntoCriticalProcesses","loadModsInCriticalSystemProcesses","LoadModsInCriticalSystemProcesses","updateAppSettings","appSettings","shouldRestartApp","shouldNotifyTrayProgram","AppSettingsUtilsNonPortable","regKey","regSubKey","engineRegSubKey","QUERY_VALUE","WOW64_64KEY","engineKey","RT_REG_SZ","RT_REG_DWORD","SET_VALUE","setInstallerLanguage","warn","enableScheduledTask","lcidMap","languageParts","languageLcid","lcid","iterLanguage","iterLanguageParts","WOW64_32KEY","taskName","enable","stderrFiltered","showWarningMessage","CompilerError","stdoutPath","stderrPath","super","CompilerUtils","compilerPath","enginePath","engineModsPath","doesCompiledModExist","fileName","bits","compiledModPath","makePrecompiledHeaders","pchHeaderPath","targetPchPath","stdoutOutputPath","stderrOutputPath","modId","modVersion","extraArgs","gppPath","arg","compileModInternal","modSourcePath","targetDllName","pchPath","engineLibPath","recursive","cppVersion","windowsVersionFlags","backwardCompatibilityFlags","deleteOldModFilesInFolder","currentDllName","compiledModsPath","compiledModsDir","compiledModsDirEntry","readSync","isFile","filename","closeSync","deleteOldModFiles","copyCompilerLibs","llvmArch","libsPath","targetModsPath","libsDir","libsDirEntry","libPath","libPathDest","mtimeMs","libPathDestExt","libPathDestBaseName","tempFilename","libPathDestTemp","compileMod","workspacePaths","architecture","compilerOptions","random","compilerOptionsArray","singleQuoteOpen","doubleQuoteOpen","tokenBuffer","matches","splitargs","allArchitectures","deleteModFiles","EditorWorkspaceUtils","firstWorkspaceFolder","workspaceFolders","executeCommand","workspacePath","fsPath","getFilePath","getCompilationPaths","getDraftsPath","initializeEditorSettings","stdio","initializeFromModSource","modSource","modSourceFromDrafts","saveModToDrafts","draftsPath","loadModFromDrafts","deleteModFromDrafts","toggleMinimalLayout","minimal","vscodeConfig","getConfiguration","thenableArray","update","all","enterEditorMode","modWasModified","preview","exitEditorMode","restoreEditorMode","modIdConfig","setEditorModeModId","markEditorModeModAsModified","modified","getSettingsChangeTime","now","mergeModSettings","existingSettings","newSettings","getNamePrefix","existingNamePrefixes","mergedSettings","existingSettingsChanged","ModConfigUtilsPortable","engineModsWritablePath","getModIniPath","getModWritableIniPath","getConfigOfInstalled","engineModsDir","engineModsDirEntry","modConfig","Mod","LibraryFileName","libraryFileName","disabled","Disabled","loggingEnabled","LoggingEnabled","debugLoggingEnabled","DebugLoggingEnabled","includeCustom","IncludeCustom","excludeCustom","ExcludeCustom","includeExcludeCustomOnly","IncludeExcludeCustomOnly","Architecture","Version","doesConfigExist","getModConfig","ModSettingsToIniSection","settings","setModConfig","initialSettings","modIniPath","configExisted","SettingsChangeTime","getModSettings","setModSettings","enableMod","enableLogging","deleteMod","modWritableIniPath","changeModId","modIdFrom","modIdTo","modIniPathFrom","modIniPathTo","modWritableIniPathFrom","modWritableIniPathTo","ModConfigUtilsNonPortable","regSubKeyModWritable","ENUMERATE_SUB_KEYS","valueSigned","settingsKey","DELETE","valueUnsigned","modKey","WRITE","isNothing","subject","common","isObject","toArray","sequence","repeat","cycle","isNegativeZero","NEGATIVE_INFINITY","extend","sourceKeys","formatError","exception","compact","where","reason","mark","column","snippet","YAMLException$1","getLine","lineStart","lineEnd","position","maxLineLength","head","tail","maxHalfLength","pos","padStart","indent","linesBefore","linesAfter","lineStarts","lineEnds","foundLineNo","lineNoLength","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","construct","instanceOf","predicate","represent","representName","defaultStyle","multi","styleAliases","style","alias","compileStyleAliases","compileList","currentType","newIndex","previousType","previousIndex","Schema$1","implicit","explicit","type$1","loadKind","compiledImplicit","compiledExplicit","compiledTypeMap","scalar","mapping","fallback","collectType","compileMap","failsafe","_null","canonical","lowercase","uppercase","camelcase","empty","bool","isOctCode","isDecCode","ch","hasDigits","binary","octal","decimal","hexadecimal","YAML_FLOAT_PATTERN","SCIENTIFIC_WITHOUT_DOT","POSITIVE_INFINITY","NaN","core","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","timestamp","year","month","day","hour","minute","second","fraction","delta","UTC","setTime","getTime","toISOString","merge","BASE64_MAP","bitlen","tailbits","Uint8Array","_hasOwnProperty$3","_toString$2","omap","pairKey","pairHasKey","objectKeys","_toString$1","_hasOwnProperty$2","_default","_hasOwnProperty$1","CONTEXT_FLOW_IN","CONTEXT_FLOW_OUT","CONTEXT_BLOCK_IN","CONTEXT_BLOCK_OUT","CHOMPING_CLIP","CHOMPING_STRIP","CHOMPING_KEEP","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","lc","simpleEscapeSequence","charFromCodepoint","fromCharCode","simpleEscapeCheck","simpleEscapeMap","State$1","onWarning","legacy","listener","implicitTypes","typeMap","lineIndent","firstTabInLine","documents","generateError","throwWarning","directiveHandlers","YAML","checkLineBreaks","TAG","handle","tagMap","captureSegment","checkJson","_position","_length","_character","_result","mergeMappings","overridableKeys","quantity","storeMappingPair","keyTag","keyNode","valueNode","startLine","startLineStart","startPos","readLineBreak","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","readBlockSequence","nodeIndent","_line","_tag","_anchor","anchor","detected","anchorMap","composeNode","readTagProperty","tagHandle","tagName","isVerbatim","isNamed","readAnchorProperty","parentIndent","nodeContext","allowToSeek","allowCompact","allowBlockStyles","allowBlockScalars","allowBlockCollections","typeIndex","typeQuantity","typeList","flowIndent","blockIndent","indentStatus","atNewLine","hasContent","following","_keyLine","_keyLineStart","_keyPos","atExplicitKey","readBlockMapping","_lineStart","_pos","terminator","isPair","isExplicitPair","isMapping","readNext","readFlowCollection","captureStart","folding","tmp","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockScalar","captureEnd","readSingleQuotedScalar","hexLength","hexResult","readDoubleQuotedScalar","readAlias","withinFlowCollection","hasPendingContent","_lineIndent","_kind","readPlainScalar","readDocument","directiveName","directiveArgs","documentStart","hasDirectives","loadDocuments","nullpos","loader","renamed","JSON_SCHEMA","modMetadataParams","singleValue","singleValueLocalizable","multiValue","isModMetadataParamsSingleValue","isModMetadataParamsMultiValue","ModSourceUtils","modsSourcePath","getModSourcePath","getBestLanguageMatch","matchLanguage","candidates","languages","foundIndex","findIndex","extractMetadataRaw","metadataBlockMatch","metadataBlock","lineTrimmed","trimEnd","lineTruncated","validateMetadata","metadata","category","pathsArray","supportedArchitecture","extractMetadata","metadataRaw","metadataKey","metadataValue","appendToIdAndName","appendToId","appendToName","p3","p2New","getMetadataOfInstalled","onLoadError","modsSourceDir","modsSourceDirEntry","modSourceMetadata","getSource","setSource","doesSourceExist","extractReadme","readmeBlockMatch","extractInitialSettingsRaw","settingsBlockMatch","validatorResult","extractInitialSettings","parseSettings","parseSettingsValueAnnotated","actualParameters","actualParameter","metaParameters","paramWithPrefix","paramParts","parseSettingsValue","settingsRaw","extractInitialSettingsForEngine","keyPrefix","deleteSource","TrayProgramUtils","trayProgramPath","getCleanProcessEnv","cleanEnv","runTrayProgramWithArgs","runTrayProgramWithArgsDetached","detached","unref","postAppRestart","postNewUpdatesFound","postAppSettingsChanged","UserProfile","userProfilePath","onFileModified","userProfileText","userProfile","app","getAppLatestVersion","latestVersion","getModRating","rating","getModLatestVersion","setModVersion","resetLatestVersion","mod","setModDisabled","setModRating","updateLatestVersions","appLatestVersion","modLatestVersions","updated","asExternalUpdate","UserProfileUtils","lastModifiedByUserMtimeMs","read","getLastModifiedByUserMtimeMs","baseDebugReactUiPath","windhawkLogOutput","windhawkCompilerOutput","activate","context","WINDHAWK_UI_PATH","debugAppRootPath","vscodeInstallPath","appRoot","getAppRootPath","storageConfig","getStorageConfig","portable","Storage","Portable","processPath","matched","AppDataPath","EnginePath","CompilerPath","uiPath","UIPath","fsPaths","registryKey","RegistryKey","compiler","editorWorkspace","trayProgram","sidebarWebviewViewProvider","WindhawkViewProvider","extensionUri","subscriptions","registerWebviewViewProvider","viewType","onDidSaveTextDocument","doc","fileWasModified","onEnterEditorMode","setEditedMod","onAppSettingsUpdated","appSettingsUpdated","registerCommand","WindhawkPanel","catch","reportException","onUserProfileModified","userProfileChanged","userProfileWatcher","createFileSystemWatcher","onDidCreate","onDidChange","callbacks","activeTextEditor","viewColumn","currentPanel","refresh","params","_panel","reveal","localResourceRoots","joinPath","panel","createWebviewPanel","createColumn","One","enableScripts","refreshIfExists","_disposables","_language","_checkForUpdates","_handleMessageMap","getInitialAppSettings","appUISettings","_utils","_getAppUISettings","webview","postMessage","command","messageId","getInstalledMods","installedMods","modsMetadata","modsConfig","modLatestVersion","updateAvailable","userRating","getFeaturedMods","async","featuredMods","repositoryMods","_fetchRepositoryMods","fromEntries","featured","getRepositoryMods","unifiedModsData","repository","installed","getModSourceData","readme","getRepositoryModSourceData","modSettings","succeeded","updateModConfig","installMod","installedModDetails","clear","hide","initialSettingsForEngine","reportCompilerException","compiledModDetails","enabled","createNewMod","_extensionPath","newModId","localModId","modIdSuffix","modNameSuffix","_callbacks","editMod","forkMod","forkModId","updateModRating","newAppSettings","showAdvancedDebugLogOutput","_extensionUri","html","_getHtmlForWebview","iconPath","light","dark","onDidDispose","onDidReceiveMessage","_handleMessage","_userProfileChanged","webviewPathOnDisk","baseWebviewUri","asWebviewUri","csp","cspSource","dataParams","updateIsAvailable","currentVersion","getExtension","packageJSON","installedModsDetails","details","_updateUserProfileJson","_editedModWasModified","_editedModBeingCompiled","_editedModCompilationFailed","_view","getInitialSidebarParams","_postEditedModDetails","enableEditedMod","_editedModId","enableEditedModLogging","compileEditedMod","saveAll","oldModId","localOldModId","workspaceCompilationPaths","previewModId","previewEditedMod","Beside","showLogOutput","saveToDrafts","resolveWebviewView","webviewView","_token","onDidChangeVisibility","visible","showInformationMessage","modDetails","treatCompilationErrorAsException","log"],"sourceRoot":""}